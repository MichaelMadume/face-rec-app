(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"1G5W":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("zx2A");function a(e){return t=>t.lift(new s(e))}class s{constructor(e){this.notifier=e}call(e,t){const n=new i(e),a=Object(r.c)(this.notifier,new r.a(n));return a&&!n.seenValue?(n.add(a),t.subscribe(n)):n}}class i extends r.b{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},"2QA8":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("XNiG"),a=n("9ppp");class s extends r.a{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.a;return this._value}next(e){super.next(this._value=e)}}},"2fFW":function(e,t,n){"use strict";n.d(t,"a",function(){return a});let r=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"3E0/":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("D0XW"),a=n("7o/Q"),s=n("WMd4");function i(e,t=r.a){var n;const a=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new o(a,t))}class o{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))}}class l extends a.a{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,a=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(a);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new u(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(s.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(s.a.createComplete()),this.unsubscribe()}}class u{constructor(e,t){this.time=e,this.notification=t}}},"3N8a":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("quSY");class a extends r.a{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(a){n=!0,r=!!a&&a||new Error(a)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},"4I5i":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},"4xwX":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSG"),a=n("NhtI"),s=n("PqYM"),i=n("fXoL"),o=n("aceb"),l=n("ofXK");const u=["videoElement"],h=["canvas"];function c(e,t){if(1&e){const e=i.Xb();i.Wb(0,"nb-card-footer"),i.Wb(1,"div",1),i.Wb(2,"div",17),i.Wb(3,"button",18),i.cc("click",function(){return i.qc(e),i.ec().capturePhoto()}),i.yc(4," Capture "),i.Vb(),i.Vb(),i.Vb(),i.Vb()}if(2&e){const e=i.ec();i.Eb(3),i.kc("disabled",!e.allowCapture)}}let d=(()=>{class e{constructor(e,t){this.dialogRef=e,this.cd=t,this.useCamera=!1,this.allowCapture=!1,this.constraints={video:{facingMode:"environment",width:500,height:500}},this.drawOptions={bufferedOutput:!1,drawBoxes:!1,drawGaze:!1,drawLabels:!1,drawPolygons:!0,drawPoints:!1},this.photo="",this.human=new a.a({modelBasePath:"./models/",face:{enabled:!0,detector:{rotation:!1,skipFrames:1,maxDetected:1},description:{enabled:!1},emotion:{enabled:!1},iris:{enabled:!0}},body:{enabled:!1},gesture:{enabled:!1},filter:{flip:!0},object:{enabled:!1},hand:{enabled:!1},videoOptimized:!0,backend:"webgl"}),this.isLive=!0}ngOnInit(){}ngAfterViewInit(){return Object(r.a)(this,void 0,void 0,function*(){this.video=this.videoElement.nativeElement;const e=yield navigator.mediaDevices.getUserMedia(this.constraints);e&&(this.video.srcObject=e,yield this.video.play(),this.allowCapture=!0,this.cd.detectChanges())})}detectHuman(){return Object(r.a)(this,void 0,void 0,function*(){for(;this.isLive;){const e=yield this.human.detect(this.video);e.error&&(yield Object(s.a)(1e3).toPromise(),this.close()),this.drawMesh(e)}})}initCameraAI(){this.detectHuman(),this.useCamera=!0}drawMesh(e){const t=this.canvas.nativeElement,n=t.getContext("2d");e.canvas&&(e.canvas.width!==t.width&&(t.width=e.canvas.width),e.canvas.height!==t.height&&(t.height=e.canvas.height)),n.clearRect(0,0,t.width,t.height),this.human.draw.face(t,e.face,this.drawOptions)}capturePhoto(){return Object(r.a)(this,void 0,void 0,function*(){navigator.vibrate(200),this.video=this.videoElement.nativeElement;const e=document.createElement("canvas");e.width=500,e.height=500,e.getContext("2d").drawImage(this.video,0,0,e.width,e.height);const t=e.toDataURL("image/jpeg",1);this.dialogRef.close(t)})}extractImage(e){return Object(r.a)(this,void 0,void 0,function*(){const t=e.target.files;console.log(t.item(0)),this.fileData=t.item(0);const n=yield new Promise((e,t)=>{const n=new FileReader;n.readAsDataURL(this.fileData),n.onload=()=>e(n.result),n.onerror=e=>t(e)});this.dialogRef.close(n)})}close(){this.dialogRef.close()}ngOnDestroy(){this.isLive=!1,this.video.pause(),this.video.srcObject.getTracks().forEach(e=>e.stop())}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(o.s),i.Qb(i.h))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-photo-modal"]],viewQuery:function(e,t){if(1&e&&(i.Bc(u,5),i.Bc(h,5)),2&e){let e;i.nc(e=i.dc())&&(t.videoElement=e.first),i.nc(e=i.dc())&&(t.canvas=e.first)}},decls:24,vars:4,consts:[["xyz","fade down delay-2",1,"xyz-in"],[1,"row"],[1,"col-auto"],[1,"col-12",3,"hidden"],["accept","image/*","size","medium","type","file","id","files",2,"display","none",3,"change"],["file",""],[1,"col-12","mt-3"],["fullWidth","","nbButton","","status","primary",3,"click"],["icon","folder-add"],[1,"col-12","mt-5"],["icon","camara-outline"],[1,"video-container"],["width","300px","height","300px","id","canvas",1,"canvas",3,"hidden"],["canvas",""],[1,"mx-auto",3,"hidden"],["videoElement",""],[4,"ngIf"],[1,"col"],["nbButton","","fullWidth","","status","primary",3,"disabled","click"]],template:function(e,t){if(1&e){const e=i.Xb();i.Wb(0,"nb-card",0),i.Wb(1,"nb-card-header"),i.Wb(2,"div",1),i.Wb(3,"div",2),i.Wb(4,"h6"),i.yc(5,"Set Photo"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(6,"nb-card-body"),i.Wb(7,"div",3),i.Wb(8,"input",4,5),i.cc("change",function(e){return t.extractImage(e)}),i.Vb(),i.Wb(10,"div",6),i.Wb(11,"button",7),i.cc("click",function(){return i.qc(e),i.oc(9).click()}),i.Rb(12,"nb-icon",8),i.yc(13," From File "),i.Vb(),i.Vb(),i.Wb(14,"div",9),i.Wb(15,"button",7),i.cc("click",function(){return t.initCameraAI()}),i.Rb(16,"nb-icon",10),i.yc(17," From Camera "),i.Vb(),i.Vb(),i.Vb(),i.Wb(18,"div",11),i.Rb(19,"canvas",12,13),i.Rb(21,"video",14,15),i.Vb(),i.Vb(),i.wc(23,c,5,1,"nb-card-footer",16),i.Vb()}2&e&&(i.Eb(7),i.kc("hidden",t.useCamera),i.Eb(12),i.kc("hidden",!t.useCamera),i.Eb(2),i.kc("hidden",!t.useCamera),i.Eb(2),i.kc("ngIf",t.useCamera))},directives:[o.n,o.p,o.m,o.h,o.u,l.o,o.o],styles:["video[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}canvas[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{width:300px;border-radius:var(--card-border-radius)}canvas[_ngcontent-%COMP%]{position:absolute;z-index:999}.video-container[_ngcontent-%COMP%]{position:relative}"]}),e})()},"5+tZ":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("lJxs"),a=n("Cfvw"),s=n("zx2A");function i(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(i((n,s)=>Object(a.a)(e(n,s)).pipe(Object(r.a)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new o(e,n)))}class o{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends s.b{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.a(this),n=this.destination;n.add(t);const r=Object(s.c)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Yw":function(e,t,n){"use strict";(function(e,r,a,s,i){n.d(t,"a",function(){return c});var o=n("mrSG"),l=n("XNiG"),u=n("AytR"),h=n("fXoL");let c=(()=>{class t{constructor(){this.humanResult={gesture:[],body:[],face:[],object:[]},this.$result=new l.a,this.faceApiResult={},this.processing={face:!1,faceApi:!1,gesture:!1,body:!1,object:!1},this.delay={face:150,faceApi:130,gesture:0,body:70,object:0},this.humanWorkers={},this.isRunningDetection=!1,this.authVericationInterval=2e3,this.authDuration=1e4,this.minumumIrisDistanceFromCamera=15,this.authFlags={faceMatch:0,faceMisMatch:0,eyesClosed:0,eyesOpen:0,wristVisibleCount:0,phoneVisibleCount:0},this.allowScanning=!0,this.faceApiWorker=new Worker(e,void 0),this.humanWorkers.face=new Worker(r,void 0),this.humanWorkers.body=new Worker(a,void 0),this.humanWorkers.gesture=new Worker(s,void 0),this.humanWorkers.object=new Worker(i,void 0)}initializeWorkers(){return Object(o.a)(this,void 0,void 0,function*(){const e=yield this.createImgElementFromSrc("./assets/images/fr-face.jpg"),t=this.getWorkerImage(e,!1);yield Promise.all([this.initializeFaceApiWorker(t),...this.initializeHumanWorkers(t)])})}setReferenceImage(e){return Object(o.a)(this,void 0,void 0,function*(){this.resetFlags(),this.referenceImage=yield this.createImgElementFromSrc(e),this.referenceUserFaceTemplate=yield this.getTemplateDescriptors(this.getWorkerImage(this.referenceImage,!1))})}authenticate(e){return Object(o.a)(this,void 0,void 0,function*(){this.resetFlags(),this.webCamFeed=e,this.isRunningDetection=!0,this.humanWorkers.face.onmessage=this.processWorkerResults.bind(this),this.humanWorkers.body.onmessage=this.processWorkerResults.bind(this),this.humanWorkers.gesture.onmessage=this.processWorkerResults.bind(this),this.humanWorkers.object.onmessage=this.processWorkerResults.bind(this),this.faceApiWorker.onmessage=this.processWorkerResults.bind(this),this.runDetection()})}getUserDistanceValidity(e){var t;return Object(o.a)(this,void 0,void 0,function*(){const n=this.getWorkerImage(e,!0),{face:r}=yield new Promise(e=>{this.humanWorkers.gesture.onmessage=({data:t})=>{e(t)},this.postWorkerMessage(n,"gesture")});console.log(null===(t=r[0])||void 0===t?void 0:t.iris),this.getUserDistanceValidity(e)})}validateResult(){return!this.authFlags.wristVisibleCount&&!this.authFlags.phoneVisibleCount&&!(100*this.authFlags.faceMatch/(this.authFlags.faceMatch+this.authFlags.faceMisMatch)<80||this.authFlags.faceMatch<5)}getTemplateDescriptors(e){var t;return Object(o.a)(this,void 0,void 0,function*(){const[n,{face:r}]=yield Promise.all([new Promise(t=>{this.faceApiWorker.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e)}),new Promise(t=>{this.humanWorkers.face.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e,"face")})]),a=null===(t=r[0])||void 0===t?void 0:t.embedding;return{descriptor:n.descriptor,embedding:a}})}processWorkerResults(e){var t;const n=e.data;switch(n.config&&(this.humanResult[n.config]=n[n.config]),n.config){case"face":this.checkFaceMatch();break;case"body":this.checkWristVisible(this.humanResult[n.config]);break;case"gesture":this.checkBlink(this.humanResult[n.config]),this.humanResult.face.length&&this.humanResult.face[0]&&(this.humanResult.face[0].iris=null===(t=n.face[0])||void 0===t?void 0:t.iris);break;case"object":this.checkPhoneVisible(this.humanResult[n.config]);break;default:this.faceApiResult=e.data,this.checkFaceMatch()}this.processing[n.config]=!1,this.$result.next({authFlags:this.authFlags,humanResult:this.humanResult}),console.log(this.authFlags)}checkFaceMatch(){var e,t,n;const r=1-this.euclideanDistance(this.referenceUserFaceTemplate.descriptor,null!==(e=this.faceApiResult.descriptor)&&void 0!==e?e:[]),a=this.similarity(null===(t=this.referenceUserFaceTemplate)||void 0===t?void 0:t.embedding,null===(n=this.humanResult.face[0])||void 0===n?void 0:n.embedding);console.log(r,a);const s=100*(r&&a?(r+a)/2:r+a);0===s||s<40?this.authFlags.faceMisMatch++:s>50&&this.authFlags.faceMatch++}checkBlink(e){e.map(e=>e.gesture).filter(e=>e.toLowerCase().includes("blink")).length?this.authFlags.eyesClosed++:this.authFlags.eyesOpen++}checkPhoneVisible(e){(e.map(e=>e.label).includes("cell phone")||e.map(e=>e.label).includes("remote"))&&this.authFlags.phoneVisibleCount++}checkWristVisible(e){var t;(null===(t=e[0])||void 0===t?void 0:t.keypoints.map(e=>e.part).filter(e=>e.toLowerCase().includes("wrist")).length)&&this.authFlags.wristVisibleCount++}runDetection(){return Object(o.a)(this,void 0,void 0,function*(){if(!this.isRunningDetection)return;const e=this.getWorkerImage(this.webCamFeed);this.processing.faceApi||(this.processing.faceApi=!0,setTimeout(()=>{this.postWorkerMessage(e)},this.delay.faceApi)),this.processing.face||(this.processing.face=!0,setTimeout(()=>{this.postWorkerMessage(e,"face")},this.delay.face)),this.processing.body||(this.processing.body=!0,setTimeout(()=>{this.postWorkerMessage(e,"body")},this.delay.body)),this.processing.gesture||(this.processing.gesture=!0,setTimeout(()=>{this.postWorkerMessage(e,"gesture")},this.delay.gesture)),this.processing.object||(this.processing.object=!0,setTimeout(()=>{this.postWorkerMessage(e,"object")},this.delay.object)),requestAnimationFrame(this.runDetection.bind(this))})}initializeFaceApiWorker(e){return new Promise(t=>{this.faceApiWorker.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e)})}initializeHumanWorkers(e){return[new Promise(t=>{this.humanWorkers.face.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e,"face")}),new Promise(t=>{this.humanWorkers.body.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e,"body")}),new Promise(t=>{this.humanWorkers.gesture.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e,"gesture")}),new Promise(t=>{this.humanWorkers.object.onmessage=({data:e})=>{t(e)},this.postWorkerMessage(e,"object")})]}createImgElementFromSrc(e){const t=new Image;return t.src=e,new Promise(e=>Object(o.a)(this,void 0,void 0,function*(){t.onload=()=>{e(t)}}))}postWorkerMessage(e,t){const n={image:e.imageData.data.buffer,width:e.canvas.width,height:e.canvas.height},r=[e.imageData.data.buffer.slice(0)];t?this.humanWorkers[t].postMessage(Object.assign(Object.assign({},n),{config:t}),r):this.faceApiWorker.postMessage(Object.assign({},n),r)}getWorkerImage(e,t=!0){const n=t?new OffscreenCanvas(u.a.frameWidth,u.a.frameHeight):new OffscreenCanvas(e.width,e.height),r=n.getContext("2d");return null==r||r.drawImage(e,0,0,n.width,n.height),{imageData:null==r?void 0:r.getImageData(0,0,n.width,n.height),canvas:n}}resetFlags(){this.isRunningDetection=!1,this.humanResult={gesture:[],body:[],face:[],object:[]},this.faceApiResult={},this.processing={face:!1,faceApi:!1,gesture:!1,body:!1,object:!1},this.authFlags={faceMatch:0,faceMisMatch:0,eyesClosed:0,eyesOpen:0,wristVisibleCount:0,phoneVisibleCount:0}}similarity(e,t,n=2){if(!e||!t)return 0;if(0===(null==e?void 0:e.length)||0===(null==t?void 0:t.length))return 0;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return 0;const r=5*Math.pow(e.map((r,a)=>Math.pow(Math.abs(e[a]-t[a]),n)).reduce((e,t)=>e+t,0),1/n);return Math.max(0,100-r)/100}euclideanDistance(e,t){if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return 1;const n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((e,t)=>e-r[t]).reduce((e,t)=>e+Math.pow(t,2),0))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}).call(this,n("DtId"),n("CXdF"),n("Y3Y3"),n("ZLzc"),n("w0SX"))},"7o/Q":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("n6bG"),a=n("gRHU"),s=n("quSY"),i=n("2QA8"),o=n("2fFW"),l=n("NJ4a");class u extends s.a{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.a;break;case 1:if(!e){this.destination=a.a;break}if("object"==typeof e){e instanceof u?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new h(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new h(this,e,t,n)}}[i.a](){return this}static create(e,t,n){const r=new u(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class h extends u{constructor(e,t,n,s){let i;super(),this._parentSubscriber=e;let o=this;Object(r.a)(t)?i=t:t&&(i=t.next,n=t.error,s=t.complete,t!==a.a&&(o=Object.create(t),Object(r.a)(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o.a;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.a.useDeprecatedSynchronousErrorHandling)throw n;Object(l.a)(n)}}__tryOrSetError(e,t,n){if(!o.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(l.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},"9ppp":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},AfPn:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="AfPn"},AytR:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={production:!0,frameWidth:500,frameHeight:500}},CXdF:function(e,t,n){e.exports=n.p+"5.e38e68e0a74d2c086e19.worker.js"},Cfvw:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("HDdC"),a=n("SeVD"),s=n("quSY"),i=n("kJWO"),o=n("jZKg"),l=n("Lhse"),u=n("c2HN"),h=n("I55L");function c(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[i.a]}(e))return function(e,t){return new r.a(n=>{const r=new s.a;return r.add(t.schedule(()=>{const a=e[i.a]();r.add(a.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(Object(u.a)(e))return function(e,t){return new r.a(n=>{const r=new s.a;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(Object(h.a)(e))return Object(o.a)(e,t);if(function(e){return e&&"function"==typeof e[l.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new s.a;let a;return r.add(()=>{a&&"function"==typeof a.return&&a.return()}),r.add(t.schedule(()=>{a=e[l.a](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=a.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.a?e:new r.a(Object(a.a)(e))}},D0XW:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("3N8a");const a=new(n("IjjT").a)(r.a)},DH7j:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))()},DtId:function(e,t,n){e.exports=n.p+"4.1abcb9a9c15f07eba598.worker.js"},EQ5u:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return l});var r=n("XNiG"),a=n("HDdC"),s=(n("7o/Q"),n("quSY")),i=n("x+ZX");class o extends a.a{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.a,e.add(this.source.subscribe(new u(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.a.EMPTY)),e}refCount(){return Object(i.a)()(this)}}const l=(()=>{const e=o.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class u extends r.b{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},EY2u:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n("HDdC");const a=new r.a(e=>e.complete());function s(e){return e?function(e){return new r.a(t=>e.schedule(()=>t.complete()))}(e):a}},GyhO:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("LRne"),a=n("bHdf");function s(...e){return Object(a.a)(1)(Object(r.a)(...e))}},H2ws:function(e,t,n){e.exports=n.p+"2.f18080c881008b7c5761.worker.js"},HDdC:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("7o/Q"),a=n("2QA8"),s=n("gRHU"),i=n("kJWO"),o=n("SpAZ"),l=n("2fFW");let u=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,o=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[a.a])return e[a.a]()}return e||t||n?new r.a(e,t,n):new r.a(s.a)}(e,t,n);if(o.add(i?i.call(o,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),l.a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(t){l.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:a}=e;if(t||a)return!1;e=n&&n instanceof r.a?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=h(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(a){n(a),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[i.a](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?o.a:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=h(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function h(e){if(e||(e=l.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},I55L:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},IjjT:function(e,t,n){"use strict";n.d(t,"a",function(){return a});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class a extends r{constructor(e,t=r.now){super(e,()=>a.delegate&&a.delegate!==this?a.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return a.delegate&&a.delegate!==this?a.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},IzEk:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q"),a=n("4I5i"),s=n("EY2u");function i(e){return t=>0===e?Object(s.b)():t.lift(new o(e))}class o{constructor(e){if(this.total=e,this.total<0)throw new a.a}call(e,t){return t.subscribe(new l(e,this.total))}}class l extends r.a{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}},JX91:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("GyhO"),a=n("z+Ro");function s(...e){const t=e[e.length-1];return Object(a.a)(t)?(e.pop(),n=>Object(r.a)(e,n,t)):t=>Object(r.a)(e,t)}},KqfI:function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},LRne:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("z+Ro"),a=n("yCtX"),s=n("jZKg");function i(...e){let t=e[e.length-1];return Object(r.a)(t)?(e.pop(),Object(s.a)(e,t)):Object(a.a)(e)}},Lhse:function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return a});const a=r()},NJ4a:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,"a",function(){return r})},NXyV:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("HDdC"),a=n("Cfvw"),s=n("EY2u");function i(e){return new r.a(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(a.a)(n):Object(s.b)()).subscribe(t)})}},NhtI:function(e,t,n){"use strict";n.d(t,"a",function(){return y6});var r=Object.defineProperty,a=e=>n("dfxl")(e),s=(e,t)=>{for(var n in(e=>{r(e,"__esModule",{value:!0})})(e),t)r(e,n,{get:t[n],enumerable:!0})},i=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},o=(e,t,n)=>(i(e,t,"read from private field"),n?n.call(e):t.get(e)),l=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},u=(e,t,n,r)=>(i(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function h(e,t){let n=e.endsWith("/")?"":"/",r=t.startsWith(".")||t.startsWith("/")||t.startsWith("http:")||t.startsWith("https:")||t.startsWith("file:")?""+t:`${e}${n}${t}`;if(!r.toLocaleLowerCase().includes(".json"))throw new Error(`Human: ModelPath Error: ${r} Expecting JSON file`);return r}function c(...e){let t=new Date,n=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}.${t.getMilliseconds().toString().padStart(3,"0")}`;e&&console.log(n,"Human:",...e)}var d=()=>"undefined"!=typeof performance?performance.now():parseInt((Number(process.hrtime.bigint())/1e3/1e3).toString());function p(...e){let t=e=>e&&"object"==typeof e;return e.reduce((e,n)=>(Object.keys(n||{}).forEach(r=>{let a=e[r],s=n[r];e[r]=Array.isArray(a)&&Array.isArray(s)?a.concat(...s):t(a)&&t(s)?p(a,s):s}),e),{})}var f={backend:"webgl",modelBasePath:"../models/",wasmPath:"../node_modules/@tensorflow/tfjs-backend-wasm/dist/",debug:!0,async:!0,warmup:"full",cacheSensitivity:.75,skipFrame:!1,filter:{enabled:!0,width:0,height:0,flip:!1,return:!0,brightness:0,contrast:0,sharpness:0,blur:0,saturation:0,hue:0,negative:!1,sepia:!1,vintage:!1,kodachrome:!1,technicolor:!1,polaroid:!1,pixelate:0},gesture:{enabled:!0},face:{enabled:!0,detector:{modelPath:"blazeface.json",rotation:!0,maxDetected:15,skipFrames:15,minConfidence:.2,iouThreshold:.1,return:!1},mesh:{enabled:!0,modelPath:"facemesh.json"},iris:{enabled:!0,modelPath:"iris.json"},description:{enabled:!0,modelPath:"faceres.json",skipFrames:11,minConfidence:.1},emotion:{enabled:!0,minConfidence:.1,skipFrames:17,modelPath:"emotion.json"}},body:{enabled:!0,modelPath:"movenet-lightning.json",maxDetected:1,minConfidence:.2,skipFrames:1},hand:{enabled:!0,rotation:!0,skipFrames:18,minConfidence:.1,iouThreshold:.1,maxDetected:2,landmarks:!0,detector:{modelPath:"handdetect.json"},skeleton:{modelPath:"handskeleton.json"}},object:{enabled:!1,modelPath:"mb3-centernet.json",minConfidence:.2,iouThreshold:.4,maxDetected:10,skipFrames:19},segmentation:{enabled:!1,modelPath:"selfie.json"}},m={};s(m,{Abs:()=>nt,Acos:()=>rt,Acosh:()=>at,AdadeltaOptimizer:()=>wp,AdagradOptimizer:()=>kp,AdamOptimizer:()=>Sp,AdamaxOptimizer:()=>Ip,Add:()=>st,AddN:()=>it,All:()=>ot,Any:()=>lt,ArgMax:()=>ut,ArgMin:()=>ht,Asin:()=>ct,Asinh:()=>dt,Atan:()=>pt,Atan2:()=>mt,Atanh:()=>ft,AvgPool:()=>gt,AvgPool3D:()=>bt,AvgPool3DGrad:()=>xt,AvgPoolGrad:()=>yt,BackendWasm:()=>X2,BatchMatMul:()=>vt,BatchToSpaceND:()=>At,Bincount:()=>wt,BroadcastTo:()=>kt,Callback:()=>yz,CallbackList:()=>oM,Cast:()=>St,Ceil:()=>It,ClipByValue:()=>_t,Complex:()=>Et,ComplexAbs:()=>Tt,Concat:()=>Ct,Conv2D:()=>Nt,Conv2DBackpropFilter:()=>Mt,Conv2DBackpropInput:()=>Ft,Conv3D:()=>Rt,Conv3DBackpropFilterV2:()=>Dt,Conv3DBackpropInputV2:()=>Ot,Cos:()=>zt,Cosh:()=>Pt,CropAndResize:()=>Lt,Cumsum:()=>$t,CustomCallback:()=>hM,DataStorage:()=>J,DenseBincount:()=>Vt,DepthToSpace:()=>Bt,DepthwiseConv2dNative:()=>Wt,DepthwiseConv2dNativeBackpropFilter:()=>jt,DepthwiseConv2dNativeBackpropInput:()=>Ht,Diag:()=>Ut,Dilation2D:()=>Gt,Dilation2DBackpropFilter:()=>Kt,Dilation2DBackpropInput:()=>qt,ENV:()=>Qe,EarlyStopping:()=>wz,Einsum:()=>Zt,Elu:()=>Yt,EluGrad:()=>Jt,Environment:()=>Xe,Equal:()=>en,Erf:()=>Qt,Exp:()=>tn,ExpandDims:()=>nn,Expm1:()=>rn,FFT:()=>an,Fill:()=>sn,FlipLeftRight:()=>on,Floor:()=>ln,FloorDiv:()=>un,FromPixels:()=>na,FusedBatchNorm:()=>hn,FusedConv2D:()=>sa,FusedDepthwiseConv2D:()=>ia,GPGPUContext:()=>XG,GatherNd:()=>dn,GatherV2:()=>cn,GraphModel:()=>QP,Greater:()=>pn,GreaterEqual:()=>fn,History:()=>uM,IFFT:()=>gn,Identity:()=>mn,Imag:()=>yn,InputSpec:()=>KN,IsFinite:()=>bn,IsInf:()=>xn,IsNan:()=>vn,KernelBackend:()=>Q,LRN:()=>Mn,LRNGrad:()=>Fn,LayerVariable:()=>UN,LayersModel:()=>yF,LeakyRelu:()=>An,Less:()=>wn,LessEqual:()=>kn,LinSpace:()=>Sn,Log:()=>In,Log1p:()=>_n,LogSoftmax:()=>Nn,LogicalAnd:()=>En,LogicalNot:()=>Tn,LogicalOr:()=>Cn,MathBackendCPU:()=>bL,MathBackendWebGL:()=>dX,Max:()=>Rn,MaxPool:()=>On,MaxPool3D:()=>Pn,MaxPool3DGrad:()=>$n,MaxPoolGrad:()=>zn,MaxPoolWithArgmax:()=>Ln,Maximum:()=>Dn,Mean:()=>Vn,Min:()=>Bn,Minimum:()=>Wn,MirrorPad:()=>jn,Mod:()=>Hn,MomentumOptimizer:()=>Ep,Multinomial:()=>Un,Multiply:()=>Gn,Neg:()=>qn,NonMaxSuppressionV3:()=>Xn,NonMaxSuppressionV4:()=>Zn,NonMaxSuppressionV5:()=>Yn,NotEqual:()=>Kn,OP_SCOPE_SUFFIX:()=>Es,OneHot:()=>Qn,OnesLike:()=>Jn,Optimizer:()=>Ap,Pack:()=>er,PadV2:()=>tr,Pool:()=>nr,Pow:()=>rr,Prelu:()=>ar,Prod:()=>sr,RMSPropOptimizer:()=>Tp,RNN:()=>TR,Range:()=>ir,Rank:()=>Za,Real:()=>or,RealDiv:()=>Xt,Reciprocal:()=>lr,Reduction:()=>Zd,Relu:()=>ur,Relu6:()=>mr,Reshape:()=>hr,ResizeBilinear:()=>pr,ResizeBilinearGrad:()=>fr,ResizeNearestNeighbor:()=>cr,ResizeNearestNeighborGrad:()=>dr,Reverse:()=>gr,RotateWithOffset:()=>ra,Round:()=>yr,Rsqrt:()=>br,SGDOptimizer:()=>_p,ScatterNd:()=>xr,Select:()=>vr,Selu:()=>Ar,Sequential:()=>AF,Sigmoid:()=>_r,Sign:()=>Ir,Sin:()=>kr,Sinh:()=>Sr,Slice:()=>wr,Softmax:()=>Fr,Softplus:()=>Er,SpaceToBatchND:()=>Nr,SparseFillEmptyRows:()=>Rr,SparseReshape:()=>Dr,SparseSegmentMean:()=>Or,SparseSegmentSum:()=>zr,SparseToDense:()=>Pr,SplitV:()=>Mr,Sqrt:()=>Tr,Square:()=>Lr,SquaredDifference:()=>$r,Step:()=>ta,StridedSlice:()=>Vr,StringNGrams:()=>Br,StringSplit:()=>Wr,StringToHashBucketFast:()=>jr,Sub:()=>Hr,Sum:()=>Cr,SymbolicTensor:()=>XN,Tan:()=>Ur,Tanh:()=>Gr,Tensor:()=>Ka,TensorBuffer:()=>Ua,Tile:()=>qr,TopK:()=>Kr,Transform:()=>Xr,Transpose:()=>Zr,Unique:()=>Yr,Unpack:()=>Jr,UnsortedSegmentSum:()=>Qr,Variable:()=>Xa,ZerosLike:()=>ea,_FusedMatMul:()=>aa,abs:()=>cl,acos:()=>dl,acosh:()=>pl,add:()=>ol,addN:()=>fl,all:()=>ml,any:()=>gl,argMax:()=>yl,argMin:()=>bl,asin:()=>xl,asinh:()=>vl,atan:()=>Al,atan2:()=>wl,atanh:()=>kl,avgPool:()=>$l,avgPool3d:()=>Ll,backend:()=>sl,backend_util:()=>Rp,basicLSTMCell:()=>Hl,batchNorm:()=>ql,batchNorm2d:()=>Kl,batchNorm3d:()=>Xl,batchNorm4d:()=>Zl,batchToSpaceND:()=>Ul,bincount:()=>Yl,booleanMaskAsync:()=>td,broadcastTo:()=>Jl,browser:()=>qi,buffer:()=>vi,callbacks:()=>kz,cast:()=>Ai,ceil:()=>Ql,clipByValue:()=>eu,clone:()=>wi,complex:()=>Cs,concat:()=>Vl,concat1d:()=>tu,concat2d:()=>nu,concat3d:()=>ru,concat4d:()=>au,constraints:()=>TT,conv1d:()=>iu,conv2d:()=>su,conv2dTranspose:()=>lu,conv3d:()=>uu,conv3dTranspose:()=>cu,copyRegisteredKernels:()=>ga,cos:()=>du,cosh:()=>pu,cosineWindow:()=>hd,cumsum:()=>fu,customGrad:()=>rh,data:()=>n$,denseBincount:()=>mu,deprecationWarn:()=>jo,depthToSpace:()=>gu,depthwiseConv2d:()=>yu,deregisterOp:()=>Ez,device_util:()=>bs,diag:()=>bu,dilation2d:()=>xu,disableDeprecationWarnings:()=>Wo,dispose:()=>Xo,disposeVariables:()=>Ho,div:()=>ul,divNoNan:()=>_u,dot:()=>Eu,dropout:()=>ld,einsum:()=>Tu,elu:()=>Cu,enableDebugMode:()=>Bo,enableProdMode:()=>Vo,enclosingPowerOfTwo:()=>ud,engine:()=>Uo,env:()=>Ye,equal:()=>ku,erf:()=>Nu,exp:()=>Mu,expandDims:()=>Fu,expm1:()=>Ru,eye:()=>Ou,fft:()=>Nc,fill:()=>zu,findBackend:()=>nl,findBackendFactory:()=>rl,floor:()=>Pu,floorDiv:()=>ll,forceHalfFloat:()=>fX,fused:()=>dd,gather:()=>$u,gatherND:()=>od,gather_util:()=>Qi,getBackend:()=>el,getGradient:()=>ha,getKernel:()=>ua,getKernelsForBackend:()=>ca,gpgpu_util:()=>_G,grad:()=>Ju,grads:()=>Qu,greater:()=>Lu,greaterEqual:()=>Vu,ifft:()=>Mc,imag:()=>Bu,image:()=>gp,inTopKAsync:()=>cd,initializers:()=>fC,input:()=>IF,io:()=>Si,irfft:()=>Fc,isFinite:()=>Wu,isInf:()=>ju,isNaN:()=>Hu,keep:()=>Zo,kernel_impls:()=>kf,layers:()=>DN,leakyRelu:()=>Uu,less:()=>Gu,lessEqual:()=>qu,linalg:()=>yp,linspace:()=>Ku,loadGraphModel:()=>e$,loadLayersModel:()=>SF,localResponseNormalization:()=>Xu,log:()=>Zu,log1p:()=>Yu,logSigmoid:()=>oh,logSoftmax:()=>ch,logSumExp:()=>vh,logicalAnd:()=>Ah,logicalNot:()=>wh,logicalOr:()=>kh,logicalXor:()=>Sh,losses:()=>bp,matMul:()=>ji,math:()=>Bi,max:()=>lh,maxPool:()=>Ih,maxPool3d:()=>_h,maxPoolWithArgmax:()=>Eh,maximum:()=>Th,mean:()=>Ch,memory:()=>Go,meshgrid:()=>Fh,metrics:()=>ZO,min:()=>Rh,minimum:()=>Dh,mirrorPad:()=>Oh,mod:()=>zh,model:()=>wF,models:()=>dz,moments:()=>$h,movingAverage:()=>ad,mul:()=>hl,multiRNNCell:()=>Lh,multinomial:()=>Vh,neg:()=>sh,nextFrame:()=>Fp,norm:()=>rd,notEqual:()=>Bh,oneHot:()=>Hi,ones:()=>Mh,onesLike:()=>Wh,op:()=>Ts,outerProduct:()=>jh,pad:()=>Hh,pad1d:()=>Uh,pad2d:()=>Gh,pad3d:()=>qh,pad4d:()=>Kh,pool:()=>Zh,pow:()=>Yh,prelu:()=>Jh,print:()=>ki,prod:()=>Qh,profile:()=>qo,rand:()=>ec,randomGamma:()=>rc,randomNormal:()=>ac,randomUniform:()=>sc,range:()=>ic,ready:()=>Qo,real:()=>oc,reciprocal:()=>lc,registerBackend:()=>al,registerCallbackConstructor:()=>_F,registerGradient:()=>pa,registerKernel:()=>da,registerOp:()=>Iz,regularizers:()=>pz,relu:()=>uc,relu6:()=>hc,removeBackend:()=>tl,reshape:()=>Pl,reverse:()=>cc,reverse1d:()=>dc,reverse2d:()=>pc,reverse3d:()=>fc,reverse4d:()=>mc,rfft:()=>Dc,round:()=>gc,rsqrt:()=>yc,scalar:()=>bc,scatterND:()=>sd,scatter_util:()=>to,selu:()=>xc,separableConv2d:()=>vc,sequential:()=>kF,serialization:()=>ko,setBackend:()=>Jo,setPlatform:()=>il,setWasmPath:()=>r3,setWasmPaths:()=>a3,setWebGLContext:()=>vU,setdiff1dAsync:()=>Ac,shared:()=>xL,sigmoid:()=>Bl,sign:()=>wc,signal:()=>mp,sin:()=>kc,sinh:()=>Sc,slice:()=>Wl,slice1d:()=>Ic,slice2d:()=>_c,slice3d:()=>Ec,slice4d:()=>Tc,slice_util:()=>so,softmax:()=>Cc,softplus:()=>ih,spaceToBatchND:()=>Xh,sparse:()=>xp,sparseToDense:()=>id,spectral:()=>fp,split:()=>Rc,sqrt:()=>Oc,square:()=>Ph,squaredDifference:()=>zc,squeeze:()=>Pc,stack:()=>$c,step:()=>Lc,stridedSlice:()=>Vc,string:()=>vp,sub:()=>uh,sum:()=>hh,sumOutType:()=>ss,tan:()=>Bc,tanh:()=>jl,tensor:()=>Ms,tensor1d:()=>Wc,tensor2d:()=>jc,tensor3d:()=>Ki,tensor4d:()=>Hc,tensor5d:()=>Uc,tensor6d:()=>Gc,tensor_util:()=>ns,test_util:()=>Eo,tidy:()=>Ko,tile:()=>Du,time:()=>Yo,topk:()=>qc,train:()=>Np,transpose:()=>Ui,truncatedNormal:()=>Kc,unique:()=>Xc,unregisterGradient:()=>ma,unregisterKernel:()=>fa,unsortedSegmentSum:()=>Zc,unstack:()=>Yc,upcastType:()=>as,util:()=>ba,valueAndGrad:()=>eh,valueAndGrads:()=>th,variable:()=>Jc,variableGrads:()=>nh,version:()=>i3,version_converter:()=>t$,version_core:()=>Lo,version_cpu:()=>mB,version_layers:()=>GM,version_wasm:()=>s3,version_webgl:()=>pX,webgl:()=>mX,webgl_util:()=>fU,where:()=>Su,whereAsync:()=>ed,zeros:()=>Nh,zerosLike:()=>Iu});var g=Object.create,y=Object.defineProperty,b=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,w=e=>y(e,"__esModule",{value:!0}),k=e=>{if(void 0!==a)return a(e);throw new Error('Dynamic require of "'+e+'" is not supported')},S=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},I=(e,t)=>{for(var n in w(e),t)y(e,n,{get:t[n],enumerable:!0})},_=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of x(t))!A.call(e,r)&&"default"!==r&&y(e,r,{get:()=>t[r],enumerable:!(n=b(t,r))||n.enumerable});return e})(w(y(null!=e?g(v(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),E=S({"node_modules/.pnpm/long@4.0.0/node_modules/long/src/long.js"(e,t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(_){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var s={},i={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),a&&(i[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=u(e,e<0?-1:0,!1),a&&(s[e]=n),n)}function l(e,t){if(isNaN(e))return t?b:y;if(t){if(e<0)return b;if(e>=f)return k}else{if(e<=-m)return S;if(e+1>=m)return w}return e<0?l(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var h=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=l(h(n,8)),s=y,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),u=parseInt(e.substring(i,i+o),n);if(o<8){var d=l(h(n,o));s=s.mul(d).add(l(u))}else s=(s=s.mul(a)).add(l(u))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?c(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var p=4294967296,f=p*p,m=f/2,g=o(1<<24),y=o(0);r.ZERO=y;var b=o(0,!0);r.UZERO=b;var x=o(1);r.ONE=x;var v=o(1,!0);r.UONE=v;var A=o(-1);r.NEG_ONE=A;var w=u(-1,2147483647,!1);r.MAX_VALUE=w;var k=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);r.MIN_VALUE=S;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(h(e,6),this.unsigned),s=this,i="";;){var o=s.div(a),u=(s.sub(o.mul(a)).toInt()>>>0).toString(e);if((s=o).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(x)},I.neg=I.negate,I.add=function(e){a(e)||(e=d(e));var t=0,n=0,r=0,s=0;return r+=(s+=(65535&this.low)+(65535&e.low))>>>16,n+=(r+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(n+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),u((r&=65535)<<16|(s&=65535),(t&=65535)<<16|(n&=65535),this.unsigned)},I.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return y;if(a(e)||(e=d(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(S))return e.isOdd()?S:y;if(e.eq(S))return this.isOdd()?S:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=65535&this.high,r=this.low>>>16,s=65535&this.low,i=65535&e.high,o=e.low>>>16,h=65535&e.low,c=0,p=0,f=0,m=0;return f+=(m+=s*h)>>>16,p+=(f+=r*h)>>>16,f&=65535,p+=(f+=s*o)>>>16,c+=(p+=t*h)>>>16,p&=65535,c+=(p+=r*o)>>>16,p&=65535,c+=(p+=s*i)>>>16,c+=(this.high>>>16)*h+t*o+r*i+s*(e.high>>>16),u((f&=65535)<<16|(m&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return v;s=b}else{if(this.eq(S))return e.eq(x)||e.eq(A)?S:e.eq(S)?x:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?x:A:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(S))return this.unsigned?b:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:h(2,i-48),c=l(t),p=c.mul(e);p.isNegative()||p.gt(r);)p=(c=l(t-=o,this.unsigned)).mul(e);c.isZero()&&(c=x),s=s.add(c),r=r.sub(p)}return s},I.div=I.divide,I.modulo=function(e){return a(e)||(e=d(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return u(~this.low,~this.high,this.unsigned)},I.and=function(e){return a(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return a(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return a(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}),T=S({"(disabled):node_modules/.pnpm/node-fetch@2.6.1/node_modules/node-fetch/browser.js"(){}}),C=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/alea.js"(e,t){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),N=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xor128.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),M=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xorwow.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),F=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xorshift7.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.x&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),R=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xor4096.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n=a[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(a=0==(n=o[127&s]^=r+(i=i+1640531527|0))?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,o[a]=(r^=r>>>15)^(n^=n>>>12);e.w=i,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.X&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),D=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/tychei.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),O=S({"(disabled):crypto"(){}}),z=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/seedrandom.js"(e,t){!function(e,r){var a,s=this,i=256,o="random",l=r.pow(i,6),u=r.pow(2,52),h=2*u,c=255;function d(t,n,c){var d=[],b=g(m((n=1==n?{entropy:!0}:n||{}).entropy?[t,y(e)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(i):(t=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(t)),y(t)}catch(d){var n=s.navigator,r=n&&n.plugins;return[+new Date,s,r,s.screen,y(e)]}}():t,3),d),x=new p(d),v=function(){for(var e=x.g(6),t=l,n=0;e<u;)e=(e+n)*i,t*=i,n=x.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|x.g(4)},v.quick=function(){return x.g(4)/4294967296},v.double=v,g(y(x.S),e),(n.pass||c||function(e,t,n,a){return a&&(a.S&&f(a,x),e.state=function(){return f(x,{})}),n?(r[o]=e,t):e})(v,b,"global"in n?n.global:this==r,n.state)}function p(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=c&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=c&a+1],n=n*i+o[c&(o[a]=o[s=c&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(s){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(r["seed"+o]=d,g(r.random(),e),"object"==typeof t&&t.exports){t.exports=d;try{a=O()}catch(b){}}else"function"==typeof define&&n("PDX0")&&define(function(){return d})}([],Math)}}),P=S({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/index.js"(e,t){var n=C(),r=N(),a=M(),s=F(),i=R(),o=D(),l=z();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=s,l.xor4096=i,l.tychei=o,t.exports=l}}),$=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/alea.js"(e,t){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),L=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xor128.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),V=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xorwow.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),B=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xorshift7.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.x&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),W=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xor4096.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n=a[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(a=0==(n=o[127&s]^=r+(i=i+1640531527|0))?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,o[a]=(r^=r>>>15)^(n^=n>>>12);e.w=i,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.X&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),j=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/tychei.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),H=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/seedrandom.js"(e,t){!function(e,r,a){var s,i=256,o="random",l=a.pow(i,6),u=a.pow(2,52),h=2*u,c=255;function d(t,n,c){var d=[],b=g(m((n=1==n?{entropy:!0}:n||{}).entropy?[t,y(r)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(i):(t=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(t)),y(t)}catch(d){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,y(r)]}}():t,3),d),x=new p(d),v=function(){for(var e=x.g(6),t=l,n=0;e<u;)e=(e+n)*i,t*=i,n=x.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|x.g(4)},v.quick=function(){return x.g(4)/4294967296},v.double=v,g(y(x.S),r),(n.pass||c||function(e,t,n,r){return r&&(r.S&&f(r,x),e.state=function(){return f(x,{})}),n?(a[o]=e,t):e})(v,b,"global"in n?n.global:this==a,n.state)}function p(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=c&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=c&a+1],n=n*i+o[c&(o[a]=o[s=c&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(s){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(a.random(),r),"object"==typeof t&&t.exports){t.exports=d;try{s=O()}catch(b){}}else"function"==typeof define&&n("PDX0")?define(function(){return d}):a["seed"+o]=d}("undefined"!=typeof self?self:e,[],Math)}}),U=S({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/index.js"(e,t){var n=$(),r=L(),a=V(),s=B(),i=W(),o=j(),l=H();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=s,l.xor4096=i,l.tychei=o,t.exports=l}}),G=S({"(disabled):node_modules/.pnpm/string_decoder@1.1.1/node_modules/string_decoder/lib/string_decoder.js"(){}}),q=S({"(disabled):path"(){}}),K=S({"(disabled):worker_threads"(){}}),X=S({"(disabled):perf_hooks"(){}}),Z=S({"node_modules/.pnpm/@tensorflow+tfjs-backend-wasm@3.7.0_@tensorflow+tfjs-core@3.7.0/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js"(e,t){var r,a=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){function t(){return F.buffer!=D&&te(F.buffer),O}function n(){return F.buffer!=D&&te(F.buffer),z}function a(){return F.buffer!=D&&te(F.buffer),P}function s(){return F.buffer!=D&&te(F.buffer),$}function i(){return F.buffer!=D&&te(F.buffer),L}var o,l,u=void 0!==(e=e||{})?e:{};u.ready=new Promise(function(e,t){o=e,l=t});var h,c={};for(h in u)u.hasOwnProperty(h)&&(c[h]=u[h]);var d=[],p=function(e,t){throw t},f=!1,m=!1,g=!1,y=!1;f="object"==typeof window,m="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y=!f&&!g&&!m;var b=u.ENVIRONMENT_IS_PTHREAD||!1;b&&(D=u.buffer);var x,v,A,w,S,I="";function _(e){return u.locateFile?u.locateFile(e,I):I+e}if(g){var E;I=m?q().dirname(I)+"/":__dirname+"/",x=function(e,t){return w||(w=k("fs")),S||(S=q()),e=S.normalize(e),w.readFileSync(e,t?null:"utf8")},A=function(e){var t=x(e,!0);return t.buffer||(t=new Uint8Array(t)),B(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),d=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof un))throw e}),process.on("unhandledRejection",ve),p=function(e){process.exit(e)},u.inspect=function(){return"[Emscripten Module object]"};try{E=K()}catch(dn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),dn}global.Worker=E.Worker}else y?("undefined"!=typeof read&&(x=function(e){return read(e)}),A=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(B("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?d=scriptArgs:void 0!==arguments&&(d=arguments),"function"==typeof quit&&(p=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(f||m)&&(m?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==r&&r&&(I=r),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",g?(x=function(e,t){return w||(w=k("fs")),S||(S=q()),e=S.normalize(e),w.readFileSync(e,t?null:"utf8")},A=function(e){var t=x(e,!0);return t.buffer||(t=new Uint8Array(t)),B(t.buffer),t}):(x=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(A=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),v=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));g&&"undefined"==typeof performance&&(global.performance=X().performance);var T,C=u.print||console.log.bind(console),N=u.printErr||console.warn.bind(console);for(h in c)c.hasOwnProperty(h)&&(u[h]=c[h]);c=null,u.arguments&&(d=u.arguments),u.quit&&(p=u.quit),Atomics,Atomics,Atomics,u.wasmBinary&&(T=u.wasmBinary);var M=u.noExitRuntime||!0;"object"!=typeof WebAssembly&&ve("no native wasm support detected");var F,R,D,O,z,P,$,L,V=!1;function B(e,t){e||ve("Assertion failed: "+t)}function W(e){var t=u["_"+e];return B(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function j(e,t,n,r,a){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);Y(e,t=rn(n),n)}return t},array:function(e){var t=rn(e.length);return Q(e,t),t}},i=W(e),o=[],l=0;if(r)for(var u=0;u<r.length;u++){var h=s[n[u]];h?(0===l&&(l=tn()),o[u]=h(r[u])):o[u]=r[u]}var c,d=i.apply(null,o);return c=d,d="string"===t?G(c):"boolean"===t?Boolean(c):c,0!==l&&nn(l),d}function H(e,t,n,r){var a=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&a&&!r?W(e):function(){return j(e,t,n,arguments)}}function U(e,t,n){for(var r=t+n,a="";!(t>=r);){var s=e[t++];if(!s)return a;if(128&s){var i=63&e[t++];if(192!=(224&s)){var o=63&e[t++];if((s=224==(240&s)?(15&s)<<12|i<<6|o:(7&s)<<18|i<<12|o<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|i)}else a+=String.fromCharCode(s)}return a}function G(e,t){return e?U(n(),e,t):""}function Z(e,t,n,r){if(!(r>0))return 0;for(var a=n,s=n+r-1,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),o<=127){if(n>=s)break;t[n++]=o}else if(o<=2047){if(n+1>=s)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=s)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}return t[n]=0,n-a}function Y(e,t,r){return Z(e,n(),t,r)}function J(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function Q(e,n){t().set(e,n)}function ee(e,t){return e%t>0&&(e+=t-e%t),e}function te(e){D=e,u.HEAP8=O=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAP32=P=new Int32Array(e),u.HEAPU8=z=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAPU32=$=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=L=new Float64Array(e)}var ne=u.INITIAL_MEMORY||16777216;if(b)F=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)F=u.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:ne/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),g&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");F&&(D=F.buffer),ne=D.byteLength,te(D);var re,ae=[],se=[],ie=[],oe=[],le=[];function ue(){if(!b){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)pe(u.preRun.shift());Fe(ae)}}function he(){!b&&Fe(se)}function ce(){b||Fe(ie)}function de(){if(!b){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)fe(u.postRun.shift());Fe(le)}}function pe(e){ae.unshift(e)}function fe(e){le.unshift(e)}b||se.push({func:function(){Bt()}});var me=0,ge=null,ye=null;function be(e){B(!b,"addRunDependency cannot be used in a pthread worker"),me++,u.monitorRunDependencies&&u.monitorRunDependencies(me)}function xe(e){if(me--,u.monitorRunDependencies&&u.monitorRunDependencies(me),0==me&&(null!==ge&&(clearInterval(ge),ge=null),ye)){var t=ye;ye=null,t()}}function ve(e){u.onAbort&&u.onAbort(e),b&&console.error("Pthread aborting at "+(new Error).stack),N(e+=""),V=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw l(t),t}function Ae(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}u.preloadedImages={},u.preloadedAudios={};var we="data:application/octet-stream;base64,";function ke(e){return Ae(e,we)}var Se="file://";function Ie(e){return Ae(e,Se)}var _e="tfjs-backend-wasm-threaded-simd.wasm";function Ee(e){try{if(e==_e&&T)return new Uint8Array(T);if(A)return A(e);throw"both async and sync fetching of the wasm failed"}catch(t){ve(t)}}function Te(){if(!T&&(f||m)){if("function"==typeof fetch&&!Ie(_e))return fetch(_e,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+_e+"'";return e.arrayBuffer()}).catch(function(){return Ee(_e)});if(v)return new Promise(function(e,t){v(_e,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return Ee(_e)})}function Ce(){var e={a:Vt};function t(e,t){if(u.asm=e.exports,re=u.asm.F,R=t,!b){var n=$e.unusedWorkers.length;$e.unusedWorkers.forEach(function(e){$e.loadWasmModuleToWorker(e,function(){--n||xe()})})}}function n(e){t(e.instance,e.module)}function r(t){return Te().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){N("failed to asynchronously prepare wasm: "+e),ve(e)})}if(b||be(),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(a){return N("Module.instantiateWasm callback failed with error: "+a),!1}return(T||"function"!=typeof WebAssembly.instantiateStreaming||ke(_e)||Ie(_e)||"function"!=typeof fetch?r(n):fetch(_e,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(n,function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)})})).catch(l),{}}ke(_e)||(_e=_(_e));var Ne={9816:function(){throw"Canceled!"},9834:function(e,t){setTimeout(function(){Zt(e,t)},0)}};function Me(){$e.initRuntime()}function Fe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?re.get(n)():re.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(u)}}function Re(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ln>>2),s=0;if(r==e&&Atomics.compareExchange(a(),ln>>2,r,0)==r&&(s=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+s;throw"Atomics.notify returned an unexpected value "+i}function De(e){if(b)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=$e.pthreads[e];t.worker.terminate(),$e.freeThreadData(t),$e.runningWorkers.splice($e.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function Oe(e){if(b)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";$e.pthreads[e].worker.postMessage({cmd:"cancel"})}function ze(e){if(b)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=$e.pthreads[e];t&&(a()[e+12>>2]=0,$e.returnWorkerToPool(t.worker))}u._emscripten_futex_wake=Re;var Pe,$e={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=Math.min(4,Math.max(1,(navigator.hardwareConcurrency||1)/2)),t=0;t<e;++t)$e.allocateUnusedWorker()},initRuntime:function(){for(var e=Wt(228),t=0;t<57;++t)s()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=Wt(512);for(t=0;t<128;++t)s()[r/4+t]=0;Atomics.store(s(),e+100>>2,r),Atomics.store(s(),e+40>>2,e),en(e,!m,1),Xt(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;$e.threadExitHandlers.length>0;)$e.threadExitHandlers.pop()();b&&Gt()&&qt()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(s(),e+56>>2,1),Atomics.store(s(),e+60>>2,0),$e.runExitHandlers(),Atomics.store(s(),e+4>>2,t),Atomics.store(s(),e+0>>2,1),Re(e+0,2147483647),en(0,0,0)},threadExit:function(e){var t=Gt();t&&($e.runExitHandlersAndDeinitThread(t,e),b&&postMessage({cmd:"exit"}))},threadCancel:function(){$e.runExitHandlersAndDeinitThread(Gt(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in $e.pthreads)(r=$e.pthreads[e])&&r.worker&&$e.returnWorkerToPool(r.worker);$e.pthreads={};for(var t=0;t<$e.unusedWorkers.length;++t)(n=$e.unusedWorkers[t]).terminate();for($e.unusedWorkers=[],t=0;t<$e.runningWorkers.length;++t){var n,r;$e.freeThreadData(r=(n=$e.runningWorkers[t]).pthread),n.terminate()}$e.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,jt(t),jt(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&jt(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){$e.runWithoutMainThreadQueuedCalls(function(){delete $e.pthreads[e.pthread.threadInfoStruct],$e.unusedWorkers.push(e),$e.runningWorkers.splice($e.runningWorkers.indexOf(e),1),$e.freeThreadData(e.pthread),e.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(e){a()[on>>2]=0;try{e()}finally{a()[on>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&($e.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=Gt()){var i=$e.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void($e.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Kt();else if("spawnThread"===a)Dt(n.data);else if("cleanupThread"===a)ze(r.thread);else if("killThread"===a)De(r.thread);else if("cancelThread"===a)Oe(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)C("Thread "+r.threadId+": "+r.text);else if("printErr"===a)N("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(s(),e.pthread.threadInfoStruct+64>>2)&&$e.returnWorkerToPool(e);else if("exitProcess"===a)try{cn(r.returnCode)}catch(o){if(o instanceof un)return;throw o}else"cancelDone"===a?$e.returnWorkerToPool(e):"objectTransfer"===a?$e.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):N("worker sent an unknown command "+a);$e.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){N("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},g&&(e.on("message",function(t){e.onmessage({data:t})}),e.on("error",function(t){e.onerror(t)}),e.on("exit",function(e){})),e.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:F,wasmModule:R})},allocateUnusedWorker:function(){var e=_("tfjs-backend-wasm-threaded-simd.worker.js");$e.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==$e.unusedWorkers.length&&($e.allocateUnusedWorker(),$e.loadWasmModuleToWorker($e.unusedWorkers[0])),$e.unusedWorkers.length>0?$e.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function Le(e,t){an(e,t),nn(e)}function Ve(){return M}function Be(e,t){return re.get(e)(t)}function We(e,t,n,r){ve("Assertion failed: "+G(e)+", at: "+[t?G(t):"unknown filename",n,r?G(r):"unknown function"])}function je(e,t){_main(e,t)}function He(e){return a()[Ht()>>2]=e,e}function Ue(e,t){if(b)return Qe(1,1,e,t)}function Ge(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(b)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=$e.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1}function qe(){ve()}function Ke(e,t,n){var r=nt(t,n);return Ne[e].apply(null,r)}function Xe(e,t){}function Ze(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(f){if(Atomics.load(a(),e>>2)!=n)return-6;var s=performance.now(),i=s+r;for(Atomics.exchange(a(),ln>>2,e);;){if((s=performance.now())>i)return Atomics.exchange(a(),ln>>2,0),-73;if(0==Atomics.exchange(a(),ln>>2,0))break;if(Kt(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ln>>2,e)}return 0}var o=Atomics.wait(a(),e>>2,n,r);if("timed-out"===o)return-73;if("not-equal"===o)return-6;if("ok"===o)return 0;throw"Atomics.wait returned an unexpected value "+o}function Ye(e,t,r){n().copyWithin(e,t,t+r)}function Je(){return g?k("os").cpus().length:navigator.hardwareConcurrency}function Qe(e,t){for(var n=arguments.length-2,r=tn(),a=n,s=rn(8*a),o=s>>3,l=0;l<n;l++){var u=arguments[2+l];i()[o+l]=u}var h=Jt(e,a,s,t);return nn(r),h}u.establishStackSpace=Le,u.getNoExitRuntime=Ve,u.invokeEntryPoint=Be,Pe=g?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:b?function(){return performance.now()-u.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var et=[],tt=[];function nt(e,t){var r;for(tt.length=0,t>>=2;r=n()[e++];){var s=r<105;s&&1&t&&t++,tt.push(s?i()[t++>>1]:a()[t]),++t}return tt}function rt(e,t,n){et.length=t;for(var r=n>>3,a=0;a<t;a++)et[a]=i()[r+a];return(e<0?Ne[-e-1]:Lt[e]).apply(null,et)}function at(){return n().length}function st(e){try{return F.grow(e-D.byteLength+65535>>>16),te(F.buffer),1}catch(t){}}function it(e){var t=at();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),st(Math.min(n,ee(Math.max(e,a),65536))))return!0}return!1}var ot={inEventHandler:0,removeAllEventListeners:function(){for(var e=ot.eventHandlers.length-1;e>=0;--e)ot._removeHandler(e);ot.eventHandlers=[],ot.deferredCalls=[]},registerRemoveEventListeners:function(){ot.removeEventListenersRegistered||(oe.push(ot.removeAllEventListeners),ot.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in ot.deferredCalls){var s=ot.deferredCalls[a];if(s.targetFunction==e&&r(s.argsList,n))return}ot.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),ot.deferredCalls.sort(function(e,t){return e.precedence<t.precedence})},removeDeferredCalls:function(e){for(var t=0;t<ot.deferredCalls.length;++t)ot.deferredCalls[t].targetFunction==e&&(ot.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return ot.inEventHandler&&ot.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(ot.canPerformEventHandlerRequests())for(var e=0;e<ot.deferredCalls.length;++e){var t=ot.deferredCalls[e];ot.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<ot.eventHandlers.length;++n)ot.eventHandlers[n].target==e&&(!t||t==ot.eventHandlers[n].eventTypeString)&&ot._removeHandler(n--)},_removeHandler:function(e){var t=ot.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),ot.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++ot.inEventHandler,ot.currentEventHandler=e,ot.runDeferredCalls(),e.handlerFunc(t),ot.runDeferredCalls(),--ot.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),ot.eventHandlers.push(e),ot.registerRemoveEventListeners();else for(var n=0;n<ot.eventHandlers.length;++n)ot.eventHandlers[n].target==e.target&&ot.eventHandlers[n].eventTypeString==e.eventTypeString&&ot._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,s){var i=tn(),o=rn(12);a()[o>>2]=n,a()[o+4>>2]=r,a()[o+8>>2]=s,Qt(0,e,637534208,t,r,o),nn(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return $e.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function lt(e){var t=J(e)+1,n=Wt(t);return Y(e,n,t),n}function ut(e,t,n,r){var s=tn(),i=rn(12),o=0;t&&(o=lt(t)),a()[i>>2]=o,a()[i+4>>2]=n,a()[i+8>>2]=r,Qt(0,e,657457152,0,o,i),nn(s)}function ht(e,t,n,r){ut(e,t=t?G(t):"",n,r)}function ct(e){return e>2?G(e):e}var dt=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function pt(e){return e=ct(e),dt[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function ft(e){return pt(e)}function mt(e,t,n){var r=ft(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(ht(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var s=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);s=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,s&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function gt(e,t,n){return b?Qe(2,1,e,t,n):mt(e,t,n)}function yt(e,t,n){return ft(e)?mt(e,t,n):gt(e,t,n)}function bt(e){}function xt(e,t){}function vt(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,s){t.drawElementsInstancedANGLE(e,n,r,a,s)},1}function At(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function wt(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function kt(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var St={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){St.lastError||(St.lastError=e)},getNewId:function(e){for(var t=St.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var s="",i=0;i<t;++i){var o=r?a()[r+4*i>>2]:-1;s+=G(a()[n+4*i>>2],o<0?void 0:o)}return s},createContext:function(e,t){var n=e.getContext("webgl",t);return n?St.registerContext(n,t):0},registerContext:function(e,t){var n=Wt(8);a()[n+4>>2]=Gt();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),St.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&St.initExtensions(r),n},makeContextCurrent:function(e){return St.currentContext=St.contexts[e],u.ctx=Pt=St.currentContext&&St.currentContext.GLctx,!(e&&!Pt)},getContext:function(e){return St.contexts[e]},deleteContext:function(e){St.currentContext===St.contexts[e]&&(St.currentContext=null),"object"==typeof ot&&ot.removeAllHandlersOnTarget(St.contexts[e].GLctx.canvas),St.contexts[e]&&St.contexts[e].GLctx.canvas&&(St.contexts[e].GLctx.canvas.GLctxObject=void 0),jt(St.contexts[e].handle),St.contexts[e]=null},initExtensions:function(e){if(e||(e=St.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;vt(t),At(t),wt(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),kt(t),(t.getSupportedExtensions()||[]).forEach(function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)})}},populateUniformTable:function(e){for(var t=St.programs[e],n=St.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Pt.getProgramParameter(t,35718),s=0;s<a;++s){var i=Pt.getActiveUniform(t,s),o=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,o.length+1),"]"==o.slice(-1)&&(o=o.slice(0,o.lastIndexOf("[")));var l=Pt.getUniformLocation(t,o);if(l){var u=St.getNewId(St.uniforms);r[o]=[i.size,u],St.uniforms[u]=l;for(var h=1;h<i.size;++h)l=Pt.getUniformLocation(t,o+"["+h+"]"),u=St.getNewId(St.uniforms),St.uniforms[u]=l}}}},It=["default","low-power","high-performance"];function _t(e,t){var n=t>>2,r=a()[n+6],s={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:It[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=ft(e);return!i||s.explicitSwapControl?0:St.createContext(i,s)}function Et(e,t){return _t(e,t)}var Tt={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Tt.buffers[e];0===t||10===t?((1===e?C:N)(U(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Tt.varargs+=4,a()[Tt.varargs-4>>2]},getStr:function(e){return G(e)},get64:function(e,t){return e}};function Ct(e){return b?Qe(3,1,e):0}function Nt(e,t,n,r,a){if(b)return Qe(4,1,e,t,n,r,a)}function Mt(e,t,r,s){if(b)return Qe(5,1,e,t,r,s);for(var i=0,o=0;o<r;o++){for(var l=a()[t+8*o>>2],u=a()[t+(8*o+4)>>2],h=0;h<u;h++)Tt.printChar(e,n()[l+h]);i+=u}return a()[s>>2]=i,0}function Ft(e){var t=$e.threadExitHandlers.pop();e&&t()}function Rt(e,t){$e.threadExitHandlers.push(function(){re.get(e)(t)})}function Dt(e){if(b)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=$e.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";$e.runningWorkers.push(t);for(var n=Wt(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,o=$e.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},l=o.threadInfoStruct>>2;Atomics.store(s(),l+16,e.detached),Atomics.store(s(),l+25,n),Atomics.store(s(),l+10,o.threadInfoStruct),Atomics.store(s(),l+20,e.stackSize),Atomics.store(s(),l+19,i),Atomics.store(s(),l+26,e.stackSize),Atomics.store(s(),l+28,i),Atomics.store(s(),l+29,e.detached);var u=Ut()+40;Atomics.store(s(),l+43,u),t.pthread=o;var h={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){h.time=performance.now(),t.postMessage(h,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Ot(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return N("pthread_create called with a null thread pointer!"),28;var i=[];if(b&&0===i.length)return Yt(687865856,e,t,n,r);var o=0,l=0,u=0;t&&-1!=t?(o=a()[t>>2],o+=81920,l=a()[t+8>>2],u=0!==a()[t+12>>2]):o=2097152;var h=0==l;h?l=sn(16,o):B((l-=o)>0);for(var c=Wt(228),d=0;d<57;++d)s()[(c>>2)+d]=0;a()[e>>2]=c,a()[c+12>>2]=c;var p=c+152;a()[p>>2]=p;var f={stackBase:l,stackSize:o,allocatedOwnStack:h,detached:u,startRoutine:n,pthread_ptr:c,arg:r,transferList:i};return b?(f.cmd="spawnThread",postMessage(f,i)):Dt(f),0}function zt(e){if(b)return Qe(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return He(28),-1}b||$e.initMainThreadBlock();var Pt,$t,Lt=[null,Ue,gt,Ct,Nt,Mt,zt],Vt={e:We,r:je,x:Ge,b:qe,y:Ke,j:Xe,c:Ze,d:Re,f:Pe,p:Ye,z:Je,u:rt,q:it,v:yt,i:bt,t:xt,w:Et,m:Ct,n:Nt,g:Mt,o:Me,a:F||u.wasmMemory,k:Ft,l:Rt,h:Ot,s:zt},Bt=(Ce(),u.___wasm_call_ctors=function(){return(Bt=u.___wasm_call_ctors=u.asm.A).apply(null,arguments)}),Wt=(u._init=function(){return(u._init=u.asm.B).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.C).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.D).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.E).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.G).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.H).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.I).apply(null,arguments)},u._All=function(){return(u._All=u.asm.J).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.K).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.L).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.M).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.N).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.O).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.P).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Q).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.R).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.S).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.T).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.U).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.V).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.W).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.X).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Y).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.Z).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm._).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.$).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.aa).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.ba).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.ca).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.da).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.ea).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.fa).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.ga).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.ha).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.ia).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.ja).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.ka).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.la).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.ma).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.na).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.oa).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.pa).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.qa).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.ra).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.sa).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.ta).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.ua).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.va).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.wa).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.xa).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.ya).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.za).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.Aa).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Ba).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Ca).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Da).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.Ea).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Fa).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Ga).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.Ha).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Ia).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.Ja).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Ka).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.La).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.Ma).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.Na).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Oa).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Pa).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Qa).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Ra).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Sa).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.Ta).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Ua).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.Va).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Wa).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Xa).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Ya).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Za).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm._a).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.$a).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.ab).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.bb).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm.cb).apply(null,arguments)},u._malloc=function(){return(Wt=u._malloc=u.asm.db).apply(null,arguments)}),jt=u._free=function(){return(jt=u._free=u.asm.eb).apply(null,arguments)},Ht=u.___errno_location=function(){return(Ht=u.___errno_location=u.asm.fb).apply(null,arguments)},Ut=u._emscripten_get_global_libc=function(){return(Ut=u._emscripten_get_global_libc=u.asm.gb).apply(null,arguments)},Gt=u._pthread_self=function(){return(Gt=u._pthread_self=u.asm.hb).apply(null,arguments)},qt=u.___pthread_tsd_run_dtors=function(){return(qt=u.___pthread_tsd_run_dtors=u.asm.ib).apply(null,arguments)},Kt=u._emscripten_main_thread_process_queued_calls=function(){return(Kt=u._emscripten_main_thread_process_queued_calls=u.asm.jb).apply(null,arguments)},Xt=(u._emscripten_current_thread_process_queued_calls=function(){return(u._emscripten_current_thread_process_queued_calls=u.asm.kb).apply(null,arguments)},u._emscripten_register_main_browser_thread_id=function(){return(Xt=u._emscripten_register_main_browser_thread_id=u.asm.lb).apply(null,arguments)}),Zt=u.__emscripten_do_dispatch_to_thread=function(){return(Zt=u.__emscripten_do_dispatch_to_thread=u.asm.mb).apply(null,arguments)},Yt=u._emscripten_sync_run_in_main_thread_4=function(){return(Yt=u._emscripten_sync_run_in_main_thread_4=u.asm.nb).apply(null,arguments)},Jt=u._emscripten_run_in_main_runtime_thread_js=function(){return(Jt=u._emscripten_run_in_main_runtime_thread_js=u.asm.ob).apply(null,arguments)},Qt=u.__emscripten_call_on_thread=function(){return(Qt=u.__emscripten_call_on_thread=u.asm.pb).apply(null,arguments)},en=(u._emscripten_tls_init=function(){return(u._emscripten_tls_init=u.asm.qb).apply(null,arguments)},u.__emscripten_thread_init=function(){return(en=u.__emscripten_thread_init=u.asm.rb).apply(null,arguments)}),tn=u.stackSave=function(){return(tn=u.stackSave=u.asm.sb).apply(null,arguments)},nn=u.stackRestore=function(){return(nn=u.stackRestore=u.asm.tb).apply(null,arguments)},rn=u.stackAlloc=function(){return(rn=u.stackAlloc=u.asm.ub).apply(null,arguments)},an=u._emscripten_stack_set_limits=function(){return(an=u._emscripten_stack_set_limits=u.asm.vb).apply(null,arguments)},sn=u._memalign=function(){return(sn=u._memalign=u.asm.wb).apply(null,arguments)},on=u.__emscripten_allow_main_runtime_queued_calls=9808,ln=u.__emscripten_main_thread_futex=11432;function un(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function hn(e){if(e=e||d,!(me>0)){if(b)return o(u),he(),void postMessage({cmd:"loaded"});ue(),me>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),t()},1)):t())}function t(){$t||($t=!0,u.calledRun=!0,!V&&(he(),ce(),o(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),de()))}}function cn(e,t){if(!t||!M||0!==e){if(!t&&b)throw postMessage({cmd:"exitProcess",returnCode:e}),new un(e);M||($e.terminateAllThreads(),u.onExit&&u.onExit(e),V=!0),p(e,new un(e))}}if(u.cwrap=H,u.PThread=$e,u.PThread=$e,u.wasmMemory=F,u.ExitStatus=un,ye=function e(){$t||hn(),$t||(ye=e)},u.run=hn,u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return b&&(M=!1,$e.initWorker()),hn(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=a:"function"==typeof define&&n("PDX0")?define([],function(){return a}):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=a)}}),Y=S({"node_modules/.pnpm/@tensorflow+tfjs-backend-wasm@3.7.0_@tensorflow+tfjs-core@3.7.0/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js"(e,t){var r,a=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var t,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise(function(e,r){t=e,n=r});var s,i={};for(s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);var o=[],l=!1,u=!1,h=!1,c=!1;l="object"==typeof window,u="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=!l&&!h&&!u;var d,p,f,m,g,y="";function b(e){return a.locateFile?a.locateFile(e,y):y+e}h?(y=u?q().dirname(y)+"/":__dirname+"/",d=function(e,t){return m||(m=k("fs")),g||(g=q()),e=g.normalize(e),m.readFileSync(e,t?null:"utf8")},f=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),I(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),o=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof De))throw e}),process.on("unhandledRejection",ae),a.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(d=function(e){return read(e)}),f=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(I("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||u)&&(u?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),r&&(y=r),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var x,v=a.print||console.log.bind(console),A=a.printErr||console.warn.bind(console);for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);i=null,a.arguments&&(o=a.arguments),a.wasmBinary&&(x=a.wasmBinary),"object"!=typeof WebAssembly&&ae("no native wasm support detected");var w,S=!1;function I(e,t){e||ae("Assertion failed: "+t)}function _(e){var t=a["_"+e];return I(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function E(e,t,n,r,a){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);P(e,t=Re(n),n)}return t},array:function(e){var t=Re(e.length);return $(e,t),t}},i=_(e),o=[],l=0;if(r)for(var u=0;u<r.length;u++){var h=s[n[u]];h?(0===l&&(l=Me()),o[u]=h(r[u])):o[u]=r[u]}var c,d=i.apply(null,o);return c=d,d="string"===t?O(c):"boolean"===t?Boolean(c):c,0!==l&&Fe(l),d}function T(e,t,n,r){var a=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&a&&!r?_(e):function(){return E(e,t,n,arguments)}}var C,N,M,F,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var s="";t<a;){var i=e[t++];if(128&i){var o=63&e[t++];if(192!=(224&i)){var l=63&e[t++];if((i=224==(240&i)?(15&i)<<12|o<<6|l:(7&i)<<18|o<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(i);else{var u=i-65536;s+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else s+=String.fromCharCode((31&i)<<6|o)}else s+=String.fromCharCode(i)}return s}function O(e,t){return e?D(M,e,t):""}function z(e,t,n,r){if(!(r>0))return 0;for(var a=n,s=n+r-1,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),o<=127){if(n>=s)break;t[n++]=o}else if(o<=2047){if(n+1>=s)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=s)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}return t[n]=0,n-a}function P(e,t,n){return z(e,M,t,n)}function $(e,t){N.set(e,t)}function L(e,t){return e%t>0&&(e+=t-e%t),e}function V(e){C=e,a.HEAP8=N=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=F=new Int32Array(e),a.HEAPU8=M=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var B,W=[],j=[],H=[],U=[];function G(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Y(a.preRun.shift());fe(W)}function K(){fe(j)}function X(){fe(H)}function Z(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)J(a.postRun.shift());fe(U)}function Y(e){W.unshift(e)}function J(e){U.unshift(e)}j.push({func:function(){Ce()}});var Q=0,ee=null,te=null;function ne(e){Q++,a.monitorRunDependencies&&a.monitorRunDependencies(Q)}function re(e){if(Q--,a.monitorRunDependencies&&a.monitorRunDependencies(Q),0==Q&&(null!==ee&&(clearInterval(ee),ee=null),te)){var t=te;te=null,t()}}function ae(e){a.onAbort&&a.onAbort(e),A(e+=""),S=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function se(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};var ie="data:application/octet-stream;base64,";function oe(e){return se(e,ie)}var le="file://";function ue(e){return se(e,le)}var he="tfjs-backend-wasm.wasm";function ce(e){try{if(e==he&&x)return new Uint8Array(x);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(t){ae(t)}}function de(){if(!x&&(l||u)){if("function"==typeof fetch&&!ue(he))return fetch(he,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+he+"'";return e.arrayBuffer()}).catch(function(){return ce(he)});if(p)return new Promise(function(e,t){p(he,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return ce(he)})}function pe(){var e={a:Te};function t(e,t){a.asm=e.exports,V((w=a.asm.i).buffer),B=a.asm.o,re()}function r(e){t(e.instance)}function s(t){return de().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){A("failed to asynchronously prepare wasm: "+e),ae(e)})}if(ne(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(i){return A("Module.instantiateWasm callback failed with error: "+i),!1}return(x||"function"!=typeof WebAssembly.instantiateStreaming||oe(he)||ue(he)||"function"!=typeof fetch?s(r):fetch(he,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return A("wasm streaming compile failed: "+e),A("falling back to ArrayBuffer instantiation"),s(r)})})).catch(n),{}}function fe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?B.get(n)():B.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function me(){ae()}function ge(e,t,n){M.copyWithin(e,t,t+n)}function ye(){return M.length}function be(e){try{return w.grow(e-C.byteLength+65535>>>16),V(w.buffer),1}catch(t){}}function xe(e){var t=ye(),n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),be(Math.min(n,L(Math.max(e,a),65536))))return!0}return!1}oe(he)||(he=b(he));var ve={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ve.buffers[e];0===t||10===t?((1===e?v:A)(D(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ve.varargs+=4,F[ve.varargs-4>>2]},getStr:function(e){return O(e)},get64:function(e,t){return e}};function Ae(e){return 0}function we(e,t,n,r,a){}function ke(e,t,n,r){for(var a=0,s=0;s<n;s++){for(var i=F[t+8*s>>2],o=F[t+(8*s+4)>>2],l=0;l<o;l++)ve.printChar(e,M[i+l]);a+=o}return F[r>>2]=a,0}function Se(){return 6}function Ie(e){return F[Ne()>>2]=e,e}function _e(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ie(28),-1}var Ee,Te={a:me,d:ge,e:xe,f:Ae,c:we,b:ke,g:Se,h:_e},Ce=(pe(),a.___wasm_call_ctors=function(){return(Ce=a.___wasm_call_ctors=a.asm.j).apply(null,arguments)}),Ne=(a._init=function(){return(a._init=a.asm.k).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.l).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.m).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.n).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.p).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.q).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.r).apply(null,arguments)},a._All=function(){return(a._All=a.asm.s).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.t).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.u).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.v).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.w).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.x).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.y).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.z).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.A).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.B).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.C).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.D).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.E).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.F).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.G).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.H).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.I).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.J).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.K).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.L).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.M).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.N).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.O).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.P).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.Q).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.R).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.S).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.T).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.U).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.V).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.W).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.X).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.Y).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.Z).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm._).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.$).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.aa).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.ba).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.ca).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.da).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.ea).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.fa).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ga).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ha).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.ia).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ja).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.ka).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.la).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.ma).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.na).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.oa).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.pa).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.qa).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.ra).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.sa).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.ta).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.ua).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.va).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.wa).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.xa).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.ya).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.za).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Aa).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Ba).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.Ca).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Da).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.Ea).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Fa).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ga).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Ha).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ia).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Ja).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.Ka).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.La).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Ma).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Na).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Oa).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Pa).apply(null,arguments)},a.___errno_location=function(){return(Ne=a.___errno_location=a.asm.Qa).apply(null,arguments)}),Me=a.stackSave=function(){return(Me=a.stackSave=a.asm.Ra).apply(null,arguments)},Fe=a.stackRestore=function(){return(Fe=a.stackRestore=a.asm.Sa).apply(null,arguments)},Re=a.stackAlloc=function(){return(Re=a.stackAlloc=a.asm.Ta).apply(null,arguments)};function De(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Oe(e){function n(){Ee||(Ee=!0,a.calledRun=!0,!S&&(K(),X(),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),Z()))}e=e||o,Q>0||(G(),Q>0)||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),n()},1)):n())}if(a.cwrap=T,te=function e(){Ee||Oe(),Ee||(te=e)},a.run=Oe,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Oe(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=a:"function"==typeof define&&n("PDX0")?define([],function(){return a}):"object"==typeof e&&(e.WasmBackendModule=a)}}),J=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Q=class{refCount(e){return ee("refCount")}incRef(e){return ee("incRef")}timerAvailable(){return!0}time(e){return ee("time")}read(e){return ee("read")}readSync(e){return ee("readSync")}numDataIds(){return ee("numDataIds")}disposeData(e,t){return ee("disposeData")}write(e,t,n){return ee("write")}move(e,t,n,r,a){return ee("move")}memory(){return ee("memory")}floatPrecision(){return ee("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return ee("dispose")}};function ee(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function te(e){let t=e.length,n=0,r=0;for(;t>0;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function ne(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n,r,a=e.length,s=0;for(;a>0;)s=Math.random()*a|0,a--,n=e[a],r=t[a],e[a]=e[s],t[a]=t[s],e[s]=n,t[s]=r}function re(e,t,n){return Math.max(e,Math.min(t,n))}function ae(e){return e%2==0?e:e+1}function se(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function ie(e,t){let n=Math.random();return t*n+(1-n)*e}function oe(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function le(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ue(e,t,n=""){le(fe(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function he(e){le(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function ce(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||Ce(e)&&!n)for(let r=0;r<e.length;++r)ce(e[r],t,n);else t.push(e);return t}function de(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function pe(e){return 0===e.length}function fe(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function me(e){return e%1==0}function ge(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function ye(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function be(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return te(t),t}function xe(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ve(e,t=(e=>0),n){return new Promise((r,a)=>{let s=0,i=()=>{if(e())return void r();s++;let o=t(s);null!=n&&s>=n?a():setTimeout(i,o)};i()})}function Ae(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let a=e.slice();return a[r]=t/n,a}function we(e,t){let n=t.length;return le((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),le(e.every(e=>me(e)),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function ke(e,t){let n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:we(t,e).sort(),i=0;for(let o=0;o<e.length;++o){if(null!=s){if(s[i]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==s[i]||s[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),s[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function Se(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Ie(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function _e(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function Ee(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Te(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function Ce(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Ne(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function Me(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function Fe(e){return"string"==typeof e||e instanceof String}function Re(e){return"boolean"==typeof e}function De(e){return"number"==typeof e}function Oe(e){return Array.isArray(e)?Oe(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":De(e)?"float32":Fe(e)?"string":Re(e)?"bool":"float32"}function ze(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Pe(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function $e(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Le(e,t,n,r=!1){let a=new Array;if(1===t.length){let s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{let s=t[0],i=t.slice(1),o=i.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<s;t++)a[t]=Le(e+t*o,i,n,r)}return a}function Ve(e,t,n=!1){if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Le(0,e,t,n)}function Be(e,t){let n=We(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function We(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function je(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Ve(e,new Float32Array(n));if("int32"===t)return Ve(e,new Int32Array(n));if("bool"===t)return Ve(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function He(e){e.forEach(t=>{le(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Ue(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Ge(e,t,n){if(0===t)return[];if(1===t)return[e];let r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function qe(e){return e&&e.then&&"function"==typeof e.then}var Ke="tfjsflags",Xe=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Ze,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(qe(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);Ke in e&&e[Ke].split(",").forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)})}};function Ze(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("="))),t}function Ye(){return Qe}var Je,Qe=null;function et(){if(null==Je){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Je=e}return Je}function tt(e,t){let n=function(){let e=et();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var nt="Abs",rt="Acos",at="Acosh",st="Add",it="AddN",ot="All",lt="Any",ut="ArgMax",ht="ArgMin",ct="Asin",dt="Asinh",pt="Atan",ft="Atanh",mt="Atan2",gt="AvgPool",yt="AvgPoolGrad",bt="AvgPool3D",xt="AvgPool3DGrad",vt="BatchMatMul",At="BatchToSpaceND",wt="Bincount",kt="BroadcastTo",St="Cast",It="Ceil",_t="ClipByValue",Et="Complex",Tt="ComplexAbs",Ct="Concat",Nt="Conv2D",Mt="Conv2DBackpropFilter",Ft="Conv2DBackpropInput",Rt="Conv3D",Dt="Conv3DBackpropFilterV2",Ot="Conv3DBackpropInputV2",zt="Cos",Pt="Cosh",$t="Cumsum",Lt="CropAndResize",Vt="DenseBincount",Bt="DepthToSpace",Wt="DepthwiseConv2dNative",jt="DepthwiseConv2dNativeBackpropFilter",Ht="DepthwiseConv2dNativeBackpropInput",Ut="Diag",Gt="Dilation2D",qt="Dilation2DBackpropInput",Kt="Dilation2DBackpropFilter",Xt="RealDiv",Zt="Einsum",Yt="Elu",Jt="EluGrad",Qt="Erf",en="Equal",tn="Exp",nn="ExpandDims",rn="Expm1",an="FFT",sn="Fill",on="FlipLeftRight",ln="Floor",un="FloorDiv",hn="FusedBatchNorm",cn="GatherV2",dn="GatherNd",pn="Greater",fn="GreaterEqual",mn="Identity",gn="IFFT",yn="Imag",bn="IsFinite",xn="IsInf",vn="IsNan",An="LeakyRelu",wn="Less",kn="LessEqual",Sn="LinSpace",In="Log",_n="Log1p",En="LogicalAnd",Tn="LogicalNot",Cn="LogicalOr",Nn="LogSoftmax",Mn="LRN",Fn="LRNGrad",Rn="Max",Dn="Maximum",On="MaxPool",zn="MaxPoolGrad",Pn="MaxPool3D",$n="MaxPool3DGrad",Ln="MaxPoolWithArgmax",Vn="Mean",Bn="Min",Wn="Minimum",jn="MirrorPad",Hn="Mod",Un="Multinomial",Gn="Multiply",qn="Neg",Kn="NotEqual",Xn="NonMaxSuppressionV3",Zn="NonMaxSuppressionV4",Yn="NonMaxSuppressionV5",Jn="OnesLike",Qn="OneHot",er="Pack",tr="PadV2",nr="Pool",rr="Pow",ar="Prelu",sr="Prod",ir="Range",or="Real",lr="Reciprocal",ur="Relu",hr="Reshape",cr="ResizeNearestNeighbor",dr="ResizeNearestNeighborGrad",pr="ResizeBilinear",fr="ResizeBilinearGrad",mr="Relu6",gr="Reverse",yr="Round",br="Rsqrt",xr="ScatterNd",vr="Select",Ar="Selu",wr="Slice",kr="Sin",Sr="Sinh",Ir="Sign",_r="Sigmoid",Er="Softplus",Tr="Sqrt",Cr="Sum",Nr="SpaceToBatchND",Mr="SplitV",Fr="Softmax",Rr="SparseFillEmptyRows",Dr="SparseReshape",Or="SparseSegmentMean",zr="SparseSegmentSum",Pr="SparseToDense",$r="SquaredDifference",Lr="Square",Vr="StridedSlice",Br="StringNGrams",Wr="StringSplit",jr="StringToHashBucketFast",Hr="Sub",Ur="Tan",Gr="Tanh",qr="Tile",Kr="TopK",Xr="Transform",Zr="Transpose",Yr="Unique",Jr="Unpack",Qr="UnsortedSegmentSum",ea="ZerosLike",ta="Step",na="FromPixels",ra="RotateWithOffset",aa="_FusedMatMul",sa="FusedConv2D",ia="FusedDepthwiseConv2D",oa=tt("kernelRegistry",()=>new Map),la=tt("gradRegistry",()=>new Map);function ua(e,t){let n=ya(e,t);return oa.get(n)}function ha(e){return la.get(e)}function ca(e){let t=oa.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[s,i]=a,[o]=s.split("_");o===e&&n.push(i)}return n}function da(e){let{kernelName:t,backendName:n}=e,r=ya(t,n);oa.has(r)&&console.warn(`The kernel '${t}' for backend '${n}' is already registered`),oa.set(r,e)}function pa(e){let{kernelName:t}=e;la.has(t)&&Ye().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),la.set(t,e)}function fa(e,t){let n=ya(e,t);if(!oa.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);oa.delete(n)}function ma(e){if(!la.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);la.delete(e)}function ga(e,t){ca(e).forEach(e=>{da(Object.assign({},e,{backendName:t}))})}function ya(e,t){return`${t}_${e}`}var ba={};I(ba,{arraysEqual:()=>fe,assert:()=>le,assertNonNegativeIntegerDimensions:()=>He,assertNonNull:()=>he,assertShapesMatch:()=>ue,bytesFromStringArray:()=>Me,bytesPerElement:()=>Ne,checkConversionForErrors:()=>_e,clamp:()=>re,computeStrides:()=>$e,createScalarValue:()=>Ra,createShuffledIndices:()=>be,decodeString:()=>$a,distSquared:()=>oe,encodeString:()=>Pa,fetch:()=>za,fingerPrint64:()=>Fa,flatten:()=>ce,getArrayFromDType:()=>Ie,getTypedArrayFromDType:()=>Se,hasEncodingLoss:()=>Te,hexToLong:()=>Aa,indexToLoc:()=>Ge,inferDtype:()=>Oe,inferFromImplicitShape:()=>Ae,isBoolean:()=>Re,isFunction:()=>ze,isInt:()=>me,isNumber:()=>De,isPromise:()=>qe,isScalarShape:()=>pe,isString:()=>Fe,isTypedArray:()=>Ce,isValidDtype:()=>Ee,locToIndex:()=>Ue,makeOnesTypedArray:()=>Be,makeZerosNestedTypedArray:()=>je,makeZerosTypedArray:()=>We,nearestDivisor:()=>Pe,nearestLargerEven:()=>ae,now:()=>Oa,parseAxisParam:()=>we,randUniform:()=>ie,repeatedTry:()=>ve,rightPad:()=>xe,shuffle:()=>te,shuffleCombo:()=>ne,sizeFromShape:()=>de,sizeToSquarishShape:()=>ye,squeezeShape:()=>ke,sum:()=>se,tanh:()=>ge,toNestedArray:()=>Ve,toTypedArray:()=>Da});var xa=_(E()),va=xa.default||xa;function Aa(e){return va.fromString(e,!0,16)}var wa=Aa("c3a5c85c97cb3127"),ka=Aa("b492b66fbe98f273"),Sa=Aa("9ae16a3b2f90404f");function Ia(e){return e.xor(e.shru(47))}function _a(e,t,n){let r=e.slice(t,t+n);return va.fromBytes(Array.from(r),!0,!0)}function Ea(e,t){return _a(e,t,8)}function Ta(e,t){return _a(e,t,4)}function Ca(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Na(e,t,n=Aa("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Ma(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=Ca(s.add(a).add(r),21);let i=a;return a=(a=a.add(t)).add(n),s=s.add(Ca(a,44)),[a.add(r),s.add(i)]}(Ea(e,t),Ea(e,t+8),Ea(e,t+16),Ea(e,t+24),n,r)}function Fa(e,t=e.length){let n=va.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let n=Sa.add(2*t),r=Ea(e,0).add(Sa),a=Ea(e,t-8);return Na(Ca(a,37).mul(n).add(r),Ca(r,25).add(a).mul(n),n)}if(t>=4){let n=Sa.add(2*t);return Na(Ta(e,0).shl(3).add(t),Ta(e,t-4),n)}if(t>0){let n=t+(e[t-1]<<2);return Ia(Sa.mul(e[0]+(e[t>>1]<<8)).xor(wa.mul(n))).mul(Sa)}return Sa}(e,t):function(e,t=e.length){let n=Sa.add(2*t),r=Ea(e,0).mul(ka),a=Ea(e,8),s=Ea(e,t-8).mul(n),i=Ea(e,t-16).mul(Sa);return Na(Ca(r.add(a),43).add(Ca(s,30)).add(i),r.add(Ca(a.add(Sa),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){let n=Sa.add(2*t),r=Ea(e,0).mul(Sa),a=Ea(e,8),s=Ea(e,t-8).mul(n),i=Ea(e,t-16).mul(Sa),o=Ca(r.add(a),43).add(Ca(s,30)).add(i),l=Na(o,r.add(Ca(a.add(Sa),18)).add(s),n),u=Ea(e,16).mul(n),h=Ea(e,24),c=o.add(Ea(e,t-32)).mul(n),d=l.add(Ea(e,t-24)).mul(n);return Na(Ca(u.add(h),43).add(Ca(c,30)).add(d),u.add(Ca(h.add(r),18)).add(c),n)}(e,t);let r=n,a=n.mul(ka).add(113),s=Ia(a.mul(Sa).add(113)).mul(Sa),i=[va.UZERO,va.UZERO],o=[va.UZERO,va.UZERO];r=r.mul(Sa).add(Ea(e,0));let l=0,u=64*(t-1>>6),h=u+(t-1&63)-63;do{r=Ca(r.add(a).add(i[0]).add(Ea(e,l+8)),37).mul(ka),a=Ca(a.add(i[1]).add(Ea(e,l+48)),42).mul(ka),r=r.xor(o[1]),a=a.add(i[0]).add(Ea(e,l+40)),s=Ca(s.add(o[0]),33).mul(ka),i=Ma(e,l,i[1].mul(ka),r.add(o[0])),o=Ma(e,l+32,s.add(o[1]),a.add(Ea(e,l+16))),[s,r]=[r,s],l+=64}while(l!==u);let c=ka.add(s.and(255).shl(1));return l=h,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=Ca(r.add(a).add(i[0]).add(Ea(e,l+8)),37).mul(c),a=Ca(a.add(i[1]).add(Ea(e,l+48)),42).mul(c),r=r.xor(o[1].mul(9)),a=a.add(i[0].mul(9).add(Ea(e,l+40))),s=Ca(s.add(o[0]),33).mul(c),i=Ma(e,l,i[1].mul(c),r.add(o[0])),o=Ma(e,l+32,s.add(o[1]),a.add(Ea(e,l+16))),[s,r]=[r,s],Na(Na(i[0],o[0],c).add(Ia(a).mul(wa)).add(s),Na(i[1],o[1],c).add(r),c)}function Ra(e,t){return"string"===t?Pa(e):Da([e],t)}function Da(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ce(e)),Ye().getBool("DEBUG")&&_e(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type "+t)}function Oa(){return Ye().platform.now()}function za(e,t){return Ye().platform.fetch(e,t)}function Pa(e,t="utf-8"){return t=t||"utf-8",Ye().platform.encode(e,t)}function $a(e,t="utf-8"){return t=t||"utf-8",Ye().platform.decode(e,t)}function La(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){let t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}function Va(e,t,n,r){let a=$e(t),s=function(e,t,n,r){let a=de(t),s=r[r.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?Ha(e):e;if(o>1)for(let u=0;u<a/s;u++){let e=u*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],Ba(l[e+t],0,n).length)}return i}(e,t,n,a),i=t.length,o=ja(e,t,n,a,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function Ba(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:Fe(e)?`'${e}'`:"bool"===n?Wa(e):parseFloat(e.toFixed(7)).toString(),xe(r,t)}function Wa(e){return 0===e?"false":"true"}function ja(e,t,n,r,a,s=!0){let i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l)return"complex64"===n?[Ba(Ha(e)[0],0,n)]:"bool"===n?[Wa(e[0])]:[e[0].toString()];if(1===l){if(o>20){let t=Array.from(e.slice(0,3*i)),r=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(t=Ha(t),r=Ha(r)),["["+t.map((e,t)=>Ba(e,a[t],n)).join(", ")+", ..., "+r.map((e,t)=>Ba(e,a[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Ha(e):Array.from(e)).map((e,t)=>Ba(e,a[t],n)).join(", ")+"]"]}let u=t.slice(1),h=r.slice(1),c=r[0]*i,d=[];if(o>20){for(let t=0;t<3;t++){let r=t*c;d.push(...ja(e.slice(r,r+c),u,n,h,a,!1))}d.push("...");for(let t=o-3;t<o;t++){let r=t*c;d.push(...ja(e.slice(r,r+c),u,n,h,a,t===o-1))}}else for(let m=0;m<o;m++){let t=m*c;d.push(...ja(e.slice(t,t+c),u,n,h,a,m===o-1))}let p=2===l?",":"";d[0]="["+d[0]+p;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":f),d}function Ha(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ua=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=de(e),null!=n){let e=n.length;le(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Ie(t,this.size),this.strides=$e(e)}set(e,...t){0===t.length&&(t=[0]),le(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t])throw new Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Ga().makeTensor(this.values,this.shape,this.dtype)}},Ga=null,qa=null,Ka=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=de(e),this.strides=$e(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return qa.buffer(this.shape,this.dtype,e)}bufferSync(){return qa.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Ve(this.shape,e,"complex64"===this.dtype)}arraySync(){return Ve(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=Ga().read(this.dataId);if("string"===this.dtype){let n=await e;try{return n.map(e=>$a(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();let e=Ga().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>$a(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Ga().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Ga().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return qa.print(this,e)}clone(){return this.throwIfDisposed(),qa.clone(this)}toString(e=!1){return Va(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),qa.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Ga().makeVariable(this,e,t,n)}};Object.defineProperty(Ka,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),tt("Tensor",()=>Ka);var Xa=class extends Ka{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!fe(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ga().disposeTensor(this),this.dataId=e.dataId,Ga().incRef(this,null)}dispose(){Ga().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Xa,Symbol.hasInstance,{value:e=>e instanceof Ka&&null!=e.assign&&e.assign instanceof Function});var Za,Ya,Ja,Qa,es,ts,ns={};I(ns,{assertTypesMatch:()=>os,getTensorsInContainer:()=>us,isTensorInList:()=>ls,makeTypesMatch:()=>is}),(Ya=Za||(Za={})).R0="R0",Ya.R1="R1",Ya.R2="R2",Ya.R3="R3",Ya.R4="R4",Ya.R5="R5",Ya.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ja||(Ja={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Qa||(Qa={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(es||(es={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ts||(ts={}));var rs={float32:es,int32:Ja,bool:Qa,complex64:ts};function as(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return rs[e][t]}function ss(e){return as(e,"int32")}function is(e,t){if(e.dtype===t.dtype)return[e,t];let n=as(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function os(e,t){le(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function ls(e,t){return t.some(t=>t.id===e.id)}function us(e){let t=[];return hs(e,t,new Set),t}function hs(e,t,n){if(null==e)return;if(e instanceof Ka)return void t.push(e);if(!function(e){return Array.isArray(e)||"object"==typeof e}(e))return;let r=e;for(let a in r){let e=r[a];n.has(e)||(n.add(e),hs(e,t,n))}}function cs(e){return null!=e.kernelName}var ds=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},ps=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ds}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new class{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new class{logKernelProfile(e,t,n,r,a,s){let i="number"==typeof r?xe(r+"ms",9):r.error,o=xe(e,25),l=t.rank,u=t.size,h=xe(t.shape.toString(),14),c="";for(let d in a){let e=a[d];if(null!=e){let n=e.shape||t.shape,r=n.length;c+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${i}\t%c${l}D ${h}\t%c${u}\t%c${c}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}})}profileKernel(e,t,n){let r,a,s=()=>{r=n()},i=Oa();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let e of r)e.dataSync();a=Promise.resolve({kernelMs:Oa()-i})}if(Ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let t=r[o];t.data().then(n=>{La(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach(e=>{Promise.all([e.data(),r,s]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}(this.backendInstance),!0}setupRegisteredKernels(){ca(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ca(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(!n||n instanceof Q||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0))).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return ps.nextTensorId++}nextVariableId(){return ps.nextVariableId++}clone(e){let t=gs.runKernel(mn,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>gs.runKernel(St,{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,n){if(null==ua(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});let s=r-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n,r=[],a=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o,l=cs(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(cs(e)){let{kernelName:t,inputs:s,attrs:i}=e,l=ua(t,this.backendName);le(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),n=()=>{let e=this.backend.numDataIds();o=l.kernelFunc({inputs:s,attrs:i,backend:this.backend});let n=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let u=n.map(e=>{if(null!=e.rank)return e;let{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)});if(a){let e=this.getTensorsForGradient(t,s,u);r=this.saveTensorsForBackwardMode(e)}return u}}else{let{forwardFunc:t}=e,s=e=>{!a||(r=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,s));let n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}let u,{inputs:h,attrs:c}=e,d=cs(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(u=this.profiler.profileKernel(l,h,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(u),t=u.outputs):t=n()}),a&&this.addTapeNode(l,h,t,d,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(e=>null!=h[e]?h[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:u.timeMs,extraInfo:u.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){let r=ha(e);if(null!=r){let e,a=r.inputsToSave||[],s=r.outputsToSave||[];r.saveAllInputs?(le(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=a.map(e=>t[e]);let i=n.filter((e,t)=>s[t]);return e.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let a=e;"string"===(n=n||"float32")&&Fe(e[0])&&(a=e.map(e=>Pa(e)));let s=r.write(a,t,n),i=new Ka(t,n,s,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){let e=this.state.tensorInfo.get(s),t=Me(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){let a=new Ka(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let a=new Xa(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ne(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Xa||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*Ne(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){let i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=ha(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=n[t],r=We(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=us(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){let e=this.state.activeScope.track[a];!e.kept&&!n.has(e.id)&&e.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{!e.kept&&e.scopeId===r.id&&this.track(e)})}gradients(e,t,n,r=!1){if(le(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));le(a instanceof Ka,()=>"The result y returned by f() must be a tensor.");let s=function(e,t,n){let r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let n=e[l],s=n.inputs;for(let e in s){let i=s[e],o=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,a[n.id]=!0;break}if(o)break}}let s={};s[n.id]=!0;let i={};for(let l=e.length-1;l>=0;l--){let t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(s[t.outputs[e].id]){for(let e in n)s[n[e].id]=!0,i[t.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let t=e[l];if(a[t.id]&&i[t.id]){let e={};for(let a in t.inputs){let n=t.inputs[a];r[n.id]&&(e[a]=n)}let n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[a.id]=null==n?function(e){let t=Be(de(e),"float32");return gs.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){let s=t[a],i=[];if(s.outputs.forEach(t=>{let n=e[t.id];i.push(null!=n?n:null)}),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let o=s.gradient(i);for(let t in s.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(o)}.`);let a=n(()=>o[t]());if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);let i=s.inputs[t];if(!fe(a.shape,i.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=a;else{let t=e[i.id];e[i.id]=r(t,a),t.dispose()}}}}(e,s,e=>this.tidy(e),ys);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){return le(ze(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{le(t.every(e=>e instanceof Ka),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,r={};return t.forEach((e,t)=>{r[t]=e}),this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),le(n.value instanceof Ka,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),le(ze(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{let a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];le(s.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),le(s.every(e=>e instanceof Ka),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let i={};return s.forEach((e,t)=>{i[t]=()=>e}),i},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){let t=Oa(),n=await this.backend.time(e);return n.wallMs=Oa()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ds;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},fs=ps;function ms(){let e=et();if(null==e._tfengine){let t=new Xe(e);e._tfengine=new fs(t)}return function(e){Qe=e}(e._tfengine.ENV),function(e){Ga=e}(()=>e._tfengine),e._tfengine}fs.nextTensorId=0,fs.nextVariableId=0;var gs=ms();function ys(e,t){return gs.runKernel(st,{a:e,b:t})}var bs={};function xs(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function vs(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}I(bs,{isBrowser:()=>vs,isMobile:()=>xs});var As=Ye();function ws(e,t){let n=e;if(Ce(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Ce(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ks(e,r,[]),r}function ks(e,t,n){if(n=n||[],!Array.isArray(e)&&!Ce(e))return void le(0===t.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);le(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),le(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let a=0;a<e.length;++a)ks(e[a],r,n.concat(a))}function Ss(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function Is(e,t,n,r="numeric"){if(e instanceof Ka)return Ss(r,e.dtype,t,n),e;let a=Oe(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Ss(r,a,t,n),null==e||!Ce(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==e?"null":e.constructor.name}'`);let s=ws(e,a);!Ce(e)&&!Array.isArray(e)&&(e=[e]);let i="string"!==a?Da(e,a):ce(e,[],!0);return gs.makeTensor(i,s,a)}function _s(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,a)=>Is(e,`${t}[${a}]`,n,r))}As.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),As.registerFlag("IS_BROWSER",()=>vs()),As.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),As.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),As.registerFlag("PROD",()=>!1),As.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>As.getBool("DEBUG")),As.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),As.registerFlag("IS_TEST",()=>!1),As.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),As.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);var Es="__op";function Ts(e){let t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Es;let a=(...e)=>{gs.startScope(n);try{let t=r(...e);return qe(t)&&console.error("Cannot return a Promise inside of tidy."),gs.endScope(t),t}catch(t){throw gs.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Cs=Ts({complex_:function(e,t){let n=Is(e,"real","complex"),r=Is(t,"imag","complex");return ue(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),gs.runKernel(Et,{real:n,imag:r})}});function Ns(e,t,n,r){if(null==r&&(r=Oe(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ce(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){He(t);let e=de(t),r=de(n);le(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let a=0;a<n.length;++a){let e=n[a],r=a!==n.length-1||e!==de(t.slice(a));le(n[a]===t[a]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Ce(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?Da(e,r):ce(e,[],!0),gs.makeTensor(e,t,r)}function Ms(e,t,n){return Ns(e,t,ws(e,n),n)}var Fs={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function Rs(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<a.length;++s){let i=a[s],o=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${o.dtype}`);let l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){let e=new Promise(async e=>{let t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n),a=0;for(let s=0;s<t.length;s++){let e=t[s],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:Os(await Promise.all(r)),specs:n}}function Ds(e,t){let n,r={},a=0;for(let s of t){let t,i=s.name,o=s.dtype,l=s.shape,u=de(l);if("quantization"in s){let r=s.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r)||!("scale"in r))throw new Error(`Weight ${s.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==r.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==o)throw new Error(`Weight ${s.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${o}.`)}let l=Fs[r.dtype],h=e.slice(a,a+u*l),c="uint8"===r.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===o)if("uint8"===r.dtype||"uint16"===r.dtype){t=new Float32Array(c.length);for(let e=0;e<c.length;e++)t[e]=c[e]*r.scale+r.min}else{if("float16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);void 0===n&&(n=Bs()),t=n(c)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${i}': ${o}`);if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);t=new Int32Array(c.length);for(let e=0;e<c.length;e++)t[e]=Math.round(c[e]*r.scale+r.min)}a+=u*l}else if("string"===o){let n=de(s.shape);t=[];for(let r=0;r<n;r++){let n=new Uint32Array(e.slice(a,a+4))[0];a+=4;let r=new Uint8Array(e.slice(a,a+n));t.push(r),a+=n}}else{let n=Fs[o],s=e.slice(a,a+u*n);if("float32"===o)t=new Float32Array(s);else if("int32"===o)t=new Int32Array(s);else if("bool"===o)t=new Uint8Array(s);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${i}': ${o}`);{t=new Float32Array(s);let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<e.length;r++)e[r]=t[2*r],n[r]=t[2*r+1];let a=Ms(e,l,"float32"),o=Ms(n,l,"float32");r[i]=Cs(a,o),a.dispose(),o.dispose()}}a+=u*n}"complex64"!==o&&(r[i]=Ms(t,l,o))}return r}function Os(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});let r=new Uint8Array(t),a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}var zs="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Ps(e){return zs?Buffer.byteLength(e):new Blob([e]).size}function $s(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});let n=new Uint8Array(t),r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function Ls(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function Vs(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ps(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ps(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Bs(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let i=0;i<r.length;i++){let a=r[i];s[i]=e[n[a>>10]+(1023&a)]+t[a>>10]}return new Float32Array(a)}}var Ws=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Ws.instance&&(Ws.instance=new Ws),Ws.instance}static registerSaveRouter(e){Ws.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ws.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ws.getHandlers(e,"save")}static getLoadHandlers(e,t){return Ws.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return("load"===t?Ws.getInstance().loadRouters:Ws.getInstance().saveRouters).forEach(t=>{let a=t(e,n);null!==a&&r.push(a)}),r}},js=e=>Ws.registerSaveRouter(e),Hs=e=>Ws.registerLoadRouter(e),Us=e=>Ws.getSaveHandlers(e),Gs=(e,t)=>Ws.getLoadHandlers(e,t),qs="tensorflowjs",Ks="models_store",Xs="model_info_store";function Zs(){if(!Ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Ys(e){let t=e.result;t.createObjectStore(Ks,{keyPath:"modelPath"}),t.createObjectStore(Xs,{keyPath:"modelPath"})}var Js=class{constructor(e){if(this.indexedDB=Zs(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open(qs,1);r.onupgradeneeded=()=>Ys(r),r.onsuccess=()=>{let a=r.result;if(null==t){let t=a.transaction(Ks,"readonly"),r=t.objectStore(Ks).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{let r,s=Vs(t),i=a.transaction(Xs,"readwrite"),o=i.objectStore(Xs),l=o.put({modelPath:this.modelPath,modelArtifactsInfo:s});l.onsuccess=()=>{r=a.transaction(Ks,"readwrite");let l=r.objectStore(Ks).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s});l.onsuccess=()=>e({modelArtifactsInfo:s}),l.onerror=e=>{o=i.objectStore(Xs);let t=o.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(l.error)),t.onerror=e=>(a.close(),n(l.error))}},l.onerror=e=>(a.close(),n(l.error)),i.oncomplete=()=>{null==r?a.close():r.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}};Js.URL_SCHEME="indexeddb://";var Qs=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Js.URL_SCHEME)?function(e){return new Js(e)}(e.slice(Js.URL_SCHEME.length)):null;Ws.registerSaveRouter(Qs),Ws.registerLoadRouter(Qs);var ei="/",ti="tensorflowjs_models",ni="info",ri="model_topology",ai="weight_specs",si="weight_data",ii="model_metadata";function oi(e){return{info:[ti,e,ni].join(ei),topology:[ti,e,ri].join(ei),weightSpecs:[ti,e,ai].join(ei),weightData:[ti,e,si].join(ei),modelMetadata:[ti,e,ii].join(ei)}}function li(e){let t=e.split(ei);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(ei)}var ui=class{constructor(e){if(!Ye().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=oi(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Vs(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(zs)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData));let t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){let e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}let s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(zs){let t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(s),t}};ui.URL_SCHEME="localstorage://";var hi=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ui.URL_SCHEME)?function(e){return new ui(e)}(e.slice(ui.URL_SCHEME.length)):null;Ws.registerSaveRouter(hi),Ws.registerLoadRouter(hi);var ci,di="://",pi=class{constructor(){this.managers={}}static getInstance(){return null==pi.instance&&(pi.instance=new pi),pi.instance}static registerManager(e,t){le(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(di)&&(e=e.slice(0,e.indexOf(di))),le(e.length>0,()=>"scheme must not be an empty string.");let n=pi.getInstance();le(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}};function fi(e){if(-1===e.indexOf(di))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+pi.getSchemes().join(","));return{scheme:e.split(di)[0],path:e.split(di)[1]}}async function mi(e,t,n=!1){le(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=Ws.getLoadHandlers(e);le(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),le(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let a=r[0],s=Ws.getSaveHandlers(t);le(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),le(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let i=s[0],o=fi(e).scheme,l=fi(e).path,u=o===fi(e).scheme,h=await a.load();n&&u&&await pi.getManager(o).removeModel(l);let c=await i.save(h);return n&&!u&&await pi.getManager(o).removeModel(l),c.modelArtifactsInfo}async function gi(){let e=pi.getSchemes(),t={};for(let n of e){let e=await pi.getManager(n).listModels();for(let r in e)t[n+di+r]=e[r]}return t}async function yi(e){let t=fi(e);return pi.getManager(t.scheme).removeModel(t.path)}async function bi(e,t){return mi(e,t,!1)}async function xi(e,t){return mi(e,t,!0)}if(Ye().get("IS_BROWSER")){Ye().setPlatform("browser",new class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}});try{pi.registerManager(ui.URL_SCHEME,new class{constructor(){le(Ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),le("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=ti+ei,n=ei+ni;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);a.startsWith(t)&&a.endsWith(n)&&(e[li(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){let t=oi(e=function(e){return e.startsWith(ui.URL_SCHEME)?e.slice(ui.URL_SCHEME.length):e}(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),n}})}catch(Ya){}try{pi.registerManager(Js.URL_SCHEME,new class{constructor(){this.indexedDB=Zs()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(qs,1);n.onupgradeneeded=()=>Ys(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(Xs,"readonly"),s=a.objectStore(Xs).getAll();s.onsuccess=()=>{let t={};for(let e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){return e=function(e){return e.startsWith(Js.URL_SCHEME)?e.slice(Js.URL_SCHEME.length):e}(e),new Promise((t,n)=>{let r=this.indexedDB.open(qs,1);r.onupgradeneeded=()=>Ys(r),r.onsuccess=()=>{let a,s=r.result,i=s.transaction(Xs,"readwrite"),o=i.objectStore(Xs),l=o.get(e);l.onsuccess=()=>{if(null==l.result)return s.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let r=o.delete(e),i=()=>{a=s.transaction(Ks,"readwrite");let r=a.objectStore(Ks).delete(e);r.onsuccess=()=>t(l.result.modelArtifactsInfo),r.onerror=e=>n(l.error)};r.onsuccess=i,r.onerror=e=>(i(),s.close(),n(l.error))}},l.onerror=e=>(s.close(),n(l.error)),i.oncomplete=()=>{null==a?s.close():a.oncomplete=()=>s.close()}},r.onerror=e=>n(r.error)})}})}catch(Ya){}}function vi(e,t="float32",n){return t=t||"float32",He(e),new Ua(e,t,n)}Ye().get("IS_NODE")&&Ye().setPlatform("node",new class{constructor(){this.util=k("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Ye().global.fetch?Ye().global.fetch(e,t):(null==ci&&(ci=T()),ci(e,t))}now(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var Ai=Ts({cast_:function(e,t){let n=Is(e,"x","cast");if(!Ee(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return gs.runKernel(St,{x:n},{dtype:t})}}),wi=Ts({clone_:function(e){let t={x:Is(e,"x","clone","string_or_numeric")};return gs.runKernel(mn,t)}});function ki(e,t=!1){console.log(e.toString(t))}ms(),function(e){qa=e}({buffer:vi,cast:Ai,clone:wi,print:ki});var Si={};function Ii(e){return new Promise(e=>setTimeout(e)).then(e)}I(Si,{browserFiles:()=>Ti,browserHTTPRequest:()=>Pi,concatenateArrayBuffers:()=>$s,copyModel:()=>bi,decodeWeights:()=>Ds,encodeWeights:()=>Rs,fromMemory:()=>Li,getLoadHandlers:()=>Gs,getModelArtifactsInfoForJSON:()=>Vs,getSaveHandlers:()=>Us,http:()=>zi,isHTTPScheme:()=>Di,listModels:()=>gi,loadWeights:()=>Mi,moveModel:()=>xi,registerLoadRouter:()=>Hs,registerSaveRouter:()=>js,removeModel:()=>yi,weightsLoaderFactory:()=>Fi,withSaveHandler:()=>Vi});var _i=class{constructor(e){if(!Ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(_i.URL_SCHEME)&&(e=e.slice(_i.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer);let r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=r,await Ii(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await Ii(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Vs(e)}}}},Ei=_i;function Ti(e){return new class{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}async load(){let e=this.files[0],t=this.files.slice(1);return new Promise((n,r)=>{let a=new FileReader;a.onload=a=>{let s=JSON.parse(a.target.result),i=s.modelTopology;if(null==i)return void r(new Error("modelTopology field is missing from file "+e.name));0===t.length&&n({modelTopology:i});let o,l=s.weightsManifest;if(null==l)return void r(new Error("weightManifest field is missing from file "+e.name));try{o=this.checkManifestAndWeightFiles(l,t)}catch(d){return void r(d)}let u=[],h=[],c=[];l.forEach(e=>{e.paths.forEach(e=>{h.push(e),c.push(null)}),u.push(...e.weights)}),l.forEach(e=>{e.paths.forEach(e=>{let t=new FileReader;t.onload=t=>{let r=t.target.result,a=h.indexOf(e);if(c[a]=r,-1===c.indexOf(null)){let e={modelTopology:i,weightSpecs:u,weightData:$s(c),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(o[e])})})},a.onerror=t=>r(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),a.readAsText(e)})}checkManifestAndWeightFiles(e,t){let n=[],r=t.map(e=>Ls(e.name)),a={};for(let s of e)s.paths.forEach(e=>{let s=Ls(e);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);a[e]=t[r.indexOf(s)]});if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return a}}(e)}function Ci(e,t,n,r){var a;le(null!=(a=e)&&Array.isArray(a)&&a.length>0,()=>"promises must be a none empty array"),function(e,t){le(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+e),le(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+t),le(t>=e,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`)}(n=null==n?0:n,r=null==r?1:r);let s=0;return Promise.all(e.map(a=>(a.then(a=>{let i=n+ ++s/e.length*(r-n);return t(i),a}),a)))}async function Ni(e,t){null==t&&(t={});let n=null==t.fetchFunc?Ye().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await Ci(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await Ci(a,t.onProgress,.5,1)}async function Mi(e,t="",n,r){return Fi(e=>Ni(e,{requestInit:r}))(e,t,n)}function Fi(e){return async(t,n="",r)=>{let a=t.map(()=>!1),s={},i=null!=r?r.map(()=>!1):[],o=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let l=Fs["quantization"in e?e.quantization.dtype:e.dtype]*de(e.shape),u=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),i[n]=!0)}):u(),o.push(e.name),n+=l})}),!i.every(e=>e)){let e=r.filter((e,t)=>!i[t]);throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${o.join(", ")}.`)}let l=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});let h=await e(u),c={},d=0;return l.forEach(e=>{let n=t[e].paths.length,r=0;for(let t=0;t<n;t++)r+=h[d+t].byteLength;let a=new ArrayBuffer(r),i=new Uint8Array(a),o=0;for(let t=0;t<n;t++){let e=new Uint8Array(h[d+t]);i.set(e,o),o+=e.byteLength}s[e].forEach(e=>{let t=Ds(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(let n in t)c[n]=t[n]}),d+=n}),c}}Ei.URL_SCHEME="downloads://",Ws.registerSaveRouter(e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ei.URL_SCHEME)?function(e="model"){return new Ei(e)}(e.slice(Ei.URL_SCHEME.length)):null);var Ri=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(le("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Ye().platform.fetch,le(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&le(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");let r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Vs(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){let e,t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(p){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}let n,r,a=e.modelTopology,s=e.weightsManifest,i=e.generatedBy,o=e.convertedBy,l=e.format,u=e.signature,h=e.userDefinedMetadata;if(null==a&&null==s)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);null!=s&&([n,r]=await this.loadWeights(s));let c={modelTopology:a,weightSpecs:n,weightData:r,generatedBy:i,convertedBy:o,format:l};null!=u&&(c.signature=u),null!=h&&(c.userDefinedMetadata=h);let d=e.modelInitializer;return d&&(c.modelInitializer=d),c}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),a=this.weightPathPrefix||n,s=[];for(let l of e)s.push(...l.weights);let i=[],o=[];for(let l of e)for(let e of l.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(o)),[s,$s(await Ni(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}};function Di(e){return null!=e.match(Ri.URL_SCHEME_REGEX)}Ri.URL_SCHEME_REGEX=/^https?:\/\//;var Oi=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Di(e)):Di(e),n)return zi(e,t)}return null};function zi(e,t){return new Ri(e,t)}function Pi(e,t){return zi(e,t)}Ws.registerSaveRouter(Oi),Ws.registerLoadRouter(Oi);var $i=class{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}};function Li(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new $i(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $i({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $i({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Vi(e){return new class{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}(e)}var Bi={};I(Bi,{confusionMatrix:()=>Gi});var Wi,ji=Ts({matMul_:function(e,t,n=!1,r=!1){let a=Is(e,"a","matMul"),s=Is(t,"b","matMul");return[a,s]=is(a,s),gs.runKernel(vt,{a:a,b:s},{transposeA:n,transposeB:r})}}),Hi=Ts({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);let a={indices:Is(e,"indices","oneHot","int32")};return gs.runKernel(Qn,a,{depth:t,onValue:n,offValue:r})}}),Ui=Ts({transpose_:function(e,t){let n=Is(e,"x","transpose");return null==t&&(t=n.shape.map((e,t)=>t).reverse()),le(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(e=>{le(e>=0&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1?n.clone():gs.runKernel(Zr,{x:n},{perm:t})}}),Gi=Ts({confusionMatrix_:function(e,t,n){let r=Is(e,"labels","confusionMatrix"),a=Is(t,"predictions","confusionMatrix");le(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),le(1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),le(1===a.rank,()=>"Expected the rank of predictions to be 1, but got "+a.rank),le(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),le(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);let s=Hi(Ai(r,"int32"),n),i=Hi(Ai(a,"int32"),n),o=Ui(s),l=ji(o,i);return Ai(l,"int32")}}),qi={};function Ki(e,t,n){if(he(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");let r=ws(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ns(e,t,r,n)}function Xi(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a){let t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=ua(na,gs.backendName))return gs.runKernel(na,{pixels:e},{numChannels:t});let l,u,[h,c]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(i?l=e.getContext("2d").getImageData(0,0,h,c).data:r||n?l=e.data:(s||a||o)&&(null==Wi&&(Wi=document.createElement("canvas").getContext("2d")),Wi.canvas.width=h,Wi.canvas.height=c,Wi.drawImage(e,0,0,h,c),l=Wi.getImageData(0,0,h,c).data),4===t)u=new Int32Array(l);else{let e=h*c;u=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)u[n*t+e]=l[4*n+e]}return Ki(u,[c,h,t],"int32")}async function Zi(e,t=3){let n=null;if(Ye().getBool("WRAP_TO_IMAGEBITMAP")&&function(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(r){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Xi(n,t)}async function Yi(e,t){let n=Is(e,"img","toPixels");if(!(e instanceof Ka)){let e=n;n=Ai(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);let[r,a]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);let i=await n.data(),o="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){let e=[0,0,0,255];for(let r=0;r<s;r++){let t=i[u*s+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===s?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}let t=4*u;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){t.width=a,t.height=r;let e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}I(qi,{fromPixels:()=>Ji,fromPixelsAsync:()=>Zi,toPixels:()=>Yi});var Ji=Ts({fromPixels_:Xi}),Qi={};function eo(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===de(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let a=t.shape,s=a[a.length-1],i=1;for(let c=0;c<a.length-1;++c)i*=a[c];let o=e.shape,l=a.slice();l.pop();let u=1;for(let c=s;c<n;++c)u*=o[c],l.push(o[c]);let h=[...$e(e.shape).map(e=>e/u),1].slice(0,s);return[l,i,u,h]}I(Qi,{prepareAndValidate:()=>eo});var to={};function no(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(s+` updates.shape[${i+a}] (${n.shape[i+a]}) != shape[${i+a}] (${e[i+a]})`)}function ro(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}no(n,t,e)}function ao(e,t,n){let r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length,i=1;for(let l=a;l<s;++l)i*=n[l];let o=a<1?1:a;return{sliceRank:a,numUpdates:de(t.shape)/o,sliceSize:i,strides:[...$e(n.slice(0,a)),1],outputSize:de(n)}}I(to,{calculateShapes:()=>ao,validateInput:()=>ro,validateUpdateShape:()=>no});var so={};function io(e,t,n){let r=e.shape.length;le(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),le(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)le(t[a]+n[a]<=e.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}function oo(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function lo(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function uo(e,t,n,r){let a=[...e];for(let s=a.length;s<r.length;s++)a.push(1);for(let s=0;s<n;s++)0===s?a[t]=1:(a.splice(t,0,1),a.pop());return a}function ho(e,t,n){return n<=e?n:n-(t-1)}function co(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function po(e,t,n,r,a,s,i,o,l){let u=e.length,h=new Array(u),c=new Array(u),d=new Array(u);if(t.length&&n>0){let l=t[0],u=n+1;h=fo(i,l,u,r,e),c=mo(o,l,u,a,e),d=uo(s,l,u,e)}else for(let p=0;p<u;p++)h[p]=yo(i,r,s,e,p,l),c[p]=bo(o,a,s,e,p,l),d[p]=go(s,p,l);return{begin:h,end:c,strides:d}}function fo(e,t,n,r,a){let s=[...a],i=co(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=0;else{let a=ho(t,n,o),i=r[a];e&1<<a&&(i=0),s[o]=i}return s}function mo(e,t,n,r,a){let s=[...a],i=co(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{let a=ho(t,n,o),i=r[a];e&1<<a&&(i=Number.MAX_SAFE_INTEGER),s[o]=i}for(let o=0;o<s.length;o++){let e=a[o];s[o]<0&&(s[o]+=e),s[o]=re(0,s[o],a[o])}return s}function go(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function yo(e,t,n,r,a,s){let i=t[a];(e&1<<a||s&1<<a||null==i)&&(i=(n[a]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let o=r[a];return i<0&&(i+=o),i=re(0,i,o-1),i}function bo(e,t,n,r,a,s){let i=t[a],o=n[a]||1;(e&1<<a||s&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=r[a];return i<0&&(i+=l),i=o>0?re(0,i,l):re(-1,i,l-1),i}function xo(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function vo(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ao(e,t,n){let r,a,s=e.shape.length;return r="number"==typeof t?[t,...new Array(s-1).fill(0)]:t.length<s?t.concat(new Array(s-t.length).fill(0)):t.slice(),r.forEach(e=>{le(-1!==e,()=>"slice() does not support negative begin indexing.")}),a=null==n?new Array(s).fill(-1):"number"==typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n,a=a.map((t,n)=>t>=0?t:(le(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,a]}function wo(e,t,n,r,a,s,i,o,l){let u=t.slice(),h=n.slice(),c=r;null==r&&(c=new Array(u.length));let d=oo(i);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==o)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");let p=e.length-u.length,f=oo(o),m=e.slice();f.forEach(e=>{u[e]=0,h[e]=1,m.splice(e,0,1)});let{begin:g,end:y,strides:b}=po(m,d,p,u,h,c,a,s,i);u=g,h=y,c=b;let x=oo(l);x.forEach(e=>{h[e]=u[e]+1,c[e]=1});let v=lo(u,h,c),A=v.filter((e,t)=>-1===x.indexOf(t));return{nonStrided:c.every(e=>1===e),$begin:u,$end:h,$strides:c,size:v,newShape:m,outShape:A}}I(so,{assertParamsValid:()=>io,computeFlatOffset:()=>vo,computeOutShape:()=>lo,getNormalizedAxes:()=>po,isSliceContinous:()=>xo,maskToAxes:()=>oo,parseSliceParams:()=>Ao,sliceInfo:()=>wo,startForAxis:()=>yo,startIndicesWithElidedDims:()=>fo,stopForAxis:()=>bo,stopIndicesWithElidedDims:()=>mo,stridesForAxis:()=>go,stridesWithElidedDims:()=>uo});var ko={};I(ko,{Serializable:()=>So,SerializationMap:()=>Io,registerClass:()=>_o});var So=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},Io=class{constructor(){this.classNameMap={}}static getMap(){return null==Io.instance&&(Io.instance=new Io),Io.instance}static register(e){Io.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function _o(e){le(null!=e.className,()=>"Class being registered does not have the static className property defined."),le("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),le(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Io.register(e)}var Eo={};I(Eo,{TEST_EPSILON_FLOAT16:()=>To,encodeStrings:()=>$o,expectArrayBuffersEqual:()=>Po,expectArraysClose:()=>Co,expectArraysEqual:()=>Ro,expectNumbersClose:()=>Do,expectPromiseToFail:()=>Fo,expectValuesInRange:()=>zo,testEpsilon:()=>No});var To=.1;function Co(e,t,n){return null==n&&(n=No()),Mo(e,t,(e,t)=>Oo(e,t,n))}function No(){return 32===gs.backend.floatPrecision()?.001:To}function Mo(e,t,n){let r=!0;if((Ce(e)||Ce(t))&&(r=!1),Ce(e)&&Ce(t)&&(r=!0),r){let n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){let n=ws(e),r=ws(t);if(!fe(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}let a=Ce(e)?e:ce(e),s=Ce(t)?t:ce(t);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${s.length}.\nActual:   ${a}.\nExpected: ${s}.`);for(let i=0;i<s.length;++i){let e=a[i],t=s[i];if(!n(e,t))throw new Error(`Arrays differ: actual[${i}] = ${e}, expected[${i}] = ${t}.\nActual:   ${a}.\nExpected: ${s}.`)}}function Fo(e,t){e().then(()=>t.fail(),()=>t())}function Ro(e,t){let n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Fe(e)||Fe(e[0])||Fe(t)||Fe(t[0])?Mo(e,n,(e,t)=>e==t):Mo(e,t,(e,t)=>Oo(e,t,0))}function Do(e,t,n){if(null==n&&(n=No()),!Oo(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function Oo(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function zo(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Po(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function $o(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?$o(n):e[t]=Pa(n)}return e}var Lo="3.7.0";function Vo(){Ye().set("PROD",!0)}function Bo(){Ye().set("DEBUG",!0)}function Wo(){Ye().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function jo(e){Ye().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ho(){gs.disposeVariables()}function Uo(){return gs}function Go(){return gs.memory()}function qo(e){return gs.profile(e)}function Ko(e,t){return gs.tidy(e,t)}function Xo(e){us(e).forEach(e=>e.dispose())}function Zo(e){return gs.keep(e)}function Yo(e){return gs.time(e)}function Jo(e){return gs.setBackend(e)}function Qo(){return gs.ready()}function el(){return gs.backendName}function tl(e){gs.removeBackend(e)}function nl(e){return gs.findBackend(e)}function rl(e){return gs.findBackendFactory(e)}function al(e,t,n=1){return gs.registerBackend(e,t,n)}function sl(){return gs.backend}function il(e,t){Ye().setPlatform(e,t)}var ol=Ts({add_:function(e,t){let n=Is(e,"a","add"),r=Is(t,"b","add");return[n,r]=is(n,r),gs.runKernel(st,{a:n,b:r})}}),ll=Ts({floorDiv_:function(e,t){let n=Is(e,"a","floorDiv"),r=Is(t,"b","floorDiv");return[n,r]=is(n,r),gs.runKernel(un,{a:n,b:r})}}),ul=Ts({div_:function(e,t){let n=Is(e,"a","div"),r=Is(t,"b","div");return[n,r]=is(n,r),"int32"===n.dtype&&"int32"===r.dtype?ll(n,r):gs.runKernel(Xt,{a:n,b:r},{})}}),hl=Ts({mul_:function(e,t){let n=Is(e,"a","mul"),r=Is(t,"b","mul");return[n,r]=is(n,r),gs.runKernel(Gn,{a:n,b:r})}}),cl=Ts({abs_:function(e){let t=Is(e,"x","abs");return gs.runKernel("complex64"===t.dtype?Tt:nt,{x:t})}}),dl=Ts({acos_:function(e){let t={x:Is(e,"x","acos")};return gs.runKernel(rt,t)}}),pl=Ts({acosh_:function(e){let t={x:Is(e,"x","acosh")};return gs.runKernel(at,t)}}),fl=Ts({addN_:function(e){le(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),le(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+e.length);let t=e.map((e,t)=>Is(e,"tensors"+t,"addN")),n=t[0];return t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!fe(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),gs.runKernel(it,t)}}),ml=Ts({all_:function(e,t=null,n=!1){let r={x:Is(e,"x","all","bool")};return gs.runKernel(ot,r,{axis:t,keepDims:n})}}),gl=Ts({any_:function(e,t=null,n=!1){let r={x:Is(e,"x","any","bool")};return gs.runKernel(lt,r,{axis:t,keepDims:n})}}),yl=Ts({argMax_:function(e,t=0){let n={x:Is(e,"x","argMax")};return gs.runKernel(ut,n,{axis:t})}}),bl=Ts({argMin_:function(e,t=0){let n={x:Is(e,"x","argMin")};return gs.runKernel(ht,n,{axis:t})}}),xl=Ts({asin_:function(e){let t={x:Is(e,"x","asin")};return gs.runKernel(ct,t)}}),vl=Ts({asinh_:function(e){let t={x:Is(e,"x","asinh")};return gs.runKernel(dt,t)}}),Al=Ts({atan_:function(e){let t={x:Is(e,"x","atan")};return gs.runKernel(pt,t)}}),wl=Ts({atan2_:function(e,t){let n=Is(e,"a","atan2"),r=Is(t,"b","atan2");return[n,r]=is(n,r),gs.runKernel(mt,{a:n,b:r})}}),kl=Ts({atanh_:function(e){let t={x:Is(e,"x","atanh")};return gs.runKernel(ft,t)}});function Sl(e,t,n,r,a="NHWC",s){return El(e,[...t,e[3]],n,s,r,null,null,zl(a))}function Il(e,t,n,r,a,s,i="channelsLast"){let o,[l,u]=Nl(t);if("channelsLast"===i)o=[l,u,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);o=[l,u,e[1],e[1]]}return El(e,o,n,r,a,s,!1,i)}function _l(e,t,n,r,a,s,i="NDHWC"){let o,l,[u,h,c]=Ml(t);if("NDHWC"===i)l="channelsLast",o=[u,h,c,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);l="channelsFirst",o=[u,h,c,e[1],e[1]]}return Tl(e,o,n,r,a,!1,l,s)}function El(e,t,n,r,a,s,i=!1,o="channelsLast"){let[l,u,h,c]=[-1,-1,-1,-1];if("channelsLast"===o)[l,u,h,c]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[l,c,u,h]=e}let d,[p,f,,m]=t,[g,y]=Nl(n),[b,x]=Nl(r),v=Fl(p,b),A=Fl(f,x),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,r,a,s,i,o,l){let u,h,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let a=function(e,t,n,r,a){null==r&&(r=Cl(e,t,n));let s=e[1];return[Rl((e[0]-t+2*r)/n+1,a),Rl((s-t+2*r)/n+1,a)]}([t,n],s,r,e,o);h=a[0],c=a[1]}else if("same"===e){h=Math.ceil(t/r),c=Math.ceil(n/a);let e=Math.max(0,(h-1)*r+s-t),o=Math.max(0,(c-1)*a+i-n),l=Math.floor(e/2),d=e-l,p=Math.floor(o/2);u={top:l,bottom:d,left:p,right:o-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-s+1)/r),c=Math.ceil((n-i+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);{let d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},h=Rl((t-s+d+p)/r+1,o),c=Rl((n-i+f+m)/a+1,o)}}return{padInfo:u,outHeight:h,outWidth:c}}(a,u,h,g,y,v,A,s,o),I=i?m*c:m;return"channelsFirst"===o?d=[l,I,k,S]:"channelsLast"===o&&(d=[l,k,S,I]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:h,inChannels:c,outHeight:k,outWidth:S,outChannels:I,padInfo:w,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:A,dilationHeight:b,dilationWidth:x,inShape:e,outShape:d,filterShape:t}}function Tl(e,t,n,r,a,s=!1,i="channelsLast",o){let[l,u,h,c,d]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,u,h,c,d]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);[l,d,u,h,c]=e}let p,[f,m,g,,y]=t,[b,x,v]=Ml(n),[A,w,k]=Ml(r),S=Fl(f,A),I=Fl(m,w),_=Fl(g,k),{padInfo:E,outDepth:T,outHeight:C,outWidth:N}=function(e,t,n,r,a,s,i,o,l,u,h){let c,d,p,f;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let s=function(e,t,n,r,a,s){null==a&&(a=Cl(e,t,r));let i=e[1],o=e[2];return[Rl((e[0]-t+2*a)/r+1,s),Rl((i-t+2*a)/r+1,s),Rl((o-t+2*a)/r+1,s),1]}([t,n,r,1],o,0,a,e,h);d=s[0],p=s[1],f=s[2]}else if("same"===e){d=Math.ceil(t/a),p=Math.ceil(n/s),f=Math.ceil(r/i);let e=(d-1)*a+o-t,h=(p-1)*s+l-n,m=(f-1)*i+u-r,g=Math.floor(e/2),y=e-g,b=Math.floor(h/2),x=h-b,v=Math.floor(m/2);c={top:b,bottom:x,left:v,right:m-v,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-o+1)/a),p=Math.ceil((n-l+1)/s),f=Math.ceil((r-u+1)/i)}return{padInfo:c,outDepth:d,outHeight:p,outWidth:f}}(a,u,h,c,b,x,v,S,I,_,o),M=s?y*d:y;return"channelsFirst"===i?p=[l,M,T,C,N]:"channelsLast"===i&&(p=[l,T,C,N,M]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:h,inWidth:c,inChannels:d,outDepth:T,outHeight:C,outWidth:N,outChannels:M,padInfo:E,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:f,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:I,effectiveFilterWidth:_,dilationDepth:A,dilationHeight:w,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function Cl(e,t,n,r=1){let a=Fl(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Nl(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ml(e){return"number"==typeof e?[e,e,e]:e}function Fl(e,t){return t<=1?e:e+(e-1)*(t-1)}function Rl(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Dl(e){let[t,n,r]=Nl(e);return 1===t&&1===n&&1===r}function Ol(e,t){return Dl(e)||Dl(t)}function zl(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}var Pl=Ts({reshape_:function(e,t){let n={x:Is(e,"x","reshape","string_or_numeric")};return gs.runKernel(hr,n,{shape:t})}}),$l=Ts({avgPool_:function(e,t,n,r,a){let s=Is(e,"x","avgPool","float32");le(Ol(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let i=s,o=!1;3===s.rank&&(o=!0,i=Pl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),le(4===i.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),null!=a&&le(me(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let l=gs.runKernel(gt,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return l=Ai(l,s.dtype),o?Pl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Ll=Ts({avgPool3d_:function(e,t,n,r,a,s="NDHWC"){let i=Is(e,"x","avgPool3d","float32"),o=i,l=!1;4===i.rank&&(l=!0,o=Pl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),le(5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),le("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&le(me(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let u=gs.runKernel(bt,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return u=Ai(u,o.dtype),l?Pl(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),Vl=Ts({concat_:function(e,t=0){le(e.length>=1,()=>"Pass at least one tensor to concat");let n=_s(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length?wi(n[0]):gs.runKernel(Ct,n,{axis:t})}}),Bl=Ts({sigmoid_:function(e){let t={x:Is(e,"x","sigmoid")};return gs.runKernel(_r,t)}}),Wl=Ts({slice_:function(e,t,n){let r=Is(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return gs.runKernel(wr,{x:r},{begin:t,size:n})}}),jl=Ts({tanh_:function(e){let t={x:Is(e,"x","tanh")};return gs.runKernel(Gr,t)}}),Hl=Ts({basicLSTMCell_:function(e,t,n,r,a,s){let i=Is(e,"forgetBias","basicLSTMCell"),o=Is(t,"lstmKernel","basicLSTMCell"),l=Is(n,"lstmBias","basicLSTMCell"),u=Is(r,"data","basicLSTMCell"),h=Is(a,"c","basicLSTMCell"),c=Is(s,"h","basicLSTMCell"),d=Vl([u,c],1),p=ji(d,o),f=ol(p,l),m=f.shape[1]/4,g=[f.shape[0],m],y=Wl(f,[0,0],g),b=Wl(f,[0,m],g),x=Wl(f,[0,2*m],g),v=Wl(f,[0,3*m],g),A=ol(hl(Bl(y),jl(b)),hl(h,Bl(ol(i,x))));return[A,hl(jl(A),Bl(v))]}}),Ul=Ts({batchToSpaceND_:function(e,t,n){let r=Is(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);return le(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),le(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),le(r.shape[0]%a==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`),gs.runKernel(At,{x:r},{blockShape:t,crops:n})}});function Gl(e){let t;return t=0===e.rank||1===e.rank?Pl(e,[1,1,1,e.size]):2===e.rank?Pl(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Pl(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}var ql=Ts({batchNorm_:function(e,t,n,r,a,s){null==s&&(s=.001);let i,o,l=Is(e,"x","batchNorm"),u=Is(t,"mean","batchNorm"),h=Is(n,"variance","batchNorm");null!=a&&(i=Is(a,"scale","batchNorm")),null!=r&&(o=Is(r,"offset","batchNorm")),le(u.rank===h.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(null==o||u.rank===o.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(null==i||u.rank===i.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let c={x:Gl(l),scale:i,offset:o,mean:u,variance:h},d=gs.runKernel(hn,c,{varianceEpsilon:s});return Pl(d,l.shape)}}),Kl=Ts({batchNorm2d_:function(e,t,n,r,a,s){let i,o,l=Is(e,"x","batchNorm"),u=Is(t,"mean","batchNorm"),h=Is(n,"variance","batchNorm");return null!=a&&(i=Is(a,"scale","batchNorm")),null!=r&&(o=Is(r,"offset","batchNorm")),le(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),le(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),le(2===h.rank||1===h.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${h.rank}.`),null!=i&&le(2===i.rank||1===i.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${i.rank}.`),null!=o&&le(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${o.rank}.`),ql(l,u,h,o,i,s)}}),Xl=Ts({batchNorm3d_:function(e,t,n,r,a,s){let i,o,l=Is(e,"x","batchNorm"),u=Is(t,"mean","batchNorm"),h=Is(n,"variance","batchNorm");return null!=a&&(i=Is(a,"scale","batchNorm")),null!=r&&(o=Is(r,"offset","batchNorm")),le(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),le(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),le(3===h.rank||1===h.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${h.rank}.`),null!=i&&le(3===i.rank||1===i.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${i.rank}.`),null!=o&&le(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${o.rank}.`),ql(l,u,h,o,i,s)}}),Zl=Ts({batchNorm4d_:function(e,t,n,r,a,s){let i,o,l=Is(e,"x","batchNorm"),u=Is(t,"mean","batchNorm"),h=Is(n,"variance","batchNorm");return null!=a&&(i=Is(a,"scale","batchNorm")),null!=r&&(o=Is(r,"offset","batchNorm")),le(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),le(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),le(4===h.rank||1===h.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${h.rank}.`),null!=i&&le(4===i.rank||1===i.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${i.rank}.`),null!=o&&le(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${o.rank}.`),ql(l,u,h,o,i,s)}}),Yl=Ts({bincount_:function(e,t,n){let r=Is(e,"x","bincount"),a=Is(t,"weights","bincount");return le("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got "+r.dtype),le(n>=0,()=>`size must be non-negative, but got ${n}.`),le(a.size===r.size||0===a.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`),gs.runKernel(wt,{x:r,weights:a},{size:n})}}),Jl=Ts({broadcastTo_:function(e,t){let n=Is(e,"broadcastTo","x"),r=n.shape;if(t.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Pl(n,e)}let a=n.shape,s=Array.from(t);for(let i=t.length-1;i>=0;i--)if(a[i]===t[i])s[i]=1;else if(1!==n.shape[i])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);return 0===s.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length?wi(n):gs.runKernel(qr,{x:n},{reps:s})}}),Ql=Ts({ceil_:function(e){let t={x:Is(e,"x","ceil")};return gs.runKernel(It,t)}}),eu=Ts({clipByValue_:function(e,t,n){let r=Is(e,"x","clipByValue");return le(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),gs.runKernel(_t,{x:r},{clipValueMin:t,clipValueMax:n})}}),tu=Ts({concat1d_:function(e){return Vl(e,0)}}),nu=Ts({concat2d_:function(e,t){return Vl(e,t)}}),ru=Ts({concat3d_:function(e,t){return Vl(e,t)}}),au=Ts({concat4d_:function(e,t){return Vl(e,t)}}),su=Ts({conv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){let o=Is(e,"x","conv2d"),l=Is(t,"filter","conv2d"),u=o,h=!1;3===o.rank&&(h=!0,u=Pl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),le(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),le(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),null!=i&&le(me(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let c="NHWC"===a?u.shape[3]:u.shape[1];le(c===l.shape[2],()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${l.shape[2]}.`),le(Ol(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let d=gs.runKernel(Nt,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?Pl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),iu=Ts({conv1d_:function(e,t,n,r,a="NWC",s=1,i){let o=Is(e,"x","conv1d"),l=Is(t,"filter","conv1d"),u=o,h=!1;2===o.rank&&(h=!0,u=Pl(o,[1,o.shape[0],o.shape[1]])),le(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),le(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),null!=i&&le(me(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),le(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),le(Ol(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),le("NWC"===a,()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);let c=Pl(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Pl(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=su(d,c,[1,n],r,"NHWC",[1,s],i);return Pl(p,h?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),ou=Ts({conv2DBackpropInput_:function(e,t,n,r,a,s="NHWC",i){le(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;3===t.rank&&(u=!0,l=Pl(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),le(4===o.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),le(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),le(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);let h="NHWC"===s?o[3]:o[1],c="NHWC"===s?l.shape[3]:l.shape[1];le(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),le(c===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[3]}.`),null!=i&&le(me(a),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`);let d=gs.runKernel(Ft,{dy:l,filter:n},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,inputShape:o});return u?Pl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),lu=Ts({conv2dTranspose_:function(e,t,n,r,a,s){let i=Is(e,"x","conv2dTranspose"),o=Is(t,"filter","conv2dTranspose");return ou(n,i,o,r,a,"NHWC",s)}}),uu=Ts({conv3d_:function(e,t,n,r,a="NDHWC",s=[1,1,1]){let i=Is(e,"x","conv3d"),o=Is(t,"filter","conv3d"),l=i,u=!1;4===i.rank&&(u=!0,l=Pl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),le(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),le(5===o.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),le(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),le(Ol(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),le("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);let h=gs.runKernel(Rt,{x:l,filter:o},{strides:n,pad:r,dataFormat:a,dilations:s});return u?Pl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),hu=Ts({conv3DBackpropInput_:function(e,t,n,r,a){le(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,i=t,o=!1;4===t.rank&&(o=!0,i=Pl(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);let l=s[4],u=i.shape[4];le(5===s.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),le(5===i.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank),le(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),le(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),le(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);let h=gs.runKernel(Ot,{dy:i,filter:n},{pad:a,strides:r,inputShape:s});return o?Pl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),cu=Ts({conv3dTranspose_:function(e,t,n,r,a){let s=Is(e,"x","conv3dTranspose"),i=Is(t,"filter","conv3dTranspose");return hu(n,s,i,r,a)}}),du=Ts({cos_:function(e){let t={x:Is(e,"x","cos")};return gs.runKernel(zt,t)}}),pu=Ts({cosh_:function(e){let t={x:Is(e,"x","cosh")};return gs.runKernel(Pt,t)}}),fu=Ts({cumsum_:function(e,t=0,n=!1,r=!1){let a={x:Is(e,"x","cumsum")};return gs.runKernel($t,a,{axis:t,exclusive:n,reverse:r})}}),mu=Ts({denseBincount_:function(e,t,n,r=!1){let a=Is(e,"x","denseBincount"),s=Is(t,"weights","denseBincount");return le("int32"===a.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+a.dtype),le(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),le(n>=0,()=>`size must be non-negative, but got ${n}.`),le(s.size===a.size||0===s.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`),gs.runKernel(Vt,{x:a,weights:s},{size:n,binaryOutput:r})}}),gu=Ts({depthToSpace_:function(e,t,n="NHWC"){let r=Is(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return le(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t}  for depthToSpace with input shape\n    ${r.shape}`),le(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`),le(i%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`),gs.runKernel(Bt,{x:r},{blockSize:t,dataFormat:n})}}),yu=Ts({depthwiseConv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){let o=Is(e,"x","depthwiseConv2d"),l=Is(t,"filter","depthwiseConv2d"),u=o,h=!1;3===o.rank&&(h=!0,u=Pl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),le(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),le(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),le(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),null!=i&&le(me(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let c=gs.runKernel(Wt,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?Pl(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),bu=Ts({diag_:function(e){let t={x:Is(e,"x","diag")};return gs.runKernel(Ut,t)}}),xu=Ts({dilation2d_:function(e,t,n,r,a=[1,1],s="NHWC"){let i=Is(e,"x","dilation2d"),o=Is(t,"filter","dilation2d");le(3===i.rank||4===i.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),le(3===o.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),le("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+s);let l=i,u=!1;3===i.rank&&(l=Pl(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);let h=gs.runKernel(Gt,{x:l,filter:o},{strides:n,pad:r,dilations:a});return u?Pl(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});function vu(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let s=n-1-a,i=e[s]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(s)}return r}function Au(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],s=t.length-r-1,i=t[s];(null==a||1===a&&i>1)&&n.unshift(s)}return n}function wu(e,t){let n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);n.unshift(r)}}return n}var ku=Ts({equal_:function(e,t){let n=Is(e,"a","equal","string_or_numeric"),r=Is(t,"b","equal","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(en,{a:n,b:r})}}),Su=Ts({where_:function(e,t,n){let r=Is(t,"a","where"),a=Is(n,"b","where"),s=Is(e,"condition","where","bool"),i=wu(wu(s.shape,r.shape),a.shape),o=Jl(s,i),l=Jl(r,i),u=Jl(a,i);return gs.runKernel(vr,{condition:o,t:l,e:u})}}),Iu=Ts({zerosLike_:function(e){let t={x:Is(e,"x","zerosLike")};return gs.runKernel(ea,t)}}),_u=Ts({divNoNan_:function(e,t){let n=Is(e,"a","div"),r=Is(t,"b","div");[n,r]=is(n,r);let a=ul(n,r),s=Iu(a),i=ku(r,s);return Su(i,s,a)}}),Eu=Ts({dot_:function(e,t){let n=Is(e,"t1","dot"),r=Is(t,"t2","dot");le(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(le(a===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`),1===n.rank&&1===r.rank){let e=Pl(n,[1,-1]),t=Pl(r,[-1,1]),a=ji(e,t);return Pl(a,[])}if(1===n.rank&&2===r.rank){let e=Pl(n,[1,-1]),t=Pl(r,[r.shape[0],r.shape[1]]),a=ji(e,t);return Pl(a,[a.size])}if(2===n.rank&&1===r.rank){let e=Pl(r,[-1,1]),t=ji(n,e);return Pl(t,[t.size])}{let e=Pl(r,[r.shape[0],r.shape[1]]);return ji(n,e)}}}),Tu=Ts({einsum_:function(e,...t){let n=t.map((e,t)=>Is(e,"tensors"+t,"einsum"));return gs.runKernel(Zt,n,{equation:e})}}),Cu=Ts({elu_:function(e){let t={x:Is(e,"x","elu")};return gs.runKernel(Yt,t)}}),Nu=Ts({erf_:function(e){let t=Is(e,"x","erf");return le("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=Ai(t,"float32")),gs.runKernel(Qt,{x:t})}}),Mu=Ts({exp_:function(e){let t={x:Is(e,"x","exp")};return gs.runKernel(tn,t)}}),Fu=Ts({expandDims_:function(e,t=0){let n=Is(e,"x","expandDims","string_or_numeric");return le(t<=n.rank,()=>"Axis must be <= rank of the tensor"),gs.runKernel(nn,{input:n},{dim:t})}}),Ru=Ts({expm1_:function(e){let t={x:Is(e,"x","expm1")};return gs.runKernel(rn,t)}}),Du=Ts({tile_:function(e,t){let n=Is(e,"x","tile","string_or_numeric");return le(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`),gs.runKernel(qr,{x:n},{reps:t})}}),Ou=Ts({eye_:function(e,t,n,r="float32"){null==t&&(t=e);let a=vi([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)a.set(1,o,o);let i=Pl(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Du(Fu(i,0),[n[0],1,1]);if(2===n.length)return Du(Fu(Fu(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Du(Fu(Fu(Fu(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});function zu(e,t,n){return gs.runKernel(sn,{},{shape:e,value:t,dtype:n})}var Pu=Ts({floor_:function(e){let t={x:Is(e,"x","floor")};return gs.runKernel(ln,t)}}),$u=Ts({gather_:function(e,t,n=0,r=0){let a=Is(e,"x","gather"),s=Is(t,"indices","gather","int32");return gs.runKernel(cn,{x:a,indices:s},{axis:n,batchDims:r})}}),Lu=Ts({greater_:function(e,t){let n=Is(e,"a","greater","string_or_numeric"),r=Is(t,"b","greater","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(pn,{a:n,b:r})}}),Vu=Ts({greaterEqual_:function(e,t){let n=Is(e,"a","greaterEqual","string_or_numeric"),r=Is(t,"b","greaterEqual","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(fn,{a:n,b:r})}}),Bu=Ts({imag_:function(e){let t={input:Is(e,"input","imag")};return gs.runKernel(yn,t)}}),Wu=Ts({isFinite_:function(e){let t={x:Is(e,"x","isFinite")};return gs.runKernel(bn,t)}}),ju=Ts({isInf_:function(e){let t={x:Is(e,"x","isInf")};return gs.runKernel(xn,t)}}),Hu=Ts({isNaN_:function(e){let t={x:Is(e,"x","isNaN")};return gs.runKernel(vn,t)}}),Uu=Ts({leakyRelu_:function(e,t=.2){let n={x:Is(e,"x","leakyRelu")};return gs.runKernel(An,n,{alpha:t})}}),Gu=Ts({less_:function(e,t){let n=Is(e,"a","less","string_or_numeric"),r=Is(t,"b","less","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(wn,{a:n,b:r})}}),qu=Ts({lessEqual_:function(e,t){let n=Is(e,"a","lessEqual","string_or_numeric"),r=Is(t,"b","lessEqual","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(kn,{a:n,b:r})}});function Ku(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return gs.runKernel(Sn,{},{start:e,stop:t,num:n})}var Xu=Ts({localResponseNormalization_:function(e,t=5,n=1,r=1,a=.5){let s=Is(e,"x","localResponseNormalization");le(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),le(me(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=s,o=!1;3===s.rank&&(o=!0,i=Pl(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let l=gs.runKernel(Mn,{x:i},{depthRadius:t,bias:n,alpha:r,beta:a});return o?Pl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Zu=Ts({log_:function(e){let t={x:Is(e,"x","log")};return gs.runKernel(In,t)}}),Yu=Ts({log1p_:function(e){let t={x:Is(e,"x","log1p")};return gs.runKernel(_n,t)}});function Ju(e){return le(ze(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=Is(t,"x","tf.grad","string_or_numeric"),a=null!=n?Is(n,"dy","tf.grad"):null;return gs.tidy(()=>{let{value:t,grads:n}=gs.gradients(()=>e(r),[r],a);return null!=a&&ue(t.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ah(n),n[0]})}}function Qu(e){return le(ze(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{le(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=_s(t,"args","tf.grads","string_or_numeric"),a=null!=n?Is(n,"dy","tf.grads"):null;return gs.tidy(()=>{let{value:t,grads:n}=gs.gradients(()=>e(...r),r,a);return null!=a&&ue(t.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ah(n),n})}}function eh(e){return le(ze(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{le(t instanceof Ka,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),le(null==n||n instanceof Ka,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:a}=gs.gradients(()=>e(t),[t],n);return ah(r),{grad:r[0],value:a}}}function th(e){return le(ze(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{le(Array.isArray(t)&&t.every(e=>e instanceof Ka),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),le(null==n||n instanceof Ka,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=gs.gradients(()=>e(...t),t,n);return null!=n&&ue(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ah(r.grads),r}}function nh(e,t){le(ze(e),()=>"The f passed in variableGrads(f) must be a function"),le(null==t||Array.isArray(t)&&t.every(e=>e instanceof Xa),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n){t=[];for(let e in gs.registeredVariables)t.push(gs.registeredVariables[e])}let r=n?t.filter(e=>!e.trainable):null,a=t.length;le((t=t.filter(e=>e.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);let{value:s,grads:i}=gs.gradients(e,t,null,!0);le(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),le(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let o={};return t.forEach((e,t)=>{null!=i[t]&&(o[e.name]=i[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:s,grads:o}}function rh(e){return gs.customGrad(e)}function ah(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var sh=Ts({neg_:function(e){let t={x:Is(e,"x","neg")};return gs.runKernel(qn,t)}}),ih=Ts({softplus_:function(e){let t={x:Is(e,"x","softplus")};return gs.runKernel(Er,t)}}),oh=Ts({logSigmoid_:function(e){let t=Is(e,"x","logSigmoid");return rh(e=>({value:sh(ih(sh(e))),gradFunc:t=>hl(t,Bl(sh(e)))}))(t)}}),lh=Ts({max_:function(e,t=null,n=!1){let r={x:Is(e,"x","max")};return gs.runKernel(Rn,r,{reductionIndices:t,keepDims:n})}}),uh=Ts({sub_:function(e,t){let n=Is(e,"a","sub"),r=Is(t,"b","sub");return[n,r]=is(n,r),gs.runKernel(Hr,{a:n,b:r})}}),hh=Ts({sum_:function(e,t=null,n=!1){let r=Is(e,"x","sum");return"bool"===r.dtype&&(r=Ai(r,"int32")),gs.runKernel(Cr,{x:r},{axis:t,keepDims:n})}}),ch=Ts({logSoftmax_:function(e,t=-1){let n=Is(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return rh((e,n)=>{let r=lh(e,t,!0),a=uh(e,r),s=uh(Ai(a,"float32"),Zu(hh(Mu(a),t,!0)));return n([s]),{value:s,gradFunc:(e,n)=>{let[r]=n,a=Mu(r);return uh(e,hl(hh(e,t,!0),a))}}})(n)}});function dh(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ph(e,t,n){let r=e.length+t.length,a=[],s=0,i=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[s++]):a.push(t[i++]);return a}function fh(e,t){let n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function mh(e,t){return ph(e,t.map(e=>1),t)}function gh(e,t,n){le(dh(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function yh(e,t){if(dh(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function bh(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function xh(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}var vh=Ts({logSumExp_:function(e,t=null,n=!1){let r=Is(e,"x","logSumExp"),a=we(t,r.shape),s=lh(r,a,!0),i=uh(r,s),o=Mu(i),l=hh(o,a),u=Zu(l),h=ol(Pl(s,u.shape),u);if(n){let e=mh(h.shape,a);return Pl(h,e)}return h}}),Ah=Ts({logicalAnd_:function(e,t){let n=Is(e,"a","logicalAnd","bool"),r=Is(t,"b","logicalAnd","bool");return wu(n.shape,r.shape),gs.runKernel(En,{a:n,b:r})}}),wh=Ts({logicalNot_:function(e){let t={x:Is(e,"x","logicalNot","bool")};return gs.runKernel(Tn,t)}}),kh=Ts({logicalOr_:function(e,t){let n=Is(e,"a","logicalOr","bool"),r=Is(t,"b","logicalOr","bool");return wu(n.shape,r.shape),gs.runKernel(Cn,{a:n,b:r})}}),Sh=Ts({logicalXor_:function(e,t){let n=Is(e,"a","logicalXor","bool"),r=Is(t,"b","logicalXor","bool");return wu(n.shape,r.shape),Ah(kh(e,t),wh(Ah(e,t)))}}),Ih=Ts({maxPool_:function(e,t,n,r,a){let s=Is(e,"x","maxPool"),i=s,o=!1;3===s.rank&&(o=!0,i=Pl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),le(4===i.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),le(Ol(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),null!=a&&le(me(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let l=gs.runKernel(On,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return o?Pl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),_h=Ts({maxPool3d_:function(e,t=[1,1,1],n,r,a,s="NDHWC"){let i=Is(e,"x","maxPool3d"),o=i,l=!1;4===i.rank&&(l=!0,o=Pl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),le(5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),le("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&le(me(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let u=gs.runKernel(Pn,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return l?Pl(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),Eh=Ts({maxPoolWithArgmax_:function(e,t,n,r,a=!1){let s={x:Is(e,"x","maxPoolWithArgmax")},i=gs.runKernel(Ln,s,{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:i[0],indexes:i[1]}}}),Th=Ts({maximum_:function(e,t){let n=Is(e,"a","maximum"),r=Is(t,"b","maximum");return[n,r]=is(n,r),"bool"===n.dtype&&(n=Ai(n,"int32"),r=Ai(r,"int32")),wu(n.shape,r.shape),gs.runKernel(Dn,{a:n,b:r})}}),Ch=Ts({mean_:function(e,t=null,n=!1){let r={x:Is(e,"x","mean")};return gs.runKernel(Vn,r,{axis:t,keepDims:n})}});function Nh(e,t="float32"){if("complex64"===t){let t=Nh(e,"float32"),n=Nh(e,"float32");return Cs(t,n)}let n=We(de(e),t);return gs.makeTensor(n,e,t)}function Mh(e,t="float32"){if("complex64"===t){let t=Mh(e,"float32"),n=Nh(e,"float32");return Cs(t,n)}let n=Be(de(e),t);return gs.makeTensor(n,e,t)}function Fh(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(n+" is not a valid third argument to meshgrid");if(void 0===e)return[];let r=Is(e,"x","meshgrid",e instanceof Ka?e.dtype:"float32");if(void 0===t)return[r];let a=Is(t,"y","meshgrid",t instanceof Ka?t.dtype:"float32"),s=de(r.shape),i=de(a.shape);return"xy"===n?(r=Pl(r,[1,-1]),a=Pl(a,[-1,1]),[ji(Mh([i,1],r.dtype),r),ji(a,Mh([1,s],a.dtype))]):(r=Pl(r,[-1,1]),a=Pl(a,[1,-1]),[ji(r,Mh([1,i],r.dtype)),ji(Mh([s,1],a.dtype),a)])}var Rh=Ts({min_:function(e,t=null,n=!1){let r={x:Is(e,"x","min")};return gs.runKernel(Bn,r,{axis:t,keepDims:n})}}),Dh=Ts({minimum_:function(e,t){let n=Is(e,"a","minimum"),r=Is(t,"b","minimum");return[n,r]=is(n,r),"bool"===n.dtype&&(n=Ai(n,"int32"),r=Ai(r,"int32")),wu(n.shape,r.shape),gs.runKernel(Wn,{a:n,b:r})}}),Oh=Ts({mirrorPad_:function(e,t,n){le("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=Is(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");le(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let a="reflect"===n?1:0;for(let s=0;s<r.rank;s++)le(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),le(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);return gs.runKernel(jn,{x:r},{paddings:t,mode:n})}}),zh=Ts({mod_:function(e,t){let n=Is(e,"a","mod"),r=Is(t,"b","mod");return[n,r]=is(n,r),gs.runKernel(Hn,{a:n,b:r})}}),Ph=Ts({square_:function(e){let t=Is(e,"x","square");return gs.runKernel("Square",{x:t},{})}}),$h=Ts({moments_:function(e,t=null,n=!1){let r=we(t,(e=Is(e,"x","moments")).shape),a=Ch(e,r,n),s=a.shape;n||(s=mh(a.shape,r));let i=Ph(uh(Ai(e,"float32"),Pl(a,s)));return{mean:a,variance:Ch(i,r,n)}}}),Lh=Ts({multiRNNCell_:function(e,t,n,r){let a=Is(t,"data","multiRNNCell"),s=_s(n,"c","multiRNNCell"),i=_s(r,"h","multiRNNCell"),o=a,l=[];for(let c=0;c<e.length;c++){let t=e[c](o,s[c],i[c]);l.push(t[0]),l.push(t[1]),o=t[1]}let u=[],h=[];for(let c=0;c<l.length;c+=2)u.push(l[c]),h.push(l[c+1]);return[u,h]}}),Vh=Ts({multinomial_:function(e,t,n,r=!1){let a=Is(e,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();let o={logits:1===i?Pl(a,[1,-1]):a},l=gs.runKernel(Un,o,{numSamples:t,seed:n,normalized:r});return 1===i?Pl(l,[l.size]):l}}),Bh=Ts({notEqual_:function(e,t){let n=Is(e,"a","notEqual","string_or_numeric"),r=Is(t,"b","notEqual","string_or_numeric");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel(Kn,{a:n,b:r})}}),Wh=Ts({onesLike_:function(e){let t={x:Is(e,"x","onesLike")};return gs.runKernel(Jn,t)}}),jh=Ts({outerProduct_:function(e,t){let n=Is(e,"v1","outerProduct"),r=Is(t,"v2","outerProduct");le(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let a=Pl(n,[-1,1]),s=Pl(r,[1,-1]);return ji(a,s)}}),Hh=Ts({pad_:function(e,t,n=0){let r=Is(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return gs.runKernel(tr,{x:r},{paddings:t,constantValue:n})}}),Uh=Ts({pad1d_:function(e,t,n=0){return le(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),Hh(e,[t],n)}}),Gh=Ts({pad2d_:function(e,t,n=0){return le(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Hh(e,t,n)}}),qh=Ts({pad3d_:function(e,t,n=0){return le(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Hh(e,t,n)}}),Kh=Ts({pad4d_:function(e,t,n=0){return le(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Hh(e,t,n)}}),Xh=Ts({spaceToBatchND_:function(e,t,n){let r=Is(e,"x","spaceToBatchND");return le(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),le(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),le(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),gs.runKernel(Nr,{x:r},{blockShape:t,paddings:n})}}),Zh=Ts({pool_:function(e,t,n,r,a,s){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");let i=Is(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=Pl(i,[1,i.shape[0],i.shape[1],i.shape[2]])),le(Ol(s,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`);let u,h=Il(o.shape,t,s,a,r),c=[h.dilationHeight,h.dilationWidth];u="same"===r?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),a=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],a[t]])}([h.filterHeight,h.filterWidth],c):[[0,0],[0,0]];let d=1===c[0]&&1===c[1],[p,f]=function(e,t,n){let r=n.map(e=>e[0]),a=n.map(e=>e[1]),s=e.concat(r,a),i=t.map((e,t)=>(e-s[t]%e)%e),o=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[r[t],o[t]]),t.map((e,t)=>[0,i[t]])]}([h.inHeight,h.inWidth],c,u),m=d?r:"valid",g=d?o:Xh(o,c,p),y=("avg"===n?()=>$l(g,t,s,m):()=>Ih(g,t,s,m))(),b=d?y:Ul(y,c,f);return l?Pl(b,[b.shape[1],b.shape[2],b.shape[3]]):b}}),Yh=Ts({pow_:function(e,t){let n=Is(e,"base","pow"),r=Is(t,"exp","pow");return[n,r]=is(n,r),gs.runKernel(rr,{a:n,b:r})}}),Jh=Ts({prelu_:function(e,t){let n=Is(e,"x","prelu"),r=Is(t,"alpha","prelu");return gs.runKernel(ar,{x:n,alpha:r})}}),Qh=Ts({prod_:function(e,t=null,n=!1){let r=Is(e,"x","prod");return"bool"===r.dtype&&(r=Ai(r,"int32")),gs.runKernel(sr,{x:r},{axis:t,keepDims:n})}}),ec=Ts({rand_:function(e,t,n){let r=de(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(let s=0;s<r;s++)a[s]=t();return gs.makeTensor(a,e,n)}}),tc=_(P()),nc=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let s=a||Math.random();this.random=tc.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);let i=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*a*i,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},rc=Ts({randomGamma_:function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);let s=new class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=tc.alea(a.toString()),this.randn=new nc(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}(t,n,r,a),i=vi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),ac=Ts({randomNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);let s=new nc(t,n,r,!1,a),i=vi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),sc=Ts({randomUniform_:function(e,t=0,n=1,r="float32",a){let s=vi(e,r),i=new class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=tc.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}(t,n,null,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});function ic(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return gs.runKernel(ir,{},{start:e,stop:t,step:n,dtype:r})}var oc=Ts({real_:function(e){let t={input:Is(e,"input","real")};return gs.runKernel(or,t)}}),lc=Ts({reciprocal_:function(e){let t={x:Is(e,"x","reciprocal")};return gs.runKernel(lr,t)}}),uc=Ts({relu_:function(e){let t={x:Is(e,"x","relu")};return gs.runKernel(ur,t)}}),hc=Ts({relu6_:function(e){let t={x:Is(e,"x","relu6")};return gs.runKernel(mr,t)}}),cc=Ts({reverse_:function(e,t){let n={x:Is(e,"x","reverse")};return gs.runKernel(gr,n,{dims:t})}}),dc=Ts({reverse1d_:function(e){let t=Is(e,"x","reverse");return le(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),cc(t,0)}}),pc=Ts({reverse2d_:function(e,t){let n=Is(e,"x","reverse");return le(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),cc(n,t)}}),fc=Ts({reverse3d_:function(e,t){let n=Is(e,"x","reverse");return le(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),cc(n,t)}}),mc=Ts({reverse4d_:function(e,t){let n=Is(e,"x","reverse");return le(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),cc(n,t)}}),gc=Ts({round_:function(e){let t={x:Is(e,"x","round")};return gs.runKernel(yr,t)}}),yc=Ts({rsqrt_:function(e){let t={x:Is(e,"x","rsqrt")};return gs.runKernel(br,t)}});function bc(e,t){if((Ce(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ce(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ns(e,[],[],t)}var xc=Ts({selu_:function(e){let t={x:Is(e,"x","selu")};return gs.runKernel(Ar,t)}}),vc=Ts({separableConv2d_:function(e,t,n,r,a,s=[1,1],i="NHWC"){let o=Is(e,"x","separableConv2d"),l=Is(t,"depthwiseFilter","separableConv2d"),u=Is(n,"pointwiseFilter","separableConv2d"),h=o,c=!1;if(3===o.rank&&(c=!0,h=Pl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");le(4===h.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),le(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),le(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),le(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),le(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let d=l.shape[2],p=l.shape[3];le(u.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`);let f=yu(h,l,r,a,i,s),m=su(f,u,1,"valid",i);return c?Pl(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),Ac=async function(e,t){let n=Is(e,"x","setdiff1d"),r=Is(t,"y","setdiff1d");le(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),le(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),le(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let a=await n.data(),s=await r.data(),i=new Set(s),o=0;for(let h=0;h<a.length;h++)i.has(a[h])||o++;let l=new Ua([o],n.dtype),u=new Ua([o],"int32");for(let h=0,c=0;h<a.length;h++)i.has(a[h])||(l.values[c]=a[h],u.values[c]=h,c++);return[l.toTensor(),u.toTensor()]},wc=Ts({sign_:function(e){let t={x:Is(e,"x","sign")};return gs.runKernel(Ir,t)}}),kc=Ts({sin_:function(e){let t={x:Is(e,"x","sin")};return gs.runKernel(kr,t)}}),Sc=Ts({sinh_:function(e){let t={x:Is(e,"x","sinh")};return gs.runKernel(Sr,t)}}),Ic=Ts({slice1d_:function(e,t,n){let r=Is(e,"x","slice1d");return le(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Wl(r,[t],[n])}}),_c=Ts({slice2d_:function(e,t,n){let r=Is(e,"x","slice2d");return le(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Wl(r,t,n)}}),Ec=Ts({slice3d_:function(e,t,n){let r=Is(e,"x","slice3d");return le(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Wl(r,t,n)}}),Tc=Ts({slice4d_:function(e,t,n){let r=Is(e,"x","slice4d");return le(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Wl(r,t,n)}}),Cc=Ts({softmax_:function(e,t=-1){let n=Is(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);return gs.runKernel(Fr,{logits:n},{dim:t})}}),Nc=Ts({fft_:function(e){return le("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),gs.runKernel(an,{input:e})}}),Mc=Ts({ifft_:function(e){return le("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),gs.runKernel(gn,{input:e})}}),Fc=Ts({irfft_:function(e){let t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){let a=Pl(e,[r,n]);t=Mc(a)}else{let a=[r,2*(n-1)],s=Pl(oc(e),[r,n]),i=Pl(Bu(e),[r,n]),o=cc(Wl(s,[0,1],[r,n-2]),1),l=hl(cc(Wl(i,[0,1],[r,n-2]),1),bc(-1)),u=Vl([s,o],1),h=Vl([i,l],1),c=Pl(Cs(u,h),[a[0],a[1]]);t=Mc(c)}if(t=oc(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=Pl(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}}),Rc=Ts({split_:function(e,t,n=0){let r={x:Is(e,"x","split")};return gs.runKernel(Mr,r,{numOrSizeSplits:t,axis:n})}}),Dc=Ts({rfft_:function(e,t){le("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got "+e.dtype);let n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){let a=e.shape.map(e=>0),s=e.shape.map(e=>e);s[e.shape.length-1]=t,n=Wl(e,a,s),r=t}else if(null!=t&&t>r){let a=e.shape.map(e=>e);a[e.shape.length-1]=t-r,n=Vl([e,Nh(a)],e.shape.length-1),r=t}else n=e;let s=Iu(n),i=Pl(Cs(n,s),[a,r]),o=Nc(i),l=Math.floor(r/2)+1,u=oc(o),h=Bu(o),c=Rc(u,[l,r-l],u.shape.length-1),d=Rc(h,[l,r-l],h.shape.length-1),p=n.shape.slice();return p[n.shape.length-1]=l,Pl(Cs(c[0],d[0]),p)}}),Oc=Ts({sqrt_:function(e){let t={x:Is(e,"x","sqrt")};return gs.runKernel(Tr,t)}}),zc=Ts({squaredDifference_:function(e,t){let n=Is(e,"a","squaredDifference"),r=Is(t,"b","squaredDifference");return[n,r]=is(n,r),wu(n.shape,r.shape),gs.runKernel($r,{a:n,b:r},{})}}),Pc=Ts({squeeze_:function(e,t){let n=Is(e,"x","squeeze");return Pl(n,ke(n.shape,t).newShape)}}),$c=Ts({stack_:function(e,t=0){let n=_s(e,"tensors","stack","string_or_numeric");return le(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&le(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),gs.runKernel(er,n,{axis:t})}}),Lc=Ts({step_:function(e,t=0){let n={x:Is(e,"x","step")};return gs.runKernel(ta,n,{alpha:t})}}),Vc=Ts({stridedSlice_:function(e,t,n,r,a=0,s=0,i=0,o=0,l=0){let u={x:Is(e,"x","stridedSlice","string_or_numeric")};return gs.runKernel(Vr,u,{begin:t,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l})}}),Bc=Ts({tan_:function(e){let t={x:Is(e,"x","tan")};return gs.runKernel(Ur,t)}});function Wc(e,t){he(e);let n=ws(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ns(e,null,n,t)}function jc(e,t,n){if(he(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");let r=ws(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ns(e,t,r,n)}function Hc(e,t,n){if(he(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");let r=ws(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ns(e,t,r,n)}function Uc(e,t,n){if(he(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");let r=ws(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ns(e,t,r,n)}function Gc(e,t,n){if(he(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");let r=ws(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ns(e,t=t||r,r,n)}var qc=Ts({topk_:function(e,t=1,n=!0){let r=Is(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);let s={x:r},i={k:t,sorted:n},[o,l]=gs.runKernel(Kr,s,i);return{values:o,indices:l}}}),Kc=Ts({truncatedNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");let s=new nc(t,n,r,!0,a),i=vi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),Xc=Ts({unique_:function(e,t=0){let n=Is(e,"x","unique","string_or_numeric");le(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[s,i]=gs.runKernel(Yr,r,a);return{values:s,indices:i}}}),Zc=Ts({unsortedSegmentSum_:function(e,t,n){let r=Is(e,"x","unsortedSegmentSum"),a=Is(t,"segmentIds","unsortedSegmentSum","int32");return le(me(n),()=>"numSegments must be of dtype int"),gs.runKernel(Qr,{x:r,segmentIds:a},{numSegments:n})}}),Yc=Ts({unstack_:function(e,t=0){let n=Is(e,"x","unstack","string_or_numeric");return le(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),gs.runKernel(Jr,{value:n},{axis:t})}});function Jc(e,t=!0,n,r){return gs.makeVariable(e,t,n,r)}function Qc(e,t){let n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);let r=vi(e,"int32"),a=vi([n.length,e.length],"int32");for(let s=0;s<n.length;s++){let t=r.indexToLoc(n[s]);a.values.set(t,s*e.length)}return a.toTensor()}var ed=async function(e){let t=Is(e,"condition","whereAsync","bool"),n=await t.data(),r=Qc(t.shape,n);return e!==t&&t.dispose(),r},td=async function(e,t,n){let r=Is(e,"tensor","boolMask"),a=Is(t,"mask","boolMask","bool"),s=null==n?0:n,i=a.rank,o=r.shape;le(i>0,()=>"mask cannot be scalar"),ue(o.slice(s,s+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=s;m<s+i;m++)l*=o[m];let u=o.slice(0,s).concat([l],o.slice(s+i)),h=Pl(r,u),c=Pl(a,[-1]),d=await ed(c),p=Pc(d,[1]),f=$u(h,p,s);return e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),h.dispose(),c.dispose(),d.dispose(),f};function nd(e,t,n=null){if(0===e.rank)return cl(e);if(1!==e.rank&&null===n)return nd(Pl(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return hh(cl(e),n);if(t===1/0)return lh(cl(e),n);if(t===-1/0)return Rh(cl(e),n);if("euclidean"===t||2===t)return Oc(hh(Yh(cl(e),bc(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+t)}if(Array.isArray(n)&&2===n.length){if(1===t)return lh(hh(cl(e),n[0]),n[1]-1);if(t===1/0)return lh(hh(cl(e),n[1]),n[0]);if(t===-1/0)return Rh(hh(cl(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Oc(hh(Ph(e),n));throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}var rd=Ts({norm_:function(e,t="euclidean",n=null,r=!1){let a=nd(e=Is(e,"x","norm"),t,n),s=a.shape;if(r){let t=we(n,e.shape);s=mh(a.shape,t)}return Pl(a,s)}}),ad=Ts({movingAverage_:function(e,t,n,r,a=!0){let s=Is(e,"v","movingAverage"),i=Is(t,"x","movingAverage"),o=Is(n,"decay","movingAverage");os(s,i),le(fe(s.shape,i.shape),()=>"Shape mismatch in v and x");let l=bc(1),u=uh(l,o),h=hl(uh(i,s),u);if(a){le(null!=r,()=>"When using zeroDebias: true, step is required.");let e=Is(r,"step","movingAverage");h=ul(h,uh(l,Yh(o,e)))}return ol(s,h)}}),sd=Ts({scatterND_:function(e,t,n){let r=Is(e,"indices","scatterND","int32"),a=Is(t,"updates","scatterND");return ro(a,r,n),gs.runKernel(xr,{indices:r,updates:a},{shape:n})}}),id=Ts({sparseToDense_:function(e,t,n,r=0){let a=Is(e,"sparseIndices","sparseToDense","int32"),s=Is(t,"sparseValues","sparseToDense"),i=Is(r,"defaultValue","sparseToDense",s.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);if(0!==t.rank&&(1!==t.rank||t.size!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,i),gs.runKernel(Pr,{sparseIndices:a,sparseValues:s,defaultValue:i},{outputShape:n})}}),od=Ts({gatherND_:function(e,t){let n=Is(t,"indices","gatherND","int32"),r={params:Is(e,"x","gatherND","string_or_numeric"),indices:n};return gs.runKernel(dn,r)}}),ld=Ts({dropout_:function(e,t,n,r){let a=Is(e,"x","dropout");if(le("float32"===a.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),le(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof Ka?a.clone():a;let s=function(e,t){if(null==t)return e.shape.slice();if(fe(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(a,n),i=1-t,o=ul(Pu(ol(sc(s,0,1,"float32",r),i)),i);return hl(a,o)}});function ud(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function hd(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){let i=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(i)}return Wc(a,"float32")}var cd=async function(e,t,n=1){let r=Is(e,"predictions","inTopK"),a=Is(t,"targets","inTopK");le(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),le(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),ue(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=r.shape[r.shape.length-1];le(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let i=await r.data(),o=await a.data(),[l,u]=[i.length/s,s],h=Se("bool",l);for(let c=0;c<l;c++){let e=c*u,t=i.subarray(e,e+u),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),h[c]=0;for(let a=0;a<n;a++)if(r[a].index===o[c]){h[c]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),Ms(h,a.shape,"bool")},dd={};I(dd,{conv2d:()=>bd,depthwiseConv2d:()=>Ad,matMul:()=>wd});var pd=Ts({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",i){let o=e;3===e.rank&&(o=Pl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Pl(t,[1,t.shape[0],t.shape[1],t.shape[2]])),le(4===o.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),le(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),le(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let u="NHWC"===s?o.shape[3]:o.shape[1],h="NHWC"===s?l.shape[3]:l.shape[1];return le(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),le(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),null!=i&&le(me(a),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`),gs.runKernel(Mt,{x:o,dy:l},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,filterShape:n})}});function fd(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return hl(e,Lc(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function md(e,t){let n=t,r=Au(e.shape,t.shape);return r.length>0&&(n=hh(n,r)),Pl(n,e.shape)}function gd(e,t,n,r){if("linear"===t)return e;if("relu"===t)return uc(e);if("elu"===t)return Cu(e);if("relu6"===t)return hc(e);if("prelu"===t)return Jh(e,n);if("leakyrelu"===t)return Uu(e,r);if("sigmoid"===t)return Bl(e);throw new Error(`Unknown fused activation ${t}.`)}var yd=(e,t)=>!(e>0)||"linear"===t,bd=Ts({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===yd(gs.state.gradientDepth,l=l||"linear")){let c=su(e,t,n,r,a,s,i);return null!=o&&(c=ol(c,o)),gd(c,l,u,h)}let c=Is(e,"x","conv2d"),d=Is(t,"filter","conv2d"),p=c,f=!1;3===c.rank&&(f=!0,p=Pl(c,[1,c.shape[0],c.shape[1],c.shape[2]])),le(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),le(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),null!=i&&le(me(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),le(p.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${p.shape[3]}) must match input depth for filter ${d.shape[2]}.`),le(Ol(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),le("NHWC"===a,()=>`Error in conv2d: got dataFormat of ${a} but only NHWC is currently supported.`);let m,g,y=El(p.shape,d.shape,n,s,r,i);null!=o&&(m=Is(o,"bias","fused conv2d"),[m]=is(m,c),wu(y.outShape,m.shape)),null!=u&&(g=Is(u,"prelu weights","fused conv2d"));let b=(e,t)=>{let[a,i,o,u]=t,h=fd(e,o,l);le(Dl(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let c=[ou(i.shape,h,a,n,r),pd(i,h,a.shape,n,r)];if(null!=u){let e=md(u,h);c.push(e)}return c},x={x:p,filter:d,bias:m,preluActivationWeights:g},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?rh((e,t,n)=>{let r=gs.runKernel(sa,x,v);return n([t,e,r]),f&&(r=Pl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):rh((e,t,n,r)=>{let a=gs.runKernel(sa,x,v);return r([t,e,a,n]),f&&(a=Pl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,m)}}),xd=Ts({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],i){let o=e;3===e.rank&&(o=Pl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;return 3===l.rank&&(l=Pl(t,[1,t.shape[0],t.shape[1],t.shape[2]])),gs.runKernel(jt,{x:o,dy:l},{strides:r,pad:a,dimRoundingMode:i,dilations:s,filterShape:n})}}),vd=Ts({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],i){let o=t,l=!1;3===t.rank&&(l=!0,o=Pl(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=gs.runKernel(Ht,{dy:o,filter:n},{strides:r,pad:a,dimRoundingMode:i,dilations:s,inputShape:e});return l?Pl(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Ad=Ts({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===yd(gs.state.gradientDepth,l)){let c=yu(e,t,n,r,a,s,i);return null!=o&&(c=ol(c,o)),gd(c,l,u,h)}let c=Is(e,"x","depthwiseConv2d"),d=Is(t,"filter","depthwiseConv2d"),p=c,f=!1;3===c.rank&&(f=!0,p=Pl(c,[1,c.shape[0],c.shape[1],c.shape[2]])),le(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),le(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),le(p.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==s&&(s=[1,1]),le(Ol(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),null!=i&&le(me(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${r}.`);let m,g,y=El(p.shape,d.shape,n,s,r,i,!0);null!=o&&(m=Is(o,"bias","fused conv2d"),[m]=is(m,c),wu(y.outShape,m.shape)),null!=u&&(g=Is(u,"prelu weights","fused depthwiseConv2d"));let b=(e,t)=>{le(Dl(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[a,o,u,h]=t,c=fd(e,u,l),d=vd(o.shape,c,a,n,r,s,i),p=xd(o,c,a.shape,n,r,s,i);return null!=h?[d,p,md(m,c)]:[d,p]},x={x:p,filter:d,bias:m,preluActivationWeights:g},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?rh((e,t,n)=>{let r=gs.runKernel(ia,x,v);return n([t,e,r]),f&&(r=Pl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):rh((e,t,n,r)=>{let a=gs.runKernel(ia,x,v);return r([t,e,a,n]),f&&(a=Pl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,m)}}),wd=Ts({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:o}){if(!1===yd(gs.state.gradientDepth,s)){let l=ji(e,t,n,r);return null!=a&&(l=ol(l,a)),gd(l,s,i,o)}let l=Is(e,"a","fused matMul"),u=Is(t,"b","fused matMul");[l,u]=is(l,u);let h=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=de(f),y=de(m);le(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),le(fe(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),le(h===c,()=>`Error in fused matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);let b,x,v=l.shape.slice(0,-2).concat([d,p]),A=Pl(l,n?[g,h,d]:[g,d,h]),w=Pl(u,r?[y,p,c]:[y,c,p]);null!=a&&(b=Is(a,"bias","fused matMul"),[b]=is(b,l),wu(v,b.shape)),null!=i&&(x=Is(i,"prelu weights","fused matMul"));let k=(e,t)=>{let i,o,[l,u,h,c]=t,d=fd(Pl(e,h.shape),h,s);return n||r?!n&&r?(i=ji(d,u,!1,!1),o=ji(d,l,!0,!1)):n&&!r?(i=ji(u,d,!1,!0),o=ji(l,d,!1,!1)):(i=ji(u,d,!0,!0),o=ji(d,l,!0,!0)):(i=ji(d,u,!1,!0),o=ji(l,d,!0,!1)),null!=a?[i,o,md(c,d)]:[i,o]},S={a:A,b:w,bias:b,preluActivationWeights:x},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return null==a?rh((e,t,n)=>{let r=gs.runKernel(aa,S,I);return n([e,t,r]),{value:Pl(r,v),gradFunc:k}})(A,w):rh((e,t,n,r)=>{let a=gs.runKernel(aa,S,I);return r([e,t,a,n]),{value:Pl(a,v),gradFunc:k}})(A,w,b)}}),kd=Ts({hammingWindow_:function(e){return hd(e,.54,.46)}}),Sd=Ts({hannWindow_:function(e){return hd(e,.5,.5)}}),Id=Ts({frame_:function(e,t,n,r=!1,a=0){let s=0,i=[];for(;s+t<=e.size;)i.push(Wl(e,s,t)),s+=n;if(r)for(;s<e.size;){let r=s+t-e.size,o=Vl([Wl(e,s,t-r),zu([r],a)]);i.push(o),s+=n}return 0===i.length?jc([],[0,t]):Pl(Vl(i),[i.length,t])}}),_d=Ts({stft_:function(e,t,n,r,a=Sd){null==r&&(r=ud(t));let s=Id(e,t,n),i=hl(s,a(t));return Dc(i,r)}}),Ed=Ts({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){let i=Is(e,"image","cropAndResize"),o=Is(t,"boxes","cropAndResize","float32"),l=Is(n,"boxInd","cropAndResize","int32"),u=o.shape[0];return le(4===i.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),le(2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),le(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),le(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),le(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),le("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was "+a),gs.runKernel(Lt,{image:i,boxes:o,boxInd:l},{method:a,extrapolationValue:s,cropSize:r})}}),Td=Ts({flipLeftRight_:function(e){let t=Is(e,"image","flipLeftRight","float32");return le(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`),gs.runKernel(on,{image:t},{})}}),Cd=Ts({rotateWithOffset_:function(e,t,n=0,r=.5){let a=Is(e,"image","rotateWithOffset","float32");return le(4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`),gs.runKernel(ra,{image:a},{radians:t,fillValue:n,center:r})}});function Nd(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);let i=e.shape[0];return n=Math.min(n,i),le(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),le(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),le(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),le(1===t.rank,()=>"scores must be a 1D tensor"),le(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),le(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}var Md=Ts({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let s=Is(e,"boxes","nonMaxSuppression"),i=Is(t,"scores","nonMaxSuppression"),o=Nd(s,i,n,r,a);return gs.runKernel(Xn,{boxes:s,scores:i},{maxOutputSize:n=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:a=o.scoreThreshold})}});function Fd(e,t,n){let r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,i=!1;for(;r<a;){s=r+(a-r>>>1);let o=n(t,e[s]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}(e,t,n||Rd)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function Rd(e,t){return e>t?1:e<t?-1:0}function Dd(e,t,n,r,a){return Pd(e,t,n,r,a,0)}function Od(e,t,n,r,a,s){return Pd(e,t,n,r,a,0,!1,s,!0)}function zd(e,t,n,r,a,s){return Pd(e,t,n,r,a,s,!0)}function Pd(e,t,n,r,a,s,i=!1,o=!1,l=!1){let u=[];for(let g=0;g<t.length;g++)t[g]>a&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(Vd);let h=s>0?-.5/s:0,c=[],d=[];for(;c.length<n&&u.length>0;){let t=u.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<a)break;let o=!1;for(let l=c.length-1;l>=i;--l){let n=$d(e,s,c[l]);if(n>=r){o=!0;break}if(t.score=t.score*Ld(r,h,n),t.score<=a)break}t.suppressBeginIndex=c.length,o||(t.score===n?(c.push(s),d.push(t.score)):t.score>a&&Fd(u,t,Vd))}let p=c.length,f=n-p;o&&f>0&&(c.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));let m={selectedIndices:c};return i&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function $d(e,t,n){let r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(o-s)*(l-i),f=(c-u)*(d-h);if(p<=0||f<=0)return 0;let m=Math.max(s,u),g=Math.max(i,h),y=Math.min(o,c),b=Math.min(l,d),x=Math.max(y-m,0)*Math.max(b-g,0);return x/(p+f-x)}function Ld(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function Vd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var Bd=Ts({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){let i=Is(e,"boxes","nonMaxSuppression"),o=Is(t,"scores","nonMaxSuppression"),l=Nd(i,o,n,r,a,s),u=gs.runKernel(Yn,{boxes:i,scores:o},{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),Wd=Ts({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){let i=Is(e,"boxes","nonMaxSuppression"),o=Is(t,"scores","nonMaxSuppression"),l=Nd(i,o,n,r,a,null),u=gs.runKernel(Zn,{boxes:i,scores:o},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:u[0],validOutputs:u[1]}}}),jd=Ts({resizeBilinear_:function(e,t,n=!1,r=!1){let a=Is(e,"images","resizeBilinear");le(3===a.rank||4===a.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),le(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),le(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=Pl(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o=gs.runKernel(pr,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?Pl(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),Hd=Ts({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){let a=Is(e,"images","resizeNearestNeighbor");le(3===a.rank||4===a.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),le(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),le("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),le(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=Pl(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o=gs.runKernel(cr,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?Pl(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),Ud=Ts({threshold_:function(e,t="binary",n=!1,r=.5){let a,s,i,o,l=Is(e,"image","threshold"),u=l.shape[0]*l.shape[1],h=hl(Wc([r]),255);if(le(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),le(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),le("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),le("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was "+t),3===l.shape[2]){[a,s,i]=Rc(l,[1,1,1],-1);let e=hl(a,.2989),t=hl(s,.587),n=hl(i,.114);o=ol(ol(e,t),n)}else o=e;"otsu"===t&&(h=function(e,t){let n,r,a,s,i,o,l=Wc([-1]),u=Wc([0]),h=Wc([0]);for(let c=0;c<e.size-1;c++){n=Wl(e,0,c+1),r=Wl(e,c+1),i=ul(hh(n),t),o=ul(hh(r),t);let d=hh(hl(n,ic(0,n.size)));a=ul(d,hh(n));let p=zu(r.shape,n.size),f=ol(ic(0,r.size),p),m=hl(r,f);s=ul(hh(m),hh(r));let g=uh(a,s),y=uh(a,s),b=hl(i,o);h=hl(hl(b,g),y);let x=Lu(h,u);u=Su(x,h,u),l=Su(x,Wc([c]),l)}return l}(Yl(Ai(gc(o),"int32"),Ms([]),256),u));let c=n?qu(o,h):Lu(o,h);return Ai(hl(c,255),"int32")}}),Gd=Ts({transform_:function(e,t,n="nearest",r="constant",a=0,s){let i=Is(e,"image","transform","float32"),o=Is(t,"transforms","transform","float32");return le(4===i.rank,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),le(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),le(null==s||2===s.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`),gs.runKernel(Xr,{image:i,transforms:o},{interpolation:n,fillMode:r,fillValue:a,outputShape:s})}}),qd=Ts({bandPart_:function(e,t,n){le(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),le(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);let r=Is(e,"a","bandPart");le(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let a=r.shape,[s,i]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=s),n<0&&(n=i);let o=Pl(ic(0,s,1,"int32"),[-1,1]),l=ic(0,i,1,"int32"),u=uh(o,l),h=Ah(qu(u,bc(+t,"int32")),Vu(u,bc(-n,"int32"))),c=Nh([s,i],r.dtype);return Pl($c(Yc(Pl(r,[-1,s,i])).map(e=>Su(h,e,c))),a)}}),Kd=Ts({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,le(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)le(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=Rc(e,e.shape[0],0).map(e=>Pc(e,[0]));le(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let a=0;a<e.length;++a)n.push(gs.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){let r=hl(hh(hl(n[t],e)),n[t]);e=uh(e,r)}return ul(e,rd(e,"euclidean"))}));return t?$c(n,0):n}});function Xd(e,t=!1){return gs.tidy(()=>{le(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],a=Ou(n),s=wi(e),i=jc([[1]],[1,1]),o=wi(i),l=n>=r?r:n;for(let e=0;e<l;++e){let t=s,l=o,u=a;[o,s,a]=gs.tidy(()=>{let t=Wl(s,[e,e],[n-e,1]),l=rd(t),u=Wl(s,[e,e],[1,1]),h=Su(Lu(u,0),jc([[-1]]),jc([[1]])),c=uh(u,hl(h,l)),d=ul(t,c);o=1===d.shape[0]?wi(i):Vl([i,Wl(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);let p=sh(ul(ji(h,c),l)),f=Wl(s,[e,0],[n-e,r]),m=hl(p,o),g=Ui(o);if(0===e)s=uh(f,ji(m,ji(g,f)));else{let t=uh(f,ji(m,ji(g,f)));s=Vl([Wl(s,[0,0],[e,r]),t],0)}let y=Ui(m),b=Wl(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=uh(b,ji(ji(b,o),y));else{let t=uh(b,ji(ji(b,o),y));a=Vl([Wl(a,[0,0],[n,e]),t],1)}return[o,s,a]}),Xo([t,l,u])}return!t&&n>r&&(a=Wl(a,[0,0],[n,r]),s=Wl(s,[0,0],[r,r])),[a,s]})}var Zd,Yd=Ts({qr_:function(e,t=!1){if(le(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank),2===e.rank)return Xd(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=Yc(Pl(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];return r.forEach(e=>{let[n,r]=Xd(e,t);a.push(n),s.push(r)}),[Pl($c(a,0),e.shape),Pl($c(s,0),e.shape)]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Zd||(Zd={}));var Jd=Ts({computeWeightedLoss_:function(e,t,n=Zd.SUM_BY_NONZERO_WEIGHTS){let r=Is(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Is(t,"weights","computeWeightedLoss"));let s=null==a?r:hl(r,a);if(n===Zd.NONE)return s;if(n===Zd.SUM)return hh(s);if(n===Zd.MEAN){if(null==a)return Ch(s);{let e=r.size/a.size,t=ul(hh(s),hh(a));return e>1?ul(t,bc(e)):t}}if(n===Zd.SUM_BY_NONZERO_WEIGHTS){if(null==a)return ul(hh(s),bc(r.size));{let e=hl(a,Mh(r.shape)),t=Ai(hh(Bh(e,bc(0))),"float32");return ul(hh(s),t)}}throw Error("Unknown reduction: "+n)}}),Qd=Ts({absoluteDifference_:function(e,t,n,r=Zd.SUM_BY_NONZERO_WEIGHTS){let a=Is(e,"labels","absoluteDifference"),s=Is(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Is(n,"weights","absoluteDifference")),ue(a.shape,s.shape,"Error in absoluteDifference: ");let o=cl(uh(a,s));return Jd(o,i,r)}}),ep=Ts({cosineDistance_:function(e,t,n,r,a=Zd.SUM_BY_NONZERO_WEIGHTS){let s=Is(e,"labels","cosineDistance"),i=Is(t,"predictions","cosineDistance"),o=null;null!=r&&(o=Is(r,"weights","cosineDistance")),ue(s.shape,i.shape,"Error in cosineDistance: ");let l=bc(1),u=uh(l,hh(hl(s,i),n,!0));return Jd(u,o,a)}}),tp=Ts({hingeLoss_:function(e,t,n,r=Zd.SUM_BY_NONZERO_WEIGHTS){let a=Is(e,"labels","hingeLoss"),s=Is(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Is(n,"weights","hingeLoss")),ue(a.shape,s.shape,"Error in hingeLoss: ");let o=bc(1);a=uh(hl(bc(2),a),o);let l=uc(uh(o,hl(a,s)));return Jd(l,i,r)}}),np=Ts({huberLoss_:function(e,t,n,r=1,a=Zd.SUM_BY_NONZERO_WEIGHTS){let s=Is(e,"labels","huberLoss"),i=Is(t,"predictions","huberLoss"),o=null;null!=n&&(o=Is(n,"weights","huberLoss")),ue(s.shape,i.shape,"Error in huberLoss: ");let l=bc(r),u=cl(uh(i,s)),h=Dh(u,l),c=uh(u,h),d=ol(hl(bc(.5),Ph(h)),hl(l,c));return Jd(d,o,a)}}),rp=Ts({logLoss_:function(e,t,n,r=1e-7,a=Zd.SUM_BY_NONZERO_WEIGHTS){let s=Is(e,"labels","logLoss"),i=Is(t,"predictions","logLoss"),o=null;null!=n&&(o=Is(n,"weights","logLoss")),ue(s.shape,i.shape,"Error in logLoss: ");let l=bc(1),u=bc(r),h=sh(hl(s,Zu(ol(i,u)))),c=hl(uh(l,s),Zu(ol(uh(l,i),u))),d=uh(h,c);return Jd(d,o,a)}}),ap=Ts({meanSquaredError_:function(e,t,n,r=Zd.SUM_BY_NONZERO_WEIGHTS){let a=Is(e,"labels","meanSquaredError"),s=Is(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Is(n,"weights","meanSquaredError")),ue(a.shape,s.shape,"Error in meanSquaredError: ");let o=zc(a,s);return Jd(o,i,r)}}),sp=Ts({sigmoidCrossEntropy_:function(e,t,n,r=0,a=Zd.SUM_BY_NONZERO_WEIGHTS){let s=Is(e,"multiClassLabels","sigmoidCrossEntropy"),i=Is(t,"logits","sigmoidCrossEntropy"),o=null;if(null!=n&&(o=Is(n,"weights","sigmoidCrossEntropy")),ue(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){let e=bc(r),t=bc(1),n=bc(.5);s=ol(hl(s,uh(t,e)),hl(n,e))}let l=function(e,t){let n=Is(e,"labels","sigmoidCrossEntropyWithLogits"),r=Is(t,"logits","sigmoidCrossEntropyWithLogits");ue(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=uc(r),s=hl(r,n),i=Yu(Mu(sh(cl(r))));return ol(uh(a,s),i)}(s,i);return Jd(l,o,a)}}),ip=Ts({softmaxCrossEntropy_:function(e,t,n,r=0,a=Zd.SUM_BY_NONZERO_WEIGHTS){let s=Is(e,"onehotLabels","softmaxCrossEntropy"),i=Is(t,"logits","softmaxCrossEntropy"),o=null;if(null!=n&&(o=Is(n,"weights","softmaxCrossEntropy")),ue(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){let e=bc(r),t=bc(1),n=bc(s.shape[1]);s=ol(hl(s,uh(t,e)),ul(e,n))}let l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return rh((e,t,r)=>{let a=vh(t,[n],!0),s=uh(Ai(t,"float32"),a);r([e,s]);let i=sh(hl(s,e));return{value:hh(i,[n]),gradFunc:(e,t)=>{let[r,a]=t,s=mh(e.shape,[n]);return[hl(Pl(e,s),uh(Ai(r,"float32"),Mu(a))),hl(Pl(e,s),uh(Mu(a),Ai(r,"float32")))]}}})(e,t)}(s,i);return Jd(l,o,a)}}),op=Ts({sparseFillEmptyRows_:function(e,t,n,r){let a=Is(e,"indices","sparseFillEmptyRows"),s=Is(t,"values","sparseFillEmptyRows"),i=Is(n,"denseShape","sparseFillEmptyRows"),o=Is(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        "+a.shape);if(1!==s.rank)throw new Error("Values should be Tensor1D but received shape "+s.shape);if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape "+i.shape);if(0!==o.rank)throw new Error("Default value should be a scalar but received shape "+o.shape);let l=gs.runKernel(Rr,{indices:a,values:s,denseShape:i,defaultValue:o});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),lp=Ts({sparseReshape_:function(e,t,n){let r=Is(e,"inputIndices","sparseReshape"),a=Is(t,"inputShape","sparseReshape"),s=Is(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        "+r.shape);if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape "+a.shape);if(1!==s.rank)throw new Error("New shape should be Tensor1D but received shape "+s.shape);let i=gs.runKernel(Dr,{inputIndices:r,inputShape:a,newShape:s});return{outputIndices:i[0],outputShape:i[1]}}}),up=Ts({sparseSegmentMean_:function(e,t,n){let r=Is(e,"data","sparseSegmentMean"),a=Is(t,"indices","sparseSegmentMean"),s=Is(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          "+s.shape);return gs.runKernel(Or,{data:r,indices:a,segmentIds:s})}}),hp=Ts({sparseSegmentSum_:function(e,t,n){let r=Is(e,"data","sparseSegmentSum"),a=Is(t,"indices","sparseSegmentSum"),s=Is(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         "+s.shape);return gs.runKernel(zr,{data:r,indices:a,segmentIds:s})}}),cp=Ts({stringNGrams_:function(e,t,n,r,a,s,i,o){let l=Is(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: "+l.shape);let u=Is(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");let h=gs.runKernel(Br,{data:l,dataSplits:u},{separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:i,preserveShortSequences:o});return{nGrams:h[0],nGramsSplits:h[1]}}}),dp=Ts({stringSplit_:function(e,t,n=!0){let r=Is(e,"input","stringSplit","string"),a=Is(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape "+r.shape);if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape "+a.shape);let s=gs.runKernel(Wr,{input:r,delimiter:a},{skipEmpty:n});return{indices:s[0],values:s[1],shape:s[2]}}}),pp=Ts({stringToHashBucketFast_:function(e,t){let n=Is(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");return gs.runKernel(jr,{input:n},r)}}),fp={fft:Nc,ifft:Mc,rfft:Dc,irfft:Fc},mp={hammingWindow:kd,hannWindow:Sd,frame:Id,stft:_d},gp={flipLeftRight:Td,resizeNearestNeighbor:Hd,resizeBilinear:jd,rotateWithOffset:Cd,cropAndResize:Ed,nonMaxSuppression:Md,nonMaxSuppressionAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let s=Is(e,"boxes","nonMaxSuppressionAsync"),i=Is(t,"scores","nonMaxSuppressionAsync"),o=Nd(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l=await Promise.all([s.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:c}=Dd(u,h,n,r,a);return s!==e&&s.dispose(),i!==t&&i.dispose(),Wc(c,"int32")},nonMaxSuppressionWithScore:Bd,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){let i=Is(e,"boxes","nonMaxSuppressionAsync"),o=Is(t,"scores","nonMaxSuppressionAsync"),l=Nd(i,o,n,r,a,s);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;let u=await Promise.all([i.data(),o.data()]),h=u[0],c=u[1],{selectedIndices:d,selectedScores:p}=zd(h,c,n,r,a,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Wc(d,"int32"),selectedScores:Wc(p)}},nonMaxSuppressionPadded:Wd,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){let i=Is(e,"boxes","nonMaxSuppressionAsync"),o=Is(t,"scores","nonMaxSuppressionAsync"),l=Nd(i,o,n,r,a,null),u=l.maxOutputSize,h=l.iouThreshold,c=l.scoreThreshold,[d,p]=await Promise.all([i.data(),o.data()]),{selectedIndices:f,validOutputs:m}=Od(d,p,u,h,c,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Wc(f,"int32"),validOutputs:bc(m,"int32")}},threshold:Ud,transform:Gd},yp={bandPart:qd,gramSchmidt:Kd,qr:Yd},bp={absoluteDifference:Qd,computeWeightedLoss:Jd,cosineDistance:ep,hingeLoss:tp,huberLoss:np,logLoss:rp,meanSquaredError:ap,sigmoidCrossEntropy:sp,softmaxCrossEntropy:ip},xp={sparseFillEmptyRows:op,sparseReshape:lp,sparseSegmentMean:up,sparseSegmentSum:hp},vp={stringNGrams:cp,stringSplit:dp,stringToHashBucketFast:pp},Ap=class extends So{minimize(e,t=!1,n){let{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return Xo(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return nh(e,t)}dispose(){null!=this.iterations_&&Xo(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:bc(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Ap,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var wp=class extends Ap{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=gs.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=gs.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:t+"/accum_grad",variable:Ko(()=>Iu(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:t+"/accum_var",variable:Ko(()=>Iu(r).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let s=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;Ko(()=>{let e=ol(hl(s,this.rho),hl(Ph(a),1-this.rho)),t=hl(ul(Oc(ol(i,this.epsilon)),Oc(ol(s,this.epsilon))),a),n=ol(hl(i,this.rho),hl(Ph(t),1-this.rho));s.assign(e),i.assign(n);let o=ol(hl(t,-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Xo(this.accumulatedGrads.map(e=>e.variable)),Xo(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};wp.className="Adadelta",_o(wp);var kp=class extends Ap{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=gs.registeredVariables[t];if(null==this.accumulatedGrads[n]){let e=!1;this.accumulatedGrads[n]={originalName:t+"/accumulator",variable:Ko(()=>zu(r.shape,this.initialAccumulatorValue).variable(e))}}let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let s=this.accumulatedGrads[n].variable;Ko(()=>{let e=ol(s,Ph(a));s.assign(e);let t=ol(hl(ul(a,Oc(ol(e,gs.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Xo(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};kp.className="Adagrad",_o(kp);var Sp=class extends Ap{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ko(()=>{this.accBeta1=bc(t).variable(),this.accBeta2=bc(n).variable()}),null==r&&(this.epsilon=gs.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Ko(()=>{let n=uh(1,this.accBeta1),r=uh(1,this.accBeta2);t.forEach((t,a)=>{let s=gs.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:Ko(()=>Iu(s).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:t+"/v",variable:Ko(()=>Iu(s).variable(!1))});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,u=ol(hl(o,this.beta1),hl(i,1-this.beta1)),h=ol(hl(l,this.beta2),hl(Ph(i),1-this.beta2)),c=ul(u,n),d=ul(h,r);o.assign(u),l.assign(h);let p=ol(hl(ul(c,ol(Oc(d),this.epsilon)),-this.learningRate),s);s.assign(p)}),this.accBeta1.assign(hl(this.accBeta1,this.beta1)),this.accBeta2.assign(hl(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Xo(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&Xo(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),Ko(()=>{this.accBeta1.assign(Yh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Yh(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};Sp.className="Adam",_o(Sp);var Ip=class extends Ap{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ko(()=>{this.iteration=bc(0).variable(),this.accBeta1=bc(t).variable()}),null==r&&(this.epsilon=gs.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Ko(()=>{let n=uh(1,this.accBeta1),r=ul(-this.learningRate,ol(hl(this.iteration,this.decay),1));t.forEach((t,a)=>{let s=gs.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:Iu(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:t+"/v",variable:Iu(s).variable(!1)});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,u=ol(hl(o,this.beta1),hl(i,1-this.beta1)),h=hl(l,this.beta2),c=cl(i),d=Th(h,c);o.assign(u),l.assign(d);let p=ol(hl(ul(r,n),ul(u,ol(d,this.epsilon))),s);s.assign(p)}),this.iteration.assign(ol(this.iteration,1)),this.accBeta1.assign(hl(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Xo(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&Xo(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};Ip.className="Adamax",_o(Ip);var _p=class extends Ap{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let a=gs.registeredVariables[t];Ko(()=>{let e=ol(hl(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Zo(bc(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};_p.className="SGD",_o(_p);var Ep=class extends _p{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=bc(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=gs.registeredVariables[t];if(null==this.accumulations[n]){let e=!1;this.accumulations[n]={originalName:t+"/momentum",variable:Ko(()=>Iu(r).variable(e))}}let a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&Ko(()=>{let e,t=ol(hl(this.m,a),s);e=ol(hl(this.c,this.useNesterov?ol(s,hl(t,this.m)):t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Xo(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};Ep.className="Momentum",_o(Ep);var Tp=class extends Ap{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=gs.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=gs.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:t+"/rms",variable:Ko(()=>Iu(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:t+"/momentum",variable:Ko(()=>Iu(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:t+"/mg",variable:Ko(()=>Iu(r).variable(a))});let s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;let i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;Ko(()=>{let e=ol(hl(i,this.decay),hl(Ph(s),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,a=ol(hl(t,this.decay),hl(s,1-this.decay)),l=ul(hl(s,this.learningRate),Oc(uh(e,ol(Ph(a),this.epsilon)))),u=ol(hl(o,this.momentum),l);i.assign(e),t.assign(a),o.assign(u);let h=uh(r,u);r.assign(h)}else{let e=ol(hl(i,this.decay),hl(Ph(s),1-this.decay)),t=ol(hl(o,this.momentum),ul(hl(s,this.learningRate),Oc(ol(e,this.epsilon))));i.assign(e),o.assign(t);let n=uh(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Xo(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Xo(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&Xo(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};Tp.className="RMSProp",_o(Tp);var Cp=class{static sgd(e){return new _p(e)}static momentum(e,t,n=!1){return new Ep(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new Tp(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new Sp(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new wp(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new Ip(e,t,n,r,a)}static adagrad(e,t=.1){return new kp(e,t)}},Np={sgd:Cp.sgd,momentum:Cp.momentum,adadelta:Cp.adadelta,adagrad:Cp.adagrad,rmsprop:Cp.rmsprop,adamax:Cp.adamax,adam:Cp.adam},Mp="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function Fp(){return new Promise(e=>Mp(()=>e()))}var Rp={};function Dp(e,t){let n=e[0].length;e.forEach((e,t)=>{le(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),le(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((e,a)=>{for(let s=0;s<n;s++)le(s===t||e[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function Op(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}I(Rp,{ERF_A1:()=>qp,ERF_A2:()=>Kp,ERF_A3:()=>Xp,ERF_A4:()=>Zp,ERF_A5:()=>Yp,ERF_P:()=>Gp,PARALLELIZE_THRESHOLD:()=>zp,SELU_SCALE:()=>Up,SELU_SCALEALPHA:()=>Hp,applyActivation:()=>gd,assertAndGetBroadcastShape:()=>wu,assertAxesAreInnerMostDims:()=>gh,assertParamsConsistent:()=>Dp,assignToTypedArray:()=>sf,axesAreInnerMostDims:()=>dh,calculateShapes:()=>ao,checkEinsumDimSizes:()=>df,combineLocations:()=>ph,complexWithEvenIndex:()=>nf,complexWithOddIndex:()=>rf,computeConv2DInfo:()=>El,computeConv3DInfo:()=>Tl,computeDefaultPad:()=>Cl,computeDilation2DInfo:()=>Sl,computeOptimalWindowSize:()=>Pp,computeOutAndReduceShapes:()=>fh,computeOutShape:()=>Op,computePool2DInfo:()=>Il,computePool3DInfo:()=>_l,convertConv2DDataFormat:()=>zl,decodeEinsumEquation:()=>hf,eitherStridesOrDilationsAreOne:()=>Ol,expandShapeToKeepDim:()=>mh,exponent:()=>lf,exponents:()=>of,fromStringArrayToUint8:()=>wf,fromUint8ToStringArray:()=>Af,getAxesPermutation:()=>yh,getBroadcastDims:()=>vu,getComplexWithIndex:()=>af,getEinsumComputePath:()=>pf,getEinsumPermutation:()=>cf,getFusedBiasGradient:()=>md,getFusedDyActivation:()=>fd,getImageCenter:()=>$p,getInnerMostAxes:()=>xh,getPermuted:()=>Vp,getReductionAxes:()=>Au,getReshaped:()=>Lp,getReshapedPermuted:()=>Bp,getSliceBeginCoords:()=>Wp,getSliceSize:()=>jp,getUndoAxesPermutation:()=>bh,isIdentityPermutation:()=>ff,log:()=>Qp,mergeRealAndImagArrays:()=>ef,prepareAndValidate:()=>eo,prepareSplitSize:()=>gf,segment_util:()=>yf,shouldFuse:()=>yd,slice_util:()=>so,splitRealAndImagArrays:()=>tf,tupleValuesAreOne:()=>Dl,upcastType:()=>as,validateInput:()=>ro,validateUpdateShape:()=>no,warn:()=>Jp});var zp=30;function Pp(e){return e<=zp?e:Pe(e,Math.floor(Math.sqrt(e)))}function $p(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Lp(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Vp(e,t,n=!0){let r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{let n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function Bp(e,t,n,r=!0){let a=[];a.push(r?e[0]/n:e[0]*n);for(let s=1;s<e.length;++s)a.push(s<=t.length?r?t[s-1]*e[s]:e[s]/t[s-1]:e[s]);return a}function Wp(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function jp(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Hp=1.7580993408473768,Up=1.0507009873554805,Gp=.3275911,qp=.254829592,Kp=-.284496736,Xp=1.421413741,Zp=-1.453152027,Yp=1.061405429;function Jp(...e){Ye().getBool("IS_TEST")||console.warn(...e)}function Qp(...e){Ye().getBool("IS_TEST")||console.log(...e)}function ef(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function tf(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function nf(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function rf(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function af(e,t){return{real:e[2*t],imag:e[2*t+1]}}function sf(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function of(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function lf(e,t,n){let r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var uf=/->/g;function hf(e,t){let n=((e=e.replace(/\s/g,"")).length-e.replace(uf,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');let[r,a]=e.split("->");le(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let s=r.split(","),i=s.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let c=0;c<a.length;++c){let e=a[c];if(!s.some(t=>-1!==t.indexOf(e)))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===o.indexOf(e)&&o.push(e)}for(let c=0;c<r.length;++c){let e=r[c];-1===o.indexOf(e)&&","!==e&&o.push(e)}let l=new Array(s.length);for(let c=0;c<i;++c){if(new Set(s[c].split("")).size!==s[c].length)throw new Error(`Found duplicate axes in input component ${s[c]}. Support for duplicate axes in input is not implemented yet.`);l[c]=[];for(let e=0;e<s[c].length;++e)l[c].push(o.indexOf(s[c][e]))}let u=o.length,h=[];for(let c=a.length;c<u;++c)h.push(c);return{allDims:o,summedDims:h,idDims:l}}function cf(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;let r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function df(e,t,n){let r=new Array(e);for(let a=0;a<n.length;++a){let e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:le(r[t[a][n]]===e[n],()=>`Expected dimension ${r[t[a][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`)}}function pf(e,t){let n=e,r=[],a=0;0===e.length&&n.push(-1),a=e.length+1;for(let i=0;i<a;++i)r.push([]);let s=[];for(let i=0;i<n.length;++i){let e=mf(t,n[i]);for(let t of e)-1===s.indexOf(t)&&(r[i].push(t),s.push(t))}return{path:n,steps:r}}function ff(e){return e.every((e,t)=>e===t)}function mf(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function gf(e,t,n=0){let r=[];if("number"==typeof t)le(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{le(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");let a=t.indexOf(-1);if(-1!==a){let r=t.reduce((e,t)=>t>0?e+t:e);t[a]=e.shape[n]-r}le(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}var yf={};function bf(e,t){let n,r=!1;for(e<=zp?(n=e,r=!0):n=Pe(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Pe(e,n+1);return n}function xf(e,t,n){let r=[],a=e.length;for(let s=0;s<a;s++)r.push(s!==t?e[s]:n);return r}function vf(e,t,n,r){let a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let c=0;c<r;++c)if(e.shape[c]!==t.shape[c])throw new Error(`x.shape[${c}]: ${e.shape[c]} should be equal to indices.shape[${c}]: ${t.shape[c]}.`);let i=e.shape[n],o=[],l=1,u=1,h=1;for(let c=0;c<r;++c)o.push(e.shape[c]),l*=e.shape[c];for(let c=r;c<n;c++)o.push(e.shape[c]),u*=e.shape[c];for(let c=r;c<a;c++)o.push(t.shape[c]);for(let c=n+1;c<s;c++)o.push(e.shape[c]),h*=e.shape[c];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:i,outputShape:o}}function Af(e){try{return e.map(e=>$a(e))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+t)}}function wf(e){return e.map(e=>Pa(e))}I(yf,{collectGatherOpShapeInfo:()=>vf,computeOutShape:()=>xf,segOpComputeOptimalWindowSize:()=>bf});var kf={};I(kf,{nonMaxSuppressionV3Impl:()=>Dd,nonMaxSuppressionV4Impl:()=>Od,nonMaxSuppressionV5Impl:()=>zd,whereImpl:()=>Qc});var Sf=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},If=class{refCount(e){return _f("refCount")}incRef(e){return _f("incRef")}timerAvailable(){return!0}time(e){return _f("time")}read(e){return _f("read")}readSync(e){return _f("readSync")}numDataIds(){return _f("numDataIds")}disposeData(e,t){return _f("disposeData")}write(e,t,n){return _f("write")}move(e,t,n,r,a){return _f("move")}memory(){return _f("memory")}floatPrecision(){return _f("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return _f("dispose")}};function _f(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Ef(e){let t=e.length,n=0,r=0;for(;t>0;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function Tf(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n,r,a=e.length,s=0;for(;a>0;)s=Math.random()*a|0,a--,n=e[a],r=t[a],e[a]=e[s],t[a]=t[s],e[s]=n,t[s]=r}function Cf(e,t,n){return Math.max(e,Math.min(t,n))}function Nf(e){return e%2==0?e:e+1}function Mf(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Ff(e,t){let n=Math.random();return t*n+(1-n)*e}function Rf(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Df(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Of(e,t,n=""){Df(Vf(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function zf(e){Df(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function Pf(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||tm(e)&&!n)for(let r=0;r<e.length;++r)Pf(e[r],t,n);else t.push(e);return t}function $f(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Lf(e){return 0===e.length}function Vf(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bf(e){return e%1==0}function Wf(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function jf(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Hf(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return Ef(t),t}function Uf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Gf(e,t=(e=>0),n){return new Promise((r,a)=>{let s=0,i=()=>{if(e())return void r();s++;let o=t(s);null!=n&&s>=n?a():setTimeout(i,o)};i()})}function qf(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let a=e.slice();return a[r]=t/n,a}function Kf(e,t){let n=t.length;return Df((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),Df(e.every(e=>Bf(e)),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function Xf(e,t){let n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:Kf(t,e).sort(),i=0;for(let o=0;o<e.length;++o){if(null!=s){if(s[i]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==s[i]||s[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),s[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function Zf(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Yf(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Jf(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function Qf(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function em(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function tm(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function nm(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function rm(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function am(e){return"string"==typeof e||e instanceof String}function sm(e){return"boolean"==typeof e}function im(e){return"number"==typeof e}function om(e){return Array.isArray(e)?om(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":im(e)?"float32":am(e)?"string":sm(e)?"bool":"float32"}function lm(e){return!!(e&&e.constructor&&e.call&&e.apply)}function um(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function hm(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function cm(e,t,n,r=!1){let a=new Array;if(1===t.length){let s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{let s=t[0],i=t.slice(1),o=i.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<s;t++)a[t]=cm(e+t*o,i,n,r)}return a}function dm(e,t,n=!1){if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return cm(0,e,t,n)}function pm(e,t){let n=fm(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function fm(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function mm(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return dm(e,new Float32Array(n));if("int32"===t)return dm(e,new Int32Array(n));if("bool"===t)return dm(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function gm(e){e.forEach(t=>{Df(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ym(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function bm(e,t,n){if(0===t)return[];if(1===t)return[e];let r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function xm(e){return e&&e.then&&"function"==typeof e.then}var vm="tfjsflags";function Am(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("="))),t}function wm(){return Sm}var km,Sm=null;function Im(){if(null==km){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}km=e}return km}function _m(e,t){let n=function(){let e=Im();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var Em="Abs",Tm="Acos",Cm="Acosh",Nm="Add",Mm="AddN",Fm="All",Rm="Any",Dm="ArgMax",Om="ArgMin",zm="Asin",Pm="Asinh",$m="Atan",Lm="Atanh",Vm="Atan2",Bm="AvgPool",Wm="AvgPoolGrad",jm="AvgPool3D",Hm="AvgPool3DGrad",Um="BatchMatMul",Gm="BatchToSpaceND",qm="Bincount",Km="Cast",Xm="Ceil",Zm="ClipByValue",Ym="Complex",Jm="ComplexAbs",Qm="Concat",eg="Conv2D",tg="Conv2DBackpropFilter",ng="Conv2DBackpropInput",rg="Conv3D",ag="Conv3DBackpropFilterV2",sg="Conv3DBackpropInputV2",ig="Cos",og="Cosh",lg="Cumsum",ug="CropAndResize",hg="DenseBincount",cg="DepthToSpace",dg="DepthwiseConv2dNative",pg="DepthwiseConv2dNativeBackpropFilter",fg="DepthwiseConv2dNativeBackpropInput",mg="Diag",gg="Dilation2D",yg="Dilation2DBackpropInput",bg="Dilation2DBackpropFilter",xg="RealDiv",vg="Einsum",Ag="Elu",wg="EluGrad",kg="Erf",Sg="Equal",Ig="Exp",_g="ExpandDims",Eg="Expm1",Tg="FFT",Cg="Fill",Ng="FlipLeftRight",Mg="Floor",Fg="FloorDiv",Rg="FusedBatchNorm",Dg="GatherV2",Og="GatherNd",zg="Greater",Pg="GreaterEqual",$g="Identity",Lg="IFFT",Vg="Imag",Bg="IsFinite",Wg="IsInf",jg="IsNan",Hg="LeakyRelu",Ug="Less",Gg="LessEqual",qg="LinSpace",Kg="Log",Xg="Log1p",Zg="LogicalAnd",Yg="LogicalNot",Jg="LogicalOr",Qg="LRN",ey="LRNGrad",ty="Max",ny="Maximum",ry="MaxPool",ay="MaxPoolGrad",sy="MaxPool3D",iy="MaxPool3DGrad",oy="MaxPoolWithArgmax",ly="Mean",uy="Min",hy="Minimum",cy="MirrorPad",dy="Mod",py="Multinomial",fy="Multiply",my="Neg",gy="NotEqual",yy="NonMaxSuppressionV3",by="NonMaxSuppressionV4",xy="NonMaxSuppressionV5",vy="OnesLike",Ay="OneHot",wy="Pack",ky="PadV2",Sy="Pow",Iy="Prelu",_y="Prod",Ey="Range",Ty="Real",Cy="Reciprocal",Ny="Relu",My="Reshape",Fy="ResizeNearestNeighbor",Ry="ResizeNearestNeighborGrad",Dy="ResizeBilinear",Oy="ResizeBilinearGrad",zy="Relu6",Py="Reverse",$y="Round",Ly="Rsqrt",Vy="ScatterNd",By="Select",Wy="Selu",jy="Slice",Hy="Sin",Uy="Sinh",Gy="Sign",qy="Sigmoid",Ky="Softplus",Xy="Sqrt",Zy="Sum",Yy="SpaceToBatchND",Jy="SplitV",Qy="Softmax",eb="SparseFillEmptyRows",tb="SparseReshape",nb="SparseSegmentMean",rb="SparseSegmentSum",ab="SparseToDense",sb="SquaredDifference",ib="Square",ob="StridedSlice",lb="StringNGrams",ub="StringSplit",hb="StringToHashBucketFast",cb="Sub",db="Tan",pb="Tanh",fb="Tile",mb="TopK",gb="Transform",yb="Transpose",bb="Unique",xb="Unpack",vb="UnsortedSegmentSum",Ab="ZerosLike",wb="Step",kb="FromPixels",Sb="RotateWithOffset",Ib="_FusedMatMul",_b="FusedConv2D",Eb="FusedDepthwiseConv2D",Tb=_m("kernelRegistry",()=>new Map),Cb=_m("gradRegistry",()=>new Map);function Nb(e,t){let n=Ob(e,t);return Tb.get(n)}function Mb(e){return Cb.get(e)}function Fb(e){let t=Tb.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[s,i]=a,[o]=s.split("_");o===e&&n.push(i)}return n}function Rb(e){let{kernelName:t,backendName:n}=e,r=Ob(t,n);Tb.has(r)&&console.warn(`The kernel '${t}' for backend '${n}' is already registered`),Tb.set(r,e)}function Db(e){let{kernelName:t}=e;Cb.has(t)&&wm().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),Cb.set(t,e)}function Ob(e,t){return`${t}_${e}`}var zb={};I(zb,{arraysEqual:()=>Vf,assert:()=>Df,assertNonNegativeIntegerDimensions:()=>gm,assertNonNull:()=>zf,assertShapesMatch:()=>Of,bytesFromStringArray:()=>rm,bytesPerElement:()=>nm,checkConversionForErrors:()=>Jf,clamp:()=>Cf,computeStrides:()=>hm,createScalarValue:()=>Yb,createShuffledIndices:()=>Hf,decodeString:()=>nx,distSquared:()=>Rf,encodeString:()=>tx,fetch:()=>ex,fingerPrint64:()=>Zb,flatten:()=>Pf,getArrayFromDType:()=>Yf,getTypedArrayFromDType:()=>Zf,hasEncodingLoss:()=>em,hexToLong:()=>Lb,indexToLoc:()=>bm,inferDtype:()=>om,inferFromImplicitShape:()=>qf,isBoolean:()=>sm,isFunction:()=>lm,isInt:()=>Bf,isNumber:()=>im,isPromise:()=>xm,isScalarShape:()=>Lf,isString:()=>am,isTypedArray:()=>tm,isValidDtype:()=>Qf,locToIndex:()=>ym,makeOnesTypedArray:()=>pm,makeZerosNestedTypedArray:()=>mm,makeZerosTypedArray:()=>fm,nearestDivisor:()=>um,nearestLargerEven:()=>Nf,now:()=>Qb,parseAxisParam:()=>Kf,randUniform:()=>Ff,repeatedTry:()=>Gf,rightPad:()=>Uf,shuffle:()=>Ef,shuffleCombo:()=>Tf,sizeFromShape:()=>$f,sizeToSquarishShape:()=>jf,squeezeShape:()=>Xf,sum:()=>Mf,tanh:()=>Wf,toNestedArray:()=>dm,toTypedArray:()=>Jb});var Pb=_(E()),$b=Pb.default||Pb;function Lb(e){return $b.fromString(e,!0,16)}var Vb=Lb("c3a5c85c97cb3127"),Bb=Lb("b492b66fbe98f273"),Wb=Lb("9ae16a3b2f90404f");function jb(e){return e.xor(e.shru(47))}function Hb(e,t,n){let r=e.slice(t,t+n);return $b.fromBytes(Array.from(r),!0,!0)}function Ub(e,t){return Hb(e,t,8)}function Gb(e,t){return Hb(e,t,4)}function qb(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Kb(e,t,n=Lb("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Xb(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=qb(s.add(a).add(r),21);let i=a;return a=(a=a.add(t)).add(n),s=s.add(qb(a,44)),[a.add(r),s.add(i)]}(Ub(e,t),Ub(e,t+8),Ub(e,t+16),Ub(e,t+24),n,r)}function Zb(e,t=e.length){let n=$b.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let n=Wb.add(2*t),r=Ub(e,0).add(Wb),a=Ub(e,t-8);return Kb(qb(a,37).mul(n).add(r),qb(r,25).add(a).mul(n),n)}if(t>=4){let n=Wb.add(2*t);return Kb(Gb(e,0).shl(3).add(t),Gb(e,t-4),n)}if(t>0){let n=t+(e[t-1]<<2);return jb(Wb.mul(e[0]+(e[t>>1]<<8)).xor(Vb.mul(n))).mul(Wb)}return Wb}(e,t):function(e,t=e.length){let n=Wb.add(2*t),r=Ub(e,0).mul(Bb),a=Ub(e,8),s=Ub(e,t-8).mul(n),i=Ub(e,t-16).mul(Wb);return Kb(qb(r.add(a),43).add(qb(s,30)).add(i),r.add(qb(a.add(Wb),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){let n=Wb.add(2*t),r=Ub(e,0).mul(Wb),a=Ub(e,8),s=Ub(e,t-8).mul(n),i=Ub(e,t-16).mul(Wb),o=qb(r.add(a),43).add(qb(s,30)).add(i),l=Kb(o,r.add(qb(a.add(Wb),18)).add(s),n),u=Ub(e,16).mul(n),h=Ub(e,24),c=o.add(Ub(e,t-32)).mul(n),d=l.add(Ub(e,t-24)).mul(n);return Kb(qb(u.add(h),43).add(qb(c,30)).add(d),u.add(qb(h.add(r),18)).add(c),n)}(e,t);let r=n,a=n.mul(Bb).add(113),s=jb(a.mul(Wb).add(113)).mul(Wb),i=[$b.UZERO,$b.UZERO],o=[$b.UZERO,$b.UZERO];r=r.mul(Wb).add(Ub(e,0));let l=0,u=64*(t-1>>6),h=u+(t-1&63)-63;do{r=qb(r.add(a).add(i[0]).add(Ub(e,l+8)),37).mul(Bb),a=qb(a.add(i[1]).add(Ub(e,l+48)),42).mul(Bb),r=r.xor(o[1]),a=a.add(i[0]).add(Ub(e,l+40)),s=qb(s.add(o[0]),33).mul(Bb),i=Xb(e,l,i[1].mul(Bb),r.add(o[0])),o=Xb(e,l+32,s.add(o[1]),a.add(Ub(e,l+16))),[s,r]=[r,s],l+=64}while(l!==u);let c=Bb.add(s.and(255).shl(1));return l=h,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=qb(r.add(a).add(i[0]).add(Ub(e,l+8)),37).mul(c),a=qb(a.add(i[1]).add(Ub(e,l+48)),42).mul(c),r=r.xor(o[1].mul(9)),a=a.add(i[0].mul(9).add(Ub(e,l+40))),s=qb(s.add(o[0]),33).mul(c),i=Xb(e,l,i[1].mul(c),r.add(o[0])),o=Xb(e,l+32,s.add(o[1]),a.add(Ub(e,l+16))),[s,r]=[r,s],Kb(Kb(i[0],o[0],c).add(jb(a).mul(Vb)).add(s),Kb(i[1],o[1],c).add(r),c)}function Yb(e,t){return"string"===t?tx(e):Jb([e],t)}function Jb(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Pf(e)),wm().getBool("DEBUG")&&Jf(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type "+t)}function Qb(){return wm().platform.now()}function ex(e,t){return wm().platform.fetch(e,t)}function tx(e,t="utf-8"){return t=t||"utf-8",wm().platform.encode(e,t)}function nx(e,t="utf-8"){return t=t||"utf-8",wm().platform.decode(e,t)}function rx(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){let t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}function ax(e,t,n,r){let a=hm(t),s=function(e,t,n,r){let a=$f(t),s=r[r.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?lx(e):e;if(o>1)for(let u=0;u<a/s;u++){let e=u*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],sx(l[e+t],0,n).length)}return i}(e,t,n,a),i=t.length,o=ox(e,t,n,a,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function sx(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:am(e)?`'${e}'`:"bool"===n?ix(e):parseFloat(e.toFixed(7)).toString(),Uf(r,t)}function ix(e){return 0===e?"false":"true"}function ox(e,t,n,r,a,s=!0){let i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l)return"complex64"===n?[sx(lx(e)[0],0,n)]:"bool"===n?[ix(e[0])]:[e[0].toString()];if(1===l){if(o>20){let t=Array.from(e.slice(0,3*i)),r=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(t=lx(t),r=lx(r)),["["+t.map((e,t)=>sx(e,a[t],n)).join(", ")+", ..., "+r.map((e,t)=>sx(e,a[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?lx(e):Array.from(e)).map((e,t)=>sx(e,a[t],n)).join(", ")+"]"]}let u=t.slice(1),h=r.slice(1),c=r[0]*i,d=[];if(o>20){for(let t=0;t<3;t++){let r=t*c;d.push(...ox(e.slice(r,r+c),u,n,h,a,!1))}d.push("...");for(let t=o-3;t<o;t++){let r=t*c;d.push(...ox(e.slice(r,r+c),u,n,h,a,t===o-1))}}else for(let m=0;m<o;m++){let t=m*c;d.push(...ox(e.slice(t,t+c),u,n,h,a,m===o-1))}let p=2===l?",":"";d[0]="["+d[0]+p;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":f),d}function lx(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ux=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=$f(e),null!=n){let e=n.length;Df(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Yf(t,this.size),this.strides=hm(e)}set(e,...t){0===t.length&&(t=[0]),Df(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t])throw new Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return hx().makeTensor(this.values,this.shape,this.dtype)}},hx=null,cx=null,dx=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=$f(e),this.strides=hm(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return cx.buffer(this.shape,this.dtype,e)}bufferSync(){return cx.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return dm(this.shape,e,"complex64"===this.dtype)}arraySync(){return dm(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=hx().read(this.dataId);if("string"===this.dtype){let n=await e;try{return n.map(e=>nx(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();let e=hx().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>nx(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await hx().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(hx().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return cx.print(this,e)}clone(){return this.throwIfDisposed(),cx.clone(this)}toString(e=!1){return ax(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),cx.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),hx().makeVariable(this,e,t,n)}};function px(){return _m("Tensor",()=>dx)}Object.defineProperty(dx,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),px();var fx=class extends dx{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Vf(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);hx().disposeTensor(this),this.dataId=e.dataId,hx().incRef(this,null)}dispose(){hx().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(fx,Symbol.hasInstance,{value:e=>e instanceof dx&&null!=e.assign&&e.assign instanceof Function});var mx,gx,yx,bx,xx,vx={};I(vx,{assertTypesMatch:()=>Ix,getTensorsInContainer:()=>Ex,isTensorInList:()=>_x,makeTypesMatch:()=>Sx}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(mx||(mx={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(gx||(gx={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(yx||(yx={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(bx||(bx={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(xx||(xx={}));var Ax={float32:bx,int32:gx,bool:yx,complex64:xx};function wx(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Ax[e][t]}function kx(e){return wx(e,"int32")}function Sx(e,t){if(e.dtype===t.dtype)return[e,t];let n=wx(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Ix(e,t){Df(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function _x(e,t){return t.some(t=>t.id===e.id)}function Ex(e){let t=[];return Tx(e,t,new Set),t}function Tx(e,t,n){if(null==e)return;if(e instanceof dx)return void t.push(e);if(!function(e){return Array.isArray(e)||"object"==typeof e}(e))return;let r=e;for(let a in r){let e=r[a];n.has(e)||(n.add(e),Tx(e,t,n))}}function Cx(e){return null!=e.kernelName}var Nx=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},Mx=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Nx}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new class{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new class{logKernelProfile(e,t,n,r,a,s){let i="number"==typeof r?Uf(r+"ms",9):r.error,o=Uf(e,25),l=t.rank,u=t.size,h=Uf(t.shape.toString(),14),c="";for(let d in a){let e=a[d];if(null!=e){let n=e.shape||t.shape,r=n.length;c+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${i}\t%c${l}D ${h}\t%c${u}\t%c${c}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}})}profileKernel(e,t,n){let r,a,s=()=>{r=n()},i=Qb();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let e of r)e.dataSync();a=Promise.resolve({kernelMs:Qb()-i})}if(wm().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let t=r[o];t.data().then(n=>{rx(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach(e=>{Promise.all([e.data(),r,s]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}(this.backendInstance),!0}setupRegisteredKernels(){Fb(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Fb(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(!n||n instanceof If||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0))).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return Mx.nextTensorId++}nextVariableId(){return Mx.nextVariableId++}clone(e){let t=Rx.runKernel($g,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>Rx.runKernel(Km,{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,n){if(null==Nb(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});let s=r-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n,r=[],a=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o,l=Cx(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Cx(e)){let{kernelName:t,inputs:s,attrs:i}=e,l=Nb(t,this.backendName);Df(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),n=()=>{let e=this.backend.numDataIds();o=l.kernelFunc({inputs:s,attrs:i,backend:this.backend});let n=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let u=n.map(e=>{if(null!=e.rank)return e;let{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)});if(a){let e=this.getTensorsForGradient(t,s,u);r=this.saveTensorsForBackwardMode(e)}return u}}else{let{forwardFunc:t}=e,s=e=>{!a||(r=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,s));let n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}let u,{inputs:h,attrs:c}=e,d=Cx(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(u=this.profiler.profileKernel(l,h,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(u),t=u.outputs):t=n()}),a&&this.addTapeNode(l,h,t,d,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(e=>null!=h[e]?h[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:u.timeMs,extraInfo:u.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){let r=Mb(e);if(null!=r){let e,a=r.inputsToSave||[],s=r.outputsToSave||[];r.saveAllInputs?(Df(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=a.map(e=>t[e]);let i=n.filter((e,t)=>s[t]);return e.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let a=e;"string"===(n=n||"float32")&&am(e[0])&&(a=e.map(e=>tx(e)));let s=r.write(a,t,n),i=new dx(t,n,s,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){let e=this.state.tensorInfo.get(s),t=rm(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){let a=new dx(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let a=new fx(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*nm(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof fx||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*nm(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){let i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Mb(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=n[t],r=fm(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=Ex(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){let e=this.state.activeScope.track[a];!e.kept&&!n.has(e.id)&&e.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{!e.kept&&e.scopeId===r.id&&this.track(e)})}gradients(e,t,n,r=!1){if(Df(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Df(a instanceof dx,()=>"The result y returned by f() must be a tensor.");let s=function(e,t,n){let r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let n=e[l],s=n.inputs;for(let e in s){let i=s[e],o=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,a[n.id]=!0;break}if(o)break}}let s={};s[n.id]=!0;let i={};for(let l=e.length-1;l>=0;l--){let t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(s[t.outputs[e].id]){for(let e in n)s[n[e].id]=!0,i[t.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let t=e[l];if(a[t.id]&&i[t.id]){let e={};for(let a in t.inputs){let n=t.inputs[a];r[n.id]&&(e[a]=n)}let n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[a.id]=null==n?function(e){let t=pm($f(e),"float32");return Rx.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){let s=t[a],i=[];if(s.outputs.forEach(t=>{let n=e[t.id];i.push(null!=n?n:null)}),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let o=s.gradient(i);for(let t in s.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(o)}.`);let a=n(()=>o[t]());if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);let i=s.inputs[t];if(!Vf(a.shape,i.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=a;else{let t=e[i.id];e[i.id]=r(t,a),t.dispose()}}}}(e,s,e=>this.tidy(e),Dx);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){return Df(lm(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{Df(t.every(e=>e instanceof dx),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,r={};return t.forEach((e,t)=>{r[t]=e}),this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),Df(n.value instanceof dx,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Df(lm(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{let a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];Df(s.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Df(s.every(e=>e instanceof dx),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let i={};return s.forEach((e,t)=>{i[t]=()=>e}),i},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){let t=Qb(),n=await this.backend.time(e);return n.wallMs=Qb()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Nx;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function Fx(){let e=Im();if(null==e._tfengine){let t=new class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Am,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(xm(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);vm in e&&e[vm].split(",").forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)})}}(e);e._tfengine=new Mx(t)}return function(e){Sm=e}(e._tfengine.ENV),function(e){hx=e}(()=>e._tfengine),e._tfengine}Mx.nextTensorId=0,Mx.nextVariableId=0;var Rx=Fx();function Dx(e,t){return Rx.runKernel(Nm,{a:e,b:t})}var Ox={};function zx(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Px(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}I(Ox,{isBrowser:()=>Px,isMobile:()=>zx});var $x=wm();function Lx(e,t){let n=e;if(tm(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||tm(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&wm().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Vx(e,r,[]),r}function Vx(e,t,n){if(n=n||[],!Array.isArray(e)&&!tm(e))return void Df(0===t.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);Df(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),Df(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let a=0;a<e.length;++a)Vx(e[a],r,n.concat(a))}function Bx(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function Wx(e,t,n,r="numeric"){if(e instanceof dx)return Bx(r,e.dtype,t,n),e;let a=om(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Bx(r,a,t,n),null==e||!tm(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==e?"null":e.constructor.name}'`);let s=Lx(e,a);!tm(e)&&!Array.isArray(e)&&(e=[e]);let i="string"!==a?Jb(e,a):Pf(e,[],!0);return Rx.makeTensor(i,s,a)}function jx(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,a)=>Wx(e,`${t}[${a}]`,n,r))}function Hx(e){let t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";let a=(...e)=>{Rx.startScope(n);try{let t=r(...e);return xm(t)&&console.error("Cannot return a Promise inside of tidy."),Rx.endScope(t),t}catch(t){throw Rx.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}$x.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),$x.registerFlag("IS_BROWSER",()=>Px()),$x.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),$x.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),$x.registerFlag("PROD",()=>!1),$x.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>$x.getBool("DEBUG")),$x.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),$x.registerFlag("IS_TEST",()=>!1),$x.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),$x.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);var Ux=Hx({complex_:function(e,t){let n=Wx(e,"real","complex"),r=Wx(t,"imag","complex");return Of(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),Rx.runKernel(Ym,{real:n,imag:r})}});function Gx(e,t,n,r){if(null==r&&(r=om(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!tm(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){gm(t);let e=$f(t),r=$f(n);Df(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let a=0;a<n.length;++a){let e=n[a],r=a!==n.length-1||e!==$f(t.slice(a));Df(n[a]===t[a]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!tm(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?Jb(e,r):Pf(e,[],!0),Rx.makeTensor(e,t,r)}function qx(e,t,n){return Gx(e,t,Lx(e,n),n)}var Kx={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function Xx(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<a.length;++s){let i=a[s],o=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${o.dtype}`);let l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){let e=new Promise(async e=>{let t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n),a=0;for(let s=0;s<t.length;s++){let e=t[s],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:Yx(await Promise.all(r)),specs:n}}function Zx(e,t){let n,r={},a=0;for(let s of t){let t,i=s.name,o=s.dtype,l=s.shape,u=$f(l);if("quantization"in s){let r=s.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r)||!("scale"in r))throw new Error(`Weight ${s.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==r.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==o)throw new Error(`Weight ${s.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${o}.`)}let l=Kx[r.dtype],h=e.slice(a,a+u*l),c="uint8"===r.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===o)if("uint8"===r.dtype||"uint16"===r.dtype){t=new Float32Array(c.length);for(let e=0;e<c.length;e++)t[e]=c[e]*r.scale+r.min}else{if("float16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);void 0===n&&(n=rv()),t=n(c)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${i}': ${o}`);if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);t=new Int32Array(c.length);for(let e=0;e<c.length;e++)t[e]=Math.round(c[e]*r.scale+r.min)}a+=u*l}else if("string"===o){let n=$f(s.shape);t=[];for(let r=0;r<n;r++){let n=new Uint32Array(e.slice(a,a+4))[0];a+=4;let r=new Uint8Array(e.slice(a,a+n));t.push(r),a+=n}}else{let n=Kx[o],s=e.slice(a,a+u*n);if("float32"===o)t=new Float32Array(s);else if("int32"===o)t=new Int32Array(s);else if("bool"===o)t=new Uint8Array(s);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${i}': ${o}`);{t=new Float32Array(s);let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<e.length;r++)e[r]=t[2*r],n[r]=t[2*r+1];let a=qx(e,l,"float32"),o=qx(n,l,"float32");r[i]=Ux(a,o),a.dispose(),o.dispose()}}a+=u*n}"complex64"!==o&&(r[i]=qx(t,l,o))}return r}function Yx(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});let r=new Uint8Array(t),a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}var Jx="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Qx(e){return Jx?Buffer.byteLength(e):new Blob([e]).size}function ev(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});let n=new Uint8Array(t),r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function tv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function nv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Qx(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Qx(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function rv(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let i=0;i<r.length;i++){let a=r[i];s[i]=e[n[a>>10]+(1023&a)]+t[a>>10]}return new Float32Array(a)}}var av=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==av.instance&&(av.instance=new av),av.instance}static registerSaveRouter(e){av.getInstance().saveRouters.push(e)}static registerLoadRouter(e){av.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return av.getHandlers(e,"save")}static getLoadHandlers(e,t){return av.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return("load"===t?av.getInstance().loadRouters:av.getInstance().saveRouters).forEach(t=>{let a=t(e,n);null!==a&&r.push(a)}),r}},sv=e=>av.registerSaveRouter(e),iv=e=>av.registerLoadRouter(e),ov=e=>av.getSaveHandlers(e),lv=(e,t)=>av.getLoadHandlers(e,t),uv="tensorflowjs",hv="models_store",cv="model_info_store";function dv(){if(!wm().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function pv(e){let t=e.result;t.createObjectStore(hv,{keyPath:"modelPath"}),t.createObjectStore(cv,{keyPath:"modelPath"})}var fv=class{constructor(e){if(this.indexedDB=dv(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open(uv,1);r.onupgradeneeded=()=>pv(r),r.onsuccess=()=>{let a=r.result;if(null==t){let t=a.transaction(hv,"readonly"),r=t.objectStore(hv).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{let r,s=nv(t),i=a.transaction(cv,"readwrite"),o=i.objectStore(cv),l=o.put({modelPath:this.modelPath,modelArtifactsInfo:s});l.onsuccess=()=>{r=a.transaction(hv,"readwrite");let l=r.objectStore(hv).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s});l.onsuccess=()=>e({modelArtifactsInfo:s}),l.onerror=e=>{o=i.objectStore(cv);let t=o.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(l.error)),t.onerror=e=>(a.close(),n(l.error))}},l.onerror=e=>(a.close(),n(l.error)),i.oncomplete=()=>{null==r?a.close():r.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}};fv.URL_SCHEME="indexeddb://";var mv=e=>wm().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(fv.URL_SCHEME)?function(e){return new fv(e)}(e.slice(fv.URL_SCHEME.length)):null;av.registerSaveRouter(mv),av.registerLoadRouter(mv);var gv="/",yv="tensorflowjs_models",bv="info",xv="model_topology",vv="weight_specs",Av="weight_data",wv="model_metadata";function kv(e){return{info:[yv,e,bv].join(gv),topology:[yv,e,xv].join(gv),weightSpecs:[yv,e,vv].join(gv),weightData:[yv,e,Av].join(gv),modelMetadata:[yv,e,wv].join(gv)}}function Sv(e){let t=e.split(gv);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(gv)}var Iv=class{constructor(e){if(!wm().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=kv(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=nv(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(Jx)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData));let t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){let e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}let s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Jx){let t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(s),t}};Iv.URL_SCHEME="localstorage://";var _v=e=>wm().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Iv.URL_SCHEME)?function(e){return new Iv(e)}(e.slice(Iv.URL_SCHEME.length)):null;av.registerSaveRouter(_v),av.registerLoadRouter(_v);var Ev,Tv="://",Cv=class{constructor(){this.managers={}}static getInstance(){return null==Cv.instance&&(Cv.instance=new Cv),Cv.instance}static registerManager(e,t){Df(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(Tv)&&(e=e.slice(0,e.indexOf(Tv))),Df(e.length>0,()=>"scheme must not be an empty string.");let n=Cv.getInstance();Df(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}};function Nv(e){if(-1===e.indexOf(Tv))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Cv.getSchemes().join(","));return{scheme:e.split(Tv)[0],path:e.split(Tv)[1]}}async function Mv(e,t,n=!1){Df(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=av.getLoadHandlers(e);Df(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),Df(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let a=r[0],s=av.getSaveHandlers(t);Df(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),Df(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let i=s[0],o=Nv(e).scheme,l=Nv(e).path,u=o===Nv(e).scheme,h=await a.load();n&&u&&await Cv.getManager(o).removeModel(l);let c=await i.save(h);return n&&!u&&await Cv.getManager(o).removeModel(l),c.modelArtifactsInfo}async function Fv(){let e=Cv.getSchemes(),t={};for(let n of e){let e=await Cv.getManager(n).listModels();for(let r in e)t[n+Tv+r]=e[r]}return t}async function Rv(e){let t=Nv(e);return Cv.getManager(t.scheme).removeModel(t.path)}async function Dv(e,t){return Mv(e,t,!1)}async function Ov(e,t){return Mv(e,t,!0)}if(wm().get("IS_BROWSER")){wm().setPlatform("browser",new class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}});try{Cv.registerManager(Iv.URL_SCHEME,new class{constructor(){Df(wm().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Df("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=yv+gv,n=gv+bv;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);a.startsWith(t)&&a.endsWith(n)&&(e[Sv(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){let t=kv(e=function(e){return e.startsWith(Iv.URL_SCHEME)?e.slice(Iv.URL_SCHEME.length):e}(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),n}})}catch(Ya){}try{Cv.registerManager(fv.URL_SCHEME,new class{constructor(){this.indexedDB=dv()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(uv,1);n.onupgradeneeded=()=>pv(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(cv,"readonly"),s=a.objectStore(cv).getAll();s.onsuccess=()=>{let t={};for(let e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){return e=function(e){return e.startsWith(fv.URL_SCHEME)?e.slice(fv.URL_SCHEME.length):e}(e),new Promise((t,n)=>{let r=this.indexedDB.open(uv,1);r.onupgradeneeded=()=>pv(r),r.onsuccess=()=>{let a,s=r.result,i=s.transaction(cv,"readwrite"),o=i.objectStore(cv),l=o.get(e);l.onsuccess=()=>{if(null==l.result)return s.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let r=o.delete(e),i=()=>{a=s.transaction(hv,"readwrite");let r=a.objectStore(hv).delete(e);r.onsuccess=()=>t(l.result.modelArtifactsInfo),r.onerror=e=>n(l.error)};r.onsuccess=i,r.onerror=e=>(i(),s.close(),n(l.error))}},l.onerror=e=>(s.close(),n(l.error)),i.oncomplete=()=>{null==a?s.close():a.oncomplete=()=>s.close()}},r.onerror=e=>n(r.error)})}})}catch(Ya){}}function zv(e,t="float32",n){return t=t||"float32",gm(e),new ux(e,t,n)}wm().get("IS_NODE")&&wm().setPlatform("node",new class{constructor(){this.util=k("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=wm().global.fetch?wm().global.fetch(e,t):(null==Ev&&(Ev=T()),Ev(e,t))}now(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var Pv=Hx({cast_:function(e,t){let n=Wx(e,"x","cast");if(!Qf(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Rx.runKernel(Km,{x:n},{dtype:t})}}),$v=Hx({clone_:function(e){let t={x:Wx(e,"x","clone","string_or_numeric")};return Rx.runKernel($g,t)}});Fx(),function(e){cx=e}({buffer:zv,cast:Pv,clone:$v,print:function(e,t=!1){console.log(e.toString(t))}});var Lv={};function Vv(e){return new Promise(e=>setTimeout(e)).then(e)}I(Lv,{browserFiles:()=>Wv,browserHTTPRequest:()=>Yv,concatenateArrayBuffers:()=>ev,copyModel:()=>Dv,decodeWeights:()=>Zx,encodeWeights:()=>Xx,fromMemory:()=>Qv,getLoadHandlers:()=>lv,getModelArtifactsInfoForJSON:()=>nv,getSaveHandlers:()=>ov,http:()=>Zv,isHTTPScheme:()=>Kv,listModels:()=>Fv,loadWeights:()=>Uv,moveModel:()=>Ov,registerLoadRouter:()=>iv,registerSaveRouter:()=>sv,removeModel:()=>Rv,weightsLoaderFactory:()=>Gv,withSaveHandler:()=>eA});var Bv=class{constructor(e){if(!wm().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Bv.URL_SCHEME)&&(e=e.slice(Bv.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer);let r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=r,await Vv(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await Vv(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:nv(e)}}}};function Wv(e){return new class{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}async load(){let e=this.files[0],t=this.files.slice(1);return new Promise((n,r)=>{let a=new FileReader;a.onload=a=>{let s=JSON.parse(a.target.result),i=s.modelTopology;if(null==i)return void r(new Error("modelTopology field is missing from file "+e.name));0===t.length&&n({modelTopology:i});let o,l=s.weightsManifest;if(null==l)return void r(new Error("weightManifest field is missing from file "+e.name));try{o=this.checkManifestAndWeightFiles(l,t)}catch(d){return void r(d)}let u=[],h=[],c=[];l.forEach(e=>{e.paths.forEach(e=>{h.push(e),c.push(null)}),u.push(...e.weights)}),l.forEach(e=>{e.paths.forEach(e=>{let t=new FileReader;t.onload=t=>{let r=t.target.result,a=h.indexOf(e);if(c[a]=r,-1===c.indexOf(null)){let e={modelTopology:i,weightSpecs:u,weightData:ev(c),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(o[e])})})},a.onerror=t=>r(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),a.readAsText(e)})}checkManifestAndWeightFiles(e,t){let n=[],r=t.map(e=>tv(e.name)),a={};for(let s of e)s.paths.forEach(e=>{let s=tv(e);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);a[e]=t[r.indexOf(s)]});if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return a}}(e)}function jv(e,t,n,r){var a;Df(null!=(a=e)&&Array.isArray(a)&&a.length>0,()=>"promises must be a none empty array"),function(e,t){Df(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+e),Df(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+t),Df(t>=e,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`)}(n=null==n?0:n,r=null==r?1:r);let s=0;return Promise.all(e.map(a=>(a.then(a=>{let i=n+ ++s/e.length*(r-n);return t(i),a}),a)))}async function Hv(e,t){null==t&&(t={});let n=null==t.fetchFunc?wm().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await jv(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await jv(a,t.onProgress,.5,1)}async function Uv(e,t="",n,r){return Gv(e=>Hv(e,{requestInit:r}))(e,t,n)}function Gv(e){return async(t,n="",r)=>{let a=t.map(()=>!1),s={},i=null!=r?r.map(()=>!1):[],o=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let l=Kx["quantization"in e?e.quantization.dtype:e.dtype]*$f(e.shape),u=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),i[n]=!0)}):u(),o.push(e.name),n+=l})}),!i.every(e=>e)){let e=r.filter((e,t)=>!i[t]);throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${o.join(", ")}.`)}let l=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});let h=await e(u),c={},d=0;return l.forEach(e=>{let n=t[e].paths.length,r=0;for(let t=0;t<n;t++)r+=h[d+t].byteLength;let a=new ArrayBuffer(r),i=new Uint8Array(a),o=0;for(let t=0;t<n;t++){let e=new Uint8Array(h[d+t]);i.set(e,o),o+=e.byteLength}s[e].forEach(e=>{let t=Zx(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(let n in t)c[n]=t[n]}),d+=n}),c}}Bv.URL_SCHEME="downloads://",av.registerSaveRouter(e=>wm().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Bv.URL_SCHEME)?function(e="model"){return new Bv(e)}(e.slice(Bv.URL_SCHEME.length)):null);var qv=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Df("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=wm().platform.fetch,Df(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Df(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");let r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:nv(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){let e,t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(p){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}let n,r,a=e.modelTopology,s=e.weightsManifest,i=e.generatedBy,o=e.convertedBy,l=e.format,u=e.signature,h=e.userDefinedMetadata;if(null==a&&null==s)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);null!=s&&([n,r]=await this.loadWeights(s));let c={modelTopology:a,weightSpecs:n,weightData:r,generatedBy:i,convertedBy:o,format:l};null!=u&&(c.signature=u),null!=h&&(c.userDefinedMetadata=h);let d=e.modelInitializer;return d&&(c.modelInitializer=d),c}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),a=this.weightPathPrefix||n,s=[];for(let l of e)s.push(...l.weights);let i=[],o=[];for(let l of e)for(let e of l.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(o)),[s,ev(await Hv(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}};function Kv(e){return null!=e.match(qv.URL_SCHEME_REGEX)}qv.URL_SCHEME_REGEX=/^https?:\/\//;var Xv=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Kv(e)):Kv(e),n)return Zv(e,t)}return null};function Zv(e,t){return new qv(e,t)}function Yv(e,t){return Zv(e,t)}av.registerSaveRouter(Xv),av.registerLoadRouter(Xv);var Jv=class{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}};function Qv(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Jv(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jv({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jv({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function eA(e){return new class{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}(e)}var tA=Hx({matMul_:function(e,t,n=!1,r=!1){let a=Wx(e,"a","matMul"),s=Wx(t,"b","matMul");return[a,s]=Sx(a,s),Rx.runKernel(Um,{a:a,b:s},{transposeA:n,transposeB:r})}}),nA=Hx({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);let a={indices:Wx(e,"indices","oneHot","int32")};return Rx.runKernel(Ay,a,{depth:t,onValue:n,offValue:r})}}),rA=Hx({transpose_:function(e,t){let n=Wx(e,"x","transpose");return null==t&&(t=n.shape.map((e,t)=>t).reverse()),Df(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(e=>{Df(e>=0&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1?n.clone():Rx.runKernel(yb,{x:n},{perm:t})}});Hx({confusionMatrix_:function(e,t,n){let r=Wx(e,"labels","confusionMatrix"),a=Wx(t,"predictions","confusionMatrix");Df(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),Df(1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),Df(1===a.rank,()=>"Expected the rank of predictions to be 1, but got "+a.rank),Df(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),Df(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);let s=nA(Pv(r,"int32"),n),i=nA(Pv(a,"int32"),n),o=rA(s),l=tA(o,i);return Pv(l,"int32")}});var aA,sA={};function iA(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a){let t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=Nb(kb,Rx.backendName))return Rx.runKernel(kb,{pixels:e},{numChannels:t});let l,u,[h,c]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(i?l=e.getContext("2d").getImageData(0,0,h,c).data:r||n?l=e.data:(s||a||o)&&(null==aA&&(aA=document.createElement("canvas").getContext("2d")),aA.canvas.width=h,aA.canvas.height=c,aA.drawImage(e,0,0,h,c),l=aA.getImageData(0,0,h,c).data),4===t)u=new Int32Array(l);else{let e=h*c;u=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)u[n*t+e]=l[4*n+e]}return function(e,t,n){if(zf(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");let r=Lx(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Gx(e,t,r,n)}(u,[c,h,t],"int32")}async function oA(e,t=3){let n=null;if(wm().getBool("WRAP_TO_IMAGEBITMAP")&&function(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(r){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return iA(n,t)}async function lA(e,t){let n=Wx(e,"img","toPixels");if(!(e instanceof dx)){let e=n;n=Pv(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);let[r,a]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);let i=await n.data(),o="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){let e=[0,0,0,255];for(let r=0;r<s;r++){let t=i[u*s+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===s?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}let t=4*u;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){t.width=a,t.height=r;let e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}I(sA,{fromPixels:()=>uA,fromPixelsAsync:()=>oA,toPixels:()=>lA});var uA=Hx({fromPixels_:iA}),hA={};function cA(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===$f(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let a=t.shape,s=a[a.length-1],i=1;for(let c=0;c<a.length-1;++c)i*=a[c];let o=e.shape,l=a.slice();l.pop();let u=1;for(let c=s;c<n;++c)u*=o[c],l.push(o[c]);let h=[...hm(e.shape).map(e=>e/u),1].slice(0,s);return[l,i,u,h]}I(hA,{prepareAndValidate:()=>cA});var dA={};function pA(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(s+` updates.shape[${i+a}] (${n.shape[i+a]}) != shape[${i+a}] (${e[i+a]})`)}function fA(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}pA(n,t,e)}function mA(e,t,n){let r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length,i=1;for(let l=a;l<s;++l)i*=n[l];let o=a<1?1:a;return{sliceRank:a,numUpdates:$f(t.shape)/o,sliceSize:i,strides:[...hm(n.slice(0,a)),1],outputSize:$f(n)}}I(dA,{calculateShapes:()=>mA,validateInput:()=>fA,validateUpdateShape:()=>pA});var gA={};function yA(e,t,n){let r=e.shape.length;Df(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),Df(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)Df(t[a]+n[a]<=e.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}function bA(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function xA(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function vA(e,t,n,r){let a=[...e];for(let s=a.length;s<r.length;s++)a.push(1);for(let s=0;s<n;s++)0===s?a[t]=1:(a.splice(t,0,1),a.pop());return a}function AA(e,t,n){return n<=e?n:n-(t-1)}function wA(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function kA(e,t,n,r,a,s,i,o,l){let u=e.length,h=new Array(u),c=new Array(u),d=new Array(u);if(t.length&&n>0){let l=t[0],u=n+1;h=SA(i,l,u,r,e),c=IA(o,l,u,a,e),d=vA(s,l,u,e)}else for(let p=0;p<u;p++)h[p]=EA(i,r,s,e,p,l),c[p]=TA(o,a,s,e,p,l),d[p]=_A(s,p,l);return{begin:h,end:c,strides:d}}function SA(e,t,n,r,a){let s=[...a],i=wA(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=0;else{let a=AA(t,n,o),i=r[a];e&1<<a&&(i=0),s[o]=i}return s}function IA(e,t,n,r,a){let s=[...a],i=wA(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{let a=AA(t,n,o),i=r[a];e&1<<a&&(i=Number.MAX_SAFE_INTEGER),s[o]=i}for(let o=0;o<s.length;o++){let e=a[o];s[o]<0&&(s[o]+=e),s[o]=Cf(0,s[o],a[o])}return s}function _A(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function EA(e,t,n,r,a,s){let i=t[a];(e&1<<a||s&1<<a||null==i)&&(i=(n[a]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let o=r[a];return i<0&&(i+=o),i=Cf(0,i,o-1),i}function TA(e,t,n,r,a,s){let i=t[a],o=n[a]||1;(e&1<<a||s&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=r[a];return i<0&&(i+=l),i=o>0?Cf(0,i,l):Cf(-1,i,l-1),i}function CA(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function NA(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function MA(e,t,n){let r,a,s=e.shape.length;return r="number"==typeof t?[t,...new Array(s-1).fill(0)]:t.length<s?t.concat(new Array(s-t.length).fill(0)):t.slice(),r.forEach(e=>{Df(-1!==e,()=>"slice() does not support negative begin indexing.")}),a=null==n?new Array(s).fill(-1):"number"==typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n,a=a.map((t,n)=>t>=0?t:(Df(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,a]}function FA(e,t,n,r,a,s,i,o,l){let u=t.slice(),h=n.slice(),c=r;null==r&&(c=new Array(u.length));let d=bA(i);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==o)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");let p=e.length-u.length,f=bA(o),m=e.slice();f.forEach(e=>{u[e]=0,h[e]=1,m.splice(e,0,1)});let{begin:g,end:y,strides:b}=kA(m,d,p,u,h,c,a,s,i);u=g,h=y,c=b;let x=bA(l);x.forEach(e=>{h[e]=u[e]+1,c[e]=1});let v=xA(u,h,c),A=v.filter((e,t)=>-1===x.indexOf(t));return{nonStrided:c.every(e=>1===e),$begin:u,$end:h,$strides:c,size:v,newShape:m,outShape:A}}I(gA,{assertParamsValid:()=>yA,computeFlatOffset:()=>NA,computeOutShape:()=>xA,getNormalizedAxes:()=>kA,isSliceContinous:()=>CA,maskToAxes:()=>bA,parseSliceParams:()=>MA,sliceInfo:()=>FA,startForAxis:()=>EA,startIndicesWithElidedDims:()=>SA,stopForAxis:()=>TA,stopIndicesWithElidedDims:()=>IA,stridesForAxis:()=>_A,stridesWithElidedDims:()=>vA});var RA={};I(RA,{Serializable:()=>DA,SerializationMap:()=>OA,registerClass:()=>zA});var DA=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},OA=class{constructor(){this.classNameMap={}}static getMap(){return null==OA.instance&&(OA.instance=new OA),OA.instance}static register(e){OA.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function zA(e){Df(null!=e.className,()=>"Class being registered does not have the static className property defined."),Df("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),Df(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),OA.register(e)}function PA(){return Rx}function $A(){return Rx.memory()}function LA(e,t){return Rx.tidy(e,t)}function VA(e){Ex(e).forEach(e=>e.dispose())}function BA(e){return Rx.keep(e)}function WA(e,t,n=1){return Rx.registerBackend(e,t,n)}var jA=Hx({add_:function(e,t){let n=Wx(e,"a","add"),r=Wx(t,"b","add");return[n,r]=Sx(n,r),Rx.runKernel(Nm,{a:n,b:r})}}),HA=Hx({floorDiv_:function(e,t){let n=Wx(e,"a","floorDiv"),r=Wx(t,"b","floorDiv");return[n,r]=Sx(n,r),Rx.runKernel(Fg,{a:n,b:r})}}),UA=Hx({div_:function(e,t){let n=Wx(e,"a","div"),r=Wx(t,"b","div");return[n,r]=Sx(n,r),"int32"===n.dtype&&"int32"===r.dtype?HA(n,r):Rx.runKernel(xg,{a:n,b:r},{})}}),GA=Hx({mul_:function(e,t){let n=Wx(e,"a","mul"),r=Wx(t,"b","mul");return[n,r]=Sx(n,r),Rx.runKernel(fy,{a:n,b:r})}}),qA=Hx({abs_:function(e){let t=Wx(e,"x","abs");return Rx.runKernel("complex64"===t.dtype?Jm:Em,{x:t})}}),KA=Hx({acos_:function(e){let t={x:Wx(e,"x","acos")};return Rx.runKernel(Tm,t)}}),XA=Hx({acosh_:function(e){let t={x:Wx(e,"x","acosh")};return Rx.runKernel(Cm,t)}}),ZA=Hx({addN_:function(e){Df(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),Df(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+e.length);let t=e.map((e,t)=>Wx(e,"tensors"+t,"addN")),n=t[0];return t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!Vf(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),Rx.runKernel(Mm,t)}}),YA=Hx({all_:function(e,t=null,n=!1){let r={x:Wx(e,"x","all","bool")};return Rx.runKernel(Fm,r,{axis:t,keepDims:n})}}),JA=Hx({any_:function(e,t=null,n=!1){let r={x:Wx(e,"x","any","bool")};return Rx.runKernel(Rm,r,{axis:t,keepDims:n})}}),QA=Hx({argMax_:function(e,t=0){let n={x:Wx(e,"x","argMax")};return Rx.runKernel(Dm,n,{axis:t})}}),ew=Hx({argMin_:function(e,t=0){let n={x:Wx(e,"x","argMin")};return Rx.runKernel(Om,n,{axis:t})}}),tw=Hx({asin_:function(e){let t={x:Wx(e,"x","asin")};return Rx.runKernel(zm,t)}}),nw=Hx({asinh_:function(e){let t={x:Wx(e,"x","asinh")};return Rx.runKernel(Pm,t)}}),rw=Hx({atan_:function(e){let t={x:Wx(e,"x","atan")};return Rx.runKernel($m,t)}}),aw=Hx({atan2_:function(e,t){let n=Wx(e,"a","atan2"),r=Wx(t,"b","atan2");return[n,r]=Sx(n,r),Rx.runKernel(Vm,{a:n,b:r})}}),sw=Hx({atanh_:function(e){let t={x:Wx(e,"x","atanh")};return Rx.runKernel(Lm,t)}});function iw(e,t,n,r,a="NHWC",s){return uw(e,[...t,e[3]],n,s,r,null,null,bw(a))}function ow(e,t,n,r,a,s,i="channelsLast"){let o,[l,u]=dw(t);if("channelsLast"===i)o=[l,u,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);o=[l,u,e[1],e[1]]}return uw(e,o,n,r,a,s,!1,i)}function lw(e,t,n,r,a,s,i="NDHWC"){let o,l,[u,h,c]=pw(t);if("NDHWC"===i)l="channelsLast",o=[u,h,c,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);l="channelsFirst",o=[u,h,c,e[1],e[1]]}return hw(e,o,n,r,a,!1,l,s)}function uw(e,t,n,r,a,s,i=!1,o="channelsLast"){let[l,u,h,c]=[-1,-1,-1,-1];if("channelsLast"===o)[l,u,h,c]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[l,c,u,h]=e}let d,[p,f,,m]=t,[g,y]=dw(n),[b,x]=dw(r),v=fw(p,b),A=fw(f,x),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,r,a,s,i,o,l){let u,h,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let a=function(e,t,n,r,a){null==r&&(r=cw(e,t,n));let s=e[1];return[mw((e[0]-t+2*r)/n+1,a),mw((s-t+2*r)/n+1,a)]}([t,n],s,r,e,o);h=a[0],c=a[1]}else if("same"===e){h=Math.ceil(t/r),c=Math.ceil(n/a);let e=Math.max(0,(h-1)*r+s-t),o=Math.max(0,(c-1)*a+i-n),l=Math.floor(e/2),d=e-l,p=Math.floor(o/2);u={top:l,bottom:d,left:p,right:o-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-s+1)/r),c=Math.ceil((n-i+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);{let d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},h=mw((t-s+d+p)/r+1,o),c=mw((n-i+f+m)/a+1,o)}}return{padInfo:u,outHeight:h,outWidth:c}}(a,u,h,g,y,v,A,s,o),I=i?m*c:m;return"channelsFirst"===o?d=[l,I,k,S]:"channelsLast"===o&&(d=[l,k,S,I]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:h,inChannels:c,outHeight:k,outWidth:S,outChannels:I,padInfo:w,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:A,dilationHeight:b,dilationWidth:x,inShape:e,outShape:d,filterShape:t}}function hw(e,t,n,r,a,s=!1,i="channelsLast",o){let[l,u,h,c,d]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,u,h,c,d]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);[l,d,u,h,c]=e}let p,[f,m,g,,y]=t,[b,x,v]=pw(n),[A,w,k]=pw(r),S=fw(f,A),I=fw(m,w),_=fw(g,k),{padInfo:E,outDepth:T,outHeight:C,outWidth:N}=function(e,t,n,r,a,s,i,o,l,u,h){let c,d,p,f;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let s=function(e,t,n,r,a,s){null==a&&(a=cw(e,t,r));let i=e[1],o=e[2];return[mw((e[0]-t+2*a)/r+1,s),mw((i-t+2*a)/r+1,s),mw((o-t+2*a)/r+1,s),1]}([t,n,r,1],o,0,a,e,h);d=s[0],p=s[1],f=s[2]}else if("same"===e){d=Math.ceil(t/a),p=Math.ceil(n/s),f=Math.ceil(r/i);let e=(d-1)*a+o-t,h=(p-1)*s+l-n,m=(f-1)*i+u-r,g=Math.floor(e/2),y=e-g,b=Math.floor(h/2),x=h-b,v=Math.floor(m/2);c={top:b,bottom:x,left:v,right:m-v,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-o+1)/a),p=Math.ceil((n-l+1)/s),f=Math.ceil((r-u+1)/i)}return{padInfo:c,outDepth:d,outHeight:p,outWidth:f}}(a,u,h,c,b,x,v,S,I,_,o),M=s?y*d:y;return"channelsFirst"===i?p=[l,M,T,C,N]:"channelsLast"===i&&(p=[l,T,C,N,M]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:h,inWidth:c,inChannels:d,outDepth:T,outHeight:C,outWidth:N,outChannels:M,padInfo:E,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:f,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:I,effectiveFilterWidth:_,dilationDepth:A,dilationHeight:w,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function cw(e,t,n,r=1){let a=fw(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function dw(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function pw(e){return"number"==typeof e?[e,e,e]:e}function fw(e,t){return t<=1?e:e+(e-1)*(t-1)}function mw(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function gw(e){let[t,n,r]=dw(e);return 1===t&&1===n&&1===r}function yw(e,t){return gw(e)||gw(t)}function bw(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}var xw=Hx({reshape_:function(e,t){let n={x:Wx(e,"x","reshape","string_or_numeric")};return Rx.runKernel(My,n,{shape:t})}}),vw=Hx({avgPool_:function(e,t,n,r,a){let s=Wx(e,"x","avgPool","float32");Df(yw(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let i=s,o=!1;3===s.rank&&(o=!0,i=xw(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Df(4===i.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),null!=a&&Df(Bf(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let l=Rx.runKernel(Bm,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return l=Pv(l,s.dtype),o?xw(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Aw=Hx({avgPool3d_:function(e,t,n,r,a,s="NDHWC"){let i=Wx(e,"x","avgPool3d","float32"),o=i,l=!1;4===i.rank&&(l=!0,o=xw(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Df(5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Df("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&Df(Bf(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let u=Rx.runKernel(jm,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return u=Pv(u,o.dtype),l?xw(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),ww=Hx({concat_:function(e,t=0){Df(e.length>=1,()=>"Pass at least one tensor to concat");let n=jx(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length?$v(n[0]):Rx.runKernel(Qm,n,{axis:t})}}),kw=Hx({sigmoid_:function(e){let t={x:Wx(e,"x","sigmoid")};return Rx.runKernel(qy,t)}}),Sw=Hx({slice_:function(e,t,n){let r=Wx(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return Rx.runKernel(jy,{x:r},{begin:t,size:n})}}),Iw=Hx({tanh_:function(e){let t={x:Wx(e,"x","tanh")};return Rx.runKernel(pb,t)}});Hx({basicLSTMCell_:function(e,t,n,r,a,s){let i=Wx(e,"forgetBias","basicLSTMCell"),o=Wx(t,"lstmKernel","basicLSTMCell"),l=Wx(n,"lstmBias","basicLSTMCell"),u=Wx(r,"data","basicLSTMCell"),h=Wx(a,"c","basicLSTMCell"),c=Wx(s,"h","basicLSTMCell"),d=ww([u,c],1),p=tA(d,o),f=jA(p,l),m=f.shape[1]/4,g=[f.shape[0],m],y=Sw(f,[0,0],g),b=Sw(f,[0,m],g),x=Sw(f,[0,2*m],g),v=Sw(f,[0,3*m],g),A=jA(GA(kw(y),Iw(b)),GA(h,kw(jA(i,x))));return[A,GA(Iw(A),kw(v))]}});var _w=Hx({batchToSpaceND_:function(e,t,n){let r=Wx(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);return Df(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),Df(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),Df(r.shape[0]%a==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`),Rx.runKernel(Gm,{x:r},{blockShape:t,crops:n})}});function Ew(e){let t;return t=0===e.rank||1===e.rank?xw(e,[1,1,1,e.size]):2===e.rank?xw(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?xw(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}var Tw=Hx({batchNorm_:function(e,t,n,r,a,s){null==s&&(s=.001);let i,o,l=Wx(e,"x","batchNorm"),u=Wx(t,"mean","batchNorm"),h=Wx(n,"variance","batchNorm");null!=a&&(i=Wx(a,"scale","batchNorm")),null!=r&&(o=Wx(r,"offset","batchNorm")),Df(u.rank===h.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Df(null==o||u.rank===o.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Df(null==i||u.rank===i.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let c={x:Ew(l),scale:i,offset:o,mean:u,variance:h},d=Rx.runKernel(Rg,c,{varianceEpsilon:s});return xw(d,l.shape)}}),Cw=Hx({batchNorm2d_:function(e,t,n,r,a,s){let i,o,l=Wx(e,"x","batchNorm"),u=Wx(t,"mean","batchNorm"),h=Wx(n,"variance","batchNorm");return null!=a&&(i=Wx(a,"scale","batchNorm")),null!=r&&(o=Wx(r,"offset","batchNorm")),Df(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),Df(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),Df(2===h.rank||1===h.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${h.rank}.`),null!=i&&Df(2===i.rank||1===i.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${i.rank}.`),null!=o&&Df(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${o.rank}.`),Tw(l,u,h,o,i,s)}}),Nw=Hx({batchNorm3d_:function(e,t,n,r,a,s){let i,o,l=Wx(e,"x","batchNorm"),u=Wx(t,"mean","batchNorm"),h=Wx(n,"variance","batchNorm");return null!=a&&(i=Wx(a,"scale","batchNorm")),null!=r&&(o=Wx(r,"offset","batchNorm")),Df(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),Df(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),Df(3===h.rank||1===h.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${h.rank}.`),null!=i&&Df(3===i.rank||1===i.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${i.rank}.`),null!=o&&Df(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${o.rank}.`),Tw(l,u,h,o,i,s)}}),Mw=Hx({batchNorm4d_:function(e,t,n,r,a,s){let i,o,l=Wx(e,"x","batchNorm"),u=Wx(t,"mean","batchNorm"),h=Wx(n,"variance","batchNorm");return null!=a&&(i=Wx(a,"scale","batchNorm")),null!=r&&(o=Wx(r,"offset","batchNorm")),Df(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),Df(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),Df(4===h.rank||1===h.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${h.rank}.`),null!=i&&Df(4===i.rank||1===i.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${i.rank}.`),null!=o&&Df(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${o.rank}.`),Tw(l,u,h,o,i,s)}}),Fw=Hx({bincount_:function(e,t,n){let r=Wx(e,"x","bincount"),a=Wx(t,"weights","bincount");return Df("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got "+r.dtype),Df(n>=0,()=>`size must be non-negative, but got ${n}.`),Df(a.size===r.size||0===a.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`),Rx.runKernel(qm,{x:r,weights:a},{size:n})}}),Rw=Hx({broadcastTo_:function(e,t){let n=Wx(e,"broadcastTo","x"),r=n.shape;if(t.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=xw(n,e)}let a=n.shape,s=Array.from(t);for(let i=t.length-1;i>=0;i--)if(a[i]===t[i])s[i]=1;else if(1!==n.shape[i])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);return 0===s.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length?$v(n):Rx.runKernel(fb,{x:n},{reps:s})}}),Dw=Hx({ceil_:function(e){let t={x:Wx(e,"x","ceil")};return Rx.runKernel(Xm,t)}}),Ow=Hx({clipByValue_:function(e,t,n){let r=Wx(e,"x","clipByValue");return Df(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),Rx.runKernel(Zm,{x:r},{clipValueMin:t,clipValueMax:n})}}),zw=Hx({concat1d_:function(e){return ww(e,0)}}),Pw=Hx({concat2d_:function(e,t){return ww(e,t)}}),$w=Hx({concat3d_:function(e,t){return ww(e,t)}}),Lw=Hx({concat4d_:function(e,t){return ww(e,t)}}),Vw=Hx({conv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){let o=Wx(e,"x","conv2d"),l=Wx(t,"filter","conv2d"),u=o,h=!1;3===o.rank&&(h=!0,u=xw(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Df(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),Df(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),null!=i&&Df(Bf(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let c="NHWC"===a?u.shape[3]:u.shape[1];Df(c===l.shape[2],()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${l.shape[2]}.`),Df(yw(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let d=Rx.runKernel(eg,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?xw(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Bw=Hx({conv1d_:function(e,t,n,r,a="NWC",s=1,i){let o=Wx(e,"x","conv1d"),l=Wx(t,"filter","conv1d"),u=o,h=!1;2===o.rank&&(h=!0,u=xw(o,[1,o.shape[0],o.shape[1]])),Df(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),Df(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),null!=i&&Df(Bf(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),Df(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Df(yw(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),Df("NWC"===a,()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);let c=xw(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=xw(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Vw(d,c,[1,n],r,"NHWC",[1,s],i);return xw(p,h?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),Ww=Hx({conv2DBackpropInput_:function(e,t,n,r,a,s="NHWC",i){Df(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;3===t.rank&&(u=!0,l=xw(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),Df(4===o.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),Df(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),Df(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);let h="NHWC"===s?o[3]:o[1],c="NHWC"===s?l.shape[3]:l.shape[1];Df(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),Df(c===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[3]}.`),null!=i&&Df(Bf(a),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`);let d=Rx.runKernel(ng,{dy:l,filter:n},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,inputShape:o});return u?xw(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),jw=Hx({conv2dTranspose_:function(e,t,n,r,a,s){let i=Wx(e,"x","conv2dTranspose"),o=Wx(t,"filter","conv2dTranspose");return Ww(n,i,o,r,a,"NHWC",s)}}),Hw=Hx({conv3d_:function(e,t,n,r,a="NDHWC",s=[1,1,1]){let i=Wx(e,"x","conv3d"),o=Wx(t,"filter","conv3d"),l=i,u=!1;4===i.rank&&(u=!0,l=xw(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Df(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Df(5===o.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),Df(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),Df(yw(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Df("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);let h=Rx.runKernel(rg,{x:l,filter:o},{strides:n,pad:r,dataFormat:a,dilations:s});return u?xw(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Uw=Hx({conv3DBackpropInput_:function(e,t,n,r,a){Df(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,i=t,o=!1;4===t.rank&&(o=!0,i=xw(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);let l=s[4],u=i.shape[4];Df(5===s.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),Df(5===i.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank),Df(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),Df(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),Df(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);let h=Rx.runKernel(sg,{dy:i,filter:n},{pad:a,strides:r,inputShape:s});return o?xw(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Gw=Hx({conv3dTranspose_:function(e,t,n,r,a){let s=Wx(e,"x","conv3dTranspose"),i=Wx(t,"filter","conv3dTranspose");return Uw(n,s,i,r,a)}}),qw=Hx({cos_:function(e){let t={x:Wx(e,"x","cos")};return Rx.runKernel(ig,t)}}),Kw=Hx({cosh_:function(e){let t={x:Wx(e,"x","cosh")};return Rx.runKernel(og,t)}}),Xw=Hx({cumsum_:function(e,t=0,n=!1,r=!1){let a={x:Wx(e,"x","cumsum")};return Rx.runKernel(lg,a,{axis:t,exclusive:n,reverse:r})}}),Zw=Hx({denseBincount_:function(e,t,n,r=!1){let a=Wx(e,"x","denseBincount"),s=Wx(t,"weights","denseBincount");return Df("int32"===a.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+a.dtype),Df(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),Df(n>=0,()=>`size must be non-negative, but got ${n}.`),Df(s.size===a.size||0===s.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`),Rx.runKernel(hg,{x:a,weights:s},{size:n,binaryOutput:r})}}),Yw=Hx({depthToSpace_:function(e,t,n="NHWC"){let r=Wx(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return Df(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t}  for depthToSpace with input shape\n    ${r.shape}`),Df(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`),Df(i%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`),Rx.runKernel(cg,{x:r},{blockSize:t,dataFormat:n})}}),Jw=Hx({depthwiseConv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){let o=Wx(e,"x","depthwiseConv2d"),l=Wx(t,"filter","depthwiseConv2d"),u=o,h=!1;3===o.rank&&(h=!0,u=xw(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Df(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),Df(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),Df(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),null!=i&&Df(Bf(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let c=Rx.runKernel(dg,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?xw(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});Hx({diag_:function(e){let t={x:Wx(e,"x","diag")};return Rx.runKernel(mg,t)}});var Qw=Hx({dilation2d_:function(e,t,n,r,a=[1,1],s="NHWC"){let i=Wx(e,"x","dilation2d"),o=Wx(t,"filter","dilation2d");Df(3===i.rank||4===i.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),Df(3===o.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),Df("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+s);let l=i,u=!1;3===i.rank&&(l=xw(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);let h=Rx.runKernel(gg,{x:l,filter:o},{strides:n,pad:r,dilations:a});return u?xw(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});function ek(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let s=n-1-a,i=e[s]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(s)}return r}function tk(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],s=t.length-r-1,i=t[s];(null==a||1===a&&i>1)&&n.unshift(s)}return n}function nk(e,t){let n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);n.unshift(r)}}return n}var rk=Hx({equal_:function(e,t){let n=Wx(e,"a","equal","string_or_numeric"),r=Wx(t,"b","equal","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(Sg,{a:n,b:r})}}),ak=Hx({where_:function(e,t,n){let r=Wx(t,"a","where"),a=Wx(n,"b","where"),s=Wx(e,"condition","where","bool"),i=nk(nk(s.shape,r.shape),a.shape),o=Rw(s,i),l=Rw(r,i),u=Rw(a,i);return Rx.runKernel(By,{condition:o,t:l,e:u})}}),sk=Hx({zerosLike_:function(e){let t={x:Wx(e,"x","zerosLike")};return Rx.runKernel(Ab,t)}}),ik=Hx({divNoNan_:function(e,t){let n=Wx(e,"a","div"),r=Wx(t,"b","div");[n,r]=Sx(n,r);let a=UA(n,r),s=sk(a),i=rk(r,s);return ak(i,s,a)}}),ok=Hx({dot_:function(e,t){let n=Wx(e,"t1","dot"),r=Wx(t,"t2","dot");Df(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(Df(a===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`),1===n.rank&&1===r.rank){let e=xw(n,[1,-1]),t=xw(r,[-1,1]),a=tA(e,t);return xw(a,[])}if(1===n.rank&&2===r.rank){let e=xw(n,[1,-1]),t=xw(r,[r.shape[0],r.shape[1]]),a=tA(e,t);return xw(a,[a.size])}if(2===n.rank&&1===r.rank){let e=xw(r,[-1,1]),t=tA(n,e);return xw(t,[t.size])}{let e=xw(r,[r.shape[0],r.shape[1]]);return tA(n,e)}}}),lk=Hx({einsum_:function(e,...t){let n=t.map((e,t)=>Wx(e,"tensors"+t,"einsum"));return Rx.runKernel(vg,n,{equation:e})}}),uk=Hx({elu_:function(e){let t={x:Wx(e,"x","elu")};return Rx.runKernel(Ag,t)}}),hk=Hx({erf_:function(e){let t=Wx(e,"x","erf");return Df("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=Pv(t,"float32")),Rx.runKernel(kg,{x:t})}}),ck=Hx({exp_:function(e){let t={x:Wx(e,"x","exp")};return Rx.runKernel(Ig,t)}}),dk=Hx({expandDims_:function(e,t=0){let n=Wx(e,"x","expandDims","string_or_numeric");return Df(t<=n.rank,()=>"Axis must be <= rank of the tensor"),Rx.runKernel(_g,{input:n},{dim:t})}}),pk=Hx({expm1_:function(e){let t={x:Wx(e,"x","expm1")};return Rx.runKernel(Eg,t)}}),fk=Hx({tile_:function(e,t){let n=Wx(e,"x","tile","string_or_numeric");return Df(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`),Rx.runKernel(fb,{x:n},{reps:t})}}),mk=Hx({eye_:function(e,t,n,r="float32"){null==t&&(t=e);let a=zv([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)a.set(1,o,o);let i=xw(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return fk(dk(i,0),[n[0],1,1]);if(2===n.length)return fk(dk(dk(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return fk(dk(dk(dk(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});function gk(e,t,n){return Rx.runKernel(Cg,{},{shape:e,value:t,dtype:n})}var yk=Hx({floor_:function(e){let t={x:Wx(e,"x","floor")};return Rx.runKernel(Mg,t)}}),bk=Hx({gather_:function(e,t,n=0,r=0){let a=Wx(e,"x","gather"),s=Wx(t,"indices","gather","int32");return Rx.runKernel(Dg,{x:a,indices:s},{axis:n,batchDims:r})}}),xk=Hx({greater_:function(e,t){let n=Wx(e,"a","greater","string_or_numeric"),r=Wx(t,"b","greater","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(zg,{a:n,b:r})}}),vk=Hx({greaterEqual_:function(e,t){let n=Wx(e,"a","greaterEqual","string_or_numeric"),r=Wx(t,"b","greaterEqual","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(Pg,{a:n,b:r})}}),Ak=Hx({imag_:function(e){let t={input:Wx(e,"input","imag")};return Rx.runKernel(Vg,t)}}),wk=Hx({isFinite_:function(e){let t={x:Wx(e,"x","isFinite")};return Rx.runKernel(Bg,t)}}),kk=Hx({isInf_:function(e){let t={x:Wx(e,"x","isInf")};return Rx.runKernel(Wg,t)}}),Sk=Hx({isNaN_:function(e){let t={x:Wx(e,"x","isNaN")};return Rx.runKernel(jg,t)}}),Ik=Hx({leakyRelu_:function(e,t=.2){let n={x:Wx(e,"x","leakyRelu")};return Rx.runKernel(Hg,n,{alpha:t})}}),_k=Hx({less_:function(e,t){let n=Wx(e,"a","less","string_or_numeric"),r=Wx(t,"b","less","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(Ug,{a:n,b:r})}}),Ek=Hx({lessEqual_:function(e,t){let n=Wx(e,"a","lessEqual","string_or_numeric"),r=Wx(t,"b","lessEqual","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(Gg,{a:n,b:r})}});function Tk(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Rx.runKernel(qg,{},{start:e,stop:t,num:n})}var Ck=Hx({localResponseNormalization_:function(e,t=5,n=1,r=1,a=.5){let s=Wx(e,"x","localResponseNormalization");Df(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),Df(Bf(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=s,o=!1;3===s.rank&&(o=!0,i=xw(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let l=Rx.runKernel(Qg,{x:i},{depthRadius:t,bias:n,alpha:r,beta:a});return o?xw(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Nk=Hx({log_:function(e){let t={x:Wx(e,"x","log")};return Rx.runKernel(Kg,t)}}),Mk=Hx({log1p_:function(e){let t={x:Wx(e,"x","log1p")};return Rx.runKernel(Xg,t)}});function Fk(e){return Rx.customGrad(e)}var Rk=Hx({neg_:function(e){let t={x:Wx(e,"x","neg")};return Rx.runKernel(my,t)}}),Dk=Hx({softplus_:function(e){let t={x:Wx(e,"x","softplus")};return Rx.runKernel(Ky,t)}}),Ok=Hx({logSigmoid_:function(e){let t=Wx(e,"x","logSigmoid");return Fk(e=>({value:Rk(Dk(Rk(e))),gradFunc:t=>GA(t,kw(Rk(e)))}))(t)}}),zk=Hx({max_:function(e,t=null,n=!1){let r={x:Wx(e,"x","max")};return Rx.runKernel(ty,r,{reductionIndices:t,keepDims:n})}}),Pk=Hx({sub_:function(e,t){let n=Wx(e,"a","sub"),r=Wx(t,"b","sub");return[n,r]=Sx(n,r),Rx.runKernel(cb,{a:n,b:r})}}),$k=Hx({sum_:function(e,t=null,n=!1){let r=Wx(e,"x","sum");return"bool"===r.dtype&&(r=Pv(r,"int32")),Rx.runKernel(Zy,{x:r},{axis:t,keepDims:n})}}),Lk=Hx({logSoftmax_:function(e,t=-1){let n=Wx(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Fk((e,n)=>{let r=zk(e,t,!0),a=Pk(e,r),s=Pk(Pv(a,"float32"),Nk($k(ck(a),t,!0)));return n([s]),{value:s,gradFunc:(e,n)=>{let[r]=n,a=ck(r);return Pk(e,GA($k(e,t,!0),a))}}})(n)}});function Vk(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Bk(e,t,n){let r=e.length+t.length,a=[],s=0,i=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[s++]):a.push(t[i++]);return a}function Wk(e,t){let n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function jk(e,t){return Bk(e,t.map(e=>1),t)}function Hk(e,t,n){Df(Vk(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Uk(e,t){if(Vk(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function Gk(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function qk(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}var Kk=Hx({logSumExp_:function(e,t=null,n=!1){let r=Wx(e,"x","logSumExp"),a=Kf(t,r.shape),s=zk(r,a,!0),i=Pk(r,s),o=ck(i),l=$k(o,a),u=Nk(l),h=jA(xw(s,u.shape),u);if(n){let e=jk(h.shape,a);return xw(h,e)}return h}}),Xk=Hx({logicalAnd_:function(e,t){let n=Wx(e,"a","logicalAnd","bool"),r=Wx(t,"b","logicalAnd","bool");return nk(n.shape,r.shape),Rx.runKernel(Zg,{a:n,b:r})}}),Zk=Hx({logicalNot_:function(e){let t={x:Wx(e,"x","logicalNot","bool")};return Rx.runKernel(Yg,t)}}),Yk=Hx({logicalOr_:function(e,t){let n=Wx(e,"a","logicalOr","bool"),r=Wx(t,"b","logicalOr","bool");return nk(n.shape,r.shape),Rx.runKernel(Jg,{a:n,b:r})}}),Jk=Hx({logicalXor_:function(e,t){let n=Wx(e,"a","logicalXor","bool"),r=Wx(t,"b","logicalXor","bool");return nk(n.shape,r.shape),Xk(Yk(e,t),Zk(Xk(e,t)))}}),Qk=Hx({maxPool_:function(e,t,n,r,a){let s=Wx(e,"x","maxPool"),i=s,o=!1;3===s.rank&&(o=!0,i=xw(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Df(4===i.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),Df(yw(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),null!=a&&Df(Bf(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let l=Rx.runKernel(ry,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return o?xw(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),eS=Hx({maxPool3d_:function(e,t=[1,1,1],n,r,a,s="NDHWC"){let i=Wx(e,"x","maxPool3d"),o=i,l=!1;4===i.rank&&(l=!0,o=xw(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Df(5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Df("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&Df(Bf(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let u=Rx.runKernel(sy,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return l?xw(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),tS=Hx({maxPoolWithArgmax_:function(e,t,n,r,a=!1){let s={x:Wx(e,"x","maxPoolWithArgmax")},i=Rx.runKernel(oy,s,{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:i[0],indexes:i[1]}}}),nS=Hx({maximum_:function(e,t){let n=Wx(e,"a","maximum"),r=Wx(t,"b","maximum");return[n,r]=Sx(n,r),"bool"===n.dtype&&(n=Pv(n,"int32"),r=Pv(r,"int32")),nk(n.shape,r.shape),Rx.runKernel(ny,{a:n,b:r})}}),rS=Hx({mean_:function(e,t=null,n=!1){let r={x:Wx(e,"x","mean")};return Rx.runKernel(ly,r,{axis:t,keepDims:n})}});function aS(e,t="float32"){if("complex64"===t){let t=aS(e,"float32"),n=aS(e,"float32");return Ux(t,n)}let n=fm($f(e),t);return Rx.makeTensor(n,e,t)}function sS(e,t="float32"){if("complex64"===t){let t=sS(e,"float32"),n=aS(e,"float32");return Ux(t,n)}let n=pm($f(e),t);return Rx.makeTensor(n,e,t)}var iS=Hx({min_:function(e,t=null,n=!1){let r={x:Wx(e,"x","min")};return Rx.runKernel(uy,r,{axis:t,keepDims:n})}}),oS=Hx({minimum_:function(e,t){let n=Wx(e,"a","minimum"),r=Wx(t,"b","minimum");return[n,r]=Sx(n,r),"bool"===n.dtype&&(n=Pv(n,"int32"),r=Pv(r,"int32")),nk(n.shape,r.shape),Rx.runKernel(hy,{a:n,b:r})}}),lS=Hx({mirrorPad_:function(e,t,n){Df("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=Wx(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Df(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let a="reflect"===n?1:0;for(let s=0;s<r.rank;s++)Df(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),Df(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);return Rx.runKernel(cy,{x:r},{paddings:t,mode:n})}}),uS=Hx({mod_:function(e,t){let n=Wx(e,"a","mod"),r=Wx(t,"b","mod");return[n,r]=Sx(n,r),Rx.runKernel(dy,{a:n,b:r})}}),hS=Hx({square_:function(e){let t=Wx(e,"x","square");return Rx.runKernel("Square",{x:t},{})}}),cS=Hx({moments_:function(e,t=null,n=!1){let r=Kf(t,(e=Wx(e,"x","moments")).shape),a=rS(e,r,n),s=a.shape;n||(s=jk(a.shape,r));let i=hS(Pk(Pv(e,"float32"),xw(a,s)));return{mean:a,variance:rS(i,r,n)}}});Hx({multiRNNCell_:function(e,t,n,r){let a=Wx(t,"data","multiRNNCell"),s=jx(n,"c","multiRNNCell"),i=jx(r,"h","multiRNNCell"),o=a,l=[];for(let c=0;c<e.length;c++){let t=e[c](o,s[c],i[c]);l.push(t[0]),l.push(t[1]),o=t[1]}let u=[],h=[];for(let c=0;c<l.length;c+=2)u.push(l[c]),h.push(l[c+1]);return[u,h]}});var dS=Hx({multinomial_:function(e,t,n,r=!1){let a=Wx(e,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();let o={logits:1===i?xw(a,[1,-1]):a},l=Rx.runKernel(py,o,{numSamples:t,seed:n,normalized:r});return 1===i?xw(l,[l.size]):l}}),pS=Hx({notEqual_:function(e,t){let n=Wx(e,"a","notEqual","string_or_numeric"),r=Wx(t,"b","notEqual","string_or_numeric");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(gy,{a:n,b:r})}}),fS=Hx({onesLike_:function(e){let t={x:Wx(e,"x","onesLike")};return Rx.runKernel(vy,t)}});Hx({outerProduct_:function(e,t){let n=Wx(e,"v1","outerProduct"),r=Wx(t,"v2","outerProduct");Df(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let a=xw(n,[-1,1]),s=xw(r,[1,-1]);return tA(a,s)}});var mS=Hx({pad_:function(e,t,n=0){let r=Wx(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Rx.runKernel(ky,{x:r},{paddings:t,constantValue:n})}});Hx({pad1d_:function(e,t,n=0){return Df(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),mS(e,[t],n)}}),Hx({pad2d_:function(e,t,n=0){return Df(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),mS(e,t,n)}}),Hx({pad3d_:function(e,t,n=0){return Df(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),mS(e,t,n)}}),Hx({pad4d_:function(e,t,n=0){return Df(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),mS(e,t,n)}});var gS=Hx({spaceToBatchND_:function(e,t,n){let r=Wx(e,"x","spaceToBatchND");return Df(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),Df(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),Df(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),Rx.runKernel(Yy,{x:r},{blockShape:t,paddings:n})}}),yS=Hx({pool_:function(e,t,n,r,a,s){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");let i=Wx(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=xw(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Df(yw(s,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`);let u,h=ow(o.shape,t,s,a,r),c=[h.dilationHeight,h.dilationWidth];u="same"===r?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),a=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],a[t]])}([h.filterHeight,h.filterWidth],c):[[0,0],[0,0]];let d=1===c[0]&&1===c[1],[p,f]=function(e,t,n){let r=n.map(e=>e[0]),a=n.map(e=>e[1]),s=e.concat(r,a),i=t.map((e,t)=>(e-s[t]%e)%e),o=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[r[t],o[t]]),t.map((e,t)=>[0,i[t]])]}([h.inHeight,h.inWidth],c,u),m=d?r:"valid",g=d?o:gS(o,c,p),y=("avg"===n?()=>vw(g,t,s,m):()=>Qk(g,t,s,m))(),b=d?y:_w(y,c,f);return l?xw(b,[b.shape[1],b.shape[2],b.shape[3]]):b}}),bS=Hx({pow_:function(e,t){let n=Wx(e,"base","pow"),r=Wx(t,"exp","pow");return[n,r]=Sx(n,r),Rx.runKernel(Sy,{a:n,b:r})}}),xS=Hx({prelu_:function(e,t){let n=Wx(e,"x","prelu"),r=Wx(t,"alpha","prelu");return Rx.runKernel(Iy,{x:n,alpha:r})}}),vS=Hx({prod_:function(e,t=null,n=!1){let r=Wx(e,"x","prod");return"bool"===r.dtype&&(r=Pv(r,"int32")),Rx.runKernel(_y,{x:r},{axis:t,keepDims:n})}});Hx({rand_:function(e,t,n){let r=$f(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(let s=0;s<r;s++)a[s]=t();return Rx.makeTensor(a,e,n)}});var AS=_(P()),wS=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let s=a||Math.random();this.random=AS.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);let i=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*a*i,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}};Hx({randomGamma_:function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);let s=new class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=AS.alea(a.toString()),this.randn=new wS(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}(t,n,r,a),i=zv(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}});var kS=Hx({randomNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);let s=new wS(t,n,r,!1,a),i=zv(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),SS=Hx({randomUniform_:function(e,t=0,n=1,r="float32",a){let s=zv(e,r),i=new class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=AS.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}(t,n,null,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});function IS(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return Rx.runKernel(Ey,{},{start:e,stop:t,step:n,dtype:r})}var _S=Hx({real_:function(e){let t={input:Wx(e,"input","real")};return Rx.runKernel(Ty,t)}}),ES=Hx({reciprocal_:function(e){let t={x:Wx(e,"x","reciprocal")};return Rx.runKernel(Cy,t)}}),TS=Hx({relu_:function(e){let t={x:Wx(e,"x","relu")};return Rx.runKernel(Ny,t)}}),CS=Hx({relu6_:function(e){let t={x:Wx(e,"x","relu6")};return Rx.runKernel(zy,t)}}),NS=Hx({reverse_:function(e,t){let n={x:Wx(e,"x","reverse")};return Rx.runKernel(Py,n,{dims:t})}});Hx({reverse1d_:function(e){let t=Wx(e,"x","reverse");return Df(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),NS(t,0)}}),Hx({reverse2d_:function(e,t){let n=Wx(e,"x","reverse");return Df(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),NS(n,t)}}),Hx({reverse3d_:function(e,t){let n=Wx(e,"x","reverse");return Df(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),NS(n,t)}}),Hx({reverse4d_:function(e,t){let n=Wx(e,"x","reverse");return Df(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),NS(n,t)}});var MS=Hx({round_:function(e){let t={x:Wx(e,"x","round")};return Rx.runKernel($y,t)}}),FS=Hx({rsqrt_:function(e){let t={x:Wx(e,"x","rsqrt")};return Rx.runKernel(Ly,t)}});function RS(e,t){if((tm(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&tm(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Gx(e,[],[],t)}var DS=Hx({selu_:function(e){let t={x:Wx(e,"x","selu")};return Rx.runKernel(Wy,t)}}),OS=Hx({separableConv2d_:function(e,t,n,r,a,s=[1,1],i="NHWC"){let o=Wx(e,"x","separableConv2d"),l=Wx(t,"depthwiseFilter","separableConv2d"),u=Wx(n,"pointwiseFilter","separableConv2d"),h=o,c=!1;if(3===o.rank&&(c=!0,h=xw(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Df(4===h.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),Df(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Df(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Df(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),Df(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let d=l.shape[2],p=l.shape[3];Df(u.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`);let f=Jw(h,l,r,a,i,s),m=Vw(f,u,1,"valid",i);return c?xw(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),zS=Hx({sign_:function(e){let t={x:Wx(e,"x","sign")};return Rx.runKernel(Gy,t)}}),PS=Hx({sin_:function(e){let t={x:Wx(e,"x","sin")};return Rx.runKernel(Hy,t)}}),$S=Hx({sinh_:function(e){let t={x:Wx(e,"x","sinh")};return Rx.runKernel(Uy,t)}}),LS=Hx({slice1d_:function(e,t,n){let r=Wx(e,"x","slice1d");return Df(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Sw(r,[t],[n])}}),VS=Hx({slice2d_:function(e,t,n){let r=Wx(e,"x","slice2d");return Df(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Sw(r,t,n)}}),BS=Hx({slice3d_:function(e,t,n){let r=Wx(e,"x","slice3d");return Df(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Sw(r,t,n)}}),WS=Hx({slice4d_:function(e,t,n){let r=Wx(e,"x","slice4d");return Df(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Sw(r,t,n)}}),jS=Hx({softmax_:function(e,t=-1){let n=Wx(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);return Rx.runKernel(Qy,{logits:n},{dim:t})}}),HS=Hx({fft_:function(e){return Df("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),Rx.runKernel(Tg,{input:e})}}),US=Hx({ifft_:function(e){return Df("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),Rx.runKernel(Lg,{input:e})}}),GS=Hx({irfft_:function(e){let t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){let a=xw(e,[r,n]);t=US(a)}else{let a=[r,2*(n-1)],s=xw(_S(e),[r,n]),i=xw(Ak(e),[r,n]),o=NS(Sw(s,[0,1],[r,n-2]),1),l=GA(NS(Sw(i,[0,1],[r,n-2]),1),RS(-1)),u=ww([s,o],1),h=ww([i,l],1),c=xw(Ux(u,h),[a[0],a[1]]);t=US(c)}if(t=_S(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=xw(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}}),qS=Hx({split_:function(e,t,n=0){let r={x:Wx(e,"x","split")};return Rx.runKernel(Jy,r,{numOrSizeSplits:t,axis:n})}}),KS=Hx({rfft_:function(e,t){Df("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got "+e.dtype);let n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){let a=e.shape.map(e=>0),s=e.shape.map(e=>e);s[e.shape.length-1]=t,n=Sw(e,a,s),r=t}else if(null!=t&&t>r){let a=e.shape.map(e=>e);a[e.shape.length-1]=t-r,n=ww([e,aS(a)],e.shape.length-1),r=t}else n=e;let s=sk(n),i=xw(Ux(n,s),[a,r]),o=HS(i),l=Math.floor(r/2)+1,u=_S(o),h=Ak(o),c=qS(u,[l,r-l],u.shape.length-1),d=qS(h,[l,r-l],h.shape.length-1),p=n.shape.slice();return p[n.shape.length-1]=l,xw(Ux(c[0],d[0]),p)}}),XS=Hx({sqrt_:function(e){let t={x:Wx(e,"x","sqrt")};return Rx.runKernel(Xy,t)}}),ZS=Hx({squaredDifference_:function(e,t){let n=Wx(e,"a","squaredDifference"),r=Wx(t,"b","squaredDifference");return[n,r]=Sx(n,r),nk(n.shape,r.shape),Rx.runKernel(sb,{a:n,b:r},{})}}),YS=Hx({squeeze_:function(e,t){let n=Wx(e,"x","squeeze");return xw(n,Xf(n.shape,t).newShape)}}),JS=Hx({stack_:function(e,t=0){let n=jx(e,"tensors","stack","string_or_numeric");return Df(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Df(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),Rx.runKernel(wy,n,{axis:t})}}),QS=Hx({step_:function(e,t=0){let n={x:Wx(e,"x","step")};return Rx.runKernel(wb,n,{alpha:t})}}),eI=Hx({stridedSlice_:function(e,t,n,r,a=0,s=0,i=0,o=0,l=0){let u={x:Wx(e,"x","stridedSlice","string_or_numeric")};return Rx.runKernel(ob,u,{begin:t,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l})}}),tI=Hx({tan_:function(e){let t={x:Wx(e,"x","tan")};return Rx.runKernel(db,t)}});function nI(e,t){zf(e);let n=Lx(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Gx(e,null,n,t)}function rI(e,t,n){if(zf(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");let r=Lx(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Gx(e,t,r,n)}var aI=Hx({topk_:function(e,t=1,n=!0){let r=Wx(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);let s={x:r},i={k:t,sorted:n},[o,l]=Rx.runKernel(mb,s,i);return{values:o,indices:l}}}),sI=Hx({truncatedNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");let s=new wS(t,n,r,!0,a),i=zv(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),iI=Hx({unique_:function(e,t=0){let n=Wx(e,"x","unique","string_or_numeric");Df(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[s,i]=Rx.runKernel(bb,r,a);return{values:s,indices:i}}}),oI=Hx({unsortedSegmentSum_:function(e,t,n){let r=Wx(e,"x","unsortedSegmentSum"),a=Wx(t,"segmentIds","unsortedSegmentSum","int32");return Df(Bf(n),()=>"numSegments must be of dtype int"),Rx.runKernel(vb,{x:r,segmentIds:a},{numSegments:n})}}),lI=Hx({unstack_:function(e,t=0){let n=Wx(e,"x","unstack","string_or_numeric");return Df(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),Rx.runKernel(xb,{value:n},{axis:t})}});function uI(e,t){let n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);let r=zv(e,"int32"),a=zv([n.length,e.length],"int32");for(let s=0;s<n.length;s++){let t=r.indexToLoc(n[s]);a.values.set(t,s*e.length)}return a.toTensor()}var hI=async function(e){let t=Wx(e,"condition","whereAsync","bool"),n=await t.data(),r=uI(t.shape,n);return e!==t&&t.dispose(),r};function cI(e,t,n=null){if(0===e.rank)return qA(e);if(1!==e.rank&&null===n)return cI(xw(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return $k(qA(e),n);if(t===1/0)return zk(qA(e),n);if(t===-1/0)return iS(qA(e),n);if("euclidean"===t||2===t)return XS($k(bS(qA(e),RS(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+t)}if(Array.isArray(n)&&2===n.length){if(1===t)return zk($k(qA(e),n[0]),n[1]-1);if(t===1/0)return zk($k(qA(e),n[1]),n[0]);if(t===-1/0)return iS($k(qA(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return XS($k(hS(e),n));throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}var dI=Hx({norm_:function(e,t="euclidean",n=null,r=!1){let a=cI(e=Wx(e,"x","norm"),t,n),s=a.shape;if(r){let t=Kf(n,e.shape);s=jk(a.shape,t)}return xw(a,s)}});Hx({movingAverage_:function(e,t,n,r,a=!0){let s=Wx(e,"v","movingAverage"),i=Wx(t,"x","movingAverage"),o=Wx(n,"decay","movingAverage");Ix(s,i),Df(Vf(s.shape,i.shape),()=>"Shape mismatch in v and x");let l=RS(1),u=Pk(l,o),h=GA(Pk(i,s),u);if(a){Df(null!=r,()=>"When using zeroDebias: true, step is required.");let e=Wx(r,"step","movingAverage");h=UA(h,Pk(l,bS(o,e)))}return jA(s,h)}});var pI=Hx({scatterND_:function(e,t,n){let r=Wx(e,"indices","scatterND","int32"),a=Wx(t,"updates","scatterND");return fA(a,r,n),Rx.runKernel(Vy,{indices:r,updates:a},{shape:n})}}),fI=Hx({sparseToDense_:function(e,t,n,r=0){let a=Wx(e,"sparseIndices","sparseToDense","int32"),s=Wx(t,"sparseValues","sparseToDense"),i=Wx(r,"defaultValue","sparseToDense",s.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);if(0!==t.rank&&(1!==t.rank||t.size!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,i),Rx.runKernel(ab,{sparseIndices:a,sparseValues:s,defaultValue:i},{outputShape:n})}}),mI=Hx({gatherND_:function(e,t){let n=Wx(t,"indices","gatherND","int32"),r={params:Wx(e,"x","gatherND","string_or_numeric"),indices:n};return Rx.runKernel(Og,r)}}),gI=Hx({dropout_:function(e,t,n,r){let a=Wx(e,"x","dropout");if(Df("float32"===a.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),Df(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof dx?a.clone():a;let s=function(e,t){if(null==t)return e.shape.slice();if(Vf(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(a,n),i=1-t,o=UA(yk(jA(SS(s,0,1,"float32",r),i)),i);return GA(a,o)}});function yI(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){let i=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(i)}return nI(a,"float32")}var bI={};I(bI,{conv2d:()=>SI,depthwiseConv2d:()=>EI,matMul:()=>TI});var xI=Hx({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",i){let o=e;3===e.rank&&(o=xw(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=xw(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Df(4===o.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),Df(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Df(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let u="NHWC"===s?o.shape[3]:o.shape[1],h="NHWC"===s?l.shape[3]:l.shape[1];return Df(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),Df(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),null!=i&&Df(Bf(a),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`),Rx.runKernel(tg,{x:o,dy:l},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,filterShape:n})}});function vI(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return GA(e,QS(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function AI(e,t){let n=t,r=tk(e.shape,t.shape);return r.length>0&&(n=$k(n,r)),xw(n,e.shape)}function wI(e,t,n,r){if("linear"===t)return e;if("relu"===t)return TS(e);if("elu"===t)return uk(e);if("relu6"===t)return CS(e);if("prelu"===t)return xS(e,n);if("leakyrelu"===t)return Ik(e,r);if("sigmoid"===t)return kw(e);throw new Error(`Unknown fused activation ${t}.`)}var kI=(e,t)=>!(e>0)||"linear"===t,SI=Hx({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===kI(Rx.state.gradientDepth,l=l||"linear")){let c=Vw(e,t,n,r,a,s,i);return null!=o&&(c=jA(c,o)),wI(c,l,u,h)}let c=Wx(e,"x","conv2d"),d=Wx(t,"filter","conv2d"),p=c,f=!1;3===c.rank&&(f=!0,p=xw(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Df(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),Df(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),null!=i&&Df(Bf(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),Df(p.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${p.shape[3]}) must match input depth for filter ${d.shape[2]}.`),Df(yw(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Df("NHWC"===a,()=>`Error in conv2d: got dataFormat of ${a} but only NHWC is currently supported.`);let m,g,y=uw(p.shape,d.shape,n,s,r,i);null!=o&&(m=Wx(o,"bias","fused conv2d"),[m]=Sx(m,c),nk(y.outShape,m.shape)),null!=u&&(g=Wx(u,"prelu weights","fused conv2d"));let b=(e,t)=>{let[a,i,o,u]=t,h=vI(e,o,l);Df(gw(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let c=[Ww(i.shape,h,a,n,r),xI(i,h,a.shape,n,r)];if(null!=u){let e=AI(u,h);c.push(e)}return c},x={x:p,filter:d,bias:m,preluActivationWeights:g},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?Fk((e,t,n)=>{let r=Rx.runKernel(_b,x,v);return n([t,e,r]),f&&(r=xw(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):Fk((e,t,n,r)=>{let a=Rx.runKernel(_b,x,v);return r([t,e,a,n]),f&&(a=xw(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,m)}}),II=Hx({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],i){let o=e;3===e.rank&&(o=xw(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;return 3===l.rank&&(l=xw(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Rx.runKernel(pg,{x:o,dy:l},{strides:r,pad:a,dimRoundingMode:i,dilations:s,filterShape:n})}}),_I=Hx({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],i){let o=t,l=!1;3===t.rank&&(l=!0,o=xw(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=Rx.runKernel(fg,{dy:o,filter:n},{strides:r,pad:a,dimRoundingMode:i,dilations:s,inputShape:e});return l?xw(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),EI=Hx({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===kI(Rx.state.gradientDepth,l)){let c=Jw(e,t,n,r,a,s,i);return null!=o&&(c=jA(c,o)),wI(c,l,u,h)}let c=Wx(e,"x","depthwiseConv2d"),d=Wx(t,"filter","depthwiseConv2d"),p=c,f=!1;3===c.rank&&(f=!0,p=xw(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Df(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),Df(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),Df(p.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==s&&(s=[1,1]),Df(yw(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),null!=i&&Df(Bf(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${r}.`);let m,g,y=uw(p.shape,d.shape,n,s,r,i,!0);null!=o&&(m=Wx(o,"bias","fused conv2d"),[m]=Sx(m,c),nk(y.outShape,m.shape)),null!=u&&(g=Wx(u,"prelu weights","fused depthwiseConv2d"));let b=(e,t)=>{Df(gw(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[a,o,u,h]=t,c=vI(e,u,l),d=_I(o.shape,c,a,n,r,s,i),p=II(o,c,a.shape,n,r,s,i);return null!=h?[d,p,AI(m,c)]:[d,p]},x={x:p,filter:d,bias:m,preluActivationWeights:g},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?Fk((e,t,n)=>{let r=Rx.runKernel(Eb,x,v);return n([t,e,r]),f&&(r=xw(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):Fk((e,t,n,r)=>{let a=Rx.runKernel(Eb,x,v);return r([t,e,a,n]),f&&(a=xw(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,m)}}),TI=Hx({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:o}){if(!1===kI(Rx.state.gradientDepth,s)){let l=tA(e,t,n,r);return null!=a&&(l=jA(l,a)),wI(l,s,i,o)}let l=Wx(e,"a","fused matMul"),u=Wx(t,"b","fused matMul");[l,u]=Sx(l,u);let h=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=$f(f),y=$f(m);Df(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),Df(Vf(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),Df(h===c,()=>`Error in fused matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);let b,x,v=l.shape.slice(0,-2).concat([d,p]),A=xw(l,n?[g,h,d]:[g,d,h]),w=xw(u,r?[y,p,c]:[y,c,p]);null!=a&&(b=Wx(a,"bias","fused matMul"),[b]=Sx(b,l),nk(v,b.shape)),null!=i&&(x=Wx(i,"prelu weights","fused matMul"));let k=(e,t)=>{let i,o,[l,u,h,c]=t,d=vI(xw(e,h.shape),h,s);return n||r?!n&&r?(i=tA(d,u,!1,!1),o=tA(d,l,!0,!1)):n&&!r?(i=tA(u,d,!1,!0),o=tA(l,d,!1,!1)):(i=tA(u,d,!0,!0),o=tA(d,l,!0,!0)):(i=tA(d,u,!1,!0),o=tA(l,d,!0,!1)),null!=a?[i,o,AI(c,d)]:[i,o]},S={a:A,b:w,bias:b,preluActivationWeights:x},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return null==a?Fk((e,t,n)=>{let r=Rx.runKernel(Ib,S,I);return n([e,t,r]),{value:xw(r,v),gradFunc:k}})(A,w):Fk((e,t,n,r)=>{let a=Rx.runKernel(Ib,S,I);return r([e,t,a,n]),{value:xw(a,v),gradFunc:k}})(A,w,b)}});Hx({hammingWindow_:function(e){return yI(e,.54,.46)}});var CI=Hx({hannWindow_:function(e){return yI(e,.5,.5)}}),NI=Hx({frame_:function(e,t,n,r=!1,a=0){let s=0,i=[];for(;s+t<=e.size;)i.push(Sw(e,s,t)),s+=n;if(r)for(;s<e.size;){let r=s+t-e.size,o=ww([Sw(e,s,t-r),gk([r],a)]);i.push(o),s+=n}return 0===i.length?rI([],[0,t]):xw(ww(i),[i.length,t])}});Hx({stft_:function(e,t,n,r,a=CI){null==r&&(r=function(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}(t));let s=NI(e,t,n),i=GA(s,a(t));return KS(i,r)}});var MI=Hx({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){let i=Wx(e,"image","cropAndResize"),o=Wx(t,"boxes","cropAndResize","float32"),l=Wx(n,"boxInd","cropAndResize","int32"),u=o.shape[0];return Df(4===i.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),Df(2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),Df(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),Df(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Df(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),Df("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was "+a),Rx.runKernel(ug,{image:i,boxes:o,boxInd:l},{method:a,extrapolationValue:s,cropSize:r})}}),FI=Hx({flipLeftRight_:function(e){let t=Wx(e,"image","flipLeftRight","float32");return Df(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`),Rx.runKernel(Ng,{image:t},{})}}),RI=Hx({rotateWithOffset_:function(e,t,n=0,r=.5){let a=Wx(e,"image","rotateWithOffset","float32");return Df(4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`),Rx.runKernel(Sb,{image:a},{radians:t,fillValue:n,center:r})}});function DI(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);let i=e.shape[0];return n=Math.min(n,i),Df(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Df(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),Df(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),Df(1===t.rank,()=>"scores must be a 1D tensor"),Df(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),Df(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}var OI=Hx({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let s=Wx(e,"boxes","nonMaxSuppression"),i=Wx(t,"scores","nonMaxSuppression"),o=DI(s,i,n,r,a);return Rx.runKernel(yy,{boxes:s,scores:i},{maxOutputSize:n=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:a=o.scoreThreshold})}});function zI(e,t,n){let r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,i=!1;for(;r<a;){s=r+(a-r>>>1);let o=n(t,e[s]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}(e,t,n||PI)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function PI(e,t){return e>t?1:e<t?-1:0}function $I(e,t,n,r,a){return BI(e,t,n,r,a,0)}function LI(e,t,n,r,a,s){return BI(e,t,n,r,a,0,!1,s,!0)}function VI(e,t,n,r,a,s){return BI(e,t,n,r,a,s,!0)}function BI(e,t,n,r,a,s,i=!1,o=!1,l=!1){let u=[];for(let g=0;g<t.length;g++)t[g]>a&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(HI);let h=s>0?-.5/s:0,c=[],d=[];for(;c.length<n&&u.length>0;){let t=u.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<a)break;let o=!1;for(let l=c.length-1;l>=i;--l){let n=WI(e,s,c[l]);if(n>=r){o=!0;break}if(t.score=t.score*jI(r,h,n),t.score<=a)break}t.suppressBeginIndex=c.length,o||(t.score===n?(c.push(s),d.push(t.score)):t.score>a&&zI(u,t,HI))}let p=c.length,f=n-p;o&&f>0&&(c.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));let m={selectedIndices:c};return i&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function WI(e,t,n){let r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(o-s)*(l-i),f=(c-u)*(d-h);if(p<=0||f<=0)return 0;let m=Math.max(s,u),g=Math.max(i,h),y=Math.min(o,c),b=Math.min(l,d),x=Math.max(y-m,0)*Math.max(b-g,0);return x/(p+f-x)}function jI(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function HI(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var UI=Hx({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){let i=Wx(e,"boxes","nonMaxSuppression"),o=Wx(t,"scores","nonMaxSuppression"),l=DI(i,o,n,r,a,s),u=Rx.runKernel(xy,{boxes:i,scores:o},{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),GI=Hx({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){let i=Wx(e,"boxes","nonMaxSuppression"),o=Wx(t,"scores","nonMaxSuppression"),l=DI(i,o,n,r,a,null),u=Rx.runKernel(by,{boxes:i,scores:o},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:u[0],validOutputs:u[1]}}}),qI=Hx({resizeBilinear_:function(e,t,n=!1,r=!1){let a=Wx(e,"images","resizeBilinear");Df(3===a.rank||4===a.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),Df(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),Df(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=xw(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o=Rx.runKernel(Dy,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?xw(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),KI=Hx({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){let a=Wx(e,"images","resizeNearestNeighbor");Df(3===a.rank||4===a.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),Df(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),Df("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),Df(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=xw(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o=Rx.runKernel(Fy,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?xw(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),XI=Hx({threshold_:function(e,t="binary",n=!1,r=.5){let a,s,i,o,l=Wx(e,"image","threshold"),u=l.shape[0]*l.shape[1],h=GA(nI([r]),255);if(Df(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),Df(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),Df("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),Df("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was "+t),3===l.shape[2]){[a,s,i]=qS(l,[1,1,1],-1);let e=GA(a,.2989),t=GA(s,.587),n=GA(i,.114);o=jA(jA(e,t),n)}else o=e;"otsu"===t&&(h=function(e,t){let n,r,a,s,i,o,l=nI([-1]),u=nI([0]),h=nI([0]);for(let c=0;c<e.size-1;c++){n=Sw(e,0,c+1),r=Sw(e,c+1),i=UA($k(n),t),o=UA($k(r),t);let d=$k(GA(n,IS(0,n.size)));a=UA(d,$k(n));let p=gk(r.shape,n.size),f=jA(IS(0,r.size),p),m=GA(r,f);s=UA($k(m),$k(r));let g=Pk(a,s),y=Pk(a,s),b=GA(i,o);h=GA(GA(b,g),y);let x=xk(h,u);u=ak(x,h,u),l=ak(x,nI([c]),l)}return l}(Fw(Pv(MS(o),"int32"),qx([]),256),u));let c=n?Ek(o,h):xk(o,h);return Pv(GA(c,255),"int32")}}),ZI=Hx({transform_:function(e,t,n="nearest",r="constant",a=0,s){let i=Wx(e,"image","transform","float32"),o=Wx(t,"transforms","transform","float32");return Df(4===i.rank,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),Df(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Df(null==s||2===s.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`),Rx.runKernel(gb,{image:i,transforms:o},{interpolation:n,fillMode:r,fillValue:a,outputShape:s})}}),YI=Hx({bandPart_:function(e,t,n){Df(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),Df(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);let r=Wx(e,"a","bandPart");Df(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let a=r.shape,[s,i]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=s),n<0&&(n=i);let o=xw(IS(0,s,1,"int32"),[-1,1]),l=IS(0,i,1,"int32"),u=Pk(o,l),h=Xk(Ek(u,RS(+t,"int32")),vk(u,RS(-n,"int32"))),c=aS([s,i],r.dtype);return xw(JS(lI(xw(r,[-1,s,i])).map(e=>ak(h,e,c))),a)}}),JI=Hx({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Df(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)Df(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=qS(e,e.shape[0],0).map(e=>YS(e,[0]));Df(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let a=0;a<e.length;++a)n.push(Rx.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){let r=GA($k(GA(n[t],e)),n[t]);e=Pk(e,r)}return UA(e,dI(e,"euclidean"))}));return t?JS(n,0):n}});function QI(e,t=!1){return Rx.tidy(()=>{Df(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],a=mk(n),s=$v(e),i=rI([[1]],[1,1]),o=$v(i),l=n>=r?r:n;for(let e=0;e<l;++e){let t=s,l=o,u=a;[o,s,a]=Rx.tidy(()=>{let t=Sw(s,[e,e],[n-e,1]),l=dI(t),u=Sw(s,[e,e],[1,1]),h=ak(xk(u,0),rI([[-1]]),rI([[1]])),c=Pk(u,GA(h,l)),d=UA(t,c);o=1===d.shape[0]?$v(i):ww([i,Sw(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);let p=Rk(UA(tA(h,c),l)),f=Sw(s,[e,0],[n-e,r]),m=GA(p,o),g=rA(o);if(0===e)s=Pk(f,tA(m,tA(g,f)));else{let t=Pk(f,tA(m,tA(g,f)));s=ww([Sw(s,[0,0],[e,r]),t],0)}let y=rA(m),b=Sw(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Pk(b,tA(tA(b,o),y));else{let t=Pk(b,tA(tA(b,o),y));a=ww([Sw(a,[0,0],[n,e]),t],1)}return[o,s,a]}),VA([t,l,u])}return!t&&n>r&&(a=Sw(a,[0,0],[n,r]),s=Sw(s,[0,0],[r,r])),[a,s]})}var e_,t_=Hx({qr_:function(e,t=!1){if(Df(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank),2===e.rank)return QI(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=lI(xw(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];return r.forEach(e=>{let[n,r]=QI(e,t);a.push(n),s.push(r)}),[xw(JS(a,0),e.shape),xw(JS(s,0),e.shape)]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(e_||(e_={}));var n_=Hx({computeWeightedLoss_:function(e,t,n=e_.SUM_BY_NONZERO_WEIGHTS){let r=Wx(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Wx(t,"weights","computeWeightedLoss"));let s=null==a?r:GA(r,a);if(n===e_.NONE)return s;if(n===e_.SUM)return $k(s);if(n===e_.MEAN){if(null==a)return rS(s);{let e=r.size/a.size,t=UA($k(s),$k(a));return e>1?UA(t,RS(e)):t}}if(n===e_.SUM_BY_NONZERO_WEIGHTS){if(null==a)return UA($k(s),RS(r.size));{let e=GA(a,sS(r.shape)),t=Pv($k(pS(e,RS(0))),"float32");return UA($k(s),t)}}throw Error("Unknown reduction: "+n)}});Hx({absoluteDifference_:function(e,t,n,r=e_.SUM_BY_NONZERO_WEIGHTS){let a=Wx(e,"labels","absoluteDifference"),s=Wx(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Wx(n,"weights","absoluteDifference")),Of(a.shape,s.shape,"Error in absoluteDifference: ");let o=qA(Pk(a,s));return n_(o,i,r)}}),Hx({cosineDistance_:function(e,t,n,r,a=e_.SUM_BY_NONZERO_WEIGHTS){let s=Wx(e,"labels","cosineDistance"),i=Wx(t,"predictions","cosineDistance"),o=null;null!=r&&(o=Wx(r,"weights","cosineDistance")),Of(s.shape,i.shape,"Error in cosineDistance: ");let l=RS(1),u=Pk(l,$k(GA(s,i),n,!0));return n_(u,o,a)}}),Hx({hingeLoss_:function(e,t,n,r=e_.SUM_BY_NONZERO_WEIGHTS){let a=Wx(e,"labels","hingeLoss"),s=Wx(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Wx(n,"weights","hingeLoss")),Of(a.shape,s.shape,"Error in hingeLoss: ");let o=RS(1);a=Pk(GA(RS(2),a),o);let l=TS(Pk(o,GA(a,s)));return n_(l,i,r)}}),Hx({huberLoss_:function(e,t,n,r=1,a=e_.SUM_BY_NONZERO_WEIGHTS){let s=Wx(e,"labels","huberLoss"),i=Wx(t,"predictions","huberLoss"),o=null;null!=n&&(o=Wx(n,"weights","huberLoss")),Of(s.shape,i.shape,"Error in huberLoss: ");let l=RS(r),u=qA(Pk(i,s)),h=oS(u,l),c=Pk(u,h),d=jA(GA(RS(.5),hS(h)),GA(l,c));return n_(d,o,a)}}),Hx({logLoss_:function(e,t,n,r=1e-7,a=e_.SUM_BY_NONZERO_WEIGHTS){let s=Wx(e,"labels","logLoss"),i=Wx(t,"predictions","logLoss"),o=null;null!=n&&(o=Wx(n,"weights","logLoss")),Of(s.shape,i.shape,"Error in logLoss: ");let l=RS(1),u=RS(r),h=Rk(GA(s,Nk(jA(i,u)))),c=GA(Pk(l,s),Nk(jA(Pk(l,i),u))),d=Pk(h,c);return n_(d,o,a)}}),Hx({meanSquaredError_:function(e,t,n,r=e_.SUM_BY_NONZERO_WEIGHTS){let a=Wx(e,"labels","meanSquaredError"),s=Wx(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Wx(n,"weights","meanSquaredError")),Of(a.shape,s.shape,"Error in meanSquaredError: ");let o=ZS(a,s);return n_(o,i,r)}}),Hx({sigmoidCrossEntropy_:function(e,t,n,r=0,a=e_.SUM_BY_NONZERO_WEIGHTS){let s=Wx(e,"multiClassLabels","sigmoidCrossEntropy"),i=Wx(t,"logits","sigmoidCrossEntropy"),o=null;if(null!=n&&(o=Wx(n,"weights","sigmoidCrossEntropy")),Of(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){let e=RS(r),t=RS(1),n=RS(.5);s=jA(GA(s,Pk(t,e)),GA(n,e))}let l=function(e,t){let n=Wx(e,"labels","sigmoidCrossEntropyWithLogits"),r=Wx(t,"logits","sigmoidCrossEntropyWithLogits");Of(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=TS(r),s=GA(r,n),i=Mk(ck(Rk(qA(r))));return jA(Pk(a,s),i)}(s,i);return n_(l,o,a)}}),Hx({softmaxCrossEntropy_:function(e,t,n,r=0,a=e_.SUM_BY_NONZERO_WEIGHTS){let s=Wx(e,"onehotLabels","softmaxCrossEntropy"),i=Wx(t,"logits","softmaxCrossEntropy"),o=null;if(null!=n&&(o=Wx(n,"weights","softmaxCrossEntropy")),Of(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){let e=RS(r),t=RS(1),n=RS(s.shape[1]);s=jA(GA(s,Pk(t,e)),UA(e,n))}let l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Fk((e,t,r)=>{let a=Kk(t,[n],!0),s=Pk(Pv(t,"float32"),a);r([e,s]);let i=Rk(GA(s,e));return{value:$k(i,[n]),gradFunc:(e,t)=>{let[r,a]=t,s=jk(e.shape,[n]);return[GA(xw(e,s),Pk(Pv(r,"float32"),ck(a))),GA(xw(e,s),Pk(ck(a),Pv(r,"float32")))]}}})(e,t)}(s,i);return n_(l,o,a)}});var r_=Hx({sparseFillEmptyRows_:function(e,t,n,r){let a=Wx(e,"indices","sparseFillEmptyRows"),s=Wx(t,"values","sparseFillEmptyRows"),i=Wx(n,"denseShape","sparseFillEmptyRows"),o=Wx(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        "+a.shape);if(1!==s.rank)throw new Error("Values should be Tensor1D but received shape "+s.shape);if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape "+i.shape);if(0!==o.rank)throw new Error("Default value should be a scalar but received shape "+o.shape);let l=Rx.runKernel(eb,{indices:a,values:s,denseShape:i,defaultValue:o});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),a_=Hx({sparseReshape_:function(e,t,n){let r=Wx(e,"inputIndices","sparseReshape"),a=Wx(t,"inputShape","sparseReshape"),s=Wx(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        "+r.shape);if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape "+a.shape);if(1!==s.rank)throw new Error("New shape should be Tensor1D but received shape "+s.shape);let i=Rx.runKernel(tb,{inputIndices:r,inputShape:a,newShape:s});return{outputIndices:i[0],outputShape:i[1]}}}),s_=Hx({sparseSegmentMean_:function(e,t,n){let r=Wx(e,"data","sparseSegmentMean"),a=Wx(t,"indices","sparseSegmentMean"),s=Wx(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          "+s.shape);return Rx.runKernel(nb,{data:r,indices:a,segmentIds:s})}}),i_=Hx({sparseSegmentSum_:function(e,t,n){let r=Wx(e,"data","sparseSegmentSum"),a=Wx(t,"indices","sparseSegmentSum"),s=Wx(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         "+s.shape);return Rx.runKernel(rb,{data:r,indices:a,segmentIds:s})}}),o_=Hx({stringNGrams_:function(e,t,n,r,a,s,i,o){let l=Wx(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: "+l.shape);let u=Wx(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");let h=Rx.runKernel(lb,{data:l,dataSplits:u},{separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:i,preserveShortSequences:o});return{nGrams:h[0],nGramsSplits:h[1]}}}),l_=Hx({stringSplit_:function(e,t,n=!0){let r=Wx(e,"input","stringSplit","string"),a=Wx(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape "+r.shape);if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape "+a.shape);let s=Rx.runKernel(ub,{input:r,delimiter:a},{skipEmpty:n});return{indices:s[0],values:s[1],shape:s[2]}}}),u_=Hx({stringToHashBucketFast_:function(e,t){let n=Wx(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");return Rx.runKernel(hb,{input:n},r)}}),h_={flipLeftRight:FI,resizeNearestNeighbor:KI,resizeBilinear:qI,rotateWithOffset:RI,cropAndResize:MI,nonMaxSuppression:OI,nonMaxSuppressionAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let s=Wx(e,"boxes","nonMaxSuppressionAsync"),i=Wx(t,"scores","nonMaxSuppressionAsync"),o=DI(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l=await Promise.all([s.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:c}=$I(u,h,n,r,a);return s!==e&&s.dispose(),i!==t&&i.dispose(),nI(c,"int32")},nonMaxSuppressionWithScore:UI,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){let i=Wx(e,"boxes","nonMaxSuppressionAsync"),o=Wx(t,"scores","nonMaxSuppressionAsync"),l=DI(i,o,n,r,a,s);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;let u=await Promise.all([i.data(),o.data()]),h=u[0],c=u[1],{selectedIndices:d,selectedScores:p}=VI(h,c,n,r,a,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:nI(d,"int32"),selectedScores:nI(p)}},nonMaxSuppressionPadded:GI,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){let i=Wx(e,"boxes","nonMaxSuppressionAsync"),o=Wx(t,"scores","nonMaxSuppressionAsync"),l=DI(i,o,n,r,a,null),u=l.maxOutputSize,h=l.iouThreshold,c=l.scoreThreshold,[d,p]=await Promise.all([i.data(),o.data()]),{selectedIndices:f,validOutputs:m}=LI(d,p,u,h,c,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:nI(f,"int32"),validOutputs:RS(m,"int32")}},threshold:XI,transform:ZI},c_={bandPart:YI,gramSchmidt:JI,qr:t_},d_={sparseFillEmptyRows:r_,sparseReshape:a_,sparseSegmentMean:s_,sparseSegmentSum:i_},p_={stringNGrams:o_,stringSplit:l_,stringToHashBucketFast:u_},f_=class extends DA{minimize(e,t=!1,n){let{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return VA(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Df(lm(e),()=>"The f passed in variableGrads(f) must be a function"),Df(null==t||Array.isArray(t)&&t.every(e=>e instanceof fx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n){t=[];for(let e in Rx.registeredVariables)t.push(Rx.registeredVariables[e])}let r=n?t.filter(e=>!e.trainable):null,a=t.length;Df((t=t.filter(e=>e.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);let{value:s,grads:i}=Rx.gradients(e,t,null,!0);Df(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Df(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let o={};return t.forEach((e,t)=>{null!=i[t]&&(o[e.name]=i[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:s,grads:o}}(e,t)}dispose(){null!=this.iterations_&&VA(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:RS(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(f_,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var m_=class extends f_{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Rx.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Rx.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:t+"/accum_grad",variable:LA(()=>sk(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:t+"/accum_var",variable:LA(()=>sk(r).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let s=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;LA(()=>{let e=jA(GA(s,this.rho),GA(hS(a),1-this.rho)),t=GA(UA(XS(jA(i,this.epsilon)),XS(jA(s,this.epsilon))),a),n=jA(GA(i,this.rho),GA(hS(t),1-this.rho));s.assign(e),i.assign(n);let o=jA(GA(t,-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(VA(this.accumulatedGrads.map(e=>e.variable)),VA(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};m_.className="Adadelta",zA(m_);var g_=class extends f_{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Rx.registeredVariables[t];if(null==this.accumulatedGrads[n]){let e=!1;this.accumulatedGrads[n]={originalName:t+"/accumulator",variable:LA(()=>gk(r.shape,this.initialAccumulatorValue).variable(e))}}let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let s=this.accumulatedGrads[n].variable;LA(()=>{let e=jA(s,hS(a));s.assign(e);let t=jA(GA(UA(a,XS(jA(e,Rx.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&VA(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};g_.className="Adagrad",zA(g_);var y_=class extends f_{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],LA(()=>{this.accBeta1=RS(t).variable(),this.accBeta2=RS(n).variable()}),null==r&&(this.epsilon=Rx.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);LA(()=>{let n=Pk(1,this.accBeta1),r=Pk(1,this.accBeta2);t.forEach((t,a)=>{let s=Rx.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:LA(()=>sk(s).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:t+"/v",variable:LA(()=>sk(s).variable(!1))});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,u=jA(GA(o,this.beta1),GA(i,1-this.beta1)),h=jA(GA(l,this.beta2),GA(hS(i),1-this.beta2)),c=UA(u,n),d=UA(h,r);o.assign(u),l.assign(h);let p=jA(GA(UA(c,jA(XS(d),this.epsilon)),-this.learningRate),s);s.assign(p)}),this.accBeta1.assign(GA(this.accBeta1,this.beta1)),this.accBeta2.assign(GA(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&VA(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&VA(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),LA(()=>{this.accBeta1.assign(bS(this.beta1,this.iterations_+1)),this.accBeta2.assign(bS(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};y_.className="Adam",zA(y_);var b_=class extends f_{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],LA(()=>{this.iteration=RS(0).variable(),this.accBeta1=RS(t).variable()}),null==r&&(this.epsilon=Rx.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);LA(()=>{let n=Pk(1,this.accBeta1),r=UA(-this.learningRate,jA(GA(this.iteration,this.decay),1));t.forEach((t,a)=>{let s=Rx.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:sk(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:t+"/v",variable:sk(s).variable(!1)});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,u=jA(GA(o,this.beta1),GA(i,1-this.beta1)),h=GA(l,this.beta2),c=qA(i),d=nS(h,c);o.assign(u),l.assign(d);let p=jA(GA(UA(r,n),UA(u,jA(d,this.epsilon))),s);s.assign(p)}),this.iteration.assign(jA(this.iteration,1)),this.accBeta1.assign(GA(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&VA(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&VA(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};b_.className="Adamax",zA(b_);var x_=class extends f_{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let a=Rx.registeredVariables[t];LA(()=>{let e=jA(GA(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=BA(RS(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};x_.className="SGD",zA(x_);var v_=class extends x_{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=RS(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Rx.registeredVariables[t];if(null==this.accumulations[n]){let e=!1;this.accumulations[n]={originalName:t+"/momentum",variable:LA(()=>sk(r).variable(e))}}let a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&LA(()=>{let e,t=jA(GA(this.m,a),s);e=jA(GA(this.c,this.useNesterov?jA(s,GA(t,this.m)):t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&VA(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};v_.className="Momentum",zA(v_);var A_=class extends f_{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=Rx.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Rx.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:t+"/rms",variable:LA(()=>sk(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:t+"/momentum",variable:LA(()=>sk(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:t+"/mg",variable:LA(()=>sk(r).variable(a))});let s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;let i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;LA(()=>{let e=jA(GA(i,this.decay),GA(hS(s),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,a=jA(GA(t,this.decay),GA(s,1-this.decay)),l=UA(GA(s,this.learningRate),XS(Pk(e,jA(hS(a),this.epsilon)))),u=jA(GA(o,this.momentum),l);i.assign(e),t.assign(a),o.assign(u);let h=Pk(r,u);r.assign(h)}else{let e=jA(GA(i,this.decay),GA(hS(s),1-this.decay)),t=jA(GA(o,this.momentum),UA(GA(s,this.learningRate),XS(jA(e,this.epsilon))));i.assign(e),o.assign(t);let n=Pk(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&VA(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&VA(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&VA(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};A_.className="RMSProp",zA(A_);var w_=class{static sgd(e){return new x_(e)}static momentum(e,t,n=!1){return new v_(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new A_(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new y_(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new m_(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new b_(e,t,n,r,a)}static adagrad(e,t=.1){return new g_(e,t)}},k_={sgd:w_.sgd,momentum:w_.momentum,adadelta:w_.adadelta,adagrad:w_.adagrad,rmsprop:w_.rmsprop,adamax:w_.adamax,adam:w_.adam},S_="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function I_(){return new Promise(e=>S_(()=>e()))}var __={};function E_(e,t){let n=e[0].length;e.forEach((e,t)=>{Df(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),Df(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((e,a)=>{for(let s=0;s<n;s++)Df(s===t||e[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function T_(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}I(__,{ERF_A1:()=>V_,ERF_A2:()=>B_,ERF_A3:()=>W_,ERF_A4:()=>j_,ERF_A5:()=>H_,ERF_P:()=>L_,PARALLELIZE_THRESHOLD:()=>C_,SELU_SCALE:()=>$_,SELU_SCALEALPHA:()=>P_,applyActivation:()=>wI,assertAndGetBroadcastShape:()=>nk,assertAxesAreInnerMostDims:()=>Hk,assertParamsConsistent:()=>E_,assignToTypedArray:()=>J_,axesAreInnerMostDims:()=>Vk,calculateShapes:()=>mA,checkEinsumDimSizes:()=>aE,combineLocations:()=>Bk,complexWithEvenIndex:()=>X_,complexWithOddIndex:()=>Z_,computeConv2DInfo:()=>uw,computeConv3DInfo:()=>hw,computeDefaultPad:()=>cw,computeDilation2DInfo:()=>iw,computeOptimalWindowSize:()=>N_,computeOutAndReduceShapes:()=>Wk,computeOutShape:()=>T_,computePool2DInfo:()=>ow,computePool3DInfo:()=>lw,convertConv2DDataFormat:()=>bw,decodeEinsumEquation:()=>nE,eitherStridesOrDilationsAreOne:()=>yw,expandShapeToKeepDim:()=>jk,exponent:()=>eE,exponents:()=>Q_,fromStringArrayToUint8:()=>fE,fromUint8ToStringArray:()=>pE,getAxesPermutation:()=>Uk,getBroadcastDims:()=>ek,getComplexWithIndex:()=>Y_,getEinsumComputePath:()=>sE,getEinsumPermutation:()=>rE,getFusedBiasGradient:()=>AI,getFusedDyActivation:()=>vI,getImageCenter:()=>M_,getInnerMostAxes:()=>qk,getPermuted:()=>R_,getReductionAxes:()=>tk,getReshaped:()=>F_,getReshapedPermuted:()=>D_,getSliceBeginCoords:()=>O_,getSliceSize:()=>z_,getUndoAxesPermutation:()=>Gk,isIdentityPermutation:()=>iE,log:()=>G_,mergeRealAndImagArrays:()=>q_,prepareAndValidate:()=>cA,prepareSplitSize:()=>lE,segment_util:()=>uE,shouldFuse:()=>kI,slice_util:()=>gA,splitRealAndImagArrays:()=>K_,tupleValuesAreOne:()=>gw,upcastType:()=>wx,validateInput:()=>fA,validateUpdateShape:()=>pA,warn:()=>U_});var C_=30;function N_(e){return e<=C_?e:um(e,Math.floor(Math.sqrt(e)))}function M_(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function F_(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function R_(e,t,n=!0){let r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{let n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function D_(e,t,n,r=!0){let a=[];a.push(r?e[0]/n:e[0]*n);for(let s=1;s<e.length;++s)a.push(s<=t.length?r?t[s-1]*e[s]:e[s]/t[s-1]:e[s]);return a}function O_(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function z_(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var P_=1.7580993408473768,$_=1.0507009873554805,L_=.3275911,V_=.254829592,B_=-.284496736,W_=1.421413741,j_=-1.453152027,H_=1.061405429;function U_(...e){wm().getBool("IS_TEST")||console.warn(...e)}function G_(...e){wm().getBool("IS_TEST")||console.log(...e)}function q_(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function K_(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function X_(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Z_(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Y_(e,t){return{real:e[2*t],imag:e[2*t+1]}}function J_(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Q_(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function eE(e,t,n){let r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var tE=/->/g;function nE(e,t){let n=((e=e.replace(/\s/g,"")).length-e.replace(tE,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');let[r,a]=e.split("->");Df(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let s=r.split(","),i=s.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let c=0;c<a.length;++c){let e=a[c];if(!s.some(t=>-1!==t.indexOf(e)))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===o.indexOf(e)&&o.push(e)}for(let c=0;c<r.length;++c){let e=r[c];-1===o.indexOf(e)&&","!==e&&o.push(e)}let l=new Array(s.length);for(let c=0;c<i;++c){if(new Set(s[c].split("")).size!==s[c].length)throw new Error(`Found duplicate axes in input component ${s[c]}. Support for duplicate axes in input is not implemented yet.`);l[c]=[];for(let e=0;e<s[c].length;++e)l[c].push(o.indexOf(s[c][e]))}let u=o.length,h=[];for(let c=a.length;c<u;++c)h.push(c);return{allDims:o,summedDims:h,idDims:l}}function rE(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;let r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function aE(e,t,n){let r=new Array(e);for(let a=0;a<n.length;++a){let e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:Df(r[t[a][n]]===e[n],()=>`Expected dimension ${r[t[a][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`)}}function sE(e,t){let n=e,r=[],a=0;0===e.length&&n.push(-1),a=e.length+1;for(let i=0;i<a;++i)r.push([]);let s=[];for(let i=0;i<n.length;++i){let e=oE(t,n[i]);for(let t of e)-1===s.indexOf(t)&&(r[i].push(t),s.push(t))}return{path:n,steps:r}}function iE(e){return e.every((e,t)=>e===t)}function oE(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function lE(e,t,n=0){let r=[];if("number"==typeof t)Df(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{Df(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");let a=t.indexOf(-1);if(-1!==a){let r=t.reduce((e,t)=>t>0?e+t:e);t[a]=e.shape[n]-r}Df(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}var uE={};function hE(e,t){let n,r=!1;for(e<=C_?(n=e,r=!0):n=um(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=um(e,n+1);return n}function cE(e,t,n){let r=[],a=e.length;for(let s=0;s<a;s++)r.push(s!==t?e[s]:n);return r}function dE(e,t,n,r){let a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let c=0;c<r;++c)if(e.shape[c]!==t.shape[c])throw new Error(`x.shape[${c}]: ${e.shape[c]} should be equal to indices.shape[${c}]: ${t.shape[c]}.`);let i=e.shape[n],o=[],l=1,u=1,h=1;for(let c=0;c<r;++c)o.push(e.shape[c]),l*=e.shape[c];for(let c=r;c<n;c++)o.push(e.shape[c]),u*=e.shape[c];for(let c=r;c<a;c++)o.push(t.shape[c]);for(let c=n+1;c<s;c++)o.push(e.shape[c]),h*=e.shape[c];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:i,outputShape:o}}function pE(e){try{return e.map(e=>nx(e))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+t)}}function fE(e){return e.map(e=>tx(e))}I(uE,{collectGatherOpShapeInfo:()=>dE,computeOutShape:()=>cE,segOpComputeOptimalWindowSize:()=>hE});var mE={};I(mE,{nonMaxSuppressionV3Impl:()=>$I,nonMaxSuppressionV4Impl:()=>LI,nonMaxSuppressionV5Impl:()=>VI,whereImpl:()=>uI}),px().prototype.abs=function(){return this.throwIfDisposed(),qA(this)},px().prototype.acos=function(){return this.throwIfDisposed(),KA(this)},px().prototype.acosh=function(){return this.throwIfDisposed(),XA(this)},px().prototype.add=function(e){return this.throwIfDisposed(),jA(this,e)},px().prototype.all=function(e,t){return this.throwIfDisposed(),YA(this,e,t)},px().prototype.any=function(e,t){return this.throwIfDisposed(),JA(this,e,t)},px().prototype.argMax=function(e){return this.throwIfDisposed(),QA(this,e)},px().prototype.argMin=function(e){return this.throwIfDisposed(),ew(this,e)},px().prototype.asScalar=function(){return this.throwIfDisposed(),Df(1===this.size,()=>"The array must have only 1 element."),xw(this,[])},px().prototype.asType=function(e){return this.throwIfDisposed(),Pv(this,e)},px().prototype.as1D=function(){return this.throwIfDisposed(),xw(this,[this.size])},px().prototype.as2D=function(e,t){return this.throwIfDisposed(),xw(this,[e,t])},px().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),xw(this,[e,t,n])},px().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),xw(this,[e,t,n,r])},px().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),xw(this,[e,t,n,r,a])},px().prototype.asin=function(){return this.throwIfDisposed(),tw(this)},px().prototype.asinh=function(){return this.throwIfDisposed(),nw(this)},px().prototype.atan=function(){return this.throwIfDisposed(),rw(this)},px().prototype.atan2=function(e){return this.throwIfDisposed(),aw(this,e)},px().prototype.atanh=function(){return this.throwIfDisposed(),sw(this)},px().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),vw(this,e,t,n,r)},px().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),_w(this,e,t)},px().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Tw(this,e,t,n,r,a)},px().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Rw(this,e)},px().prototype.cast=function(e){return this.throwIfDisposed(),Pv(this,e)},px().prototype.ceil=function(){return this.throwIfDisposed(),Dw(this)},px().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ow(this,e,t)},px().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof dx&&(e=[e]),ww([this,...e],t)},px().prototype.conv1d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Bw(this,e,t,n,r,a,s)},px().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),jw(this,e,t,n,r,a)},px().prototype.conv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Vw(this,e,t,n,r,a,s)},px().prototype.cos=function(){return this.throwIfDisposed(),qw(this)},px().prototype.cosh=function(){return this.throwIfDisposed(),Kw(this)},px().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Xw(this,e,t,n)},px().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Yw(this,e,t)},px().prototype.depthwiseConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Jw(this,e,t,n,r,a,s)},px().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Qw(this,e,t,n,r,a)},px().prototype.divNoNan=function(e){return this.throwIfDisposed(),ik(this,e)},px().prototype.div=function(e){return this.throwIfDisposed(),UA(this,e)},px().prototype.dot=function(e){return this.throwIfDisposed(),ok(this,e)},px().prototype.elu=function(){return this.throwIfDisposed(),uk(this)},px().prototype.equal=function(e){return this.throwIfDisposed(),rk(this,e)},px().prototype.erf=function(){return this.throwIfDisposed(),hk(this)},px().prototype.exp=function(){return this.throwIfDisposed(),ck(this)},px().prototype.expandDims=function(e){return this.throwIfDisposed(),dk(this,e)},px().prototype.expm1=function(){return this.throwIfDisposed(),pk(this)},px().prototype.fft=function(){return this.throwIfDisposed(),HS(this)},px().prototype.flatten=function(){return this.throwIfDisposed(),xw(this,[this.size])},px().prototype.floor=function(){return this.throwIfDisposed(),yk(this)},px().prototype.floorDiv=function(e){return this.throwIfDisposed(),HA(this,e)},px().prototype.gather=function(e,t){return this.throwIfDisposed(),bk(this,e,t)},px().prototype.greaterEqual=function(e){return this.throwIfDisposed(),vk(this,e)},px().prototype.greater=function(e){return this.throwIfDisposed(),xk(this,e)},px().prototype.ifft=function(){return this.throwIfDisposed(),US(this)},px().prototype.irfft=function(){return this.throwIfDisposed(),GS(this)},px().prototype.isFinite=function(){return this.throwIfDisposed(),wk(this)},px().prototype.isInf=function(){return this.throwIfDisposed(),kk(this)},px().prototype.isNaN=function(){return this.throwIfDisposed(),Sk(this)},px().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Ik(this,e)},px().prototype.lessEqual=function(e){return this.throwIfDisposed(),Ek(this,e)},px().prototype.less=function(e){return this.throwIfDisposed(),_k(this,e)},px().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Ck(this,e,t,n,r)},px().prototype.logSigmoid=function(){return this.throwIfDisposed(),Ok(this)},px().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Lk(this,e)},px().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Kk(this,e,t)},px().prototype.log=function(){return this.throwIfDisposed(),Nk(this)},px().prototype.log1p=function(){return this.throwIfDisposed(),Mk(this)},px().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Xk(this,e)},px().prototype.logicalNot=function(){return this.throwIfDisposed(),Zk(this)},px().prototype.logicalOr=function(e){return this.throwIfDisposed(),Yk(this,e)},px().prototype.logicalXor=function(e){return this.throwIfDisposed(),Jk(this,e)},px().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),tA(this,e,t,n)},px().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Qk(this,e,t,n,r)},px().prototype.max=function(e,t){return this.throwIfDisposed(),zk(this,e,t)},px().prototype.maximum=function(e){return this.throwIfDisposed(),nS(this,e)},px().prototype.mean=function(e,t){return this.throwIfDisposed(),rS(this,e,t)},px().prototype.min=function(e,t){return this.throwIfDisposed(),iS(this,e,t)},px().prototype.minimum=function(e){return this.throwIfDisposed(),oS(this,e)},px().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),lS(this,e,t)},px().prototype.mod=function(e){return this.throwIfDisposed(),uS(this,e)},px().prototype.mul=function(e){return this.throwIfDisposed(),GA(this,e)},px().prototype.neg=function(){return this.throwIfDisposed(),Rk(this)},px().prototype.norm=function(e,t,n){return this.throwIfDisposed(),dI(this,e,t,n)},px().prototype.notEqual=function(e){return this.throwIfDisposed(),pS(this,e)},px().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),nA(this,e,t,n)},px().prototype.onesLike=function(){return this.throwIfDisposed(),fS(this)},px().prototype.pad=function(e,t){return this.throwIfDisposed(),mS(this,e,t)},px().prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),yS(this,e,t,n,r,a)},px().prototype.pow=function(e){return this.throwIfDisposed(),bS(this,e)},px().prototype.prelu=function(e){return this.throwIfDisposed(),xS(this,e)},px().prototype.prod=function(e,t){return this.throwIfDisposed(),vS(this,e,t)},px().prototype.reciprocal=function(){return this.throwIfDisposed(),ES(this)},px().prototype.relu=function(){return this.throwIfDisposed(),TS(this)},px().prototype.relu6=function(){return this.throwIfDisposed(),CS(this)},px().prototype.reshapeAs=function(e){return this.throwIfDisposed(),xw(this,e.shape)},px().prototype.reshape=function(e){return this.throwIfDisposed(),xw(this,e)},px().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),qI(this,e,t,n)},px().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),KI(this,e,t,n)},px().prototype.reverse=function(e){return this.throwIfDisposed(),NS(this,e)},px().prototype.rfft=function(){return this.throwIfDisposed(),KS(this)},px().prototype.round=function(){return this.throwIfDisposed(),MS(this)},px().prototype.rsqrt=function(){return this.throwIfDisposed(),FS(this)},px().prototype.selu=function(){return this.throwIfDisposed(),DS(this)},px().prototype.separableConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),OS(this,e,t,n,r,a,s)},px().prototype.sigmoid=function(){return this.throwIfDisposed(),kw(this)},px().prototype.sign=function(){return this.throwIfDisposed(),zS(this)},px().prototype.sin=function(){return this.throwIfDisposed(),PS(this)},px().prototype.sinh=function(){return this.throwIfDisposed(),$S(this)},px().prototype.slice=function(e,t){return this.throwIfDisposed(),Sw(this,e,t)},px().prototype.softmax=function(e){return this.throwIfDisposed(),jS(this,e)},px().prototype.softplus=function(){return this.throwIfDisposed(),Dk(this)},px().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),gS(this,e,t)},px().prototype.split=function(e,t){return this.throwIfDisposed(),qS(this,e,t)},px().prototype.sqrt=function(){return this.throwIfDisposed(),XS(this)},px().prototype.square=function(){return this.throwIfDisposed(),hS(this)},px().prototype.squaredDifference=function(e){return this.throwIfDisposed(),ZS(this,e)},px().prototype.squeeze=function(e){return this.throwIfDisposed(),YS(this,e)},px().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof dx?[this,e]:[this,...e];return JS(n,t)},px().prototype.step=function(e){return this.throwIfDisposed(),QS(this,e)},px().prototype.stridedSlice=function(e,t,n,r,a,s,i,o){return this.throwIfDisposed(),eI(this,e,t,n,r,a,s,i,o)},px().prototype.sub=function(e){return this.throwIfDisposed(),Pk(this,e)},px().prototype.sum=function(e,t){return this.throwIfDisposed(),$k(this,e,t)},px().prototype.tan=function(){return this.throwIfDisposed(),tI(this)},px().prototype.tanh=function(){return this.throwIfDisposed(),Iw(this)},px().prototype.tile=function(e){return this.throwIfDisposed(),fk(this,e)},px().prototype.toBool=function(){return this.throwIfDisposed(),Pv(this,"bool")},px().prototype.toFloat=function(){return this.throwIfDisposed(),Pv(this,"float32")},px().prototype.toInt=function(){return this.throwIfDisposed(),Pv(this,"int32")},px().prototype.topk=function(e,t){return this.throwIfDisposed(),aI(this,e,t)},px().prototype.transpose=function(e){return this.throwIfDisposed(),rA(this,e)},px().prototype.unique=function(e){return this.throwIfDisposed(),iI(this,e)},px().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),oI(this,e,t)},px().prototype.unstack=function(e){return this.throwIfDisposed(),lI(this,e)},px().prototype.where=function(e,t){return this.throwIfDisposed(),ak(e,this,t)},px().prototype.zerosLike=function(){return this.throwIfDisposed(),sk(this)};var gE={kernelName:Em,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,QS(Pv(n,"float32"),-1))}}},yE={kernelName:Tm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=hS(Pv(n,"float32")),r=XS(Pk(RS(1),t));return Rk(UA(e,r))}}}},bE={kernelName:Cm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=XS(Pk(hS(Pv(n,"float32")),1));return UA(e,t)}}}},xE={kernelName:Nm,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=e,r=tk(n.shape,a);return r.length>0&&(t=$k(t,r)),xw(t,n.shape)},b:()=>{let t=e,n=tk(r.shape,a);return n.length>0&&(t=$k(t,n)),xw(t,r.shape)}}}},vE={kernelName:Mm,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},AE={kernelName:Dm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>sk(n)}}},wE={kernelName:Om,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>sk(n)}}},kE={kernelName:zm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,XS(Pk(RS(1),hS(Pv(n,"float32")))))}}},SE={kernelName:Pm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=XS(jA(RS(1),hS(Pv(n,"float32"))));return UA(e,t)}}}},IE={kernelName:Vm,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=jA(hS(n),hS(r)),s=GA(e,UA(r,t)),i=tk(n.shape,a);return i.length>0&&(s=$k(s,i)),xw(s,n.shape)},b:()=>{let t=jA(hS(n),hS(r)),s=Rk(GA(e,UA(n,t))),i=tk(r.shape,a);return i.length>0&&(s=$k(s,i)),xw(s,r.shape)}}}},_E={kernelName:$m,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,jA(hS(Pv(n,"float32")),1))}}},EE={kernelName:Lm,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,Pk(RS(1),hS(Pv(n,"float32"))))}}},TE=Hx({avgPool3dGrad_:function(e,t,n,r,a,s){let i=Wx(e,"dy","avgPool3dGrad"),o=Wx(t,"input","avgPool3dGrad"),l=i,u=o,h=!1;4===o.rank&&(h=!0,l=xw(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=xw(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Df(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Df(5===u.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),null!=s&&Df(Bf(a),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${s} but got pad ${a}.`);let c=Rx.runKernel(Hm,{dy:l,input:u},{filterSize:n,strides:r,pad:a,dimRoundingMode:s});return h?xw(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),CE={kernelName:jm,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>TE(e,r,a,s,i,o)}}},NE=Hx({avgPoolGrad_:function(e,t,n,r,a){let s=Wx(e,"dy","avgPoolGrad"),i=Wx(t,"input","avgPoolGrad");Df(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let o=i,l=s,u=!1;3===i.rank&&(u=!0,o=xw(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=xw(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Df(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Df(4===o.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);let h=Rx.runKernel(Wm,{dy:l,input:o},{filterSize:n,strides:r,pad:a});return u?xw(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),ME={kernelName:Bm,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:s,pad:i}=n;return{x:()=>NE(e,r,a,s,i)}}},FE={kernelName:Um,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:s,transposeB:i}=n;return s||i?!s&&i?{a:()=>tA(e,a,!1,!1),b:()=>tA(e,r,!0,!1)}:s&&!i?{a:()=>tA(a,e,!1,!0),b:()=>tA(r,e,!1,!1)}:{a:()=>tA(a,e,!0,!0),b:()=>tA(e,r,!0,!0)}:{a:()=>tA(e,a,!1,!0),b:()=>tA(r,e,!0,!1)}}},RE={kernelName:Gm,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>gS(e,r,a)}}},DE={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{let r=n.inputShape,a=n.shape,s=Array.from(a);for(let o=r.length-1;o>=0;o--)if(r[o]===a[o])s[o]=1;else if(1!==r[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);let i=[];for(let o=0;o<s.length;o++)s[o]>1&&i.push(o);return{x:()=>$k(e,i,!0)}}},OE={kernelName:Km,gradFunc:e=>({x:()=>e.clone()})},zE={kernelName:Xm,gradFunc:e=>({x:()=>sk(e)})},PE={kernelName:Zm,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>ak(Xk(vk(r,a),Ek(r,s)),e,sk(e))}}},$E={kernelName:Jm,inputsToSave:["x"],gradFunc:gE.gradFunc},LE={kernelName:Qm,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:a}=n,s=Kf(a,t[0].shape)[0],i=r.map(e=>e[s]);return qS(e,i,s).map(e=>()=>e)}},VE={kernelName:eg,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:s,strides:i,pad:o,dataFormat:l}=n;return Df(gw(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>Ww(r.shape,e,a,i,o,l),filter:()=>xI(r,e,a.shape,i,o,l)}}},BE={kernelName:ng,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:s,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Vw(e,a,s,i,o,1,l),filter:()=>xI(e,r,a.shape,s,i,o,l)}}},WE=Hx({conv3DBackpropFilter_:function(e,t,n,r,a){let s=e;4===e.rank&&(s=xw(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;return 4===i.rank&&(i=xw(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Df(5===s.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),Df(5===i.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),Df(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Df(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),Df(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`),Rx.runKernel(ag,{x:s,dy:i},{strides:r,pad:a,filterShape:n})}}),jE={kernelName:rg,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:s}=n;Df(gw(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[i,o]=t;return{x:()=>Uw(i.shape,e,o,a,s),filter:()=>WE(i,e,o.shape,a,s)}}},HE={kernelName:ig,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(Rk(PS(Pv(n,"float32"))),e)}}},UE={kernelName:og,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA($S(Pv(n,"float32")),e)}}},GE={kernelName:lg,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:s,reverse:i}=n;return{x:()=>{let t=Uk([a],r.rank),n=Xw(e,a,s,!i);return null!=t&&(n=rA(n,t)),n}}}},qE={kernelName:dg,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:s,dimRoundingMode:i}=n,o=null==r?[1,1]:r;Df(gw(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[l,u]=t;return Df(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Df(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),Df(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),Df(yw(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),null!=i&&Df(Bf(s),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),{x:()=>_I(l.shape,e,u,a,s,r,i),filter:()=>II(l,e,u.shape,a,s,r,i)}}},KE={kernelName:gg,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,s={x:r,filter:a,dy:e},i={x:r,filter:a,dy:e};return{x:()=>Rx.runKernel(yg,s,n),filter:()=>Rx.runKernel(bg,i,n)}}},XE={kernelName:Ag,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>Rx.runKernel(wg,r)}}},ZE={kernelName:kg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=GA(ck(Rk(hS(n))),2/Math.sqrt(Math.PI));return{x:()=>GA(e,r)}}},YE={kernelName:Ig,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,n)}}},JE={kernelName:_g,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>xw(e,n.shape)}}},QE={kernelName:Eg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,ck(n))}}},eT={kernelName:Mg,gradFunc:e=>({x:()=>sk(e)})},tT={kernelName:Fg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=UA(e,Pv(r,"float32")),s=tk(n.shape,a);return s.length>0?xw($k(t,s),n.shape):t},b:()=>{let t=GA(e,Pv(n,"float32")),s=tk(r.shape,a);s.length>0&&(t=xw($k(t,s),r.shape));let i=hS(r);return Rk(UA(t,Pv(i,"float32")))}}}},nT={kernelName:Rg,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,s,i,o]=t,l=null==o?RS(1):o,u=tk(s.shape,a.shape),h=[];if(1===s.rank){for(let e=0;e<a.shape.length-1;++e)h.push(a.shape[e]);h.push(1)}let c=Pk(a,s),d=GA(e,l),p=FS(jA(i,RS(r))),f=GA(GA(GA(p,p),p),RS(-.5));return{x:()=>xw(GA(GA(e,1===s.rank?fk(xw(p,[1,1,1,s.shape[0]]),h):p),l),a.shape),mean:()=>{let e=GA(GA(p,RS(-1)),d);return 1===s.rank&&(e=$k(e,u)),xw(e,s.shape)},variance:()=>{let e=GA(GA(f,c),d);return 1===s.rank&&(e=$k(e,u)),xw(e,s.shape)},scale:()=>{let t=GA(c,p),n=GA(e,t);return 1===s.rank&&(n=$k(n,u)),xw(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=$k(t,u)),xw(t,s.shape)}}}},rT={kernelName:Dg,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:s}=n,i=Kf(s,r.shape)[0];return{x:()=>{let t=r.shape,n=a.size,o=t.slice(0,i),l=o.length,u=t.slice(s,t.length).slice(1),h=u.length,c=aT(0,l),d=aT(l+1,l+1+h),p=sT([o,[n],u]),f=xw(e,p),m=xw(a,[n]),g=sT([[l],c,d]),y=rA(f,g),b=oI(y,m,r.shape[i]),x=Gk(g);return b=rA(b,x),b},indices:()=>a}}};function aT(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function sT(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var iT={kernelName:Pg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>sk(n),b:()=>sk(r)}}},oT={kernelName:$g,gradFunc:e=>({x:()=>Pv(e,"float32")})},lT={kernelName:Bg,gradFunc:e=>({x:()=>sk(e)})},uT={kernelName:Wg,gradFunc:e=>({x:()=>sk(e)})},hT={kernelName:jg,gradFunc:e=>({x:()=>sk(e)})},cT={kernelName:Hg,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,s=xk(r,0);return{x:()=>ak(s,e,GA(e,a))}}},dT={kernelName:Xg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,jA(n,1))}}},pT={kernelName:Kg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,Pv(n,"float32"))}}},fT={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let t=ck(r);return Pk(e,GA($k(e,a,!0),t))}}}},mT=Hx({localResponseNormalizationBackprop_:function(e,t,n,r=5,a=1,s=1,i=.5){return Rx.runKernel(ey,{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:s,beta:i})}}),gT={kernelName:Qg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:s,bias:i,alpha:o,beta:l}=n;return{x:()=>mT(r,a,e,s,i,o,l)}}};function yT(e,t,n,r){return t.rank<n.rank&&(t=xw(t,jk(t.shape,r))),e.rank<n.rank&&(e=xw(e,jk(e.shape,r))),{x:()=>GA(e,Pv(rk(n,t),e.dtype))}}var bT={kernelName:ty,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:a}=r,s=t[0],i=yT(e,t[1],s,Kf(a,s.shape));return{x:()=>i.x()}}},xT={kernelName:ny,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>GA(e,Pv(vk(n,r),"float32")),b:()=>GA(e,Pv(_k(n,r),"float32"))}}},vT=Hx({maxPool3dGrad_:function(e,t,n,r,a,s,i){let o=Wx(e,"dy","maxPool3dGrad"),l=Wx(t,"input","maxPool3dGrad"),u=Wx(n,"output","maxPool3dGrad"),h=o,c=l,d=u,p=!1;4===l.rank&&(p=!0,h=xw(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=xw(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=xw(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Df(5===h.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),Df(5===c.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Df(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),null!=i&&Df(Bf(s),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`);let f=Rx.runKernel(iy,{dy:h,input:c,output:d},{filterSize:r,strides:a,pad:s,dimRoundingMode:i});return p?xw(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),AT={kernelName:sy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>vT(e,r,a,s,i,o,l)}}},wT=Hx({maxPoolGrad_:function(e,t,n,r,a,s,i){let o=Wx(e,"dy","maxPoolGrad"),l=Wx(t,"input","maxPoolGrad"),u=Wx(n,"output","maxPoolGrad");return Df(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),Df(4===o.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),Df(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),null!=i&&Df(Bf(s),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),Rx.runKernel(ay,{dy:o,input:l,output:u},{filterSize:r,strides:a,pad:s,dimRoundingMode:i})}}),kT={kernelName:ky,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>Sw(e,s,r.shape)}}},ST={kernelName:Yy,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>_w(e,r,a)}}},IT={kernelName:Jy,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>ww(e,r)}}},_T=[gE,yE,bE,xE,vE,AE,wE,kE,SE,IE,_E,EE,CE,ME,FE,RE,DE,OE,zE,PE,$E,LE,BE,VE,jE,HE,UE,GE,qE,KE,{kernelName:xg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=UA(e,Pv(r,"float32")),s=tk(n.shape,a);return s.length>0?xw($k(t,s),n.shape):t},b:()=>{let t=GA(e,Pv(n,"float32")),s=tk(r.shape,a);s.length>0&&(t=xw($k(t,s),r.shape));let i=hS(r);return Rk(UA(t,Pv(i,"float32")))}}}},XE,ZE,YE,JE,QE,tT,eT,nT,rT,iT,oT,lT,uT,hT,cT,dT,pT,fT,gT,bT,bT,xT,AT,{kernelName:ry,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:s,strides:i,pad:o}=n;return{x:()=>wT(e,r,a,s,i,o)}}},{kernelName:ly,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,s=Kf(a,r.shape),i=$f(Wk(r.shape,s)[1]);return{x:()=>{let t=r.shape.slice();s.forEach(e=>{t[e]=1});let n=xw(e,t);return UA(GA(n,sS(r.shape,"float32")),i)}}}},{kernelName:uy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:a}=r,[s,i]=t,o=yT(e,i,s,Kf(a,s.shape));return{x:()=>o.x()}}},{kernelName:hy,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>GA(e,Pv(Ek(n,r),"float32")),b:()=>GA(e,Pv(xk(n,r),"float32"))}}},{kernelName:cy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>Sw(e,s,r.shape)}}},{kernelName:dy,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=tk(n.shape,a);return t.length>0?xw($k(e,t),n.shape):e},b:()=>{let t=GA(e,Rk(yk(UA(n,r)))),s=tk(r.shape,a);return s.length>0?xw($k(t,s),r.shape):t}}}},{kernelName:fy,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=GA(e,Pv(r,"float32")),s=tk(n.shape,a);return s.length>0?xw($k(t,s),n.shape):t},b:()=>{let t=GA(e,Pv(n,"float32")),s=tk(r.shape,a);return s.length>0?xw($k(t,s),r.shape):t}}}},{kernelName:my,gradFunc:e=>({x:()=>Rk(e)})},{kernelName:Ay,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>aS(n.shape,"float32")}}},{kernelName:vy,gradFunc:e=>({x:()=>sk(e)})},{kernelName:wy,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return lI(e,r).map(e=>()=>e)}},kT,kT,{kernelName:Sy,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,s=n,i=r,o=nk(s.shape,i.shape);return{a:()=>{let t=Pv(i,"float32"),n=GA(e,GA(t,bS(s,Pk(t,RS(1))))),r=tk(s.shape,o);return r.length>0&&(n=$k(n,r)),xw(n,s.shape)},b:()=>{let t=xk(s,0),n=ak(t,Nk(s),sk(s)),r=GA(e,GA(a,n)),l=tk(i.shape,o);return l.length>0&&(r=$k(r,l)),xw(r,i.shape)}}}},{kernelName:Iy,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=xk(n,0);return{x:()=>ak(a,e,GA(e,r)),alpha:()=>{let t=ak(a,sk(e),GA(e,n)),s=tk(r.shape,e.shape);return s.length>0&&(t=$k(t,s)),xw(t,r.shape)}}}},{kernelName:Cy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,Rk(hS(n)))}}},{kernelName:zy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=GA(Ek(n,6),QS(n));return{x:()=>GA(e,Pv(r,"float32"))}}},{kernelName:Ny,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,Pv(QS(n),"float32"))}}},{kernelName:My,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>xw(e,n.shape)}}},{kernelName:Dy,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>Rx.runKernel(Oy,a,n)}}},{kernelName:Fy,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>Rx.runKernel(Ry,a,n)}}},{kernelName:Py,gradFunc:(e,t,n)=>{let{dims:r}=n,a=Kf(r,e.shape);return{x:()=>NS(e,a)}}},{kernelName:$y,gradFunc:e=>({x:()=>sk(e)})},{kernelName:Ly,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Rk(UA(e,GA(bS(n,1.5),2)))}}},{kernelName:By,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>Pv(sk(n),"float32"),t:()=>GA(e,Pv(n,e.dtype)),e:()=>GA(e,Pv(Zk(n),e.dtype))}}},{kernelName:Wy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=xk(n,RS(0)),r=RS(P_),a=RS($_),s=GA(e,a),i=GA(GA(e,r),ck(Pv(n,"float32")));return ak(t,s,i)}}}},{kernelName:qy,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,GA(n,Pk(RS(1),n)))}}},{kernelName:Gy,gradFunc:e=>({x:()=>sk(e)})},{kernelName:Hy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(qw(Pv(n,"float32")),e)}}},{kernelName:Uy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(Kw(Pv(n,"float32")),e)}}},{kernelName:jy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:s}=n,i=r.shape,[o,l]=MA(r,a,s),u=[];for(let h=0;h<e.rank;h++)u.push([o[h],i[h]-o[h]-l[h]]);return{x:()=>mS(e,u)}}},{kernelName:Qy,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,s=GA(e,r);return{logits:()=>Pk(s,GA($k(s,[a],!0),r))}}},{kernelName:Ky,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,kw(n))}}},ST,ST,IT,IT,{kernelName:Xy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,GA(XS(Pv(n,"float32")),2))}}},{kernelName:sb,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=RS(2);return{a:()=>GA(e,GA(a,Pk(n,r))),b:()=>GA(e,GA(a,Pk(r,n)))}}},{kernelName:ib,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(e,GA(Pv(n,"float32"),2))}}},{kernelName:wb,gradFunc:e=>({x:()=>sk(e)})},{kernelName:cb,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=nk(n.shape,r.shape);return{a:()=>{let t=e,r=tk(n.shape,a);return r.length>0&&(t=$k(t,r)),xw(t,n.shape)},b:()=>{let t=e,n=tk(r.shape,a);return n.length>0&&(t=$k(t,n)),xw(Rk(t),r.shape)}}}},{kernelName:Zy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:s}=n;Kf(s,r.shape).forEach(e=>{a[e]=1});let i=xw(e,a),o=GA(i,sS(r.shape,"float32"));return{x:()=>o}}},{kernelName:db,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>UA(e,hS(qw(n)))}}},{kernelName:pb,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>GA(Pk(RS(1),hS(n)),e)}}},{kernelName:fb,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let t=sk(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=jA(t,Sw(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)t=jA(t,Sw(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)t=jA(t,Sw(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)for(let o=0;o<a[3];++o)t=jA(t,Sw(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:yb,gradFunc:(e,t,n)=>{let r=n,{perm:a}=r,s=Gk(a);return{x:()=>rA(e,s)}}},{kernelName:xb,gradFunc:(e,t,n)=>{let r=n,{axis:a}=r;return{value:()=>JS(e,a)}}},{kernelName:vb,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>function(e,t){let n=nS(t,sk(t)),r=bk(e,n),a=vk(t,RS(0,"int32")),s=r.rank-a.rank;for(let o=0;o<s;++o)a=dk(a,o+1);a=Xk(a,sS(r.shape,"bool"));let i=sk(r);return ak(a,r,i)}(e,n)}}},{kernelName:Ab,gradFunc:e=>({x:()=>sk(e)})}];for(let b6 of _T)Db(b6);var ET,TT={};function CT(){return null==ET&&(ET=Rx.backend.epsilon()),ET}I(TT,{maxNorm:()=>hC,minMaxNorm:()=>pC,nonNeg:()=>dC,unitNorm:()=>cC});var NT=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,NT.prototype)}},MT=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,MT.prototype)}},FT=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,FT.prototype)}},RT=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,RT.prototype)}},DT=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,DT.prototype)}};function OT(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=new Array(t);return n.fill(e),n}}function zT(e,t){if(!e)throw new DT(t)}function PT(e,t){let n=0;for(let r of e)r===t&&n++;return n}function $T(e){return 1===e.length?e[0]:e}function LT(e){return Array.isArray(e)?e:[e]}function VT(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function BT(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}var WT={};function jT(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function HT(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>HT(e));else{let t=Object.keys(e);for(let n of t){let t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?HT(t):e[n]=t.value)}}}function UT(e,t={},n={},r="object",a=!1){if("string"==typeof e){let a,s=e;if(s in n)a=n[s];else if(s in WT)a=WT[s];else if(a=t[s],null==a)throw new FT(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{let s=e;if(null==s.className||null==s.config)throw new FT(`${r}: Improper config format: ${JSON.stringify(s)}.\n'className' and 'config' must set.`);let i,o,l=s.className;if(l in n?[i,o]=n[l]:l in WT?[i,o]=WT.className:l in t&&([i,o]=t[l]),null==i)throw new FT(`Unknown ${r}: ${l}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=o){let e={};for(let n of Object.keys(WT))e[n]=WT[n];for(let a of Object.keys(n))e[a]=n[a];s.config.customObjects=e;let t={...WT};for(let a of Object.keys(n))WT[a]=n[a];HT(s.config);let r=o(i,s.config,n,a);return WT={...t},r}{let e={...WT};for(let r of Object.keys(n))WT[r]=n[r];let t=new i(s.config);return WT={...e},t}}}function GT(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function qT(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function KT(e){if(null==e)throw new FT("Invalid value in obj: "+JSON.stringify(e));for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function XT(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new FT(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function ZT(e,t,n=0,r=1/0){return zT(n>=0),zT(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function YT(e,t){Array.isArray(e)?(zb.assert(e.length>0,()=>t+" is unexpectedly an empty array."),e.forEach((e,n)=>YT(e,`element ${n+1} of ${t}`))):zb.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${JT(e)}.`)}function JT(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>JT(e)).join(",")+"]":"string"==typeof e?`"${e}"`:""+e}function QT(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function eC(e,t){return LA(()=>XS($k(GA(e,e),t,!0)))}var tC=class extends RA.Serializable{getConfig(){return{}}},nC=class extends tC{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return LA(()=>{let t=eC(e,this.axis),n=Ow(t,0,this.maxValue);return GA(e,UA(n,jA(CT(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};nC.className="MaxNorm",RA.registerClass(nC);var rC=class extends tC{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return LA(()=>UA(e,jA(CT(),eC(e,this.axis))))}getConfig(){return{axis:this.axis}}};rC.className="UnitNorm",RA.registerClass(rC);var aC=class extends tC{apply(e){return TS(e)}};aC.className="NonNeg",RA.registerClass(aC);var sC=class extends tC{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return LA(()=>{let t=eC(e,this.axis),n=jA(GA(this.rate,Ow(t,this.minValue,this.maxValue)),GA(1-this.rate,t));return GA(e,UA(n,jA(CT(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};sC.className="MinMaxNorm",RA.registerClass(sC);var iC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function oC(e){return jT(e)}function lC(e,t={}){return UT(e,RA.SerializationMap.getMap().classNameMap,t,"constraint")}function uC(e){return null==e?null:"string"==typeof e?lC({className:e in iC?iC[e]:e,config:{}}):e instanceof tC?e:lC(e)}function hC(e){return new nC(e)}function cC(e){return new rC(e)}function dC(){return new aC}function pC(e){return new sC(e)}var fC={};I(fC,{constant:()=>AN,glorotNormal:()=>TN,glorotUniform:()=>EN,heNormal:()=>CN,heUniform:()=>NN,identity:()=>IN,leCunNormal:()=>MN,leCunUniform:()=>FN,ones:()=>vN,orthogonal:()=>RN,randomNormal:()=>kN,randomUniform:()=>wN,truncatedNormal:()=>SN,varianceScaling:()=>_N,zeros:()=>xN});var mC=["channelsFirst","channelsLast"],gC=["nearest","bilinear"],yC=["valid","same","causal"],bC=["max","avg"],xC=["sum","mul","concat","ave"],vC=new Map;function AC(e){XT(mC,"DataFormat",e)}function wC(e){XT(yC,"PaddingMode",e)}function kC(e){XT(bC,"PoolMode",e)}var SC=[];function IC(e,t){SC.push(e);try{let e=t();return SC.pop(),e}catch(n){throw SC.pop(),n}}function _C(e){if(!CC(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===SC.length?"":SC.join("/")+"/")+e}function EC(e){if(!CC(e))throw new Error("Not a valid tensor name: '"+e+"'");vC.has(e)||vC.set(e,0);let t=vC.get(e);if(vC.set(e,vC.get(e)+1),t>0){let n=`${e}_${t}`;return vC.set(n,1),n}return e}var TC=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function CC(e){return!!e.match(TC)}function NC(e){return e===parseInt(e.toString(),10)}function MC(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function FC(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function RC(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function DC(e,t){if(t<e)throw new FT(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}function OC(e,t){return e.asType(t)}function zC(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function PC(e,t,n){return LA(()=>{switch(e.rank){case 1:return LS(e,t,n);case 2:return VS(e,[t,0],[n,e.shape[1]]);case 3:return BS(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return WS(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Sw(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Sw(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new FT("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function $C(e,t,n){return LA(()=>{switch(e.rank){case 1:return LS(e,t,n);case 2:return VS(e,[0,t],[e.shape[0],n]);case 3:return BS(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return WS(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new FT("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function LC(e,t,n,r){return LA(()=>{switch(e.rank){case 1:return LS(e,t,n);case 2:switch(r){case 1:return PC(e,t,n);case 2:return $C(e,t,n);default:throw new FT("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return PC(e,t,n);case 2:return BS(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return $C(e,t,n);default:throw new FT("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return PC(e,t,n);case 2:return WS(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return WS(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return $C(e,t,n);default:throw new FT("The axis is not within the rank of the tensor "+r)}default:throw new FT("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function VC(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),ww(e,t)}function BC(e,t){switch(e.rank){case 1:return zw([e,t]);case 2:return Pw([e,t],0);case 3:return $w([e,t],0);case 4:return Lw([e,t],0);default:throw new FT("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function WC(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new FT(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return fk(e,t)}function jC(e,t=0,n=1,r,a){return kS(e,t,n,r,a)}function HC(e,t,n,r){if(e.rank<2||t.rank<2)throw new RT(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new RT(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return bI.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?qC(e.rank,r,"channelsLast"):null,activation:n});{let a=e.shape.slice(),s=a.pop();e=e.reshape([-1,s]);let i=t.shape.slice(),o=i.pop(),l=i.pop(),u=[...i,o],h=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=t.transpose(h).reshape([l,-1]);let c=[...a,...u];return bI.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?qC(e.rank,r,"channelsLast"):null,activation:n}).reshape(c)}}function UC(e,t,n){return LA(()=>(t=Array.isArray(t)?nI(t,"int32"):t.toInt(),bk(e,t,n)))}function GC(e){return GA(e,e)}function qC(e,t,n){let r=t.shape;if(1!==t.rank&&t.rank!==e)throw new FT(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return t;throw new FT("Unsupported input rank by biasAdd: "+t.rank)}function KC(e,t,n){return LA(()=>(null==n&&(n="channelsLast"),AC(n),e.add(qC(e.rank,t,n))))}function XC(e,t,n,r){return LA(()=>gI(e,t,n,r))}function ZC(e,t,n=!1){return n?e():t()}var YC=["fanIn","fanOut","fanAvg"],JC=["normal","uniform","truncatedNormal"],QC=class extends RA.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},eN=class extends QC{apply(e,t){return aS(e,t)}};eN.className="Zeros",RA.registerClass(eN);var tN=class extends QC{apply(e,t){return sS(e,t)}};tN.className="Ones",RA.registerClass(tN);var nN=class extends QC{constructor(e){if(super(),"object"!=typeof e)throw new FT("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new FT("config must have value set but got "+e);this.value=e.value}apply(e,t){return LA(()=>GA(RS(this.value),sS(e,t)))}getConfig(){return{value:this.value}}};nN.className="Constant",RA.registerClass(nN);var rN=class extends QC{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return SS(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};rN.className="RandomUniform",RA.registerClass(rN);var aN=class extends QC{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new RT(`randomNormal does not support dType ${t}.`);return jC(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};aN.className="RandomNormal",RA.registerClass(aN);var sN=class extends QC{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new RT(`truncatedNormal does not support dType ${t}.`);return sI(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};sN.className="TruncatedNormal",RA.registerClass(sN);var iN=class extends QC{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return LA(()=>{if(2!==e.length||e[0]!==e[1])throw new FT("Identity matrix initializer can only be used for 2D square matrices.");return GA(this.gain,mk(e[0]))})}getConfig(){return{gain:this.gain}}};iN.className="Identity",RA.registerClass(iN);var oN=class extends QC{constructor(e){if(super(),e.scale<0)throw new FT("scale must be a positive float. Got: "+e.scale);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){XT(YC,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){XT(JC,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){let n=function(e,t="channelsLast"){let n,r;if(AC(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){let t=MC(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){let t=MC(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{let t=MC(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],a=n[1],s=this.scale;if(s/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,a):Math.max(1,(r+a)/2),"normal"===this.distribution){let n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new RT(`${this.getClassName()} does not support dType ${t}.`);return sI(e,0,n,t,this.seed)}{let n=Math.sqrt(3*s);return SS(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};oN.className="VarianceScaling",RA.registerClass(oN);var lN=class extends oN{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return oN.className}};lN.className="GlorotUniform",RA.registerClass(lN);var uN=class extends oN{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return oN.className}};uN.className="GlorotNormal",RA.registerClass(uN);var hN=class extends oN{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return oN.className}};hN.className="HeNormal",RA.registerClass(hN);var cN=class extends oN{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return oN.className}};cN.className="HeUniform",RA.registerClass(cN);var dN=class extends oN{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return oN.className}};dN.className="LeCunNormal",RA.registerClass(dN);var pN=class extends oN{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return oN.className}};pN.className="LeCunNormal",RA.registerClass(pN);var fN=class extends QC{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new RT("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return LA(()=>{if(e.length<2)throw new RT("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let t=jC(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),n=c_.gramSchmidt(t);return e[0]>e[1]&&(n=n.transpose()),GA(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}};fN.className="Orthogonal",RA.registerClass(fN);var mN={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function gN(e,t={}){return UT(e,RA.SerializationMap.getMap().classNameMap,t,"initializer")}function yN(e){return jT(e)}function bN(e){if("string"==typeof e){let t=e in mN?mN[e]:e;if("GlorotNormal"===t)return new uN;if("GlorotUniform"===t)return new lN;if("HeNormal"===t)return new hN;if("HeUniform"===t)return new cN;if("LeCunNormal"===t)return new dN;if("LeCunUniform"===t)return new pN;{let e={};return e.className=t,e.config={},gN(e)}}return e instanceof QC?e:gN(e)}function xN(){return new eN}function vN(){return new tN}function AN(e){return new nN(e)}function wN(e){return new rN(e)}function kN(e){return new aN(e)}function SN(e){return new sN(e)}function IN(e){return new iN(e)}function _N(e){return new oN(e)}function EN(e){return new lN(e)}function TN(e){return new uN(e)}function CN(e){return new hN(e)}function NN(e){return new cN(e)}function MN(e){return new dN(e)}function FN(e){return new pN(e)}function RN(e){return new fN(e)}var DN={};I(DN,{Layer:()=>QN,RNN:()=>TR,RNNCell:()=>CR,activation:()=>XD,add:()=>aO,alphaDropout:()=>KO,average:()=>sO,averagePooling1d:()=>fO,averagePooling2d:()=>yO,averagePooling3d:()=>vO,avgPool1d:()=>mO,avgPool2d:()=>bO,avgPool3d:()=>AO,avgPooling1d:()=>gO,avgPooling2d:()=>xO,avgPooling3d:()=>wO,batchNormalization:()=>cO,bidirectional:()=>VO,concatenate:()=>iO,conv1d:()=>VD,conv2d:()=>BD,conv2dTranspose:()=>WD,conv3d:()=>jD,conv3dTranspose:()=>HD,convLstm2d:()=>zO,convLstm2dCell:()=>PO,cropping2D:()=>GD,dense:()=>ZD,depthwiseConv2d:()=>KD,dot:()=>hO,dropout:()=>YD,elu:()=>DD,embedding:()=>rO,flatten:()=>QD,gaussianDropout:()=>qO,gaussianNoise:()=>GO,globalAveragePooling1d:()=>kO,globalAveragePooling2d:()=>SO,globalMaxPool1d:()=>WO,globalMaxPool2d:()=>jO,globalMaxPooling1d:()=>IO,globalMaxPooling2d:()=>_O,gru:()=>NO,gruCell:()=>MO,input:()=>IF,inputLayer:()=>RD,layerNormalization:()=>dO,leakyReLU:()=>zD,lstm:()=>FO,lstmCell:()=>RO,masking:()=>XO,maxPool1d:()=>HO,maxPool2d:()=>UO,maxPooling1d:()=>EO,maxPooling2d:()=>TO,maxPooling3d:()=>CO,maximum:()=>oO,minimum:()=>lO,multiply:()=>uO,permute:()=>nO,prelu:()=>PD,reLU:()=>OD,repeatVector:()=>eO,reshape:()=>tO,rnn:()=>$O,separableConv2d:()=>UD,simpleRNN:()=>DO,simpleRNNCell:()=>OO,softmax:()=>$D,spatialDropout1d:()=>JD,stackedRNNCells:()=>LO,thresholdedReLU:()=>LD,timeDistributed:()=>BO,upSampling2d:()=>qD,zeroPadding2d:()=>pO});var ON=0;function zN(){return ON++}var PN={};function $N(e=""){return e in PN||(PN[e]=0),PN[e]+=1,e+PN[e].toString()}function LN(e){return Array.isArray(e)&&Array.isArray(e[0])}function VN(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function BN(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new FT("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function WN(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new FT("Expected exactly 1 Shape; got "+e.length)}return e}function jN(e){let t=0;for(let n of e)t+=0===n.shape.length?1:n.shape.reduce((e,t)=>e*t);return t}var HN="Variable",UN=class{constructor(e,t="float32",n=HN,r=!0,a=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=zN(),this.originalName=_C(n=null==n?HN:n),this.name=EC(this.originalName),this.trainable_=r,this.constraint=a,this.val=function(e,t=!0,n,r){return Rx.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function GN(e){return e.map(e=>e.read())}function qN(e){e.forEach(e=>{e[0].write(e[1])})}var KN=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,this.ndim=null!=e.shape?e.shape.length:e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},XN=class{constructor(e,t,n,r,a,s,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=i,this.id=zN(),null!=s&&(this.originalName=_C(s),this.name=EC(this.originalName)),this.rank=t.length}},ZN=0,YN=class{constructor(e,t){this.callArgs=t,this.id=ZN++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)e.push(null!=t?t.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},JN=0,QN=class extends RA.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=JN++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=VT(e)+"_"+$N(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=e.weights?e.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new MT(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new FT(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return $T(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return $T(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new NT(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new NT(`Layer ${this.name} is not connected, no input to return.`);return $T(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new NT(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new NT(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return $T(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=LT(e),null==this.inputSpec||0===this.inputSpec.length)return;let t=LT(this.inputSpec);if(e.length!==t.length)throw new FT(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let r=e[n],a=t[n];if(null==a)continue;let s=r.rank;if(null!=a.ndim&&s!==a.ndim)throw new FT(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new FT(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new FT(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new FT(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){let e=r.shape;for(let t in a.axes){let r=Number(t),s=a.axes[t],i=r>=0?e[r]:e[e.length+r];if(null!=s&&-1===[s,null].indexOf(i))throw new FT(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${e}.`)}}if(null!=a.shape)for(let e=0;e<a.shape.length;++e){let t=a.shape[e],s=r.shape[e];if(null!=t&&null!=s&&t!==s)throw new FT(`Input ${n} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=LT(e),r=!0;for(let s of n)if(!(s instanceof XN)){r=!1;break}let a=!0;for(let s of n)if(s instanceof XN){a=!1;break}if(r===a)throw new FT("Arguments to apply() must be all SymbolicTensors or all Tensors");return IC(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of LT(e))t.push(n.shape);this.build($T(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t),a=LT(r),s=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=$T(s),null!=this.activityRegularizer)throw new RT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n,r=function(e){e=LT(e);let t=[];for(let n of e)t.push(n.shape);return $T(t)}(e),a=this.computeOutputShape(r),s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((n,r)=>new XN(s,n,this,LT(e),t,this.name,r)):new XN(s,a,this,LT(e),t,this.name),this.addInboundNode(e,n,null,null,r,a,t),this._refCount++,null!=this.activityRegularizer)throw new RT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new NT(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new NT(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new MT(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return jN(this.weights)}build(e){this.built=!0}getWeights(e=!1){return GN(e?this.trainableWeights:this.weights)}setWeights(e){LA(()=>{let t=this.weights;if(t.length!==e.length)throw new FT(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;let n=[],r=GN(t);for(let a=0;a<r.length;++a){let s=r[a],i=t[a],o=e[a];if(!zb.arraysEqual(s.shape,o.shape))throw new FT(`Layer weight shape ${s.shape} not compatible with provided weight shape ${o.shape}`);n.push([i,o])}qN(n)})}addWeight(e,t,n,r,a,s,i){if(-1!==this._addedWeightNames.indexOf(e))throw new FT(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=bN("zeros"));let o=r.apply(t,n),l=new UN(o,n,e,s,i);return o.dispose(),null!=a&&this.addLoss(()=>a.apply(l.read())),null==s&&(s=!0),s?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=LT(e),null!=this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach(e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return t}addInboundNode(e,t,n,r,a,s,i=null){let o=LT(e);t=LT(t),n=LT(n),r=LT(r),a=VN(a),s=VN(s);let l=[],u=[],h=[];for(let c of o)l.push(c.sourceLayer),u.push(c.nodeIndex),h.push(c.tensorIndex);new YN({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:h,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:s},i);for(let c=0;c<t.length;c++)t[c].sourceLayer=this,t[c].nodeIndex=this.inboundNodes.length-1,t[c].tensorIndex=c}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function eM(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{let e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{let t=[];for(let n=0;n<e.inboundLayers.length;n++){let r=eM(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(let e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}var tM,nM=class extends QN{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:$N("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new FT("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new FT("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new FT("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new XN(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new YN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new FT("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};function rM(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new FT("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new nM({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}async function aM(e){if(null==e)return;let t=[],n=[],r=[];for(let a in e){let s=e[a];if("number"!=typeof s){let e=s;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){let a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];VA(r)}}function sM(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}nM.className="InputLayer",RA.registerClass(nM),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(tM||(tM={}));var iM=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},oM=class{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},lM=class extends iM{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;this.seen+=n;for(let r in t){let e=t[r];if("number"==typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;let a=LA(()=>jA(this.totals[r],GA(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?t[n]=this.totals[n]/this.seen:LA(()=>{let e=GA(UA(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),BA(t[n])}))}},uM=class extends iM{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(let n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let a in this.history){let r=this.history[a];for(let s=0;s<r.length;++s)"number"!=typeof r[s]&&(e.push(r[s].data()),t.push(a),n.push(s))}let r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}},hM=class extends iM{constructor(e,t){if(super(),this.currentEpoch=0,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");zb.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t){let n,r=zb.now();return(...a)=>{let s=zb.now();return s-r<t||(r=s,n=e(...a)),n}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await aM(n),r.push(this.yield(e,t,n))),r.push(I_()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await aM(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await aM(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(I_()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await aM(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await aM(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(I_()):zb.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await aM(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await aM(e),await this.trainEnd(e))}};function cM(e,t){return null==e&&(e={}),e instanceof iM?[e]:Array.isArray(e)&&e[0]instanceof iM?e:LT(e).map(e=>new hM(e,t))}var dM=class{constructor(){}static registerCallbackConstructor(e,t){zb.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, but got "+e),dM.checkForDuplicate(t),null==dM.constructors[e]&&(dM.constructors[e]=[]),dM.constructors[e].push(t)}static checkForDuplicate(e){for(let t in dM.constructors)dM.constructors[+t].forEach(t=>{if(t===e)throw new FT("Duplicate callback constructor.")})}static clear(){dM.constructors={}}static createCallbacks(e){let t=[];for(let n in dM.constructors){let r=+n;e>=r&&t.push(...dM.constructors[r])}return t.map(e=>new e)}},pM=dM;function fM(e,t,n,r,a,s,i,o,l){let u=new uM,h=[new lM,...pM.createCallbacks(t)];null!=e&&h.push(...e),h.push(u);let c=new oM(h);return c.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:i,verbose:t,doValidation:o,metrics:l}),{callbackList:c,history:u}}function mM(e,t={},n=!1){return UT(e,RA.SerializationMap.getMap().classNameMap,t,"layer",n)}function gM(e,t){return LA(()=>{"float32"!==e.dtype&&(e=e.asType("float32"));let n=$k(GC(e),t,!0),r=gk(n.shape,CT()),a=XS(nS(n,r));return UA(e,a)})}function yM(e,t){return LA(()=>rS(GC(Pk(t,e)),-1))}function bM(e,t){return LA(()=>rS(qA(Pk(t,e)),-1))}function xM(e,t){return LA(()=>{let n=Pk(e,t),r=Ow(qA(e),CT(),Number.MAX_VALUE),a=qA(UA(n,r));return GA(100,rS(a,-1))})}function vM(e,t,n=!1){return LA(()=>{if(n)t=jS(t);else{let e=$k(t,t.shape.length-1,!0);t=UA(t,e)}return t=Ow(t,CT(),1-CT()),Rk($k(GA(e.toFloat(),Nk(t)),t.shape.length-1))})}function AM(e,t,n=!1){return LA(()=>{let r=yk(function(e){let t=[MC(e.shape)];return e.reshape(t)}(e)).toInt(),a=(t=Ow(t,CT(),1-CT())).shape;return vM(nA(r,a[a.length-1]).reshape(a),t,n)})}function wM(e,t){return LA(()=>{let n;return n=Ow(t,CT(),1-CT()),n=Nk(UA(n,Pk(1,n))),rS(function(e,t){if(!zb.arraysEqual(e.shape,t.shape))throw new FT(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return LA(()=>{let n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())})}(e,n),-1)})}function kM(e,t){return LA(()=>{let n=gM(e,-1),r=gM(t,-1),a=GA(n,r);return Rk($k(a,-1))})}pM.constructors={};var SM={meanSquaredError:yM,meanAbsoluteError:bM,meanAbsolutePercentageError:xM,meanSquaredLogarithmicError:function(e,t){return LA(()=>{let n=Ow(t,CT(),Number.MAX_VALUE),r=Nk(jA(1,n)),a=Ow(e,CT(),Number.MAX_VALUE),s=Nk(jA(1,a));return rS(GC(Pk(r,s)),-1)})},squaredHinge:function(e,t){return LA(()=>{let n=nS(0,Pk(1,GA(e,t)));return rS(GC(n),-1)})},hinge:function(e,t){return LA(()=>{let n=nS(0,Pk(1,GA(e,t)));return rS(n,-1)})},categoricalHinge:function(e,t){return LA(()=>{let n=$k(GA(e,t),-1),r=zk(GA(Pk(1,e),t),-1);return nS(0,jA(1,Pk(r,n)))})},logcosh:function(e,t){return LA(()=>{let n=Math.log(2),r=Pk(t,e),a=Pk(jA(r,Dk(GA(-2,r))),n);return rS(a,-1)})},categoricalCrossentropy:vM,sparseCategoricalCrossentropy:AM,binaryCrossentropy:wM,kullbackLeiblerDivergence:function(e,t){return LA(()=>{let n=Ow(e,CT(),1),r=Ow(t,CT(),1);return $k(GA(e,Nk(UA(n,r))),-1)})},poisson:function(e,t){return LA(()=>{let n=Nk(jA(CT(),t));return rS(Pk(t,GA(e,n)),-1)})},cosineProximity:kM};function IM(e){if("string"==typeof e){if(e in SM)return SM[e];let t="Unknown loss "+e;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new FT(t)}return e}function _M(e,t){return LA(()=>{let n=GA(.5,fS(t)),r=OC(xk(t,n),e.dtype);return rS(rk(e,r),-1)})}function EM(e,t){return LA(()=>OC(rk(QA(e,-1),QA(t,-1)),"float32"))}function TM(e,t){return LA(()=>Xk(e.equal(1),t.equal(1)).sum().cast("float32"))}function CM(e,t){return LA(()=>{let n=TM(e,t),r=function(e,t){return LA(()=>Xk(e.equal(0),t.equal(1)).sum().cast("float32"))}(e,t),a=n.add(r);return ak(xk(a,0),n.div(a),0).cast("float32")})}function NM(e,t){return wM(e,t)}function MM(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),rk(e,t).asType("float32")}var FM=vM,RM=AM,DM={binaryAccuracy:_M,categoricalAccuracy:EM,precision:CM,categoricalCrossentropy:FM,sparseCategoricalCrossentropy:RM,mse:yM,MSE:yM,mae:bM,MAE:bM,mape:xM,MAPE:xM,cosine:kM};function OM(e){if("string"==typeof e&&e in DM)return DM[e];if("string"!=typeof e&&null!=e)return e;throw new FT("Unknown metric "+e)}function zM(e){if(zT(null!==e,"Unknown LossOrMetricFn "+e),"string"==typeof e)return e;{let t;for(let n of Object.keys(SM))if(SM[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(DM))if(DM[n]===e){t=n;break}return void 0!==t?t:e.name}}var PM=1048576;function $M(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!LM(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>PM&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${PM}.`)}}function LM(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let n of t)if("string"!=typeof n||!LM(e[n]))return!1;return!0}if(Array.isArray(e)){for(let t of e)if(!LM(t))return!1;return!0}return!1}{let t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function VM(e,t,n=console.log){let r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function BM(e,t,n){let r;try{r=JSON.stringify(e.outputShape)}catch(a){r="multiple"}VM([`${e.name} (${e.getClassName()})`,r,e.countParams().toString()],t,n)}function WM(e,t,n,r){let a;try{a=JSON.stringify(e.outputShape)}catch(u){a="multiple"}let s=[];for(let h of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(h)))for(let e=0;e<h.inboundLayers.length;++e)s.push(`${h.inboundLayers[e].name}[${h.nodeIndices[e]}][${h.tensorIndices[e]}]`);let i=e.name,o=e.getClassName(),l=0===s.length?"":s[0];VM([`${i} (${o})`,a,e.countParams().toString(),l],t,r);for(let h=1;h<s.length;++h)VM(["","","",s[h]],t,r)}function jM(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function HM(e,t){if(null===e)return null;if("string"==typeof e)return BT(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let r=e[a];jM(t,a,r)?n.push(r):n.push(HM(r,t))}return n}{let t={};for(let n of Object.keys(e)){let r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{let e=BT(n);t[e]=HM(r,e)}}return t}}function UM(e,t){if(null==e)return null;if("string"==typeof e)return VT(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let r=e[a];jM(t,a,r)?n.push(r):n.push(UM(r,t))}return n}{let t={};for(let n of Object.keys(e)){let r=e[n];t[VT(n)]="name"!==n&&"className"!==n||"string"!=typeof r?UM(r,n):r}return t}}var GM="3.7.0",qM=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof qM)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new FT(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Pv(t,e.dtype)}catch(n){throw new FT(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof XN){if(null==this.id2Value[e.id])throw new FT("Nonexistent key: "+e.name);return this.id2Value[e.id]}{let t=this.name2Id[e];if(null==t)throw new FT("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]}}getMask(e){if(e instanceof XN){if(null==this.id2Value[e.id])throw new FT("Nonexistent key: "+e.name);return this.id2Mask[e.id]}{let t=this.name2Id[e];if(null==t)throw new FT("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&VA(this.id2Mask)}},KM={},XM={};function ZM(e,t,n,r){let a=null!=n&&n.training,s=Array.isArray(e),i=s?e:[e],o=i.map(e=>e.name),l=[],u=t.names();for(let f of o)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let h,c,d=o.join(",")+"|"+t.names().join(",");if(null==KM[d]){let e=function(e,t){zb.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){let a=JM(e[0],t);n=a.sorted,r=a.recipientMap}else{let a=new Set;for(let s of e){let{sorted:e,recipientMap:i}=JM(s,t);for(let t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(let t in i)null==r[t]&&(r[t]=new Set),i[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:YM(r)}}(i,t);h=e.sorted,c=e.recipientCounts,KM[d]=h,XM[d]=c}h=KM[d],c={},a||Object.assign(c,XM[d]);let p=new qM(t);for(let f=0;f<h.length;++f){if(null!=r){let e=$A().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}let e=h[f],s=e.sourceLayer;if(s instanceof nM)continue;let i=[],u=[],d=[],m=!1;for(let n of e.inputs){let e=p.getValue(n),r=p.getMask(n);i.push(e),u.push(r),null!=r&&(m=!0),a||(c[n.name]--,0===c[n.name]&&!t.hasKey(n)&&-1===o.indexOf(n.name)&&!e.isDisposed&&!0!==n.sourceLayer.stateful&&d.push(e))}m&&((n=n||{}).mask=u[0]);let g=LT(s.apply(i,n)),y=null;s.supportsMasking&&(y=s.computeMask(i,u));let b=QM(e),x=Array.isArray(b)?b:[b];for(let t=0;t<x.length;++t){p.hasKey(x[t])||p.add(x[t],g[t],Array.isArray(y)?y[0]:y);let e=o.indexOf(x[t].name);-1!==e&&(l[e]=g[t])}a||VA(d)}return p.disposeMasks(),s?l:l[0]}function YM(e){let t={};for(let n in e)t[n]=e[n].size;return t}function JM(e,t){let n=new Set,r=[],a={};for(let o of t.names())n.add(o);let s=[],i=[];for(s.push(e);s.length>0;){let e=s[s.length-1];if(n.has(e.name)){s.pop();continue}let t=i[i.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(s.length-1);for(let t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),!n.has(t.name)&&s.push(t)}}return{sorted:r,recipientMap:a}}function QM(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}var eF=class extends QN{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){let e=this.getClassName().toLowerCase();this.name=$N(e)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],this.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],qT(this.inputs).length!==this.inputs.length)throw new FT("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(e=>e.name));qT(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(e=>e.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let y of this.outputs){let e=y.nodeIndex,t=y.tensorIndex;this.outputLayers.push(y.sourceLayer),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(t)}for(let y of this.inputs){let e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;zT(0===t,"input layer has >1 nodes"),zT(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){let t=this.inputLayers[y];if(!(t instanceof nM))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(let y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);let t={},n={},r={},a={},s={},i=[],o=(e,t,n,r,a,l)=>{(null==r||null==a||null==l)&&(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);let u=r.inboundNodes[a];if(-1!==n.indexOf(u))throw new MT(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(eF.nodeKey(r,a)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(u)&&n.push(u);let h=u.inboundLayers.length;for(let s=0;s<h;s++)o(u.inputTensors[s],t,n,u.inboundLayers[s],u.nodeIndices[s],u.tensorIndices[s]);for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);i.push(u)},l=[],u=[];for(let y of this.outputs)o(y,l,u);let h=i.slice().reverse();for(let y of h){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];e=Math.max(e,null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id]),r[y.outboundLayer.id]=e,a[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){let a=y.inboundLayers[r].inboundNodes[y.nodeIndices[r]];t[a.id]=Math.max(e+1,null==t[a.id]?0:t[a.id]),n[a.id]=a}}let c={};for(let y in t){let e=t[y];e in c||(c[e]=[]),c[e].push(n[y])}let d={};for(let y in r){let e=r[y];e in d||(d[e]=[]),d[e].push(a[y])}let p=Object.keys(d).map(e=>parseInt(e,10)).sort(GT);this.layers=[];for(let y of p){let e=d[y];e.sort((e,t)=>{let n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0});for(let t of e)t instanceof eF&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(c).map(e=>parseInt(e,10)).sort(GT);let f=this.inputs.slice(),m=[];for(let y of p)for(let e of c[y]){let t=e.outboundLayer;if(null!=t){for(let n of e.inputTensors)if(-1===f.indexOf(n))throw new MT(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(let t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=c;let g=this.layers.map(e=>e.name);for(let y of g){let e=g.filter(e=>e===y).length;if(1!==e)throw new MT(`The name "${y}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new YN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new FT("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},r=0;for(let s of this.layers)for(let e of s.weights){if(null!=n[e.originalName])throw new FT("Duplicate weight name: "+e.originalName);n[e.originalName]=e,r++}let a=[];for(let s in e){let r=s;if(null==n[s]){let e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[s]]);else if(t)throw new FT("Provided weight data has no target variable: "+s);delete n[r]}if(t){let e=[];for(let t in n)e.push(t);if(e.length>0)throw new FT(`${e.length} of ${r} weights are not set: ${e}`)}qN(a)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers "+GM,t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=UM(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return LA(()=>{e=LT(e);let n=new qM;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return ZM(this.outputs,n,t)})}computeMask(e,t){return LA(()=>{let n;return e=LT(e),n=null==t?OT(null,e.length):LT(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=VN(e);if(t.length!==this.inputLayers.length)throw new FT(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let n={};for(let i=0;i<t.length;i++)n[this.inputLayers[i].name+"_0_0"]=t[i];let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(GT);if(r.length>1)for(let i of r){let e=this.nodesByDepth[i];for(let t of e){let e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;let r=[];for(let i=0;i<t.inboundLayers.length;i++)r.push(n[`${t.inboundLayers[i].name}_${t.nodeIndices[i]}_${t.tensorIndices[i]}`]);let a=VN(e.computeOutputShape($T(r))),s=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++)n[`${e.name}_${s}_${t}`]=a[t]}}let a=[],s=[];for(let i=0;i<this.outputLayers.length;i++)s.push(`${this.outputLayers[i].name}_${this.outputLayersNodeIndices[i]}_${this.outputLayersTensorIndices[i]}`);for(let i=0;i<s.length;i++){let e=s[i];zT(e in n),a.push(n[e])}return $T(a)}runInternalGraph(e,t){null==t&&(t=OT(null,e.length));let n={};for(let o=0;o<this.inputs.length;++o)n[this.inputs[o].id]=[e[o],t[o]];let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(GT);for(let o of r){let e=this.nodesByDepth[o];for(let t of e){let e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,s=new Array;for(let t of r)t.id in n&&s.push(n[t.id]);if(s.length===r.length){let r,i,o,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===s.length){let[t,n]=s[0];null==u.mask&&(u.mask=n),o=LT(e.call(t,u)),l=LT(e.computeMask(t,n)),r=[t],i=[n]}else r=s.map(e=>e[0]),i=s.map(e=>e[1]),null==u.mask&&(u.mask=i),o=LT(e.call(r,u)),l=LT(e.computeMask(r,i));if(e.activityRegularizer)throw new RT("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e)n[a[e].id]=[o[e],l[e]]}}}let a=[],s=[],i=[];for(let o of this.outputs){zT(o.id in n,`Could not compute output ${o.name} : ${o.id}`);let[e,t]=n[o.id];i.push(e.shape),a.push(e),s.push(t)}return[a,s,i]}buildNodeConversionMap(e){let t,n={};for(let r of this.layers){t=r instanceof eF?1:0;for(let e=0;e<r.inboundNodes.length;e++){let a=eF.nodeKey(r,e);this.containerNodes.has(a)&&(n[a]=t,t+=1)}}return n}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new FT(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new FT("Provide either a layer name or layer index");for(let n of this.layers)if(n.name===e)return n;throw new FT("No such layer: "+e)}calculateLosses(){return LA(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let r=eF.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let i of this.layers){let e=i.getClassName(),r=i.getConfig(),a=[];for(let n=0;n<i.inboundNodes.length;n++){let e=i.inboundNodes[n],r=eF.nodeKey(i,n),o={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),o=e.callArgs}catch(s){console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),o={}}if(e.inboundLayers.length>0){let n=[];for(let r=0;r<e.inboundLayers.length;r++){let a=e.inboundLayers[r],s=e.tensorIndices[r],i=t[eF.nodeKey(a,e.nodeIndices[r])];null==i&&(i=0),n.push([a.name,i,s,o])}a.push(n)}}}let o={};o.name=i.name,o.className=e,o.config=r,o.inboundNodes=a,n.push(o)}e.layers=n;let r=[];for(let i=0;i<this.inputLayers.length;i++){let e=this.inputLayers[i],n=eF.nodeKey(e,this.inputLayersNodeIndices[i]);if(!this.containerNodes.has(n))continue;let a=t[n];null==a&&(a=0),r.push([e.name,a,this.inputLayersTensorIndices[i]])}e.inputLayers=r;let a=[];for(let i=0;i<this.outputLayers.length;i++){let e=this.outputLayers[i],n=eF.nodeKey(e,this.outputLayersNodeIndices[i]);if(!this.containerNodes.has(n))continue;let r=t[n];null==r&&(r=0),a.push([e.name,r,this.outputLayersTensorIndices[i]])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){let a={},s={};function i(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function o(e,t){let n,r=[];for(let s of t){let o=s[0],l=s[1],u=s[2];if(n=null==s[3]?{}:s[3],!(o in a))return void i(e,t);let h=a[o];if(h.inboundNodes.length<=l)return void i(e,t);r.push(h.inboundNodes[l].outputTensors[u])}r.length>0&&e.apply($T(r),n)}function l(e){let n=e.name,s=mM(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(r),a[n]=s,e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new FT("Corrupted configuration, expected array for nodeData: "+e);i(s,e)})}let u=t.name,h=t.layers;for(let m of h)l(m);for(;!KT(s);)for(let e of h){let t=a[e.name];if(t.name in s){let e=s[t.name];delete s[t.name];for(let n of e)o(t,n)}}let c=[],d=[],p=t.inputLayers;for(let m of p){let e=m[0],t=m[1],n=m[2];zT(e in a),c.push(a[e].inboundNodes[t].outputTensors[n])}let f=t.outputLayers;for(let m of f){let e=m[0],t=m[1],n=m[2];zT(e in a),d.push(a[e].inboundNodes[t].outputTensors[n])}return new e({inputs:c,outputs:d,name:u})}get stateful(){if(this._stateful)throw new FT("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){LA(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function tF(e,t){return function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{n.push(t in e?e[t]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight")}async function nF(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){let t=LA(()=>{if(1===e.shape.length)return e.clone();if(2===e.shape.length){if(e.shape[1]>1)return e.argMax(1);if(1===e.shape[1])return e.reshape([e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await t.data());VA(t);let a=[];return r.forEach(e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);a.push(n[e])}),nI(a,"float32")}return null}function rF(e,t){return GA(e,t)}function aF(e,t){let n,r;n=t.xs,r=t.ys,zb.assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+t);let a=sF("input",e.inputNames,n),s=sF("output",e.outputNames,r),i=a[0].shape[0];zb.assert(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),zb.assert(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let o=0;o<a.length;o++)zb.assert(a[o].shape[0]===i,()=>`Batch size mismatch: input ${e.inputNames[o]} has ${a[o].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);for(let o=0;o<s.length;o++)zb.assert(s[o].shape[0]===i,()=>`Batch size mismatch: output ${e.outputNames[o]} has ${s[o].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);return{xs:a,ys:s}}function sF(e,t,n){if(n instanceof dx)return[n];if(Array.isArray(n))return zb.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let a of t){if(null==n[a])throw new FT(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}function iF(e){return"function"==typeof e.iterator}function oF(e){zb.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got "+e)}function lF(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>PC(e,t,n-t)):PC(e,t,n-t)}function uF(e,t){return LA(()=>null==e?null:Array.isArray(e)?e.map(e=>uF(e,t)):UC(e,"int32"===t.dtype?t:t.toInt()))}function hF(e,t){let n=[],r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function cF(e){let t=[];e instanceof dx&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push(zC(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function dF(e,t){if(null==e)return;let n=[];if(t instanceof dx)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let a in t)n.push(t[a].id);let r=[];if(e instanceof dx)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(let a in e){let t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function pF(e){return Array.isArray(e)}function fF(e){return!function(e){return e instanceof dx}(e)&&!pF(e)}function mF(e,t,n,r=!0,a=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(pF(e)&&e.length>0)t=!0;else if(fF(e)){for(let n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new FT(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let s;if(fF(e)){e=e,s=[];for(let n of t){if(null==e[n])throw new FT(`No data provided for "${n}". Need data for each key in: ${t}`);s.push(e[n])}}else if(pF(e)){if((e=e).length!==t.length)throw new FT(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new FT(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=cF(s),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;let e=s[i];if(e.shape.length!==n[i].length)throw new FT(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${e.shape}`);for(let s=0;s<n[i].length;++s){if(0===s&&!r)continue;let o=e.shape[s],l=n[i][s];if(null!=l&&l>=0&&o!==l)throw new FT(`Error when checking ${a}: expected ${t[i]} to have shape [${n[i]}], but got array with shape [${e.shape}].`)}}return s}function gF(e,t,n,r=!0,a=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new FT(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new FT(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;let e=s[i];if(e.shape.length!==n[i].length)throw new FT(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let s=0;s<n[i].length;++s){if(0===s&&!r)continue;let o=e.shape[s],l=n[i][s];if(null!=l&&l!==o)throw new FT(`Error when checking ${a}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}var yF=class extends eF{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new FT("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n,r=console.log){let a,s=function(e){let t=!0,n=[],r=[];for(let a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(let a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(let a of e.layers){let e=!1;for(let n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),i=["Layer (type)","Output shape","Param #"];if(s?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!s){i.push("Receives inputs"),a=[];for(let t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),VM(i,n,r),r("=".repeat(t));let o=e.layers;for(let h=0;h<o.length;++h)s?BM(o[h],n,r):WM(o[h],n,a,r),r((h===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=function(e){let t;return t=jN(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights),t}(e),u=jN(e.nonTrainableWeights);r("Total params: "+(l+u)),r("Trainable params: "+l),r("Non-trainable params: "+u),r("_".repeat(t))}(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){let t={Adagrad:()=>k_.adagrad(.01),Adadelta:()=>k_.adadelta(1,.95,CT()),Adam:()=>k_.adam(.001,.9,.999,CT()),Adamax:()=>k_.adamax(.002,.9,.999,CT(),0),RMSProp:()=>k_.rmsprop(.001,.9,0,CT()),SGD:()=>k_.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new FT("Unknown Optimizer "+e)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof f_))throw new FT("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new FT(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(e=>IM(e))}else{let n=IM(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(let t in e.loss)if(-1===this.outputNames.indexOf(t))throw new FT(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(let n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(IM(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){let e=this.internalOutputShapes[s];this.feedOutputNames.push(this.outputNames[s]),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[s])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],IC("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;let t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});let r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+e);n=e}if(Array.isArray(n))return t.map(e=>n);{let e=[];for(let r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};IC("metric",()=>{for(let e=0;e<this.outputs.length;++e)-1===n.indexOf(e)&&(t=>{let n,r,s;for(let i of t){if("string"==typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){let t,a=this.internalOutputShapes[e];1===a[a.length-1]||this.lossFunctions[e]===wM?-1!==["accuracy","acc"].indexOf(i)?r=_M:-1!==["crossentropy","ce"].indexOf(i)&&(r=NM):this.lossFunctions[e]===AM?-1!==["accuracy","acc"].indexOf(i)?r=MM:-1!==["crossentropy","ce"].indexOf(i)&&(r=RM):-1!==["accuracy","acc"].indexOf(i)?r=EM:-1!==["crossentropy","ce"].indexOf(i)&&(r=FM),-1!==["accuracy","acc"].indexOf(i)?t="acc":-1!==["crossentropy","ce"].indexOf(i)&&(t="ce"),s=r,n=""+t}else s=OM(i),n=""+zM(i);let t;IC(n,()=>{t=s}),a(e,n,t)}})(r[e])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let r=null==n.batchSize?32:n.batchSize;oF(r);let a=this.standardizeUserDataXY(e,t,!0,r);try{let s=a[0].concat(a[1]);return this.makeTestFunction(),$T(this.testLoop(this.testFunction,s,r,n.verbose,n.steps))}finally{dF(a[0],e),dF(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){let r=null!=(n=n||{}).batches,a=e.testFunction,s=[];if(n.verbose>0)throw new RT("Verbose mode is not implemented yet.");zb.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));let i=function(e){return"function"==typeof e.next}(t)?t:await t.iterator(),o=0,l=0;for(;!r||l<n.batches;){let t=await i.next();if(s=LA(()=>{if(t.value){let{xs:n,ys:r}=aF(e,t.value),i=n.concat(r),u=LA(()=>a(i));if(VA(i),0===l)for(let e=0;e<u.length;++e)s.push(RS(0));let h=i[0].shape[0];for(let e=0;e<u.length;++e){let t=u[e],n=s[e];s[e]=LA(()=>jA(s[e],GA(h,t))),l>0&&VA(n)}VA(u),o+=h,++l}return s}),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){let e=s[u];s[u]=UA(s[u],o),VA(e)}return $T(s)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(null!=n){if(a=null,null!=t)throw new FT(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new FT(`Either the input data should have a defined shape, or ${r} shoud be specified.`);a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new FT("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),a=new qM;if(e instanceof dx&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new FT(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(let i of this.inputs){let t=e[i.name];if(null==t)throw new FT("No value is provided for the model's input "+i.name);a.add(i,t)}let s=ZM(r,a);return n?s:s[0]}retrieveSymbolicTensors(e){let t=OT(null,e.length),n=e.length;for(let r of this.layers){let a=Array.isArray(r.output)?r.output:[r.output],s=a.map(e=>e.name);for(let r=0;r<e.length;++r){let i=s.indexOf(e[r]);if(-1!==i&&(t[r]=a[i],n--),0===n)break}if(0===n)break}if(n>0){let n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new FT("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return t}predictLoop(e,t=32,n=!1){return LA(()=>{let r=this.checkNumSamples(e);if(n)throw new RT("Verbose predictLoop() is not implemented yet.");let a=hF(r,t),s=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t)LA(()=>{let n=lF(e,a[t][0],a[t][1]),r=[];if(Array.isArray(n))for(let e=0;e<n.length;++e)r.push({key:this.inputs[e],value:n[e]});else r.push({key:this.inputs[0],value:n});let s=new qM(r);return ZM(this.outputs,s)}).forEach((e,t)=>s[t].push(e));return $T(s.map(e=>ww(e,0)))})}predict(e,t={}){let n=cF(e);gF(n,this.inputNames,this.feedInputShapes,!1);try{let r=null==t.batchSize?32:t.batchSize;return oF(r),this.predictLoop(n,r)}finally{dF(n,e)}}predictOnBatch(e){gF(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new MT("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let s=0;s<this.feedOutputShapes.length;++s){let e=this.feedOutputShapes[s];a.push(this.feedLossFns[s]===AM?e.slice(0,e.length-1).concat([1]):e)}if(function(e,t,n){let r=qT(e.map(e=>e.shape[0]));r.sort();let a=qT(t.map(e=>e.shape[0]));if(a.sort(),r.length>1)throw new FT("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(e=>e.shape)));if(a.length>1)throw new FT("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(e=>e.shape)));if(r.length>0&&a.length>0&&!zb.arraysEqual(r,a))throw new FT(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}(e=mF(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=mF(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){let r=[yM,wM,vM];for(let a=0;a<e.length;++a){let s=e[a],i=t[a],o=n[a];if(null!=i){if(i===vM&&1===s.shape[s.shape.length-1])throw new FT(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(i)){let e=s.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){let r=e[n],a=t[n];if(null!=a&&r!==a)throw new FT(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new FT(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,a=!0,s){let[i,o]=this.standardizeUserDataXY(e,t,a,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){let e=tF(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await nF(o[t],null,e[t]))}return[i,o,l]}testLoop(e,t,n,r=0,a){return LA(()=>{let s=this.checkNumSamples(t,n,a,"steps"),i=[];if(r>0)throw new RT("Verbose mode is not implemented yet.");if(null!=a)throw new RT("steps mode in testLoop() is not implemented yet");{let r=hF(s,n),a=nI(DC(0,s));for(let n=0;n<r.length;++n){let s=r[n][0],o=r[n][1],l=PC(a,s,o-s),u=uF(t,l),h=e(u);if(0===n)for(let e=0;e<h.length;++e)i.push(RS(0));for(let e=0;e<h.length;++e)i[e]=jA(i[e],GA(o-s,h[e]))}for(let e=0;e<i.length;++e)i[e]=UA(i[e],s)}return i})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],a=r;PT(e,r)>1&&(a+="_"+PT(e.slice(0,n),r)),t.push(a)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],i=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{let e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});let i,o=new qM(e),l=ZM(this.outputs,o,{training:!0});for(let n=0;n<this.lossFunctions.length;++n){let e=this.lossFunctions[n](r[n],l[n]);null!=a[n]&&(e=rF(e,a[n]));let s=rS(e);t.push(s),i=0===n?e:jA(i,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{let t=this.metricsTensors[n][1];e=rS((0,this.metricsTensors[n][0])(r[t],l[t]))}BA(e),s.push(e)}return i=rS(i),this.calculateLosses().forEach(e=>{i=jA(i,e)}),i},!0,i)].concat(s)}}makeTestFunction(){this.testFunction=e=>LA(()=>{let t,n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:r[e]});let i=new qM(s),o=ZM(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){let r=rS((0,this.lossFunctions[e])(a[e],o[e]));t=0===e?r:jA(t,r),n.push(t)}for(let e=0;e<this.metricsTensors.length;++e){let t=this.metricsTensors[e][1],r=rS((0,this.metricsTensors[e][0])(a[t],o[t]));n.push(r)}return n})}async fit(e,t,n={}){return async function(e,t,n,r={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let a,s,i,o,l,u,h;e.isTraining=!0;try{let c=null==r.batchSize?32:r.batchSize;oF(c);let d=!1,p=await e.standardizeUserData(t,n,r.sampleWeight,r.classWeight,d,c);a=p[0],s=p[1],h=p[2];let f,m=!1;if(null!=r.validationData&&r.validationData.length>0){if(m=!0,2!==r.validationData.length)throw 3===r.validationData.length?new RT("validationData including sample weights is not supported yet."):new FT(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);i=r.validationData[0],o=r.validationData[1];let t=!0,n=await e.standardizeUserData(i,o,null,null,t,c);l=n[0],u=n[1],f=l.concat(u)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){m=!0;let e=Math.floor(a[0].shape[0]*(1-r.validationSplit)),t=a[0].shape[0];l=lF(a,e,t),a=lF(a,0,e),u=lF(s,e,t),s=lF(s,0,e),f=l.concat(u)}else null!=r.validationSteps&&(m=!0);let g=a.concat(s).concat(h);e.checkTrainableWeightsConsistency();let y,b,x=e.makeTrainFunction(),v=e.getDedupedMetricsNames();m?(e.makeTestFunction(),y=e.testFunction,b=v.slice().concat(v.map(e=>"val_"+e))):(y=null,f=[],b=v.slice());let A=cM(r.callbacks,r.yieldEvery);return await async function(e,t,n,r,a,s,i,o,l,u,h,c,d,p,f){null==a&&(a=32),null==s&&(s=1),null==h&&(h=!0),null==d&&(d=0);let m=!1;null!=l&&null!=u&&(m=!0);let g,y=e.checkNumSamples(n,a,null,"steps_per_epoch");null!=y&&(g=DC(0,y)),null==i&&(i=1);let{callbackList:b,history:x}=fM(o,i,s,d,y,null,a,m,c);b.setModel(e),e.history=x,await b.onTrainBegin(),e.stopTraining_=!1;for(let v=d;v<s;++v){await b.onEpochBegin(v);let s={};{if("batch"===h)throw new RT("batch shuffling is not implemneted yet");h&&zb.shuffle(g);let i=nI(g),o=hF(y,a);for(let h=0;h<o.length;++h){let c={};if(await b.onBatchBegin(h,c),LA(()=>{let d=o[h][0],p=o[h][1],f=PC(i,d,p-d);c.batch=h,c.size=p-d;let g=uF(n,f),y=t(g);for(let e=0;e<r.length;++e){let t=y[e];c[r[e]]=t,BA(t)}if(h===o.length-1&&m){let t=e.testLoop(l,u,a);for(let e=0;e<r.length;++e){let n=r[e],a=t[e];BA(a),s["val_"+n]=a}}}),await b.onBatchEnd(h,c),sM(c),e.stopTraining_)break}i.dispose()}if(await b.onEpochEnd(v,s),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}(e,x,g,v,c,r.epochs,r.verbose,A,y,f,r.shuffle,b,r.initialEpoch)}finally{e.isTraining=!1,dF(a,t),dF(s,n),dF(l,i),dF(u,o),null!=h&&VA(h)}}(this,e,t,n)}async fitDataset(e,t){return async function(e,t,n){let r=null!=n.batchesPerEpoch;if(zb.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),zb.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),zb.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),zb.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),zb.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let a,s,i=null!=n.validationData;if(i)if(iF(n.validationData))zb.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{let e=function(e){if(3===e.length)throw new RT("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,s=e.ys}let o,l=e.makeTrainFunction(),u=e.getDedupedMetricsNames();o=i?u.slice().concat(u.map(e=>"val_"+e)):u.slice();let h=cM(n.callbacks,n.yieldEvery),c=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=fM(h,c,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,i,o);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){let o={};await d.onEpochBegin(f);let h=0,c=0;for(r||(m=await t.iterator());!r||h<n.batchesPerEpoch;){let t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${h} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){let{xs:r,ys:a}=aF(e,t.value),s={};s.batch=c,s.size=r[0].shape[0],await d.onBatchBegin(c,s);let i=[];if(null!=n.classWeight){let t=tF(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await nF(a[e],null,t[e]))}let o=r.concat(a).concat(i),p=l(o);VA(o);for(let e=0;e<u.length;++e){let t=p[e];s[u[e]]=t,BA(t)}await d.onBatchEnd(c,s),sM(s),c++,h++}if(r?h>=n.batchesPerEpoch:t.done){if(i){let t;t=iF(n.validationData)?LT(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):LT(e.evaluate(a,s,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)o["val_"+e.metricsNames[n]]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,o),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],a=n[1],s=this.makeTrainFunction()(r.concat(a)),i=[];for(let o of s){let e=await o.data();i.push(e[0])}return VA(s),$T(i)}getNamedWeights(e){let t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let s=0;s<r.length;++s)n&&!r[s].trainable||t.push({name:r[s].originalName,tensor:a[s]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){let t=$A().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-$A().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=VT(this.loss);else if(Array.isArray(this.loss)){for(let e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>VT(e))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=VT(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[VT(zM(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>VT(zM(e)));{let e={};for(let t in this.metrics)e[t]=VT(zM(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");let t,n,r=mM(HM(e.optimizer_config));if("string"==typeof e.loss)t=BT(e.loss);else if(Array.isArray(e.loss))t=e.loss.map(e=>BT(e));else if(null!=e.loss){t={};for(let n in e.loss)t[n]=BT(e.loss[n])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>BT(e));else if(null!=e.metrics){n={};for(let t in e.metrics)n[t]=BT(e.metrics[t])}this.compile({loss:t,metrics:n,optimizer:r})}async save(e,t){if("string"==typeof e){let t=Lv.getSaveHandlers(e);if(0===t.length)throw new FT(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new FT(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new FT("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Lv.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+GM,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();let e="optimizer",{data:t,specs:a}=await Lv.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=Lv.concatenateArrayBuffers([n.data,t])}return null!=this.userDefinedMetadata&&($M(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){$M(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};yF.className="Model",RA.registerClass(yF);var bF=class extends yF{};async function xF(e,t){"modelTopology"in e||(e={modelTopology:e});let n=(e=e).modelTopology;null!=n.model_config&&(n=n.model_config);let r=mM(HM(n),t);if(null!=e.weightsManifest){let t=await Lv.loadWeights(e.weightsManifest,e.pathPrefix,r.weights.map(e=>e.originalName)),n={};for(let e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),VA(t)}return r}bF.className="Functional",RA.registerClass(bF);var vF=class extends yF{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:$N("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new FT(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t,n=e instanceof vF||e instanceof yF;if(n){if(t=e,1!==t.outputs.length)throw new FT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new FT("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new FT("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let t=rM({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new FT(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new FT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=eM(this.outputs[0])}this.inboundNodes=[],new YN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:OT(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(WN(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new yF({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new MT("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new MT("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new MT("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new MT("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new FT("Legacy serialization format not supported yet.");a=t}else zb.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,s=t;let i=new e(s);if(!(i instanceof vF))throw new RT("Sequential.fromConfig called on non-Sequential input: "+i);for(let o of a){let e=mM(o,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),i.add(e)}return i}set stopTraining(e){if(null==this.model)throw new FT("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new FT("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}},AF=vF;function wF(e){return new yF(e)}function kF(e){return new AF(e)}function SF(e,t){return null==t&&(t={}),async function(e,t){if(null==t&&(t={}),"string"==typeof e){let n=Lv.getLoadHandlers(e,t);if(0===n.length)n.push(Lv.browserHTTPRequest(e,t));else if(n.length>1)throw new FT(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return async function(e,t,n){if(null==n&&(n={}),null==e.load)throw new FT("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),a=r.modelTopology;null!=a.model_config&&(a=a.model_config);let s=null==n.strict||n.strict,i=null!=r.weightData&&null!=r.weightSpecs&&s,o=mM(HM(a),void 0,i),l=r.trainingConfig;if(null!=l&&o.loadTrainingConfig(l),null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new FT("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=Lv.decodeWeights(e,t),r={},a=[];return t.forEach(e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:a}}(r.weightData,r.weightSpecs);o.loadWeights(e,s),null!=o.optimizer&&t.length>0&&await o.optimizer.setWeights(t),VA(e),VA(t.map(e=>e.tensor))}return o}(e,0,t)}(e,t)}function IF(e){return rM(e)}function _F(e,t){pM.registerCallbackConstructor(e,t)}AF.className="Sequential",RA.registerClass(AF);var EF=class extends RA.Serializable{getConfig(){return{}}},TF=class extends EF{apply(e,t=1){return function(e,t=1){if(1!==t)throw new RT(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return uk(e)}(e,t)}};TF.className="elu",RA.registerClass(TF);var CF=class extends EF{apply(e){return DS(e)}};CF.className="selu",RA.registerClass(CF);var NF=class extends EF{apply(e){return TS(e)}};NF.className="relu",RA.registerClass(NF);var MF=class extends EF{apply(e){return LA(()=>oS(6,TS(e)))}};MF.className="relu6",RA.registerClass(MF);var FF=class extends EF{apply(e){return e}};FF.className="linear",RA.registerClass(FF);var RF=class extends EF{apply(e){return kw(e)}};RF.className="sigmoid",RA.registerClass(RF);var DF=class extends EF{apply(e){return function(e){return LA(()=>{let t=jA(.5,GA(.2,e));return Ow(t,0,1)})}(e)}};DF.className="hardSigmoid",RA.registerClass(DF);var OF=class extends EF{apply(e){return Dk(e)}};OF.className="softplus",RA.registerClass(OF);var zF=class extends EF{apply(e){return function(e){return LA(()=>UA(e,qA(e).add(1)))}(e)}};zF.className="softsign",RA.registerClass(zF);var PF=class extends EF{apply(e){return Iw(e)}};PF.className="tanh",RA.registerClass(PF);var $F=class extends EF{apply(e,t=-1){return jS(e,t)}};$F.className="softmax",RA.registerClass($F);var LF=class extends EF{apply(e,t=-1){return Lk(e,t)}};LF.className="logSoftmax",RA.registerClass(LF);var VF=class extends EF{apply(e,t=1){return LA(()=>kw(e.mul(t)).mul(e))}};VF.className="swish",RA.registerClass(VF);var BF=class extends EF{apply(e){return LA(()=>GA(e,Iw(Dk(e))))}};function WF(e){return e.getClassName()}function jF(e,t={}){return UT(e,RA.SerializationMap.getMap().classNameMap,t,"activation")}function HF(e){if(null==e)return jF({className:"linear",config:{}});if("string"==typeof e){let t={};return t.className=e,t.config={},jF(t)}return e instanceof EF?e:jF(e)}function UF(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+e)}BF.className="mish",RA.registerClass(BF);var GF=class extends RA.Serializable{},qF=class extends GF{constructor(e){super(),UF(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return LA(()=>{let t=aS([1]);return this.hasL1&&(t=jA(t,$k(GA(this.l1,qA(e))))),this.hasL2&&(t=jA(t,$k(GA(this.l2,GC(e))))),t.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};qF.className="L1L2",RA.registerClass(qF);var KF={l1l2:"L1L2"};function XF(e){return jT(e)}function ZF(e,t={}){return UT(e,RA.SerializationMap.getMap().classNameMap,t,"regularizer")}function YF(e){return null==e?null:"string"==typeof e?ZF({className:e in KF?KF[e]:e,config:{}}):e instanceof GF?e:ZF(e)}var JF=class extends QN{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=BN(e);let n=TS(e);return null!=this.maxValue&&(n=Ow(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};JF.className="ReLU",RA.registerClass(JF);var QF=class extends QN{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=BN(e);return Ik(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};QF.className="LeakyReLU",RA.registerClass(QF);var eR=class extends QN{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=bN(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=YF(e.alphaRegularizer),this.alphaConstraint=uC(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new FT("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);this.sharedAxes=[e.sharedAxes]}}build(e){let t=(e=WN(e)).slice(1);if(null!=this.sharedAxes)for(let r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new KN({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=BN(e),xS(e,this.alpha.read())}getConfig(){let e={alphaInitializer:yN(this.alphaInitializer),alphaRegularizer:XF(this.alphaRegularizer),alphaConstraint:oC(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};eR.className="PReLU",RA.registerClass(eR);var tR=class extends QN{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new RT(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=BN(e);return uk(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};tR.className="ELU",RA.registerClass(tR);var nR=class extends QN{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=BN(e);return n.mul(OC(n.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};nR.className="ThresholdedReLU",RA.registerClass(nR);var rR=class extends QN{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new $F).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){let n=BN(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function aR(e,t,n){if("number"==typeof e)return OT(e,t);if(e.length!==t)throw new FT(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){let a=e[r];if(!NC(a))throw new FT(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${a}`)}return e}function sR(e,t,n,r,a=1){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((s+r-1)/r)}function iR(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+RC([n-t,0]);else{if("same"!==r)throw new FT(`Unsupport padding mode: ${r}.`);e*=t}return e}function oR(e,t){return LA(()=>(AC(t),"channelsFirst"===t?rA(e,[0,2,3,1]):e))}function lR(e,t){return LA(()=>(AC(t),"channelsFirst"===t?rA(e,[0,2,3,4,1]):e))}function uR(e,t,n,r=[1,1],a="valid",s,i,o=null){return LA(()=>{if(null==s&&(s="channelsLast"),AC(s),3!==e.rank&&4!==e.rank)throw new FT(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new FT(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=oR(e,s);if("causal"===a)throw new RT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=bI.conv2d({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===s&&(l=rA(l,[0,3,1,2])),l})}rR.className="Softmax",RA.registerClass(rR);var hR=class extends QN{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",hR.verifyArgs(t),this.rank=e,YT(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new RT(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=aR(t.kernelSize,e,"kernelSize"),this.strides=aR(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,wC(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,AC(this.dataFormat),this.activation=HF(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=bN(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=uC(t.biasConstraint),this.biasRegularizer=YF(t.biasRegularizer),this.activityRegularizer=YF(t.activityRegularizer),this.dilationRate=aR(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new FT("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new FT("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new FT("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(e){if(zT("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!ZT(e.kernelSize,"number",1,3))throw new FT(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:WF(this.activation),useBias:this.useBias,biasInitializer:yN(this.biasInitializer),biasRegularizer:XF(this.biasRegularizer),activityRegularizer:XF(this.activityRegularizer),biasConstraint:oC(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},cR=class extends hR{constructor(e,t){super(e,t),this.kernel=null,cR.verifyArgs(t),this.filters=t.filters,YT(this.filters,"filters"),this.kernelInitializer=bN(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=uC(t.kernelConstraint),this.kernelRegularizer=YF(t.kernelRegularizer)}build(e){e=WN(e);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new FT("The channel dimension of the input should be defined. Found "+e[t]);let n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return LA(()=>{e=BN(e);let t,n=null==this.bias?null:this.bias.read(),r=QT(this.activation.getClassName());if(null!=r&&2===this.rank)t=uR(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n,r=1,a="valid",s,i=1){return LA(()=>{if(null==s&&(s="channelsLast"),AC(s),3!==e.shape.length)throw new FT(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new FT(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new FT(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===s&&(e=rA(e,[0,2,1])),"causal"===a)throw new RT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Bw(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(o=KC(o,n)),o})}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=uR(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new RT("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,r=[1,1,1],a="valid",s,i){return LA(()=>{if(null==s&&(s="channelsLast"),AC(s),4!==e.rank&&5!==e.rank)throw new FT(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new FT(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=lR(e,s);if("causal"===a)throw new RT("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Hw(o,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(o=KC(o,n)),"channelsFirst"===s&&(o=rA(o,[0,4,1,2,3])),o})}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=WN(e);let t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){let e=sR(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){let e={filters:this.filters,kernelInitializer:yN(this.kernelInitializer),kernelRegularizer:XF(this.kernelRegularizer),kernelConstraint:oC(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new FT("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))}},dR=class extends cR{constructor(e){super(2,e),dR.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!ZT(e.kernelSize,"number",1,2))throw new FT(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}},pR=dR;pR.className="Conv2D",RA.registerClass(pR);var fR=class extends cR{constructor(e){super(3,e),fR.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new FT(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}},mR=fR;mR.className="Conv3D",RA.registerClass(mR);var gR=class extends pR{constructor(e){if(super(e),this.inputSpec=[new KN({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new FT("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(4!==(e=WN(e)).length)throw new FT("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new FT("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new KN({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return LA(()=>{let t=BN(e);if(4!==t.shape.length)throw new FT("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);let n,r,a=t.shape;"channelsFirst"===this.dataFormat?(n=2,r=3):(n=1,r=2);let s=a[r],i=this.kernelSize[1],o=this.strides[1],l=[a[0],iR(a[n],this.strides[0],this.kernelSize[0],this.padding),iR(s,o,i,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rA(t,[0,2,3,1]));let u=jw(t,this.kernel.read(),l,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(u=rA(u,[0,3,1,2])),null!=this.bias&&(u=KC(u,this.bias.read(),this.dataFormat)),null!=this.activation&&(u=this.activation.apply(u)),u})}computeOutputShape(e){let t,n,r,a=(e=WN(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);let s=this.kernelSize[0],i=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return a[t]=this.filters,a[n]=iR(a[n],o,s,this.padding),a[r]=iR(a[r],l,i,this.padding),a}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};gR.className="Conv2DTranspose",RA.registerClass(gR);var yR=class extends mR{constructor(e){if(super(e),this.inputSpec=[new KN({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new FT("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(5!==(e=WN(e)).length)throw new FT("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new FT("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new KN({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return LA(()=>{let t=BN(e);if(5!==t.shape.length)throw new FT("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);let n,r,a,s=t.shape;"channelsFirst"===this.dataFormat?(a=2,n=3,r=4):(a=1,n=2,r=3);let i=s[n],o=s[r],l=this.kernelSize[1],u=this.kernelSize[2],h=this.strides[1],c=this.strides[2],d=[s[0],iR(s[a],this.strides[0],this.kernelSize[0],this.padding),iR(i,h,l,this.padding),iR(o,c,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rA(t,[0,2,3,4,1]));let p=Gw(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=rA(p,[0,4,1,2,3])),null!==this.bias&&(p=KC(p,this.bias.read(),this.dataFormat)),null!==this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){let t,n,r,a,s=(e=WN(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);let i=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],h=this.strides[1],c=this.strides[2];return s[t]=this.filters,s[n]=iR(s[n],u,i,this.padding),s[r]=iR(s[r],h,o,this.padding),s[a]=iR(s[a],c,l,this.padding),s}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};yR.className="Conv3DTranspose",RA.registerClass(yR);var bR=class extends cR{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new FT("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new FT("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new FT(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=bN(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=YF(t.depthwiseRegularizer),this.depthwiseConstraint=uC(t.depthwiseConstraint),this.pointwiseInitializer=bN(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=YF(t.pointwiseRegularizer),this.pointwiseConstraint=uC(t.pointwiseConstraint)}build(e){if((e=WN(e)).length<this.rank+2)throw new FT(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new FT("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[t]));let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);let s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):null,this.inputSpec=[new KN({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return LA(()=>{let t;if(e=BN(e),1===this.rank)throw new RT("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=rA(e,[0,2,3,1])),t=OS(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=KC(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=rA(t,[0,3,1,2])),t})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=yN(this.depthwiseInitializer),e.pointwiseInitializer=yN(this.pointwiseInitializer),e.depthwiseRegularizer=XF(this.depthwiseRegularizer),e.pointwiseRegularizer=XF(this.pointwiseRegularizer),e.depthwiseConstraint=oC(this.depthwiseConstraint),e.pointwiseConstraint=oC(this.pointwiseConstraint),e}};bR.className="SeparableConv";var xR=class extends bR{constructor(e){super(2,e)}};xR.className="SeparableConv2D",RA.registerClass(xR);var vR=class extends cR{constructor(e){super(1,e),vR.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!ZT(e.kernelSize,"number",1,1))throw new FT(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}},AR=vR;AR.className="Conv1D",RA.registerClass(AR);var wR=class extends QN{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return LA(()=>{if(e=BN(e),"channelsLast"===this.dataFormat){let t=LC(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return LC(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{let t=LC(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return LC(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};wR.className="Cropping2D",RA.registerClass(wR);var kR=class extends QN{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,AC(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){XT(gC,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,t){return LA(()=>{let t=BN(e),n=t.shape;if("channelsFirst"===this.dataFormat){t=rA(t,[0,2,3,1]);let e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r]);return rA(a,[0,3,1,2])}{let e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};kR.className="UpSampling2D",RA.registerClass(kR);var SR=class extends hR{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=bN(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=uC(e.depthwiseConstraint),this.depthwiseRegularizer=YF(e.depthwiseRegularizer)}build(e){if((e=WN(e)).length<4)throw new FT(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new FT(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return LA(()=>{let t=function(e,t,n=[1,1],r="valid",a,s){return LA(()=>{null==a&&(a="channelsLast"),AC(a);let i=oR(e,a);if(4!==e.rank)throw new FT(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new FT(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=Jw(i,t,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===a&&(i=rA(i,[0,3,1,2])),i})}(e=BN(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=KC(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=WN(e);let t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=sR("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=sR(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,a]:[e[0],r,a,n]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=yN(this.depthwiseInitializer),e.depthwiseRegularizer=XF(this.depthwiseRegularizer),e.depthwiseConstraint=oC(this.depthwiseRegularizer),e}};function IR(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new FT("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function _R(e,t,n,r=!1,a,s,i=!1,o=!1){return LA(()=>{let l=t.shape.length;if(l<3)throw new FT(`Input should be at least 3D, but is ${l}D.`);let u=[1,0].concat(DC(2,l));if(t=rA(t,u),null!=s)throw new RT("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===l-1&&(a=dk(a,-1)),a=rA(a,u)),r&&(t=NS(t,0),null!=a&&(a=NS(a,0)));let h,c,d,p=[],f=n,m=t.shape[0],g=lI(t);null!=a&&(c=lI(a));for(let t=0;t<m;++t){let n=g[t],r=LA(()=>e(n,f));if(null==a)h=r[0],f=r[1];else{let e=LA(()=>{let e=c[t],n=fS(e).sub(e);return{output:r[0].mul(e).add(f[0].mul(n)),newStates:f.map((t,a)=>r[1][a].mul(e).add(t.mul(n)))}});h=e.output,f=e.newStates}o&&p.push(h)}return o&&(d=JS(p,1)),[h,d,f]})}SR.className="DepthwiseConv2D",RA.registerClass(SR);var ER=class extends QN{constructor(e){let t;if(super(e),null==e.cell)throw new FT("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new zR({cells:e.cell}):e.cell,null==t.stateSize)throw new FT("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new KN({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?DC(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null):this.states_}setStates(e){this.states_=e}computeOutputShape(e){LN(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){let r=[];for(let n of t)r.push([e[0],n]);return[n].concat(r)}return n}computeMask(e,t){return LA(()=>{Array.isArray(t)&&(t=t[0]);let e=this.returnSequences?t:null;if(this.returnState){let t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new RT("Constants support is not implemented in RNN yet.");LN(e)&&(e=e[0]),e=e;let t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new KN({shape:[t,null,...n]});let r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!zb.arraysEqual(this.stateSpec.map(e=>e.shape[e.shape.length-1]),r))throw new FT(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(e=>new KN({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){LA(()=>{if(!this.stateful)throw new NT("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(null==n)throw new FT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>aS([n,e])):[aS([n,this.cell.stateSize])];else if(null==e)VA(this.states_),null!=this.keptStates&&(VA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>aS([n,e])):this.states_[0]=aS([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new FT(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):VA(this.states_);for(let t=0;t<this.states_.length;++t){let r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,s=[n,a];if(!zb.arraysEqual(r.shape,s))throw new FT(`State ${t} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map(e=>BA(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=IR(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let s=[],i=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(let e of n)this.stateSpec.push(new KN({shape:e.shape}));i=i.concat(this.stateSpec)}if(null!=r&&(t.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof XN){let n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;let o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return LA(()=>{let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;e=BN(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));let s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new FT(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let i={training:r},o=_R((e,t)=>{let n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],u=o[1],h=o[2];this.stateful&&this.resetStates(h,r);let c=this.returnSequences?u:l;return this.returnState?[c].concat(h):c})}getInitialState(e){return LA(()=>{let t=aS(e.shape);return t=$k(t,[1,2]),t=zC(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?WC(t,[1,e]):t):this.cell.stateSize>1?[WC(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===ER.className&&(t.cell={className:this.cell.getClassName(),config:n}),{...n,...e,...t}}static fromConfig(e,t,n={}){let r=mM(t.cell,n);return new e(Object.assign(t,{cell:r}))}},TR=ER;TR.className="RNN",RA.registerClass(TR);var CR=class extends QN{},NR=class extends CR{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,YT(this.units,"units"),this.activation=HF(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=bN(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=bN(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=bN(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=YF(e.kernelRegularizer),this.recurrentRegularizer=YF(e.recurrentRegularizer),this.biasRegularizer=YF(e.biasRegularizer),this.kernelConstraint=uC(e.kernelConstraint),this.recurrentConstraint=uC(e.recurrentConstraint),this.biasConstraint=uC(e.biasConstraint),this.dropout=FC([1,RC([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FC([1,RC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=WN(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return LA(()=>{if(2!==(e=e).length)throw new FT(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let r=null!=t.training&&t.training;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=PR({ones:()=>fS(e),rate:this.dropout,training:r})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=PR({ones:()=>fS(n),rate:this.recurrentDropout,training:r}));let a,s=this.dropoutMask,i=this.recurrentDropoutMask;a=HC(null!=s?GA(e,s):e,this.kernel.read()),null!=this.bias&&(a=KC(a,this.bias.read())),null!=i&&(n=GA(n,i));let o=jA(a,HC(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){return{...super.getConfig(),units:this.units,activation:WF(this.activation),useBias:this.useBias,kernelInitializer:yN(this.kernelInitializer),recurrentInitializer:yN(this.recurrentInitializer),biasInitializer:yN(this.biasInitializer),kernelRegularizer:XF(this.kernelRegularizer),recurrentRegularizer:XF(this.recurrentRegularizer),biasRegularizer:XF(this.biasRegularizer),activityRegularizer:XF(this.activityRegularizer),kernelConstraint:oC(this.kernelConstraint),recurrentConstraint:oC(this.recurrentConstraint),biasConstraint:oC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout}}};NR.className="SimpleRNNCell",RA.registerClass(NR);var MR=class extends TR{constructor(e){e.cell=new NR(e),super(e)}call(e,t){return LA(()=>(null!=this.cell.dropoutMask&&(VA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(VA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return new e(t)}};MR.className="SimpleRNN",RA.registerClass(MR);var FR=class extends CR{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new FT("GRUCell does not support reset_after parameter set to true.");this.units=e.units,YT(this.units,"units"),this.activation=HF(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=HF(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=bN(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=bN(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=bN(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=YF(e.kernelRegularizer),this.recurrentRegularizer=YF(e.recurrentRegularizer),this.biasRegularizer=YF(e.biasRegularizer),this.kernelConstraint=uC(e.kernelConstraint),this.recurrentConstraint=uC(e.recurrentConstraint),this.biasConstraint=uC(e.biasConstraint),this.dropout=FC([1,RC([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FC([1,RC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=WN(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return LA(()=>{if(2!==(e=e).length)throw new FT(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=null!=t.training&&t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=PR({ones:()=>fS(e),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=PR({ones:()=>fS(r),rate:this.recurrentDropout,training:n,count:3}));let a,s,i,o=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=GA(e,this.dropoutMask[0]));let l=HC(e,this.kernel.read());this.useBias&&(l=KC(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=GA(r,o[0]));let u=this.recurrentKernel.read(),[h,c]=qS(u,[2*this.units,this.units],u.rank-1),d=HC(r,h),[p,f,m]=qS(l,3,l.rank-1),[g,y]=qS(d,2,d.rank-1);a=this.recurrentActivation.apply(jA(p,g)),s=this.recurrentActivation.apply(jA(f,y));let b=HC(GA(s,r),c);i=this.activation.apply(jA(m,b));let x=jA(GA(a,r),GA(jA(1,Rk(a)),i));return[x,x]})}getConfig(){return{...super.getConfig(),units:this.units,activation:WF(this.activation),recurrentActivation:WF(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yN(this.kernelInitializer),recurrentInitializer:yN(this.recurrentInitializer),biasInitializer:yN(this.biasInitializer),kernelRegularizer:XF(this.kernelRegularizer),recurrentRegularizer:XF(this.recurrentRegularizer),biasRegularizer:XF(this.biasRegularizer),activityRegularizer:XF(this.activityRegularizer),kernelConstraint:oC(this.kernelConstraint),recurrentConstraint:oC(this.recurrentConstraint),biasConstraint:oC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1}}};FR.className="GRUCell",RA.registerClass(FR);var RR=class extends TR{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new FR(e),super(e)}call(e,t){return LA(()=>(null!=this.cell.dropoutMask&&(VA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(VA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};RR.className="GRU",RA.registerClass(RR);var DR=class extends CR{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,YT(this.units,"units"),this.activation=HF(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=HF(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=bN(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=bN(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=bN(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=YF(e.kernelRegularizer),this.recurrentRegularizer=YF(e.recurrentRegularizer),this.biasRegularizer=YF(e.biasRegularizer),this.kernelConstraint=uC(e.kernelConstraint),this.recurrentConstraint=uC(e.recurrentConstraint),this.biasConstraint=uC(e.biasConstraint),this.dropout=FC([1,RC([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FC([1,RC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;let n;if(e=WN(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){let e=this.biasInitializer,r=this.units;n=new((t=class extends QC{apply(t,n){let a=e.apply([r]),s=(new tN).apply([r]),i=e.apply([2*r]);return BC(BC(a,s),i)}}).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return LA(()=>{let n=null!=t.training&&t.training;if(3!==(e=e).length)throw new FT(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1],a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=PR({ones:()=>fS(e),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=PR({ones:()=>fS(r),rate:this.recurrentDropout,training:n,count:4}));let s,i,o,l,u=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=GA(e,this.dropoutMask[0]));let h=HC(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=GA(r,u[0])),h=jA(h,HC(r,this.recurrentKernel.read())),this.useBias&&(h=KC(h,this.bias.read()));let[c,d,p,f]=qS(h,4,h.rank-1);s=this.recurrentActivation.apply(c),i=this.recurrentActivation.apply(d),o=jA(GA(i,a),GA(s,this.activation.apply(p))),l=this.recurrentActivation.apply(f);let m=GA(l,this.activation.apply(o));return[m,m,o]})}getConfig(){return{...super.getConfig(),units:this.units,activation:WF(this.activation),recurrentActivation:WF(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yN(this.kernelInitializer),recurrentInitializer:yN(this.recurrentInitializer),biasInitializer:yN(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:XF(this.kernelRegularizer),recurrentRegularizer:XF(this.recurrentRegularizer),biasRegularizer:XF(this.biasRegularizer),activityRegularizer:XF(this.activityRegularizer),kernelConstraint:oC(this.kernelConstraint),recurrentConstraint:oC(this.recurrentConstraint),biasConstraint:oC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation}}};DR.className="LSTMCell",RA.registerClass(DR);var OR=class extends TR{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new DR(e),super(e)}call(e,t){return LA(()=>(null!=this.cell.dropoutMask&&(VA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(VA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};OR.className="LSTM",RA.registerClass(OR);var zR=class extends CR{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return LA(()=>{let n=(e=e).slice(1),r=[];for(let e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();let a,s=[];for(let i=0;i<this.cells.length;++i){let o=this.cells[i];n=r[i],a=0===i?[e[0]].concat(n):[a[0]].concat(n),a=o.call(a,t),s.push(a.slice(1))}n=[];for(let e of s.slice().reverse())n.push(...e);return[a[0]].concat(n)})}build(e){let t;LN(e)&&(e=e[0]),e=e,this.cells.forEach((n,r)=>{IC("RNNCell_"+r,()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){return{...super.getConfig(),cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))}}static fromConfig(e,t,n={}){let r=[];for(let a of t.cells)r.push(mM(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return GN(e)}setWeights(e){let t=[];for(let n of this.cells){let r=e.splice(n.weights.length);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}qN(t)}};function PR(e){let{ones:t,rate:n,training:r=!1,count:a=1}=e,s=()=>XC(t(),n),i=()=>ZC(s,t,r);return!a||a<=1?BA(i().clone()):Array(a).fill(void 0).map(i).map(e=>BA(e.clone()))}zR.className="StackedRNNCells",RA.registerClass(zR);var $R=class extends TR{constructor(e){if(e.unroll)throw new RT("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new RT("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new KN({ndim:5})]}call(e,t){return LA(()=>{if(null!=this.cell.dropoutMask&&(VA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(VA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new FT("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return LA(()=>{let{stateSize:t}=this.cell,n=this.computeSingleOutputShape(e.shape),r=aS([n[0],...n.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]})}resetStates(e,t=!1){LA(()=>{if(!this.stateful)throw new NT("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new FT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>aS(a)):[aS(a)];else if(null==e)VA(this.states_),null!=this.keptStates&&(VA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>aS(a)):this.states_[0]=aS(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new FT(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):VA(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t],r=a;if(!zb.arraysEqual(n.shape,r))throw new FT(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>BA(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:s,dilationRate:i}=this.cell,o="channelsFirst"===t,l=e[o?4:3],u=sR(e[o?3:2],r[0],a,s[0],i[0]),h=sR(l,r[1],a,s[1],i[1]);return[...e.slice(0,2),...o?[n,u,h]:[u,h,n]]}};$R.className="ConvRNN2D";var LR=class extends DR{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:s,dilationRate:i}=e;super({...e,units:t}),this.filters=t,YT(this.filters,"filters"),this.kernelSize=aR(n,2,"kernelSize"),this.kernelSize.forEach(e=>YT(e,"kernelSize")),this.strides=aR(r||1,2,"strides"),this.strides.forEach(e=>YT(e,"strides")),this.padding=a||"valid",wC(this.padding),this.dataFormat=s||"channelsLast",AC(this.dataFormat),this.dilationRate=aR(i||1,2,"dilationRate"),this.dilationRate.forEach(e=>YT(e,"dilationRate"))}build(e){var t;e=WN(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new FT("The channel dimension of the input should be defined. Found "+e[n]);let r=this.kernelSize.concat([e[n],4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,r=this.filters;e=new((t=class extends QC{apply(e,t){return VC([n.apply([r]),sS([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return LA(()=>{if(3!==e.length)throw new FT(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,r=e[0],a=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=PR({ones:()=>fS(r),rate:this.dropout,training:n,count:4}));let i=this.dropoutMask,o=(e,t,n)=>t&&t[n]?GA(t[n],e):e,l=o(r,i,0),u=o(r,i,1),h=o(r,i,2),c=o(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=PR({ones:()=>fS(a),rate:this.recurrentDropout,training:n,count:4}));let d=this.recurrentDropoutMask,p=o(a,d,0),f=o(a,d,1),m=o(a,d,2),g=o(a,d,3),[y,b,x,v]=qS(this.kernel.read(),4,3),[A,w,k,S]=this.useBias?qS(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,A,this.padding),u=this.inputConv(u,b,w,this.padding),h=this.inputConv(h,x,k,this.padding),c=this.inputConv(c,v,S,this.padding);let[I,_,E,T]=qS(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,I),f=this.recurrentConv(f,_),m=this.recurrentConv(m,E),g=this.recurrentConv(g,T);let C=this.recurrentActivation.apply(jA(l,p)),N=this.recurrentActivation.apply(jA(u,f)),M=jA(GA(N,s),GA(C,this.activation.apply(jA(h,m)))),F=GA(this.recurrentActivation.apply(jA(c,g)),this.activation.apply(M));return[F,F,M]})}getConfig(){let{units:e,...t}=super.getConfig();return{...t,filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides}}inputConv(e,t,n,r){let a=Vw(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?KC(a,n,this.dataFormat):a}recurrentConv(e,t){return Vw(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}};LR.className="ConvLSTM2DCell",RA.registerClass(LR);var VR=class extends $R{constructor(e){let t=new LR(e);super({...e,cell:t})}static fromConfig(e,t){return new e(t)}};VR.className="ConvLSTM2D",RA.registerClass(VR);var BR=class extends QN{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n);return ZC(()=>XC(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};BR.className="Dropout",RA.registerClass(BR);var WR=class extends BR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};WR.className="SpatialDropout1D",RA.registerClass(WR);var jR=class extends QN{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,YT(this.units,"units"),this.activation=HF(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=bN(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=bN(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=uC(e.kernelConstraint),this.biasConstraint=uC(e.biasConstraint),this.kernelRegularizer=YF(e.kernelRegularizer),this.biasRegularizer=YF(e.biasRegularizer),this.activityRegularizer=YF(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let t=(e=WN(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){let t=(e=WN(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n,r=BN(e),a=QT(this.activation.getClassName());return null!=a?n=HC(r,this.kernel.read(),a,this.bias?this.bias.read():null):(n=HC(r,this.kernel.read()),null!=this.bias&&(n=KC(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:WF(this.activation),useBias:this.useBias,kernelInitializer:yN(this.kernelInitializer),biasInitializer:yN(this.biasInitializer),kernelRegularizer:XF(this.kernelRegularizer),biasRegularizer:XF(this.biasRegularizer),activityRegularizer:XF(this.activityRegularizer),kernelConstraint:oC(this.kernelConstraint),biasConstraint:oC(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};jR.className="Dense",RA.registerClass(jR);var HR=class extends QN{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=WN(e);for(let t of e.slice(1))if(null==t)throw new FT(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],MC(e,1)]}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=n.transpose(e)}return function(e){if(e.rank<=1)throw new FT(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],MC(e.shape,1)];return e.reshape(t)}(n)})}getConfig(){let e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};HR.className="Flatten",RA.registerClass(HR);var UR=class extends QN{constructor(e){super(e),this.supportsMasking=!0,this.activation=HF(e.activation)}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);return this.activation.apply(n)})}getConfig(){let e={activation:WF(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};UR.className="Activation",RA.registerClass(UR);var GR=class extends QN{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return LA(()=>function(e,t){return LA(()=>{if(2!==e.shape.length)throw new FT(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return WC(zC(e,1),[1,t,1])})}(e=BN(e),this.n))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};GR.className="RepeatVector",RA.registerClass(GR);var qR=class extends QN{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,s=null;for(let o=0;o<r.length;++o){let e=r[o];if(this.isUnknown(e)){if(null!==s)throw new FT("Can only specifiy one unknown dimension.");s=o}else a*=e}let i=MC(e);if(null!==s){if(0===a||i%a!=0)throw new FT(n);r[s]=i/a}else if(i!==a)throw new FT(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(a)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};qR.className="Reshape",RA.registerClass(qR);var KR=class extends QN{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=DC(1,e.dims.length+1);if(!zb.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new KN({ndim:this.dims.length+1})]}computeOutputShape(e){let t=(e=WN(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return rA(BN(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};KR.className="Permute",RA.registerClass(KR);var XR=class extends QN{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=BN(e);return JA(pS(n,this.maskValue),-1)}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e),r=JA(pS(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}};XR.className="Masking",RA.registerClass(XR);var ZR=class extends QN{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=null==e.inputLength?[t,null]:[t].concat(LT(e.inputLength))}this.inputDim=e.inputDim,YT(this.inputDim,"inputDim"),this.outputDim=e.outputDim,YT(this.outputDim,"outputDim"),this.embeddingsInitializer=bN(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=YF(e.embeddingsRegularizer),this.activityRegularizer=YF(e.activityRegularizer),this.embeddingsConstraint=uC(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return LA(()=>this.maskZero?(e=BN(e),pS(e,sk(e))):null)}computeOutputShape(e){if(e=WN(e),null==this.inputLength)return[...e,this.outputDim];let t=LT(this.inputLength);if(t.length!==e.length-1)throw new FT(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let a=t[r],s=e[r+1];if(null!=a&&null!=s&&a!==s)throw new FT(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);return"int32"!==n.dtype&&(n=OC(n,"int32")),UC(this.embeddings.read(),n.as1D()).reshape(WN(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:yN(this.embeddingsInitializer),embeddingsRegularizer:XF(this.embeddingsRegularizer),activityRegularizer:XF(this.activityRegularizer),embeddingsConstraint:oC(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};ZR.className="Embedding",RA.registerClass(ZR);var YR=class extends QN{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new RT}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],s=t[r];if(null==a||null==s||a<0||s<0)n.push(null);else if(1===a)n.push(s);else if(1===s)n.push(a);else{if(a!==s)throw new FT("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[WN(e)]),(e=e).length<2)throw new FT(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=qT(t),t.length>1)throw new FT(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){let t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}let r=e.map(e=>e.length);this.reshapeRequired=-1!==e.indexOf(null)||1!==qT(r).length}call(e,t){return LA(()=>{if(e=e,this.reshapeRequired){let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=RC(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=zC(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let s of e){let e=s.rank;if(null==e){let e=s.shape,r=e[0],a=e.slice(1).concat([r]),i=s.reshape([r].concat(MC(e.slice(1))));i=rA(i,[1,0]),i=i.reshape(a),t.push(i),n=!0}else if(e>1){let r=DC(1,e).concat([0]);t.push(rA(s,r)),n=!0}else t.push(s)}let r=this.mergeFunction(t),a=r.rank;if(n)if(null==a){let e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=rA(r.reshape([-1,t]),[1,0]).reshape(n)}else if(a>1){let e=[a-1].concat(DC(0,a-1));r=rA(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){let n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(let r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=qT(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return LA(()=>{if(null==t)return null;if(!Array.isArray(t))throw new FT("`mask` should be an Array");if(!Array.isArray(e))throw new FT("`inputs` should be an Array");if(t.length!==e.length)throw new FT(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:dk(e,0)))[0];for(let e=1;e<t.length-1;++e)n=Xk(n,t[e]);return n})}},JR=class extends YR{constructor(e){super(e)}mergeFunction(e){return LA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=jA(t,e[n]);return t})}};JR.className="Add",RA.registerClass(JR);var QR=class extends YR{constructor(e){super(e)}mergeFunction(e){return LA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=GA(t,e[n]);return t})}};QR.className="Multiply",RA.registerClass(QR);var eD=class extends YR{constructor(e){super(e)}mergeFunction(e){return LA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=jA(t,e[n]);return GA(1/e.length,t)})}};eD.className="Average",RA.registerClass(eD);var tD=class extends YR{constructor(e){super(e)}mergeFunction(e){return LA(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=nS(t,e[n]);return t})}};tD.className="Maximum",RA.registerClass(tD);var nD=class extends YR{constructor(e){super(e)}mergeFunction(e){return LA(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=oS(t,e[n]);return t})}};nD.className="Minimum",RA.registerClass(nD);var rD=class extends YR{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new FT("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let r of e)if(null!=r){t=!1;break}if(t)return;let n=[];for(let r=0;r<e.length;++r){let t=e[r].slice();t.splice(this.axis,1);let a=!1;for(let e of n)if(zb.arraysEqual(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new FT("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return LA(()=>VC(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new FT("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new FT("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new FT("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new FT(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return LA(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;let r=[];for(let s=0;s<e.length;++s)r.push(null==t[s]?fS(e[s]).asType("bool"):t[s].rank<e[s].rank?dk(t[s],-1):t[s]);let a=ww(r,this.axis);return YA(a,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function aD(e,t){for(;e<0;)e+=t;return e}rD.className="Concatenate",RA.registerClass(rD);var sD=class extends YR{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){zb.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new RT("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new FT(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new FT(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>aD(t,e[n].shape.length)):[aD(this.axes,n.shape.length),aD(this.axes,r.shape.length)],this.normalize&&(n=gM(n,t[0]),r=gM(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new RT("batchDot is not implemented for tensors of 4D or higher rank yet");if(zb.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+e.shape.length),zb.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+t.shape.length),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new RT("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);let s=n;return LA(()=>{let n,i;if(r>a){n=r-a;let e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else if(a>r){n=a-r;let t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else n=0;if(i=2===e.shape.length&&2===t.shape.length?s[0]===s[1]?e.mul(t).sum(s[0]):e.transpose([1,0]).mul(t).sum(s[1]):e.matMul(t,s[0]!==e.shape.length-1,s[1]===t.shape.length-1),n>0){let e;e=r>a?r+a-3:r-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);i=i.squeeze(t)}return 1===i.shape.length&&(i=i.expandDims(1)),i})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[aD(this.axes,e.length),aD(this.axes,t.length)],n}computeOutputShape(e){zb.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new RT("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};sD.className="Dot",RA.registerClass(sD);var iD=class extends QN{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);return ZC(()=>jC(n.shape,0,this.stddev).add(n),()=>n,t.training||!1)})}};iD.className="GaussianNoise",RA.registerClass(iD);var oD=class extends QN{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return LA(()=>{this.invokeCallHook(e,t);let n=BN(e);return this.rate>0&&this.rate<1?ZC(()=>{let e=Math.sqrt(this.rate/(1-this.rate));return n.mul(jC(n.shape,1,e))},()=>n,t.training||!1):n})}};oD.className="GaussianDropout",RA.registerClass(oD);var lD=class extends QN{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||BN(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return LA(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return ZC(()=>{let t=BN(e),r=-1.7580993408473766,a=vk(SS(n),this.rate);a=OC(a,"float32");let s=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-s*r*this.rate;return t.mul(a).add(a.add(-1).mul(r)).mul(s).add(i)},()=>BN(e),t.training||!1)}return e})}};function uD(e,t,n,r,a,s=.001){let i;if(2===e.rank)i=Cw(e,t,n,r,a,s);else if(3===e.rank)i=Nw(e,t,n,r,a,s);else{if(4!==e.rank)throw new RT(`batchNormalization is not implemented for array of rank ${e.rank} yet`);i=Mw(e,t,n,r,a,s)}return i}lD.className="AlphaDropout",RA.registerClass(lD);var hD=class extends QN{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=bN(e.betaInitializer||"zeros"),this.gammaInitializer=bN(e.gammaInitializer||"ones"),this.movingMeanInitializer=bN(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=bN(e.movingVarianceInitializer||"ones"),this.betaConstraint=uC(e.betaConstraint),this.gammaConstraint=uC(e.gammaConstraint),this.betaRegularizer=YF(e.betaRegularizer),this.gammaRegularizer=YF(e.gammaRegularizer)}build(e){e=WN(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new FT(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new KN({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return LA(()=>{let n=null!=t.training&&t.training,r=BN(e),a=r.shape,s=a.length,i=DC(0,s),o=this.axis>=0?this.axis:this.axis+s;i.splice(o,1);let l=OT(1,s);l[o]=a[o];let u=i.slice();u.sort();let h=!zb.arraysEqual(u,DC(0,s).slice(0,s-1));if(!n)return(()=>{if(h){let e=this.movingMean.read().reshape(l),t=this.movingVariance.read().reshape(l),n=this.center?this.beta.read().reshape(l):null,a=this.scale?this.gamma.read().reshape(l):null;return uD(r,e,t,n,a,this.epsilon)}return uD(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();let[c,d,p]=function(e,t,n,r,a=.001){return zb.arraysEqual(r.slice().sort(),DC(0,e.rank-1))?function(e,t,n,r,a=.001){return LA(()=>{let s=cS(e,r),i=s.mean,o=s.variance;return[uD(e,i,o,n,t,a),i,o]})}(e,t,n,r,a):function(e,t,n,r,a=.001){return LA(()=>{let s=cS(e,r),i=s.mean,o=s.variance,l=[];for(let t of DC(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);let u=i.reshape(l),h=o.reshape(l),c=null==t?null:t.reshape(l),d=null==n?null:n.reshape(l);return[uD(e,u,h,d,c,a),i,o]})}(e,t,n,r,a)}(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{LA(()=>{let r=1-n,a=e.read(),s=a.sub(t).mul(r);e.write(a.sub(s))})};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),c})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yN(this.betaInitializer),gammaInitializer:yN(this.gammaInitializer),movingMeanInitializer:yN(this.movingMeanInitializer),movingVarianceInitializer:yN(this.movingVarianceInitializer),betaRegularizer:XF(this.betaRegularizer),gammaRegularizer:XF(this.gammaRegularizer),betaConstraint:oC(this.betaConstraint),gammaConstraint:oC(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};hD.className="BatchNormalization",RA.registerClass(hD);var cD=class extends QN{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(let e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=bN(e.betaInitializer||"zeros"),this.gammaInitializer=bN(e.gammaInitializer||"ones"),this.betaRegularizer=YF(e.betaRegularizer),this.gammaRegularizer=YF(e.gammaRegularizer),this.supportsMasking=!0}build(e){let t=(e=WN(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(let r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: "+r);if(this.axis.length!==qT(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);let n=this.axis.map(t=>e[t]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(e,t){let n=BN(e),r=n.shape,a=r.length;return LA(()=>{let{mean:e,variance:t}=cS(n,this.axis,!0),s=OT(1,a);for(let n of this.axis)s[n]=r[n];let i=e=>null!=e&&e.shape.length!==a&&this.axis!==[a-1]?e.reshape(s):e,o=i(this.gamma.read()),l=i(this.beta.read()),u=[],h=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),h.push(1)):(u.push(1),h.push(r[n]));return e=e.tile(u),t=t.tile(u),o=o.tile(h),l=l.tile(h),uD(n,e,t,l,o,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yN(this.betaInitializer),gammaInitializer:yN(this.gammaInitializer),betaRegularizer:XF(this.betaRegularizer),gammaRegularizer:XF(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};cD.className="LayerNormalization",RA.registerClass(cD);var dD=class extends QN{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new FT(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new FT(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new FT(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new KN({ndim:4})]}computeOutputShape(e){let t,n;return e=WN(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return LA(()=>function(e,t,n){return LA(()=>{if(4!==e.rank)throw new FT(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new FT("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new FT(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],mS(e,r)})}(BN(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};function pD(e,t,n,r,a,s){return LA(()=>{AC(a),kC(s),wC(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=oR(e,a);let i,o="same"===r?"same":"valid";return i="max"===s?Qk(e,t,n,o):vw(e,t,n,o),"channelsFirst"===a&&(i=rA(i,[0,3,1,2])),i})}function fD(e,t,n,r,a,s){return LA(()=>{AC(a),kC(s),wC(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=lR(e,a);let i,o="same"===r?"same":"valid";return i="max"===s?eS(e,t,n,o):Aw(e,t,n,o),"channelsFirst"===a&&(i=rA(i,[0,4,1,2,3])),i})}dD.className="ZeroPadding2D",RA.registerClass(dD);var mD=class extends QN{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new FT("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));this.poolSize=e.poolSize}if(YT(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new FT("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));this.strides=e.strides}YT(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,wC(this.padding),this.inputSpec=[new KN({ndim:3})]}computeOutputShape(e){let t=sR((e=WN(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return LA(()=>{this.invokeCallHook(e,t),e=zC(BN(e),2);let n=this.poolingFunction(BN(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return YS(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},gD=class extends mD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),pD(e,t,n,r,a,"max")}};gD.className="MaxPooling1D",RA.registerClass(gD);var yD=class extends mD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),pD(e,t,n,r,a,"avg")}};yD.className="AveragePooling1D",RA.registerClass(yD);var bD=class extends QN{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new FT(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];YT(this.poolSize,"poolSize"),YT(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,AC(this.dataFormat),wC(this.padding),this.inputSpec=[new KN({ndim:4})]}computeOutputShape(e){e=WN(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=sR(t,this.poolSize[0],this.padding,this.strides[0]),n=sR(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return LA(()=>(this.invokeCallHook(e,t),this.poolingFunction(BN(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},xD=class extends bD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),pD(e,t,n,r,a,"max")}};xD.className="MaxPooling2D",RA.registerClass(xD);var vD=class extends bD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),pD(e,t,n,r,a,"avg")}};vD.className="AveragePooling2D",RA.registerClass(vD);var AD=class extends QN{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new FT(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];YT(this.poolSize,"poolSize"),YT(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,AC(this.dataFormat),wC(this.padding),this.inputSpec=[new KN({ndim:5})]}computeOutputShape(e){e=WN(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=sR(t,this.poolSize[0],this.padding,this.strides[0]),n=sR(n,this.poolSize[1],this.padding,this.strides[1]),r=sR(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return LA(()=>(this.invokeCallHook(e,t),this.poolingFunction(BN(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},wD=class extends AD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),fD(e,t,n,r,a,"max")}};wD.className="MaxPooling3D",RA.registerClass(wD);var kD=class extends AD{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return AC(a),wC(r),fD(e,t,n,r,a,"avg")}};kD.className="AveragePooling3D",RA.registerClass(kD);var SD=class extends QN{constructor(e){super(e),this.inputSpec=[new KN({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new RT}},ID=class extends SD{constructor(e){super(e||{})}call(e,t){return LA(()=>{let t=BN(e);return rS(t,1)})}};ID.className="GlobalAveragePooling1D",RA.registerClass(ID);var _D=class extends SD{constructor(e){super(e||{})}call(e,t){return LA(()=>{let t=BN(e);return zk(t,1)})}};_D.className="GlobalMaxPooling1D",RA.registerClass(_D);var ED=class extends QN{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,AC(this.dataFormat),this.inputSpec=[new KN({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new RT}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},TD=class extends ED{call(e,t){return LA(()=>{let t=BN(e);return rS(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};TD.className="GlobalAveragePooling2D",RA.registerClass(TD);var CD=class extends ED{call(e,t){return LA(()=>{let t=BN(e);return zk(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};CD.className="GlobalMaxPooling2D",RA.registerClass(CD);var ND=class extends QN{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=mM(t.layer,n);delete t.layer;let a={layer:r};return Object.assign(a,t),new e(a)}},MD=class extends ND{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=WN(e)).length<3)throw new FT("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){let t=[(e=WN(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))}call(e,t){return LA(()=>_R((e,n)=>[BN(this.layer.call(e,t)),[]],e=BN(e),[],!1,null,null,!1,!0)[1])}};MD.className="TimeDistributed",RA.registerClass(MD);var FD=class extends ND{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=mM(n),t.goBackwards=!0!==t.goBackwards;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=mM(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){XT(xC,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new RT("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState&&(r=a.slice(1)),t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):$T(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=IR(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let s=[],i=[];if(null!=n){let e=n.length;if(e%2>0)throw new FT("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);let r=n.map(e=>new KN({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new RT("Support for constants in Bidirectional layers is not implemented yet.");let o=s[0]instanceof XN;for(let l of s)if(l instanceof XN!==o)throw new FT("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;let o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return LA(()=>{let n,r,a,s,i=t.initialState;if(null==i)n=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{let a=i.slice(0,i.length/2),s=i.slice(i.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return this.returnState&&(Array.isArray(n)&&(a=n.slice(1).concat(r.slice(1))),n=n[0],r=r[0]),this.returnSequences&&(r=NS(r,1)),"concat"===this.mergeMode?s=VC([n,r]):"sum"===this.mergeMode?s=jA(n,r):"ave"===this.mergeMode?s=GA(.5,jA(n,r)):"mul"===this.mergeMode?s=GA(n,r):null==this.mergeMode&&(s=[n,r]),this.returnState?null==this.mergeMode?s.concat(a):[s].concat(a):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){IC(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),IC(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){let e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=mM(t.layer);if(delete t.layer,null!=t.numConstants)throw new RT("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};function RD(e){return new nM(e)}function DD(e){return new tR(e)}function OD(e){return new JF(e)}function zD(e){return new QF(e)}function PD(e){return new eR(e)}function $D(e){return new rR(e)}function LD(e){return new nR(e)}function VD(e){return new AR(e)}function BD(e){return new pR(e)}function WD(e){return new gR(e)}function jD(e){return new mR(e)}function HD(e){return new yR(e)}function UD(e){return new xR(e)}function GD(e){return new wR(e)}function qD(e){return new kR(e)}function KD(e){return new SR(e)}function XD(e){return new UR(e)}function ZD(e){return new jR(e)}function YD(e){return new BR(e)}function JD(e){return new WR(e)}function QD(e){return new HR(e)}function eO(e){return new GR(e)}function tO(e){return new qR(e)}function nO(e){return new KR(e)}function rO(e){return new ZR(e)}function aO(e){return new JR(e)}function sO(e){return new eD(e)}function iO(e){return new rD(e)}function oO(e){return new tD(e)}function lO(e){return new nD(e)}function uO(e){return new QR(e)}function hO(e){return new sD(e)}function cO(e){return new hD(e)}function dO(e){return new cD(e)}function pO(e){return new dD(e)}function fO(e){return new yD(e)}function mO(e){return fO(e)}function gO(e){return fO(e)}function yO(e){return new vD(e)}function bO(e){return yO(e)}function xO(e){return yO(e)}function vO(e){return new kD(e)}function AO(e){return vO(e)}function wO(e){return vO(e)}function kO(e){return new ID(e)}function SO(e){return new TD(e)}function IO(e){return new _D(e)}function _O(e){return new CD(e)}function EO(e){return new gD(e)}function TO(e){return new xD(e)}function CO(e){return new wD(e)}function NO(e){return new RR(e)}function MO(e){return new FR(e)}function FO(e){return new OR(e)}function RO(e){return new DR(e)}function DO(e){return new MR(e)}function OO(e){return new NR(e)}function zO(e){return new VR(e)}function PO(e){return new LR(e)}function $O(e){return new TR(e)}function LO(e){return new zR(e)}function VO(e){return new FD(e)}function BO(e){return new MD(e)}FD.className="Bidirectional",RA.registerClass(FD);var WO=IO,jO=_O,HO=EO,UO=TO;function GO(e){return new iD(e)}function qO(e){return new oD(e)}function KO(e){return new lD(e)}function XO(e){return new XR(e)}var ZO={};function YO(e,t){return _M(e,t)}function JO(e,t){return NM(e,t)}function QO(e,t){return MM(e,t)}function ez(e,t){return EM(e,t)}function tz(e,t){return FM(e,t)}function nz(e,t){return CM(e,t)}function rz(e,t){return function(e,t){return LA(()=>{let n=TM(e,t),r=function(e,t){return LA(()=>Xk(e.equal(1),t.equal(0)).sum().cast("float32"))}(e,t),a=n.add(r);return ak(xk(a,0),n.div(a),0).cast("float32")})}(e,t)}function az(e,t){return kM(e,t)}function sz(e,t){return bM(e,t)}function iz(e,t){return xM(e,t)}function oz(e,t){return xM(e,t)}function lz(e,t){return xM(e,t)}function uz(e,t){return yM(e,t)}function hz(e,t){return yM(e,t)}function cz(e,t){return yM(e,t)}I(ZO,{MAPE:()=>oz,MSE:()=>hz,binaryAccuracy:()=>YO,binaryCrossentropy:()=>JO,categoricalAccuracy:()=>ez,categoricalCrossentropy:()=>tz,cosineProximity:()=>az,mape:()=>lz,meanAbsoluteError:()=>sz,meanAbsolutePercentageError:()=>iz,meanSquaredError:()=>uz,mse:()=>cz,precision:()=>nz,recall:()=>rz,sparseCategoricalAccuracy:()=>QO});var dz={};I(dz,{modelFromJSON:()=>xF});var pz={};function fz(e){return new qF(e)}function mz(e){return function(e){return UF(e),new qF({l1:null!=e?e.l1:null,l2:0})}(e)}function gz(e){return function(e){return UF(e),new qF({l2:null!=e?e.l2:null,l1:0})}(e)}I(pz,{l1:()=>mz,l1l2:()=>fz,l2:()=>gz});var yz=class extends iM{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof yF))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function bz(e,t){return e<t}function xz(e,t){return e>t}var vz,Az,wz=class extends yz{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new RT("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.monitorFunc="min"===this.mode?bz:"max"===this.mode||-1!==this.monitor.indexOf("acc")?xz:bz,this.monitorFunc===bz&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===bz?1/0:-1/0}async onEpochEnd(e,t){await aM(t);let n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});let t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}},kz={earlyStopping:function(e){return new wz(e)}};!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(vz||(vz={})),function(e){let t;var n;(n=t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"}(Az||(Az={}));var Sz={};function Iz(e,t){Sz[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function _z(e){return Sz[e]}function Ez(e){delete Sz[e]}function Tz(e,t,n,r,a){let s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){let e=s.inputIndexStart,i=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd;if("tensor"===s.type)return Cz(t.inputNames[s.inputIndexStart],n,r,a);if("tensors"===s.type)return t.inputNames.slice(e,i).map(e=>Cz(e,n,r,a));let o=Cz(t.inputNames.slice(e)[0],n,r,a),l=o.dataSync();return"number"===s.type?l[0]:zb.toNestedArray(o.shape,l)}let i=t.attrParams[e];return i&&i.value}function Cz(e,t,n,r){let[a,s]=Fz(e);if(null!=r){let e=r.getHashTableHandleByName(a);if(null!=e)return e}let i=n.currentContextIds.find(e=>!!t[Mz(a,e)]);return void 0!==i?t[Mz(a,i)][s]:void 0}function Nz(e,t){let[n,r,a]=Fz(e);return[Mz(n,t&&t.currentContextId),r,a]}function Mz(e,t){return t?`${e}-${t}`:e}function Fz(e){let t=e.split(":");if(1===t.length)return[e,0,void 0];let n=3===t.length?t[1]:void 0;return[t[0],Number(t[t.length-1]),n]}function Rz(e,t,n){let r=Tz("pad",e,t,n);if("explicit"===r){r=Tz("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function Dz(e){return e.kept?e:$v(e)}var Oz={};I(Oz,{json:()=>zz});var zz=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Pz={};I(Pz,{json:()=>$z});var $z=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Lz={};I(Lz,{json:()=>Vz});var Vz=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],Bz={};I(Bz,{json:()=>Wz});var Wz=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],jz={};I(jz,{json:()=>Hz});var Hz=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Uz={};I(Uz,{json:()=>Gz});var Gz=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],qz={};I(qz,{json:()=>Kz});var Kz=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Xz={};I(Xz,{json:()=>Zz});var Zz=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Yz={};I(Yz,{json:()=>Jz});var Jz=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Qz={};I(Qz,{json:()=>eP});var eP=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],tP={};I(tP,{json:()=>nP});var nP=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],rP={};I(rP,{json:()=>aP});var aP=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],sP={};I(sP,{json:()=>iP});var iP=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],oP={};I(oP,{json:()=>lP});var lP=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],uP={};I(uP,{json:()=>hP});var hP=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],cP={};I(cP,{json:()=>dP});var dP=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],pP={};I(pP,{json:()=>fP});var fP=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],mP={};I(mP,{json:()=>gP});var gP=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],yP={};I(yP,{json:()=>bP});var bP=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],xP=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[Oz,Pz,Lz,Bz,jz,Uz,qz,Xz,Yz,Qz,tP,rP,sP,oP,uP,cP,pP,mP,yP].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){let n=[],r=[],a=[],s=e.node.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?n.push(e[t.name]):"Const"===t.op?r.push(e[t.name]):(null==t.input||0===t.input.length)&&a.push(e[t.name]),e),{}),i=[],o=[],l={},u={};null!=t&&(l=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));let h=Object.keys(s);h.forEach(e=>{let t=s[e];t.inputNames.forEach((e,n)=>{let[r,,a]=Nz(e),i=s[r];if(null!=i.outputs){let e=i.outputs.indexOf(a);-1!==e&&(t.inputNames[n]=`${r}:${e}`)}t.inputs.push(i),i.children.push(t)})}),0===Object.keys(u).length?h.forEach(e=>{let t=s[e];0===t.children.length&&o.push(t)}):Object.keys(u).forEach(e=>{let[t]=Nz(e),n=s[t];null!=n&&(n.signatureKey=u[e],o.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{let[t]=Nz(e),n=s[t];n&&(n.signatureKey=l[e],i.push(n))}):i=n;let c={};null!=e.library&&null!=e.library.function&&(c=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let d={nodes:s,inputs:i,outputs:o,weights:r,placeholders:n,signature:t,functions:c};return a.length>0&&(d.initNodes=a),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=_z(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{let r,a=n.type;switch(n.type){case"string":r=AP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=AP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=MP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=MP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=kP(e.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=kP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=NP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=NP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=wP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=wP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=RP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=RP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=CP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=CP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=FP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=FP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=_P(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=_P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=EP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=EP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=IP(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=IP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:r,type:a},t},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));let a=[],s=[];e.signature.inputArg.forEach(e=>{let[t]=Nz(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:SP(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}),Object.keys(r).forEach(e=>{let t=r[e];t.inputNames.forEach((e,n)=>{let[a,,s]=Nz(e),i=r[a];if(null!=i.outputs){let e=i.outputs.indexOf(s);-1!==e&&(t.inputNames[n]=`${a}:${e}`)}t.inputs.push(i),i.children.push(t)})});let i=e.ret;e.signature.outputArg.forEach(e=>{let[t,n]=Nz(i[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))});let o=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}};function vP(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=wm().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function AP(e,t,n,r=!1){let a=e[t];return null!=a?vP(a.s,r):n}function wP(e,t,n){let r=e[t];return r?r.b:n}function kP(e,t,n){let r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function SP(e){switch("string"==typeof e&&(e=vz[e]),e){case vz.DT_FLOAT:return"float32";case vz.DT_INT32:case vz.DT_INT64:case vz.DT_INT8:case vz.DT_UINT8:return"int32";case vz.DT_BOOL:return"bool";case vz.DT_DOUBLE:return"float32";case vz.DT_STRING:return"string";default:return null}}function IP(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function _P(e,t,n){let r=e[t];return r&&r.type?SP(r.type):n}function EP(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>SP(e)):n}function TP(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function CP(e,t,n){let r=e[t];return r&&r.shape?TP(r.shape):n}function NP(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function MP(e,t,n,r=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>vP(e,r)):n}function FP(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>TP(e)):n}function RP(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}function DP(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){zb.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let a=e[r],s=t[r];zb.assert(a<0||s<0||a===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function OP(e){return!("number"==typeof e||e.some(e=>e<0))}function zP(e,t,n){let r=PP(e,n),a=!OP(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: "+r);if(a&&t.forEach(e=>{r=PP(e.shape,r)}),!OP(r))throw new Error("Non-fully-defined elementShape: "+r);return r}function PP(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}var $P=class{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);DP(t,e.shape,"TensorList shape mismatch: "),BA(e)}),this.idTensor=RS(0),this.maxNumElements=r,BA(this.idTensor)}get id(){return this.idTensor.id}copy(){return new $P([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);DP(e,this.elementShape,"TensorList shape mismatch: ");let r=zP(this.elementShape,this.tensors,e);return LA(()=>{let e=this.tensors.map(e=>xw(e,r));return JS(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");let n=zP(this.elementShape,this.tensors,e),r=this.tensors.pop();return DP(r.shape,e,"TensorList shape mismatch: "),xw(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(DP(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");BA(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);DP(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=zP(this.elementShape,this.tensors,t);return xw(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);DP(this.elementShape,t.shape,"TensorList shape mismatch: "),BA(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);DP(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=zP(this.elementShape,this.tensors,n);return 0===e.length?qx([],[0].concat(r)):LA(()=>{let t=e.map(e=>xw(this.tensors[e],r));return JS(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);DP(this.elementShape,t,"TensorList shape mismatch: ");let n=zP(this.elementShape,this.tensors,t);return 0===this.size()?qx([],[0].concat(n)):LA(()=>{let e=this.tensors.map(e=>xw(e,n));return ww(e,0)})}},LP=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=Tz("thenBranch",e,t,n),a=Tz("elseBranch",e,t,n),s=Tz("cond",e,t,n),i=Tz("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=Tz("body",e,t,n),a=Tz("cond",e,t,n),s=Tz("args",e,t,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(e=>e.id),l=await i[0].data();i.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&e.dispose()});let u=s;for(;l[0];){let e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);let t=u.map(e=>e.id);e.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()});let s=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await s[0].data(),s.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()})}return u}case"LoopCond":return[Dz(Tz("pred",e,t,n))];case"Switch":{let r=Tz("pred",e,t,n),a=Tz("data",e,t,n);return a.kept||(a=Dz(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(e=>void 0!==Cz(e,t,n));return r?[Dz(Cz(r,t,n))]:void 0}case"Enter":{let r=Tz("frameName",e,t,n),a=Tz("tensor",e,t,n);return n.enterFrame(r),[Dz(a)]}case"Exit":{let r=Tz("tensor",e,t,n);return n.exitFrame(),[Dz(r)]}case"NextIteration":{let r=Tz("tensor",e,t,n);return n.nextIteration(),[Dz(r)]}case"TensorArrayV3":{let r=Tz("size",e,t,n),a=Tz("dtype",e,t,n),s=Tz("elementShape",e,t,n),i=Tz("dynamicSize",e,t,n),o=Tz("clearAfterRead",e,t,n),l=Tz("identicalElementShapes",e,t,n),u=Tz("name",e,t,n),h=new class{constructor(e,t,n,r,a,s,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=RS(0),BA(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),DP(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,BA(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return qx([],[0].concat(this.elementShape));let n=this.readMany(e);return DP(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),JS(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return qx([],[0].concat(this.elementShape));let t=[];for(let r=0;r<this.size();r++)t.push(r);let n=this.readMany(t);return DP(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),ww(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,lI(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let a=0===n?0:t.size/n,s=[];LA(()=>{t=xw(t,[1,n,a]);for(let n=0;n<e.length;++n)s[n]=xw(Sw(t,[0,0===n?0:r[n-1],0],[1,e[n],a]),this.elementShape);return s});let i=[];for(let o=0;o<e.length;o++)i[o]=o;this.writeMany(i,s)}}(u,a,r,s,l,i,o);return n.addTensorArray(h),[h.idTensor,RS(1)]}case"TensorArrayWriteV3":{let r=Tz("tensorArrayId",e,t,n),a=Tz("index",e,t,n),s=Tz("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{let r=Tz("tensorArrayId",e,t,n),a=Tz("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{let r=Tz("tensorArrayId",e,t,n),a=Tz("indices",e,t,n),s=Tz("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{let r=Tz("tensorArrayId",e,t,n),a=Tz("indices",e,t,n),s=Tz("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{let r=Tz("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=Tz("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{let r=Tz("tensorArrayId",e,t,n),a=Tz("tensor",e,t,n),s=Tz("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{let r=Tz("tensorArrayId",e,t,n);return[RS(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{let r=Tz("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=Tz("tensorListId",e,t,n),a=Tz("index",e,t,n),s=Tz("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{let r=Tz("tensorListId",e,t,n),a=Tz("index",e,t,n),s=Tz("elementShape",e,t,n),i=Tz("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{let r=Tz("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);let s=new $P([],n,e.dtype,r),i=lI(e,0);return t.forEach((e,t)=>{s.setItem(e,i[t])}),s}(Tz("tensor",e,t,n),r,Tz("elementShape",e,t,n),Tz("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r,a=Tz("elementShape",e,t,n),s=Tz("elementDType",e,t,n);r="TensorListReserve"===e.op?"numElements":"maxNumElements";let i=function(e,t,n){return new $P([],e,t,n)}(a,s,Tz(r,e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListGather":{let r=Tz("tensorListId",e,t,n),a=Tz("indices",e,t,n),s=Tz("elementShape",e,t,n),i=Tz("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,i,s)]}case"TensorListStack":{let r=Tz("tensorListId",e,t,n),a=Tz("elementShape",e,t,n),s=Tz("elementDType",e,t,n),i=Tz("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,i)]}case"TensorListFromTensor":{let r=function(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+e.shape);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);DP(e.shape.slice(1),t,"TensorList shape mismatch: ");let a=lI(e);return new $P(a,t,r)}(Tz("tensor",e,t,n),Tz("elementShape",e,t,n),Tz("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{let r=Tz("tensorListId",e,t,n),a=n.getTensorList(r.id),s=Tz("dtype",e,t,n),i=Tz("elementShape",e,t,n);return[a.concat(s,i)]}case"TensorListPushBack":{let r=Tz("tensorListId",e,t,n),a=Tz("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{let r=Tz("tensorListId",e,t,n),a=Tz("elementShape",e,t,n),s=Tz("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{let r=Tz("tensor",e,t,n),a=Tz("elementShape",e,t,n),s=function(e,t,n){let r=0,a=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);let s=PP(e.shape.slice(1),n),i=0===r?0:e.size/r,o=LA(()=>{let n=[];e=xw(e,[1,r,i]);for(let r=0;r<t.length;++r)n[r]=xw(Sw(e,[0,0===r?0:a[r-1],0],[1,t[r],i]),s);return e.dispose(),n}),l=new $P([],n,e.dtype,t.length);for(let u=0;u<o.length;u++)l.setItem(u,o[u]);return l}(r,Tz("lengths",e,t,n),a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function VP(e,t,n){let[r,a]=Tz("fusedOps",e,t,n),s="biasadd"===r,i=!s,o="prelu"===a,l="fusedbatchnorm"===r,u=Tz("numArgs",e,t,n);if(s){if(o&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let h=Tz("strides",e,t,n),c=Rz(e,t,n),d=Tz("dataFormat",e,t,n).toUpperCase(),p=Tz("dilations",e,t,n),[f,m]=Tz("args",e,t,n);return i&&(m=f,f=void 0),{stride:h,pad:c,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:Tz("leakyreluAlpha",e,t,n)}}function BP(e,t,n){return{boxes:Tz("boxes",e,t,n),scores:Tz("scores",e,t,n),maxOutputSize:Tz("maxOutputSize",e,t,n),iouThreshold:Tz("iouThreshold",e,t,n),scoreThreshold:Tz("scoreThreshold",e,t,n),softNmsSigma:Tz("softNmsSigma",e,t,n)}}var WP=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=Tz("keyDType",e,t,n),s=Tz("valueDType",e,t,n),i=new class{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=RS(0),this.tensorMap=new Map,BA(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return RS(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),LA(()=>{let e=lI(t),r=n.length,a=e.length;zb.assert(r===a,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`);for(let t=0;t<r;t++){let r=n[t],a=e[t];BA(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return LA(()=>{let e=[];for(let r=0;r<n.length;r++){let a=this.findWithDefault(n[r],t);e.push(a)}return JS(e)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}(a,s);return r.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{let a=Tz("tableHandle",e,t,n,r),s=Tz("keys",e,t,n),i=Tz("values",e,t,n);return[await r.getHashTableById(a.id).import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{let a=Tz("tableHandle",e,t,n,r),s=Tz("keys",e,t,n),i=Tz("defaultValue",e,t,n);return[await r.getHashTableById(a.id).find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=Tz("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function jP(e,t,n,r){let a=((e,t,n)=>{switch(e.category){case"arithmetic":return LA(()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[jA(Tz("a",e,t,n),Tz("b",e,t,n))];case"AddN":return[ZA(Tz("tensors",e,t,n))];case"FloorMod":case"Mod":return[uS(Tz("a",e,t,n),Tz("b",e,t,n))];case"Mul":return[GA(Tz("a",e,t,n),Tz("b",e,t,n))];case"RealDiv":case"Div":return[UA(Tz("a",e,t,n),Tz("b",e,t,n))];case"DivNoNan":return[ik(Tz("a",e,t,n),Tz("b",e,t,n))];case"FloorDiv":return[HA(Tz("a",e,t,n),Tz("b",e,t,n))];case"Sub":return[Pk(Tz("a",e,t,n),Tz("b",e,t,n))];case"Minimum":return[oS(Tz("a",e,t,n),Tz("b",e,t,n))];case"Maximum":return[nS(Tz("a",e,t,n),Tz("b",e,t,n))];case"Pow":return[bS(Tz("a",e,t,n),Tz("b",e,t,n))];case"SquaredDifference":return[ZS(Tz("a",e,t,n),Tz("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"basic_math":return LA(()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[qA(Tz("x",e,t,n))];case"Acos":return[KA(Tz("x",e,t,n))];case"Acosh":return[XA(Tz("x",e,t,n))];case"Asin":return[tw(Tz("x",e,t,n))];case"Asinh":return[nw(Tz("x",e,t,n))];case"Atan":return[rw(Tz("x",e,t,n))];case"Atan2":return[aw(Tz("x",e,t,n),Tz("y",e,t,n))];case"Atanh":return[sw(Tz("x",e,t,n))];case"Ceil":return[Dw(Tz("x",e,t,n))];case"Complex":return[Ux(Tz("real",e,t,n),Tz("imag",e,t,n))];case"Cos":return[qw(Tz("x",e,t,n))];case"Cosh":return[Kw(Tz("x",e,t,n))];case"Elu":return[uk(Tz("x",e,t,n))];case"Erf":return[hk(Tz("x",e,t,n))];case"Exp":return[ck(Tz("x",e,t,n))];case"Expm1":return[pk(Tz("x",e,t,n))];case"Floor":return[yk(Tz("x",e,t,n))];case"Log":return[Nk(Tz("x",e,t,n))];case"Log1p":return[Mk(Tz("x",e,t,n))];case"Imag":return[Ak(Tz("x",e,t,n))];case"Neg":return[Rk(Tz("x",e,t,n))];case"Reciprocal":return[ES(Tz("x",e,t,n))];case"Real":return[_S(Tz("x",e,t,n))];case"Relu":return[TS(Tz("x",e,t,n))];case"Round":return[MS(Tz("x",e,t,n))];case"Selu":return[DS(Tz("x",e,t,n))];case"Sigmoid":return[kw(Tz("x",e,t,n))];case"Sin":return[PS(Tz("x",e,t,n))];case"Sign":return[zS(Tz("x",e,t,n))];case"Sinh":return[$S(Tz("x",e,t,n))];case"Softplus":return[Dk(Tz("x",e,t,n))];case"Sqrt":return[XS(Tz("x",e,t,n))];case"Square":return[hS(Tz("x",e,t,n))];case"Tanh":return[Iw(Tz("x",e,t,n))];case"Tan":return[tI(Tz("x",e,t,n))];case"ClipByValue":return[Ow(Tz("x",e,t,n),Tz("clipValueMin",e,t,n),Tz("clipValueMax",e,t,n))];case"Relu6":return[CS(Tz("x",e,t,n))];case"Rsqrt":return[FS(Cz(e.inputNames[0],t,n))];case"Prod":return[vS(Tz("x",e,t,n),Tz("axes",e,t,n))];case"LeakyRelu":return[Ik(Tz("x",e,t,n),Tz("alpha",e,t,n))];case"Prelu":return[xS(Tz("x",e,t,n),Tz("alpha",e,t,n))];case"IsNan":return[Sk(Cz(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"control":return LP(e,t,n);case"convolution":return LA(()=>((e,t,n)=>{switch(e.op){case"Conv1D":{let r=Tz("stride",e,t,n),a=Tz("pad",e,t,n),s=Tz("dataFormat",e,t,n).toUpperCase(),i=Tz("dilation",e,t,n);return[Bw(Tz("x",e,t,n),Tz("filter",e,t,n),r,a,s,i)]}case"Conv2D":{let r=Tz("strides",e,t,n),a=Rz(e,t,n),s=Tz("dataFormat",e,t,n).toUpperCase(),i=Tz("dilations",e,t,n);return[Vw(Tz("x",e,t,n),Tz("filter",e,t,n),[r[1],r[2]],a,s,[i[1],i[2]])]}case"_FusedConv2D":{let{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:h}=VP(e,t,n);return[bI.conv2d({x:Tz("x",e,t,n),filter:Tz("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{let{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:h}=VP(e,t,n);return[bI.depthwiseConv2d({x:Tz("x",e,t,n),filter:Tz("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let r=Tz("outputShape",e,t,n),a=Tz("strides",e,t,n),s=Rz(e,t,n);return[jw(Tz("x",e,t,n),Tz("filter",e,t,n),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let r=Tz("strides",e,t,n),a=Rz(e,t,n),s=Tz("dilations",e,t,n),i=Tz("dataFormat",e,t,n).toUpperCase();return[Jw(Tz("input",e,t,n),Tz("filter",e,t,n),[r[1],r[2]],a,i,[s[1],s[2]])]}case"Conv3D":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("dataFormat",e,t,n).toUpperCase(),i=Tz("dilations",e,t,n);return[Hw(Tz("x",e,t,n),Tz("filter",e,t,n),[r[1],r[2],r[3]],a,s,[i[1],i[2],i[3]])]}case"AvgPool":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("kernelSize",e,t,n);return[vw(Tz("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("kernelSize",e,t,n);return[Qk(Tz("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("kernelSize",e,t,n),i=Tz("includeBatchInIndex",e,t,n),{result:o,indexes:l}=tS(Tz("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a,i);return[o,l]}case"AvgPool3D":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("kernelSize",e,t,n);return[Aw(Tz("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("kernelSize",e,t,n);return[eS(Tz("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{let r=Tz("strides",e,t,n),a=Tz("pad",e,t,n),s=Tz("dilations",e,t,n),i=r[1],o=r[2],l=s[1],u=s[2];return[Qw(Tz("x",e,t,n),Tz("filter",e,t,n),[i,o],a,[l,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"creation":return LA(()=>((e,t,n)=>{switch(e.op){case"Fill":{let r=Tz("shape",e,t,n),a=Tz("dtype",e,t,n);return[gk(r,Tz("value",e,t,n),a)]}case"LinSpace":return[Tk(Tz("start",e,t,n),Tz("stop",e,t,n),Tz("num",e,t,n))];case"Multinomial":{let r=Tz("logits",e,t,n),a=Tz("numSamples",e,t,n),s=Tz("seed",e,t,n);return[dS(r,a,s)]}case"OneHot":{let r=Tz("indices",e,t,n),a=Tz("depth",e,t,n),s=Tz("onValue",e,t,n),i=Tz("offValue",e,t,n);return[nA(r,a,s,i)]}case"Ones":return[sS(Tz("shape",e,t,n),Tz("dtype",e,t,n))];case"OnesLike":return[fS(Tz("x",e,t,n))];case"RandomUniform":return[SS(Tz("shape",e,t,n),Tz("minval",e,t,n),Tz("maxval",e,t,n),Tz("dtype",e,t,n))];case"Range":return[IS(Tz("start",e,t,n),Tz("stop",e,t,n),Tz("step",e,t,n),Tz("dtype",e,t,n))];case"TruncatedNormal":{let r=Tz("shape",e,t,n),a=Tz("mean",e,t,n),s=Tz("stdDev",e,t,n),i=Tz("seed",e,t,n);return[sI(r,a,s,Tz("dtype",e,t,n),i)]}case"Zeros":return[aS(Tz("shape",e,t,n),Tz("dtype",e,t,n))];case"ZerosLike":return[sk(Tz("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}=BP(e,t,n),u=await h_.nonMaxSuppressionWithScoreAsync(r,a,s,i,o,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o}=BP(e,t,n),l=Tz("padToMaxOutputSize",e,t,n),u=await h_.nonMaxSuppressionPaddedAsync(r,a,s,i,o,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o}=BP(e,t,n);return[await h_.nonMaxSuppressionAsync(r,a,s,i,o)]}case"Where":{let r=Pv(Tz("condition",e,t,n),"bool"),a=[await hI(r)];return r.dispose(),a}case"ListDiff":return async function(e,t){let n=Wx(e,"x","setdiff1d"),r=Wx(t,"y","setdiff1d");Df(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Df(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),Df(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let a=await n.data(),s=await r.data(),i=new Set(s),o=0;for(let h=0;h<a.length;h++)i.has(a[h])||o++;let l=new ux([o],n.dtype),u=new ux([o],"int32");for(let h=0,c=0;h<a.length;h++)i.has(a[h])||(l.values[c]=a[h],u.values[c]=h,c++);return[l.toTensor(),u.toTensor()]}(Tz("x",e,t,n),Tz("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return LA(()=>((e,t,n)=>{switch(e.op){case"TopKV2":{let r=Tz("x",e,t,n),a=Tz("k",e,t,n),s=Tz("sorted",e,t,n),i=aI(r,a,s);return[i.values,i.indices]}case"Unique":{let r=Tz("x",e,t,n),a=iI(r);return[a.values,a.indices]}case"UniqueV2":{let r=Tz("x",e,t,n),a=Tz("axis",e,t,n),s=iI(r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"image":return LA(()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{let r=Tz("images",e,t,n),a=Tz("size",e,t,n),s=Tz("alignCorners",e,t,n),i=Tz("halfPixelCenters",e,t,n);return[h_.resizeBilinear(r,[a[0],a[1]],s,i)]}case"ResizeNearestNeighbor":{let r=Tz("images",e,t,n),a=Tz("size",e,t,n),s=Tz("alignCorners",e,t,n),i=Tz("halfPixelCenters",e,t,n);return[h_.resizeNearestNeighbor(r,[a[0],a[1]],s,i)]}case"CropAndResize":{let r=Tz("image",e,t,n),a=Tz("boxes",e,t,n),s=Tz("boxInd",e,t,n),i=Tz("cropSize",e,t,n),o=Tz("method",e,t,n),l=Tz("extrapolationValue",e,t,n);return[h_.cropAndResize(r,a,s,i,o,l)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"graph":return LA(()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let r=Tz("default",e,t,n);return[Cz(e.name,t,n)||r];case"Placeholder":return[Cz(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[Dz(Tz("x",e,t,n))];case"IdentityN":return Tz("x",e,t,n).map(e=>Dz(e));case"Snapshot":return[Dz(Tz("x",e,t,n))];case"Shape":return[nI(Tz("x",e,t,n).shape,"int32")];case"ShapeN":return Tz("x",e,t,n).map(e=>nI(e.shape));case"Size":return[RS(Tz("x",e,t,n).size,"int32")];case"Rank":return[RS(Tz("x",e,t,n).rank,"int32")];case"NoOp":return[RS(1)];case"Print":let a=Tz("x",e,t,n),s=Tz("data",e,t,n),i=Tz("message",e,t,n),o=Tz("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,o));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"logical":return LA(()=>((e,t,n)=>{switch(e.op){case"Equal":return[rk(Tz("a",e,t,n),Tz("b",e,t,n))];case"NotEqual":return[pS(Tz("a",e,t,n),Tz("b",e,t,n))];case"Greater":return[xk(Tz("a",e,t,n),Tz("b",e,t,n))];case"GreaterEqual":return[vk(Tz("a",e,t,n),Tz("b",e,t,n))];case"Less":return[_k(Tz("a",e,t,n),Tz("b",e,t,n))];case"LessEqual":return[Ek(Tz("a",e,t,n),Tz("b",e,t,n))];case"LogicalAnd":return[Xk(Tz("a",e,t,n),Tz("b",e,t,n))];case"LogicalNot":return[Zk(Tz("a",e,t,n))];case"LogicalOr":return[Yk(Tz("a",e,t,n),Tz("b",e,t,n))];case"Select":case"SelectV2":return[ak(Tz("condition",e,t,n),Tz("a",e,t,n),Tz("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"matrices":return LA(()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[tA(Tz("a",e,t,n),Tz("b",e,t,n),Tz("transposeA",e,t,n),Tz("transposeB",e,t,n))];case"Einsum":return[lk(Tz("equation",e,t,n),...Tz("tensors",e,t,n))];case"Transpose":return[rA(Tz("x",e,t,n),Tz("perm",e,t,n))];case"_FusedMatMul":let[r,a]=Tz("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===a,o=Tz("numArgs",e,t,n),l=Tz("leakyreluAlpha",e,t,n);if(s){if(i&&2!==o)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==o)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,h]=Tz("args",e,t,n);return[bI.matMul({a:Tz("a",e,t,n),b:Tz("b",e,t,n),transposeA:Tz("transposeA",e,t,n),transposeB:Tz("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"normalization":return LA(()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Tw(Tz("x",e,t,n),Tz("mean",e,t,n),Tz("variance",e,t,n),Tz("offset",e,t,n),Tz("scale",e,t,n),Tz("epsilon",e,t,n))];case"LRN":return[Ck(Tz("x",e,t,n),Tz("radius",e,t,n),Tz("bias",e,t,n),Tz("alpha",e,t,n),Tz("beta",e,t,n))];case"Softmax":return[jS(Tz("x",e,t,n))];case"LogSoftmax":return[Lk(Tz("x",e,t,n))];case"SparseToDense":return[fI(Tz("sparseIndices",e,t,n),Tz("outputShape",e,t,n),Tz("sparseValues",e,t,n),Tz("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"reduction":return LA(()=>((e,t,n)=>{switch(e.op){case"Max":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[zk(Tz("x",e,t,n),r,a)]}case"Mean":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[rS(Tz("x",e,t,n),r,a)]}case"Min":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[iS(Tz("x",e,t,n),r,a)]}case"Sum":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[$k(Tz("x",e,t,n),r,a)]}case"All":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[YA(Tz("x",e,t,n),r,a)]}case"Any":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[JA(Tz("x",e,t,n),r,a)]}case"ArgMax":{let r=Tz("axis",e,t,n);return[QA(Tz("x",e,t,n),r)]}case"ArgMin":{let r=Tz("axis",e,t,n);return[ew(Tz("x",e,t,n),r)]}case"Prod":{let r=Tz("axis",e,t,n),a=Tz("keepDims",e,t,n);return[vS(Tz("x",e,t,n),r,a)]}case"Cumsum":{let r=Tz("axis",e,t,n),a=Tz("exclusive",e,t,n),s=Tz("reverse",e,t,n);return[Xw(Tz("x",e,t,n),r,a,s)]}case"Bincount":let r=Tz("x",e,t,n),a=Tz("weights",e,t,n),s=Tz("size",e,t,n);return[Fw(r,a,s)];case"DenseBincount":{let r=Tz("x",e,t,n),a=Tz("weights",e,t,n),s=Tz("size",e,t,n),i=Tz("binaryOutput",e,t,n);return[Zw(r,a,s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"slice_join":return LA(()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{let r=Tz("n",e,t,n),a=Tz("axis",e,t,n),s=Tz("tensors",e,t,n);return s=s.slice(0,r),[ww(s,a)]}case"Gather":{let r=Tz("x",e,t,n),a=Tz("indices",e,t,n);return[bk(r,Pv(a,"int32"),0)]}case"GatherV2":{let r=Tz("axis",e,t,n),a=Tz("batchDims",e,t,n),s=Tz("x",e,t,n),i=Tz("indices",e,t,n);return[bk(s,Pv(i,"int32"),r,a)]}case"Reverse":{let r=Tz("dims",e,t,n),a=[];for(let e=0;e<r.length;e++)r[e]&&a.push(e);let s=Tz("x",e,t,n);return[NS(s,a)]}case"ReverseV2":{let r=Tz("axis",e,t,n),a=Tz("x",e,t,n);return[NS(a,r)]}case"Slice":{let r=Tz("begin",e,t,n),a=Tz("size",e,t,n);return[Sw(Tz("x",e,t,n),r,a)]}case"StridedSlice":{let r=Tz("begin",e,t,n),a=Tz("end",e,t,n),s=Tz("strides",e,t,n),i=Tz("beginMask",e,t,n),o=Tz("endMask",e,t,n),l=Tz("ellipsisMask",e,t,n),u=Tz("newAxisMask",e,t,n),h=Tz("shrinkAxisMask",e,t,n),c=Tz("x",e,t,n);return[eI(c,r,a,s,i,o,l,u,h)]}case"Pack":return LA(()=>{let r=Tz("axis",e,t,n),a=Tz("tensors",e,t,n),s=a[0].shape,i=YS(a[0]).shape,o=a.map(e=>{let t=zb.arraysEqual(e.shape,s);if(!t&&!zb.arraysEqual(YS(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:xw(e,s)});return[JS(o,r)]});case"Unpack":{let r=Tz("axis",e,t,n),a=Tz("tensor",e,t,n);return lI(a,r)}case"Tile":{let r=Tz("reps",e,t,n);return[fk(Tz("x",e,t,n),r)]}case"Split":case"SplitV":{let r=Tz("axis",e,t,n),a=Tz("numOrSizeSplits",e,t,n),s=Tz("x",e,t,n);return qS(s,a,r)}case"ScatterNd":{let r=Tz("indices",e,t,n),a=Tz("values",e,t,n),s=Tz("shape",e,t,n);return[pI(r,a,s)]}case"GatherNd":{let r=Tz("x",e,t,n),a=Tz("indices",e,t,n);return[mI(r,a)]}case"SparseToDense":{let r=Tz("sparseIndices",e,t,n),a=Tz("outputShape",e,t,n),s=Tz("sparseValues",e,t,n),i=Tz("defaultValue",e,t,n);return[fI(r,s,a,s.dtype===i.dtype?i:Pv(i,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"sparse":return LA(()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:r,outputValues:a,emptyRowIndicator:s,reverseIndexMap:i}=d_.sparseFillEmptyRows(Tz("indices",e,t,n),Tz("values",e,t,n),Tz("denseShape",e,t,n),Tz("defaultValue",e,t,n));return[r,a,s,i]}case"SparseReshape":{let{outputIndices:r,outputShape:a}=d_.sparseReshape(Tz("inputIndices",e,t,n),Tz("inputShape",e,t,n),Tz("newShape",e,t,n));return[r,a]}case"SparseSegmentMean":return[d_.sparseSegmentMean(Tz("data",e,t,n),Tz("indices",e,t,n),Tz("segmentIds",e,t,n))];case"SparseSegmentSum":return[d_.sparseSegmentSum(Tz("data",e,t,n),Tz("indices",e,t,n),Tz("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"spectral":return LA(()=>((e,t,n)=>{switch(e.op){case"FFT":return[HS(Tz("x",e,t,n))];case"IFFT":return[US(Tz("x",e,t,n))];case"RFFT":return[KS(Tz("x",e,t,n))];case"IRFFT":return[GS(Tz("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"string":return LA(()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{let{nGrams:r,nGramsSplits:a}=p_.stringNGrams(Tz("data",e,t,n),Tz("dataSplits",e,t,n),Tz("separator",e,t,n),Tz("nGramWidths",e,t,n),Tz("leftPad",e,t,n),Tz("rightPad",e,t,n),Tz("padWidth",e,t,n),Tz("preserveShortSequences",e,t,n));return[r,a]}case"StringSplit":{let{indices:r,values:a,shape:s}=p_.stringSplit(Tz("input",e,t,n),Tz("delimiter",e,t,n),Tz("skipEmpty",e,t,n));return[r,a,s]}case"StringToHashBucketFast":return[p_.stringToHashBucketFast(Tz("input",e,t,n),Tz("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"transformation":return LA(()=>((e,t,n)=>{switch(e.op){case"Cast":return[Pv(Tz("x",e,t,n),Tz("dtype",e,t,n))];case"ExpandDims":{let r=Tz("axis",e,t,n);return[dk(Tz("x",e,t,n),r)]}case"Squeeze":{let r=Tz("axis",e,t,n);return[YS(Tz("x",e,t,n),r)]}case"Reshape":return[xw(Tz("x",e,t,n),Tz("shape",e,t,n))];case"MirrorPad":return[lS(Tz("x",e,t,n),Tz("padding",e,t,n),Tz("mode",e,t,n))];case"PadV2":case"Pad":return[mS(Tz("x",e,t,n),Tz("padding",e,t,n),Tz("constantValue",e,t,n))];case"SpaceToBatchND":{let r=Tz("blockShape",e,t,n),a=Tz("paddings",e,t,n);return[gS(Tz("x",e,t,n),r,a)]}case"BatchToSpaceND":{let r=Tz("blockShape",e,t,n),a=Tz("crops",e,t,n);return[_w(Tz("x",e,t,n),r,a)]}case"DepthToSpace":{let r=Tz("blockSize",e,t,n),a=Tz("dataFormat",e,t,n).toUpperCase();return[Yw(Tz("x",e,t,n),r,a)]}case"BroadcastTo":return[Rw(Tz("x",e,t,n),Tz("shape",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"hash_table":return WP(e,t,n,r);case"custom":let a=_z(e.op);if(a&&a.customExecutor)return a.customExecutor(new class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return Cz(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(null!=n.tensor)return Cz(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return kP(this.node.rawAttrs,e,t);if(null!=n.s)return AP(this.node.rawAttrs,e,t);if(null!=n.b)return wP(this.node.rawAttrs,e,t);if(null!=n.shape)return CP(this.node.rawAttrs,e,t);if(null!=n.type)return _P(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return NP(this.node.rawAttrs,e,t);if(null!=n.list.s)return MP(this.node.rawAttrs,e,t);if(null!=n.list.shape)return FP(this.node.rawAttrs,e,t);if(null!=n.list.b)return RP(this.node.rawAttrs,e,t);if(null!=n.list.type)return EP(this.node.rawAttrs,e,t)}return t}}(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return zb.isPromise(a)?a.then(e=>[].concat(e)):[].concat(a)}var HP=class{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function UP(e,t,n,r){let a=new Set,s=[],i=null,o=null,l=new Set,u=Object.keys(e).map(e=>Fz(e)[0]),h=[];null!=r&&(h=r.map(e=>Fz(e.name)[0]));let c=[...t];for(;c.length>0;){let e=c.pop();if((XP(e)||ZP(e)||YP(e))&&null==i&&(i=e,o=i.children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&-1===u.indexOf(e.name)&&-1===h.indexOf(e.name)){if(0===e.inputs.length){s.push(e.name);continue}e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),c.push(e))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:o}}var GP=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],qP=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],KP=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function XP(e){return GP.indexOf(e.op)>=0}function ZP(e){return qP.indexOf(e.op)>=0}function YP(e){return KP.indexOf(e.op)>=0}var JP=class{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new JP(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){let n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){let n=UP(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){let n=t.map(e=>e.name),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return function(e,t,n){let{usedNodes:r,inputs:a}=n,s=[],i=Object.keys(a).map(e=>Fz(e)[0]).map(t=>e.nodes[t]),o=e.initNodes;i.forEach(e=>{r.has(e.name)&&s.push(e)}),e.weights.forEach(e=>{r.has(e.name)&&s.push(e)}),null!=o&&o.forEach(e=>{r.has(e.name)&&s.push(e)});let l=new Set,u=[];for(;s.length>0;){let e=s.pop();l.add(e.name),t[e.name]||u.push(e),e.children.forEach(e=>{!l.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>l.has(e.name))&&s.push(e)})}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(e=>this.graph.nodes[Fz(e)[0]]),a=t.map(e=>Fz(e)[0]),s=a.map(e=>this.graph.nodes[e]);0===s.length&&(s=this._outputs);let i=this.getCompilationKey(r,s),o=this.compiledMap.get(i);null==o&&(o=this.compile(e,s),this.compiledMap.set(i,o));let l={},u={};return LA(()=>{let n=new HP(this.weightMap,l,u,this.functionExecutorMap),r={...this.weightMap};Object.keys(e).forEach(t=>{let[n,a]=Fz(t),s=[];s[a]=e[t],r[n]=s});let s=this.getFrozenTensorIds(r),i={};for(let e=0;e<o.length;e++){let t=o[e];if(!r[t.name]){let e=jP(t,r,n,this._resourceManager);if(zb.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,s,a,i)}}return null==this.parent&&n.dispose(s),t.map(e=>Cz(e,r,n))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,i){"control"===t.category||-1!==s.indexOf(e)||(n[e].forEach(e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){let t=function(e,t,n){return t[Mz(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach(e=>{if(e&&!e.kept&&!a.has(e.id)){let t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));let s=new HP(this.weightMap,r,a,this.functionExecutorMap),i=await this.executeWithControlFlow(e,s,t,n),o=t.map(e=>Cz(e,i,s)),l=o.map(e=>e.id),u=Object.keys(e).map(t=>e[t].id),h=new Set([...l,...u,...this.weightIds]);return Object.keys(i).forEach(e=>{i[e].forEach(e=>{e&&!e.kept&&!e.isDisposed&&!h.has(e.id)&&e.dispose()})}),null==this.parent&&s.dispose(h),o}async executeFunctionAsync(e,t,n){let r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),s=a.map(e=>this.graph.nodes[Fz(e)[0]]),i=n.map(e=>Fz(e)[0]),o=i.map(e=>this.graph.nodes[e]);0===o.length&&(o=this._outputs);let{usedNodes:l,missingInputs:u,dynamicNode:h,syncInputs:c}=UP(e,o,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),p={...this.weightMap};Object.keys(e).forEach(t=>{let[n,r]=Fz(t),a=[];a[r]=e[t],p[n]=a});let f={},m=this.getFrozenTensorIds(p),g={};for(;d.length>0;){let e=this.processStack(s,d,t,p,g,m,i,f,l);await Promise.all(e)}null==h&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=o.filter(e=>!XP(e)&&!Cz(e.name,p,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=h&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${c}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${a}]. Consider providing the following inputs: [${u}]. ${e}`)}return p}processStack(e,t,n,r,a,s,i,o,l){let u=[];for(;t.length>0;){let e=t.pop();n.currentContext=e.contexts;let h="";if("Enter"===e.node.op&&Tz("isConstant",e.node,r,n)&&([h]=Nz(e.node.name,n)),null==r[e.node.name]){let c=jP(e.node,r,n,this._resourceManager);h||([h]=Nz(e.node.name,n));let d=n.currentContext;zb.isPromise(c)?u.push(c.then(u=>(r[h]=u,n.currentContext=d,this.checkTensorForDisposal(h,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l),u))):(r[h]=c,this.checkTensorForDisposal(h,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return u}processChildNodes(e,t,n,r,a,s){e.children.forEach(e=>{let[i]=Nz(e.name,n);a[i]||!s.has(e.name)||("Merge"===e.op?e.inputNames.some(e=>!!Cz(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!Cz(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=Fz(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let e=a.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);zb.assert(t,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&zb.assert(n.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){let t={};for(let n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=Fz(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]?this._signature.outputs[e].name:e,{})}checkOutputs(e){e.forEach(e=>{let[t]=Fz(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}},QP=class{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=Lv.browserHTTPRequest(e,this.loadOptions);else{let t=Lv.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(Lv.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;let t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;let r=Lv.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new JP(xP.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=xP.Instance.transformGraph(e.modelInitializer);this.initializer=new JP(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){let t=Lv.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof dx||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,r)=>(t[n]=e[r],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}};async function e$(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e+="model.json?tfjs-format=file");let n=new QP(e,t);return await n.load(),n}var t$="3.7.0",n$={};I(n$,{CSVDataset:()=>X$,Dataset:()=>z$,FileDataSource:()=>oL,TextLineDataset:()=>W$,URLDataSource:()=>lL,array:()=>$$,csv:()=>uL,func:()=>hL,generator:()=>cL,microphone:()=>pL,version_data:()=>fL,webcam:()=>dL,zip:()=>L$});var r$=_(U()),a$=_(U());function s$(e,t,n=new Map,r=new Set){if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(h$(e)){let a=Array.isArray(e)?[]:{};r.add(e);for(let s in e){let i=s$(e[s],t,n,r);a[s]=i}return r.delete(e),a}throw new Error("Can't recurse into non-iterable type: "+e)}return n.set(e,a.value),a.value}function i$(e,t=l$){return o$(e,t)}function o$(e,t,n=new Set){let r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");let a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(h$(r)){let a=Array.isArray(r)?[]:{};n.add(r);for(let s in r){let r=o$(e.map(e=>e[s]),t,n);a[s]=r}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: "+r)}return a.value}function l$(e){return null===e?null:h$(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function u$(e,t){let n=new Map;s$(e,t,n);for(let r of Array.from(n.keys())){let e=n.get(r);if(zb.isPromise(e)){let t=await e;n.set(r,t)}}return s$(e,t,n)}function h$(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof dx))}function c$(e){return function(e,t){return s$(e,t)}(e,d$)}function d$(e){return e instanceof dx?{value:e.clone(),recurse:!1}:h$(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var p$=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},f$=class extends p${constructor(){super(f$.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}},m$=f$;function g$(e){return new v$(e)}function y$(e){return new A$(e)}m$.INITIAL_CAPACITY=32;var b$,x$=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new T$(this,e)}filter(e){return new _$(this,e)}map(e){return new E$(this,e)}mapAsync(e){return new C$(this,e)}serialMapAsync(e){return new C$(this,e).serial()}flatmap(e){return new M$(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new I$(this,e,t)}columnMajorBatch(e,t=!0,n=l$){return this.rowMajorBatch(e,t).map(e=>i$(e,n))}concatenate(e,t){return new F$(g$([this,e]),t)}take(e){return e<0||null==e?this:new S$(this,e)}skip(e){return e<0||null==e?this:new k$(this,e)}prefetch(e){return new D$(this,e)}shuffle(e,t){return new O$(this,e,t)}serial(){return new w$(this)}},v$=class extends x${constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:c$(e),done:!1}}},A$=class extends x${constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(Ya){throw Ya.message="Error thrown while iterating through a dataset: "+Ya.message,Ya}}},w$=class extends x${constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},k$=class extends x${constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;VA(e.value)}return this.upstream.next()}},S$=class extends x${constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},I$=class extends x${constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},_$=class extends x${constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;VA(e.value)}}},E$=class extends x${constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Map"}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=vx.getTensorsInContainer(e.value),n=this.transform(e.value),r=vx.getTensorsInContainer(n);for(let a of t)vx.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},T$=class extends x${constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(Ya){if(!this.handler(Ya))return{value:null,done:!0}}}},C$=class extends x${constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=vx.getTensorsInContainer(e.value),n=await this.transform(e.value),r=vx.getTensorsInContainer(n);for(let a of t)vx.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},N$=class extends x${constructor(){super(),this.outputQueue=new m$,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},M$=class extends N${constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=vx.getTensorsInContainer(e.value),n=this.transform(e.value),r=vx.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let a of t)vx.isTensorInList(a,r)||a.dispose();return!0}},F$=class extends x${constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}};!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(b$||(b$={}));var R$=class extends x${constructor(e,t=0){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0,r=await u$(this.iterators,function(e){return e instanceof x$?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}});if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case 0:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case 1:return{value:null,done:!0}}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},D$=class extends x${constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new p$(t)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},O$=class extends D${constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=a$.alea(n||zb.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}},z$=class{constructor(){this.size=null}batch(e,t=!0){let n,r=this;return zb.assert(e>0,()=>"batchSize needs to be positive, but it is\n      "+e),n=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),P$(async()=>(await r.iterator()).columnMajorBatch(e,t,V$),n)}concatenate(e){let t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,P$(async()=>(await n.iterator()).concatenate(await e.iterator()),t)}filter(e){let t,n=this;return t=this.size===1/0?1/0:null,P$(async()=>(await n.iterator()).filter(t=>LA(()=>e(t))),t)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return P$(async()=>(await t.iterator()).map(t=>LA(()=>e(t))),this.size)}mapAsync(e){let t=this;return P$(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return P$(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,P$(async()=>function(e,t){return new F$(e,void 0)}(y$(async()=>({value:await n.iterator(),done:!1})).take(e)),t)}skip(e){let t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,P$(async()=>(await n.iterator()).skip(e),t)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let r=this,a=r$.alea(t||zb.now().toString());return P$(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,P$(async()=>(await n.iterator()).take(e),t)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};function P$(e,t=null){return new class extends z${constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function $$(e){return P$(async()=>g$(e),e.length)}function L$(e){if(!h$(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return P$(async()=>function(e,t=b$.FAIL){return new R$(e,t)}(await u$(e,e=>{if(e instanceof z$)return{value:e.iterator(),recurse:!1};if(h$(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),b$.SHORTEST),t)}function V$(e){return null===e?null:function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof dx||zb.isTypedArray(e)}(e[0])?{value:B$(e),recurse:!1}:{value:null,recurse:!0}}function B$(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof dx?JS(e):qx(e)}z$.MAX_BUFFER_SIZE=1e4;var W$=class extends z${constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},j$='"',H$=Symbol("out"),U$=Symbol("field"),G$=Symbol("quote"),q$=Symbol("quoteafterquote"),K$=Symbol("quoteinquote"),X$=class extends z${constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new W$(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(zb.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&zb.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(zb.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(let r of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");return this.parseRow(e.value,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let s=this.fullColumnNames[a],i=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||i){let o=t[a],l=null;if(""===o)if(i&&void 0!==i.default)l=i.default;else{if(i&&(i.required||i.isLabel))throw new Error(`Required column ${s} is empty in this line: ${e}`);l=void 0}else{let e=Number(o);if(isNaN(e))l=i&&"bool"===i.dtype?this.getBoolean(o):o;else if(i&&i.dtype)switch(i.dtype){case"float32":l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(o);break;default:l=e}else l=e}i&&i.isLabel?r[s]=l:n[s]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){let n=[],r=0,a=e.length,s=H$;for(let i=0;i<a;i++)switch(s){case H$:switch(e.charAt(i)){case j$:r=i+1,s=G$;break;case this.delimiter:if(r=i+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=H$;break;default:s=U$,r=i}break;case U$:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i)),s=H$,r=i+1}break;case G$:switch(e.charAt(i)){case j$:s=q$}break;case q$:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i-1)),s=H$,r=i+1;break;case j$:s=G$;break;default:s=K$}break;case K$:switch(e.charAt(i)){case j$:s=G$}}if(n.push(s===q$?e.substring(r,a-1):e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}},Z$=class extends x${constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(wm().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");let t=new Z$(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(zb.sizeFromShape(t));return n.set(e,n.length-e.length),qx(n,t)}},Y$=class extends x${constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=nI([0],"int32"),this.webcamConfig.centerCrop){let e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2;this.cropBox=rI([r,n,t+r,n+e],[1,4])}else this.cropBox=rI([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(wm().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new Y$(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&zb.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(Ya){throw Ya.message="Error thrown while initializing video stream: "+Ya.message,Ya}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(Ya){console.log(Ya),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=sA.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(t))}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error("Error thrown cropping the video: "+t.message)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return LA(()=>{let t,n=dk(Pv(e,"float32"),0);return t=h_.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear"),xw(t,t.shape.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},J$=class{},Q$=class extends x${split(e){return new eL(this,e)}},eL=class extends Q${constructor(e,t){super(),this.upstream=e,this.impl=new tL(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},tL=class extends N${constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},nL=class extends x${decodeUTF8(){return new rL(this)}},rL=class extends Q${constructor(e){super(),this.upstream=e,this.impl=new aL(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},aL=class extends N${constructor(e){if(super(),this.upstream=e,wm().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=G();this.decoder=new e("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){let e,t,n=await this.upstream.next();return!n.done&&(e=n.value,t=wm().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(t),!0)}},sL=class extends nL{constructor(e,t={}){super(),this.file=e,this.options=t,zb.assert(e instanceof Uint8Array||!!wm().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n}),done:!1}}};function iL(e){return"string"==typeof e&&"file://"===e.substr(0,7)}var oL=class extends J${constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(iL(this.input)&&wm().get("IS_NODE")){let e=k("fs");this.input=e.readFileSync(this.input.substr(7))}return new sL(this.input,this.options)}},lL=class extends J${constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return iL(this.url)?new oL(this.url,this.fileOptions).iterator():async function(e,t={}){let n,r;"string"==typeof e?n=e:(n=e.url,r=(e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}))(e));let a=await zb.fetch(n,r);if(a.ok){let e=new Uint8Array(await a.arrayBuffer());return new sL(e,t)}throw new Error(a.statusText)}(this.url,this.fileOptions)}};function uL(e,t={}){return new X$(new lL(e),t)}function hL(e){let t=y$(e);return P$(async()=>t)}function cL(e){return P$(async()=>{let t=await e();return y$(()=>t.next())})}async function dL(e,t){return Y$.create(e,t)}async function pL(e){return Z$.create(e)}var fL="3.7.0";function mL(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&zb.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the CPU backend.")})}var gL=mE.whereImpl,yL=class extends If{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Sf(this,PA())}nextDataId(){return yL.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,wm().get("IS_NODE")&&__.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&zb.isString(n[0])){let a=n.map(e=>zb.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return __.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){let t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(e=>zb.decodeString(e))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return zv(e.shape,e.dtype,n)}makeOutput(e,t,n){let r=this.write(e,t,n);return PA().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=zb.now();return e(),{kernelMs:zb.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){mL([e],"where");let t=this.readSync(e.dataId);return gL(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}},bL=yL;bL.nextDataId=0;var xL={};function vL(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}I(xL,{addImpl:()=>DL,bincountImpl:()=>$L,bincountReduceImpl:()=>LL,ceilImpl:()=>jL,concatImpl:()=>GL,equalImpl:()=>qL,expImpl:()=>ZL,expm1Impl:()=>QL,floorImpl:()=>nV,gatherNdImpl:()=>sV,gatherV2Impl:()=>iV,greaterEqualImpl:()=>hV,greaterImpl:()=>oV,lessEqualImpl:()=>gV,lessImpl:()=>pV,linSpaceImpl:()=>xV,logImpl:()=>vV,maxImpl:()=>kV,maximumImpl:()=>SV,minimumImpl:()=>EV,multiplyImpl:()=>NV,negImpl:()=>DV,notEqualImpl:()=>zV,prodImpl:()=>WV,rangeImpl:()=>HV,rsqrtImpl:()=>UV,simpleAbsImpl:()=>vL,sliceImpl:()=>KV,sparseFillEmptyRowsImpl:()=>YV,sparseReshapeImpl:()=>JV,sparseSegmentReductionImpl:()=>QV,squaredDifferenceImpl:()=>eB,stridedSliceImpl:()=>rB,stringNGramsImpl:()=>aB,stringSplitImpl:()=>iB,stringToHashBucketFastImpl:()=>oB,subImpl:()=>lB,tileImpl:()=>dB,topKImpl:()=>pB,transposeImpl:()=>LV,uniqueImpl:()=>fB});var AL={kernelName:Em,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend;mL(t,"abs");let r=new Float32Array(zb.sizeFromShape(t.shape));return r=vL(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};function wL(e){return(t,n,r,a,s)=>{let i=__.assertAndGetBroadcastShape(t,n),o=i.length,l=zb.computeStrides(i),u=zb.sizeFromShape(i),h=zb.getTypedArrayFromDType(s,u),c=t.length,d=n.length,p=zb.computeStrides(t),f=zb.computeStrides(n),m=__.getBroadcastDims(t,i),g=__.getBroadcastDims(n,i);if(m.length+g.length===0)for(let y=0;y<h.length;++y)h[y]=e(r[y%r.length],a[y%a.length]);else for(let y=0;y<h.length;++y){let t=zb.indexToLoc(y,o,l),n=t.slice(-c);m.forEach(e=>n[e]=0);let s=zb.locToIndex(n,c,p),i=t.slice(-d);g.forEach(e=>i[e]=0);let u=zb.locToIndex(i,d,f);h[y]=e(r[s],a[u])}return[h,i]}}function kL(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",i)},o}var SL={kernelName:Ym,backendName:"cpu",kernelFunc:kL};function IL(e,t,n="float32"){if("complex64"===n)return kL({inputs:{real:IL(e,t,"float32"),imag:IL(e,t,"float32")},backend:e});let r=zb.makeZerosTypedArray(zb.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function _L(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var EL={kernelName:$g,backendName:"cpu",kernelFunc:_L};function TL(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}var CL={kernelName:Ty,backendName:"cpu",kernelFunc:TL};function NL(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===a.dtype)return _L({inputs:{x:a},backend:n});let e=IL(n,a.shape,a.dtype),t=NL({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=kL({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){let e=TL({inputs:{input:a},backend:n}),t=NL({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!zb.hasEncodingLoss(a.dtype,s)){let e=_L({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s){let e=n.data.get(a.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(a.shape,"int32",t)}if("bool"===s){let e=n.data.get(a.dataId).values,t=zb.toTypedArray([0],a.dtype),[r,s]=wL((e,t)=>e!==t?1:0)(a.shape,[],e,t,"bool");return n.makeTensorInfo(s,"bool",r)}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}var ML={kernelName:Km,backendName:"cpu",kernelFunc:NL};function FL(e,t,n,r){return null==n?({inputs:n,backend:a})=>{let{a:s,b:i}=n,o=a;mL([s,i],e);let l=o.data.get(s.dataId).values,u=o.data.get(i.dataId).values,h="string"===s.dtype?__.fromUint8ToStringArray(l):l,c="string"===s.dtype?__.fromUint8ToStringArray(u):u,d=r||s.dtype,[p,f]=t(s.shape,i.shape,h,c,d);return o.makeTensorInfo(f,d,p)}:({inputs:e,backend:a})=>{let{a:s,b:i}=e,o=a;if("complex64"===s.dtype||"complex64"===i.dtype){let e=NL({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),t=o.data.get(e.dataId),r=t.complexTensorInfos.imag,a=o.data.get(t.complexTensorInfos.real.dataId).values,l=o.data.get(r.dataId).values,u=NL({inputs:{x:i},backend:o,attrs:{dtype:"complex64"}}),h=o.data.get(u.dataId),c=h.complexTensorInfos.imag,d=o.data.get(h.complexTensorInfos.real.dataId).values,p=o.data.get(c.dataId).values,[f,m,g]=n(s.shape,i.shape,a,l,d,p),y=o.makeTensorInfo(g,"float32",f),b=o.makeTensorInfo(g,"float32",m),x=kL({inputs:{real:y,imag:b},backend:o});return o.disposeIntermediateTensorInfo(e),o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(b),x}{let e=o.data.get(s.dataId).values,n=o.data.get(i.dataId).values,a=r||s.dtype,[l,u]=t(s.shape,i.shape,e,n,a);return o.makeTensorInfo(u,a,l)}}}function RL(e){return(t,n,r,a,s,i)=>{let o=__.assertAndGetBroadcastShape(t,n),l=zb.sizeFromShape(o),u=o.length,h=zb.computeStrides(o),c=zb.getTypedArrayFromDType("float32",l),d=zb.getTypedArrayFromDType("float32",l),p=__.getBroadcastDims(t,o),f=__.getBroadcastDims(n,o),m=__.mergeRealAndImagArrays(r,a),g=__.mergeRealAndImagArrays(s,i),y=t.length,b=zb.computeStrides(t),x=n.length,v=zb.computeStrides(n);if(p.length+f.length===0)for(let A=0;A<c.length;A++){let t=A%m.length,n=A%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);c[A]=r.real,d[A]=r.imag}else for(let A=0;A<c.length;A++){let t=zb.indexToLoc(A,u,h),n=t.slice(-y);p.forEach(e=>n[e]=0);let r=zb.locToIndex(n,y,b),a=t.slice(-x);f.forEach(e=>a[e]=0);let s=zb.locToIndex(a,x,v),i=e(m[2*r],m[2*r+1],g[2*s],g[2*s+1]);c[A]=i.real,d[A]=i.imag}return[c,d,o]}}var DL=wL((e,t)=>e+t),OL=RL((e,t,n,r)=>({real:e+n,imag:t+r})),zL=FL(Nm,DL,OL),PL={kernelName:Nm,backendName:"cpu",kernelFunc:zL};function $L(e,t,n,r,a){let s=zb.sizeFromShape(r),i=zb.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){let n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(i[n]+=s>0?t[o]:1)}return i}function LL(e,t,n,r=!1){let a=e.shape[0],s=e.shape[1],i=zv([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<s;a++){let s=e.get(o,a);if(s<0)throw new Error("Input x must be non-negative!");s>=n||i.set(r?1:t.size>0?i.get(o,s)+t.get(o,a):i.get(o,s)+1,o,s)}return i}function VL(e){return(t,n,r)=>{let a=zb.getTypedArrayFromDType(n,t.length);for(let s=0;s<t.length;++s)a[s]=e(t[s],r);return a}}function BL(e,t,n){return({inputs:r,attrs:a,backend:s})=>{let{x:i}=r;if(mL(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");let o=s,l=o.data.get(i.dataId).values,u=zb.sizeFromShape(i.shape),h=n||i.dtype,c=zb.getArrayFromDType(h,u);for(let e=0;e<u;++e)c[e]=t(l[e],a);return o.makeTensorInfo(i.shape,h,c)}}function WL(e,t,n){return({inputs:r,attrs:a,backend:s})=>{let{x:i}=r;if(mL(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");let o=s,l=o.data.get(i.dataId).values,u=n||i.dtype,h=t(l,u,a);return o.makeTensorInfo(i.shape,u,h)}}var jL=VL(e=>Math.ceil(e)),HL=WL(Xm,jL),UL={kernelName:Xm,backendName:"cpu",kernelFunc:HL};function GL(e,t,n,r){let a=zb.getArrayFromDType(n,zb.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{let n=zb.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{let s="string"===n?__.fromUint8ToStringArray(e.vals):e.vals,i=0;for(let n=0;n<e.shape[0];++n){let o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=s[i++]}r+=e.shape[1]})}return a}var qL=wL((e,t)=>e===t?1:0),KL=FL(Sg,qL,null,"bool"),XL={kernelName:Sg,backendName:"cpu",kernelFunc:KL},ZL=VL(e=>Math.exp(e)),YL=WL(Ig,ZL),JL={kernelName:Ig,backendName:"cpu",kernelFunc:YL},QL=VL(e=>Math.expm1(e)),eV=WL(Eg,QL),tV={kernelName:Eg,backendName:"cpu",kernelFunc:eV},nV=VL(e=>Math.floor(e)),rV=WL(Mg,nV),aV={kernelName:Mg,backendName:"cpu",kernelFunc:rV};function sV(e,t,n,r,a,s,i,o,l){let u=zv([r,s],n);for(let h=0;h<r;h++){let n=[],r=0;for(let t=0;t<a;t++){let s=e[h*a+t];r+=s*i[t],n.push(s)}if(r<0||r>=l/s)throw new Error(`Invalid indices: ${n} does not index into ${o}`);for(let e=0;e<s;e++)u.values[h*s+e]=t.get(...t.indexToLoc(r*s+e))}return u}function iV(e,t,n){let r=zv(n,e.dtype);for(let a=0;a<r.size;++a){let n=r.indexToLoc(a).slice(),s=t.locToIndex([n[0],n[2]]);n[2]=t.values[s];let i=e.locToIndex(n);r.values[a]=e.values[i]}return r}var oV=wL((e,t)=>e>t?1:0),lV=FL(zg,oV,null,"bool"),uV={kernelName:zg,backendName:"cpu",kernelFunc:lV},hV=wL((e,t)=>e>=t?1:0),cV=FL(Pg,hV,null,"bool"),dV={kernelName:Pg,backendName:"cpu",kernelFunc:cV},pV=wL((e,t)=>e<t?1:0),fV=FL(Ug,pV,null,"bool"),mV={kernelName:Ug,backendName:"cpu",kernelFunc:fV},gV=wL((e,t)=>e<=t?1:0),yV=FL(Gg,gV,null,"bool"),bV={kernelName:Gg,backendName:"cpu",kernelFunc:yV};function xV(e,t,n){let r=(t-e)/(n-1),a=zb.makeZerosTypedArray(n,"float32");a[0]=e;for(let s=1;s<a.length;s++)a[s]=a[s-1]+r;return a}var vV=VL(e=>Math.log(e)),AV=WL(Kg,vV),wV={kernelName:Kg,backendName:"cpu",kernelFunc:AV};function kV(e,t,n,r){let a=zb.getTypedArrayFromDType(r,zb.sizeFromShape(n));for(let s=0;s<a.length;++s){let n=s*t,r=e[n];for(let a=0;a<t;++a){let t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[s]=r}return a}var SV=wL((e,t)=>Math.max(e,t)),IV=FL(ny,SV),_V={kernelName:ny,backendName:"cpu",kernelFunc:IV},EV=wL((e,t)=>Math.min(e,t)),TV=FL(hy,EV),CV={kernelName:hy,backendName:"cpu",kernelFunc:TV},NV=wL((e,t)=>e*t),MV=RL((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),FV=FL(fy,NV,MV),RV={kernelName:fy,backendName:"cpu",kernelFunc:FV};function DV(e,t,n){let r=zb.createScalarValue(-1,n);return NV([],t,r,e,n)}var OV={kernelName:my,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t;mL(r,"neg");let a=n.data.get(r.dataId).values,[s,i]=DV(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}},zV=wL((e,t)=>e!==t?1:0),PV=FL(gy,zV,null,"bool"),$V={kernelName:gy,backendName:"cpu",kernelFunc:PV};function LV(e,t,n,r,a){let s=t.length,i=zb.sizeFromShape(t),o=zb.computeStrides(t),l=zb.computeStrides(a),u=zb.getTypedArrayFromDType(n,zb.sizeFromShape(a));for(let h=0;h<i;++h){let t=zb.indexToLoc(h,s,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[zb.locToIndex(n,s,l)]=e[h]}return u}function VV(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:s}=n;mL(a,"transpose");let i=new Array(a.shape.length);for(let l=0;l<i.length;l++)i[l]=a.shape[s[l]];let o=LV(r.data.get(a.dataId).values,a.shape,a.dtype,s,i);return{dataId:r.write(o,i,a.dtype),shape:i,dtype:a.dtype}}var BV={kernelName:yb,backendName:"cpu",kernelFunc:VV};function WV(e,t,n,r){let[a,s]=__.computeOutAndReduceShapes(e,r),i=wx(t,"int32"),o=zb.makeZerosTypedArray(zb.sizeFromShape(a),i),l=zb.sizeFromShape(s);for(let u=0;u<o.length;++u){let e=u*l,t=1;for(let r=0;r<l;++r)t*=n[e+r];o[u]=t}return{outVals:o,outShape:a,outDtype:i}}var jV={kernelName:_y,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;mL(a,"prod");let o=a.shape.length,l=zb.parseAxisParam(s,a.shape),u=__.getAxesPermutation(l,o),h=l,c=a,d=[];null!=u&&(c=VV({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(c),h=__.getInnerMostAxes(h.length,o));let p=n.data.get(c.dataId).values,{outVals:f,outShape:m,outDtype:g}=WV(c.shape,c.dtype,p,h),y=m;return i&&(y=__.expandShapeToKeepDim(m,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,f)}};function HV(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return zb.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-e)/n)),s=zb.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),s[0]=e;for(let i=1;i<s.length;i++)s[i]=s[i-1]+n;return s}var UV=VL(e=>1/Math.sqrt(e)),GV=WL(Ly,UV),qV={kernelName:Ly,backendName:"cpu",kernelFunc:GV};function KV(e,t,n,r,a){let s=gA.isSliceContinous(r,t,n),i=zb.sizeFromShape(n),o=zb.computeStrides(r);if(s){let n=gA.computeFlatOffset(t,o);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}let l=zv(r,a,"string"===a?__.fromUint8ToStringArray(e):e),u=zv(n,a);for(let h=0;h<u.size;++h){let e=u.indexToLoc(h),n=e.map((e,n)=>e+t[n]);u.set(l.get(...n),...e)}return"string"===a?__.fromStringArrayToUint8(u.values):u.values}function XV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r;mL(a,"slice");let[o,l]=gA.parseSliceParams(a,s,i);gA.assertParamsValid(a,o,l);let u=KV(n.data.get(a.dataId).values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,u)}var ZV={kernelName:jy,backendName:"cpu",kernelFunc:XV};function YV(e,t,n,r,a,s,i){let o=t[0],l=s[0],u=new Array(l),h=new Array(o),c=t[1];if(0===l){if(0!==o)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = "+o);return[zb.getArrayFromDType(n,0),[0,c],zb.getArrayFromDType(a,0),u,h]}let d=!0,p=0,f=new Array(l).fill(0);for(let g=0;g<o;++g){let t=e[g*c];if(t<0)throw new Error(`indices(${g}, 0) is invalid: ${t} < 0`);if(t>=l)throw new Error(`indices(${g}, 0) is invalid: ${t} >= ${l}`);++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){let e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){let t=e,n=r;for(let e=0;e<o;++e)h[e]=e;return[t,[o,c],n,u,h]}{let t=f[l-1],s=zb.getArrayFromDType(n,t*c),d=zb.getArrayFromDType(a,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){let t=e[n*c],a=(0===t?0:f[t-1])+p[t];p[t]++;for(let r=0;r<c;++r)s[a*c+r]=e[n*c+r];d[a]=r[n],h[n]=a}for(let e=0;e<l;++e)if(0===p[e]){let t=0===e?0:f[e-1];s[t*c+0]=e;for(let e=1;e<c;++e)s[t*c+e]=0;d[t]=i}return[s,[t,c],d,u,h]}}function JV(e,t,n,r,a){let s=zb.sizeFromShape(r),i=t[0],o=a.length,l=[],u=1,h=-1;for(let g=0;g<o;++g){let e=a[g];if(-1===e){if(-1!==h)throw new Error(`only one output dimension may be -1, not both ${h} and ${g}`);h=g,l.push(1)}else{if(e<0)throw new Error(`size ${g} must be non-negative, not ${e}`);u*=e,l.push(e)}}if(-1!==h){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");let e=Math.trunc(s/u);if(u*e!==s)throw new Error(`Input to reshape is a SparseTensor with ${s}\n          dense values, but the requested shape requires a multiple of ${u}. inputShape=${r} outputShape= ${l}`);l[h]=e}let c=zb.sizeFromShape(l);if(c!==s)throw new Error(`Input to reshape is a tensor with ${s} dense values, but the requested shape has ${c}. inputShape=${r} outputShape=${l}`);let d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}let f=[];if(o>0){f[o-1]=1;for(let e=o-2;e>=0;--e)f[e]=f[e+1]*l[e+1]}let m=zb.getArrayFromDType(n,i*o);for(let g=0;g<i;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*p[n];for(let e=0;e<o;++e)m[g*o+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[i,o],l]}function QV(e,t,n,r,a,s=!1,i=0){let o=r.length;if(o!==a.length)throw new Error("segmentIds and indices should have same size.");let l=[t[0],e.length/t[0]],u=l[1],h=o>0?a[o-1]+1:0;if(h<0)throw new Error("segment ids must be >= 0");let c=t.slice();c[0]=h;let d=c.reduce((e,t)=>e*t,1),p=zb.getArrayFromDType(n,d);if(0===o)return h>0&&p.fill(i),[p,c];if(h<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=a[f];for(;;){let t=0;if(m<o){if(t=a[m],y===t){++m;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error(`Segment id ${y} out of range [0, ${h}), possibly because segmentIds input is not sorted.`);y>g&&p.fill(i,g*u,y*u);for(let n=f;n<m;++n){let t=r[n];if(t<0||t>=l[0])throw new Error(`Bad: indices[${n}] == ${r[n]} out of range [0, ${l[0]})`);for(let n=0;n<u;n++)p[y*u+n]+=e[t*u+n]}if(s)for(let e=0;e<u;e++)p[y*u+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>o)break}return g<h&&p.fill(i,g*u,h*u),[p,c]}var eB=wL((e,t)=>{let n=e-t;return n*n}),tB=FL(sb,eB),nB={kernelName:sb,backendName:"cpu",kernelFunc:tB};function rB(e,t,n,r){let a=zv(e,t.dtype);for(let s=0;s<a.size;s++){let e=a.indexToLoc(s),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];a.set(t.get(...i),...e)}return a}function aB(e,t,n,r,a,s,i,o){return new class{constructor(e,t,n,r,a,s){this.separator=zb.encodeString(e),this.nGramWidths=t,this.leftPad=zb.encodeString(n),this.rightPad=zb.encodeString(r),this.padWidth=a,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let i=0;i<a;++i){let o=this.getPadWidth(s),l=Math.max(0,o-i),u=Math.max(0,o-(a-(i+1))),h=s-(l+u),c=t+(l>0?0:i-o),d=0;d+=l*this.leftPad.length;for(let t=0;t<h;++t)d+=e[c+t].length;d+=u*this.rightPad.length,d+=(l+u+h-1)*this.separator.length,n[r+i]=new Uint8Array(d);let p=n[r+i],f=0,m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<h-1;++t)m(e[c+t]),m(this.separator);if(h>0){m(e[c+h-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got "+e);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}let a=r-1,s=zb.getArrayFromDType("int32",r);if(0===n||0===r){let e=new Array(n);for(let t=0;t<=a;++t)s[t]=0;return[e,s]}s[0]=0;for(let o=1;o<=a;++o){let e=t[o]-t[o-1],n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),s[o]=s[o-1]+n}let i=new Array(s[a]);for(let o=0;o<a;++o){let n=t[o],r=s[o];if(this.nGramWidths.forEach(a=>{let s=this.getNumNGrams(t[o+1]-t[o],a);this.createNGrams(e,n,i,r,s,a),r+=s}),this.preserveShort&&r===s[o]){let a=t[o+1]-t[o];if(0===a)continue;this.createNGrams(e,n,i,r,1,a+2*this.padWidth)}}return[i,s]}}(n,r,a,s,i,o).compute(e,t)}function sB(e,t,n){if(!e.length)return[];if(0===t.length){let t=new Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.subarray(n,n+1);return t}if(1===t.length){let r=t[0],a=[],s=e.indexOf(r);for(;-1!==s;){let t=e.subarray(0,s);(!n||0!==t.length)&&a.push(t),s=(e=e.subarray(s+1)).indexOf(r)}return(!n||0!==e.length)&&a.push(e),a}let r=[],a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){let t=e.subarray(a,s);(!n||0!==t.length)&&r.push(t),a=s+1}return r}function iB(e,t,n){let r=e.length,a=[],s=0,i=0,o=new Array(r);for(let d=0;d<r;++d){let r=sB(e[d],t,n),l=r.length;o[d]=l,s+=l,i=Math.max(i,l),a.push(...r)}let l=zb.getArrayFromDType("int32",2*s),u=new Array(s),h=[r,i],c=0;for(let d=0;d<r;++d)for(let e=0;e<o[d];++e)l[2*c]=d,l[2*c+1]=e,u[c]=a[c],++c;return[l,u,h]}function oB(e,t){let n=zb.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=zb.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var lB=wL((e,t)=>e-t),uB=RL((e,t,n,r)=>({real:e-n,imag:t-r})),hB=FL(cb,lB,uB),cB={kernelName:cb,backendName:"cpu",kernelFunc:hB};function dB(e,t){let n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];let r=zv(n,e.dtype);for(let a=0;a<r.values.length;++a){let t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];let s=e.locToIndex(n);r.values[a]=e.values[s]}return r}function pB(e,t,n,r,a){let s=t[t.length-1],[i,o]=[e.length/s,s],l=zb.getTypedArrayFromDType(n,i*r),u=zb.getTypedArrayFromDType("int32",i*r);for(let c=0;c<i;c++){let t=c*o,n=e.subarray(t,t+o),a=[];for(let e=0;e<n.length;e++)a.push({value:n[e],index:e});a.sort((e,t)=>t.value-e.value);let s=c*r,i=l.subarray(s,s+r),h=u.subarray(s,s+r);for(let e=0;e<r;e++)i[e]=a[e].value,h[e]=a[e].index}let h=t.slice();return h[h.length-1]=r,[zv(h,n,l),zv(h,"int32",u)]}function fB(e,t,n,r){let a=zb.parseAxisParam(t,n)[0],s=[1,n[0],1];for(let f=0;f<a;f++)s[0]*=n[f];s[1]=n[a];for(let f=a+1;f<n.length;f++)s[2]*=n[f];let i={},o=new Int32Array(n[a]),l=new ux(s,r,e),u=[],h=1===s[0]&&1===s[2];for(let f=0;f<n[a];f++){let t;if(h)t=e[f].toString();else{let e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(l.get(t,f,n));t=e.join(",")}if(void 0!==i[t])o[f]=i[t];else{let e=Object.keys(i).length;i[t]=e,o[f]=e,u.push(f)}}let c=s.slice();c[1]=Object.keys(i).length;let d=new ux(c,r);u.forEach((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)d.set(l.get(n,e,r),n,t,r)});let p=n.slice();return p[a]=c[1],{outputValues:d.values,outputShape:p,indices:o}}var mB="3.7.0";WA("cpu",()=>new bL,1);var gB=BL(Ag,e=>e>=0?e:Math.exp(e)-1),yB={kernelName:Ag,backendName:"cpu",kernelFunc:gB};function bB(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r;mL([a],"leakyRelu");let i=zb.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,l=zb.getTypedArrayFromDType("float32",i);for(let u=0;u<o.length;u++)l[u]=o[u]<0?s*o[u]:o[u];return n.makeTensorInfo(a.shape,"float32",l)}var xB={kernelName:Hg,backendName:"cpu",kernelFunc:bB},vB=wL((e,t)=>e<0?t*e:e);function AB(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;mL([r,a],"prelu");let s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[o,l]=vB(r.shape,a.shape,s,i,r.dtype);return n.makeTensorInfo(l,r.dtype,o)}var wB={kernelName:Iy,backendName:"cpu",kernelFunc:AB},kB=BL(Ny,e=>Math.max(0,e)),SB={kernelName:Ny,backendName:"cpu",kernelFunc:kB},IB=BL(zy,e=>Math.min(Math.max(0,e),6)),_B={kernelName:zy,backendName:"cpu",kernelFunc:IB},EB=BL(qy,e=>1/(1+Math.exp(-e))),TB={kernelName:qy,backendName:"cpu",kernelFunc:EB};function CB(e,t,n,r,a){if("linear"===n)return _L({inputs:{x:t},backend:e});if("relu"===n)return kB({inputs:{x:t},backend:e});if("elu"===n)return gB({inputs:{x:t},backend:e});if("relu6"===n)return IB({inputs:{x:t},backend:e});if("prelu"===n)return AB({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return bB({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return EB({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function NB(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=zb.sizeFromShape(a.shape),o=zb.inferFromImplicitShape(s,i),l=zb.sizeFromShape(o);zb.assert(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);let u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){let e=u.complexTensorInfos.imag;u.complexTensorInfos.real.shape=o,e.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}var MB={kernelName:My,backendName:"cpu",kernelFunc:NB};function FB(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;mL([a,s],"matMul");let l=a.shape.length,u=s.shape.length,h=i?a.shape[l-2]:a.shape[l-1],c=o?s.shape[u-1]:s.shape[u-2],d=i?a.shape[l-1]:a.shape[l-2],p=o?s.shape[u-2]:s.shape[u-1],f=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=zb.sizeFromShape(f),y=zb.sizeFromShape(m);zb.assert(l>=2&&u>=2&&(g===y||1===g||1===y),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${f}) and (${m}).`);let b=(g>y?a.shape.slice(0,-2):s.shape.slice(0,-2)).concat([d,p]);zb.assert(h===c,()=>`Error in matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);let x=o?[y,p,c]:[y,c,p],v=NB({inputs:{x:a},backend:n,attrs:{shape:i?[g,h,d]:[g,d,h]}}),A=NB({inputs:{x:s},backend:n,attrs:{shape:x}}),w=i?v.shape[1]:v.shape[2],k=i?v.shape[2]:v.shape[1],S=o?A.shape[1]:A.shape[2],I=Math.max(g,y),_=n.data.get(v.dataId).values,E=n.data.get(A.dataId).values,T=zb.computeStrides(v.shape),C=zb.computeStrides(A.shape),[N,M,F]=i?[T[0],1,T[1]]:[T[0],T[1],1],[R,D,O]=o?[1,C[1],C[0]]:[C[1],1,C[0]],z=k*S,P=zv([I,k,S],v.dtype),$=P.values,L=n.blockSize;for(let V=0;V<I;V++)for(let e=0;e<k;e+=L)for(let t=0;t<S;t+=L)for(let n=0;n<w;n+=L){let r=Math.min(e+L,k),a=Math.min(t+L,S),s=Math.min(n+L,w);for(let i=e;i<r;i++)for(let e=t;e<a;e++){let t=0;for(let r=n;r<s;r++){let n=Math.min(V,g-1)*N,a=Math.min(V,y-1)*O;t+=_[n+i*M+r*F]*E[r*R+e*D+a]}$[V*z+(i*S+e)]+=t}}return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(b,P.dtype,P.values)}var RB={kernelName:Um,backendName:"cpu",kernelFunc:FB},DB={kernelName:Ib,backendName:"cpu",kernelFunc:function(e){let t,n,r,{inputs:a,backend:s,attrs:i}=e,{a:o,b:l,bias:u,preluActivationWeights:h}=a,{transposeA:c,transposeB:d,activation:p,leakyreluAlpha:f}=i,m=[];t=FB({inputs:{a:o,b:l},attrs:{transposeA:c,transposeB:d},backend:s}),u&&(n=zL({inputs:{a:t,b:u},backend:s}),m.push(t),t=n),p&&(r=CB(s,t,p,h,f),m.push(t),t=r);for(let g of m)s.disposeIntermediateTensorInfo(g);return t}},OB=BL(Tm,e=>Math.acos(e)),zB={kernelName:Tm,backendName:"cpu",kernelFunc:OB},PB=BL(Cm,e=>Math.acosh(e)),$B={kernelName:Cm,backendName:"cpu",kernelFunc:PB},LB={kernelName:Mm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,r=t;mL(t,"addN");let a=r.map(e=>n.data.get(e.dataId).values),s=zv(r[0].shape,r[0].dtype),i=s.values;for(let o=0;o<r.length;o++){let e=a[o];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}},VB={kernelName:Fm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;mL(a,"all");let o=zb.parseAxisParam(s,a.shape),l=o,u=__.getAxesPermutation(l,a.shape.length),h=a;null!=u&&(h=VV({inputs:{x:a},backend:n,attrs:{perm:u}}),l=__.getInnerMostAxes(l.length,a.shape.length)),__.assertAxesAreInnerMostDims("all",l,h.shape.length);let[c,d]=__.computeOutAndReduceShapes(h.shape,l),p=zb.sizeFromShape(d),f=zb.makeZerosTypedArray(zb.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){let e=y*p,t=m[e];for(let n=0;n<p;++n){let r=m[e+n];t=t&&r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);let g=n.makeTensorInfo(c,h.dtype,f);if(i){let e=NB({inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},BB={kernelName:Rm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;mL(a,"any");let o=zb.parseAxisParam(s,a.shape),l=o,u=__.getAxesPermutation(l,a.shape.length),h=a;null!=u&&(h=VV({inputs:{x:a},backend:n,attrs:{perm:u}}),l=__.getInnerMostAxes(l.length,a.shape.length)),__.assertAxesAreInnerMostDims("any",l,h.shape.length);let[c,d]=__.computeOutAndReduceShapes(h.shape,l),p=zb.sizeFromShape(d),f=zb.makeZerosTypedArray(zb.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){let e=y*p,t=m[e];for(let n=0;n<p;++n){let r=m[e+n];t=t||r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);let g=n.makeTensorInfo(c,h.dtype,f);if(i){let e=NB({inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},WB={kernelName:Dm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;mL(a,"argMax");let i=zb.parseAxisParam(s,a.shape),o=__.getAxesPermutation(i,a.shape.length),l=a,u=[];null!=o&&(l=VV({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=__.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],__.assertAxesAreInnerMostDims("argMax",i,l.shape.length);let[h,c]=__.computeOutAndReduceShapes(l.shape,i),d=zb.sizeFromShape(h),p=zb.makeZerosTypedArray(d,"int32"),f=zb.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let e=g*f,t=m[e],n=0;for(let r=0;r<f;++r){let a=m[e+r];a>t&&(t=a,n=r)}p[g]=n}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",p)}},jB={kernelName:Om,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;mL(a,"argMin");let i=zb.parseAxisParam(s,a.shape),o=__.getAxesPermutation(i,a.shape.length),l=a,u=[];null!=o&&(l=VV({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=__.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],__.assertAxesAreInnerMostDims("argMin",i,l.shape.length);let[h,c]=__.computeOutAndReduceShapes(l.shape,i),d=zb.sizeFromShape(h),p=zb.makeZerosTypedArray(d,"int32"),f=zb.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let e=g*f,t=m[e],n=0;for(let r=0;r<f;++r){let a=m[e+r];a<t&&(t=a,n=r)}p[g]=n}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",p)}},HB=BL(zm,e=>Math.asin(e)),UB={kernelName:zm,backendName:"cpu",kernelFunc:HB},GB=BL(Pm,e=>Math.asinh(e)),qB={kernelName:Pm,backendName:"cpu",kernelFunc:GB},KB=BL($m,e=>Math.atan(e)),XB={kernelName:$m,backendName:"cpu",kernelFunc:KB},ZB=wL((e,t)=>Math.atan2(e,t)),YB=FL(Vm,ZB),JB={kernelName:Vm,backendName:"cpu",kernelFunc:YB},QB=BL(Lm,e=>Math.atanh(e)),eW={kernelName:Lm,backendName:"cpu",kernelFunc:QB};function tW(e,t,n,r,a,s){let i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=zv(a.outShape,n),g=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],b=a.outShape[2]*a.outShape[3],x=a.outShape[3];for(let v=0;v<a.batchSize;++v){let t=v*y,n=v*r[0];for(let m=0;m<a.inChannels;++m)for(let y=0;y<a.outHeight;++y){let v=y*i-d,A=Math.max(0,v),w=Math.min(a.inHeight,h+v),k=t+y*b;for(let t=0;t<a.outWidth;++t){let i=t*o-p,h=Math.max(0,i),d=Math.min(a.inWidth,c+i),y=f,b=0,v=0;for(let t=A;t<w;t+=l){let a=n+t*r[1];for(let t=h;t<d;t+=u){let n=e[a+t*r[2]+m];"max"===s&&n>y?y=n:"avg"===s&&(b+=n,v++)}if(isNaN(y))break}g[k+t*x+m]="avg"===s?b/v:y}}}return m}function nW(e,t,n,r,a=!1,s=!1){let i=zv(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,h=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=zv(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){let n=t*o-p,y=n;for(;y<0;)y+=u;let b=Math.min(r.inHeight,c+n);for(let o=0;o<r.outWidth;++o){let c=o*l-f,p=c;for(;p<0;)p+=h;let x=Math.min(r.inWidth,d+c),v=Number.NEGATIVE_INFINITY,A=-1;for(let t=y;t<b;t+=u){let i=t-n;for(let n=p;n<x;n+=h){let o=n-c,l=m.get(g,t,n,e);l>v&&(v=l,A=a?s?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*d+o)}}i.set(A,g,t,o,e)}}return i}function rW(e,t,n,r,a,s){let i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,h=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,y=a.padInfo.left,b="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=zv(a.outShape,n),v=x.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],S=a.outShape[4];for(let I=0;I<a.batchSize;++I){let t=I*A,n=I*r[0];for(let x=0;x<a.inChannels;++x)for(let A=0;A<a.outDepth;++A){let I=A*i-m,_=I;for(;_<0;)_+=u;let E=Math.min(a.inDepth,d+I),T=t+A*w;for(let t=0;t<a.outHeight;++t){let i=t*o-g,d=i;for(;d<0;)d+=h;let m=Math.min(a.inHeight,p+i),A=T+t*k;for(let t=0;t<a.outWidth;++t){let i=t*l-y,o=i;for(;o<0;)o+=c;let p=Math.min(a.inWidth,f+i),g=A+t*S,w=b,k=0,I=0;for(let t=_;t<E;t+=u){let a=n+t*r[1];for(let t=d;t<m;t+=h){let n=a+t*r[2];for(let t=o;t<p;t+=c){let a=e[n+t*r[3]+x];if("max"===s&&a>w?w=a:"avg"===s&&(k+=a,I++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}v[g+x]="avg"===s?k/I:w}}}}return x}var aW={kernelName:Bm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;mL(a,"avgPool");let{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;zb.assert(__.eitherStridesOrDilationsAreOne(i,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);let u,h=__.computePool2DInfo(a.shape,s,i,1,o,l);if(1===h.filterWidth&&1===h.filterHeight&&zb.arraysEqual(h.inShape,h.outShape))u=_L({inputs:{x:a},backend:n});else{let e=n.data.get(a.dataId).values,t=zb.computeStrides(a.shape),r=tW(e,0,a.dtype,t,h,"avg");u=n.makeTensorInfo(h.outShape,a.dtype,r.values)}return u}},sW={kernelName:jm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;mL(a,"avgPool3d");let h=__.computePool3DInfo(a.shape,s,i,1,o,l,u),c=rW(n.data.get(a.dataId).values,0,a.dtype,zb.computeStrides(a.shape),h,"avg");return n.makeTensorInfo(c.shape,"float32",c.values)}},iW={kernelName:Hm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;mL([a,s],"avgPool3DGrad");let h=__.computePool3DInfo(s.shape,i,o,1,l,u),c=h.strideDepth,d=h.strideHeight,p=h.strideWidth,f=h.filterDepth,m=h.filterHeight,g=h.filterWidth,y=h.dilationDepth,b=h.dilationHeight,x=h.dilationWidth,v=h.effectiveFilterDepth,A=h.effectiveFilterHeight,w=h.effectiveFilterWidth,k=v-1-h.padInfo.front,S=w-1-h.padInfo.left,I=A-1-h.padInfo.top,_=zv(s.shape,"float32"),E=1/(f*m*g),T=n.bufferSync(a);for(let C=0;C<h.batchSize;++C)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inDepth;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){let a=t-k,s=n-I,i=r-S,o=0;for(let t=0;t<v;t+=y){let n=(a+t)/c;if(!(n<0||n>=h.outDepth||Math.floor(n)!==n))for(let t=0;t<A;t+=b){let r=(s+t)/d;if(!(r<0||r>=h.outHeight||Math.floor(r)!==r))for(let t=0;t<w;t+=x){let a=(i+t)/p;a<0||a>=h.outWidth||Math.floor(a)!==a||(o+=T.get(C,n,r,a,e))}}}_.set(o*E,C,t,n,r,e)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},oW={kernelName:Wm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;mL([a,s],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=r,h=__.computePool2DInfo(i.shape,o,l,1,u),c=h.strideHeight,d=h.strideWidth,p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,x=b-1-h.padInfo.left,v=y-1-h.padInfo.top,A=zv(i.shape,"float32"),w=1/(p*f),k=n.data.get(a.dataId).values,S=zv(a.shape,"float32",k);for(let I=0;I<h.batchSize;++I)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){let r=t-v,a=n-x,s=0;for(let t=0;t<y;t+=m){let n=(r+t)/c;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=g){let r=(a+t)/d;r<0||r>=h.outWidth||Math.floor(r)!==r||(s+=S.get(I,n,r,e))}}A.set(s*w,I,t,n,e)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}},lW={kernelName:Rg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:s,offset:i,mean:o,variance:l}=t;zb.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),zb.assert(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),zb.assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),mL([a,o,l,s,i],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);let h=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(h.length),g=f.length,y=p.length,b=d.length,x=c.length,v=0,A=0,w=0,k=0;for(let S=0;S<h.length;++S)m[S]=f[v++]+(h[S]-c[A++])*p[w++]/Math.sqrt(d[k++]+u),v>=g&&(v=0),A>=x&&(A=0),w>=y&&(w=0),k>=b&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},uW={kernelName:Gm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;mL([a],"batchToSpaceND");let o=s.reduce((e,t)=>e*t),l=__.getReshaped(a.shape,s,o),u=__.getPermuted(l.length,s.length),h=__.getReshapedPermuted(a.shape,s,o),c=__.getSliceBeginCoords(i,s.length),d=__.getSliceSize(h,i,s.length),p=NB({inputs:{x:a},backend:n,attrs:{shape:l}}),f=VV({inputs:{x:p},backend:n,attrs:{perm:u}}),m=NB({inputs:{x:f},backend:n,attrs:{shape:h}}),g=XV({inputs:{x:m},backend:n,attrs:{begin:c,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}},hW={kernelName:qm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=$L(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,o)}},cW=BL(Zm,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e),dW={kernelName:Zm,backendName:"cpu",kernelFunc:cW},pW={kernelName:Jm,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(zb.sizeFromShape(t.shape)),a=n.data.get(t.dataId),s=a.complexTensorInfos.imag,i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(s.dataId).values;for(let l=0;l<i.length;l++)r[l]=Math.hypot(i[l],o[l]);return n.makeOutput(r,t.shape,"float32")}};function fW(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}var mW={kernelName:Vg,backendName:"cpu",kernelFunc:fW};function gW(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=zb.parseAxisParam(a,t[0].shape)[0],i=__.computeOutShape(t.map(e=>e.shape),s);if(0===zb.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);let o=t.filter(e=>zb.sizeFromShape(e.shape)>0);if(1===o.length)return _L({inputs:{x:o[0]},backend:n});let l=o.map(e=>e.shape);if(__.assertParamsConsistent(l,s),"complex64"===o[0].dtype){let e=o.map(e=>TL({inputs:{input:e},backend:n})),t=o.map(e=>fW({inputs:{input:e},backend:n})),r=gW({inputs:e,backend:n,attrs:{axis:s}}),a=gW({inputs:t,backend:n,attrs:{axis:s}}),i=kL({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),i}let u=o.map(e=>{let t=zb.sizeFromShape(e.shape.slice(s));return NB({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),h=u.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));i=__.computeOutShape(u.map(e=>e.shape),1);let c=GL(h,i,t[0].dtype,1===u[0].shape[0]),d=__.computeOutShape(o.map(e=>e.shape),s),p=n.makeTensorInfo(d,t[0].dtype,c);return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}var yW={kernelName:Qm,backendName:"cpu",kernelFunc:gW};function bW(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:h}=r;mL([a,s],"conv2d");let c=__.convertConv2DDataFormat(l),d=__.computeConv2DInfo(a.shape,s.shape,i,u,o,h,!1,c),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,x="channelsLast"===d.dataFormat,v=new ux(d.outShape,a.dtype),A=zb.computeStrides(a.shape),w=zb.computeStrides(s.shape),k=A[0],S=x?A[1]:A[2],I=x?A[2]:1,_=x?1:A[1],E=v.strides[0],T=x?v.strides[1]:v.strides[2],C=x?v.strides[2]:1,N=x?1:v.strides[1],M=n.data.get(a.dataId).values,F=n.data.get(s.dataId).values,R=v.values;for(let D=0;D<d.batchSize;++D){let e=D*k,t=D*E;for(let n=0;n<d.outHeight;++n){let r=t+n*T,a=n*d.strideHeight-b;for(let t=0;t<p;++t){let n=a+t*m;if(n<0||n>=d.inHeight)continue;let s=t*w[0],i=e+n*S;for(let e=0;e<d.outWidth;++e){let t=r+e*C,n=e*d.strideWidth-y;for(let e=0;e<f;++e){let r=n+e*g;if(r<0||r>=d.inWidth)continue;let a=i+r*I,o=s+e*w[1];for(let e=0;e<d.inChannels;++e){let n=M[a+e*_];for(let e=0;e<d.outChannels;++e)R[t+e*N]+=n*F[o+e];o+=d.outChannels}}}}}}return n.makeTensorInfo(v.shape,v.dtype,R)}var xW={kernelName:eg,backendName:"cpu",kernelFunc:bW},vW={kernelName:tg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=r;mL([a,s],"conv2dBackpropFilter");let c=__.convertConv2DDataFormat(l),d=__.computeConv2DInfo(a.shape,h,i,1,o,u,!1,c),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,b=new ux(d.filterShape,"float32"),x=d.padInfo.left,v=d.padInfo.top,A=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,k=new ux(a.shape,a.dtype,A),S=new ux(s.shape,s.dtype,w);for(let I=0;I<m;++I){let e=Math.max(0,Math.ceil((v-I)/p)),t=Math.min(d.outHeight,(d.inHeight+v-I)/p);for(let n=0;n<g;++n){let r=Math.max(0,Math.ceil((x-n)/f)),a=Math.min(d.outWidth,(d.inWidth+x-n)/f);for(let s=0;s<d.inChannels;++s)for(let i=0;i<d.outChannels;++i){let o=0;for(let l=0;l<d.batchSize;++l)for(let u=e;u<t;++u){let e=I+u*p-v;for(let t=r;t<a;++t){let r=n+t*f-x;o+=y?k.get(l,e,r,s)*S.get(l,u,t,i):k.get(l,s,e,r)*S.get(l,i,u,t)}}b.set(o,I,n,s,i)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},AW={kernelName:ng,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=r;mL([a,s],"conv2dBackpropInput");let c=zb.computeStrides(s.shape),d=zb.computeStrides(a.shape),p=__.convertConv2DDataFormat(u),f=__.computeConv2DInfo(i,s.shape,o,1,l,h,!1,p),m=new ux(f.inShape,"float32"),g=m.values,y=n.data.get(a.dataId).values,b=n.data.get(s.dataId).values,[x,v,A]=c,{batchSize:w,filterHeight:k,filterWidth:S,inChannels:I,inHeight:_,inWidth:E,outChannels:T,outHeight:C,outWidth:N,strideHeight:M,strideWidth:F}=f;p=f.dataFormat;let R=k-1-f.padInfo.top,D=S-1-f.padInfo.left,O="channelsLast"===p,z=m.strides[0],P=O?m.strides[1]:m.strides[2],$=O?m.strides[2]:1,L=O?1:m.strides[1],V=d[0],B=O?d[1]:d[2],W=O?d[2]:1,j=O?1:d[1];for(let H=0;H<w;++H)for(let e=0;e<I;++e)for(let t=0;t<_;++t){let n=t-R,r=Math.max(0,Math.ceil(n/M)),a=Math.min(C,(k+n)/M);for(let s=0;s<E;++s){let i=s-D,o=Math.max(0,Math.ceil(i/F)),l=Math.min(N,(S+i)/F),u=0;for(let t=r;t<a;++t){let r=t*M-n;for(let n=o;n<l;++n){let a=V*H+B*t+W*n,s=x*(k-1-r)+v*(S-1-(n*F-i))+A*e;for(let e=0;e<T;++e)u+=y[a+j*e]*b[s+e]}}g[z*H+P*t+$*s+L*e]=u}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},wW={kernelName:rg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r;mL([a,s],"conv3d");let u=__.computeConv3DInfo(a.shape,s.shape,i,l,o),{filterDepth:h,filterHeight:c,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=u,y=g.front,b=g.left,x=g.top,v=new ux(u.outShape,a.dtype),A=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,k=v.values,S=zb.computeStrides(a.shape),I=zb.computeStrides(s.shape);for(let _=0;_<u.batchSize;++_){let e=_*S[0],t=_*v.strides[0];for(let n=0;n<u.outDepth;++n){let r=t+n*v.strides[1],a=n*u.strideDepth-y;for(let t=0;t<h;++t){let n=a+t*p;if(n<0||n>=u.inDepth)continue;let s=t*I[0],i=e+n*S[1];for(let e=0;e<u.outHeight;++e){let t=r+e*v.strides[2],n=e*u.strideHeight-x;for(let e=0;e<c;++e){let r=n+e*f;if(r<0||r>=u.inHeight)continue;let a=s+e*I[1],o=i+r*S[2];for(let e=0;e<u.outWidth;++e){let n=t+e*u.outChannels,r=e*u.strideWidth-b;for(let e=0;e<d;++e){let t=r+e*m;if(t<0||t>=u.inWidth)continue;let s=o+t*u.inChannels,i=a+e*I[2];for(let e=0;e<u.inChannels;++e){let t=A[s+e];for(let e=0;e<u.outChannels;++e)k[n+e]+=t*w[i+e];i+=u.outChannels}}}}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},kW={kernelName:ag,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r;mL([a,s],"conv3dBackpropFilterV2");let u=zb.computeStrides(a.shape),h=zb.computeStrides(s.shape),c=__.computeConv3DInfo(a.shape,l,i,1,o),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.filterDepth,g=c.filterHeight,y=c.filterWidth,b=new ux(c.filterShape,"float32"),x=b.values,[v,A,w,k]=b.strides,S=n.data.get(s.dataId).values,[I,_,E,T]=h,C=n.data.get(a.dataId).values,[N,M,F,R]=u,D=c.padInfo.front,O=c.padInfo.left,z=c.padInfo.top;for(let P=0;P<m;++P){let e=Math.max(0,Math.ceil((D-P)/d)),t=Math.min(c.outDepth,(c.inDepth+D-P)/d),n=P*v;for(let r=0;r<g;++r){let a=Math.max(0,Math.ceil((z-r)/p)),s=Math.min(c.outHeight,(c.inHeight+z-r)/p),i=r*A+n;for(let n=0;n<y;++n){let o=Math.max(0,Math.ceil((O-n)/f)),l=Math.min(c.outWidth,(c.inWidth+O-n)/f),u=n*w+i;for(let i=0;i<c.inChannels;++i){let h=i*k+u;for(let u=0;u<c.outChannels;++u){let m=0;for(let h=0;h<c.batchSize;++h){let c=h*N,g=h*I;for(let h=e;h<t;++h){let e=(P+h*d-D)*M+c,t=h*_+g;for(let h=a;h<s;++h){let a=(r+h*p-z)*F+e,s=h*E+t;for(let e=o;e<l;++e)m+=C[(n+e*f-O)*R+a+i]*S[e*T+s+u]}}}x[h+u]=m}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},SW={kernelName:sg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r;mL([a],"conv3dBackpropInputV2");let u=zb.computeStrides(a.shape),h=zb.computeStrides(s.shape),c=__.computeConv3DInfo(l,s.shape,o,1,i),d=new ux(c.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,b=n.data.get(a.dataId).values,[x,v,A,w]=u,k=n.data.get(s.dataId).values,[S,I,_,E]=h,{batchSize:T,filterDepth:C,filterHeight:N,filterWidth:M,inChannels:F,inDepth:R,inHeight:D,inWidth:O,outChannels:z,outDepth:P,outHeight:$,outWidth:L,strideDepth:V,strideHeight:B,strideWidth:W}=c,j=C-1-c.padInfo.front,H=N-1-c.padInfo.top,U=M-1-c.padInfo.left;for(let G=0;G<T;++G)for(let e=0;e<F;++e)for(let t=0;t<R;++t){let n=t-j,r=Math.max(0,Math.ceil(n/V)),a=Math.min(P,(C+n)/V);for(let s=0;s<D;++s){let i=s-H,o=Math.max(0,Math.ceil(i/B)),l=Math.min($,(N+i)/B);for(let u=0;u<O;++u){let h=u-U,c=Math.max(0,Math.ceil(h/W)),d=Math.min(L,(M+h)/W),T=0;for(let t=r;t<a;++t){let r=t*V-n;for(let n=o;n<l;++n){let a=n*B-i;for(let s=c;s<d;++s){let i=x*G+v*t+A*n+w*s,o=S*(C-1-r)+I*(N-1-a)+_*(M-1-(s*W-h))+E*e;for(let e=0;e<z;++e)T+=b[i+e]*k[o+e]}}}p[f*G+m*t+g*s+y*u+e]=T}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},IW=BL(ig,e=>Math.cos(e)),_W={kernelName:ig,backendName:"cpu",kernelFunc:IW},EW=BL(og,e=>Math.cosh(e)),TW={kernelName:og,backendName:"cpu",kernelFunc:EW},CW={kernelName:ug,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:u}=r,[h,c,d,p]=a.shape,f=s.shape[0],[m,g]=o,y=zv([f,m,g,p],"float32"),b=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,A=zb.computeStrides(a.shape),w=zb.computeStrides(y.shape);for(let k=0;k<f;k++){let e=4*k,t=b[e],n=b[e+1],r=b[e+2],a=b[e+3],s=x[k];if(s>=h)continue;let i=m>1?(r-t)*(c-1)/(m-1):0,o=g>1?(a-n)*(d-1)/(g-1):0;for(let h=0;h<m;h++){let e=m>1?t*(c-1)+h*i:.5*(t+r)*(c-1);if(e<0||e>c-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=u;else if("bilinear"===l){let t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){let l=g>1?n*(d-1)+e*o:.5*(n+a)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++)y.values[t+e*w[2]+h*w[1]+k*w[0]]=u;continue}let c=Math.floor(l),f=Math.ceil(l),m=l-c;for(let n=0;n<p;n++){let a=n+c*A[2]+t*A[1]+s*A[0],o=v[a];a=n+f*A[2]+t*A[1]+s*A[0];let l=v[a];a=n+c*A[2]+r*A[1]+s*A[0];let u=v[a];a=n+f*A[2]+r*A[1]+s*A[0];let d=v[a],p=o+(l-o)*m;a=n+e*w[2]+h*w[1]+k*w[0],y.values[a]=p+(u+(d-u)*m-p)*i}}}else for(let t=0;t<g;++t){let r=g>1?n*(d-1)+t*o:.5*(n+a)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=u;continue}let i=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=v[e+i*A[2]+l*A[1]+s*A[0]]}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},NW={kernelName:lg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;mL(a,"cumsum");let l=__.getAxesPermutation([s],a.shape.length),u=a;null!=l&&(u=VV({inputs:{x:a},backend:n,attrs:{perm:l}}));let h=__.getInnerMostAxes(1,a.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);let c=wx(u.dtype,"int32"),d=zb.makeZerosTypedArray(zb.sizeFromShape(u.shape),c),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){let t=m(y,e);if(0===e)d[t]=i?0:p[t];else{let n=m(y,e-1);d[t]=i?p[n]+d[n]:p[t]+d[n]}}let g=n.makeTensorInfo(u.shape,c,d);if(null!=l){let e=VV({inputs:{x:g},backend:n,attrs:{perm:__.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}},MW={kernelName:hg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){let e=$L(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,e)}if(2===a.shape.length){let e=LL(n.bufferSync(a),n.bufferSync(s),i,o);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},FW={kernelName:cg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;zb.assert("NHWC"===i,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i),zb.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);let o=a.shape[0],l=a.shape[1],u=a.shape[2],h=a.shape[3],c=l*s,d=u*s,p=h/(s*s),f=n.data.get(a.dataId).values,m=new Float32Array(o*c*d*p),g=0;for(let y=0;y<o;++y)for(let e=0;e<c;++e){let t=Math.floor(e/s),n=e%s;for(let e=0;e<d;++e){let r=Math.floor(e/s),a=(n*s+e%s)*p;for(let e=0;e<p;++e)m[g++]=f[e+a+h*(r+u*(t+l*y))]}}return n.makeTensorInfo([o,c,d,p],a.dtype,m)}};function RW(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r;mL([a,s],"depthwiseConv2DNative");let h=zb.computeStrides(a.shape),c=zb.computeStrides(s.shape),d=l;null==d&&(d=[1,1]),zb.assert(__.eitherStridesOrDilationsAreOne(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);let p=__.computeConv2DInfo(a.shape,s.shape,i,d,o,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=p,x=b.left,v=b.top,A=p.outChannels/p.inChannels,w=new ux(p.outShape,a.dtype),k=n.data.get(a.dataId).values,S=n.data.get(s.dataId).values,I=w.values;for(let _=0;_<p.batchSize;++_){let e=_*h[0],t=_*w.strides[0];for(let n=0;n<p.outHeight;++n){let r=t+n*w.strides[1],a=n*p.strideHeight-v;for(let t=0;t<f;++t){let n=a+t*g;if(n<0||n>=p.inHeight)continue;let s=t*c[0],i=e+n*h[1];for(let e=0;e<p.outWidth;++e){let t=r+e*w.strides[2],n=e*p.strideWidth-x;for(let e=0;e<m;++e){let r=n+e*y;if(r<0||r>=p.inWidth)continue;let a=i+r*p.inChannels,o=t,l=s+e*c[1];for(let e=0;e<p.inChannels;++e){let t=k[a+e];for(let e=0;e<A;++e)I[o+e]+=t*S[l+e];o+=A,l+=A}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var DW={kernelName:dg,backendName:"cpu",kernelFunc:RW},OW={kernelName:pg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=r;mL([a,s],"depthwiseConv2dNativeBackpropFilter");let c=__.computeConv2DInfo(a.shape,h,i,o,l,u,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=c,g=new ux(c.filterShape,"float32"),y=c.padInfo.left,b=c.padInfo.top,x=c.outChannels/c.inChannels,v=n.data.get(a.dataId).values,A=new ux(a.shape,a.dtype,v),w=n.data.get(s.dataId).values,k=new ux(s.shape,s.dtype,w);for(let S=0;S<f;++S){let e=Math.max(0,Math.ceil((b-S)/d)),t=Math.min(c.outHeight,(c.inHeight+b-S)/d);for(let n=0;n<m;++n){let r=Math.max(0,Math.ceil((y-n)/p)),a=Math.min(c.outWidth,(c.inWidth+y-n)/p);for(let s=0;s<c.outChannels;++s){let i=Math.trunc(s/x),o=s%x,l=0;for(let u=0;u<c.batchSize;++u)for(let o=e;o<t;++o){let e=S+o*d-b;for(let t=r;t<a;++t)l+=A.get(u,e,n+t*p-y,i)*k.get(u,o,t,s)}g.set(l,S,n,i,o)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},zW={kernelName:fg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=r;mL([a,s],"depthwiseConv2DNativeBackpropInput");let c=zb.computeStrides(a.shape),d=zb.computeStrides(s.shape),p=__.computeConv2DInfo(h,s.shape,i,o,l,u,!0),f=new ux(p.inShape,"float32"),m=f.values,[g,y,b]=f.strides,x=n.data.get(a.dataId).values,[v,A,w]=c,k=n.data.get(s.dataId).values,[S,I,_]=d,{batchSize:E,filterHeight:T,filterWidth:C,inChannels:N,inHeight:M,inWidth:F,outChannels:R,outHeight:D,outWidth:O,strideHeight:z,strideWidth:P}=p,$=T-1-p.padInfo.top,L=C-1-p.padInfo.left,V=R/N;for(let B=0;B<E;++B)for(let e=0;e<N;++e)for(let t=0;t<M;++t){let n=t-$,r=Math.max(0,Math.ceil(n/z)),a=Math.min(D,(T+n)/z);for(let s=0;s<F;++s){let i=s-L,o=Math.max(0,Math.ceil(i/P)),l=Math.min(O,(C+i)/P),u=0;for(let t=r;t<a;++t){let r=t*z-n;for(let n=o;n<l;++n){let a=v*B+A*t+w*n,s=S*(T-1-r)+I*(C-1-(n*P-i))+_*e;for(let t=0;t<V;++t)u+=x[a+(e*V+t)]*k[s+t]}}m[g*B+y*t+b*s+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},PW={kernelName:mg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=zb.sizeFromShape(r.shape),s=n.data.get(r.dataId).values,i=zv([a,a],r.dtype),o=i.values;for(let u=0;u<s.length;u++)o[u*a+u]=s[u];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},$W={kernelName:gg,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a}=e,{strides:s,pad:i,dilations:o}=n,l=t,u=l.data.get(r.dataId).values,h=r.shape.length,c=l.data.get(a.dataId).values,d=a.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:A,filterHeight:w,filterWidth:k,dilationHeight:S,dilationWidth:I,outShape:_}=__.computeDilation2DInfo(r.shape,a.shape,s,i,"NHWC",o),E=zb.sizeFromShape(_),T=_.length,C=zb.getArrayFromDType(r.dtype,E);for(let N=0;N<p;++N)for(let e=0;e<y;++e){let t=e*v-x.top;for(let n=0;n<b;++n){let s=n*A-x.left;for(let i=0;i<g;++i){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<w;++e){let n=t+e*S;if(n>=0&&n<f)for(let t=0;t<k;++t){let l=s+t*I;if(l>=0&&l<m){let s=zb.locToIndex([N,n,l,i],h,zb.computeStrides(r.shape)),p=zb.locToIndex([e,t,i],d,zb.computeStrides(a.shape)),f=u[s]+c[p];f>o&&(o=f)}}}C[zb.locToIndex([N,e,n,i],T,zb.computeStrides(_))]=o}}}return{dataId:l.write(zb.toTypedArray(C,r.dtype),_,r.dtype),shape:_,dtype:r.dtype}}},LW={kernelName:bg,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,u=t,h=zb.toNestedArray(r.shape,u.data.get(r.dataId).values),c=zb.toNestedArray(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:x,strideWidth:v,filterHeight:A,filterWidth:w,dilationHeight:k,dilationWidth:S,outShape:I}=__.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",l);zb.assert(s.rank===I.length,()=>`Error in ${bg}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);let _=zb.toNestedArray(I,u.data.get(s.dataId).values),E=zb.makeZerosNestedTypedArray(a.shape,a.dtype);for(let T=0;T<d;++T)for(let e=0;e<g;++e){let t=e*x-b.top;for(let n=0;n<y;++n){let r=n*v-b.left;for(let a=0;a<m;++a){let s=Number.MIN_SAFE_INTEGER,i=0,o=0;for(let e=0;e<A;++e){let n=t+e*k;if(n>=0&&n<p)for(let t=0;t<w;++t){let l=r+t*S;if(l>=0&&l<f){let r=h[T][n][l][a]+c[e][t][a];r>s&&(s=r,i=e,o=t)}}}E[i][o][a]+=_[T][e][n][a]}}}return{dataId:u.write(zb.toTypedArray(E,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},VW={kernelName:yg,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,u=t,h=zb.toNestedArray(r.shape,u.data.get(r.dataId).values),c=zb.toNestedArray(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:x,strideWidth:v,filterHeight:A,filterWidth:w,dilationHeight:k,dilationWidth:S,outShape:I}=__.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",l);zb.assert(s.rank===I.length,()=>`Error in ${yg}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);let _=zb.toNestedArray(I,u.data.get(s.dataId).values),E=zb.makeZerosNestedTypedArray(r.shape,r.dtype);for(let T=0;T<d;++T)for(let e=0;e<g;++e){let t=e*x-b.top;for(let n=0;n<y;++n){let r=n*v-b.left;for(let a=0;a<m;++a){let s=Number.MIN_SAFE_INTEGER,i=t<0?0:t,o=r<0?0:r;for(let e=0;e<A;++e){let n=t+e*k;if(n>=0&&n<p)for(let t=0;t<w;++t){let l=r+t*S;if(l>=0&&l<f){let r=h[T][n][l][a]+c[e][t][a];r>s&&(s=r,i=n,o=l)}}}E[T][i][o][a]+=_[T][e][n][a]}}}return{dataId:u.write(zb.toTypedArray(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function BW(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{axis:i,keepDims:o}=a;mL(s,"sum"),t="bool"===s.dtype?NL({inputs:{x:s},backend:r,attrs:{dtype:"int32"}}):_L({inputs:{x:s},backend:r});let l=t.shape.length,u=zb.parseAxisParam(i,t.shape),h=__.getAxesPermutation(u,l),c=u,d=t;null!=h&&(d=VV({inputs:{x:t},backend:r,attrs:{perm:h}}),c=__.getInnerMostAxes(c.length,l)),__.assertAxesAreInnerMostDims("sum",c,d.shape.length);let[p,f]=__.computeOutAndReduceShapes(d.shape,c),m=IL(r,p,__.upcastType(d.dtype,"int32")),g=zb.sizeFromShape(f),y=r.data.get(m.dataId).values,b=r.data.get(d.dataId).values;for(let x=0;x<y.length;++x){let e=x*g,t=0;for(let n=0;n<g;++n)t+=b[e+n];y[x]=t}if(o){let e=m;m=NB({inputs:{x:m},backend:r,attrs:{shape:__.expandShapeToKeepDim(m.shape,u)}}),r.disposeIntermediateTensorInfo(e)}return r.disposeIntermediateTensorInfo(t),null!=h&&r.disposeIntermediateTensorInfo(d),m}var WW={kernelName:Zy,backendName:"cpu",kernelFunc:BW},jW={kernelName:vg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=__.decodeEinsumEquation(a,s.length);__.checkEinsumDimSizes(i.length,l,s);let{path:u,steps:h}=__.getEinsumComputePath(o,l),c=h.length,d=null,p=i.length,f=[];for(let m=0;m<c;++m){for(let e of h[m]){let t,{permutationIndices:r,expandDims:a}=__.getEinsumPermutation(p,l[e]);__.isIdentityPermutation(r)?t=s[e]:(t=VV({inputs:{x:s[e]},backend:n,attrs:{perm:r}}),f.push(t));let i=t.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);zb.arraysEqual(t.shape,i)||(t=NB({inputs:{x:t},backend:n,attrs:{shape:i}}),f.push(t)),null===d?d=t:(d=FV({inputs:{a:t,b:d},backend:n}),f.push(d))}m<c-1&&(u[m]>=0&&(d=BW({inputs:{x:d},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(let m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},HW={kernelName:wg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;mL([r,a],"eluGrad");let s=new Float32Array(zb.sizeFromShape(a.shape)),i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){let e=i[l];s[l]=e>=1?o[l]:o[l]*(e+1)}return n.makeTensorInfo(a.shape,"float32",s)}},UW=__.ERF_P,GW=__.ERF_A1,qW=__.ERF_A2,KW=__.ERF_A3,XW=__.ERF_A4,ZW=__.ERF_A5,YW=BL(kg,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+UW*n);return t*(1-((((ZW*r+XW)*r+KW)*r+qW)*r+GW)*r*Math.exp(-n*n))}),JW={kernelName:kg,backendName:"cpu",kernelFunc:YW};function QW(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:s}=r,i=a.shape.length,o=a.shape.slice(),l=s;return s<0&&(zb.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),NB({inputs:{x:a},backend:n,attrs:{shape:o}})}var ej={kernelName:_g,backendName:"cpu",kernelFunc:QW},tj=wL((e,t)=>e/t),nj=FL(xg,tj),rj={kernelName:xg,backendName:"cpu",kernelFunc:nj};function aj(e,t,n){let r=e.shape,a=r[0],s=r[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[a,s],h=zb.sizeFromShape(u),c=zb.getTypedArrayFromDType("float32",h),d=zb.getTypedArrayFromDType("float32",h);for(let g=0;g<a;g++){let e=XV({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,s]}}),r=XV({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),a=kL({inputs:{real:e,imag:r},backend:n}),{real:i,imag:u}=sj(a,t,n),h=__.mergeRealAndImagArrays(i,u);for(let t=0;t<s;t++){let e=__.getComplexWithIndex(h,t);c[g*s+t]=e.real,d[g*s+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}let p=n.makeTensorInfo(u,"float32",c),f=n.makeTensorInfo(u,"float32",d),m=kL({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function sj(e,t,n){let r=zb.sizeFromShape(e.shape),a=n.data.get(e.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0==(e&e-1)}(r)){let a=ij(s,i,r,t,n),o=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),s=n.makeTensorInfo([],"float32",zb.createScalarValue(r,"float32")),i=_L({inputs:{x:s},backend:n}),l=rj.kernelFunc({inputs:{a:e,b:s},backend:n}),u=rj.kernelFunc({inputs:{a:t,b:i},backend:n}),h=n.data.get(l.dataId).values,c=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:h,imag:c}}return a}{let e=function(e,t,n){let r=new Float32Array(2*t);for(let a=0;a<t;a++){let s=0,i=0;for(let r=0;r<t;r++){let o=__.exponent(a*r,t,n),l=__.getComplexWithIndex(e,r);s+=l.real*o.real-l.imag*o.imag,i+=l.real*o.imag+l.imag*o.real}n&&(s/=t,i/=t),__.assignToTypedArray(r,s,i,a)}return r}(__.mergeRealAndImagArrays(s,i),r,t);return __.splitRealAndImagArrays(e)}}function ij(e,t,n,r,a){if(1===n)return{real:e,imag:t};let s=__.mergeRealAndImagArrays(e,t),i=n/2,o=__.complexWithEvenIndex(s),l=o.real,u=o.imag,h=[l.length],c=a.makeTensorInfo(h,"float32",l),d=a.makeTensorInfo(h,"float32",u),p=kL({inputs:{real:c,imag:d},backend:a}),f=__.complexWithOddIndex(s),m=f.real,g=f.imag,y=[m.length],b=a.makeTensorInfo(y,"float32",m),x=a.makeTensorInfo(y,"float32",g),v=kL({inputs:{real:b,imag:x},backend:a}),A=ij(l,u,i,r,a),w=A.real,k=A.imag,S=[w.length],I=a.makeTensorInfo(S,"float32",w),_=a.makeTensorInfo(S,"float32",k),E=kL({inputs:{real:I,imag:_},backend:a}),T=ij(m,g,i,r,a),C=T.real,N=T.imag,M=[C.length],F=a.makeTensorInfo(M,"float32",C),R=a.makeTensorInfo(M,"float32",N),D=kL({inputs:{real:F,imag:R},backend:a}),O=__.exponents(n,r),z=[O.real.length],P=a.makeTensorInfo(z,"float32",O.real),$=a.makeTensorInfo(z,"float32",O.imag),L=kL({inputs:{real:P,imag:$},backend:a}),V=FV({inputs:{a:L,b:D},backend:a}),B=zL({inputs:{a:E,b:V},backend:a}),W=hB({inputs:{a:E,b:V},backend:a}),j=TL({inputs:{input:B},backend:a}),H=TL({inputs:{input:W},backend:a}),U=fW({inputs:{input:B},backend:a}),G=fW({inputs:{input:W},backend:a}),q=gW({inputs:[j,H],backend:a,attrs:{axis:0}}),K=gW({inputs:[U,G],backend:a,attrs:{axis:0}}),X=a.data.get(q.dataId).values,Z=a.data.get(K.dataId).values;return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),{real:X,imag:Z}}var oj={kernelName:Tg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=zb.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=NB({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=aj(i,!1,n),l=NB({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}};function lj(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:s}=n,i=s||zb.inferDtype(a),o=zb.getArrayFromDType(i,zb.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var uj={kernelName:Cg,backendName:"cpu",kernelFunc:lj},hj={kernelName:Ng,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,a=zb.getTypedArrayFromDType(n.dtype,zb.sizeFromShape(n.shape)),[s,i,o,l]=n.shape,u=r.data.get(n.dataId).values;for(let h=0;h<s;h++){let e=h*o*i*l;for(let t=0;t<i;t++){let n=t*(o*l);for(let r=0;r<o;r++){let i=r*l;for(let h=0;h<l;h++){let c=Math.round(o-[s,t,r,h][2]),d=e+n+i+h,p=u[d];c>=0&&c<o&&(p=u[e+n+c*l+h]),a[d]=p}}}}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},cj=wL((e,t)=>Math.floor(e/t)),dj=FL(Fg,cj,null,"int32"),pj={kernelName:Fg,backendName:"cpu",kernelFunc:dj},fj={kernelName:_b,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=bW({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d}});if(i){let e=m;m=zL({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){let e=m;m=CB(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},mj={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=RW({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d}});if(i){let e=m;m=zL({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){let e=m;m=CB(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},gj={kernelName:Og,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=zb.sizeFromShape(r.shape),i=a.shape,o=i[i.length-1],[l,u,h,c]=__.prepareAndValidate(r,a);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);let d=sV(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,u,o,h,c,r.shape,s);return n.makeTensorInfo(l,r.dtype,d.values)}},yj={kernelName:Dg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r;mL([a,s],"gatherV2");let l=o;null==o&&(l=0);let u=zb.sizeFromShape(s.shape),h=zb.parseAxisParam(i,a.shape)[0],c=__.segment_util.collectGatherOpShapeInfo(a,s,h,l),d=NB({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=NB({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}}),f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize],m=n.bufferSync(p),g=iV(n.bufferSync(d),m,f);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}},bj={kernelName:Lg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=zb.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=NB({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=aj(i,!0,n),l=NB({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}},xj=BL(Bg,e=>Number.isFinite(e)?1:0,"bool"),vj={kernelName:Bg,backendName:"cpu",kernelFunc:xj},Aj=BL(Wg,e=>Math.abs(e)===1/0?1:0,"bool"),wj={kernelName:Wg,backendName:"cpu",kernelFunc:Aj},kj=BL(jg,e=>Number.isNaN(e)?1:0,"bool"),Sj={kernelName:jg,backendName:"cpu",kernelFunc:kj},Ij={kernelName:qg,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=xV(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},_j=BL(Xg,e=>Math.log1p(e)),Ej={kernelName:Xg,backendName:"cpu",kernelFunc:_j},Tj=wL((e,t)=>e&&t),Cj=FL(Zg,Tj,null,"bool"),Nj={kernelName:Zg,backendName:"cpu",kernelFunc:Cj},Mj=BL(Yg,e=>e?0:1,"bool"),Fj={kernelName:Yg,backendName:"cpu",kernelFunc:Mj},Rj=wL((e,t)=>e||t),Dj=FL(Jg,Rj,null,"bool"),Oj={kernelName:Jg,backendName:"cpu",kernelFunc:Dj},zj={kernelName:Qg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r;mL(a,"LRN");let u=a.shape[3],h=u-1,c=n.data.get(a.dataId).values,d=zb.sizeFromShape(a.shape),p=new Float32Array(d);function f(e){let t=e%u,n=e-t+Math.max(0,t-s),r=e-t+Math.min(t+s,h),a=0;for(;n<=r;n++){let e=c[n];a+=e*e}return a}for(let m=0;m<d;m++){let e=f(m),t=c[m]*Math.pow(i+o*e,-l);p[m]=t}return n.makeTensorInfo(a.shape,a.dtype,p)}},Pj={kernelName:ey,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:u,beta:h}=r;mL(i,"LRNGrad");let c=zb.sizeFromShape(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(c),y=c;for(let b=0;b<y;b++){let e=b%d,t=b-e+Math.max(0,e-o),n=b-e+Math.min(d,e+o+1),r=0;for(let a=t;a<n;a++)r+=Math.pow(f[a],2);r=u*r+l;for(let a=t;a<n;a++){let e=-2*u*h*f[a]*m[b]/r;b===a&&(e+=Math.pow(r,-h)),e*=p[b],g[a]+=e}}return n.makeTensorInfo(i.shape,a.dtype,g)}};function $j(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=n,l=a.shape,u=l.length,h=zb.parseAxisParam(s,l),c=h,d=__.getAxesPermutation(c,u),p=o.data.get(a.dataId).values;if(null!=d){let e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=LV(p,l,a.dtype,d,e),c=__.getInnerMostAxes(c.length,u),l=e}mL(a,"max"),__.assertAxesAreInnerMostDims("max",c,u);let[f,m]=__.computeOutAndReduceShapes(l,c),g=kV(p,zb.sizeFromShape(m),f,a.dtype),y=o.write(g,f,a.dtype),b=f;return i&&(b=__.expandShapeToKeepDim(f,h)),{dataId:y,shape:b,dtype:a.dtype}}var Lj={kernelName:ty,backendName:"cpu",kernelFunc:$j},Vj={kernelName:ry,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;mL(a,"maxPool");let{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;zb.assert(__.eitherStridesOrDilationsAreOne(i,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);let u,h=__.computePool2DInfo(a.shape,s,i,1,o,l);if(1===h.filterWidth&&1===h.filterHeight&&zb.arraysEqual(h.inShape,h.outShape))u=_L({inputs:{x:a},backend:n});else{let e=n.data.get(a.dataId).values,t=zb.computeStrides(a.shape),r=tW(e,0,a.dtype,t,h,"max");u=n.makeTensorInfo(h.outShape,a.dtype,r.values)}return u}},Bj={kernelName:sy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;mL(a,"maxPool3d");let h=__.computePool3DInfo(a.shape,s,i,1,o,l,u),c=rW(n.data.get(a.dataId).values,0,a.dtype,zb.computeStrides(a.shape),h,"max");return n.makeTensorInfo(c.shape,"float32",c.values)}},Wj={kernelName:iy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;mL([a,s],"maxPool3DGrad");let h=__.computePool3DInfo(s.shape,i,o,1,l,u),c=function(e,t){let n=zv(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){let b=y*r-d,x=b;for(;x<0;)x+=i;let v=Math.min(t.inDepth,u+b);for(let r=0;r<t.outHeight;++r){let u=r*a-p,d=u;for(;d<0;)d+=o;let A=Math.min(t.inHeight,h+u);for(let a=0;a<t.outWidth;++a){let p=a*s-f,w=p;for(;w<0;)w+=l;let k=Math.min(t.inWidth,c+p),S=Number.NEGATIVE_INFINITY,I=-1;for(let t=x;t<v;t+=i){let n=t-b;for(let r=d;r<A;r+=o){let a=r-u;for(let s=w;s<k;s+=l){let i=s-p,o=e.get(m,t,r,s,g);o>=S&&(S=o,I=n*h*c+a*h+i)}}}n.set(I,m,y,r,a,g)}}}return n}(n.bufferSync(s),h),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.dilationDepth,g=h.dilationHeight,y=h.dilationWidth,b=h.effectiveFilterDepth,x=h.effectiveFilterHeight,v=h.effectiveFilterWidth,A=b-1-h.padInfo.front,w=v-1-h.padInfo.left,k=x-1-h.padInfo.top,S=zv(s.shape,"float32"),I=n.bufferSync(a);for(let _=0;_<h.batchSize;++_)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inDepth;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){let a=t-A,s=n-k,i=r-w,o=0;for(let t=0;t<b;t+=m){let n=(a+t)/d;if(!(n<0||n>=h.outDepth||Math.floor(n)!==n))for(let r=0;r<x;r+=g){let a=(s+r)/p;if(!(a<0||a>=h.outHeight||Math.floor(a)!==a))for(let s=0;s<v;s+=y){let l=(i+s)/f;if(l<0||l>=h.outWidth||Math.floor(l)!==l)continue;let u=b*x*v-1-c.get(_,n,a,l,e)===t*x*v+r*v+s?1:0;0!==u&&(o+=I.get(_,n,a,l,e)*u)}}}S.set(o,_,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},jj={kernelName:ay,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;mL([s,i],"maxPoolGrad");let{filterSize:l,strides:u,pad:h,dimRoundingMode:c}=r,d=__.computePool2DInfo(o.shape,l,u,1,h,c),p=n.data.get(o.dataId).values,f=zv(d.outShape,o.dtype,nW(p,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,x=d.effectiveFilterHeight,v=d.effectiveFilterWidth,A=v-1-d.padInfo.left,w=x-1-d.padInfo.top,k=zv(o.shape,"float32"),S=n.data.get(a.dataId).values,I=zv(a.shape,"float32",S);for(let _=0;_<d.batchSize;++_)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){let r=t-w,a=n-A,s=0;for(let t=0;t<x;t+=y){let n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<v;r+=b){let i=(a+r)/g;if(i<0||i>=d.outWidth||Math.floor(i)!==i)continue;let o=x*v-1-f.get(_,n,i,e)===t*v+r?1:0;0!==o&&(s+=I.get(_,n,i,e)*o)}}k.set(s,_,t,n,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},Hj={kernelName:oy,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;mL(r,"MaxPoolWithArgmax");let u=l.data.get(r.dataId).values,h=__.computePool2DInfo(r.shape,a,s,[1,1],i),[c,d]=function(e,t,n,r,a){let s=tW(e,0,n,zb.computeStrides(t),a,"max"),i=nW(e,t,n,a,!0,r);return[s.values,i.values]}(u,r.shape,r.dtype,o,h),p=l.write(c,h.outShape,r.dtype),f=l.write(d,h.outShape,r.dtype);return[{dataId:p,shape:h.outShape,dtype:r.dtype},{dataId:f,shape:h.outShape,dtype:"int32"}]}},Uj={kernelName:ly,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=zb.parseAxisParam(s,a.shape),l=__.computeOutAndReduceShapes(a.shape,o)[1],u=zb.sizeFromShape(l),h=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));h.push(c);let d=NL({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});h.push(d);let p=nj({inputs:{a:d,b:c},backend:n});h.push(p);let f=BW({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:i}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},Gj={kernelName:uy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;mL(a,"min");let o=zb.parseAxisParam(s,a.shape),l=o,u=__.getAxesPermutation(l,a.shape.length),h=a;null!=u&&(h=VV({inputs:{x:a},backend:n,attrs:{perm:u}}),l=__.getInnerMostAxes(l.length,a.shape.length)),__.assertAxesAreInnerMostDims("min",l,h.shape.length);let[c,d]=__.computeOutAndReduceShapes(h.shape,l),p=zb.sizeFromShape(d),f=zb.makeZerosTypedArray(zb.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){let e=y*p,t=m[e];for(let n=0;n<p;++n){let r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);let g=n.makeTensorInfo(c,h.dtype,f);if(i){let e=NB({inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},qj={kernelName:cy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,mode:i}=r;mL(a,"mirrorPad");let o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),l=s.map(e=>e[0]),u=s.map((e,t)=>e[0]+a.shape[t]),h="reflect"===i?0:1,c=n.data.get(a.dataId).values,d=a.shape.length,p=zb.computeStrides(a.shape),f=zb.sizeFromShape(o),m=o.length,g=zb.computeStrides(o),y=zb.getTypedArrayFromDType(a.dtype,f);for(let b=0;b<f;b++){let e=zb.indexToLoc(b,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-h:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+h);e=e.map((e,t)=>e-l[t]);let t=zb.locToIndex(e,d,p);y[b]=c[t]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}},Kj=wL((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),Xj=FL(dy,Kj),Zj={kernelName:dy,backendName:"cpu",kernelFunc:Xj},Yj=_(P());function Jj(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=a.shape.length,o=s;if(-1===o&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);let l=zb.parseAxisParam([o],a.shape),u=$j({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=__.expandShapeToKeepDim(u.shape,l),c=NB({inputs:{x:u},backend:n,attrs:{shape:h}}),d=hB({inputs:{a:a,b:c},backend:n}),p=YL({inputs:{x:d},backend:n}),f=BW({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=NB({inputs:{x:f},backend:n,attrs:{shape:h}}),g=nj({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var Qj={kernelName:Qy,backendName:"cpu",kernelFunc:Jj},eH={kernelName:py,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r;mL(a,"multinomial");let l=o?a:Jj({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],h=l.shape[1],c=n.data.get(l.dataId).values,d=[u,s],p=zb.makeZerosTypedArray(zb.sizeFromShape(d),"int32");for(let f=0;f<u;++f){let e=f*h,t=new Float32Array(h-1);t[0]=c[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+c[e+a];let n=Yj.alea(i.toString()),r=f*s;for(let a=0;a<s;++a){let e=n();p[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+a]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}},tH=mE.nonMaxSuppressionV3Impl,nH={kernelName:yy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;mL(a,"NonMaxSuppression");let u=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:c}=tH(u,h,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},rH=mE.nonMaxSuppressionV4Impl,aH={kernelName:by,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;mL(a,"NonMaxSuppressionPadded");let h=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:p}=rH(h,c,i,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},sH=mE.nonMaxSuppressionV5Impl,iH={kernelName:xy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;mL(a,"NonMaxSuppressionWithScore");let h=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,d=i,p=o,f=l,m=u,{selectedIndices:g,selectedScores:y}=sH(h,c,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},oH={kernelName:Ay,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r;mL(a,"oneHot");let l=zb.sizeFromShape(a.shape),u=new Float32Array(l*s);u.fill(o);let h=n.data.get(a.dataId).values;for(let c=0;c<l;++c)h[c]>=0&&h[c]<s&&(u[c*s+h[c]]=i);return n.makeTensorInfo([...a.shape,s],"int32",u)}};function lH(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){let e=TL({inputs:{input:r},backend:n}),t=lH({inputs:{x:e},backend:n}),a=fW({inputs:{input:r},backend:n}),s=lH({inputs:{x:a},backend:n}),i=kL({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return lj({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var uH={kernelName:Ab,backendName:"cpu",kernelFunc:lH},hH={kernelName:vy,backendName:"cpu",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){let t=TL({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=fW({inputs:{input:a},backend:r}),i=lH({inputs:{x:s},backend:r}),o=kL({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return lj({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function cH(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return QW({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let s=t[0].shape,i=t[0].dtype;t.forEach(e=>{zb.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),zb.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=gW({inputs:t.map(e=>{let t=QW({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}var dH={kernelName:wy,backendName:"cpu",kernelFunc:cH},pH={kernelName:ky,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r;mL(a,"pad");let o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),l=s.map(e=>e[0]),u=n.data.get(a.dataId).values,h=zb.sizeFromShape(a.shape),c=a.shape.length,d=zb.computeStrides(a.shape),p=zb.sizeFromShape(o),f=o.length,m=zb.computeStrides(o),g=zb.getTypedArrayFromDType(a.dtype,p);0!==i&&g.fill(i);for(let y=0;y<h;y++){let e=zb.indexToLoc(y,c,d).map((e,t)=>e+l[t]);g[zb.locToIndex(e,f,m)]=u[y]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}},fH=wL((e,t)=>Math.pow(e,t)),mH=FL(Sy,fH),gH={kernelName:Sy,backendName:"cpu",kernelFunc:mH},yH={kernelName:Ey,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:i}=n,o=HV(r,a,i,s);return t.makeTensorInfo([o.length],s,o)}},bH=BL(Cy,e=>1/e),xH={kernelName:Cy,backendName:"cpu",kernelFunc:bH},vH={kernelName:Dy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;mL(a,"resizeBilinear");let l=zb.computeStrides(a.shape),[u,h]=o,[c,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(zb.sizeFromShape([c,u,h,f])),y=[s&&u>1?d-1:d,s&&h>1?p-1:p],b=[s&&u>1?u-1:u,s&&h>1?h-1:h],x=0,v=y[0]/b[0],A=y[1]/b[1];for(let w=0;w<c;w++)for(let e=0;e<u;e++){let t;t=i?v*(e+.5)-.5:v*e;let n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(d-1,Math.ceil(t)),s=w*l[0]+n*l[1],o=w*l[0]+a*l[1];for(let e=0;e<h;e++){let t;t=i?A*(e+.5)-.5:A*e;let n=Math.max(0,Math.floor(t)),a=t-n,u=Math.min(p-1,Math.ceil(t)),h=s+n*l[2],c=o+n*l[2],d=s+u*l[2],y=o+u*l[2];for(let e=0;e<f;e++){let t=m[h+e],n=m[c+e],s=t+(m[d+e]-t)*a;g[x++]=s+(n+(m[y+e]-n)*a-s)*r}}}return n.makeTensorInfo([c,u,h,f],"float32",g)}},AH={kernelName:Oy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;mL([s,a],"resizeBilinearGrad");let o=zb.computeStrides(a.shape),[l,u,h,c]=a.shape,[,d,p]=s.shape,f=new Float32Array(l*u*h*c),m=[i&&d>1?u-1:u,i&&p>1?h-1:h],g=[i&&d>1?d-1:d,i&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],x=n.data.get(s.dataId).values,v=0;for(let A=0;A<l;A++){let e=A*o[0];for(let t=0;t<d;t++){let n=t*y,r=Math.floor(n),a=Math.min(Math.ceil(n),u-1),s=e+r*o[1],i=e+a*o[1],l=n-r,d=1-l;for(let e=0;e<p;e++){let t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),h-1),a=t-n,u=1-a,p=s+n*o[2],m=s+r*o[2],g=i+n*o[2],y=i+r*o[2],A=d*u,w=d*a,k=l*u,S=l*a;for(let e=0;e<c;e++){let t=x[v++];f[p+e]+=t*A,f[m+e]+=t*w,f[g+e]+=t*k,f[y+e]+=t*S}}}}return n.makeTensorInfo([l,h,u,c],"float32",f)}},wH={kernelName:Fy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;mL(a,"resizeNearestNeighbor");let l=zb.computeStrides(a.shape),[u,h]=o,[c,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(c*u*h*f),y=[s&&u>1?d-1:d,s&&h>1?p-1:p],b=[s&&u>1?u-1:u,s&&h>1?h-1:h],x=y[0]/b[0],v=y[1]/b[1],A=0;for(let w=0;w<c;w++){let e=w*l[0];for(let t=0;t<u;t++){let n=i?x*(t+.5):x*t,r=Math.min(d-1,s?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));let a=e+r*l[1];for(let e=0;e<h;e++){let t=i?v*(e+.5):v*e,n=Math.min(p-1,s?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));let r=a+n*l[2];for(let e=0;e<f;e++)g[A++]=m[r+e]}}}return n.makeTensorInfo([c,u,h,f],a.dtype,g)}},kH={kernelName:Ry,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;mL([s,a],"resizeNearestNeighborGrad");let o=zb.computeStrides(a.shape),l=zb.computeStrides(s.shape),[u,h,c,d]=a.shape,[,p,f]=s.shape,m=new Float32Array(u*h*c*d),g=n.data.get(s.dataId).values,y=[i&&p>1?h-1:h,i&&f>1?c-1:c],b=[i&&p>1?p-1:p,i&&f>1?f-1:f],x=y[0]/b[0],v=y[1]/b[1],A=1/x,w=1/v,k=2*Math.ceil(A)+2,S=2*Math.ceil(w)+2;for(let I=0;I<u;I++){let e=I*o[0];for(let t=0;t<h;t++){let n=e+t*o[1],r=Math.floor(t*A),a=Math.floor(r-k/2);for(let s=0;s<c;s++){let r=n+s*o[2],u=Math.floor(s*w),y=Math.floor(u-S/2);for(let n=0;n<d;n++){let o=0;for(let r=0;r<k;r++){let u=r+a;if(u<0||u>=p)continue;let d=e+u*l[1],m=u*x;if(t===Math.min(h-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){let t=e+y;if(t<0||t>=f)continue;let r=d+t*l[2],a=t*v;s===Math.min(c-1,i?Math.round(a):Math.floor(a))&&(o+=g[r+n])}}m[r+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}},SH={kernelName:Py,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r;mL(a,"reverse");let i=a.shape.length,o=zb.parseAxisParam(s,a.shape);if(0===i)return _L({inputs:{x:a},backend:n});let l=new ux(a.shape,a.dtype),u=n.bufferSync(a);for(let h=0;h<l.size;h++){let e=l.indexToLoc(h),t=e.slice();o.forEach(e=>t[e]=a.shape[e]-1-t[e]),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},IH={kernelName:Sb,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=zb.getTypedArrayFromDType(r.dtype,zb.sizeFromShape(r.shape)),[u,h,c,d]=r.shape,[p,f]=__.getImageCenter(i,h,c),m=Math.sin(a),g=Math.cos(a),y=o.data.get(r.dataId).values;for(let b=0;b<u;b++){let e=b*c*h*d;for(let t=0;t<h;t++){let n=t*(c*d);for(let r=0;r<c;r++){let a=r*d;for(let i=0;i<d;i++){let o=[u,t,r,i],b=o[2],x=o[1],v=(b-p)*g-(x-f)*m,A=(b-p)*m+(x-f)*g;v=Math.round(v+p),A=Math.round(A+f);let w=s;"number"!=typeof s&&(w=3===i?255:s[i]),v>=0&&v<c&&A>=0&&A<h&&(w=y[e+A*(c*d)+v*d+i]),l[e+n+a+i]=w}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},_H=BL($y,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),EH={kernelName:$y,backendName:"cpu",kernelFunc:_H};function TH(e,t,n,r,a,s,i,o,l,u){let h=[r/a,a],c=e.values,d=t.values;if(0===r)return zv(n,t.dtype);let p=zv(h,t.dtype);p.values.fill(l);for(let f=0;f<s;f++){let e=[],s=0;for(let t=0;t<i;t++){let n=c[f*i+t];e.push(n),s+=n*o[t]}if(s<0||s>=r/a)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<a;n++)u?p.values[s*a+n]+=d[f*a+n]:p.values[s*a+n]=0===t.rank?d[0]:d[f*a+n]}return p}var CH={kernelName:Vy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:c}=__.calculateShapes(s,a,i),d=TH(n.bufferSync(a),n.bufferSync(s),i,c,u,l,o,h,0,!0);return n.makeTensorInfo(i,d.dtype,d.values)}},NH={kernelName:By,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t;mL([r,a,s],"select");let i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,h=wx(a.dtype,s.dtype),c=zb.makeZerosTypedArray(zb.sizeFromShape(a.shape),h),d=0,p=0===i||i>1||1===a.shape.length?1:zb.sizeFromShape(a.shape.slice(1));for(let f=0;f<o.length;f++)for(let e=0;e<p;e++)c[d++]=1===o[f]?l[f]:u[f];return n.makeTensorInfo(a.shape,h,c)}},MH=__.SELU_SCALEALPHA,FH=__.SELU_SCALE,RH=BL(Wy,e=>e>=0?FH*e:MH*(Math.exp(e)-1)),DH={kernelName:Wy,backendName:"cpu",kernelFunc:RH},OH=BL(Gy,e=>e<0?-1:e>0?1:0),zH={kernelName:Gy,backendName:"cpu",kernelFunc:OH},PH=BL(Hy,e=>Math.sin(e)),$H={kernelName:Hy,backendName:"cpu",kernelFunc:PH},LH=BL(Uy,e=>Math.sinh(e)),VH={kernelName:Uy,backendName:"cpu",kernelFunc:LH},BH=Math.log(1.1920928955078125e-7)+2,WH=BL(Ky,e=>{let t,n=e>-BH,r=e<BH,a=Math.exp(e);return t=r?a:n?e:Math.log(1+a),t}),jH={kernelName:Ky,backendName:"cpu",kernelFunc:WH},HH={kernelName:Yy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;mL([a],"spaceToBatchND");let o=zb.sizeFromShape(s),l=[[0,0]];l.push(...i);for(let g=1+s.length;g<a.shape.length;++g)l.push([0,0]);let u=pH.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),h=__.getReshaped(u.shape,s,o,!1),c=__.getPermuted(h.length,s.length,!1),d=__.getReshapedPermuted(u.shape,s,o,!1),p=NB({inputs:{x:u},backend:n,attrs:{shape:h}}),f=VV({inputs:{x:p},backend:n,attrs:{perm:c}}),m=NB({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}},UH={kernelName:eb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n        "+s.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        "+r.shape);if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        "+a.shape);if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+i.shape);let o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values[0],[c,d,p,f,m]=YV(o,r.shape,r.dtype,l,a.dtype,u,h);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},GH={kernelName:tb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        "+r.shape);if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        "+a.shape);if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape "+s.shape);let i=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,h,c]=JV(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}},qH={kernelName:nb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n          "+s.shape);let i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,h]=QV(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,u)}},KH={kernelName:rb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n         "+s.shape);let i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,h]=QV(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,u)}},XH={kernelName:ab,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:h,strides:c,outputSize:d}=__.calculateShapes(s,a,o),p=TH(n.bufferSync(a),n.bufferSync(s),o,d,h,u,l,c,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(o,p.dtype,p.values)}},ZH={kernelName:Jy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=zb.parseAxisParam(i,a.shape)[0],l=__.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{let t=[...h];t[o]=e;let r=XV({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},YH=BL(Xy,e=>Math.sqrt(e)),JH={kernelName:Xy,backendName:"cpu",kernelFunc:YH},QH={kernelName:ib,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e,r=t;mL(n,"square");let a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let i=0;i<a.length;++i){let e=a[i];s[i]=e*e}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},eU=BL(wb,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),tU={kernelName:wb,backendName:"cpu",kernelFunc:eU},nU={kernelName:ob,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:c,shrinkAxisMask:d}=r;mL(a,"stridedSlice");let p,{nonStrided:f,$begin:m,$strides:g,size:y,newShape:b,outShape:x}=gA.sliceInfo(a.shape,s,i,o,l,u,h,c,d),v=NB({inputs:{x:a},backend:n,attrs:{shape:b}});if(f){let e=XV({inputs:{x:v},backend:n,attrs:{begin:m,size:y}});p=NB({inputs:{x:e},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(e)}else if(x.some(e=>0===e))p=n.makeTensorInfo(x,a.dtype,[]);else{let e=rB(x,n.bufferSync(v),g,m);p=n.makeTensorInfo(e.shape,e.dtype,e.values)}let A=NB({inputs:{x:p},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(p),A}},rU={kernelName:lb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:c}=t,d=n.data.get(h.dataId).values,p=n.data.get(c.dataId).values,[f,m]=aB(d,p,a,s,i,o,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}},aU={kernelName:ub,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: "+s.shape);if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+i.shape);let o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[u,h,c]=iB(o,l,a),d=h.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},sU={kernelName:hb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let i=oB(n.data.get(s.dataId).values,a);return n.makeTensorInfo(s.shape,"int32",i)}},iU=BL(db,e=>Math.tan(e)),oU={kernelName:db,backendName:"cpu",kernelFunc:iU},lU=BL(pb,e=>Math.tanh(e));function uU(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{let e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return zb.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;return n<0?t<=1?n=0:n+=t*(Math.trunc(-n/(t-1))+1):n>t-1&&(t<=1?n=0:n-=t*Math.trunc(n/(t-1))),zb.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return zb.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function hU(e,t,n,r,a,s,i,o,l,u,h){return 0<=o&&o<t&&0<=l&&l<n?e[i*r+o*a+l*s+u]:h}function cU(e,t,n,r,a,s,i,o,l,u,h){return hU(e,t,n,r,a,s,i,Math.round(o),Math.round(l),u,h)}function dU(e,t,n,r,a,s,i,o,l,u,h){let c=Math.floor(o),d=Math.floor(l),p=c+1,f=d+1;return(p-o)*((f-l)*hU(e,t,n,r,a,s,i,c,d,u,h)+(l-d)*hU(e,t,n,r,a,s,i,c,f,u,h))+(o-c)*((f-l)*hU(e,t,n,r,a,s,i,p,d,u,h)+(l-d)*hU(e,t,n,r,a,s,i,p,f,u,h))}var pU=[DB,AL,zB,$B,PL,LB,VB,BB,WB,jB,UB,qB,XB,JB,eW,aW,sW,iW,oW,RB,lW,uW,hW,ML,UL,dW,SL,pW,yW,vW,AW,xW,kW,SW,wW,_W,TW,CW,NW,MW,FW,DW,OW,zW,PW,$W,VW,LW,rj,jW,yB,HW,XL,JW,JL,ej,tV,oj,uj,hj,aV,pj,fj,mj,gj,yj,uV,dV,EL,bj,mW,vj,wj,Sj,xB,mV,bV,Ij,wV,Ej,Nj,Fj,Oj,zj,Pj,_V,Vj,Bj,Wj,jj,Hj,Lj,Uj,Gj,CV,qj,Zj,eH,RV,OV,nH,aH,iH,$V,oH,hH,dH,pH,gH,wB,jV,yH,CL,xH,SB,_B,MB,vH,AH,wH,kH,SH,IH,EH,qV,CH,NH,DH,TB,zH,$H,VH,ZV,Qj,jH,HH,UH,GH,qH,KH,XH,ZH,JH,QH,nB,tU,nU,rU,aU,sU,cB,WW,oU,{kernelName:pb,backendName:"cpu",kernelFunc:lU},{kernelName:fb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;mL(a,"tile");let i=dB(n.bufferSync(a),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:mb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s}=r;mL(a,"topk");let i=n.data.get(a.dataId).values,[o,l]=pB(i,a.shape,a.dtype,s);return[n.makeTensorInfo(o.shape,o.dtype,o.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},BV,{kernelName:gb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=n,[h,c,d,p]=a.shape,[f,m]=null!=u?u:[c,d],g=[h,f,m,p],y=zb.computeStrides(a.shape),b=y[0],x=y[1],v=y[2],A=zb.getTypedArrayFromDType(a.dtype,zb.sizeFromShape(g));A.fill(l);let w=r.data.get(a.dataId).values,k=r.data.get(s.dataId).values;for(let S=0;S<h;++S){let e=1===s.shape[0]?k:k.subarray(8*S,8*S+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let a,s=e[6]*n+e[7]*t+1;if(0===s)continue;let u=(e[3]*n+e[4]*t+e[5])/s,h=uU((e[0]*n+e[1]*t+e[2])/s,d,o),p=uU(u,c,o);switch(i){case"nearest":a=cU(w,c,d,b,x,v,S,p,h,r,l);break;case"bilinear":a=dU(w,c,d,b,x,v,S,p,h,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got "+i)}A[S*b+t*x+n*v+r]=a}return r.makeTensorInfo(g,a.dtype,A)}return{dataId:r.write(A,g,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:bb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;mL(s,"unique");let i=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:u}=fB(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:xb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:s}=r;s<0&&(s+=a.shape.length);let i=a.shape.length,o=a.shape[s],l=new Array(i-1),u=0;for(let p=0;p<i;p++)p!==s&&(l[u++]=a.shape[p]);let h=new Array(i).fill(0),c=a.shape.slice();c[s]=1;let d=new Array(o);for(let p=0;p<d.length;p++){h[s]=p;let e=XV({inputs:{x:a},backend:n,attrs:{begin:h,size:c}});d[p]=NB({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}},{kernelName:vb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r;mL(a,"unsortedSegmentSum");let o=[],l=[],u=a.shape.length-s.shape.length,h=s;for(let d=0;d<u;++d){let e=QW({inputs:{input:h},backend:n,attrs:{dim:d+1}});h=e,l.push(e)}for(let d=0;d<i;++d){let e=zb.createScalarValue(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=KL({inputs:{a:t,b:h},backend:n}),s=NL({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=FV({inputs:{a:s,b:a},backend:n}),u=BW({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});o.push(u),l.push(t),l.push(r),l.push(s),l.push(i),l.push(u)}let c=cH({inputs:o,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},uH];for(let b6 of pU)Rb(b6);var fU={};I(fU,{assertNotComplex:()=>vG,bindCanvasToFramebuffer:()=>ZU,bindColorTextureToFramebuffer:()=>YU,bindTextureToProgramUniformSampler:()=>XU,bindTextureUnit:()=>UU,bindVertexBufferToProgramAttribute:()=>HU,callAndCheck:()=>_U,canBeRepresented:()=>EU,createFragmentShader:()=>MU,createFramebuffer:()=>jU,createProgram:()=>OU,createStaticIndexBuffer:()=>LU,createStaticVertexBuffer:()=>$U,createTexture:()=>BU,createVertexShader:()=>NU,getBatchDim:()=>rG,getExtensionOrThrow:()=>CU,getFramebufferErrorMessage:()=>eG,getMaxTexturesInShader:()=>dG,getNumChannels:()=>VU,getProgramUniformLocation:()=>KU,getProgramUniformLocationOrThrow:()=>qU,getRowsCols:()=>aG,getShapeAs3D:()=>sG,getTextureShapeFromLogicalShape:()=>iG,getWebGLDisjointQueryTimerVersion:()=>pG,getWebGLErrorMessage:()=>TU,getWebGLMaxTextureSize:()=>uG,hasExtension:()=>fG,isCapableOfRenderingToFloatTexture:()=>gG,isDownloadFloatTextureEnabled:()=>yG,isReshapeFree:()=>lG,isWebGLFenceEnabled:()=>xG,isWebGLVersionEnabled:()=>mG,linkProgram:()=>zU,resetMaxTextureSize:()=>hG,resetMaxTexturesInShader:()=>cG,unbindColorTextureFromFramebuffer:()=>JU,unbindTextureUnit:()=>GU,validateFramebuffer:()=>QU,validateProgram:()=>PU,validateTextureSize:()=>WU});var mU,gU,yU,bU={},xU={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function vU(e,t){bU[e]=t}function AU(e){if(!(e in bU)){let t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete bU[e]},!1),1===e?t.getContext("webgl",xU)||t.getContext("experimental-webgl",xU):t.getContext("webgl2",xU)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;bU[e]=t}let t=bU[e];return t.isContextLost()?(delete bU[e],AU(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),bU[e])}function wU(e,t){return[t,e]}function kU(e){let t=zb.sizeFromShape(e),n=Math.ceil(t/4);return zb.sizeToSquarishShape(n)}function SU(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function IU(e,t){let n,r,a,s,i,o,l,u,h,c,d=e;return 2===wm().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,s=d.RGBA32F,i=d.RED,l=4,u=1,h=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,s=d.RGBA,i=e.RGBA,l=4,u=4,h=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),o=e.RGBA,{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:o,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:c}}function _U(e,t){let n=t();return wm().getBool("DEBUG")&&function(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+TU(e,t))}(e),n}function EU(e){return!!(wm().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function TU(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function CU(e,t){return tG(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function NU(e,t){let n=tG(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(_U(e,()=>e.shaderSource(n,t)),_U(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function MU(e,t){let n=tG(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(_U(e,()=>e.shaderSource(n,t)),_U(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){let n=DU.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);let r=+n[1],a=e.split("\n"),s=a.length.toString().length+2,i=a.map((e,t)=>zb.rightPad((t+1).toString(),s)+e),o=0;for(let c=0;c<i.length;c++)o=Math.max(i[c].length,o);let l=i.slice(0,r-1),u=i.slice(r-1,r),h=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+zb.rightPad(u[0],o),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(mU||(mU={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(gU||(gU={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(yU||(yU={}));var FU,RU,DU=/ERROR: [0-9]+:([0-9]+):/g;function OU(e){return tG(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function zU(e,t){if(_U(e,()=>e.linkProgram(t)),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function PU(e,t){if(_U(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function $U(e,t){let n=tG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return _U(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),_U(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function LU(e,t){let n=tG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return _U(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),_U(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function VU(){return 2===wm().getNumber("WEBGL_VERSION")?1:4}function BU(e){return tG(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function WU(e,t){let n=wm().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}function jU(e){return tG(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function HU(e,t,n,r,a,s,i){let o=e.getAttribLocation(t,n);return-1!==o&&(_U(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),_U(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,s,i)),_U(e,()=>e.enableVertexAttribArray(o)),!0)}function UU(e,t,n){nG(e,n),_U(e,()=>e.activeTexture(e.TEXTURE0+n)),_U(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function GU(e,t){nG(e,t),_U(e,()=>e.activeTexture(e.TEXTURE0+t)),_U(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function qU(e,t,n){return tG(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function KU(e,t,n){return e.getUniformLocation(t,n)}function XU(e,t,n,r){_U(e,()=>UU(e,t,r)),_U(e,()=>e.uniform1i(n,r))}function ZU(e){_U(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),_U(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),_U(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function YU(e,t,n){_U(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),_U(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function JU(e,t){_U(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),_U(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function QU(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+eG(e,t))}function eG(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function tG(e,t,n){let r=_U(e,()=>t());if(null==r)throw new Error(n);return r}function nG(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)}function rG(e,t=2){return zb.sizeFromShape(e.slice(0,e.length-t))}function aG(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function sG(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[rG(e),...aG(e)]),t}function iG(e,t=!1){let n=wm().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n*=2,1===(e=e.map((t,n)=>n>=e.length-2?zb.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length&&(e=zb.squeezeShape(e).newShape);let r=zb.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){let t=rG(e),n=2,a=2;return e.length&&([n,a]=aG(e)),r=t*(n/2)*(a/2),zb.sizeToSquarishShape(r).map(e=>2*e)}return zb.sizeToSquarishShape(r)}function oG(e){return e%2==0}function lG(e,t){if(e=e.slice(-2),t=t.slice(-2),zb.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){let n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||oG(n)&&oG(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&oG(e[0])&&oG(t[0])}function uG(e){if(null==FU){let t=AU(e);FU=t.getParameter(t.MAX_TEXTURE_SIZE)}return FU}function hG(){FU=null}function cG(){RU=null}function dG(e){if(null==RU){let t=AU(e);RU=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,RU)}function pG(e){if(0===e)return 0;let t,n=AU(e);return t=fG(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:fG(n,"EXT_disjoint_timer_query")?1:0,t}function fG(e,t){return null!=e.getExtension(t)}function mG(e){try{if(null!=AU(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function gG(e){if(0===e)return!1;let t=AU(e);if(1===e){if(!fG(t,"OES_texture_float"))return!1}else if(!fG(t,"EXT_color_buffer_float"))return!1;return bG(t)}function yG(e){if(0===e)return!1;let t=AU(e);if(1!==e){if(fG(t,"EXT_color_buffer_float"))return bG(t);let e="EXT_color_buffer_half_float";if(fG(t,e)){let n=t.getExtension(e);return function(e,t){let n=IU(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}return!(!fG(t,"OES_texture_float")||!fG(t,"WEBGL_color_buffer_float"))&&bG(t)}function bG(e){let t=IU(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function xG(e){return 2===e&&null!=AU(e).fenceSync}function vG(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&zb.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the WebGL backend.")})}var AG=wm();function wG(){let e,t,n,r,a,s,i,o,l,u;return 2===wm().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",s="outputColor",i="out vec4 outputColor;",o="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}function kG(e,t,n="index"){let r=zb.computeStrides(t);return r.map((t,a)=>`int ${e[a]} = ${n} / ${t}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`};`).join("")}function SG(e){let t=zb.computeStrides(e).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}AG.registerFlag("HAS_WEBGL",()=>AG.getNumber("WEBGL_VERSION")>0),AG.registerFlag("WEBGL_VERSION",()=>mG(2)?2:mG(1)?1:0),AG.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),AG.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===AG.get("WEBGL_VERSION")),AG.registerFlag("WEBGL_CPU_FORWARD",()=>!0),AG.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),AG.registerFlag("WEBGL_PACK",()=>AG.getBool("HAS_WEBGL")),AG.registerFlag("WEBGL_PACK_NORMALIZATION",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_CLIP",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_PACK_REDUCE",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_LAZILY_UNPACK",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_CONV_IM2COL",()=>AG.getBool("WEBGL_PACK")),AG.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>uG(AG.getNumber("WEBGL_VERSION"))),AG.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dG(AG.getNumber("WEBGL_VERSION"))),AG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=AG.getNumber("WEBGL_VERSION");return 0===e?0:pG(e)}),AG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>AG.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Ox.isMobile()),AG.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>gG(AG.getNumber("WEBGL_VERSION"))),AG.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!AG.getBool("WEBGL_FORCE_F16_TEXTURES")&&AG.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),AG.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>yG(AG.getNumber("WEBGL_VERSION"))),AG.registerFlag("WEBGL_FENCE_API_ENABLED",()=>xG(AG.getNumber("WEBGL_VERSION"))),AG.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>AG.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),AG.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),AG.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Ox.isMobile()&&AG.getBool("IS_CHROME")?1:-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),AG.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);var IG="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",_G={};function EG(e){let t=wG();return NU(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function TG(e){return $U(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function CG(e){return LU(e,new Uint16Array([0,1,2,2,1,3]))}function NG(e,t,n,r,a,s){WU(t,n);let i=BU(e),o=e.TEXTURE_2D;return _U(e,()=>e.bindTexture(o,i)),_U(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),_U(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),_U(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),_U(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),_U(e,()=>e.texImage2D(o,0,r,t,n,0,a,s,null)),_U(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function MG(e){return e.internalFormatFloat}function FG(e,t,n,r){let[a,s]=wU(t,n);return NG(e,a,s,MG(r),r.textureFormatFloat,e.FLOAT)}function RG(e){return e.internalFormatHalfFloat}function DG(e,t,n,r){let[a,s]=wU(t,n);return NG(e,a,s,RG(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function OG(e){return e.downloadTextureFormat}function zG(e,t,n,r){let[a,s]=wU(t,n);return NG(e,a,s,OG(r),e.RGBA,e.UNSIGNED_BYTE)}function PG(e){return e.internalFormatPackedFloat}function $G(e,t,n,r){let[a,s]=SU(t,n);return NG(e,a,s,PG(r),e.RGBA,e.FLOAT)}function LG(e){return e.internalFormatPackedHalfFloat}function VG(e,t,n,r){let[a,s]=SU(t,n);return NG(e,a,s,LG(r),e.RGBA,r.textureTypeHalfFloat)}function BG(e,t,n){return _U(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),HU(e,t,"clipSpacePos",n,3,20,0)&&HU(e,t,"uv",n,2,20,12)}function WG(e,t,n,r,a,s){let i,o,l;_U(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),o=e.FLOAT,l=s.internalFormatPackedFloat),i.set(a),_U(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,i)),_U(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function jG(e,t,n){_U(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?_U(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):_U(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),_U(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function HG(e,t,n,r){let a=e.createBuffer();_U(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));let s=16*t*n;return _U(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ)),_U(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),_U(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}function UG(e,t,n){let r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function GG(e,t,n,r){let[a,s]=wU(t,n),i=new Uint8Array(function(e,t){return 4*e}(t*n));return _U(e,()=>e.readPixels(0,0,a,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}function qG(e,t,n,r,a,s,i,o){let l=e,u=new Float32Array(function(e,t){let[n,r]=SU(e,t);return n*r*4}(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function KG(e,t,n){let r=new Float32Array(t*n*4);return _U(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}I(_G,{bindVertexProgramAttributeStreams:()=>BG,createBufferFromOutputTexture:()=>HG,createFloat16MatrixTexture:()=>DG,createFloat16PackedMatrixTexture:()=>VG,createFloat32MatrixTexture:()=>FG,createIndexBuffer:()=>CG,createPackedMatrixTexture:()=>$G,createUnsignedBytesMatrixTexture:()=>zG,createVertexBuffer:()=>TG,createVertexShader:()=>EG,downloadByteEncodedFloatMatrixFromOutputTexture:()=>GG,downloadFloat32MatrixFromBuffer:()=>UG,downloadMatrixFromPackedOutputTexture:()=>KG,downloadPackedMatrixFromBuffer:()=>qG,getInternalFormatForFloat16MatrixTexture:()=>RG,getInternalFormatForFloat16PackedMatrixTexture:()=>LG,getInternalFormatForFloat32MatrixTexture:()=>MG,getInternalFormatForPackedMatrixTexture:()=>PG,getInternalFormatForUnsignedBytesMatrixTexture:()=>OG,uploadDenseMatrixToTexture:()=>WG,uploadPixelDataToTexture:()=>jG});var XG=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];let t=wm().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,vU(t,e)):this.gl=AU(t);let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(1===wm().getNumber("WEBGL_VERSION")){let e="OES_texture_half_float";if(this.textureFloatExtension=CU(this.gl,"OES_texture_float"),fG(this.gl,e))this.textureHalfFloatExtension=CU(this.gl,e);else if(wm().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),fG(this.gl,r))this.colorBufferHalfFloatExtension=CU(this.gl,r);else if(wm().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",fG(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!fG(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=TG(this.gl),this.indexBuffer=CG(this.gl),this.framebuffer=jU(this.gl),this.textureConfig=IU(this.gl,this.textureHalfFloatExtension)}get debug(){return wm().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;_U(e,()=>e.finish()),_U(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),_U(e,()=>e.deleteFramebuffer(this.framebuffer)),_U(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),_U(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),_U(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),FG(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),DG(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),zG(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),jG(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),WG(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),VG(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),$G(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(JU(this.gl,this.framebuffer),this.outputTexture=null),_U(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>GG(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,s){return qG(this.gl,e,0,0,0,a,s)}downloadFloat32MatrixFromBuffer(e,t){return UG(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=HG(this.gl,t,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(wm().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>KG(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl,n=MU(t,e);null==this.vertexShader&&(this.vertexShader=EG(t));let r=OU(t);return _U(t,()=>t.attachShader(r,this.vertexShader)),_U(t,()=>t.attachShader(r,n)),zU(t,r),this.debug&&PU(t,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=BG(t,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&_U(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&PU(this.gl,this.program),_U(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?qU(this.gl,e,t):KU(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),_U(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),XU(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,a]=SU(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&PU(this.gl,this.program),QU(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;this.debug&&this.debugValidate(),_U(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),_U(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=CU(this.gl,2===wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await zb.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){let t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{let t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){let t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&zb.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),YU(this.gl,e,this.framebuffer),this.debug&&QU(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(YU(this.gl,this.outputTexture,this.framebuffer),this.debug&&QU(this.gl)):JU(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;YU(r,e,this.framebuffer),this.debug&&QU(r),this.outputTexture=e,_U(r,()=>r.viewport(0,0,t,n)),_U(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),_U(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{getBroadcastDims:ZG}=__;function YG(e,t,n,r){let a=[];e.forEach(e=>{let t=zb.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(a.push(`uniform sampler2D ${e.name};`),a.push(`uniform int offset${e.name};`))});let s,i,o=a.join("\n"),l=e.map(e=>function(e,t,n=!1){let r="";return r+=n?QG(e):JG(e),e.shapeInfo.logicalShape.length<=t.logicalShape.length&&(r+=n?function(e,t){let n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),s="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,l=ZG(e.shapeInfo.logicalShape,t.logicalShape),u=iq(o),h=o-i,c=["x","y","z","w","u","v"];n=0===i?"":o<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${c[e+h]} = 0;`).join("\n");let d="";d=o<2&&i>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+c[t+h]).join(", ");let p="return outputValue;",f=1===zb.sizeFromShape(e.shapeInfo.logicalShape),m=1===zb.sizeFromShape(t.logicalShape);if(1!==i||f||m){if(f&&!m)p=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){let e=i-2,t=i-1;l.indexOf(e)>-1&&l.indexOf(t)>-1?p="return vec4(outputValue.x);":l.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${u} coords = getOutputCoords();\n      ${n}\n      vec4 outputValue = get${a}(${d});\n      ${p}\n    }\n  `}(e,t):function(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===i&&null==e.shapeInfo.flatOffset&&zb.arraysEqual(e.shapeInfo.texShape,t.texShape))return`\n      float ${a}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;let o,l=iq(i),u=ZG(e.shapeInfo.logicalShape,t.logicalShape),h=i-s,c=["x","y","z","w","u","v"];o=0===s?"":i<2&&u.length>=1?"coords = 0;":u.map(e=>`coords.${c[e+h]} = 0;`).join("\n");let d="";return d=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+c[t+h]).join(", "),`\n    float ${a}() {\n      ${l} coords = getOutputCoords();\n      ${o}\n      return get${r}(${d});\n    }\n  `}(e,t)),r}(e,t,r)).join("\n"),u=t.texShape,h=wG(),c=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(h),d=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${eq}\n    ${tq}\n    ${nq}\n  `}(h);return t.isPacked?(s=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){let n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,t);case 2:return function(e,t){let n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(zb.arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;let r=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){let n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t);default:return function(e,t){let n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),s=a,i="",o="b, r, c";for(let l=2;l<e.length-1;l++)s*=e[e.length-l-1],i=`\n      int b${l} = index / ${s};\n      index -= b${l} * ${s};\n    `+i,o=`b${l}, `+o;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${i}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${e.length}(${o});\n    }\n  `}(e,t)}}(t.logicalShape,u),i=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(h)):(s=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t);case 2:return function(e,t){return zb.arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){let n=kG(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(e,t);case 4:return function(e,t){let n=kG(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t);case 5:return function(e,t){let n=kG(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){let n=kG(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}(t.logicalShape,u),i=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(h)),r&&(d+=rq),[d,c,i,o,s,l,n].join("\n")}function JG(e){let t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${t};}`;let[r,a]=e.shapeInfo.texShape;if(1===r&&1===a)return`\n      float ${n}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;let[s,i]=e.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${i}, ${aq(t)});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);case 1:return function(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${sq(e)}\n      }\n    `;let r=e.shapeInfo.texShape,a=r[0],s=r[1];if(1===s&&1===a)return`\n      float ${n}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;let i=aq(t);return 1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${a}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===a?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${s}, index + ${i});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);case 2:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&zb.arraysEqual(t,a))return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${a[0]}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;let{newShape:s,keptDims:i}=zb.squeezeShape(t);if(s.length<t.length){let t=["row","col"];return`\n      ${JG(oq(e,s))}\n      float ${r}(int row, int col) {\n        return ${r}(${lq(t,i)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${sq(e)}\n      }\n    `;let o=a[0],l=a[1],u=aq(n);return 1===l?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${u}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${o}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===o?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${u}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${u};\n    vec2 uv = uvFromFlat(${o}, ${l}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}(e);case 3:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],s=t[2],{newShape:i,keptDims:o}=zb.squeezeShape(t);if(i.length<t.length){let t=["row","col","depth"];return`\n        ${JG(oq(e,i))}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${lq(t,o)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${s}, 1)));\n        ${sq(e)}\n      }\n    `;let l=e.shapeInfo.texShape,u=l[0],h=l[1],c=e.shapeInfo.flatOffset;return h===a&&null==c?`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${u}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `:h===s&&null==c?`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${u}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${s} + depth + ${aq(n)};\n        vec2 uv = uvFromFlat(${u}, ${h}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}(e);case 4:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],s=t[2]*a,i=t[1]*s,{newShape:o,keptDims:l}=zb.squeezeShape(t);if(o.length<t.length){let t=["row","col","depth","depth2"];return`\n      ${JG(oq(e,o))}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${lq(t,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${i}, ${s}, ${a}, 1)));\n        ${sq(e)}\n      }\n    `;let u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,c=h[0],d=h[1];return d===i&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${d}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:d===a&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${d}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${s} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${c}, ${d}, index + ${aq(n)});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 5:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],s=t[3]*a,i=t[2]*s,o=t[1]*i,{newShape:l,keptDims:u}=zb.squeezeShape(t);if(l.length<t.length){let t=["row","col","depth","depth2","depth3"];return`\n      ${JG(oq(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${lq(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${i}, ${s}, ${a})) +\n          depth3;\n        ${sq(e)}\n      }\n    `;let h=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,d=c[0],p=c[1];return p===o&&null==h?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:p===a&&null==h?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} + depth * ${s} +\n          depth2 * ${a} + depth3 + ${aq(n)};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:s}=zb.squeezeShape(t);if(a.length<t.length){let t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${JG(oq(e,a))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${lq(t,s)});\n      }\n    `}let i=t[5],o=t[4]*i,l=t[3]*o,u=t[2]*l,h=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${h}, ${u}, ${l}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${sq(e)}\n      }\n    `;let c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];return f===h&&null==c?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${o}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:f===i&&null==c?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${h} + col * ${u} + depth * ${l} +\n          depth2 * ${o} + depth3 * ${i} + depth4 + ${aq(n)};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function QG(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){let t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${wG().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=wG();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${s.texture2D}(${t}, uv);\n    }\n  `}(e);case 2:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=a[0],i=a[1],o=wG();if(null!=a&&zb.arraysEqual(t,a))return`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${s}.0);\n\n        return ${o.texture2D}(${n}, uv);\n      }\n    `;let l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(t[1]/2)}, ${l[0]}, ${l[1]}, row, col);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e);case 3:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){let n=[1,2],a=["b","row","col"];return`\n        ${QG(oq(e,t.slice(1)))}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${lq(a,n)});\n        }\n      `}let i=s[0],o=s[1],l=Math.ceil(t[2]/2);return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${i}, ${o}, ${l*Math.ceil(t[1]/2)}, ${l}, b, row, col);\n      return ${wG().texture2D}(${n}, uv);\n    }\n  `}(e);default:return function(e){let t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],o=i[0],l=i[1],u=Math.ceil(t[n-1]/2),h=u*Math.ceil(t[n-2]/2),c="int b, int row, int col",d=`b * ${h} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)c=`int b${p}, `+c,h*=t[n-p-1],d=`b${p} * ${h} + `+d;return`\n    vec4 ${a}(${c}) {\n      int index = ${d};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${o});\n      return ${wG().texture2D}(${r}, uv);\n    }\n  `}(e)}}var eq="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tq="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",nq="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rq="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function aq(e){return"offset"+e}function sq(e){let t=e.name,n=zb.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function iq(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function oq(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function lq(e,t){return t.map(t=>e[t]).join(", ")}function uq(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{let r=e.logicalShape,a=t[n],s=a.shape;if(!zb.arraysEqual(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&a.isUniform)return;let i=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!zb.arraysEqual(i,o))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${o} must match`)})}var hq={};function cq(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&zb.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the CPU backend.")})}function dq(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function pq(e){return(t,n,r,a,s)=>{let i=__.assertAndGetBroadcastShape(t,n),o=i.length,l=zb.computeStrides(i),u=zb.sizeFromShape(i),h=zb.getTypedArrayFromDType(s,u),c=t.length,d=n.length,p=zb.computeStrides(t),f=zb.computeStrides(n),m=__.getBroadcastDims(t,i),g=__.getBroadcastDims(n,i);if(m.length+g.length===0)for(let y=0;y<h.length;++y)h[y]=e(r[y%r.length],a[y%a.length]);else for(let y=0;y<h.length;++y){let t=zb.indexToLoc(y,o,l),n=t.slice(-c);m.forEach(e=>n[e]=0);let s=zb.locToIndex(n,c,p),i=t.slice(-d);g.forEach(e=>i[e]=0);let u=zb.locToIndex(i,d,f);h[y]=e(r[s],a[u])}return[h,i]}}function fq(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",i)},o}function mq(e,t,n="float32"){if("complex64"===n)return fq({inputs:{real:mq(e,t,"float32"),imag:mq(e,t,"float32")},backend:e});let r=zb.makeZerosTypedArray(zb.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function gq(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function yq(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===a.dtype)return gq({inputs:{x:a},backend:n});let e=mq(n,a.shape,a.dtype),t=yq({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=fq({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){let e=function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}({inputs:{input:a},backend:n}),t=yq({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!zb.hasEncodingLoss(a.dtype,s)){let e=gq({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s){let e=n.data.get(a.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(a.shape,"int32",t)}if("bool"===s){let e=n.data.get(a.dataId).values,t=zb.toTypedArray([0],a.dtype),[r,s]=pq((e,t)=>e!==t?1:0)(a.shape,[],e,t,"bool");return n.makeTensorInfo(s,"bool",r)}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}function bq(e,t,n,r){return null==n?({inputs:n,backend:a})=>{let{a:s,b:i}=n,o=a;cq([s,i],e);let l=o.data.get(s.dataId).values,u=o.data.get(i.dataId).values,h="string"===s.dtype?__.fromUint8ToStringArray(l):l,c="string"===s.dtype?__.fromUint8ToStringArray(u):u,d=r||s.dtype,[p,f]=t(s.shape,i.shape,h,c,d);return o.makeTensorInfo(f,d,p)}:({inputs:e,backend:a})=>{let{a:s,b:i}=e,o=a;if("complex64"===s.dtype||"complex64"===i.dtype){let e=yq({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),t=o.data.get(e.dataId),r=t.complexTensorInfos.imag,a=o.data.get(t.complexTensorInfos.real.dataId).values,l=o.data.get(r.dataId).values,u=yq({inputs:{x:i},backend:o,attrs:{dtype:"complex64"}}),h=o.data.get(u.dataId),c=h.complexTensorInfos.imag,d=o.data.get(h.complexTensorInfos.real.dataId).values,p=o.data.get(c.dataId).values,[f,m,g]=n(s.shape,i.shape,a,l,d,p),y=o.makeTensorInfo(g,"float32",f),b=o.makeTensorInfo(g,"float32",m),x=fq({inputs:{real:y,imag:b},backend:o});return o.disposeIntermediateTensorInfo(e),o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(b),x}{let e=o.data.get(s.dataId).values,n=o.data.get(i.dataId).values,a=r||s.dtype,[l,u]=t(s.shape,i.shape,e,n,a);return o.makeTensorInfo(u,a,l)}}}function xq(e){return(t,n,r,a,s,i)=>{let o=__.assertAndGetBroadcastShape(t,n),l=zb.sizeFromShape(o),u=o.length,h=zb.computeStrides(o),c=zb.getTypedArrayFromDType("float32",l),d=zb.getTypedArrayFromDType("float32",l),p=__.getBroadcastDims(t,o),f=__.getBroadcastDims(n,o),m=__.mergeRealAndImagArrays(r,a),g=__.mergeRealAndImagArrays(s,i),y=t.length,b=zb.computeStrides(t),x=n.length,v=zb.computeStrides(n);if(p.length+f.length===0)for(let A=0;A<c.length;A++){let t=A%m.length,n=A%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);c[A]=r.real,d[A]=r.imag}else for(let A=0;A<c.length;A++){let t=zb.indexToLoc(A,u,h),n=t.slice(-y);p.forEach(e=>n[e]=0);let r=zb.locToIndex(n,y,b),a=t.slice(-x);f.forEach(e=>a[e]=0);let s=zb.locToIndex(a,x,v),i=e(m[2*r],m[2*r+1],g[2*s],g[2*s+1]);c[A]=i.real,d[A]=i.imag}return[c,d,o]}}I(hq,{addImpl:()=>vq,bincountImpl:()=>wq,bincountReduceImpl:()=>kq,ceilImpl:()=>_q,concatImpl:()=>Eq,equalImpl:()=>Tq,expImpl:()=>Cq,expm1Impl:()=>Nq,floorImpl:()=>Mq,gatherNdImpl:()=>Fq,gatherV2Impl:()=>Rq,greaterEqualImpl:()=>Oq,greaterImpl:()=>Dq,lessEqualImpl:()=>Pq,lessImpl:()=>zq,linSpaceImpl:()=>$q,logImpl:()=>Lq,maxImpl:()=>Vq,maximumImpl:()=>Bq,minimumImpl:()=>Wq,multiplyImpl:()=>jq,negImpl:()=>Uq,notEqualImpl:()=>Gq,prodImpl:()=>Kq,rangeImpl:()=>Xq,rsqrtImpl:()=>Zq,simpleAbsImpl:()=>dq,sliceImpl:()=>Yq,sparseFillEmptyRowsImpl:()=>Jq,sparseReshapeImpl:()=>Qq,sparseSegmentReductionImpl:()=>eK,squaredDifferenceImpl:()=>tK,stridedSliceImpl:()=>nK,stringNGramsImpl:()=>rK,stringSplitImpl:()=>sK,stringToHashBucketFastImpl:()=>iK,subImpl:()=>oK,tileImpl:()=>uK,topKImpl:()=>hK,transposeImpl:()=>qq,uniqueImpl:()=>cK});var vq=pq((e,t)=>e+t),Aq=xq((e,t,n,r)=>({real:e+n,imag:t+r}));function wq(e,t,n,r,a){let s=zb.sizeFromShape(r),i=zb.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){let n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(i[n]+=s>0?t[o]:1)}return i}function kq(e,t,n,r=!1){let a=e.shape[0],s=e.shape[1],i=zv([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<s;a++){let s=e.get(o,a);if(s<0)throw new Error("Input x must be non-negative!");s>=n||i.set(r?1:t.size>0?i.get(o,s)+t.get(o,a):i.get(o,s)+1,o,s)}return i}function Sq(e){return(t,n,r)=>{let a=zb.getTypedArrayFromDType(n,t.length);for(let s=0;s<t.length;++s)a[s]=e(t[s],r);return a}}function Iq(e,t,n){return({inputs:r,attrs:a,backend:s})=>{let{x:i}=r;if(cq(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");let o=s,l=o.data.get(i.dataId).values,u=n||i.dtype,h=t(l,u,a);return o.makeTensorInfo(i.shape,u,h)}}bq(Nm,vq,Aq);var _q=Sq(e=>Math.ceil(e));function Eq(e,t,n,r){let a=zb.getArrayFromDType(n,zb.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{let n=zb.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{let s="string"===n?__.fromUint8ToStringArray(e.vals):e.vals,i=0;for(let n=0;n<e.shape[0];++n){let o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=s[i++]}r+=e.shape[1]})}return a}Iq(Xm,_q);var Tq=pq((e,t)=>e===t?1:0),Cq=(bq(Sg,Tq,null,"bool"),Sq(e=>Math.exp(e))),Nq=(Iq(Ig,Cq),Sq(e=>Math.expm1(e))),Mq=(Iq(Eg,Nq),Sq(e=>Math.floor(e)));function Fq(e,t,n,r,a,s,i,o,l){let u=zv([r,s],n);for(let h=0;h<r;h++){let n=[],r=0;for(let t=0;t<a;t++){let s=e[h*a+t];r+=s*i[t],n.push(s)}if(r<0||r>=l/s)throw new Error(`Invalid indices: ${n} does not index into ${o}`);for(let e=0;e<s;e++)u.values[h*s+e]=t.get(...t.indexToLoc(r*s+e))}return u}function Rq(e,t,n){let r=zv(n,e.dtype);for(let a=0;a<r.size;++a){let n=r.indexToLoc(a).slice(),s=t.locToIndex([n[0],n[2]]);n[2]=t.values[s];let i=e.locToIndex(n);r.values[a]=e.values[i]}return r}Iq(Mg,Mq);var Dq=pq((e,t)=>e>t?1:0),Oq=(bq(zg,Dq,null,"bool"),pq((e,t)=>e>=t?1:0)),zq=(bq(Pg,Oq,null,"bool"),pq((e,t)=>e<t?1:0)),Pq=(bq(Ug,zq,null,"bool"),pq((e,t)=>e<=t?1:0));function $q(e,t,n){let r=(t-e)/(n-1),a=zb.makeZerosTypedArray(n,"float32");a[0]=e;for(let s=1;s<a.length;s++)a[s]=a[s-1]+r;return a}bq(Gg,Pq,null,"bool");var Lq=Sq(e=>Math.log(e));function Vq(e,t,n,r){let a=zb.getTypedArrayFromDType(r,zb.sizeFromShape(n));for(let s=0;s<a.length;++s){let n=s*t,r=e[n];for(let a=0;a<t;++a){let t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[s]=r}return a}Iq(Kg,Lq);var Bq=pq((e,t)=>Math.max(e,t)),Wq=(bq(ny,Bq),pq((e,t)=>Math.min(e,t))),jq=(bq(hy,Wq),pq((e,t)=>e*t)),Hq=xq((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}));function Uq(e,t,n){let r=zb.createScalarValue(-1,n);return jq([],t,r,e,n)}bq(fy,jq,Hq);var Gq=pq((e,t)=>e!==t?1:0);function qq(e,t,n,r,a){let s=t.length,i=zb.sizeFromShape(t),o=zb.computeStrides(t),l=zb.computeStrides(a),u=zb.getTypedArrayFromDType(n,zb.sizeFromShape(a));for(let h=0;h<i;++h){let t=zb.indexToLoc(h,s,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[zb.locToIndex(n,s,l)]=e[h]}return u}function Kq(e,t,n,r){let[a,s]=__.computeOutAndReduceShapes(e,r),i=wx(t,"int32"),o=zb.makeZerosTypedArray(zb.sizeFromShape(a),i),l=zb.sizeFromShape(s);for(let u=0;u<o.length;++u){let e=u*l,t=1;for(let r=0;r<l;++r)t*=n[e+r];o[u]=t}return{outVals:o,outShape:a,outDtype:i}}function Xq(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return zb.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-e)/n)),s=zb.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),s[0]=e;for(let i=1;i<s.length;i++)s[i]=s[i-1]+n;return s}bq(gy,Gq,null,"bool");var Zq=Sq(e=>1/Math.sqrt(e));function Yq(e,t,n,r,a){let s=gA.isSliceContinous(r,t,n),i=zb.sizeFromShape(n),o=zb.computeStrides(r);if(s){let n=gA.computeFlatOffset(t,o);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}let l=zv(r,a,"string"===a?__.fromUint8ToStringArray(e):e),u=zv(n,a);for(let h=0;h<u.size;++h){let e=u.indexToLoc(h),n=e.map((e,n)=>e+t[n]);u.set(l.get(...n),...e)}return"string"===a?__.fromStringArrayToUint8(u.values):u.values}function Jq(e,t,n,r,a,s,i){let o=t[0],l=s[0],u=new Array(l),h=new Array(o),c=t[1];if(0===l){if(0!==o)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = "+o);return[zb.getArrayFromDType(n,0),[0,c],zb.getArrayFromDType(a,0),u,h]}let d=!0,p=0,f=new Array(l).fill(0);for(let g=0;g<o;++g){let t=e[g*c];if(t<0)throw new Error(`indices(${g}, 0) is invalid: ${t} < 0`);if(t>=l)throw new Error(`indices(${g}, 0) is invalid: ${t} >= ${l}`);++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){let e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){let t=e,n=r;for(let e=0;e<o;++e)h[e]=e;return[t,[o,c],n,u,h]}{let t=f[l-1],s=zb.getArrayFromDType(n,t*c),d=zb.getArrayFromDType(a,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){let t=e[n*c],a=(0===t?0:f[t-1])+p[t];p[t]++;for(let r=0;r<c;++r)s[a*c+r]=e[n*c+r];d[a]=r[n],h[n]=a}for(let e=0;e<l;++e)if(0===p[e]){let t=0===e?0:f[e-1];s[t*c+0]=e;for(let e=1;e<c;++e)s[t*c+e]=0;d[t]=i}return[s,[t,c],d,u,h]}}function Qq(e,t,n,r,a){let s=zb.sizeFromShape(r),i=t[0],o=a.length,l=[],u=1,h=-1;for(let g=0;g<o;++g){let e=a[g];if(-1===e){if(-1!==h)throw new Error(`only one output dimension may be -1, not both ${h} and ${g}`);h=g,l.push(1)}else{if(e<0)throw new Error(`size ${g} must be non-negative, not ${e}`);u*=e,l.push(e)}}if(-1!==h){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");let e=Math.trunc(s/u);if(u*e!==s)throw new Error(`Input to reshape is a SparseTensor with ${s}\n          dense values, but the requested shape requires a multiple of ${u}. inputShape=${r} outputShape= ${l}`);l[h]=e}let c=zb.sizeFromShape(l);if(c!==s)throw new Error(`Input to reshape is a tensor with ${s} dense values, but the requested shape has ${c}. inputShape=${r} outputShape=${l}`);let d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}let f=[];if(o>0){f[o-1]=1;for(let e=o-2;e>=0;--e)f[e]=f[e+1]*l[e+1]}let m=zb.getArrayFromDType(n,i*o);for(let g=0;g<i;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*p[n];for(let e=0;e<o;++e)m[g*o+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[i,o],l]}function eK(e,t,n,r,a,s=!1,i=0){let o=r.length;if(o!==a.length)throw new Error("segmentIds and indices should have same size.");let l=[t[0],e.length/t[0]],u=l[1],h=o>0?a[o-1]+1:0;if(h<0)throw new Error("segment ids must be >= 0");let c=t.slice();c[0]=h;let d=c.reduce((e,t)=>e*t,1),p=zb.getArrayFromDType(n,d);if(0===o)return h>0&&p.fill(i),[p,c];if(h<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=a[f];for(;;){let t=0;if(m<o){if(t=a[m],y===t){++m;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error(`Segment id ${y} out of range [0, ${h}), possibly because segmentIds input is not sorted.`);y>g&&p.fill(i,g*u,y*u);for(let n=f;n<m;++n){let t=r[n];if(t<0||t>=l[0])throw new Error(`Bad: indices[${n}] == ${r[n]} out of range [0, ${l[0]})`);for(let n=0;n<u;n++)p[y*u+n]+=e[t*u+n]}if(s)for(let e=0;e<u;e++)p[y*u+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>o)break}return g<h&&p.fill(i,g*u,h*u),[p,c]}Iq(Ly,Zq);var tK=pq((e,t)=>{let n=e-t;return n*n});function nK(e,t,n,r){let a=zv(e,t.dtype);for(let s=0;s<a.size;s++){let e=a.indexToLoc(s),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];a.set(t.get(...i),...e)}return a}function rK(e,t,n,r,a,s,i,o){return new class{constructor(e,t,n,r,a,s){this.separator=zb.encodeString(e),this.nGramWidths=t,this.leftPad=zb.encodeString(n),this.rightPad=zb.encodeString(r),this.padWidth=a,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let i=0;i<a;++i){let o=this.getPadWidth(s),l=Math.max(0,o-i),u=Math.max(0,o-(a-(i+1))),h=s-(l+u),c=t+(l>0?0:i-o),d=0;d+=l*this.leftPad.length;for(let t=0;t<h;++t)d+=e[c+t].length;d+=u*this.rightPad.length,d+=(l+u+h-1)*this.separator.length,n[r+i]=new Uint8Array(d);let p=n[r+i],f=0,m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<h-1;++t)m(e[c+t]),m(this.separator);if(h>0){m(e[c+h-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got "+e);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}let a=r-1,s=zb.getArrayFromDType("int32",r);if(0===n||0===r){let e=new Array(n);for(let t=0;t<=a;++t)s[t]=0;return[e,s]}s[0]=0;for(let o=1;o<=a;++o){let e=t[o]-t[o-1],n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),s[o]=s[o-1]+n}let i=new Array(s[a]);for(let o=0;o<a;++o){let n=t[o],r=s[o];if(this.nGramWidths.forEach(a=>{let s=this.getNumNGrams(t[o+1]-t[o],a);this.createNGrams(e,n,i,r,s,a),r+=s}),this.preserveShort&&r===s[o]){let a=t[o+1]-t[o];if(0===a)continue;this.createNGrams(e,n,i,r,1,a+2*this.padWidth)}}return[i,s]}}(n,r,a,s,i,o).compute(e,t)}function aK(e,t,n){if(!e.length)return[];if(0===t.length){let t=new Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.subarray(n,n+1);return t}if(1===t.length){let r=t[0],a=[],s=e.indexOf(r);for(;-1!==s;){let t=e.subarray(0,s);(!n||0!==t.length)&&a.push(t),s=(e=e.subarray(s+1)).indexOf(r)}return(!n||0!==e.length)&&a.push(e),a}let r=[],a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){let t=e.subarray(a,s);(!n||0!==t.length)&&r.push(t),a=s+1}return r}function sK(e,t,n){let r=e.length,a=[],s=0,i=0,o=new Array(r);for(let d=0;d<r;++d){let r=aK(e[d],t,n),l=r.length;o[d]=l,s+=l,i=Math.max(i,l),a.push(...r)}let l=zb.getArrayFromDType("int32",2*s),u=new Array(s),h=[r,i],c=0;for(let d=0;d<r;++d)for(let e=0;e<o[d];++e)l[2*c]=d,l[2*c+1]=e,u[c]=a[c],++c;return[l,u,h]}function iK(e,t){let n=zb.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=zb.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}bq(sb,tK);var oK=pq((e,t)=>e-t),lK=xq((e,t,n,r)=>({real:e-n,imag:t-r}));function uK(e,t){let n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];let r=zv(n,e.dtype);for(let a=0;a<r.values.length;++a){let t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];let s=e.locToIndex(n);r.values[a]=e.values[s]}return r}function hK(e,t,n,r,a){let s=t[t.length-1],[i,o]=[e.length/s,s],l=zb.getTypedArrayFromDType(n,i*r),u=zb.getTypedArrayFromDType("int32",i*r);for(let c=0;c<i;c++){let t=c*o,n=e.subarray(t,t+o),a=[];for(let e=0;e<n.length;e++)a.push({value:n[e],index:e});a.sort((e,t)=>t.value-e.value);let s=c*r,i=l.subarray(s,s+r),h=u.subarray(s,s+r);for(let e=0;e<r;e++)i[e]=a[e].value,h[e]=a[e].index}let h=t.slice();return h[h.length-1]=r,[zv(h,n,l),zv(h,"int32",u)]}function cK(e,t,n,r){let a=zb.parseAxisParam(t,n)[0],s=[1,n[0],1];for(let f=0;f<a;f++)s[0]*=n[f];s[1]=n[a];for(let f=a+1;f<n.length;f++)s[2]*=n[f];let i={},o=new Int32Array(n[a]),l=new ux(s,r,e),u=[],h=1===s[0]&&1===s[2];for(let f=0;f<n[a];f++){let t;if(h)t=e[f].toString();else{let e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(l.get(t,f,n));t=e.join(",")}if(void 0!==i[t])o[f]=i[t];else{let e=Object.keys(i).length;i[t]=e,o[f]=e,u.push(f)}}let c=s.slice();c[1]=Object.keys(i).length;let d=new ux(c,r);u.forEach((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)d.set(l.get(n,e,r),n,t,r)});let p=n.slice();return p[a]=c[1],{outputValues:d.values,outputShape:p,indices:o}}bq(cb,oK,lK);var{addImpl:dK,bincountImpl:pK,bincountReduceImpl:fK,ceilImpl:mK,concatImpl:gK,equalImpl:yK,expImpl:bK,expm1Impl:xK,floorImpl:vK,gatherNdImpl:AK,gatherV2Impl:wK,greaterImpl:kK,greaterEqualImpl:SK,lessImpl:IK,lessEqualImpl:_K,linSpaceImpl:EK,logImpl:TK,maxImpl:CK,maximumImpl:NK,minimumImpl:MK,multiplyImpl:FK,negImpl:RK,notEqualImpl:DK,prodImpl:OK,rangeImpl:zK,rsqrtImpl:PK,simpleAbsImpl:$K,sliceImpl:LK,sparseFillEmptyRowsImpl:VK,sparseReshapeImpl:BK,sparseSegmentReductionImpl:WK,stridedSliceImpl:jK,stringNGramsImpl:HK,stringSplitImpl:UK,stringToHashBucketFastImpl:GK,subImpl:qK,tileImpl:KK,topKImpl:XK,transposeImpl:ZK,uniqueImpl:YK}=hq;function JK(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function QK(e,t){return 1===t?[e]:JK(e,t)}var eX=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2==1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${function(e){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${kG(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}(t)}\n      ${SG(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${e[1]};\n        int cols = ${e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}};function tX(e,t,n,r,a){let s,i=function(e,t){switch(e){case yU.PACKED_2X2_FLOAT32:return PG(t);case yU.PACKED_2X2_FLOAT16:return LG(t);case yU.UNPACKED_FLOAT32:return MG(t);case yU.UNPACKED_FLOAT16:return RG(t);case yU.PACKED_4X1_UNSIGNED_BYTE:return OG(t);default:throw new Error("Unknown physical texture type "+e)}}(t,r);if(a){let[t,n]=SU(e[0],e[1]);s=t*n}else{let[t,n]=wU(e[0],e[1]);s=t*n}return s*function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;throw new Error("Unknown internal format "+t)}(n,i)}function nX(e,t){if(e===gU.UPLOAD)return yU.PACKED_2X2_FLOAT32;if(e===gU.RENDER||null==e)return function(e){return wm().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?yU.PACKED_2X2_FLOAT32:yU.UNPACKED_FLOAT32:e?yU.PACKED_2X2_FLOAT16:yU.UNPACKED_FLOAT16}(t);if(e===gU.DOWNLOAD||e===gU.PIXELS)return yU.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function rX(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var aX=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},sX="return abs(x);",iX="return x;",oX=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},lX=mE.whereImpl,uX={},hX=wm().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),cX=class extends If{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!wm().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){let e=AU(wm().getNumber("WEBGL_VERSION"));this.binaryCache=function(e){return e in uX||(uX[e]={}),uX[e]}(wm().getNumber("WEBGL_VERSION")),this.gpgpu=new XG(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){let r=nX(t,n),a=rX(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);let s,i=tX(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();let e=this.freeTextures[a].shift();return this.usedTextures[a].push(e),e}return r===yU.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===yU.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===yU.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===yU.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===yU.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;let a=nX(n,r),s=rX(t,a,r);s in this.freeTextures||(this.freeTextures[s]=[]);let i=tX(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=wm().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;let l=this.usedTextures[s],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);let e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(let e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}(this.gpgpu),this.numMBBeforeWarning=null==wm().global.screen?1024:wm().global.screen.height*wm().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Sf(this,PA())}nextDataId(){return cX.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((wm().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||wm().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:gU.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,a){if(wm().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:gU.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:s,shape:i,isPacked:o}=t;if(null!=s){let t;t=o?new oX(i,iX):new aX(i,iX);let n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;let l,u,h=null!=this.activeTimers;if(h&&(l=zb.now()),"complex64"===r){let e=this.readSync(a.real.dataId),t=this.readSync(a.imag.dataId);u=__.mergeRealAndImagArrays(e,t)}else u=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=zb.now()-l),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){let t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}let t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:s,complexTensorInfos:i,isPacked:o}=t;if(null!=a){let t;t=o?new oX(r,iX):new aX(r,iX);let n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:s}],s),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(!wm().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===wm().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,h=null;if("complex64"!==s&&wm().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);let t=this.texData.get(l.dataId);h=this.gpgpu.createBufferFromTexture(t.texture,...kU(r))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){let e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);u=__.mergeRealAndImagArrays(e[0],e[1])}else if(null==h)u=this.getValuesFromTexture(e);else{let e=zb.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(h,e)}null!=l&&this.disposeIntermediateTensorInfo(l);let c=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(c)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&PA().removeDataId(e,this),this.pendingDeletes--),c}bufferSync(e){let t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(e=>zb.decodeString(e))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return zv(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){let n=e[t];if(!EU(n))throw wm().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${n} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=zb.sizeFromShape(t);if(wm().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let n=this.decode(e),r=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...kU(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),s}let s=wm().getBool("WEBGL_PACK")&&!0===r,i=s?sG(t):t,o=s?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gU.DOWNLOAD;let t=wG();this.outputShape=e,this.userCode=`\n      ${IG}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}(i):new class{constructor(e){this.variableNames=["A"],this.outTexUsage=gU.DOWNLOAD;let t=wG();this.outputShape=e,this.userCode=`\n      ${IG}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}(i),l=this.runWebGLProgram(o,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),h}timerAvailable(){return wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){let t=this.activeTimers,n=[],r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let a=zb.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),s=zb.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);let i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let e=await Promise.all(a);i.kernelMs=zb.sum(e),i.getExtraProfileInfo=()=>e.map((e,t)=>({name:s[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zb.now(),endMs:null}}endTimer(e){return wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=zb.now(),e)}async getQueryTime(e){return wm().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));let u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=hX){return wm().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&zb.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){__.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return lX(e.shape,t)}packedUnaryOp(e,t,n){let r=new oX(e.shape,t),a=this.compileAndRun(r,[e],n);return PA().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){let t=$K(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(wm().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,sX,e.dtype);let t=new aX(e.shape,sX),n=this.compileAndRun(t,[e]);return PA().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&zb.isString(n[0])){let a=n.map(e=>zb.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){let{dataId:r}=this.makeTensorInfo(e,t,n);return PA().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){let t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;let t=e.length,n=QK("rc",t),r=iq(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),i=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;let t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let n=QK("rc",t),r=iq(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];let r="";for(let a=e-2;a<e;a++)r+=`${n[a]} >= ${t[a]}`,a<e-1&&(r+="||");return r}(t,e,n),s=function(e,t,n,r){if(1===e)return"";let a=r.slice(-2);return`\n    int r = ${a[0]};\n    int c = ${a[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${t};\n    bool rEdge = rp1 >= ${n};\n  `}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){let n=e.length,r=function(e,t){let n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=`${0===r?"r":"rp1"}, ${0===a?"c":"cp1"}`;for(let n=2;n<e;n++)s=t[t.length-1-n]+","+s;n.push(s)}return n}(n,t);return 1===n?`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(e,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${a}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){let n=[rG(e.shape),...aG(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[rG(t),...aG(t)],s=new eX(a,n),i=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){let t,n=this.texData.get(e),{isPacked:r,shape:a,dtype:s}=n,i=sG(a);return t=r?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=mU.DENSE;let t=kU(e),n=wG();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${kG(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}(i):new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=mU.DENSE;let t=kU(e),n=wG();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${kG(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}(i),{dtype:s,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:s,dataId:e}],s,null,!0).dataId}}runWebGLProgram(e,t,n,r,a=!1){let s=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(s.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===mU.DENSE){let t=kU(e.outputShape);i.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===zb.sizeFromShape(s.shape))return i.values=zb.getTypedArrayFromDType(s.dtype,0),s;let o=[],l=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&zb.sizeFromShape(t.shape)<=wm().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),o.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!lG(n.shape,t.shape)){let e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),o.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);let u,h={shape:s.shape,texData:i,isUniform:!1},c=function(e,t,n){let r="";t.concat(n).forEach(e=>{r+=`${e.shape}_${e.isUniform?"uniform":e.texData.texShape}_${null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0}`});let a=e.constructor.name;return a+="_"+r+"_"+e.userCode,a}(e,l,h),d=this.getAndSaveBinary(c,()=>function(e,t,n,r){let a=t.userCode,s=n.map((e,n)=>{let r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=s.map(e=>e.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=YG(s,o,a,t.packedInputs),u=e.createProgram(l),h=null,c=e.getUniformLocation(u,"NAN",!1);1===wm().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(u,"INFINITY",!1));let d={};for(let p=0;p<t.variableNames.length;p++){let n=t.variableNames[p],r=!1;d[n]=e.getUniformLocation(u,n,r),d["offset"+n]=e.getUniformLocation(u,"offset"+n,r)}return{program:t,source:l,webGLProgram:u,uniformLocations:d,inShapeInfos:i,outShapeInfo:o,infLoc:h,nanLoc:c}}(this.gpgpu,e,l,h)),p=null!=this.activeTimers;p&&(u=this.startTimer()),function(e,t,n,r,a){uq(t.inShapeInfos,n),uq([t.outShapeInfo],[r]);let s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s,i[0],i[1]):e.setOutputMatrixTexture(s,i[0],i[1]),e.setProgram(t.webGLProgram),1===wm().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((n,r)=>{let a=t.program.variableNames[r],s=t.uniformLocations[a],i=t.uniformLocations["offset"+a];if(null!=s){if(n.isUniform){if(zb.sizeFromShape(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}return}null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,s,r)}}),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,d,l,h,r),o.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)}));let f=wm().get("WEBGL_FLUSH_THRESHOLD");if(f>0){let e=zb.now();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!wm().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===a){let e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r,a=!1){return this.runWebGLProgram(e,t,n=n||t[0].dtype,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(wm().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=LA(()=>{if(!wm().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=wm().getBool("DEBUG");wm().set("DEBUG",!1);let t=this.abs(RS(1e-8)).dataSync()[0];if(wm().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:s,usage:i,isPacked:o}=t;if(null!=s)return;let l,u=null!=this.activeTimers;u&&(l=zb.now());let h=t.texShape;if(null==h&&(h=iG(n,o),t.texShape=h),null!=a){let e,s=sG(n),i=h[1],c=h[0],d=a instanceof Uint8Array;o?([i,c]=SU(h[0],h[1]),e=new class{constructor(e,t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let r=wG(),[a,s]=t;this.outputShape=e;let i="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let l=0;l<=1;l++)for(let t=0;t<=1;t++){let n=2*l+t;i+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${e[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${l} < ${e[1]}) {\n              localCoords[1] += ${l};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${s};\n              c = imod(flatIndex, ${s});\n              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${a}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${SG(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${i}\n\n        ${r.output} = ${o};\n      }\n    `}}(s,[c,i],d)):e=new class{constructor(e,t,n=!1){this.variableNames=["A"];let r=wG(),[a,s]=t;this.outputShape=e;let i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`\n      ${SG(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${s};\n        int c = imod(flatIndex, ${s});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${a}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}(s,[c,i],d);let p=this.makeTensorInfo([c,i],r);this.texData.get(p.dataId).usage=d?gU.PIXELS:gU.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),i,c,a);let f=this.runWebGLProgram(e,[p],r,null,!0),m=this.texData.get(f.dataId);t.texture=m.texture,t.texShape=m.texShape,t.isPacked=m.isPacked,t.usage=m.usage,this.disposeIntermediateTensorInfo(p),this.texData.delete(f.dataId),t.values=null,u&&(this.uploadWaitMs+=zb.now()-l)}else{let e=this.acquireTexture(h,i,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){let n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){let e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*zb.bytesPerElement(t)}},dX=cX;dX.nextDataId=0;var pX="3.7.0";function fX(){wm().set("WEBGL_FORCE_F16_TEXTURES",!0)}Ox.isBrowser()&&WA("webgl",()=>new dX,2);var mX={forceHalfFloat:fX},gX=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=__.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}},yX=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=__.assertAndGetBroadcastShape(t,n);let a=this.outputShape.length,s="";if(r)if(0===a||1===zb.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s=`\n          ${iq(a)} coords = getOutputCoords();\n        `,1===a)s+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{let e=QK("coords",a);s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= ${this.outputShape[a-2]};\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= ${this.outputShape[a-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${s}\n\n        setOutput(result);\n      }\n    `}};function bX(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var xX={kernelName:$g,backendName:"webgl",kernelFunc:bX};function vX(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),o=bX({inputs:{x:r},backend:n}),l=bX({inputs:{x:a},backend:n});return i.complexTensorInfos={real:o,imag:l},s}var AX={kernelName:Ym,backendName:"webgl",kernelFunc:vX},wX="return (a < 0.) ? b * a : a;",kX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",SX={kernelName:Hg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r,i=n.makeTensorInfo([],"float32",zb.createScalarValue(s,"float32")),o=wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yX(kX,a.shape,i.shape):new gX(wX,a.shape,i.shape),l=n.runWebGLProgram(o,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),l}},IX="return (a < 0.) ? b * a : a;",_X="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",EX={kernelName:Iy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yX(_X,r.shape,a.shape):new gX(IX,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}};function TX({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:s})=>{let i,{x:o}=a,l=s,u=r||o.dtype;if(l.shouldExecuteOnCPU([o])&&null!=n){let e=l.texData.get(o.dataId),t=n(e.values,u);return l.makeTensorInfo(o.shape,u,t)}return i=wm().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new oX(o.shape,t):new aX(o.shape,e),l.runWebGLProgram(i,[o],u)}}function CX({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:s}){return({inputs:i,backend:o})=>{let{a:l,b:u}=i,h=o;if(r&&"complex64"===l.dtype){let t=h.texData.get(l.dataId),n=h.texData.get(u.dataId),[r,a]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{let[n,r]=t,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},s={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new gX(e,l.shape,u.shape);return h.runWebGLProgram(i,[a,s],wx(n.dtype,r.dtype))}),s=vX({inputs:{real:r,imag:a},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(a),s}let c,d=s||wx(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([l,u]))&&null!=a){let e=h.texData.get(l.dataId).values,t=h.texData.get(u.dataId).values,n="string"===l.dtype?__.fromUint8ToStringArray(e):e,r="string"===l.dtype?__.fromUint8ToStringArray(t):t,[s,i]=a(l.shape,u.shape,n,r,d),o=h.makeTensorInfo(i,d);return h.texData.get(o.dataId).values=s,o}return c=wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new yX(t,l.shape,u.shape,n):new gX(e,l.shape,u.shape),h.runWebGLProgram(c,[l,u],d)}}function NX(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?_X:IX;if("leakyrelu"===e)return t?kX:wX;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var MX=class{constructor(e,t,n,r=!1,a=!1,s=!1,i=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;let u=Math.ceil((r?e[1]:e[2])/2),h=r?"i * 2, rc.y":"rc.y, i * 2",c=a?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",m="";i&&(f=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,m="result = activation(result);");let g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",b="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(b=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${f}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          int batchA = ${y};\n          int batchB = ${b};\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${c});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${p[0]});\n          result += (${d[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}},FX=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=__.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}},RX="return a * b;";function DX(e){let t,{inputs:n,backend:r}=e,{a:a,b:s}=n,i=__.upcastType(a.dtype,s.dtype);if("complex64"===a.dtype){let e=r.texData.get(a.dataId),t=r.texData.get(s.dataId),n=new FX("return areal * breal - aimag * bimag;",a.shape,s.shape),i=new FX("return areal * bimag + aimag * breal;",a.shape,s.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:s.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:s.shape}],l=r.runWebGLProgram(n,o,"float32"),u=r.runWebGLProgram(i,o,"float32"),h=vX({inputs:{real:l,imag:u},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),h}if(r.shouldExecuteOnCPU([a,s])){let e=r.texData.get(a.dataId),t=r.texData.get(s.dataId),[n,o]=FK(a.shape,s.shape,e.values,t.values,i),l=r.makeTensorInfo(o,i);return r.texData.get(l.dataId).values=n,l}return t=wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yX(RX,a.shape,s.shape):new gX(RX,a.shape,s.shape),r.runWebGLProgram(t,[a,s],i)}var OX={kernelName:fy,backendName:"webgl",kernelFunc:DX};function zX(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=n,o=zb.sizeFromShape(a.shape),l=zb.inferFromImplicitShape(s,o),u=zb.sizeFromShape(l);zb.assert(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let h=i.texData.get(a.dataId);return!h.isPacked||lG(a.shape,l)||null!==h.texture&&lG(h.shape,l)?(i.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){let r=[rG(e.shape),...aG(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[rG(t),...aG(t)],i=new eX(s,r),o=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}(a,l,i)}var PX={kernelName:My,backendName:"webgl",kernelFunc:zX},$X=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let i=4*Math.floor(n/4),o=n%4,l="sumValue += dot(values, ones);";if(null!=t){let e=1/t;l=`sumValue += dot(values * ${zb.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";a%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}},LX=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");let u=4*Math.floor(n/4),h=n%4,c=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(i="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(i="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";a%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${l});\n      }\n    `}};function VX(e,t,n,r){let a=function(e){let t=[];for(;0===t.length||1!==t[t.length-1].outSize;){let n=t.length?t[t.length-1].outSize:e[1],r=__.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),s=e;for(let i=0;i<a.length;i++){let o,l,{inSize:u,windowSize:h,outSize:c}=a[i];o="mean"===n?0===i?new $X({windowSize:h,inSize:u,batchSize:e.shape[0],outSize:c},u):new $X({windowSize:h,inSize:u,batchSize:e.shape[0],outSize:c}):new LX({windowSize:h,inSize:u,batchSize:e.shape[0],outSize:c},n),l=s,s=r.runWebGLProgram(o,[s],t),l.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(l)}return s}function BX(e,t,n){let r=wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=iq(this.rank),a=JK("rc",this.rank),s=new Array(this.rank);for(let u=0;u<t.length;u++)s[t[u]]=a[u];let i=`vec2(${s.slice(-2).join()})`,o=`++${a[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${o}) {\n        result[1] = ${l};\n      }\n      --${a[this.rank-1]};\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${o}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}(e.shape,t):new class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[t[s]];this.outputShape=n,this.rank=n.length;let r=iq(this.rank),a=function(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function WX(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;return function(e,t,n,r){let a=e.shape.length,s=zb.parseAxisParam(t,e.shape),i=s,o=__.getAxesPermutation(i,a),l=null!=o,u=e;l&&(u=BX(e,o,r),i=__.getInnerMostAxes(i.length,a)),__.assertAxesAreInnerMostDims("sum",i,a);let[h,c]=__.computeOutAndReduceShapes(u.shape,i),d=h;n&&(d=__.expandShapeToKeepDim(h,s));let p=zb.sizeFromShape(c),f=zX({inputs:{x:u},attrs:{shape:[zb.sizeFromShape(e.shape)/p,p]},backend:r}),m=VX(f,kx(e.dtype),"sum",r),g=zX({inputs:{x:m},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),l&&r.disposeIntermediateTensorInfo(u),g}(a,s,i,n)}var jX={kernelName:Zy,backendName:"webgl",kernelFunc:WX};function HX(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{perm:i}=a,o=r,l=new Array(s.shape.length);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];if(o.shouldExecuteOnCPU([s])){let e=o.texData.get(s.dataId).values,n=ZK(e,s.shape,s.dtype,i,l);t=o.makeTensorInfo(l,s.dtype),o.texData.get(t.dataId).values=n}else t=BX(s,i,o);return t}var UX={kernelName:yb,backendName:"webgl",kernelFunc:HX};function GX({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){let u=e.shape.length,h=t.shape.length,c=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[h-1]:t.shape[h-2],p=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[h-2]:t.shape[h-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=zb.sizeFromShape(m),b=zb.sizeFromShape(g);zb.assert(u>=2&&h>=2&&(y===b||1===y||1===b),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${g}).`);let x=(y>b?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([p,f]);zb.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let v,A=n?[y,c,p]:[y,p,c],w=r?[b,f,d]:[b,d,f],k=zX({inputs:{x:e},backend:a,attrs:{shape:A}}),S=zX({inputs:{x:t},backend:a,attrs:{shape:w}}),I=[k,S],_=Math.max(y,b),E=n?k.shape[1]:k.shape[2],T=null!=s,C=null!=i,N="leakyrelu"===l,M=null!=l?NX(l,!0):null;if((1===p||1===f)&&E>1e3&&!1===(T||C||N||null!=M)){let e=k,t=S;n&&(e=HX({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),I.push(e)),r&&(t=HX({inputs:{x:S},backend:a,attrs:{perm:[0,2,1]}}),I.push(t));let s=1===f,i=e;1!==f&&(i=zX({inputs:{x:e},backend:a,attrs:{shape:[_,E,1]}}),I.push(i));let o=1===f?2:1,l=t;s&&(l=zX({inputs:{x:t},backend:a,attrs:{shape:[_,1,E]}}),I.push(l));let u=DX({inputs:{a:i,b:l},backend:a});v=WX({inputs:{x:u},backend:a,attrs:{axis:o,keepDims:!0}}),I.push(u)}else{let l=wx(e.dtype,t.dtype),u=new MX(A,w,[_,p,f],n,r,T,M,C,N),h=[k,S];if(null!=s&&h.push(s),C&&h.push(i),N){let e=a.makeTensorInfo([],"float32",zb.createScalarValue(o,"float32"));h.push(e),I.push(e)}v=a.runWebGLProgram(u,h,l)}let F=zX({inputs:{x:v},backend:a,attrs:{shape:x}});I.push(v);for(let R of I)a.disposeIntermediateTensorInfo(R);return F}var qX={kernelName:Ib,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:c}=r;return GX({a:a,b:s,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:c,activation:h})}},KX="return abs(x);",XX={kernelName:Em,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){let e=r.texData.get(a.dataId),t=$K(e.values);return r.makeTensorInfo(a.shape,a.dtype,t)}return t=wm().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oX(a.shape,KX):new aX(a.shape,KX),r.runWebGLProgram(t,[a],a.dtype)}},ZX=TX({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),YX={kernelName:Tm,backendName:"webgl",kernelFunc:ZX},JX=TX({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),QX={kernelName:Cm,backendName:"webgl",kernelFunc:JX},eZ="return a + b;",tZ=CX({opSnippet:eZ,packedOpSnippet:eZ,supportsComplex:!0,cpuKernelImpl:dK}),nZ={kernelName:Nm,backendName:"webgl",kernelFunc:tZ},rZ={kernelName:Mm,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,a=n;if(1===a.length)return bX({inputs:{x:a[0]},backend:r});if(a.length>wm().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),s=e({inputs:a.slice(t),backend:r});return e({inputs:[n,s],backend:r})}let s=a.map(e=>e.dtype).reduce((e,t)=>wx(e,t)),i=a.map(e=>e.shape),o=wm().getBool("WEBGL_PACK")?new class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);let n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}(a[0].shape,i):new class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);let n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}(a[0].shape,i);return r.runWebGLProgram(o,a,s)}},aZ={kernelName:Fm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=zb.parseAxisParam(s,a.shape),u=l,h=__.getAxesPermutation(u,o),c=a;null!=h&&(c=HX({inputs:{x:a},backend:n,attrs:{perm:h}}),u=__.getInnerMostAxes(u.length,o)),__.assertAxesAreInnerMostDims("all",u,o);let d,[p,f]=__.computeOutAndReduceShapes(c.shape,u),m=zX({inputs:{x:c},backend:n,attrs:{shape:[-1,zb.sizeFromShape(f)]}}),g=VX(m,m.dtype,"all",n);return d=zX(i?{inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(p,l)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(c),d}},sZ={kernelName:Rm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=zb.parseAxisParam(s,a.shape),u=l,h=__.getAxesPermutation(u,o),c=a;null!=h&&(c=HX({inputs:{x:a},backend:n,attrs:{perm:h}}),u=__.getInnerMostAxes(u.length,o)),__.assertAxesAreInnerMostDims("any",u,o);let d,[p,f]=__.computeOutAndReduceShapes(c.shape,u),m=zX({inputs:{x:c},backend:n,attrs:{shape:[-1,zb.sizeFromShape(f)]}}),g=VX(m,m.dtype,"any",n);return d=zX(i?{inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(p,l)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(c),d}};function iZ(e,t,n,r=null){let a=t.shape[0],s=t.shape[1];null!=r&&(a=r.shape[0],s=r.shape[1]);let i=__.computeOptimalWindowSize(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},l=new class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:a,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===t?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}(o,n,null==r),u=[t];null!=r&&u.push(r);let h=e.runWebGLProgram(l,u,"int32");if(1===h.shape[1])return h;let c=iZ(e,t,n,h);return e.disposeIntermediateTensorInfo(h),c}function oZ(e,t,n,r=null){let a=null!=r?r.shape:t.shape,s=__.computeOptimalWindowSize(a[a.length-1]),i=new class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,zb.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let a=Math.ceil(e[e.length-1]/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");let s,i,o=this.outputShape,l=o.length,u=iq(l),h=QK("coords",l);if(1===a){i=l+1;let e=iq(i);s=`\n        ${e} sourceLocR = ${e}(${h.join()}, 0);\n        ++${h[l-1]};\n        ${e} sourceLocG = ${e}(${h.join()}, 0);\n        ++${h[l-2]};\n        ${e} sourceLocA = ${e}(${h.join()}, 0);\n        --${h[l-1]};\n        ${e} sourceLocB = ${e}(${h.join()}, 0);\n        --${h[l-2]};`}else i=l,s=`\n        ${u} sourceLocR = coords;\n        ++${h[l-1]};\n        ${u} sourceLocG = coords;\n        ++${h[l-2]};\n        ${u} sourceLocA = coords;\n        --${h[l-1]};\n        ${u} sourceLocB = coords;\n        --${h[l-2]};`;let c=["x","y","z","w","u","v"].slice(0,i),d="."+c[i-1],p=c.map(e=>"int "+e),f=QK("sourceLocR",i-1).concat("inIdx.r"),m=QK("sourceLocG",i-1).concat("inIdx.g"),g=QK("sourceLocB",i-1).concat("inIdx.b"),y=QK("sourceLocA",i-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,v=`vec4(\n            getAChannel(${f.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${g.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,A=r?"":`\n      float getBestIndicesAChannel(${p.join()}) {\n        return getChannel(getBestIndicesA(${c.join()}),\n                                          vec2(${c.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${p.join()}) {\n        return getChannel(getA(${c.join()}),\n                               vec2(${c.slice(-2).join()}));\n      }\n      ${A}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${h[l-1]} < ${o[l-1]-1};\n        bool hasNextRow = ${h[l-2]} < ${o[l-2]-1};\n        ${s}\n        ivec4 srcIdx = ivec4(sourceLocR${d}, sourceLocG${d},\n          sourceLocB${d}, sourceLocA${d}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${v};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${v};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}(a,s,n,null==r),o=e.runWebGLProgram(i,null==r?[t]:[t,r],"int32");if(o.shape.length===t.shape.length){let r=oZ(e,t,n,o);return e.disposeIntermediateTensorInfo(o),r}return o}function lZ(e,t,n,r){let a=[n];if(__.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!wm().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let n=[],[s,i]=__.computeOutAndReduceShapes(t.shape,a),o=zb.sizeFromShape(i),l=zX({inputs:{x:t},backend:e,attrs:{shape:[-1,o]}});n.push(l);let u=iZ(e,l,r);n.push(u);let h=zX({inputs:{x:u},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return oZ(e,t,r)}var uZ={kernelName:Dm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r,i=zb.parseAxisParam(s,a.shape),o=__.getAxesPermutation(i,a.shape.length),l=a,u=[];null!=o&&(l=HX({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=__.getInnerMostAxes(i.length,l.shape.length)),__.assertAxesAreInnerMostDims("argMax",[i[0]],l.shape.length);let h=lZ(n,l,i[0],"max");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},hZ={kernelName:Om,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r,i=zb.parseAxisParam(s,a.shape),o=__.getAxesPermutation(i,a.shape.length),l=a,u=[];null!=o&&(l=HX({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=__.getInnerMostAxes(i.length,l.shape.length)),__.assertAxesAreInnerMostDims("argMin",[i[0]],l.shape.length);let h=lZ(n,l,i[0],"min");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},cZ=TX({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),dZ={kernelName:zm,backendName:"webgl",kernelFunc:cZ},pZ=TX({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),fZ={kernelName:Pm,backendName:"webgl",kernelFunc:pZ},mZ=TX({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),gZ={kernelName:$m,backendName:"webgl",kernelFunc:mZ},yZ=CX({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),bZ={kernelName:Vm,backendName:"webgl",kernelFunc:yZ},xZ=TX({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),vZ={kernelName:Lm,backendName:"webgl",kernelFunc:xZ},AZ=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let s=e.filterWidth,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;let f="avg"===t,m="0.0";if(f||(m="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${o});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${c};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?a?`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`:`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`:`wR * ${c} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let g=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(g="avgValue / count");let y=4*Math.floor(s/4),b=s%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${m};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${m});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${g});\n      }\n    `}},wZ=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;let b="avg"===t,x="0.0";if(b||(x="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${o}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${h}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${c}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / count");let A=4*Math.floor(s/4),w=s%4,k=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${o}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${x};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${x});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${h}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${A}; wC += 4) {\n              int xC = xCCorner + wC * ${c};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${c}, ch)\n              );\n\n              ${k}\n            }\n\n            int xC = xCCorner + ${A};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                initializationValue\n              );\n\n              ${k}\n            }\n          }\n          setOutput(${v});\n        }\n      }\n    `}},kZ={kernelName:Bm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;vG(a,"avgPool");let{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;zb.assert(__.eitherStridesOrDilationsAreOne(i,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);let u=__.computePool2DInfo(a.shape,s,i,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&zb.arraysEqual(u.inShape,u.outShape))return bX({inputs:{x:a},backend:n});let h=new AZ(u,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},SZ={kernelName:jm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r,h=__.computePool3DInfo(a.shape,s,i,[1,1,1],o,l,u),c=new wZ(h,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}},IZ={kernelName:Hm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=r,c=__.computePool3DInfo(i.shape,o,l,[1,1,1],u,h),d=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterDepth*e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n            wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a],i.dtype)}},_Z={kernelName:Wm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;vG([a,s],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=r,h=__.computePool2DInfo(i.shape,o,l,1,u),c=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n            wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${e.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(h);return n.runWebGLProgram(c,[a],i.dtype)}},EZ={kernelName:Um,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;return GX({a:a,b:s,transposeA:i,transposeB:o,backend:n})}},TZ={kernelName:Rg,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:a,variance:s,offset:i,scale:o}=e;zb.assert(a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),zb.assert(null==i||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),zb.assert(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;null==l&&(l=.001);let u=[r,a,s],h=null;null!=i&&(h=i.shape,u.push(i));let c=null;null!=o&&(c=o.shape,u.push(o));let d=wm().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],__.assertAndGetBroadcastShape(e,t),__.assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=r&&(__.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=a&&(__.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}(r.shape,a.shape,s.shape,h,c,l):new class{constructor(e,t,n,r,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],__.assertAndGetBroadcastShape(e,t),__.assertAndGetBroadcastShape(e,n);let i="0.0";null!=r&&(__.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="1.0";null!=a&&(__.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}(r.shape,a.shape,s.shape,h,c,l);return t.runWebGLProgram(d,u,u[0].dtype)}},CZ=["x","y","z","w","u","v"];function NZ(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r,[o,l]=gA.parseSliceParams(a,s,i);if(gA.assertParamsValid(a,o,l),0===zb.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){let e=n.texData.get(a.dataId),t=LK(e.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}let{isPacked:u}=n.texData.get(a.dataId),h=gA.isSliceContinous(a.shape,o,l);if(u||!h){let e=wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;let t=iq(this.rank),n=QK("coords",this.rank),r=QK("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${a})`,i=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${i}\n        ${o}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}(l):new class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t,n=iq(this.rank),r=`uniform int start[${this.rank}];`,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return CZ.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);t=`\n        ${n} sourceLoc;\n        ${n} coords = getOutputCoords();\n        ${e.map((e,t)=>`sourceLoc.${CZ[t]} = start[${t}] + coords.${CZ[t]};`).join("\n")}\n      `,this.userCode=`\n      ${r}\n      void main() {\n        ${t}\n        setOutput(getSource(${a}));\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}(l),t=e.getCustomSetupFunc(o);return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){let a=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),i=r.texData.get(s.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;let o=gA.computeFlatOffset(t,zb.computeStrides(e.shape));a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};let l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}(a,o,l,n)}var MZ={kernelName:jy,backendName:"webgl",kernelFunc:NZ},FZ={kernelName:Gm,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;zb.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=s.reduce((e,t)=>e*t),l=__.getReshaped(a.shape,s,o),u=__.getPermuted(l.length,s.length),h=__.getReshapedPermuted(a.shape,s,o),c=__.getSliceBeginCoords(i,s.length),d=__.getSliceSize(h,i,s.length),p=[],f=zX({inputs:{x:a},backend:n,attrs:{shape:l}}),m=HX({inputs:{x:f},backend:n,attrs:{perm:u}}),g=zX({inputs:{x:m},backend:n,attrs:{shape:h}}),y=NZ({inputs:{x:g},backend:n,attrs:{begin:c,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},RZ={kernelName:qm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=n.readSync(a.dataId),l=n.readSync(s.dataId),u=pK(o,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}},DZ=CX({opSnippet:"return float(a != b);",cpuKernelImpl:DK,dtype:"bool"}),OZ={kernelName:gy,backendName:"webgl",kernelFunc:DZ};function zZ(e){let{inputs:t,backend:n}=e,{input:r}=t;return bX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var PZ={kernelName:Ty,backendName:"webgl",kernelFunc:zZ},$Z={kernelName:Km,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r,attrs:a}=t,{x:s}=n,{dtype:i}=a;if("complex64"===i){if("complex64"===s.dtype)return bX({inputs:{x:s},backend:r});let t=aS(s.shape),n=e({inputs:{x:s},backend:r,attrs:{dtype:"float32"}}),a=vX({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===s.dtype){let t=zZ({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!zb.hasEncodingLoss(s.dtype,i)){let e=bX({inputs:{x:s},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if("int32"===i)return function(e,t){let n=new aX(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(s,r);if("bool"===i){let e=r.makeTensorInfo([],"bool",zb.getTypedArrayFromDType("bool",1)),t=DZ({inputs:{a:s,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}},LZ="return ceil(x);",VZ=TX({opSnippet:LZ,packedOpSnippet:LZ,cpuKernelImpl:mK}),BZ={kernelName:Xm,backendName:"webgl",kernelFunc:VZ},WZ={kernelName:Zm,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{clipValueMin:i,clipValueMax:o}=a;t=wm().getBool("WEBGL_PACK_CLIP")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}(s.shape):new class{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}(s.shape);let l=t.getCustomSetupFunc(i,o);return r.runWebGLProgram(t,[s],s.dtype,l)}};function jZ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var HZ={kernelName:Jm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),s=new class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}(r.shape),i=[jZ(r,a.complexTensorInfos.real),jZ(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}};function UZ(e,t,n){let r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}function GZ(e){let{inputs:t,backend:n}=e,{input:r}=t;return bX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var qZ={kernelName:Vg,backendName:"webgl",kernelFunc:GZ};function KZ(e,t,n){let r=e[0].dtype;if("complex64"===r){let r=e.map(e=>zZ({inputs:{input:e},backend:n})),a=e.map(e=>GZ({inputs:{input:e},backend:n})),s=KZ(r,t,n),i=KZ(a,t,n),o=vX({inputs:{real:s,imag:i},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){let a=e.map(e=>{let r=zb.sizeFromShape(e.shape.slice(t));return zX({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),s=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),i=__.computeOutShape(a.map(e=>e.shape),1),o=gK(s,i,r,1===a[0].shape[0]),l=__.computeOutShape(e.map(e=>e.shape),t),u=n.makeTensorInfo(l,r,o);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}if(e.length>wm().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let r=Math.floor(e.length/2),a=KZ(e.slice(0,r),t,n),s=KZ(e.slice(r),t,n),i=KZ([a,s],t,n);return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}if(wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){let a=new class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=__.computeOutShape(e,t);let n=this.outputShape,r=n.length,a=iq(r),s=QK("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T"+t);let o=new Array(e.length-1);o[0]=e[0][t];for(let p=1;p<o.length;p++)o[p]=o[p-1]+e[p][t];let l=i[t],u=i.slice(-2),h=i.join(),c=`if (${l} < ${o[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${u.join()}));\n        }`;for(let p=1;p<o.length;p++){let e=o[p-1];c+=`\n        if (${l} < ${o[p]}  && ${l} >= ${o[p-1]}) {\n          return getChannel(\n            getT${p}(${UZ(i,l,e)}),\n            vec2(${UZ(u,l,e)}));\n        }`}let d=o[o.length-1];c+=`\n        return getChannel(\n          getT${o.length}(${UZ(i,l,d)}),\n          vec2(${UZ(u,l,d)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${c}\n      }\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}(e.map(e=>e.shape),t);return n.runWebGLProgram(a,e,r)}let{tensors2D:s,outShape:i}=function(e,t,n){let r=__.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>zX({inputs:{x:e},attrs:{shape:[-1,zb.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}(e,t,n),o=new class{constructor(e){this.outputShape=[],this.outputShape=__.computeOutShape(e,1),this.variableNames=e.map((e,t)=>"T"+t);let t=new Array(e.length-1);t[0]=e[0][1];for(let r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<t.length;r++)n.push(`else if (yC < ${t[r]}) setOutput(getT${r}(yR, yC-${t[r-1]}));`);n.push(`else setOutput(getT${t.length}(yR, yC-${t[t.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}(s.map(e=>e.shape)),l=n.runWebGLProgram(o,s,r);s.forEach(e=>n.disposeIntermediateTensorInfo(e));let u=zX({inputs:{x:l},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(l),u}function XZ(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=zb.parseAxisParam(a,t[0].shape)[0],i=__.computeOutShape(t.map(e=>e.shape),s);if(0===zb.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);let o=t.filter(e=>zb.sizeFromShape(e.shape)>0);if(1===o.length)return bX({inputs:{x:o[0]},backend:n});let l=o.map(e=>e.shape);return __.assertParamsConsistent(l,s),KZ(o,s,n)}var ZZ={kernelName:Qm,backendName:"webgl",kernelFunc:XZ},YZ=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,x="",v="";n&&(x=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");let A=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${x}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${A}\n        ${v}\n        setOutput(result);\n      }\n    `}};function JZ({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){let l,u=e.shape,h=r.texData.get(e.dataId),c="channelsLast"===n.dataFormat,d=[],p=u[2]%2!=0&&!!h.isPacked;if((1!=u[0]*u[1]*u[2]&&1!==n.outChannels||!(n.inChannels>1e3))&&wm().getBool("WEBGL_LAZILY_UNPACK")&&wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&p){let p={dataId:e.dataId,shape:[1,c?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),n.inChannels],dtype:e.dtype},f=h.shape;h.shape=h.shape.slice(),h.shape[h.shape.length-2]++,zb.assert(lG(h.shape,p.shape),()=>`packed reshape ${h.shape} to ${p.shape} isn't free`);let m=zX({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});d.push(m);let g=GX({a:p,b:m,backend:r,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i}),y=r.texData.get(g.dataId);zb.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),h.shape=f,y.shape=n.outShape,l=bX({inputs:{x:g},backend:r}),l.shape=n.outShape,d.push(g)}else{let h=zX({inputs:{x:e},backend:r,attrs:{shape:[1,c?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],n.inChannels]}}),p=zX({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=GX({a:h,b:p,transposeA:!1,transposeB:!1,backend:r,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i});l=zX({inputs:{x:f},backend:r,attrs:{shape:n.outShape}}),d.push(h),d.push(p),d.push(f)}for(let f of d)r.disposeIntermediateTensorInfo(f);return l}function QZ({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){let{filterWidth:l,filterHeight:u,inChannels:h,outWidth:c,outHeight:d,dataFormat:p}=n,f="channelsLast"===p,m=l*u*h,g=d*c,y=[m,g],b=[],x=zX({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),v=zX({inputs:{x:t},backend:r,attrs:{shape:[1,m,zb.sizeFromShape(t.shape)/m]}});b.push(x),b.push(v);let A=new class{constructor(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let{filterWidth:r,inChannels:a,strideWidth:s,strideHeight:i,padInfo:o,outWidth:l,dilationWidth:u,dilationHeight:h,dataFormat:c}=n,{left:d,top:p}=o,f=a*r,m=wG(),g="channelsLast"===c,y=g?0:1,b=g?1:2,x="";for(let v=0;v<=1;v++)for(let n=0;n<=1;n++)x+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${v};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${l})) * ${i} - ${p};\n            d0 = offsetY + ${h} * (pos / ${f});\n\n            if(d0 < ${t[y]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${l}.) * ${s}. - ${d}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${f}.) / ${a}.));\n\n              if(d1 < ${t[b]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${a}.));\n\n                if (${g}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*v+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*v+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${x}\n\n        ${m.output} = result;\n      }\n    `}}(y,x.shape,n),w=r.runWebGLProgram(A,[x],"float32"),k=zX({inputs:{x:w},backend:r,attrs:{shape:[1,y[0],y[1]]}});b.push(w),b.push(k);let S=null!=a,I=null!=s,_="leakyrelu"===o,E=o?NX(o,!0):null,T=new MX(k.shape,v.shape,[1,g,n.outChannels],!0,!1,S,E,I,_),C=[k,v];if(a&&C.push(a),I&&C.push(s),_){let e=r.makeTensorInfo([],"float32",zb.createScalarValue(i,"float32"));C.push(e),b.push(e)}let N=r.runWebGLProgram(T,C,"float32"),M=zX({inputs:{x:N},backend:r,attrs:{shape:f?[1,d,c,n.outChannels]:[1,n.outChannels,d,c]}});b.push(N);for(let F of b)r.disposeIntermediateTensorInfo(F);return M}var eY={kernelName:eg,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s,filter:i}=n,{strides:o,pad:l,dataFormat:u,dilations:h,dimRoundingMode:c}=a,d=__.convertConv2DDataFormat(u),p=__.computeConv2DInfo(s.shape,i.shape,o,h,l,c,!1,d);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(wm().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])t=QZ({x:s,filter:i,convInfo:p,backend:r});else{let e=new YZ(p);t=r.runWebGLProgram(e,[s,i],"float32")}else t=JZ({x:s,filter:i,convInfo:p,backend:r});let f=zX({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),f}},tY={kernelName:tg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=r,c=__.convertConv2DDataFormat(l),d=__.computeConv2DInfo(a.shape,h,i,1,o,u,!1,c),p=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===e.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(p,[a,s],"float32")}},nY={kernelName:ng,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=r,c=__.convertConv2DDataFormat(u),d=__.computeConv2DInfo(i,s.shape,o,1,l,h,!1,c),p=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r="channelsLast"===e.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(p,[a,s],"float32")}},rY={kernelName:rg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r,u=__.computeConv3DInfo(a.shape,s.shape,i,l,o),h=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,c=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${s}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${h}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${c}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},aY={kernelName:ag,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r,u=__.computeConv3DInfo(a.shape,l,i,1,o),h=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${e.strideDepth} - ${e.padInfo.front};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},sY={kernelName:sg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r,u=__.computeConv3DInfo(l,s.shape,o,1,i),h=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${e.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},iY=TX({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),oY={kernelName:ig,backendName:"webgl",kernelFunc:iY},lY=TX({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),uY={kernelName:og,backendName:"webgl",kernelFunc:lY},hY={kernelName:ug,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:u}=r,h=new class{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,i,o,l]=e,[u]=t,[h,c]=n;this.outputShape=[u,h,c,l];let d="bilinear"===r?1:0,[p,f]=[i-1+".0",o-1+".0"],[m,g,y]=h>1?[""+(i-1)/(h-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+p],[b,x,v]=c>1?[""+(o-1)/(c-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+f];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${x};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${a}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${a}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}(a.shape,s.shape,o,l,u);return n.runWebGLProgram(h,[a,s,i],"float32")}},cY=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=e;let r=e.length,a=t?"0.0":`getX(${dY(r,"coords")})`,s=e[e.length-1],i="",o="";t?(i=n?"end != "+(s-1):"end != 0",o=n?"end + 1":"end - 1"):(i=n?"end + pow2 < "+s:"end >= pow2",o=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${iq(r)} coords = getOutputCoords();\n        int end = ${pY(r,"coords")};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${i}) {\n          int idx = ${o};\n          ${pY(r,"coords")} = idx;\n          val += getX(${dY(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.index&&(this.index=t.getUniformLocation(n,"index")),t.gl.uniform1f(this.index,e)}}};function dY(e,t){if(1===e)return""+t;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function pY(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error(`Cumulative sum for rank ${e} is not yet supported`)}var fY={kernelName:lg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r,l=a.shape.length,u=__.getAxesPermutation([s],l),h=a;null!=u&&(h=HX({inputs:{x:a},backend:n,attrs:{perm:u}}));let c=__.getInnerMostAxes(1,l)[0];if(c!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${a.shape.length-1} but got axis=${s}`);let d=h.shape[c],p=bX({inputs:{x:h},backend:n});for(let f=0;f<=Math.ceil(Math.log2(d))-1;f++){let e=new cY(h.shape,!1,o),t=e.getCustomSetupFunc(f),r=p;p=n.runWebGLProgram(e,[p],p.dtype,t),n.disposeIntermediateTensorInfo(r)}if(i){let e=new cY(h.shape,i,o),t=p;p=n.runWebGLProgram(e,[p],p.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){let e=HX({inputs:{x:p},backend:n,attrs:{perm:__.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),e}return p}},mY={kernelName:hg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){let e=n.readSync(a.dataId),t=n.readSync(s.dataId),r=pK(e,t,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,r)}if(2===a.shape.length){let e=n.bufferSync(a),t=n.bufferSync(s),r=fK(e,t,i,o);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},gY={kernelName:cg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;zb.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);let o=a.shape[0],l=("NHWC"===i?a.shape[1]:a.shape[2])*s,u=("NHWC"===i?a.shape[2]:a.shape[3])*s,h=("NHWC"===i?a.shape[3]:a.shape[1])/(s*s),c="NHWC"===i?[o,l,u,h]:[o,h,l,u],d=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}(c,s,i);return n.runWebGLProgram(d,[a],a.dtype)}},yY=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,u=e.strideHeight,h=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,m=e.outChannels/e.inChannels,g="",y="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,y="result = activation(result);");let b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${u}, ${h});\n      const ivec2 pads = ivec2(${o}, ${l});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${m};\n        int q = d2 - d1 * ${m};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${s}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${i}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${y}\n        setOutput(result);\n      }\n    `}},bY=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;let s=e.outChannels/e.inChannels,i=e.inHeight,o=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,h=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,f=e.filterHeight,m=e.filterWidth,g=m,y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let A=0;A<m;A++)y+=`\n          vec4 xTexelC${2*A};\n          int xTexelC${2*A}Ready;\n          vec4 xC${A};`;for(let A=0;A<f;A++){for(let e=0;e<m;e++)y+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xC${e} = vec4(0.0);`;y+=`\n        xR = xRCorner + ${A*d};\n        if (xR >=0 && xR < ${i}) {\n      `;for(let e=0;e<(g+1)/2;e++){let t=2*e,n=t*p;if(y+=`\n          xC = xCCorner + ${n};\n          `,1===c){if(t<m&&(u%2==1?(y+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n              `,y+=1===p&&n>0?`\n                xC${t} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < ${o}) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${o}) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${n}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                  }\n                  `):y+=`\n                if (xC >= 0 && xC < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xC${t} = xTexelC${n};\n                `,n+1<m)){let e=u%2==0?zb.nearestLargerEven(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(y+=`\n                  xCOffset = xC + ${u%2} + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                    xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${o}) {\n                      xTexelC${n+2}.zw = vec2(0.0);\n                    }\n                    xTexelC${n+2}Ready = 1;\n                  }\n                  `,p>1&&(y+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                      xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${n}Ready = 1;\n                    }\n                    `),y+=`\n                  xC${t+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.xy);\n                  `):y+=1===e?`\n                    xC${t+1} = xTexelC${n};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                      xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= ${o}) {\n                        xTexelC${n+2}.zw = vec2(0.0);\n                      }\n                      xTexelC${n+2}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${n+2};\n                    `}}else n<m&&(u%2==1?(y+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= ${o}) {\n                    xTexelC${n+2}.zw = vec2(0.0);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n              `,n+1<m&&(y+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${n+2}.xy, final.xy);\n                `)):(y+=`\n                if(xC >= 0 && xC < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n+2}.zw = vec2(0.);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${n}.xy, xTexelC${n+2}.xy);\n              `,n+1<m&&(y+=`\n                  xC${t+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n                `)));t<m&&(y+=`\n            wTexel = getW(${A}, ${n}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,n+1<m&&(y+=`\n              wTexel = getW(${A}, ${n+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}y+="\n        }\n      "}let b="",x="";n&&(b=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,x="result = activation(result);");let v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${h}, ${c});\n      const ivec2 pads = ivec2(${l}, ${u});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${y}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${v}\n        ${x}\n        setOutput(result);\n      }\n    `}},xY={kernelName:dg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r,h=l;null==h&&(h=[1,1]),zb.assert(__.eitherStridesOrDilationsAreOne(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);let c,d=__.computeConv2DInfo(a.shape,s.shape,i,h,o,u,!0);return c=wm().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new bY(d):new yY(d),n.runWebGLProgram(c,[a,s],"float32")}},vY={kernelName:pg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=r,c=__.computeConv2DInfo(a.shape,h,i,o,l,u,!0),d=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${e.outChannels/e.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a,s],"float32")}},AY={kernelName:fg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=r,c=__.computeConv2DInfo(h,s.shape,i,o,l,u,!0),d=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a,s],"float32")}},wY={kernelName:mg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],s=zb.sizeFromShape(r.shape),i=zX({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}(s),l=n.runWebGLProgram(o,[i],i.dtype),u=zX({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}},kY={kernelName:gg,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s,filter:i}=n,{strides:o,pad:l,dilations:u}=a,h=__.computeDilation2DInfo(s.shape,i.shape,o,l,"NHWC",u),c=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:s,filterHeight:i,filterWidth:o,dilationHeight:l,dilationWidth:u}=e,{top:h,left:c}=r;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${h}, ${c});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}(h);t=r.runWebGLProgram(c,[s,i],"float32");let d=zX({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),d}},SY={kernelName:vg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=__.decodeEinsumEquation(a,s.length);__.checkEinsumDimSizes(i.length,l,s);let{path:u,steps:h}=__.getEinsumComputePath(o,l),c=h.length,d=null,p=i.length,f=[];for(let m=0;m<c;++m){for(let e of h[m]){let t,{permutationIndices:r,expandDims:a}=__.getEinsumPermutation(p,l[e]);__.isIdentityPermutation(r)?t=s[e]:(t=HX({inputs:{x:s[e]},backend:n,attrs:{perm:r}}),f.push(t));let i=t.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);zb.arraysEqual(t.shape,i)||(t=zX({inputs:{x:t},backend:n,attrs:{shape:i}}),f.push(t)),null===d?d=t:(d=DX({inputs:{a:t,b:d},backend:n}),f.push(d))}m<c-1&&(u[m]>=0&&(d=WX({inputs:{x:d},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(let m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},IY=TX({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),_Y={kernelName:Ag,backendName:"webgl",kernelFunc:IY},EY={kernelName:wg,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e,{dy:r,y:a}=t,s=wm().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yX("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new gX("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}},TY=CX({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:yK}),CY={kernelName:Sg,backendName:"webgl",kernelFunc:TY},NY=TX({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${__.ERF_P};\n  float a1 = ${__.ERF_A1};\n  float a2 = ${__.ERF_A2};\n  float a3 = ${__.ERF_A3};\n  float a4 = ${__.ERF_A4};\n  float a5 = ${__.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),MY={kernelName:kg,backendName:"webgl",kernelFunc:NY},FY="return exp(x);",RY=TX({opSnippet:FY,packedOpSnippet:FY,cpuKernelImpl:bK}),DY={kernelName:Ig,backendName:"webgl",kernelFunc:RY};function OY(e){let{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:s}=t,i=s.shape.length,o=s.shape.slice(),l=a;return a<0&&(zb.assert(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),zX({inputs:{x:s},backend:r,attrs:{shape:o}})}var zY={kernelName:_g,backendName:"webgl",kernelFunc:OY},PY="return exp(x) - 1.0;",$Y=TX({opSnippet:PY,packedOpSnippet:PY,cpuKernelImpl:xK}),LY={kernelName:Eg,backendName:"webgl",kernelFunc:$Y},VY=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let a,s=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${s};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}};function BY(e,t,n){let r=n.texData.get(e.dataId),a=zb.sizeFromShape(e.shape),s=e.shape[e.shape.length-1],i=zX({inputs:{x:e},backend:n,attrs:{shape:[a/s,s]}}),o=i.shape,l=new VY("real",o,t),u=new VY("imag",o,t),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],c=n.runWebGLProgram(l,h,"float32"),d=n.runWebGLProgram(u,h,"float32"),p=vX({inputs:{real:c,imag:d},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d);let f=zX({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}var WY={kernelName:Tg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return BY(r,!1,n)}};function jY(e){let{backend:t,attrs:n}=e,{shape:r,value:a}=n,{dtype:s}=n;if(s=s||zb.inferDtype(a),"string"===s){let e=zb.getArrayFromDType(s,zb.sizeFromShape(r));return e.fill(a),t.makeTensorInfo(r,s,e)}{let e=new class{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(r,a),n=e.getCustomSetupFunc(a);return t.runWebGLProgram(e,[],s,n)}}var HY,UY={kernelName:Cg,backendName:"webgl",kernelFunc:jY},GY={kernelName:Ng,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,a=new class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},qY="return floor(x);",KY=TX({opSnippet:qY,packedOpSnippet:qY,cpuKernelImpl:vK}),XY={kernelName:Mg,backendName:"webgl",kernelFunc:KY},ZY=CX({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),YY={kernelName:Fg,backendName:"webgl",kernelFunc:ZY},JY={kernelName:kb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:a}=t,{numChannels:s}=r,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,u]=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],h=[u,l],c=[u,l,s];(o||i)&&(null==HY&&(HY=document.createElement("canvas").getContext("2d")),HY.canvas.width=l,HY.canvas.height=u,HY.drawImage(a,0,0,l,u),a=HY.canvas);let d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=gU.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);let p=wm().getBool("WEBGL_PACK")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=wG(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}(c):new class{constructor(e){this.variableNames=["A"];let t=wG(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}(c),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}},QY={kernelName:_b,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s,filter:i,bias:o,preluActivationWeights:l}=n,{strides:u,pad:h,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=a,g=__.convertConv2DDataFormat(c),y=__.computeConv2DInfo(s.shape,i.shape,u,d,h,p,!1,g),b=[];if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(wm().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])t=QZ({x:s,filter:i,convInfo:y,backend:r,bias:o,activation:f,preluActivationWeights:l,leakyreluAlpha:m});else{let e=null!=o,n=null!=l,a="leakyrelu"===f,u=f?NX(f,!1):null,h=new YZ(y,e,u,n,a),c=[s,i];if(o&&c.push(o),l&&c.push(l),a){let e=r.makeTensorInfo([],"float32",zb.createScalarValue(m,"float32"));c.push(e),b.push(e)}t=r.runWebGLProgram(h,c,"float32")}else t=JZ({x:s,filter:i,convInfo:y,backend:r,bias:o,activation:f,preluActivationWeights:l,leakyreluAlpha:m});let x=zX({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return b.push(t),b.forEach(e=>r.disposeIntermediateTensorInfo(e)),x}},eJ={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dimRoundingMode:c,activation:d,leakyreluAlpha:p}=r,f=[],m=h;null==m&&(m=[1,1]),zb.assert(__.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g,y=__.computeConv2DInfo(a.shape,s.shape,l,m,u,c,!0),b=wm().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels==1,x=d?NX(d,b):null,v=[a,s],A=null!=i,w=null!=o,k="leakyrelu"===d;if(A&&v.push(i),w&&v.push(o),k){let e=n.makeTensorInfo([],"float32",zb.createScalarValue(p,"float32"));v.push(e),f.push(e)}g=b?new bY(y,A,x,w,k):new yY(y,A,x,w,k);let S=n.runWebGLProgram(g,v,"float32");return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),S}},tJ={kernelName:Og,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=a.shape,i=s[s.length-1],o=zb.sizeFromShape(r.shape),[l,u,h,c]=__.prepareAndValidate(r,a),d=zX({inputs:{x:a},backend:n,attrs:{shape:[u,i]}}),p=zX({inputs:{x:r},backend:n,attrs:{shape:[zb.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){let e=n.readSync(a.dataId),t=n.bufferSync(r),s=AK(e,t,r.dtype,u,i,h,c,r.shape,o);return n.makeTensorInfo(l,r.dtype,s.values)}let f=new class{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;let r=iq(t.length),a=iq(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${a} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}(i,c,[u,h]),m=n.runWebGLProgram(f,[p,d],p.dtype),g=zX({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}},nJ={kernelName:Dg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r,l=zb.parseAxisParam(i,a.shape)[0],u=__.segment_util.collectGatherOpShapeInfo(a,s,l,o),h=zb.sizeFromShape(s.shape),c=[],d=zX({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=zX({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,h/u.batchSize]}});c.push(d),c.push(p);let f=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,s])||"string"===a.dtype){let e=n.bufferSync(p),t=n.bufferSync(d),r=wK(t,e,f);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}let m=new class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=iq(this.rank),r=function(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<e.length;a++)r.push(2===a?"int(getIndices(resRC.x, resRC.z))":""+n[a]);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);c.push(g);let y=zX({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},rJ=CX({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:kK,dtype:"bool"}),aJ={kernelName:zg,backendName:"webgl",kernelFunc:rJ},sJ=CX({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:SK}),iJ={kernelName:Pg,backendName:"webgl",kernelFunc:sJ},oJ={kernelName:Lg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return BY(r,!0,n)}},lJ=TX({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),uJ={kernelName:Bg,backendName:"webgl",kernelFunc:lJ},hJ=TX({opSnippet:"return float(isinf(x));",dtype:"bool"}),cJ={kernelName:Wg,backendName:"webgl",kernelFunc:hJ},dJ=TX({opSnippet:"return float(isnan(x));",dtype:"bool"}),pJ={kernelName:jg,backendName:"webgl",kernelFunc:dJ},fJ=CX({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:IK,dtype:"bool"}),mJ={kernelName:Ug,backendName:"webgl",kernelFunc:fJ},gJ=CX({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:_K,dtype:"bool"}),yJ={kernelName:Gg,backendName:"webgl",kernelFunc:gJ},bJ={kernelName:qg,backendName:"webgl",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=EK(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},xJ=TX({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:TK}),vJ={kernelName:Kg,backendName:"webgl",kernelFunc:xJ},AJ=TX({opSnippet:"return log(1.0 + x);"}),wJ={kernelName:Xg,backendName:"webgl",kernelFunc:AJ},kJ=CX({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),SJ={kernelName:Zg,backendName:"webgl",kernelFunc:kJ},IJ=TX({opSnippet:"return float(!(x >= 1.0));"}),_J={kernelName:Yg,backendName:"webgl",kernelFunc:IJ},EJ=CX({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),TJ={kernelName:Jg,backendName:"webgl",kernelFunc:EJ},CJ={kernelName:Qg,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r,u=wm().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=t,i=e[3]-1;this.outputShape=e;let o,l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}(a.shape,s,i,o,l):new class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];let s=t,i=e[3]-1;this.outputShape=e;let o,l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}(a.shape,s,i,o,l);return n.runWebGLProgram(u,[a],a.dtype)}},NJ={kernelName:ey,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:u,beta:h}=r,c=new class{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${a})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${a});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}(a.shape,o,l,u,h);return n.runWebGLProgram(c,[a,s,i],a.dtype)}};function MJ(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=a.shape.length,l=zb.parseAxisParam(s,a.shape),u=l,h=__.getAxesPermutation(u,o),c=null!=h,d=n.shouldExecuteOnCPU([a]),p=a;if(c){if(d){let e=n.texData.get(p.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=a.shape[h[n]];let r=ZK(e,a.shape,a.dtype,h,t);p=n.makeTensorInfo(t,a.dtype),n.texData.get(p.dataId).values=r}else p=BX(a,h,n);u=__.getInnerMostAxes(u.length,o)}__.assertAxesAreInnerMostDims("max",u,o);let f,[m,g]=__.computeOutAndReduceShapes(p.shape,u),y=m;if(i&&(y=__.expandShapeToKeepDim(m,l)),d){let e=n.texData.get(p.dataId).values,t=CK(e,zb.sizeFromShape(g),y,a.dtype);f=n.makeTensorInfo(y,a.dtype),n.texData.get(f.dataId).values=t}else f=function(e,t,n,r){let a=zb.sizeFromShape(t),s=zX({inputs:{x:e},attrs:{shape:[zb.sizeFromShape(e.shape)/a,a]},backend:r}),i=VX(s,e.dtype,"max",r),o=zX({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(p,g,y,n);return c&&n.disposeIntermediateTensorInfo(p),f}var FJ={kernelName:ty,backendName:"webgl",kernelFunc:MJ},RJ=CX({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:NK}),DJ={kernelName:ny,backendName:"webgl",kernelFunc:RJ},OJ={kernelName:ry,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;vG(a,"maxPool");let{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;zb.assert(__.eitherStridesOrDilationsAreOne(i,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);let u=__.computePool2DInfo(a.shape,s,i,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&zb.arraysEqual(u.inShape,u.outShape))return bX({inputs:{x:a},backend:n});let h=new AZ(u,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},zJ={kernelName:sy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=r,h=__.computePool3DInfo(a.shape,s,i,[1,1,1],o,u,l),c=new wZ(h,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}},PJ={kernelName:iy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=r,c=__.computePool3DInfo(i.shape,o,l,[1,1,1],u,h),d=new wZ(c,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),f=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n           wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${t*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c),m=n.runWebGLProgram(f,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}},$J={kernelName:ay,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;vG([s,i],"maxPoolGrad");let{filterSize:l,strides:u,pad:h,dimRoundingMode:c}=r,d=__.computePool2DInfo(o.shape,l,u,1,h,c),p=new AZ(d,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n          wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${t*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d),g=n.runWebGLProgram(m,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}},LJ={kernelName:oy,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;zb.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let u=[1,1];zb.assert(__.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let h=__.computePool2DInfo(r.shape,a,s,u,i),[c,d]=function(e,t,n,r){let a=new AZ(n,"max",!1),s=r.runWebGLProgram(a,[e],"float32");return a=new AZ(n,"max",!0,!0,t),[s,r.runWebGLProgram(a,[e],"float32")]}(r,o,h,l);return[c,d]}},VJ={kernelName:ly,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:a,axis:s}=t,i=n,o=r.shape.length,l=zb.parseAxisParam(s,r.shape),u=l,h=__.getAxesPermutation(u,o),c=null!=h,d=i.shouldExecuteOnCPU([r]),p=[],f=r;if(c){if(d){let e=i.texData.get(f.dataId).values,t=new Array(o);for(let a=0;a<t.length;a++)t[a]=r.shape[h[a]];let n=ZK(e,r.shape,r.dtype,h,t);f=i.makeTensorInfo(t,r.dtype),i.texData.get(f.dataId).values=n}else f=BX(r,h,i);p.push(f),u=__.getInnerMostAxes(u.length,o)}__.assertAxesAreInnerMostDims("sum",u,o);let[m,g]=__.computeOutAndReduceShapes(f.shape,u),y=m;a&&(y=__.expandShapeToKeepDim(m,l));let b=function(e,t,n,r){let a=zb.sizeFromShape(t),s=zX({inputs:{x:e},attrs:{shape:[zb.sizeFromShape(e.shape)/a,a]},backend:r}),i=VX(s,"float32","mean",r),o=zX({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(f,g,y,i);for(let x of p)i.disposeIntermediateTensorInfo(x);return b}},BJ={kernelName:uy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=zb.parseAxisParam(s,a.shape),u=l,h=__.getAxesPermutation(u,o),c=a;null!=h&&(c=HX({inputs:{x:a},backend:n,attrs:{perm:h}}),u=__.getInnerMostAxes(u.length,a.shape.length)),__.assertAxesAreInnerMostDims("min",u,o);let d,[p,f]=__.computeOutAndReduceShapes(c.shape,u),m=zX({inputs:{x:c},backend:n,attrs:{shape:[-1,zb.sizeFromShape(f)]}}),g=VX(m,m.dtype,"min",n);return d=zX(i?{inputs:{x:g},backend:n,attrs:{shape:__.expandShapeToKeepDim(p,l)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(c),d}},WJ=CX({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:MK}),jJ={kernelName:hy,backendName:"webgl",kernelFunc:WJ},HJ={kernelName:cy,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:a,mode:s}=n,i=wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=iq(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=QK("rc",r),l=QK("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,h=1===r?"source":`vec2(${l.slice(-2).join()})`,c="reflect"===n?0:1,d="";if(1===r){let e=`\n        ${a} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${c};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${c};\n        }\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${h});\n        ${o[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${h});\n        }\n      `}else{let e=`\n        ${a} source = rc;\n        ${a} lt = ${a}(lessThan(source, start));\n        ${a} gte = ${a}(greaterThanEqual(source, end));\n        ${a} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${c}) +\n                gte * ((end - 1) * 2 - source + ${c});\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${h});\n        ${o[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${h});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${h});\n          ${o[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${h});\n          }\n        }\n      `}this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}(r.shape,a,s):new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=iq(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${a} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}(r.shape,a,s);return t.runWebGLProgram(i,[r],r.dtype)}},UJ=CX({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),GJ={kernelName:dy,backendName:"webgl",kernelFunc:UJ},qJ=CX({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),KJ={kernelName:xg,backendName:"webgl",kernelFunc:qJ},XJ="return a - b;",ZJ=CX({opSnippet:XJ,packedOpSnippet:XJ,supportsComplex:!0,cpuKernelImpl:qK}),YJ={kernelName:cb,backendName:"webgl",kernelFunc:ZJ};function JJ(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=zb.parseAxisParam([s],a.shape),o=MJ({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=__.expandShapeToKeepDim(o.shape,i),u=zX({inputs:{x:o},backend:n,attrs:{shape:l}}),h=ZJ({inputs:{a:a,b:u},backend:n}),c=RY({inputs:{x:h},backend:n}),d=WX({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),p=zX({inputs:{x:d},backend:n,attrs:{shape:l}}),f=qJ({inputs:{a:c,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}var QJ={kernelName:Qy,backendName:"webgl",kernelFunc:JJ},eQ={kernelName:py,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r,l=o?a:JJ({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],h=l.shape[1],c=new class{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(n,"seed")),t.gl.uniform1f(this.seedLoc,e)}}}(u,h,s),d=c.getCustomSetupFunc(i),p=n.runWebGLProgram(c,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),p}},tQ="return -x;",nQ={kernelName:my,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])){let e=r.texData.get(a.dataId),[t,n]=RK(e.values,a.shape,a.dtype);return r.makeTensorInfo(n,a.dtype,t)}return t=wm().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oX(a.shape,tQ):new aX(a.shape,tQ),r.runWebGLProgram(t,[a],a.dtype)}},rQ=mE.nonMaxSuppressionV3Impl,aQ={kernelName:yy,backendName:"webgl",kernelFunc:function(e){__.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(a.dataId),h=n.readSync(s.dataId),{selectedIndices:c}=rQ(u,h,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},sQ=mE.nonMaxSuppressionV4Impl,iQ={kernelName:by,backendName:"webgl",kernelFunc:function(e){__.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,h=n.readSync(a.dataId),c=n.readSync(s.dataId),{selectedIndices:d,validOutputs:p}=sQ(h,c,i,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},oQ=mE.nonMaxSuppressionV5Impl,lQ={kernelName:xy,backendName:"webgl",kernelFunc:function(e){__.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,h=n.readSync(a.dataId),c=n.readSync(s.dataId),d=i,p=o,f=l,m=u,{selectedIndices:g,selectedScores:y}=oQ(h,c,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},uQ={kernelName:Ay,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r,l=zb.sizeFromShape(a.shape),u=new class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}(l,s,i,o),h=zX({inputs:{x:a},backend:n,attrs:{shape:[l]}}),c=n.runWebGLProgram(u,[h],a.dtype);n.disposeIntermediateTensorInfo(h);let d=zX({inputs:{x:c},backend:n,attrs:{shape:[...a.shape,s]}});return n.disposeIntermediateTensorInfo(c),d}};function hQ(e){let{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){let e=zZ({inputs:{input:r},backend:n}),t=hQ({inputs:{x:e},backend:n}),a=GZ({inputs:{input:r},backend:n}),s=hQ({inputs:{x:a},backend:n}),i=vX({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return jY({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var cQ={kernelName:Ab,backendName:"webgl",kernelFunc:hQ},dQ={kernelName:vy,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){let t=zZ({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=GZ({inputs:{input:a},backend:r}),i=hQ({inputs:{x:s},backend:r}),o=vX({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return jY({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},pQ={kernelName:wy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return OY({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let s=t[0].shape,i=t[0].dtype;t.forEach(e=>{zb.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),zb.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=XZ({inputs:t.map(e=>{let t=OY({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}},fQ=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r,o=wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=iq(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=QK("rc",r),l=QK("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,h=1===r?"source":`vec2(${l.slice(-2).join()})`,c=[a+" rc = outputLoc;",`${o[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${c[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${a} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${h});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n      uniform float value;\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(a.shape,s,i):new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=iq(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n      uniform float value;\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n        uniform float value;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(a.shape,s,i),l=o.getCustomSetupFunc(i);return n.runWebGLProgram(o,[a],a.dtype,l)},mQ={kernelName:ky,backendName:"webgl",kernelFunc:fQ},gQ=CX({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),yQ={kernelName:Sy,backendName:"webgl",kernelFunc:gQ},bQ={kernelName:_y,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{axis:i,keepDims:o}=a,l=s.shape.length,u=[],h=zb.parseAxisParam(i,s.shape),c=h,d=__.getAxesPermutation(c,l),p=s;if(null!=d&&(p=HX({inputs:{x:s},backend:r,attrs:{perm:d}}),c=__.getInnerMostAxes(c.length,l),u.push(p)),__.assertAxesAreInnerMostDims("prod",c,l),r.shouldExecuteOnCPU([p])){let e=r.texData.get(p.dataId).values,{outVals:n,outShape:a,outDtype:s}=OK(p.shape,p.dtype,e,c);t=r.makeTensorInfo(a,s,n)}else{let[e,n]=__.computeOutAndReduceShapes(p.shape,c),a=zb.sizeFromShape(n),i=zX({inputs:{x:p},backend:r,attrs:{shape:[-1,a]}}),o=VX(i,kx(s.dtype),"prod",r);t=zX({inputs:{x:o},backend:r,attrs:{shape:e}}),u.push(i),u.push(o)}if(o){u.push(t);let e=__.expandShapeToKeepDim(t.shape,h);t=zX({inputs:{x:t},backend:r,attrs:{shape:e}})}return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),t}},xQ=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:i}=n,o=zK(r,a,s,i);return t.makeTensorInfo([o.length],i,o)},vQ={kernelName:Ey,backendName:"webgl",kernelFunc:xQ},AQ=TX({opSnippet:"return 1.0 / x;"}),wQ={kernelName:Cy,backendName:"webgl",kernelFunc:AQ},kQ=TX({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),SQ={kernelName:Ny,backendName:"webgl",kernelFunc:kQ},IQ=TX({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),_Q={kernelName:zy,backendName:"webgl",kernelFunc:IQ},EQ={kernelName:Dy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,u]=o,h=wm().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,i,o,l]=e;this.outputShape=[s,t,n,l];let u,h=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${h[0]/c[0]},\n          ${h[1]/c[1]},\n          ${h[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${u};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i):new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[s,i,o,l]=e;this.outputShape=[s,t,n,l];let u,h=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${h[0]/c[0]},\n          ${h[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${u};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i);return n.runWebGLProgram(h,[a],"float32")}},TQ={kernelName:Oy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],u=o[0]/l[0],h=o[1]/l[1],c=1/u,d=1/h,p=2*Math.ceil(c)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}},CQ={kernelName:Fy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,u]=o,h=wm().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,i,o,l]=e;this.outputShape=[s,t,n,l];let u,h=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${h[0]/c[0]},\n          ${h[1]/c[1]},\n          ${h[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${u};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i):new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[s,i,o,l]=e;this.outputShape=[s,t,n,l];let u,h=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${h[0]/c[0]},\n          ${h[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${u};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i);return n.runWebGLProgram(h,[a],a.dtype)}},NQ={kernelName:Ry,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],u=o[0]/l[0],h=o[1]/l[1],c=1/u,d=1/h,p=2*Math.ceil(c)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}},MQ={kernelName:Py,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,i=a.shape.length,o=zb.parseAxisParam(s,a.shape);if(0===i)return bX({inputs:{x:a},backend:n});let l=wm().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;let r=QK("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=iq(n);var o;function l(n){let r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:""+r[n]}(a,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${a}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${o=r.slice(),l(o)};\n          if(${a}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",l(e)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            if(${a}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}(a.shape,o):new class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);let r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),a=iq(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}},FQ={kernelName:Sb,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=new class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[];let n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        uniform vec4 params;\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${a}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}getCustomSetupFunc(e,t,n,r){return(a,s)=>{null==this.paramsLoc&&(this.paramsLoc=a.getUniformLocationNoThrow(s,"params")),a.gl.uniform4f(this.paramsLoc,e,t,n,r)}}}(r.shape,s),[u,h]=__.getImageCenter(i,r.shape[1],r.shape[2]),c=l.getCustomSetupFunc(u,h,Math.sin(a),Math.cos(a));return o.runWebGLProgram(l,[r],r.dtype,c)}},RQ=TX({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),DQ={kernelName:$y,backendName:"webgl",kernelFunc:RQ},OQ=TX({opSnippet:"return inversesqrt(x);",cpuKernelImpl:PK}),zQ={kernelName:Ly,backendName:"webgl",kernelFunc:OQ},PQ=class{constructor(e,t,n,r,a,s,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let o=iq(a.length),l=iq(s.length),u="";1===n?u="i":2===n&&(u="i, j");let h="";1===r?h="i":2===r&&(h="i, coords[1]"),this.userCode=`\n        ${o} strides = ${o}(${a});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(getIndices(${u}));\n              flattenedIndex += index * ${t>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${h});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}},$Q={kernelName:Vy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:c}=__.calculateShapes(s,a,i),d=[c/u,u];if(0===c)return n.makeTensorInfo(i,a.dtype);let p=zX({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=zX({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new PQ(l,o,p.shape.length,f.shape.length,h,d),y=n.runWebGLProgram(g,[f,p,m],f.dtype),b=zX({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},LQ={kernelName:By,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,i=new class{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{let n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],i=[];for(let r=0;r<t.length;r++)i.push(""+n[r]),r<e&&s.push(""+n[r]);r=s.join(),a=i.join()}let s=iq(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${a}));\n        } else {\n          setOutput(getB(${a}));\n        }\n      }\n    `}}(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,s],wx(a.dtype,s.dtype))}},VQ=TX({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${__.SELU_SCALEALPHA};\n  float scale = ${__.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),BQ={kernelName:Wy,backendName:"webgl",kernelFunc:VQ},WQ=TX({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),jQ={kernelName:qy,backendName:"webgl",kernelFunc:WQ},HQ=TX({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),UQ={kernelName:Gy,backendName:"webgl",kernelFunc:HQ},GQ=TX({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),qQ={kernelName:Hy,backendName:"webgl",kernelFunc:GQ},KQ=TX({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),XQ={kernelName:Uy,backendName:"webgl",kernelFunc:KQ},ZQ=TX({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),YQ={kernelName:Ky,backendName:"webgl",kernelFunc:ZQ},JQ={kernelName:Yy,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;zb.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=s.reduce((e,t)=>e*t),l=[[0,0]];l.push(...i);for(let y=1+s.length;y<a.shape.length;++y)l.push([0,0]);let u=[],h=fQ({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=__.getReshaped(h.shape,s,o,!1),d=__.getPermuted(c.length,s.length,!1),p=__.getReshapedPermuted(h.shape,s,o,!1),f=zX({inputs:{x:h},backend:n,attrs:{shape:c}}),m=HX({inputs:{x:f},backend:n,attrs:{perm:d}}),g=zX({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(h),u.push(f),u.push(m),u.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}},QQ={kernelName:eb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n         "+s.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         "+r.shape);if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         "+a.shape);if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+i.shape);let o=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(s.dataId),h=n.readSync(i.dataId)[0],[c,d,p,f,m]=VK(o,r.shape,r.dtype,l,a.dtype,u,h);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},e1={kernelName:tb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape "+r.shape);if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape "+a.shape);if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape "+s.shape);let i=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,h,c]=BK(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}},t1={kernelName:nb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n              "+s.shape);let i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,h]=WK(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,u)}},n1={kernelName:rb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n             "+s.shape);let i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,h]=WK(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,u)}},r1={kernelName:ab,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,strides:h,outputSize:c}=__.calculateShapes(s,a,o),d=new PQ(u,l,a.shape.length,s.shape.length,h,[c,1],!1),p=n.runWebGLProgram(d,[s,a,i],s.dtype),f=zX({inputs:{x:p},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),f}},a1={kernelName:Jy,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=zb.parseAxisParam(i,a.shape)[0],l=__.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{let t=[...h];t[o]=e;let r=NZ({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},s1=TX({opSnippet:"return sqrt(x);"}),i1={kernelName:Xy,backendName:"webgl",kernelFunc:s1},o1={kernelName:ib,backendName:"webgl",kernelFunc:TX({opSnippet:"return x * x;"})},l1="return (a - b) * (a - b);",u1=CX({opSnippet:l1,packedOpSnippet:l1}),h1={kernelName:sb,backendName:"webgl",kernelFunc:u1},c1={kernelName:wb,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){let{x:r}=e,a=new aX(r.shape,`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `);return n.runWebGLProgram(a,[r],r.dtype)}},d1={kernelName:ob,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{begin:i,end:o,strides:l,beginMask:u,endMask:h,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=a,{nonStrided:f,$begin:m,$strides:g,size:y,newShape:b,outShape:x}=gA.sliceInfo(s.shape,i,o,l,u,h,c,d,p),v=zX({inputs:{x:s},backend:r,attrs:{shape:b}});if(f){let e=NZ({inputs:{x:v},backend:r,attrs:{begin:m,size:y}});t=zX({inputs:{x:e},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(e)}else if(x.some(e=>0===e))t=r.makeTensorInfo(x,s.dtype,[]);else if(r.shouldExecuteOnCPU([v])){let e=r.texData.get(v.dataId).values,n=zv(v.shape,v.dtype,e),a=jK(x,n,g,m);t=r.makeTensorInfo(x,v.dtype,a.values)}else{let e=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,a=iq(n.length),s=iq(n.length),i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${a} begin = ${a}(${e});\n      ${a} strides = ${a}(${t});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}(m,g,x);t=r.runWebGLProgram(e,[v],v.dtype)}let A=zX({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(t),A}},p1={kernelName:lb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:c}=t,d=n.readSync(h.dataId),p=n.readSync(c.dataId),[f,m]=HK(d,p,a,s,i,o,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}},f1={kernelName:ub,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: "+s.shape);if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+i.shape);let o=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[u,h,c]=UK(o,l,a),d=h.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},m1={kernelName:hb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let i=n.readSync(s.dataId),o=GK(i,a);return n.makeTensorInfo(s.shape,"int32",o)}},g1=TX({opSnippet:"return tan(x);"}),y1={kernelName:db,backendName:"webgl",kernelFunc:g1},b1=TX({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"});function x1(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;if("string"===a.dtype||a.shape.length>5){let e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>zb.decodeString(e)):e,r=zv(a.shape,a.dtype,t),i=KK(r,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}let i=new class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[s]*t[s];this.outputShape=n,this.rank=n.length;let r=iq(this.rank),a=function(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push(`imod(${n[a]}, ${e[a]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}(a.shape,s);return n.runWebGLProgram(i,[a],a.dtype)}var v1,A1,w1,k1=[CJ,NJ,qX,XX,YX,QX,nZ,rZ,aZ,sZ,uZ,hZ,dZ,fZ,bZ,gZ,vZ,SZ,kZ,IZ,_Z,EZ,TZ,FZ,RZ,$Z,BZ,WZ,HZ,AX,ZZ,tY,nY,eY,aY,sY,rY,oY,uY,hY,fY,mY,gY,vY,AY,xY,wY,kY,SY,_Y,EY,CY,MY,DY,zY,LY,WY,UY,GY,XY,YY,JY,QY,eJ,tJ,nJ,aJ,iJ,xX,oJ,qZ,uJ,cJ,pJ,SX,mJ,yJ,bJ,wJ,vJ,SJ,_J,TJ,FJ,zJ,OJ,PJ,$J,LJ,DJ,VJ,BJ,jJ,HJ,GJ,eQ,OX,nQ,aQ,iQ,lQ,OZ,uQ,dQ,pQ,mQ,yQ,EX,bQ,vQ,PZ,KJ,wQ,_Q,SQ,PX,EQ,TQ,CQ,NQ,MQ,FQ,DQ,zQ,$Q,LQ,BQ,jQ,UQ,qQ,XQ,MZ,QJ,YQ,JQ,QQ,e1,t1,n1,r1,a1,i1,o1,h1,c1,d1,p1,f1,m1,YJ,jX,y1,{kernelName:pb,backendName:"webgl",kernelFunc:b1},{kernelName:fb,backendName:"webgl",kernelFunc:x1},{kernelName:mb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:i}=r,o=n.readSync(a.dataId),[l,u]=XK(o,a.shape,a.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},{kernelName:gb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=r,[h,c,d,p]=a.shape,[f,m]=null!=u?u:[c,d],g=[h,f,m,p],y=new class{constructor(e,t,n,r,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let i,o="nearest"===n?1:2;switch(r){case"constant":i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4;break;default:i=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${i} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${a});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${a});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${o} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}(c,d,i,o,l,g);return n.runWebGLProgram(y,[a,s],"float32")}},UX,{kernelName:bb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;vG(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let i=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:u}=YK(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:xb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:s}=r;s<0&&(s+=a.shape.length);let i=a,o=i.shape.length,l=a.shape[s],u=new Array(o-1),h=0;for(let m=0;m<o;m++)m!==s&&(u[h++]=i.shape[m]);let c=[],d=new Array(o).fill(0),p=i.shape.slice();p[s]=1;let f=new Array(l);for(let m=0;m<f.length;m++){d[s]=m;let e=NZ({inputs:{x:i},backend:n,attrs:{begin:d,size:p}}),t=zX({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,c.push(e)}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},{kernelName:vb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r,o=a.shape.length,l=[],u=0,h=__.getAxesPermutation([u],o),c=a;null!=h&&(c=HX({inputs:{x:a},backend:n,attrs:{perm:h}}),l.push(c),u=__.getInnerMostAxes(1,o)[0]);let d=__.segment_util.computeOutShape(c.shape,u,i),p=zb.sizeFromShape([c.shape[u]]),f=zX({inputs:{x:c},backend:n,attrs:{shape:[-1,p]}});l.push(f);let m=kx(a.dtype),g=(e,t,r,a,s)=>{let i=e.shape[0],o=e.shape[1],u=__.segment_util.segOpComputeOptimalWindowSize(o,s),h={windowSize:u,inSize:o,batchSize:i,numSegments:s},c=new class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,i=s*Math.ceil(a/n);this.outputShape=[r,i];let o=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ",h="";a%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}(h,t),d=n.compileAndRun(c,[e,r],a);if(l.push(d),d.shape[1]===s)return d;let p=xQ({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),f=x1({inputs:{x:p},backend:n,attrs:{reps:[o/u]}});return l.push(p),l.push(f),g(d,t,f,a,s)},y=zX({inputs:{x:g(f,"unsortedSegmentSum",s,m,i)},backend:n,attrs:{shape:d}}),b=y;if(null!=h){l.push(y);let e=__.getUndoAxesPermutation(h);b=HX({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},cQ];for(let b6 of k1)Rb(b6);!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(v1||(v1={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid"}(A1||(A1={}));var S1={kernelName:Ib,backendName:"wasm",setupFunc:function(e){w1=e.wasm.cwrap(Ib,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:i,preluActivationWeights:o}=t;if("float32"!==a.dtype||"float32"!==s.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:c}=r,d=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(s.dataId).id,f=0;if(null!=i){let e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);f=e.id}let m=null==o?0:n.dataIdMap.get(o.dataId).id,g=A1[h];if(null==g)throw new Error(h+" activation not yet supported for FusedConv2D in the wasm backend.");let y=n.makeOutput([a.shape[0],l?a.shape[2]:a.shape[1],u?s.shape[1]:s.shape[2]],a.dtype),b=n.dataIdMap.get(y.dataId).id,x=new Uint8Array(new Int32Array(a.shape).buffer),v=new Uint8Array(new Int32Array(s.shape).buffer);return w1(d,x,a.shape.length,p,v,s.shape.length,l,u,g,f,m,c||0,b),y}};function I1(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){let{backend:n,inputs:{x:r}}=e,a=n.dataIdMap.get(r.dataId).id,s=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(s.dataId).id;return 0===zb.sizeFromShape(s.shape)||t(a,i),s}}}var _1=I1(Em);function E1(e,t,n){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){let{backend:s,inputs:i}=a,{a:o,b:l}=i,u=s.dataIdMap.get(o.dataId).id,h=s.dataIdMap.get(l.dataId).id,c=null!=n?n:o.dtype,d=__.assertAndGetBroadcastShape(o.shape,l.shape),p=s.makeOutput(d,c);if(0===zb.sizeFromShape(d))return p;let f=new Uint8Array(new Int32Array(o.shape).buffer),m=new Uint8Array(new Int32Array(l.shape).buffer),g=s.dataIdMap.get(p.dataId).id,y=()=>r(u,f,o.shape.length,h,m,l.shape.length,v1[o.dtype],g);if(t&&"float32"===o.dtype)return y(),p;let b=__.getBroadcastDims(o.shape,d),x=__.getBroadcastDims(l.shape,d),v=b.every((e,t)=>e===t),A=x.every((e,t)=>e===t);if(v&&A)return y(),p;throw new Error(`Broadcasting along outer dims is not yet supported for ${o.dtype} ${e}.`)}}}var T1,C1=E1(Nm,!0),N1={kernelName:Mm,backendName:"wasm",setupFunc:function(e){T1=e.wasm.cwrap(Mm,null,["array","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===zb.sizeFromShape(r.shape))return r;let a=t.map(e=>n.dataIdMap.get(e.dataId).id),s=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return T1(s,a.length,v1[r.dtype],i),r}};function M1(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var F1,R1={kernelName:$g,backendName:"wasm",kernelFunc:M1};function D1(e){let{inputs:t,backend:n,attrs:r}=e,[a,s]=function(e,t){let n=[],r=[];for(let a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(let a=0;a<r.length;++a){let e=-1;for(let t=0;t<r.length;++t)r[t]>=a&&(-1===e||r[e]>r[t])&&(e=t);r[e]=a}return[n,r]}(t.x.shape,r.perm),i=!0;for(let f=0;f<s.length;f++)s[f]!==f&&(i=!1);let o=function(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(i){let e=M1({inputs:t,backend:n});return e.shape=o,e}let u=n.makeOutput(o,l.dtype),h=n.dataIdMap.get(l.dataId).id,c=n.dataIdMap.get(u.dataId).id,d=new Uint8Array(new Int32Array(s).buffer),p=new Uint8Array(new Int32Array(l.shape).buffer);return F1(h,p,l.shape.length,v1[l.dtype],c,d,s.length),u}var O1,z1={kernelName:yb,backendName:"wasm",kernelFunc:D1,setupFunc:function(e){F1=e.wasm.cwrap(yb,null,["number","array","number","number","number","array","number"])}};function P1(e,t,n){let r=e.shape,a=e.shape.length,s=zb.parseAxisParam(t,r),i=s,o=__.getAxesPermutation(i,a),l=null,u=!1;if(null!=o){let t=new Array(a);for(let e=0;e<t.length;e++)t[e]=r[o[e]];i=__.getInnerMostAxes(i.length,a),l=D1({inputs:{x:e},attrs:{perm:o},backend:n});let s=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==s&&(u=!0)}return{transposed:l,originalAxes:s,axes:i,inputWasTransposed:u}}var $1,L1,V1,B1={kernelName:Fm,backendName:"wasm",setupFunc:function(e){O1=e.wasm.cwrap(Fm,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=i,{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=P1(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),__.assertAxesAreInnerMostDims("all",h,l.shape.length);let[p,f]=__.computeOutAndReduceShapes(l.shape,h),m=zb.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==zb.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;O1(o,m,e)}if(d&&t.disposeData(u.dataId),s){let e=__.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},W1={kernelName:Rm,backendName:"wasm",setupFunc:function(e){$1=e.wasm.cwrap(Rm,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=i,{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=P1(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),__.assertAxesAreInnerMostDims("any",h,l.shape.length);let[p,f]=__.computeOutAndReduceShapes(l.shape,h),m=zb.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==zb.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;$1(o,m,e)}if(d&&t.disposeData(u.dataId),s){let e=__.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},j1={kernelName:Dm,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a}=r,{x:s}=n,i=t.dataIdMap.get(s.dataId).id,o=i,l=s,{transposed:u,axes:h,inputWasTransposed:c}=P1(s,a,t);if(c){let e=t.dataIdMap.get(u.dataId).id;e!==i&&(l=u,o=e)}let d=l.shape.slice(0,-1),p=t.makeOutput(d,"int32"),f=t.dataIdMap.get(p.dataId).id,m=zb.sizeFromShape(p.shape);return L1(o,v1[l.dtype],m,l.shape[h[0]],f),c&&t.disposeData(u.dataId),p},setupFunc:function(e){L1=e.wasm.cwrap(Dm,null,["number","number","number","number","number"])}},H1={kernelName:Bm,backendName:"wasm",setupFunc:function(e){V1=e.wasm.cwrap(Bm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,s=r.dataIdMap.get(a.dataId).id,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=n,h=__.computePool2DInfo(a.shape,i,o,1,l,u),c=h.filterHeight,d=h.filterWidth,p=h.padInfo.top,f=h.padInfo.right,m=h.padInfo.bottom,g=h.padInfo.left,y=h.strideHeight,b=h.strideWidth,x=h.inChannels;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);if(1!==h.dilationWidth||1!==h.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${h.dilationHeight}, ${h.dilationWidth}].`);let v=r.makeOutput(h.outShape,"float32"),A=r.dataIdMap.get(v.dataId).id;return V1(s,a.shape[0],a.shape[1],a.shape[2],c,d,p,f,m,g,y,b,x,A),v}};function U1(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:a}=n,s=zb.sizeFromShape(r.shape),i=zb.inferFromImplicitShape(a,s);return zb.assert(s===zb.sizeFromShape(i),()=>`new shape: ${i}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var G1,q1={kernelName:My,backendName:"wasm",kernelFunc:U1},K1={kernelName:Um,backendName:"wasm",setupFunc:function(e){G1=e.wasm.cwrap(Um,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;if("float32"!==a.dtype||"float32"!==s.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=a.shape.length,u=s.shape.length,h=i?a.shape[l-2]:a.shape[l-1],c=o?s.shape[u-1]:s.shape[u-2],d=i?a.shape[l-1]:a.shape[l-2],p=o?s.shape[u-2]:s.shape[u-1],f=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=zb.sizeFromShape(f),y=zb.sizeFromShape(m);zb.assert(l>=2&&u>=2&&(g===y||1===g||1===y),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${f}) and (${m}).`);let b=(g>y?a.shape.slice(0,-2):s.shape.slice(0,-2)).concat([d,p]);zb.assert(h===c,()=>`Error in matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);let x=o?[y,p,c]:[y,c,p],v=U1({inputs:{x:a},backend:n,attrs:{shape:i?[g,h,d]:[g,d,h]}}),A=U1({inputs:{x:s},backend:n,attrs:{shape:x}}),w=n.dataIdMap.get(v.dataId).id,k=n.dataIdMap.get(A.dataId).id,S=i?v.shape[2]:v.shape[1],I=o?A.shape[1]:A.shape[2],_=Math.max(g,y),E=n.makeOutput([_,S,I],v.dtype),T=n.dataIdMap.get(E.dataId).id,C=new Uint8Array(new Int32Array(v.shape).buffer),N=new Uint8Array(new Int32Array(A.shape).buffer);return G1(w,C,v.shape.length,k,N,A.shape.length,i,o,T),n.disposeData(v.dataId),n.disposeData(A.dataId),E.shape=b,E}};function X1(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,a=r.makeOutput(t.shape,n),s=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(s),a}var Z1,Y1={kernelName:Km,backendName:"wasm",kernelFunc:X1},J1=I1(Xm),Q1={kernelName:Zm,backendName:"wasm",setupFunc:function(e){Z1=e.wasm.cwrap(Zm,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:s,clipValueMax:i}=r,o=n.dataIdMap.get(a.dataId).id,l=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(l.dataId).id;return Z1(o,s,i,u),l}};function e0(e){let{inputs:t,backend:n}=e,r=zb.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=__.computeOutShape(t.map(e=>e.shape),r),s=t.filter(e=>zb.sizeFromShape(e.shape)>0);if(1===s.length)return M1({inputs:{x:s[0]},backend:n});let i=n.makeOutput(a,t[0].dtype);if(0===zb.sizeFromShape(a))return i;let o=s.map(e=>e.shape);if(__.assertParamsConsistent(o,r),"string"===s[0].dtype){let e=s.map(e=>{let t=zb.sizeFromShape(e.shape.slice(r));return U1({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),o=e.map(e=>({vals:n.readSync(e.dataId),shape:e.shape}));a=__.computeOutShape(e.map(e=>e.shape),1);let l=Eq(o,a,t[0].dtype,1===e[0].shape[0]),u=__.computeOutShape(s.map(e=>e.shape),r);return i.shape=u,n.dataIdMap.get(i.dataId).stringBytes=__.fromStringArrayToUint8(l),e.forEach(e=>n.disposeData(e.dataId)),i}let l=zb.sizeFromShape(s[0].shape.slice(0,r)),u=0,h=s.map(e=>{let t=zb.sizeFromShape(e.shape.slice(r));return u+=t,t}),c=s.map(e=>n.typedArrayFromHeap(e)),d=n.typedArrayFromHeap(i);for(let p=0;p<l;p++){let e=p*u;for(let t=0;t<c.length;t++){let n=h[t],r=p*n,a=c[t].subarray(r,r+n);d.set(a,e),e+=n}}return i}var t0,n0,r0,a0,s0={kernelName:Qm,backendName:"wasm",kernelFunc:e0},i0={kernelName:eg,backendName:"wasm",setupFunc:function(e){t0=e.wasm.cwrap(eg,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s}=t,i=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(s.dataId).id,{strides:l,dilations:u,pad:h,dimRoundingMode:c,dataFormat:d}=n,p=__.convertConv2DDataFormat(d),f=__.computeConv2DInfo(a.shape,s.shape,l,u,h,c,!1,p),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,b=f.padInfo.right,x=f.padInfo.bottom,v=f.padInfo.left,A=f.dilationHeight,w=f.dilationWidth,k=f.strideHeight,S=f.strideWidth,I=f.inChannels,_=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);let T=r.makeOutput(f.outShape,"float32"),C=r.dataIdMap.get(T.dataId).id;return t0(i,a.shape[0],a.shape[1],a.shape[2],o,m,g,y,b,x,v,E,A,w,k,S,I,_,C),T}},o0={kernelName:ng,backendName:"wasm",setupFunc:function(e){n0=e.wasm.cwrap(ng,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{dy:a,filter:s}=n,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,inputShape:h}=r,c=__.convertConv2DDataFormat(l),d=__.computeConv2DInfo(h,s.shape,i,1,o,u,!1,c),{batchSize:p,filterHeight:f,filterWidth:m,inChannels:g,inHeight:y,inWidth:b,outChannels:x,outHeight:v,outWidth:A,strideHeight:w,strideWidth:k}=d,S=f-1-d.padInfo.top,I=m-1-d.padInfo.left,_="channelsLast"===d.dataFormat,E=zb.computeStrides(d.inShape),T=zb.computeStrides(a.shape),[C,N,M]=zb.computeStrides(s.shape),F=E[0],R=_?E[1]:E[2],D=_?E[2]:1,O=_?1:E[1],z=T[0],P=_?T[1]:T[2],$=_?T[2]:1,L=_?1:T[1],V=t.makeOutput(d.inShape,"float32"),B=t.dataIdMap.get(V.dataId).id,W=t.dataIdMap.get(a.dataId).id,j=t.dataIdMap.get(s.dataId).id;return n0(W,j,p,f,m,y,b,g,v,A,x,w,k,S,I,C,N,M,F,R,D,O,z,P,$,L,B),V}},l0=I1(ig);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(r0||(r0={}));var u0,h0,c0,d0={kernelName:ug,backendName:"wasm",setupFunc:function(e){a0=e.wasm.cwrap(ug,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{method:s,extrapolationValue:i,cropSize:o}=a,{image:l,boxes:u,boxInd:h}=r,c=u.shape[0],[d,p]=o,f=[c,d,p,l.shape[3]],m=n.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=X1({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),m=n.dataIdMap.get(t.dataId));let g=m.id,y=n.dataIdMap.get(u.dataId).id,b=n.dataIdMap.get(h.dataId).id,x=n.makeOutput(f,"float32"),v=n.dataIdMap.get(x.dataId).id,A=new Uint8Array(new Int32Array(l.shape).buffer);return a0(g,y,b,c,A,d,p,r0[s],i,v),null!=t&&n.disposeData(t.dataId),x}},p0={kernelName:lg,backendName:"wasm",setupFunc:function(e){u0=e.wasm.cwrap(lg,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r,l=a.shape.length;zb.assert("float32"===a.dtype||"int32"===a.dtype,()=>`cumsum does not support ${a.dtype} tensors in the WASM backend`);let u=__.getAxesPermutation([s],l),h=a;null!==u&&(h=D1({inputs:{x:a},attrs:{perm:u},backend:n}));let c=__.getInnerMostAxes(1,l)[0];__.assertAxesAreInnerMostDims("cumsum",[c],l);let d=n.makeOutput(h.shape,h.dtype),p=h.shape[c],f=n.dataIdMap.get(h.dataId).id,m=n.dataIdMap.get(d.dataId).id;u0(f,i?1:0,o?1:0,p,m,v1[a.dtype]);let g=d;return null!==u&&(g=D1({inputs:{x:d},attrs:{perm:__.getUndoAxesPermutation(u)},backend:n}),n.disposeData(h.dataId),n.disposeData(d.dataId)),g}},f0={kernelName:cg,backendName:"wasm",setupFunc:function(e){h0=e.wasm.cwrap(cg,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{blockSize:s,dataFormat:i}=r;zb.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);let o=a.shape[0],l=("NHWC"===i?a.shape[1]:a.shape[2])*s,u=("NHWC"===i?a.shape[2]:a.shape[3])*s,h=("NHWC"===i?a.shape[3]:a.shape[1])/(s*s),c="NHWC"===i?[o,l,u,h]:[o,h,l,u],d=t.makeOutput(c,"float32"),p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(zb.computeStrides(a.shape)).buffer),m=new Uint8Array(new Int32Array(c).buffer),g=new Uint8Array(new Int32Array(zb.computeStrides(c)).buffer),y=t.dataIdMap.get(d.dataId).id;return h0(p,s,"NHWC"===i?1:0,f,a.shape.length-1,m,g,c.length,y),d}},m0={kernelName:dg,backendName:"wasm",setupFunc:function(e){c0=e.wasm.cwrap(dg,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s}=t,i=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(s.dataId).id,{strides:l,dilations:u,pad:h,dimRoundingMode:c}=n,d=__.computeConv2DInfo(a.shape,s.shape,l,null==u?[1,1]:u,h,c,!0),p=d.filterHeight,f=d.filterWidth,m=d.padInfo.top,g=d.padInfo.right,y=d.padInfo.bottom,b=d.padInfo.left,x=d.dilationHeight,v=d.dilationWidth,A=d.strideHeight,w=d.strideWidth,k=d.inChannels,S=d.outChannels,I="SAME"===d.padInfo.type?1:0;if("channelsLast"!==d.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${d.dataFormat}'. Please use 'channelsLast'.`);let _=r.makeOutput(d.outShape,"float32"),E=r.dataIdMap.get(_.dataId).id;return c0(i,a.shape[0],a.shape[1],a.shape[2],o,p,f,m,g,y,b,I,x,v,A,w,k,S,E),_}},g0=E1(Sg,!1,"bool"),y0=I1(Ig);function b0(e){let{inputs:t,attrs:n,backend:r}=e,{input:a}=t,{dim:s}=n,i=a.shape.length,o=a.shape.slice(),l=s;return s<0&&(zb.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),U1({inputs:{x:a},backend:r,attrs:{shape:o}})}var x0,v0,A0,w0,k0,S0,I0,_0,E0,T0,C0,N0,M0,F0={kernelName:_g,backendName:"wasm",kernelFunc:b0},R0={kernelName:Cg,backendName:"wasm",kernelFunc:function(e){let{attrs:{shape:t,value:n,dtype:r},backend:a}=e,s=a.makeOutput(t,r);return a.typedArrayFromHeap(s).fill(n),s}},D0={kernelName:Ng,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{image:r}=t,a=n.makeOutput(r.shape,r.dtype),s=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,[o,l,u,h]=r.shape;return x0(s,o,l,u,h,i),a},setupFunc:function(e){x0=e.wasm.cwrap(Ng,null,["number","number","number","number","number","number"])}},O0=I1(Mg),z0=E1(Fg,!1),P0={kernelName:Rg,backendName:"wasm",setupFunc:function(e){v0=e.wasm.cwrap(Rg,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:a}=r,{x:s,mean:i,variance:o,offset:l,scale:u}=n,h=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,p=null!=l?t.dataIdMap.get(l.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(s.shape,s.dtype);if(0===zb.sizeFromShape(s.shape))return m;let g=t.dataIdMap.get(m.dataId).id;return v0(h,c,d,p,f,a,g),m}},$0={kernelName:_b,backendName:"wasm",setupFunc:function(e){A0=e.wasm.cwrap(_b,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dataFormat:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=n,m=__.computeConv2DInfo(a.shape,s.shape,l,h,u,d),g=A1[p];if(null==g)throw new Error(p+" activation not yet supported for FusedConv2D in the wasm backend.");let y=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,x=m.outChannels,v=0;if(null!=i){let e=r.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==x)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${x})`);v=e.id}let A=m.filterHeight,w=m.filterWidth,k=m.padInfo.top,S=m.padInfo.right,I=m.padInfo.bottom,_=m.padInfo.left,E=m.dilationHeight,T=m.dilationWidth,C=m.strideHeight,N=m.strideWidth,M=m.inChannels,F="SAME"===m.padInfo.type?1:0,R=m.batchSize,D=m.inHeight,O=m.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);let z=r.makeOutput(m.outShape,"float32"),P=r.dataIdMap.get(z.dataId).id,$=null==o?0:r.dataIdMap.get(o.dataId).id;return A0(y,R,D,O,b,A,w,v,k,S,I,_,F,E,T,C,N,M,x,g,$,f||0,P),z}},L0={kernelName:Eb,backendName:"wasm",setupFunc:function(e){w0=e.wasm.cwrap(Eb,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dataFormat:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=n,m=__.computeConv2DInfo(a.shape,s.shape,l,h,u,d,!0),g=A1[p];if(null==g)throw new Error(p+" activation not yet supported for FusedDepthwiseConv2D in the wasm backend.");let y=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,x=m.outChannels,v=0;if(null!=i){let e=r.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==x)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${x})`);v=e.id}let A=m.filterHeight,w=m.filterWidth,k=m.padInfo.top,S=m.padInfo.right,I=m.padInfo.bottom,_=m.padInfo.left,E=m.dilationHeight,T=m.dilationWidth,C=m.strideHeight,N=m.strideWidth,M=m.inChannels,F="SAME"===m.padInfo.type?1:0,R=m.batchSize,D=m.inHeight,O=m.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);let z=r.makeOutput(m.outShape,"float32"),P=r.dataIdMap.get(z.dataId).id,$=null==o?0:r.dataIdMap.get(o.dataId).id;return w0(y,R,D,O,b,A,w,v,k,S,I,_,F,E,T,C,N,M,x,g,$,f||0,P),z}},V0={kernelName:Og,backendName:"wasm",setupFunc:function(e){k0=e.wasm.cwrap(Og,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n}=e,{params:r,indices:a}=n,[s,i,o,l]=hA.prepareAndValidate(r,a),u=t.makeOutput(s,r.dtype);if(0===i)return u;let h=a.shape,c=h[h.length-1],d=t.dataIdMap.get(r.dataId).id,p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(u.dataId).id;return k0(d,v1[r.dtype],p,i,c,o,f,m),u}},B0={kernelName:Dg,backendName:"wasm",setupFunc:function(e){S0=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,indices:s}=n,{axis:i,batchDims:o}=r,l=zb.parseAxisParam(i,a.shape)[0],u=__.segment_util.collectGatherOpShapeInfo(a,s,l,o),h=U1({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),c=zb.sizeFromShape(s.shape),d=U1({inputs:{x:s},attrs:{shape:[u.batchSize,c/u.batchSize]},backend:t}),p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize],f=t.makeOutput(p,a.dtype);if(0===zb.sizeFromShape(a.shape))return f;let m=h.shape.length-1,g=t.dataIdMap.get(h.dataId).id,y=t.dataIdMap.get(d.dataId).id,b=t.dataIdMap.get(f.dataId).id,x=new Uint8Array(new Int32Array(zb.computeStrides(h.shape)).buffer),v=new Uint8Array(new Int32Array(zb.computeStrides(p)).buffer);return S0(g,v1[a.dtype],x,m,y,u.batchSize,v,b),t.disposeData(h.dataId),t.disposeData(d.dataId),f.shape=u.outputShape,f}},W0=E1(zg,!1,"bool"),j0=E1(Pg,!1,"bool"),H0={kernelName:Hg,backendName:"wasm",setupFunc:function(e){I0=e.wasm.cwrap(Hg,null,["number","number","number"])},kernelFunc:function(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,a=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(t.shape,t.dtype);if(0!==zb.sizeFromShape(t.shape)){let e=r.dataIdMap.get(s.dataId).id;I0(a,n,e)}return s}},U0=E1(Ug,!1,"bool"),G0=E1(Gg,!1,"bool"),q0=I1(Kg),K0=E1(Zg,!1,"bool"),X0={kernelName:ty,backendName:"wasm",setupFunc:function(e){_0=e.wasm.cwrap(ty,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=i,{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=P1(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),__.assertAxesAreInnerMostDims("max",h,l.shape.length);let[p,f]=__.computeOutAndReduceShapes(l.shape,h),m=zb.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==zb.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;_0(o,m,e)}if(d&&t.disposeData(u.dataId),s){let e=__.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},Z0=E1(ny,!1),Y0={kernelName:ry,backendName:"wasm",setupFunc:function(e){E0=e.wasm.cwrap(ry,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,s=r.dataIdMap.get(a.dataId).id,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=n,h=__.computePool2DInfo(a.shape,i,o,1,l,u),c=h.filterHeight,d=h.filterWidth,p=h.padInfo.top,f=h.padInfo.right,m=h.padInfo.bottom,g=h.padInfo.left,y=h.dilationHeight,b=h.dilationWidth,x=h.strideHeight,v=h.strideWidth,A=h.inChannels,w=h.outChannels;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);let k=r.makeOutput(h.outShape,"float32"),S=r.dataIdMap.get(k.dataId).id;return E0(s,a.shape[0],a.shape[1],a.shape[2],c,d,p,f,m,g,y,b,x,v,A,w,S),k}},J0={kernelName:ly,backendName:"wasm",setupFunc:function(e){T0=e.wasm.cwrap(ly,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=o,u=i,{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=P1(i,a,t),f=c;if(p){let e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=__.getInnerMostAxes(f.length,u.shape.length))}__.assertAxesAreInnerMostDims("mean",f,u.shape.length);let[m,g]=__.computeOutAndReduceShapes(u.shape,f),y=zb.sizeFromShape(g),b=u;"float32"!==u.dtype&&(b=X1({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(b.dataId).id);let x=t.makeOutput(m,"float32");if(0!==zb.sizeFromShape(u.shape)){let e=t.dataIdMap.get(x.dataId).id;T0(l,y,e)}if(p&&t.disposeData(h.dataId),s){let e=__.expandShapeToKeepDim(x.shape,d);x.shape=e}return"float32"!==u.dtype&&t.disposeData(b.dataId),x}},Q0={kernelName:uy,backendName:"wasm",setupFunc:function(e){C0=e.wasm.cwrap(uy,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=o,u=i,{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=P1(i,a,t);if(p){let e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e)}__.assertAxesAreInnerMostDims("min",c,u.shape.length);let[f,m]=__.computeOutAndReduceShapes(u.shape,c),g=zb.sizeFromShape(m),y=t.makeOutput(f,u.dtype);if(0!==zb.sizeFromShape(u.shape)){let e=t.dataIdMap.get(y.dataId).id;C0(l,g,e)}if(p&&t.disposeData(h.dataId),s){let e=__.expandShapeToKeepDim(y.shape,d);y.shape=e}return y}},e2=E1(hy,!1);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(N0||(N0={}));var t2,n2={kernelName:cy,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:a}}=e,s=r.map((e,n)=>e[0]+t.shape[n]+e[1]),i=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(s,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),h=r.map(e=>e[0]),c=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(h).buffer),p=new Uint8Array(new Int32Array(c).buffer);return M0(i,u,t.shape.length,v1[t.dtype],d,p,N0[a],l),o},setupFunc:function(e){M0=e.wasm.cwrap(cy,null,["number","array","number","number","array","array","number","number"])}},r2=E1(fy,!0),a2=I1(my);function s2(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],s=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:s,pValidOutputs:i}}var i2,o2,l2,u2,h2,c2,d2,p2,f2,m2,g2,y2,b2,x2,v2,A2,w2,k2,S2,I2={kernelName:yy,backendName:"wasm",setupFunc:function(e){t2=e.wasm.cwrap(yy,"number",["number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i}=r,{boxes:o,scores:l}=n,u=t.dataIdMap.get(o.dataId).id,h=t.dataIdMap.get(l.dataId).id,c=t2(u,h,s,a,i),{pSelectedIndices:d,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=s2(t,c);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",d)}},_2={kernelName:by,backendName:"wasm",setupFunc:function(e){i2=e.wasm.cwrap(by,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i,padToMaxOutputSize:o}=r,{boxes:l,scores:u}=n,h=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=i2(h,c,s,a,i,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=s2(t,d);return t.wasm._free(m),[t.makeOutput([f],"int32",p),t.makeOutput([],"int32",g)]}},E2={kernelName:xy,backendName:"wasm",setupFunc:function(e){o2=e.wasm.cwrap(xy,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i,softNmsSigma:o}=r,{boxes:l,scores:u}=n,h=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=o2(h,c,s,a,i,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=s2(t,d);return t.wasm._free(g),[t.makeOutput([f],"int32",p),t.makeOutput([f],"float32",m)]}},T2=E1(gy,!1,"bool"),C2={kernelName:Ay,backendName:"wasm",setupFunc:function(e){l2=e.wasm.cwrap(Ay,null,["number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r,l=n.makeOutput([...a.shape,s],"int32"),u=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(a.dataId).id;return l2(h,s,i,o,u),l}},N2={kernelName:vy,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},M2={kernelName:wy,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return b0({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let s=t[0].shape,i=t[0].dtype;t.forEach(e=>{zb.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),zb.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=e0({inputs:t.map(e=>{let t=b0({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeData(e.dataId)),l}},F2={kernelName:ky,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:a}}=e,s=r.map((e,n)=>e[0]+t.shape[n]+e[1]),i=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(s,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),h=r.map(e=>e[0]),c=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(h).buffer),p=new Uint8Array(new Int32Array(c).buffer);return u2(i,u,t.shape.length,v1[t.dtype],d,p,a,l),o},setupFunc:function(e){u2=e.wasm.cwrap(ky,null,["number","array","number","number","array","array","number","number"])}},R2=E1(Sy,!1),D2={kernelName:Iy,backendName:"wasm",setupFunc:function(e){h2=e.wasm.cwrap(Iy,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,o=n.makeOutput(r.shape,"float32"),l=n.dataIdMap.get(o.dataId).id;return h2(s,i,l),o}},O2={kernelName:_y,backendName:"wasm",setupFunc:function(e){c2=e.wasm.cwrap(_y,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=o,u=i,{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=P1(i,a,t),f=c;if(p){let e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=__.getInnerMostAxes(f.length,u.shape.length))}__.assertAxesAreInnerMostDims("prod",f,u.shape.length);let[m,g]=__.computeOutAndReduceShapes(u.shape,f),y=zb.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(0!==zb.sizeFromShape(u.shape)){let e=t.dataIdMap.get(b.dataId).id;c2(l,y,v1[b.dtype],e)}if(p&&t.disposeData(h.dataId),s){let e=__.expandShapeToKeepDim(b.shape,d);b.shape=e}return b}},z2={kernelName:Ey,backendName:"wasm",kernelFunc:e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:i}=n,o=Xq(r,a,s,i),l=t.makeOutput([o.length],i);return t.typedArrayFromHeap(l).set(o),l}},P2=E1(xg,!0),$2=I1(Ny),L2=I1(zy),V2={kernelName:Dy,backendName:"wasm",setupFunc:function(e){d2=e.wasm.cwrap(Dy,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{images:s}=r,{alignCorners:i,halfPixelCenters:o,size:l}=a,[u,h]=l,[c,d,p,f]=s.shape,m=[c,u,h,f],g=n.dataIdMap.get(s.dataId);"float32"!==g.dtype&&(t=X1({backend:n,inputs:{x:s},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));let y=g.id,b=n.makeOutput(m,"float32");if(0===zb.sizeFromShape(s.shape))return b;let x=n.dataIdMap.get(b.dataId).id;return d2(y,c,d,p,f,u,h,i?1:0,o?1:0,x),null!=t&&n.disposeData(t.dataId),b}},B2={kernelName:Py,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,i=zb.parseAxisParam(s,a.shape);if(0===a.shape.length)return M1({inputs:{x:a},backend:n});let o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,h=new Uint8Array(new Int32Array(i).buffer),c=new Uint8Array(new Int32Array(a.shape).buffer);p2(l,h,i.length,c,a.shape.length,u);let d=U1({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){p2=e.wasm.cwrap(Py,null,["number","array","number","array","number","number"])}},W2={kernelName:Sb,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{radians:s,fillValue:i,center:o}=r,l=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(l.dataId).id,[c,d,p,f]=a.shape,[m,g]=__.getImageCenter(o,d,p),y="number"==typeof i?[i,i,i,0===i?0:255]:[...i,255],b=new Uint8Array(new Int32Array(y).buffer);return f2(u,c,d,p,f,s,m,g,b,y.length,h),l},setupFunc:function(e){f2=e.wasm.cwrap(Sb,null,["number","number","number","number","number","number","number","number","array","number","number"])}},j2=I1($y);function H2(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:a}=e,[s,i]=gA.parseSliceParams(t,n,r),o=gA.isSliceContinous(t.shape,s,i),l=a.readSync(t.dataId),u=a.makeOutput(i,t.dtype),h=zb.computeStrides(t.shape),c=a.dataIdMap.get(u.dataId);if(o){let e=gA.computeFlatOffset(s,h);return"string"===t.dtype?c.stringBytes=l.slice(e,e+zb.sizeFromShape(i)):a.typedArrayFromHeap(u).set(l.subarray(e,e+zb.sizeFromShape(i))),u}if("string"===t.dtype){let e=Yq(l,s,i,t.shape,t.dtype);return c.stringBytes=e,u}let d=a.typedArrayFromHeap(u),p=t.shape.length;if(2===p)!function(e,t,n,r,a){let s=0,i=r[0],o=r[1],l=i+a[0];for(let u=i;u<l;u++){let r=u*t+o;n.set(e.subarray(r,r+a[1]),s),s+=a[1]}}(l,h[0],d,s,i);else if(3===p)!function(e,t,n,r,a,s){let i=0,o=a[0],l=a[1],u=a[2],h=o+s[0],c=l+s[1];for(let d=o;d<h;d++)for(let a=l;a<c;a++){let o=d*t+a*n+u;r.set(e.subarray(o,o+s[2]),i),i+=s[2]}}(l,h[0],h[1],d,s,i);else if(4===p)!function(e,t,n,r,a,s,i){let o=0,l=s[0],u=s[1],h=s[2],c=l+i[0],d=u+i[1],p=h+i[2],f=s[3];for(let m=l;m<c;m++)for(let s=u;s<d;s++)for(let l=h;l<p;l++){let u=m*t+s*n+l*r+f;a.set(e.subarray(u,u+i[3]),o),o+=i[3]}}(l,h[0],h[1],h[2],d,s,i);else{let e=Yq(l,s,i,t.shape,t.dtype);d.set(e)}return u}var U2=[_1,C1,N1,B1,W1,j1,H1,K1,Y1,J1,Q1,s0,i0,o0,l0,d0,p0,f0,m0,g0,y0,F0,R0,D0,O0,z0,S1,P0,$0,L0,V0,B0,W0,j0,R1,H0,U0,G0,q0,K0,X0,Z0,Y0,J0,Q0,e2,n2,r2,a2,I2,_2,E2,T2,C2,N2,M2,F2,R2,D2,O2,z2,P2,$2,L2,q1,V2,B2,W2,I1(Ly),j2,{kernelName:Vy,backendName:"wasm",setupFunc:function(e){m2=e.wasm.cwrap(Vy,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{indices:a,updates:s}=n,{shape:i}=r,o=t.makeOutput(i,s.dtype);if(0===zb.sizeFromShape(i))return o;let{sliceRank:l,numUpdates:u,sliceSize:h,strides:c,outputSize:d}=dA.calculateShapes(s,a,i),p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(s.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(o.dataId).id;return m2(p,f,v1[s.dtype],l,u,h,m,d,g),o}},{kernelName:By,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(s.dataId).id,u=n.makeOutput(a.shape,a.dtype),h=n.dataIdMap.get(u.dataId).id,c=r.shape.length,d=0===c||c>1||1===a.shape.length?1:zb.sizeFromShape(a.shape.slice(1));return g2(i,o,l,d,h),u},setupFunc:function(e){g2=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){y2=e.wasm.cwrap(qy,null,["number","number"])},kernelFunc:function(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(a.dataId).id;return 0===zb.sizeFromShape(a.shape)||y2(r,s),a}},I1(Hy),{kernelName:jy,backendName:"wasm",kernelFunc:H2},{kernelName:Qy,backendName:"wasm",setupFunc:function(e){b2=e.wasm.cwrap(Qy,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,a=t.dataIdMap.get(n.dataId).id,s=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(s.dataId).id,o=n.shape[r],l=zb.sizeFromShape(n.shape)/o;return 0===zb.sizeFromShape(s.shape)||b2(a,i,o,l),s}},{kernelName:Jy,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=n,o=zb.parseAxisParam(i,a.shape)[0],l=__.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{let t=[...h];t[o]=e;let n=H2({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[o]+=e,n})}},I1(Xy),I1(ib),E1(sb,!0),{kernelName:wb,backendName:"wasm",setupFunc:function(e){x2=e.wasm.cwrap(wb,null,["number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:a}=r,{x:s}=n,i=t.dataIdMap.get(s.dataId).id,o=t.makeOutput(s.shape,s.dtype),l=t.dataIdMap.get(o.dataId).id;return x2(i,a,l),o}},{kernelName:ob,backendName:"wasm",setupFunc:function(e){v2=e.wasm.cwrap(ob,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{begin:s,end:i,strides:o}=r;null==o&&(o=new Array(s.length));let{beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:c,shrinkAxisMask:d}=r,p=__.slice_util.maskToAxes(h);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==h&&0!==c)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==h&&0!==d)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");let f=a.shape.length-s.length,m=__.slice_util.maskToAxes(c),g=a.shape.slice();m.forEach(e=>{s[e]=0,i[e]=1,g.splice(e,0,1)});let y=U1({inputs:{x:a},attrs:{shape:g},backend:t}),{begin:b,end:x,strides:v}=__.slice_util.getNormalizedAxes(y.shape,p,f,s,i,o,l,u,h);s=b,i=x,o=v;let A=__.slice_util.maskToAxes(d);A.forEach(e=>{i[e]=s[e]+1,o[e]=1});let w=__.slice_util.computeOutShape(s,i,o),k=w.filter((e,t)=>-1===A.indexOf(t));if(o.every(e=>1===e)){let e=H2({inputs:{x:y},attrs:{begin:s,size:w},backend:t});t.disposeData(y.dataId);let n=U1({inputs:{x:e},attrs:{shape:k},backend:t});return t.disposeData(e.dataId),n}let S=t.makeOutput(k,"float32");if(!k.some(e=>0===e)){let e=t.dataIdMap.get(y.dataId).id,n=new Uint8Array(new Int32Array(zb.computeStrides(y.shape)).buffer),r=new Uint8Array(new Int32Array(s).buffer),a=new Uint8Array(new Int32Array(i).buffer),l=new Uint8Array(new Int32Array(o).buffer),u=new Uint8Array(new Int32Array(k).buffer),h=new Uint8Array(new Int32Array(zb.computeStrides(k)).buffer),c=t.dataIdMap.get(S.dataId).id;v2(e,n,y.shape.length,r,a,l,u,h,k.length,c)}t.disposeData(y.dataId);let I=U1({inputs:{x:S},attrs:{shape:k},backend:t});return t.disposeData(S.dataId),I}},E1(cb,!0),{kernelName:Zy,backendName:"wasm",setupFunc:function(e){A2=e.wasm.cwrap(Zy,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id,l=o,u=i,{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=P1(i,a,t),f=c;if(p){let e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=__.getInnerMostAxes(f.length,u.shape.length))}__.assertAxesAreInnerMostDims("sum",f,u.shape.length);let[m,g]=__.computeOutAndReduceShapes(u.shape,f),y=zb.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(0!==zb.sizeFromShape(u.shape)){let e=t.dataIdMap.get(b.dataId).id;A2(l,y,e)}if(p&&t.disposeData(h.dataId),s){let e=__.expandShapeToKeepDim(b.shape,d);b.shape=e}return b}},I1(db),I1(pb),{kernelName:fb,backendName:"wasm",setupFunc:function(e){w2=e.wasm.cwrap(fb,null,["number","array","number","array","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,s=n.dataIdMap.get(a.dataId).id,{reps:i}=r,o=new Array(a.shape.length);for(let d=0;d<o.length;d++)o[d]=a.shape[d]*i[d];let l=new Uint8Array(new Int32Array(a.shape).buffer),u=new Uint8Array(new Int32Array(o).buffer),h=n.makeOutput(o,a.dtype),c=n.dataIdMap.get(h.dataId).id;return w2(s,l,a.shape.length,u,o.length,v1[h.dtype],c),h}},{kernelName:mb,backendName:"wasm",setupFunc:function(e){k2=e.wasm.cwrap(mb,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{k:a,sorted:s}=n,i=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=a;let u=t.makeOutput(l,r.dtype),h=t.dataIdMap.get(u.dataId).id,c=t.makeOutput(l,"int32"),d=t.dataIdMap.get(c.dataId).id;return k2(i,o,r.shape.length,v1[r.dtype],a,s,h,d),[u,c]}},{kernelName:gb,backendName:"wasm",setupFunc:function(e){S2=e.wasm.cwrap(gb,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{image:s,transforms:i}=r,{interpolation:o,fillMode:l,fillValue:u,outputShape:h}=a,[c,d,p,f]=s.shape,[m,g]=null!=h?h:[d,p],y=[c,m,g,f],b=new Uint8Array(new Int32Array(zb.computeStrides(s.shape)).buffer),x=n.makeOutput(y,s.dtype),v=n.dataIdMap.get(x.dataId).id,A=n.dataIdMap.get(s.dataId).id,w=n.dataIdMap.get(i.dataId).id,k="nearest"===o?1:2;switch(l){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1}return S2(A,w,i.shape[0]>1,c,m,g,f,p,d,b,s.shape.length-1,k,t,u,v),x}},z1,{kernelName:xb,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:s}=r;s<0&&(s+=a.shape.length);let i=a.shape[s],o=a.shape.length,l=new Array(o-1),u=0;for(let p=0;p<o;p++)p!==s&&(l[u++]=a.shape[p]);let h=new Array(i),c=new Array(o).fill(0),d=a.shape.slice();d[s]=1;for(let p=0;p<h.length;p++)c[s]=p,h[p]=H2({inputs:{x:a},attrs:{begin:c,size:d},backend:n});return h.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:l}))}},{kernelName:Ab,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}];for(let b6 of U2)Rb(b6);var G2=wm();G2.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))),G2.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(G2.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(Ya){return!1}});var q2=_(Z()),K2=_(Y()),X2=class extends If{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.init(),this.dataIdMap=new Sf(this,PA())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=zb.now();return e(),{kernelMs:zb.now()-t}}move(e,t,n,r,a){let s=this.dataIdNextNumber++;if("string"===r)return void this.dataIdMap.set(e,{id:s,stringBytes:t,shape:n,dtype:r,memoryOffset:null,refCount:a});let i=zb.sizeFromShape(n),o=i*zb.bytesPerElement(r),l=this.wasm._malloc(o);this.dataIdMap.set(e,{id:s,memoryOffset:l,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(s,i,l),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e){let{memoryOffset:t,dtype:n,shape:r,stringBytes:a}=this.dataIdMap.get(e);return"string"===n?a:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype "+t)}}(this.wasm.HEAPU8.slice(t,t+zb.sizeFromShape(r)*zb.bytesPerElement(n)).buffer,n)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n){let r;if(null==n)r=this.write(null,e,t);else{let a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});let s=zb.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,s,n)}return{dataId:r,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:a}=this.dataIdMap.get(n),s=zb.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,a,s);case"int32":return new Int32Array(r,a,s);case"bool":return new Uint8Array(r,a,s);default:throw new Error("Unknown dtype "+t)}}};function Z2(e,t,n){if(null!=J2)return J2;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=e3&&null!=e3[r]?e3[r]:n+r}var Y2=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],J2=null,Q2=null,e3={},t3=!1,n3=!1;function r3(e,t=!1){if(function(e){wm().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),t3)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");J2=e,n3=t}function a3(e,t=!1){if(t3)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Q2=e;else{e3=e;let t=Y2.filter(e=>null==e3[e]);if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}n3=t}var s3="3.7.0";WA("wasm",async()=>{let{wasm:e}=await async function(){let[e,t]=await Promise.all([wm().getAsync("WASM_HAS_SIMD_SUPPORT"),wm().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let a={locateFile:(n,r)=>{if(n.endsWith(".worker.js")){let e=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(e)}return n.endsWith(".wasm")?Z2(e,t,null!=Q2?Q2:r):r+n}};n3&&(a.instantiateWasm=function(e){return(t,n)=>(zb.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a(`failed to load wasm binary file at '${e}'`),r.arrayBuffer().then(e=>{WebAssembly.instantiate(e,t).then(e=>{n(e.instance,e.module)})})}),{})}(Z2(e,t,null!=Q2?Q2:"")));let s,i=!1;a.onAbort=()=>{i||t3||(t3=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==J2?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+q2.default.toString()],{type:"text/javascript"}),s=(0,q2.default)(a)):s=(0,K2.default)(a),s.then(e=>{i=!0,t3=!1,e.tfjs={init:e.cwrap("init",null,[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})})})}();return new X2(e)},2);var i3={tfjs:"3.7.0","tfjs-core":"3.7.0","tfjs-data":"3.7.0","tfjs-layers":"3.7.0","tfjs-converter":"3.7.0","tfjs-backend-cpu":"3.7.0","tfjs-backend-webgl":"3.7.0","tfjs-backend-wasm":"3.7.0"},o3={name:"humangl",priority:99,canvas:null,gl:null,width:1024,height:1024,extensions:[],webGLattr:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!1,desynchronized:!0}};function l3(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]]}}function u3(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function h3(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function c3(e,t,n){let r=t.shape[1],a=t.shape[2];return gp.cropAndResize(t,[[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a]],[0],n)}function d3(e,t=1.5){let n=h3(e),r=u3(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:e.landmarks}}function p3(e){let t=h3(e),n=u3(e),r=Math.max(...n)/2;return{startPoint:[Math.round(t[0]-r),Math.round(t[1]-r)],endPoint:[Math.round(t[0]+r),Math.round(t[1]+r)],landmarks:e.landmarks}}function f3(e){let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return{startPoint:[Math.min(...t),Math.min(...n)],endPoint:[Math.max(...t),Math.max(...n)],landmarks:e}}var m3=e=>({startPoint:Wl(e,[0,0],[-1,2]),endPoint:Wl(e,[0,2],[-1,2])}),g3=[[1,0,0],[0,1,0],[0,0,1]];function y3(e,t){return function(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}(Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))}function b3(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function x3(e,t){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}function v3(e,t){let n=[];for(let r=0;r<e.length;r++)n.push(e[r][t]);return n}function A3(e,t){let n=[],r=e.length;for(let a=0;a<r;a++){n.push([]);for(let s=0;s<r;s++)n[a].push(x3(e[a],v3(t,s)))}return n}function w3(e,t){let n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],s=A3(b3(t[0],t[1]),a);return A3(s,b3(-t[0],-t[1]))}function k3(e,t){return[x3(e,t[0]),x3(e,t[1])]}async function S3(e){let t=await e$(h(e.modelBasePath,e.face.detector.modelPath),{fromTFHub:e.face.detector.modelPath.includes("tfhub.dev")}),n=new class{constructor(e,t){this.model=e,this.anchorsData=function(e){let t={strides:[e/16,e/8],anchors:[2,6]},n=[];for(let r=0;r<t.strides.length;r++){let a=t.strides[r],s=Math.floor((e+a-1)/a),i=Math.floor((e+a-1)/a),o=t.anchors[r];for(let e=0;e<s;e++){let t=a*(e+.5);for(let e=0;e<i;e++){let r=a*(e+.5);for(let e=0;e<o;e++)n.push([r,t])}}}return n}(e.inputs[0].shape[1]),this.anchors=jc(this.anchorsData),this.inputSize=e.inputs[0].shape[2],this.config=t}async getBoundingBoxes(e){if(!e||e.isDisposedInternal||4!==e.shape.length||e.shape[1]<1||e.shape[2]<1)return null;let[t,n,r]=Ko(()=>{let t,n=gp.resizeBilinear(e,[this.inputSize,this.inputSize]).div(127.5).sub(.5),r=this.model.execute(n);if(Array.isArray(r)){let e=r.sort((e,t)=>e.size-t.size),n=Vl([e[0],e[2]],2),a=Vl([e[1],e[3]],2);t=Vl([a,n],1).squeeze(0)}else t=Pc(r);let a=function(e,t,n){let r=Wl(e,[0,1],[-1,2]),a=ol(r,t),s=Wl(e,[0,3],[-1,2]),i=ul(s,n),o=ul(a,n),l=ul(i,2),u=uh(o,l),h=ol(o,l),c=hl(u,n),d=hl(h,n);return nu([c,d],1)}(t,this.anchors,[this.inputSize,this.inputSize]),s=Wl(t,[0,0],[-1,1]);return[t,a,Bl(s).squeeze().dataSync()]}),a=await gp.nonMaxSuppressionAsync(n,r,this.config.face.detector.maxDetected,this.config.face.detector.iouThreshold,this.config.face.detector.minConfidence),s=a.arraySync();a.dispose();let i=[];for(let o=0;o<s.length;o++){let e=r[s[o]];if(e>this.config.face.detector.minConfidence){let r=Wl(n,[s[o],0],[1,-1]),a=m3(r);r.dispose();let l=this.anchorsData[s[o]],u=Ko(()=>Wl(t,[s[o],5],[1,-1]).squeeze().reshape([6,-1]));i.push({box:a,landmarks:u,anchor:l,confidence:e})}}return t.dispose(),n.dispose(),{boxes:i,scaleFactor:[e.shape[2]/this.inputSize,e.shape[1]/this.inputSize]}}}(t,e);return t&&t.modelUrl?e.debug&&c("load model:",t.modelUrl):c("load model failed:",e.face.detector.modelPath),n}var I3={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]},_3=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]}],E3=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]],T3=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],C3=([127,234,132,58,172,150,149,148,152,377,378,379,397,288,361,454,356,70,63,105,66,107,336,296,334,293,300,168,6,195,4,98,97,2,326,327,33,160,158,133,153,144,362,385,387,263,373,380,57,40,37,0,267,270,287,321,314,17,84,91,78,81,13,311,308,402,14,178].map(e=>E3[e]),[33,133,362,263,1,62,308,159,145,386,374,6,102,331,2,13,14,70,105,107,336,334,300,54,10,284,50,280,234,454,58,288,152].map(e=>E3[e]),[33,133,362,263,1,78,308].map(e=>E3[e]),I3.leftEyeLower0),N3=I3.rightEyeLower0,M3={leftBounds:[C3[0],C3[C3.length-1]],rightBounds:[N3[0],N3[N3.length-1]]},F3={count:468,mouth:13,symmetryLine:[13,I3.midwayBetweenEyes[0]]},R3={leftEye:0,rightEye:1,nose:2,mouth:3,leftEar:4,rightEar:5,symmetryLine:[3,2]};function D3(e,t,n,r){for(let a=0;a<_3.length;a++){let{key:s,indices:i}=_3[a],o=I3[`${n}${s}`];if(!r||r.includes(s))for(let n=0;n<i.length;n++){let r=i[n];e[o[n]]=[t[r][0],t[r][1],(t[r][2]+e[o[n]][2])/2]}}}var O3,z3=[null,null,null];async function P3(e){return!z3[0]&&e.face.enabled||!z3[1]&&e.face.mesh.enabled||!z3[2]&&e.face.iris.enabled?(z3=await Promise.all([!z3[0]&&e.face.enabled?S3(e):null,!z3[1]&&e.face.mesh.enabled?e$(h(e.modelBasePath,e.face.mesh.modelPath),{fromTFHub:e.face.mesh.modelPath.includes("tfhub.dev")}):null,!z3[2]&&e.face.iris.enabled?e$(h(e.modelBasePath,e.face.iris.modelPath),{fromTFHub:e.face.iris.modelPath.includes("tfhub.dev")}):null]),e.face.mesh.enabled&&(z3[1]&&z3[1].modelUrl?e.debug&&c("load model:",z3[1].modelUrl):c("load model failed:",e.face.mesh.modelPath)),e.face.iris.enabled&&(z3[2]&&z3[2].modelUrl?e.debug&&c("load model:",z3[2].modelUrl):c("load model failed:",e.face.iris.modelPath))):e.debug&&(z3[0]&&c("cached model:",z3[0].model.modelUrl),z3[1]&&c("cached model:",z3[1].modelUrl),z3[2]&&c("cached model:",z3[2].modelUrl)),O3=new class{constructor(e,t,n){var r,a;this.storedBoxes=[],this.boundingBoxDetector=e,this.meshDetector=t,this.irisModel=n,this.boxSize=(null==(r=null==e?void 0:e.model)?void 0:r.inputs[0].shape[2])||0,this.meshSize=(null==t?void 0:t.inputs[0].shape[2])||(null==(a=null==e?void 0:e.model)?void 0:a.inputs[0].shape[2]),this.irisSize=(null==n?void 0:n.inputs[0].shape[1])||0,this.irisEnlarge=2.3,this.skipped=0,this.detectedFaces=0}transformRawCoords(e,t,n,r){let a=u3({startPoint:t.startPoint,endPoint:t.endPoint}),s=e.map(e=>[a[0]/this.meshSize*(e[0]-this.meshSize/2),a[1]/this.meshSize*(e[1]-this.meshSize/2),e[2]]),i=0!==n?w3(n,[0,0]):g3,o=0!==n?s.map(e=>[...k3(e,i),e[2]]):s,l=0!==n?function(e){let t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-x3(t[0],n),-x3(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r):g3,u=[...h3({startPoint:t.startPoint,endPoint:t.endPoint}),1];return o.map(e=>[Math.round(e[0]+x3(u,l[0])),Math.round(e[1]+x3(u,l[1])),Math.round(e[2])])}getLeftToRightEyeDepthDifference(e){return e[M3.leftBounds[0]][2]-e[M3.rightBounds[0]][2]}getEyeBox(e,t,n,r,a=!1){let s=p3(d3(f3([e[n],e[r]]),this.irisEnlarge)),i=u3(s),o=gp.cropAndResize(t,[[s.startPoint[1]/this.meshSize,s.startPoint[0]/this.meshSize,s.endPoint[1]/this.meshSize,s.endPoint[0]/this.meshSize]],[0],[this.irisSize,this.irisSize]);return a&&Qe.flags.IS_BROWSER&&(o=gp.flipLeftRight(o)),{box:s,boxSize:i,crop:o}}getEyeCoords(e,t,n,r=!1){let a=[];for(let s=0;s<76;s++){let i=e[3*s];a.push([(r?1-i/this.irisSize:i/this.irisSize)*n[0]+t.startPoint[0],e[3*s+1]/this.irisSize*n[1]+t.startPoint[1],e[3*s+2]])}return{rawCoords:a,iris:a.slice(71)}}getAdjustedIrisCoords(e,t,n){let r=e[I3[n+"EyeUpper0"][3]][2],a=e[I3[n+"EyeLower0"][4]][2],s=(r+a)/2;return t.map((e,t)=>{let n=s;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]})}async predict(e,t){let n,r=!1;if((0===this.skipped||this.skipped>t.face.detector.skipFrames||!t.face.mesh.enabled||!t.skipFrame)&&(n=await this.boundingBoxDetector.getBoundingBoxes(e),this.skipped=0),t.skipFrame&&this.skipped++,!t.skipFrame||n&&n.boxes&&(!t.face.mesh.enabled||n.boxes.length!==this.detectedFaces&&this.detectedFaces!==t.face.detector.maxDetected)){this.storedBoxes=[],this.detectedFaces=0;for(let e of n.boxes)this.storedBoxes.push({startPoint:e.box.startPoint.dataSync(),endPoint:e.box.endPoint.dataSync(),landmarks:e.landmarks.arraySync(),confidence:e.confidence});this.storedBoxes.length>0&&(r=!0)}if(r){if(!n||!n.boxes||0===n.boxes.length)return this.storedBoxes=[],this.detectedFaces=0,null;for(let e=0;e<this.storedBoxes.length;e++){let t=p3(d3(l3({startPoint:this.storedBoxes[e].startPoint,endPoint:this.storedBoxes[e].endPoint},n.scaleFactor)));this.storedBoxes[e]={...t,confidence:this.storedBoxes[e].confidence,landmarks:this.storedBoxes[e].landmarks}}}n&&n.boxes&&n.boxes.forEach(e=>{e.box.startPoint.dispose(),e.box.endPoint.dispose(),e.landmarks.dispose()});let a=Ko(()=>this.storedBoxes.map((n,r)=>{let a,s,i=0;if(t.face.detector.rotation&&t.face.mesh.enabled&&Qe.flags.IS_BROWSER){let[r,o]=n.landmarks.length>=F3.count?F3.symmetryLine:R3.symmetryLine;i=y3(n.landmarks[r],n.landmarks[o]);let l=h3({startPoint:n.startPoint,endPoint:n.endPoint}),u=gp.rotateWithOffset(e,i,0,[l[0]/e.shape[2],l[1]/e.shape[1]]);s=w3(-i,l),a=t.face.mesh.enabled?c3({startPoint:n.startPoint,endPoint:n.endPoint},u,[this.meshSize,this.meshSize]).div(255):c3({startPoint:n.startPoint,endPoint:n.endPoint},u,[this.boxSize,this.boxSize]).div(255)}else{s=g3;let r=e.clone();a=t.face.mesh.enabled?c3({startPoint:n.startPoint,endPoint:n.endPoint},r,[this.meshSize,this.meshSize]).div(255):c3({startPoint:n.startPoint,endPoint:n.endPoint},r,[this.boxSize,this.boxSize]).div(255)}if(!t.face.mesh.enabled)return{mesh:[],box:n,faceConfidence:null,boxConfidence:n.confidence,confidence:n.confidence,image:a};let[,o,l]=this.meshDetector.execute(a),u=o.dataSync()[0];if(u<t.face.detector.minConfidence)return this.storedBoxes[r].confidence=u,null;let h=Pl(l,[-1,3]).arraySync();if(t.face.iris.enabled){let{box:e,boxSize:t,crop:n}=this.getEyeBox(h,a,M3.leftBounds[0],M3.leftBounds[1],!0),{box:r,boxSize:s,crop:i}=this.getEyeBox(h,a,M3.rightBounds[0],M3.rightBounds[1]),o=this.irisModel.predict(Vl([n,i])).dataSync(),l=o.slice(0,228),{rawCoords:u,iris:c}=this.getEyeCoords(l,e,t,!0),d=o.slice(228),{rawCoords:p,iris:f}=this.getEyeCoords(d,r,s),m=this.getLeftToRightEyeDepthDifference(h);Math.abs(m)<30?(D3(h,u,"left",null),D3(h,p,"right",null)):m<1?D3(h,u,"left",["EyeUpper0","EyeLower0"]):D3(h,p,"right",["EyeUpper0","EyeLower0"]);let g=this.getAdjustedIrisCoords(h,c,"left"),y=this.getAdjustedIrisCoords(h,f,"right");h=h.concat(g).concat(y)}let c=this.transformRawCoords(h,n,i,s),d=n.confidence;if((n=d3(f3(c),1.5)).confidence=d,t.face.detector.rotation&&t.face.mesh.enabled&&t.face.description.enabled&&Qe.flags.IS_BROWSER){let[t,r]=n.landmarks.length>=F3.count?F3.symmetryLine:R3.symmetryLine;i=y3(n.landmarks[t],n.landmarks[r]);let o=h3({startPoint:n.startPoint,endPoint:n.endPoint}),l=[o[0]/e.shape[2],o[1]/e.shape[1]],u=gp.rotateWithOffset(e.toFloat(),i,0,l);s=w3(-i,o),a=c3({startPoint:n.startPoint,endPoint:n.endPoint},u,[this.meshSize,this.meshSize]).div(255)}let p={mesh:c,box:n,faceConfidence:u,boxConfidence:n.confidence,image:a};return this.storedBoxes[r]={...p3(n),confidence:n.confidence,faceConfidence:u},p}));return t.face.mesh.enabled&&(this.storedBoxes=this.storedBoxes.filter(e=>e.confidence>t.face.detector.minConfidence)),this.detectedFaces=a.length,a}}(z3[0],z3[1],z3[2]),z3}var $3,L3=T3,V3=E3,B3=[],W3=0,j3=Number.MAX_SAFE_INTEGER;async function H3(e){let t=h(e.modelBasePath,e.face.description.modelPath);return $3?e.debug&&c("cached model:",t):($3=await e$(t))?e.debug&&c("load model:",t):c("load model failed:",e.face.description.modelPath),$3}function U3(e,t,n=2){if(!e||!t||0===(null==e?void 0:e.length)||0===(null==t?void 0:t.length)||(null==e?void 0:e.length)!==(null==t?void 0:t.length))return 0;let r=5*e.map((r,a)=>Math.abs(e[a]-t[a])**n).reduce((e,t)=>e+t,0)**(1/n);return Math.max(0,100-r)/100}function G3(e){return Ko(()=>{let t=e.image||e.tensor||e;return t instanceof Ka&&$3.inputs[0].shape?gp.cropAndResize(3===t.shape.length?Fu(t,0):t,[[.05,.15,.85,.85]],[0],[$3.inputs[0].shape[2],$3.inputs[0].shape[1]]).mul(255):null})}async function q3(e,t,n,r){var a,s;return $3?j3<t.face.description.skipFrames&&t.skipFrame&&W3===r&&(null==(a=B3[n])?void 0:a.age)&&(null==(s=B3[n])?void 0:s.age)>0?(j3++,B3[n]):(j3=0,new Promise(async a=>{let s,i=G3(e),o={age:0,gender:"unknown",genderScore:0,descriptor:[]};t.face.description.enabled&&(s=await $3.predict(i)),Xo(i),s&&(Ko(()=>{let e=s.find(e=>1===e.shape[1]).dataSync(),n=Math.trunc(200*Math.abs(e[0]-.5))/100;n>t.face.description.minConfidence&&(o.gender=e[0]<=.5?"female":"male",o.genderScore=Math.min(.99,n));let r=s.find(e=>100===e.shape[1]).argMax(1).dataSync()[0],a=s.find(e=>100===e.shape[1]).dataSync();o.age=Math.round(a[r-1]>a[r+1]?10*r-100*a[r-1]:10*r+100*a[r+1])/10;let i=s.find(e=>1024===e.shape[1]);o.descriptor=[...i.dataSync()]}),s.forEach(e=>Xo(e))),B3[n]=o,W3=r,a(o)})):null}var K3,X3=["angry","disgust","fear","happy","sad","surprise","neutral"],Z3=[],Y3=0,J3=Number.MAX_SAFE_INTEGER,Q3=[.2989,.587,.114];async function e5(e){return K3?e.debug&&c("cached model:",K3.modelUrl):(K3=await e$(h(e.modelBasePath,e.face.emotion.modelPath)))&&K3.modelUrl?e.debug&&c("load model:",K3.modelUrl):c("load model failed:",e.face.emotion.modelPath),K3}async function t5(e,t,n,r){return K3?J3<t.face.emotion.skipFrames&&t.skipFrame&&Y3===r&&Z3[n]&&Z3[n].length>0?(J3++,Z3[n]):(J3=0,new Promise(async a=>{let s=gp.resizeBilinear(e,[K3.inputs[0].shape[2],K3.inputs[0].shape[1]],!1),[i,o,l]=Rc(s,3,3);s.dispose();let u=hl(i,Q3[0]),h=hl(o,Q3[1]),c=hl(l,Q3[2]);i.dispose(),o.dispose(),l.dispose();let d=fl([u,h,c]);u.dispose(),h.dispose(),c.dispose();let p=Ko(()=>d.sub(.5).mul(2));d.dispose();let f=[];if(t.face.emotion.enabled){let e=await K3.predict(p),n=e.dataSync();Xo(e);for(let r=0;r<n.length;r++)n[r]>t.face.emotion.minConfidence&&f.push({score:Math.min(.99,Math.trunc(100*n[r])/100),emotion:X3[r]});f.sort((e,t)=>t.score-e.score)}p.dispose(),Z3[n]=f,Y3=r,a(f)})):null}var n5=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],r5=n5.length,a5=n5.reduce((e,t,n)=>(e[t]=n,e),{}),s5=([["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(([e,t])=>[a5[e],a5[t]]),[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]]);function i5(e){let t=e.reduce(({maxX:e,maxY:t,minX:n,minY:r},{position:{x:a,y:s}})=>({maxX:Math.max(e,a),maxY:Math.max(t,s),minX:Math.min(n,a),minY:Math.min(r,s)}),{maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY});return[t.minX,t.minY,t.maxX-t.minX,t.maxY-t.minY]}function o5(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+r5)}}function l5(e,t,n){let{heatmapY:r,heatmapX:a,id:s}=e,{y:i,x:o}=o5(r,a,s,n);return{x:e.heatmapX*t+o,y:e.heatmapY*t+i}}function u5(e,t,n){return e<t?t:e>n?n:e}function h5(e,t){return{x:e.x+t.x,y:e.y+t.y}}var c5=16;function d5(e,t,n,r,a,s,i=2){let o=(e,t,n)=>({y:u5(Math.round(e.y/c5),0,t-1),x:u5(Math.round(e.x/c5),0,n-1)}),[l,u]=r.shape,h=o(t.position,l,u),c={y:s.get((p=h).y,p.x,e),x:s.get(p.y,p.x,s.shape[2]/2+e)},d=h5(t.position,c);var p;for(let g=0;g<i;g++){let e=o(d,l,u),t=o5(e.y,e.x,n,a);d=h5({x:e.x*c5,y:e.y*c5},{x:t.x,y:t.y})}let f=o(d,l,u),m=r.get(f.y,f.x,n);return{position:d,part:n5[n],score:m}}function p5(e,t,n,r,a){let s=s5.map(([e,t])=>[a5[e],a5[t]]),i=s.map(([,e])=>e),o=s.map(([e])=>e),l=i.length,u=new Array(t.shape[2]),h=l5(e.part,c5,n);u[e.part.id]={score:e.score,part:n5[e.part.id],position:h};for(let c=l-1;c>=0;--c){let e=i[c],r=o[c];u[e]&&!u[r]&&(u[r]=d5(c,u[e],r,t,n,a))}for(let c=0;c<l;++c){let e=o[c],a=i[c];u[e]&&!u[a]&&(u[a]=d5(c,u[e],a,t,n,r))}return u}function f5(e,t,n,r,a){let[s,i]=a.shape,o=!0,l=Math.max(n-1,0),u=Math.min(n+1+1,s);for(let h=l;h<u;++h){let n=Math.max(r-1,0),s=Math.min(r+1+1,i);for(let r=n;r<s;++r)if(a.get(h,r,e)>t){o=!1;break}if(!o)break}return o}function m5(e,{x:t,y:n},r){return e.some(({keypoints:e})=>{var a;let s=null==(a=e[r])?void 0:a.position;return!!s&&function(e,t,n,r){let a=n-e,s=r-t;return a*a+s*s}(n,t,s.y,s.x)<=2500})}function g5(e,t){return t.reduce((t,{position:n,score:r},a)=>(m5(e,n,a)||(t+=r),t),0)/t.length}var y5,b5=["MobilenetV1/offset_2/BiasAdd","MobilenetV1/heatmap_2/BiasAdd","MobilenetV1/displacement_fwd_2/BiasAdd","MobilenetV1/displacement_bwd_2/BiasAdd"];async function x5(e,t){let n=Ko(()=>{if(!y5.inputs[0].shape)return[];let t=gp.resizeBilinear(e,[y5.inputs[0].shape[2],y5.inputs[0].shape[1]]).toFloat().div(127.5).sub(1),n=y5.execute(t,b5).map(e=>Pc(e,[0]));return n[1]=n[1].sigmoid(),n}),r=await Promise.all(n.map(e=>e.buffer()));for(let s of n)s.dispose();let a=await function(e,t,n,r,a,s){let i=[],o=function(e,t){let[n,r,a]=t.shape,s=new class{constructor(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}enqueue(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)}dequeue(){let e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e}empty(){return-1===this.numberOfElements}size(){return this.numberOfElements+1}all(){return this.priorityQueue.slice(0,this.numberOfElements+1)}max(){return this.priorityQueue[0]}swim(e){for(;e>0&&this.less(Math.floor(e/2),e);)this.exchange(e,Math.floor(e/2)),e=Math.floor(e/2)}sink(e){for(;2*e<=this.numberOfElements;){let t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}}getValueAt(e){return this.getElementValue(this.priorityQueue[e])}less(e,t){return this.getValueAt(e)<this.getValueAt(t)}exchange(e,t){let n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n}}(n*r*a,({score:e})=>e);for(let i=0;i<n;++i)for(let n=0;n<r;++n)for(let r=0;r<a;++r){let a=t.get(i,n,r);a<e||f5(r,a,i,n,t)&&s.enqueue({score:a,part:{heatmapY:i,heatmapX:n,id:r}})}return s}(s,t);for(;i.length<a&&!o.empty();){let a=o.dequeue();if(m5(i,l5(a.part,c5,e),a.part.id))continue;let l=p5(a,t,e,n,r);l=l.filter(e=>e.score>s);let u=g5(i,l),h=i5(l);u>s&&i.push({keypoints:l,box:h,score:Math.round(100*u)/100})}return i}(r[0],r[1],r[2],r[3],t.body.maxDetected,t.body.minConfidence);return y5.inputs[0].shape?function(e,[t,n],[r,a]){let s=t/r,i=n/a;return e.map((e,t)=>((e,t)=>({id:t,score:e.score,boxRaw:[e.box[0]/a,e.box[1]/r,e.box[2]/a,e.box[3]/r],box:[Math.trunc(e.box[0]*i),Math.trunc(e.box[1]*s),Math.trunc(e.box[2]*i),Math.trunc(e.box[3]*s)],keypoints:e.keypoints.map(({score:e,part:t,position:n})=>({score:e,part:t,position:[Math.trunc(n.x*i),Math.trunc(n.y*s)],positionRaw:[n.x/r,n.y/r]}))}))(e,t))}(a,[e.shape[1],e.shape[2]],[y5.inputs[0].shape[2],y5.inputs[0].shape[1]]):[]}async function v5(e){return y5?e.debug&&c("cached model:",y5.modelUrl):(y5=await e$(h(e.modelBasePath,e.body.modelPath)))&&y5.modelUrl?e.debug&&c("load model:",y5.modelUrl):c("load model failed:",e.body.modelPath),y5}function A5(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function w5(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function k5(e,t,n){let r=t.shape[1],a=t.shape[2];return gp.cropAndResize(t,[[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a]],[0],n)}function S5(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]],palmLandmarks:e.palmLandmarks.map(e=>[e[0]*t[0],e[1]*t[1]]),confidence:e.confidence}}function I5(e,t=1.5){let n=w5(e),r=A5(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],palmLandmarks:e.palmLandmarks}}function _5(e){let t=w5(e),n=A5(e),r=Math.max(...n)/2;return{startPoint:[t[0]-r,t[1]-r],endPoint:[t[0]+r,t[1]+r],palmLandmarks:e.palmLandmarks}}var E5=[{x:.015625,y:.015625},{x:.015625,y:.015625},{x:.046875,y:.015625},{x:.046875,y:.015625},{x:.078125,y:.015625},{x:.078125,y:.015625},{x:.109375,y:.015625},{x:.109375,y:.015625},{x:.140625,y:.015625},{x:.140625,y:.015625},{x:.171875,y:.015625},{x:.171875,y:.015625},{x:.203125,y:.015625},{x:.203125,y:.015625},{x:.234375,y:.015625},{x:.234375,y:.015625},{x:.265625,y:.015625},{x:.265625,y:.015625},{x:.296875,y:.015625},{x:.296875,y:.015625},{x:.328125,y:.015625},{x:.328125,y:.015625},{x:.359375,y:.015625},{x:.359375,y:.015625},{x:.390625,y:.015625},{x:.390625,y:.015625},{x:.421875,y:.015625},{x:.421875,y:.015625},{x:.453125,y:.015625},{x:.453125,y:.015625},{x:.484375,y:.015625},{x:.484375,y:.015625},{x:.515625,y:.015625},{x:.515625,y:.015625},{x:.546875,y:.015625},{x:.546875,y:.015625},{x:.578125,y:.015625},{x:.578125,y:.015625},{x:.609375,y:.015625},{x:.609375,y:.015625},{x:.640625,y:.015625},{x:.640625,y:.015625},{x:.671875,y:.015625},{x:.671875,y:.015625},{x:.703125,y:.015625},{x:.703125,y:.015625},{x:.734375,y:.015625},{x:.734375,y:.015625},{x:.765625,y:.015625},{x:.765625,y:.015625},{x:.796875,y:.015625},{x:.796875,y:.015625},{x:.828125,y:.015625},{x:.828125,y:.015625},{x:.859375,y:.015625},{x:.859375,y:.015625},{x:.890625,y:.015625},{x:.890625,y:.015625},{x:.921875,y:.015625},{x:.921875,y:.015625},{x:.953125,y:.015625},{x:.953125,y:.015625},{x:.984375,y:.015625},{x:.984375,y:.015625},{x:.015625,y:.046875},{x:.015625,y:.046875},{x:.046875,y:.046875},{x:.046875,y:.046875},{x:.078125,y:.046875},{x:.078125,y:.046875},{x:.109375,y:.046875},{x:.109375,y:.046875},{x:.140625,y:.046875},{x:.140625,y:.046875},{x:.171875,y:.046875},{x:.171875,y:.046875},{x:.203125,y:.046875},{x:.203125,y:.046875},{x:.234375,y:.046875},{x:.234375,y:.046875},{x:.265625,y:.046875},{x:.265625,y:.046875},{x:.296875,y:.046875},{x:.296875,y:.046875},{x:.328125,y:.046875},{x:.328125,y:.046875},{x:.359375,y:.046875},{x:.359375,y:.046875},{x:.390625,y:.046875},{x:.390625,y:.046875},{x:.421875,y:.046875},{x:.421875,y:.046875},{x:.453125,y:.046875},{x:.453125,y:.046875},{x:.484375,y:.046875},{x:.484375,y:.046875},{x:.515625,y:.046875},{x:.515625,y:.046875},{x:.546875,y:.046875},{x:.546875,y:.046875},{x:.578125,y:.046875},{x:.578125,y:.046875},{x:.609375,y:.046875},{x:.609375,y:.046875},{x:.640625,y:.046875},{x:.640625,y:.046875},{x:.671875,y:.046875},{x:.671875,y:.046875},{x:.703125,y:.046875},{x:.703125,y:.046875},{x:.734375,y:.046875},{x:.734375,y:.046875},{x:.765625,y:.046875},{x:.765625,y:.046875},{x:.796875,y:.046875},{x:.796875,y:.046875},{x:.828125,y:.046875},{x:.828125,y:.046875},{x:.859375,y:.046875},{x:.859375,y:.046875},{x:.890625,y:.046875},{x:.890625,y:.046875},{x:.921875,y:.046875},{x:.921875,y:.046875},{x:.953125,y:.046875},{x:.953125,y:.046875},{x:.984375,y:.046875},{x:.984375,y:.046875},{x:.015625,y:.078125},{x:.015625,y:.078125},{x:.046875,y:.078125},{x:.046875,y:.078125},{x:.078125,y:.078125},{x:.078125,y:.078125},{x:.109375,y:.078125},{x:.109375,y:.078125},{x:.140625,y:.078125},{x:.140625,y:.078125},{x:.171875,y:.078125},{x:.171875,y:.078125},{x:.203125,y:.078125},{x:.203125,y:.078125},{x:.234375,y:.078125},{x:.234375,y:.078125},{x:.265625,y:.078125},{x:.265625,y:.078125},{x:.296875,y:.078125},{x:.296875,y:.078125},{x:.328125,y:.078125},{x:.328125,y:.078125},{x:.359375,y:.078125},{x:.359375,y:.078125},{x:.390625,y:.078125},{x:.390625,y:.078125},{x:.421875,y:.078125},{x:.421875,y:.078125},{x:.453125,y:.078125},{x:.453125,y:.078125},{x:.484375,y:.078125},{x:.484375,y:.078125},{x:.515625,y:.078125},{x:.515625,y:.078125},{x:.546875,y:.078125},{x:.546875,y:.078125},{x:.578125,y:.078125},{x:.578125,y:.078125},{x:.609375,y:.078125},{x:.609375,y:.078125},{x:.640625,y:.078125},{x:.640625,y:.078125},{x:.671875,y:.078125},{x:.671875,y:.078125},{x:.703125,y:.078125},{x:.703125,y:.078125},{x:.734375,y:.078125},{x:.734375,y:.078125},{x:.765625,y:.078125},{x:.765625,y:.078125},{x:.796875,y:.078125},{x:.796875,y:.078125},{x:.828125,y:.078125},{x:.828125,y:.078125},{x:.859375,y:.078125},{x:.859375,y:.078125},{x:.890625,y:.078125},{x:.890625,y:.078125},{x:.921875,y:.078125},{x:.921875,y:.078125},{x:.953125,y:.078125},{x:.953125,y:.078125},{x:.984375,y:.078125},{x:.984375,y:.078125},{x:.015625,y:.109375},{x:.015625,y:.109375},{x:.046875,y:.109375},{x:.046875,y:.109375},{x:.078125,y:.109375},{x:.078125,y:.109375},{x:.109375,y:.109375},{x:.109375,y:.109375},{x:.140625,y:.109375},{x:.140625,y:.109375},{x:.171875,y:.109375},{x:.171875,y:.109375},{x:.203125,y:.109375},{x:.203125,y:.109375},{x:.234375,y:.109375},{x:.234375,y:.109375},{x:.265625,y:.109375},{x:.265625,y:.109375},{x:.296875,y:.109375},{x:.296875,y:.109375},{x:.328125,y:.109375},{x:.328125,y:.109375},{x:.359375,y:.109375},{x:.359375,y:.109375},{x:.390625,y:.109375},{x:.390625,y:.109375},{x:.421875,y:.109375},{x:.421875,y:.109375},{x:.453125,y:.109375},{x:.453125,y:.109375},{x:.484375,y:.109375},{x:.484375,y:.109375},{x:.515625,y:.109375},{x:.515625,y:.109375},{x:.546875,y:.109375},{x:.546875,y:.109375},{x:.578125,y:.109375},{x:.578125,y:.109375},{x:.609375,y:.109375},{x:.609375,y:.109375},{x:.640625,y:.109375},{x:.640625,y:.109375},{x:.671875,y:.109375},{x:.671875,y:.109375},{x:.703125,y:.109375},{x:.703125,y:.109375},{x:.734375,y:.109375},{x:.734375,y:.109375},{x:.765625,y:.109375},{x:.765625,y:.109375},{x:.796875,y:.109375},{x:.796875,y:.109375},{x:.828125,y:.109375},{x:.828125,y:.109375},{x:.859375,y:.109375},{x:.859375,y:.109375},{x:.890625,y:.109375},{x:.890625,y:.109375},{x:.921875,y:.109375},{x:.921875,y:.109375},{x:.953125,y:.109375},{x:.953125,y:.109375},{x:.984375,y:.109375},{x:.984375,y:.109375},{x:.015625,y:.140625},{x:.015625,y:.140625},{x:.046875,y:.140625},{x:.046875,y:.140625},{x:.078125,y:.140625},{x:.078125,y:.140625},{x:.109375,y:.140625},{x:.109375,y:.140625},{x:.140625,y:.140625},{x:.140625,y:.140625},{x:.171875,y:.140625},{x:.171875,y:.140625},{x:.203125,y:.140625},{x:.203125,y:.140625},{x:.234375,y:.140625},{x:.234375,y:.140625},{x:.265625,y:.140625},{x:.265625,y:.140625},{x:.296875,y:.140625},{x:.296875,y:.140625},{x:.328125,y:.140625},{x:.328125,y:.140625},{x:.359375,y:.140625},{x:.359375,y:.140625},{x:.390625,y:.140625},{x:.390625,y:.140625},{x:.421875,y:.140625},{x:.421875,y:.140625},{x:.453125,y:.140625},{x:.453125,y:.140625},{x:.484375,y:.140625},{x:.484375,y:.140625},{x:.515625,y:.140625},{x:.515625,y:.140625},{x:.546875,y:.140625},{x:.546875,y:.140625},{x:.578125,y:.140625},{x:.578125,y:.140625},{x:.609375,y:.140625},{x:.609375,y:.140625},{x:.640625,y:.140625},{x:.640625,y:.140625},{x:.671875,y:.140625},{x:.671875,y:.140625},{x:.703125,y:.140625},{x:.703125,y:.140625},{x:.734375,y:.140625},{x:.734375,y:.140625},{x:.765625,y:.140625},{x:.765625,y:.140625},{x:.796875,y:.140625},{x:.796875,y:.140625},{x:.828125,y:.140625},{x:.828125,y:.140625},{x:.859375,y:.140625},{x:.859375,y:.140625},{x:.890625,y:.140625},{x:.890625,y:.140625},{x:.921875,y:.140625},{x:.921875,y:.140625},{x:.953125,y:.140625},{x:.953125,y:.140625},{x:.984375,y:.140625},{x:.984375,y:.140625},{x:.015625,y:.171875},{x:.015625,y:.171875},{x:.046875,y:.171875},{x:.046875,y:.171875},{x:.078125,y:.171875},{x:.078125,y:.171875},{x:.109375,y:.171875},{x:.109375,y:.171875},{x:.140625,y:.171875},{x:.140625,y:.171875},{x:.171875,y:.171875},{x:.171875,y:.171875},{x:.203125,y:.171875},{x:.203125,y:.171875},{x:.234375,y:.171875},{x:.234375,y:.171875},{x:.265625,y:.171875},{x:.265625,y:.171875},{x:.296875,y:.171875},{x:.296875,y:.171875},{x:.328125,y:.171875},{x:.328125,y:.171875},{x:.359375,y:.171875},{x:.359375,y:.171875},{x:.390625,y:.171875},{x:.390625,y:.171875},{x:.421875,y:.171875},{x:.421875,y:.171875},{x:.453125,y:.171875},{x:.453125,y:.171875},{x:.484375,y:.171875},{x:.484375,y:.171875},{x:.515625,y:.171875},{x:.515625,y:.171875},{x:.546875,y:.171875},{x:.546875,y:.171875},{x:.578125,y:.171875},{x:.578125,y:.171875},{x:.609375,y:.171875},{x:.609375,y:.171875},{x:.640625,y:.171875},{x:.640625,y:.171875},{x:.671875,y:.171875},{x:.671875,y:.171875},{x:.703125,y:.171875},{x:.703125,y:.171875},{x:.734375,y:.171875},{x:.734375,y:.171875},{x:.765625,y:.171875},{x:.765625,y:.171875},{x:.796875,y:.171875},{x:.796875,y:.171875},{x:.828125,y:.171875},{x:.828125,y:.171875},{x:.859375,y:.171875},{x:.859375,y:.171875},{x:.890625,y:.171875},{x:.890625,y:.171875},{x:.921875,y:.171875},{x:.921875,y:.171875},{x:.953125,y:.171875},{x:.953125,y:.171875},{x:.984375,y:.171875},{x:.984375,y:.171875},{x:.015625,y:.203125},{x:.015625,y:.203125},{x:.046875,y:.203125},{x:.046875,y:.203125},{x:.078125,y:.203125},{x:.078125,y:.203125},{x:.109375,y:.203125},{x:.109375,y:.203125},{x:.140625,y:.203125},{x:.140625,y:.203125},{x:.171875,y:.203125},{x:.171875,y:.203125},{x:.203125,y:.203125},{x:.203125,y:.203125},{x:.234375,y:.203125},{x:.234375,y:.203125},{x:.265625,y:.203125},{x:.265625,y:.203125},{x:.296875,y:.203125},{x:.296875,y:.203125},{x:.328125,y:.203125},{x:.328125,y:.203125},{x:.359375,y:.203125},{x:.359375,y:.203125},{x:.390625,y:.203125},{x:.390625,y:.203125},{x:.421875,y:.203125},{x:.421875,y:.203125},{x:.453125,y:.203125},{x:.453125,y:.203125},{x:.484375,y:.203125},{x:.484375,y:.203125},{x:.515625,y:.203125},{x:.515625,y:.203125},{x:.546875,y:.203125},{x:.546875,y:.203125},{x:.578125,y:.203125},{x:.578125,y:.203125},{x:.609375,y:.203125},{x:.609375,y:.203125},{x:.640625,y:.203125},{x:.640625,y:.203125},{x:.671875,y:.203125},{x:.671875,y:.203125},{x:.703125,y:.203125},{x:.703125,y:.203125},{x:.734375,y:.203125},{x:.734375,y:.203125},{x:.765625,y:.203125},{x:.765625,y:.203125},{x:.796875,y:.203125},{x:.796875,y:.203125},{x:.828125,y:.203125},{x:.828125,y:.203125},{x:.859375,y:.203125},{x:.859375,y:.203125},{x:.890625,y:.203125},{x:.890625,y:.203125},{x:.921875,y:.203125},{x:.921875,y:.203125},{x:.953125,y:.203125},{x:.953125,y:.203125},{x:.984375,y:.203125},{x:.984375,y:.203125},{x:.015625,y:.234375},{x:.015625,y:.234375},{x:.046875,y:.234375},{x:.046875,y:.234375},{x:.078125,y:.234375},{x:.078125,y:.234375},{x:.109375,y:.234375},{x:.109375,y:.234375},{x:.140625,y:.234375},{x:.140625,y:.234375},{x:.171875,y:.234375},{x:.171875,y:.234375},{x:.203125,y:.234375},{x:.203125,y:.234375},{x:.234375,y:.234375},{x:.234375,y:.234375},{x:.265625,y:.234375},{x:.265625,y:.234375},{x:.296875,y:.234375},{x:.296875,y:.234375},{x:.328125,y:.234375},{x:.328125,y:.234375},{x:.359375,y:.234375},{x:.359375,y:.234375},{x:.390625,y:.234375},{x:.390625,y:.234375},{x:.421875,y:.234375},{x:.421875,y:.234375},{x:.453125,y:.234375},{x:.453125,y:.234375},{x:.484375,y:.234375},{x:.484375,y:.234375},{x:.515625,y:.234375},{x:.515625,y:.234375},{x:.546875,y:.234375},{x:.546875,y:.234375},{x:.578125,y:.234375},{x:.578125,y:.234375},{x:.609375,y:.234375},{x:.609375,y:.234375},{x:.640625,y:.234375},{x:.640625,y:.234375},{x:.671875,y:.234375},{x:.671875,y:.234375},{x:.703125,y:.234375},{x:.703125,y:.234375},{x:.734375,y:.234375},{x:.734375,y:.234375},{x:.765625,y:.234375},{x:.765625,y:.234375},{x:.796875,y:.234375},{x:.796875,y:.234375},{x:.828125,y:.234375},{x:.828125,y:.234375},{x:.859375,y:.234375},{x:.859375,y:.234375},{x:.890625,y:.234375},{x:.890625,y:.234375},{x:.921875,y:.234375},{x:.921875,y:.234375},{x:.953125,y:.234375},{x:.953125,y:.234375},{x:.984375,y:.234375},{x:.984375,y:.234375},{x:.015625,y:.265625},{x:.015625,y:.265625},{x:.046875,y:.265625},{x:.046875,y:.265625},{x:.078125,y:.265625},{x:.078125,y:.265625},{x:.109375,y:.265625},{x:.109375,y:.265625},{x:.140625,y:.265625},{x:.140625,y:.265625},{x:.171875,y:.265625},{x:.171875,y:.265625},{x:.203125,y:.265625},{x:.203125,y:.265625},{x:.234375,y:.265625},{x:.234375,y:.265625},{x:.265625,y:.265625},{x:.265625,y:.265625},{x:.296875,y:.265625},{x:.296875,y:.265625},{x:.328125,y:.265625},{x:.328125,y:.265625},{x:.359375,y:.265625},{x:.359375,y:.265625},{x:.390625,y:.265625},{x:.390625,y:.265625},{x:.421875,y:.265625},{x:.421875,y:.265625},{x:.453125,y:.265625},{x:.453125,y:.265625},{x:.484375,y:.265625},{x:.484375,y:.265625},{x:.515625,y:.265625},{x:.515625,y:.265625},{x:.546875,y:.265625},{x:.546875,y:.265625},{x:.578125,y:.265625},{x:.578125,y:.265625},{x:.609375,y:.265625},{x:.609375,y:.265625},{x:.640625,y:.265625},{x:.640625,y:.265625},{x:.671875,y:.265625},{x:.671875,y:.265625},{x:.703125,y:.265625},{x:.703125,y:.265625},{x:.734375,y:.265625},{x:.734375,y:.265625},{x:.765625,y:.265625},{x:.765625,y:.265625},{x:.796875,y:.265625},{x:.796875,y:.265625},{x:.828125,y:.265625},{x:.828125,y:.265625},{x:.859375,y:.265625},{x:.859375,y:.265625},{x:.890625,y:.265625},{x:.890625,y:.265625},{x:.921875,y:.265625},{x:.921875,y:.265625},{x:.953125,y:.265625},{x:.953125,y:.265625},{x:.984375,y:.265625},{x:.984375,y:.265625},{x:.015625,y:.296875},{x:.015625,y:.296875},{x:.046875,y:.296875},{x:.046875,y:.296875},{x:.078125,y:.296875},{x:.078125,y:.296875},{x:.109375,y:.296875},{x:.109375,y:.296875},{x:.140625,y:.296875},{x:.140625,y:.296875},{x:.171875,y:.296875},{x:.171875,y:.296875},{x:.203125,y:.296875},{x:.203125,y:.296875},{x:.234375,y:.296875},{x:.234375,y:.296875},{x:.265625,y:.296875},{x:.265625,y:.296875},{x:.296875,y:.296875},{x:.296875,y:.296875},{x:.328125,y:.296875},{x:.328125,y:.296875},{x:.359375,y:.296875},{x:.359375,y:.296875},{x:.390625,y:.296875},{x:.390625,y:.296875},{x:.421875,y:.296875},{x:.421875,y:.296875},{x:.453125,y:.296875},{x:.453125,y:.296875},{x:.484375,y:.296875},{x:.484375,y:.296875},{x:.515625,y:.296875},{x:.515625,y:.296875},{x:.546875,y:.296875},{x:.546875,y:.296875},{x:.578125,y:.296875},{x:.578125,y:.296875},{x:.609375,y:.296875},{x:.609375,y:.296875},{x:.640625,y:.296875},{x:.640625,y:.296875},{x:.671875,y:.296875},{x:.671875,y:.296875},{x:.703125,y:.296875},{x:.703125,y:.296875},{x:.734375,y:.296875},{x:.734375,y:.296875},{x:.765625,y:.296875},{x:.765625,y:.296875},{x:.796875,y:.296875},{x:.796875,y:.296875},{x:.828125,y:.296875},{x:.828125,y:.296875},{x:.859375,y:.296875},{x:.859375,y:.296875},{x:.890625,y:.296875},{x:.890625,y:.296875},{x:.921875,y:.296875},{x:.921875,y:.296875},{x:.953125,y:.296875},{x:.953125,y:.296875},{x:.984375,y:.296875},{x:.984375,y:.296875},{x:.015625,y:.328125},{x:.015625,y:.328125},{x:.046875,y:.328125},{x:.046875,y:.328125},{x:.078125,y:.328125},{x:.078125,y:.328125},{x:.109375,y:.328125},{x:.109375,y:.328125},{x:.140625,y:.328125},{x:.140625,y:.328125},{x:.171875,y:.328125},{x:.171875,y:.328125},{x:.203125,y:.328125},{x:.203125,y:.328125},{x:.234375,y:.328125},{x:.234375,y:.328125},{x:.265625,y:.328125},{x:.265625,y:.328125},{x:.296875,y:.328125},{x:.296875,y:.328125},{x:.328125,y:.328125},{x:.328125,y:.328125},{x:.359375,y:.328125},{x:.359375,y:.328125},{x:.390625,y:.328125},{x:.390625,y:.328125},{x:.421875,y:.328125},{x:.421875,y:.328125},{x:.453125,y:.328125},{x:.453125,y:.328125},{x:.484375,y:.328125},{x:.484375,y:.328125},{x:.515625,y:.328125},{x:.515625,y:.328125},{x:.546875,y:.328125},{x:.546875,y:.328125},{x:.578125,y:.328125},{x:.578125,y:.328125},{x:.609375,y:.328125},{x:.609375,y:.328125},{x:.640625,y:.328125},{x:.640625,y:.328125},{x:.671875,y:.328125},{x:.671875,y:.328125},{x:.703125,y:.328125},{x:.703125,y:.328125},{x:.734375,y:.328125},{x:.734375,y:.328125},{x:.765625,y:.328125},{x:.765625,y:.328125},{x:.796875,y:.328125},{x:.796875,y:.328125},{x:.828125,y:.328125},{x:.828125,y:.328125},{x:.859375,y:.328125},{x:.859375,y:.328125},{x:.890625,y:.328125},{x:.890625,y:.328125},{x:.921875,y:.328125},{x:.921875,y:.328125},{x:.953125,y:.328125},{x:.953125,y:.328125},{x:.984375,y:.328125},{x:.984375,y:.328125},{x:.015625,y:.359375},{x:.015625,y:.359375},{x:.046875,y:.359375},{x:.046875,y:.359375},{x:.078125,y:.359375},{x:.078125,y:.359375},{x:.109375,y:.359375},{x:.109375,y:.359375},{x:.140625,y:.359375},{x:.140625,y:.359375},{x:.171875,y:.359375},{x:.171875,y:.359375},{x:.203125,y:.359375},{x:.203125,y:.359375},{x:.234375,y:.359375},{x:.234375,y:.359375},{x:.265625,y:.359375},{x:.265625,y:.359375},{x:.296875,y:.359375},{x:.296875,y:.359375},{x:.328125,y:.359375},{x:.328125,y:.359375},{x:.359375,y:.359375},{x:.359375,y:.359375},{x:.390625,y:.359375},{x:.390625,y:.359375},{x:.421875,y:.359375},{x:.421875,y:.359375},{x:.453125,y:.359375},{x:.453125,y:.359375},{x:.484375,y:.359375},{x:.484375,y:.359375},{x:.515625,y:.359375},{x:.515625,y:.359375},{x:.546875,y:.359375},{x:.546875,y:.359375},{x:.578125,y:.359375},{x:.578125,y:.359375},{x:.609375,y:.359375},{x:.609375,y:.359375},{x:.640625,y:.359375},{x:.640625,y:.359375},{x:.671875,y:.359375},{x:.671875,y:.359375},{x:.703125,y:.359375},{x:.703125,y:.359375},{x:.734375,y:.359375},{x:.734375,y:.359375},{x:.765625,y:.359375},{x:.765625,y:.359375},{x:.796875,y:.359375},{x:.796875,y:.359375},{x:.828125,y:.359375},{x:.828125,y:.359375},{x:.859375,y:.359375},{x:.859375,y:.359375},{x:.890625,y:.359375},{x:.890625,y:.359375},{x:.921875,y:.359375},{x:.921875,y:.359375},{x:.953125,y:.359375},{x:.953125,y:.359375},{x:.984375,y:.359375},{x:.984375,y:.359375},{x:.015625,y:.390625},{x:.015625,y:.390625},{x:.046875,y:.390625},{x:.046875,y:.390625},{x:.078125,y:.390625},{x:.078125,y:.390625},{x:.109375,y:.390625},{x:.109375,y:.390625},{x:.140625,y:.390625},{x:.140625,y:.390625},{x:.171875,y:.390625},{x:.171875,y:.390625},{x:.203125,y:.390625},{x:.203125,y:.390625},{x:.234375,y:.390625},{x:.234375,y:.390625},{x:.265625,y:.390625},{x:.265625,y:.390625},{x:.296875,y:.390625},{x:.296875,y:.390625},{x:.328125,y:.390625},{x:.328125,y:.390625},{x:.359375,y:.390625},{x:.359375,y:.390625},{x:.390625,y:.390625},{x:.390625,y:.390625},{x:.421875,y:.390625},{x:.421875,y:.390625},{x:.453125,y:.390625},{x:.453125,y:.390625},{x:.484375,y:.390625},{x:.484375,y:.390625},{x:.515625,y:.390625},{x:.515625,y:.390625},{x:.546875,y:.390625},{x:.546875,y:.390625},{x:.578125,y:.390625},{x:.578125,y:.390625},{x:.609375,y:.390625},{x:.609375,y:.390625},{x:.640625,y:.390625},{x:.640625,y:.390625},{x:.671875,y:.390625},{x:.671875,y:.390625},{x:.703125,y:.390625},{x:.703125,y:.390625},{x:.734375,y:.390625},{x:.734375,y:.390625},{x:.765625,y:.390625},{x:.765625,y:.390625},{x:.796875,y:.390625},{x:.796875,y:.390625},{x:.828125,y:.390625},{x:.828125,y:.390625},{x:.859375,y:.390625},{x:.859375,y:.390625},{x:.890625,y:.390625},{x:.890625,y:.390625},{x:.921875,y:.390625},{x:.921875,y:.390625},{x:.953125,y:.390625},{x:.953125,y:.390625},{x:.984375,y:.390625},{x:.984375,y:.390625},{x:.015625,y:.421875},{x:.015625,y:.421875},{x:.046875,y:.421875},{x:.046875,y:.421875},{x:.078125,y:.421875},{x:.078125,y:.421875},{x:.109375,y:.421875},{x:.109375,y:.421875},{x:.140625,y:.421875},{x:.140625,y:.421875},{x:.171875,y:.421875},{x:.171875,y:.421875},{x:.203125,y:.421875},{x:.203125,y:.421875},{x:.234375,y:.421875},{x:.234375,y:.421875},{x:.265625,y:.421875},{x:.265625,y:.421875},{x:.296875,y:.421875},{x:.296875,y:.421875},{x:.328125,y:.421875},{x:.328125,y:.421875},{x:.359375,y:.421875},{x:.359375,y:.421875},{x:.390625,y:.421875},{x:.390625,y:.421875},{x:.421875,y:.421875},{x:.421875,y:.421875},{x:.453125,y:.421875},{x:.453125,y:.421875},{x:.484375,y:.421875},{x:.484375,y:.421875},{x:.515625,y:.421875},{x:.515625,y:.421875},{x:.546875,y:.421875},{x:.546875,y:.421875},{x:.578125,y:.421875},{x:.578125,y:.421875},{x:.609375,y:.421875},{x:.609375,y:.421875},{x:.640625,y:.421875},{x:.640625,y:.421875},{x:.671875,y:.421875},{x:.671875,y:.421875},{x:.703125,y:.421875},{x:.703125,y:.421875},{x:.734375,y:.421875},{x:.734375,y:.421875},{x:.765625,y:.421875},{x:.765625,y:.421875},{x:.796875,y:.421875},{x:.796875,y:.421875},{x:.828125,y:.421875},{x:.828125,y:.421875},{x:.859375,y:.421875},{x:.859375,y:.421875},{x:.890625,y:.421875},{x:.890625,y:.421875},{x:.921875,y:.421875},{x:.921875,y:.421875},{x:.953125,y:.421875},{x:.953125,y:.421875},{x:.984375,y:.421875},{x:.984375,y:.421875},{x:.015625,y:.453125},{x:.015625,y:.453125},{x:.046875,y:.453125},{x:.046875,y:.453125},{x:.078125,y:.453125},{x:.078125,y:.453125},{x:.109375,y:.453125},{x:.109375,y:.453125},{x:.140625,y:.453125},{x:.140625,y:.453125},{x:.171875,y:.453125},{x:.171875,y:.453125},{x:.203125,y:.453125},{x:.203125,y:.453125},{x:.234375,y:.453125},{x:.234375,y:.453125},{x:.265625,y:.453125},{x:.265625,y:.453125},{x:.296875,y:.453125},{x:.296875,y:.453125},{x:.328125,y:.453125},{x:.328125,y:.453125},{x:.359375,y:.453125},{x:.359375,y:.453125},{x:.390625,y:.453125},{x:.390625,y:.453125},{x:.421875,y:.453125},{x:.421875,y:.453125},{x:.453125,y:.453125},{x:.453125,y:.453125},{x:.484375,y:.453125},{x:.484375,y:.453125},{x:.515625,y:.453125},{x:.515625,y:.453125},{x:.546875,y:.453125},{x:.546875,y:.453125},{x:.578125,y:.453125},{x:.578125,y:.453125},{x:.609375,y:.453125},{x:.609375,y:.453125},{x:.640625,y:.453125},{x:.640625,y:.453125},{x:.671875,y:.453125},{x:.671875,y:.453125},{x:.703125,y:.453125},{x:.703125,y:.453125},{x:.734375,y:.453125},{x:.734375,y:.453125},{x:.765625,y:.453125},{x:.765625,y:.453125},{x:.796875,y:.453125},{x:.796875,y:.453125},{x:.828125,y:.453125},{x:.828125,y:.453125},{x:.859375,y:.453125},{x:.859375,y:.453125},{x:.890625,y:.453125},{x:.890625,y:.453125},{x:.921875,y:.453125},{x:.921875,y:.453125},{x:.953125,y:.453125},{x:.953125,y:.453125},{x:.984375,y:.453125},{x:.984375,y:.453125},{x:.015625,y:.484375},{x:.015625,y:.484375},{x:.046875,y:.484375},{x:.046875,y:.484375},{x:.078125,y:.484375},{x:.078125,y:.484375},{x:.109375,y:.484375},{x:.109375,y:.484375},{x:.140625,y:.484375},{x:.140625,y:.484375},{x:.171875,y:.484375},{x:.171875,y:.484375},{x:.203125,y:.484375},{x:.203125,y:.484375},{x:.234375,y:.484375},{x:.234375,y:.484375},{x:.265625,y:.484375},{x:.265625,y:.484375},{x:.296875,y:.484375},{x:.296875,y:.484375},{x:.328125,y:.484375},{x:.328125,y:.484375},{x:.359375,y:.484375},{x:.359375,y:.484375},{x:.390625,y:.484375},{x:.390625,y:.484375},{x:.421875,y:.484375},{x:.421875,y:.484375},{x:.453125,y:.484375},{x:.453125,y:.484375},{x:.484375,y:.484375},{x:.484375,y:.484375},{x:.515625,y:.484375},{x:.515625,y:.484375},{x:.546875,y:.484375},{x:.546875,y:.484375},{x:.578125,y:.484375},{x:.578125,y:.484375},{x:.609375,y:.484375},{x:.609375,y:.484375},{x:.640625,y:.484375},{x:.640625,y:.484375},{x:.671875,y:.484375},{x:.671875,y:.484375},{x:.703125,y:.484375},{x:.703125,y:.484375},{x:.734375,y:.484375},{x:.734375,y:.484375},{x:.765625,y:.484375},{x:.765625,y:.484375},{x:.796875,y:.484375},{x:.796875,y:.484375},{x:.828125,y:.484375},{x:.828125,y:.484375},{x:.859375,y:.484375},{x:.859375,y:.484375},{x:.890625,y:.484375},{x:.890625,y:.484375},{x:.921875,y:.484375},{x:.921875,y:.484375},{x:.953125,y:.484375},{x:.953125,y:.484375},{x:.984375,y:.484375},{x:.984375,y:.484375},{x:.015625,y:.515625},{x:.015625,y:.515625},{x:.046875,y:.515625},{x:.046875,y:.515625},{x:.078125,y:.515625},{x:.078125,y:.515625},{x:.109375,y:.515625},{x:.109375,y:.515625},{x:.140625,y:.515625},{x:.140625,y:.515625},{x:.171875,y:.515625},{x:.171875,y:.515625},{x:.203125,y:.515625},{x:.203125,y:.515625},{x:.234375,y:.515625},{x:.234375,y:.515625},{x:.265625,y:.515625},{x:.265625,y:.515625},{x:.296875,y:.515625},{x:.296875,y:.515625},{x:.328125,y:.515625},{x:.328125,y:.515625},{x:.359375,y:.515625},{x:.359375,y:.515625},{x:.390625,y:.515625},{x:.390625,y:.515625},{x:.421875,y:.515625},{x:.421875,y:.515625},{x:.453125,y:.515625},{x:.453125,y:.515625},{x:.484375,y:.515625},{x:.484375,y:.515625},{x:.515625,y:.515625},{x:.515625,y:.515625},{x:.546875,y:.515625},{x:.546875,y:.515625},{x:.578125,y:.515625},{x:.578125,y:.515625},{x:.609375,y:.515625},{x:.609375,y:.515625},{x:.640625,y:.515625},{x:.640625,y:.515625},{x:.671875,y:.515625},{x:.671875,y:.515625},{x:.703125,y:.515625},{x:.703125,y:.515625},{x:.734375,y:.515625},{x:.734375,y:.515625},{x:.765625,y:.515625},{x:.765625,y:.515625},{x:.796875,y:.515625},{x:.796875,y:.515625},{x:.828125,y:.515625},{x:.828125,y:.515625},{x:.859375,y:.515625},{x:.859375,y:.515625},{x:.890625,y:.515625},{x:.890625,y:.515625},{x:.921875,y:.515625},{x:.921875,y:.515625},{x:.953125,y:.515625},{x:.953125,y:.515625},{x:.984375,y:.515625},{x:.984375,y:.515625},{x:.015625,y:.546875},{x:.015625,y:.546875},{x:.046875,y:.546875},{x:.046875,y:.546875},{x:.078125,y:.546875},{x:.078125,y:.546875},{x:.109375,y:.546875},{x:.109375,y:.546875},{x:.140625,y:.546875},{x:.140625,y:.546875},{x:.171875,y:.546875},{x:.171875,y:.546875},{x:.203125,y:.546875},{x:.203125,y:.546875},{x:.234375,y:.546875},{x:.234375,y:.546875},{x:.265625,y:.546875},{x:.265625,y:.546875},{x:.296875,y:.546875},{x:.296875,y:.546875},{x:.328125,y:.546875},{x:.328125,y:.546875},{x:.359375,y:.546875},{x:.359375,y:.546875},{x:.390625,y:.546875},{x:.390625,y:.546875},{x:.421875,y:.546875},{x:.421875,y:.546875},{x:.453125,y:.546875},{x:.453125,y:.546875},{x:.484375,y:.546875},{x:.484375,y:.546875},{x:.515625,y:.546875},{x:.515625,y:.546875},{x:.546875,y:.546875},{x:.546875,y:.546875},{x:.578125,y:.546875},{x:.578125,y:.546875},{x:.609375,y:.546875},{x:.609375,y:.546875},{x:.640625,y:.546875},{x:.640625,y:.546875},{x:.671875,y:.546875},{x:.671875,y:.546875},{x:.703125,y:.546875},{x:.703125,y:.546875},{x:.734375,y:.546875},{x:.734375,y:.546875},{x:.765625,y:.546875},{x:.765625,y:.546875},{x:.796875,y:.546875},{x:.796875,y:.546875},{x:.828125,y:.546875},{x:.828125,y:.546875},{x:.859375,y:.546875},{x:.859375,y:.546875},{x:.890625,y:.546875},{x:.890625,y:.546875},{x:.921875,y:.546875},{x:.921875,y:.546875},{x:.953125,y:.546875},{x:.953125,y:.546875},{x:.984375,y:.546875},{x:.984375,y:.546875},{x:.015625,y:.578125},{x:.015625,y:.578125},{x:.046875,y:.578125},{x:.046875,y:.578125},{x:.078125,y:.578125},{x:.078125,y:.578125},{x:.109375,y:.578125},{x:.109375,y:.578125},{x:.140625,y:.578125},{x:.140625,y:.578125},{x:.171875,y:.578125},{x:.171875,y:.578125},{x:.203125,y:.578125},{x:.203125,y:.578125},{x:.234375,y:.578125},{x:.234375,y:.578125},{x:.265625,y:.578125},{x:.265625,y:.578125},{x:.296875,y:.578125},{x:.296875,y:.578125},{x:.328125,y:.578125},{x:.328125,y:.578125},{x:.359375,y:.578125},{x:.359375,y:.578125},{x:.390625,y:.578125},{x:.390625,y:.578125},{x:.421875,y:.578125},{x:.421875,y:.578125},{x:.453125,y:.578125},{x:.453125,y:.578125},{x:.484375,y:.578125},{x:.484375,y:.578125},{x:.515625,y:.578125},{x:.515625,y:.578125},{x:.546875,y:.578125},{x:.546875,y:.578125},{x:.578125,y:.578125},{x:.578125,y:.578125},{x:.609375,y:.578125},{x:.609375,y:.578125},{x:.640625,y:.578125},{x:.640625,y:.578125},{x:.671875,y:.578125},{x:.671875,y:.578125},{x:.703125,y:.578125},{x:.703125,y:.578125},{x:.734375,y:.578125},{x:.734375,y:.578125},{x:.765625,y:.578125},{x:.765625,y:.578125},{x:.796875,y:.578125},{x:.796875,y:.578125},{x:.828125,y:.578125},{x:.828125,y:.578125},{x:.859375,y:.578125},{x:.859375,y:.578125},{x:.890625,y:.578125},{x:.890625,y:.578125},{x:.921875,y:.578125},{x:.921875,y:.578125},{x:.953125,y:.578125},{x:.953125,y:.578125},{x:.984375,y:.578125},{x:.984375,y:.578125},{x:.015625,y:.609375},{x:.015625,y:.609375},{x:.046875,y:.609375},{x:.046875,y:.609375},{x:.078125,y:.609375},{x:.078125,y:.609375},{x:.109375,y:.609375},{x:.109375,y:.609375},{x:.140625,y:.609375},{x:.140625,y:.609375},{x:.171875,y:.609375},{x:.171875,y:.609375},{x:.203125,y:.609375},{x:.203125,y:.609375},{x:.234375,y:.609375},{x:.234375,y:.609375},{x:.265625,y:.609375},{x:.265625,y:.609375},{x:.296875,y:.609375},{x:.296875,y:.609375},{x:.328125,y:.609375},{x:.328125,y:.609375},{x:.359375,y:.609375},{x:.359375,y:.609375},{x:.390625,y:.609375},{x:.390625,y:.609375},{x:.421875,y:.609375},{x:.421875,y:.609375},{x:.453125,y:.609375},{x:.453125,y:.609375},{x:.484375,y:.609375},{x:.484375,y:.609375},{x:.515625,y:.609375},{x:.515625,y:.609375},{x:.546875,y:.609375},{x:.546875,y:.609375},{x:.578125,y:.609375},{x:.578125,y:.609375},{x:.609375,y:.609375},{x:.609375,y:.609375},{x:.640625,y:.609375},{x:.640625,y:.609375},{x:.671875,y:.609375},{x:.671875,y:.609375},{x:.703125,y:.609375},{x:.703125,y:.609375},{x:.734375,y:.609375},{x:.734375,y:.609375},{x:.765625,y:.609375},{x:.765625,y:.609375},{x:.796875,y:.609375},{x:.796875,y:.609375},{x:.828125,y:.609375},{x:.828125,y:.609375},{x:.859375,y:.609375},{x:.859375,y:.609375},{x:.890625,y:.609375},{x:.890625,y:.609375},{x:.921875,y:.609375},{x:.921875,y:.609375},{x:.953125,y:.609375},{x:.953125,y:.609375},{x:.984375,y:.609375},{x:.984375,y:.609375},{x:.015625,y:.640625},{x:.015625,y:.640625},{x:.046875,y:.640625},{x:.046875,y:.640625},{x:.078125,y:.640625},{x:.078125,y:.640625},{x:.109375,y:.640625},{x:.109375,y:.640625},{x:.140625,y:.640625},{x:.140625,y:.640625},{x:.171875,y:.640625},{x:.171875,y:.640625},{x:.203125,y:.640625},{x:.203125,y:.640625},{x:.234375,y:.640625},{x:.234375,y:.640625},{x:.265625,y:.640625},{x:.265625,y:.640625},{x:.296875,y:.640625},{x:.296875,y:.640625},{x:.328125,y:.640625},{x:.328125,y:.640625},{x:.359375,y:.640625},{x:.359375,y:.640625},{x:.390625,y:.640625},{x:.390625,y:.640625},{x:.421875,y:.640625},{x:.421875,y:.640625},{x:.453125,y:.640625},{x:.453125,y:.640625},{x:.484375,y:.640625},{x:.484375,y:.640625},{x:.515625,y:.640625},{x:.515625,y:.640625},{x:.546875,y:.640625},{x:.546875,y:.640625},{x:.578125,y:.640625},{x:.578125,y:.640625},{x:.609375,y:.640625},{x:.609375,y:.640625},{x:.640625,y:.640625},{x:.640625,y:.640625},{x:.671875,y:.640625},{x:.671875,y:.640625},{x:.703125,y:.640625},{x:.703125,y:.640625},{x:.734375,y:.640625},{x:.734375,y:.640625},{x:.765625,y:.640625},{x:.765625,y:.640625},{x:.796875,y:.640625},{x:.796875,y:.640625},{x:.828125,y:.640625},{x:.828125,y:.640625},{x:.859375,y:.640625},{x:.859375,y:.640625},{x:.890625,y:.640625},{x:.890625,y:.640625},{x:.921875,y:.640625},{x:.921875,y:.640625},{x:.953125,y:.640625},{x:.953125,y:.640625},{x:.984375,y:.640625},{x:.984375,y:.640625},{x:.015625,y:.671875},{x:.015625,y:.671875},{x:.046875,y:.671875},{x:.046875,y:.671875},{x:.078125,y:.671875},{x:.078125,y:.671875},{x:.109375,y:.671875},{x:.109375,y:.671875},{x:.140625,y:.671875},{x:.140625,y:.671875},{x:.171875,y:.671875},{x:.171875,y:.671875},{x:.203125,y:.671875},{x:.203125,y:.671875},{x:.234375,y:.671875},{x:.234375,y:.671875},{x:.265625,y:.671875},{x:.265625,y:.671875},{x:.296875,y:.671875},{x:.296875,y:.671875},{x:.328125,y:.671875},{x:.328125,y:.671875},{x:.359375,y:.671875},{x:.359375,y:.671875},{x:.390625,y:.671875},{x:.390625,y:.671875},{x:.421875,y:.671875},{x:.421875,y:.671875},{x:.453125,y:.671875},{x:.453125,y:.671875},{x:.484375,y:.671875},{x:.484375,y:.671875},{x:.515625,y:.671875},{x:.515625,y:.671875},{x:.546875,y:.671875},{x:.546875,y:.671875},{x:.578125,y:.671875},{x:.578125,y:.671875},{x:.609375,y:.671875},{x:.609375,y:.671875},{x:.640625,y:.671875},{x:.640625,y:.671875},{x:.671875,y:.671875},{x:.671875,y:.671875},{x:.703125,y:.671875},{x:.703125,y:.671875},{x:.734375,y:.671875},{x:.734375,y:.671875},{x:.765625,y:.671875},{x:.765625,y:.671875},{x:.796875,y:.671875},{x:.796875,y:.671875},{x:.828125,y:.671875},{x:.828125,y:.671875},{x:.859375,y:.671875},{x:.859375,y:.671875},{x:.890625,y:.671875},{x:.890625,y:.671875},{x:.921875,y:.671875},{x:.921875,y:.671875},{x:.953125,y:.671875},{x:.953125,y:.671875},{x:.984375,y:.671875},{x:.984375,y:.671875},{x:.015625,y:.703125},{x:.015625,y:.703125},{x:.046875,y:.703125},{x:.046875,y:.703125},{x:.078125,y:.703125},{x:.078125,y:.703125},{x:.109375,y:.703125},{x:.109375,y:.703125},{x:.140625,y:.703125},{x:.140625,y:.703125},{x:.171875,y:.703125},{x:.171875,y:.703125},{x:.203125,y:.703125},{x:.203125,y:.703125},{x:.234375,y:.703125},{x:.234375,y:.703125},{x:.265625,y:.703125},{x:.265625,y:.703125},{x:.296875,y:.703125},{x:.296875,y:.703125},{x:.328125,y:.703125},{x:.328125,y:.703125},{x:.359375,y:.703125},{x:.359375,y:.703125},{x:.390625,y:.703125},{x:.390625,y:.703125},{x:.421875,y:.703125},{x:.421875,y:.703125},{x:.453125,y:.703125},{x:.453125,y:.703125},{x:.484375,y:.703125},{x:.484375,y:.703125},{x:.515625,y:.703125},{x:.515625,y:.703125},{x:.546875,y:.703125},{x:.546875,y:.703125},{x:.578125,y:.703125},{x:.578125,y:.703125},{x:.609375,y:.703125},{x:.609375,y:.703125},{x:.640625,y:.703125},{x:.640625,y:.703125},{x:.671875,y:.703125},{x:.671875,y:.703125},{x:.703125,y:.703125},{x:.703125,y:.703125},{x:.734375,y:.703125},{x:.734375,y:.703125},{x:.765625,y:.703125},{x:.765625,y:.703125},{x:.796875,y:.703125},{x:.796875,y:.703125},{x:.828125,y:.703125},{x:.828125,y:.703125},{x:.859375,y:.703125},{x:.859375,y:.703125},{x:.890625,y:.703125},{x:.890625,y:.703125},{x:.921875,y:.703125},{x:.921875,y:.703125},{x:.953125,y:.703125},{x:.953125,y:.703125},{x:.984375,y:.703125},{x:.984375,y:.703125},{x:.015625,y:.734375},{x:.015625,y:.734375},{x:.046875,y:.734375},{x:.046875,y:.734375},{x:.078125,y:.734375},{x:.078125,y:.734375},{x:.109375,y:.734375},{x:.109375,y:.734375},{x:.140625,y:.734375},{x:.140625,y:.734375},{x:.171875,y:.734375},{x:.171875,y:.734375},{x:.203125,y:.734375},{x:.203125,y:.734375},{x:.234375,y:.734375},{x:.234375,y:.734375},{x:.265625,y:.734375},{x:.265625,y:.734375},{x:.296875,y:.734375},{x:.296875,y:.734375},{x:.328125,y:.734375},{x:.328125,y:.734375},{x:.359375,y:.734375},{x:.359375,y:.734375},{x:.390625,y:.734375},{x:.390625,y:.734375},{x:.421875,y:.734375},{x:.421875,y:.734375},{x:.453125,y:.734375},{x:.453125,y:.734375},{x:.484375,y:.734375},{x:.484375,y:.734375},{x:.515625,y:.734375},{x:.515625,y:.734375},{x:.546875,y:.734375},{x:.546875,y:.734375},{x:.578125,y:.734375},{x:.578125,y:.734375},{x:.609375,y:.734375},{x:.609375,y:.734375},{x:.640625,y:.734375},{x:.640625,y:.734375},{x:.671875,y:.734375},{x:.671875,y:.734375},{x:.703125,y:.734375},{x:.703125,y:.734375},{x:.734375,y:.734375},{x:.734375,y:.734375},{x:.765625,y:.734375},{x:.765625,y:.734375},{x:.796875,y:.734375},{x:.796875,y:.734375},{x:.828125,y:.734375},{x:.828125,y:.734375},{x:.859375,y:.734375},{x:.859375,y:.734375},{x:.890625,y:.734375},{x:.890625,y:.734375},{x:.921875,y:.734375},{x:.921875,y:.734375},{x:.953125,y:.734375},{x:.953125,y:.734375},{x:.984375,y:.734375},{x:.984375,y:.734375},{x:.015625,y:.765625},{x:.015625,y:.765625},{x:.046875,y:.765625},{x:.046875,y:.765625},{x:.078125,y:.765625},{x:.078125,y:.765625},{x:.109375,y:.765625},{x:.109375,y:.765625},{x:.140625,y:.765625},{x:.140625,y:.765625},{x:.171875,y:.765625},{x:.171875,y:.765625},{x:.203125,y:.765625},{x:.203125,y:.765625},{x:.234375,y:.765625},{x:.234375,y:.765625},{x:.265625,y:.765625},{x:.265625,y:.765625},{x:.296875,y:.765625},{x:.296875,y:.765625},{x:.328125,y:.765625},{x:.328125,y:.765625},{x:.359375,y:.765625},{x:.359375,y:.765625},{x:.390625,y:.765625},{x:.390625,y:.765625},{x:.421875,y:.765625},{x:.421875,y:.765625},{x:.453125,y:.765625},{x:.453125,y:.765625},{x:.484375,y:.765625},{x:.484375,y:.765625},{x:.515625,y:.765625},{x:.515625,y:.765625},{x:.546875,y:.765625},{x:.546875,y:.765625},{x:.578125,y:.765625},{x:.578125,y:.765625},{x:.609375,y:.765625},{x:.609375,y:.765625},{x:.640625,y:.765625},{x:.640625,y:.765625},{x:.671875,y:.765625},{x:.671875,y:.765625},{x:.703125,y:.765625},{x:.703125,y:.765625},{x:.734375,y:.765625},{x:.734375,y:.765625},{x:.765625,y:.765625},{x:.765625,y:.765625},{x:.796875,y:.765625},{x:.796875,y:.765625},{x:.828125,y:.765625},{x:.828125,y:.765625},{x:.859375,y:.765625},{x:.859375,y:.765625},{x:.890625,y:.765625},{x:.890625,y:.765625},{x:.921875,y:.765625},{x:.921875,y:.765625},{x:.953125,y:.765625},{x:.953125,y:.765625},{x:.984375,y:.765625},{x:.984375,y:.765625},{x:.015625,y:.796875},{x:.015625,y:.796875},{x:.046875,y:.796875},{x:.046875,y:.796875},{x:.078125,y:.796875},{x:.078125,y:.796875},{x:.109375,y:.796875},{x:.109375,y:.796875},{x:.140625,y:.796875},{x:.140625,y:.796875},{x:.171875,y:.796875},{x:.171875,y:.796875},{x:.203125,y:.796875},{x:.203125,y:.796875},{x:.234375,y:.796875},{x:.234375,y:.796875},{x:.265625,y:.796875},{x:.265625,y:.796875},{x:.296875,y:.796875},{x:.296875,y:.796875},{x:.328125,y:.796875},{x:.328125,y:.796875},{x:.359375,y:.796875},{x:.359375,y:.796875},{x:.390625,y:.796875},{x:.390625,y:.796875},{x:.421875,y:.796875},{x:.421875,y:.796875},{x:.453125,y:.796875},{x:.453125,y:.796875},{x:.484375,y:.796875},{x:.484375,y:.796875},{x:.515625,y:.796875},{x:.515625,y:.796875},{x:.546875,y:.796875},{x:.546875,y:.796875},{x:.578125,y:.796875},{x:.578125,y:.796875},{x:.609375,y:.796875},{x:.609375,y:.796875},{x:.640625,y:.796875},{x:.640625,y:.796875},{x:.671875,y:.796875},{x:.671875,y:.796875},{x:.703125,y:.796875},{x:.703125,y:.796875},{x:.734375,y:.796875},{x:.734375,y:.796875},{x:.765625,y:.796875},{x:.765625,y:.796875},{x:.796875,y:.796875},{x:.796875,y:.796875},{x:.828125,y:.796875},{x:.828125,y:.796875},{x:.859375,y:.796875},{x:.859375,y:.796875},{x:.890625,y:.796875},{x:.890625,y:.796875},{x:.921875,y:.796875},{x:.921875,y:.796875},{x:.953125,y:.796875},{x:.953125,y:.796875},{x:.984375,y:.796875},{x:.984375,y:.796875},{x:.015625,y:.828125},{x:.015625,y:.828125},{x:.046875,y:.828125},{x:.046875,y:.828125},{x:.078125,y:.828125},{x:.078125,y:.828125},{x:.109375,y:.828125},{x:.109375,y:.828125},{x:.140625,y:.828125},{x:.140625,y:.828125},{x:.171875,y:.828125},{x:.171875,y:.828125},{x:.203125,y:.828125},{x:.203125,y:.828125},{x:.234375,y:.828125},{x:.234375,y:.828125},{x:.265625,y:.828125},{x:.265625,y:.828125},{x:.296875,y:.828125},{x:.296875,y:.828125},{x:.328125,y:.828125},{x:.328125,y:.828125},{x:.359375,y:.828125},{x:.359375,y:.828125},{x:.390625,y:.828125},{x:.390625,y:.828125},{x:.421875,y:.828125},{x:.421875,y:.828125},{x:.453125,y:.828125},{x:.453125,y:.828125},{x:.484375,y:.828125},{x:.484375,y:.828125},{x:.515625,y:.828125},{x:.515625,y:.828125},{x:.546875,y:.828125},{x:.546875,y:.828125},{x:.578125,y:.828125},{x:.578125,y:.828125},{x:.609375,y:.828125},{x:.609375,y:.828125},{x:.640625,y:.828125},{x:.640625,y:.828125},{x:.671875,y:.828125},{x:.671875,y:.828125},{x:.703125,y:.828125},{x:.703125,y:.828125},{x:.734375,y:.828125},{x:.734375,y:.828125},{x:.765625,y:.828125},{x:.765625,y:.828125},{x:.796875,y:.828125},{x:.796875,y:.828125},{x:.828125,y:.828125},{x:.828125,y:.828125},{x:.859375,y:.828125},{x:.859375,y:.828125},{x:.890625,y:.828125},{x:.890625,y:.828125},{x:.921875,y:.828125},{x:.921875,y:.828125},{x:.953125,y:.828125},{x:.953125,y:.828125},{x:.984375,y:.828125},{x:.984375,y:.828125},{x:.015625,y:.859375},{x:.015625,y:.859375},{x:.046875,y:.859375},{x:.046875,y:.859375},{x:.078125,y:.859375},{x:.078125,y:.859375},{x:.109375,y:.859375},{x:.109375,y:.859375},{x:.140625,y:.859375},{x:.140625,y:.859375},{x:.171875,y:.859375},{x:.171875,y:.859375},{x:.203125,y:.859375},{x:.203125,y:.859375},{x:.234375,y:.859375},{x:.234375,y:.859375},{x:.265625,y:.859375},{x:.265625,y:.859375},{x:.296875,y:.859375},{x:.296875,y:.859375},{x:.328125,y:.859375},{x:.328125,y:.859375},{x:.359375,y:.859375},{x:.359375,y:.859375},{x:.390625,y:.859375},{x:.390625,y:.859375},{x:.421875,y:.859375},{x:.421875,y:.859375},{x:.453125,y:.859375},{x:.453125,y:.859375},{x:.484375,y:.859375},{x:.484375,y:.859375},{x:.515625,y:.859375},{x:.515625,y:.859375},{x:.546875,y:.859375},{x:.546875,y:.859375},{x:.578125,y:.859375},{x:.578125,y:.859375},{x:.609375,y:.859375},{x:.609375,y:.859375},{x:.640625,y:.859375},{x:.640625,y:.859375},{x:.671875,y:.859375},{x:.671875,y:.859375},{x:.703125,y:.859375},{x:.703125,y:.859375},{x:.734375,y:.859375},{x:.734375,y:.859375},{x:.765625,y:.859375},{x:.765625,y:.859375},{x:.796875,y:.859375},{x:.796875,y:.859375},{x:.828125,y:.859375},{x:.828125,y:.859375},{x:.859375,y:.859375},{x:.859375,y:.859375},{x:.890625,y:.859375},{x:.890625,y:.859375},{x:.921875,y:.859375},{x:.921875,y:.859375},{x:.953125,y:.859375},{x:.953125,y:.859375},{x:.984375,y:.859375},{x:.984375,y:.859375},{x:.015625,y:.890625},{x:.015625,y:.890625},{x:.046875,y:.890625},{x:.046875,y:.890625},{x:.078125,y:.890625},{x:.078125,y:.890625},{x:.109375,y:.890625},{x:.109375,y:.890625},{x:.140625,y:.890625},{x:.140625,y:.890625},{x:.171875,y:.890625},{x:.171875,y:.890625},{x:.203125,y:.890625},{x:.203125,y:.890625},{x:.234375,y:.890625},{x:.234375,y:.890625},{x:.265625,y:.890625},{x:.265625,y:.890625},{x:.296875,y:.890625},{x:.296875,y:.890625},{x:.328125,y:.890625},{x:.328125,y:.890625},{x:.359375,y:.890625},{x:.359375,y:.890625},{x:.390625,y:.890625},{x:.390625,y:.890625},{x:.421875,y:.890625},{x:.421875,y:.890625},{x:.453125,y:.890625},{x:.453125,y:.890625},{x:.484375,y:.890625},{x:.484375,y:.890625},{x:.515625,y:.890625},{x:.515625,y:.890625},{x:.546875,y:.890625},{x:.546875,y:.890625},{x:.578125,y:.890625},{x:.578125,y:.890625},{x:.609375,y:.890625},{x:.609375,y:.890625},{x:.640625,y:.890625},{x:.640625,y:.890625},{x:.671875,y:.890625},{x:.671875,y:.890625},{x:.703125,y:.890625},{x:.703125,y:.890625},{x:.734375,y:.890625},{x:.734375,y:.890625},{x:.765625,y:.890625},{x:.765625,y:.890625},{x:.796875,y:.890625},{x:.796875,y:.890625},{x:.828125,y:.890625},{x:.828125,y:.890625},{x:.859375,y:.890625},{x:.859375,y:.890625},{x:.890625,y:.890625},{x:.890625,y:.890625},{x:.921875,y:.890625},{x:.921875,y:.890625},{x:.953125,y:.890625},{x:.953125,y:.890625},{x:.984375,y:.890625},{x:.984375,y:.890625},{x:.015625,y:.921875},{x:.015625,y:.921875},{x:.046875,y:.921875},{x:.046875,y:.921875},{x:.078125,y:.921875},{x:.078125,y:.921875},{x:.109375,y:.921875},{x:.109375,y:.921875},{x:.140625,y:.921875},{x:.140625,y:.921875},{x:.171875,y:.921875},{x:.171875,y:.921875},{x:.203125,y:.921875},{x:.203125,y:.921875},{x:.234375,y:.921875},{x:.234375,y:.921875},{x:.265625,y:.921875},{x:.265625,y:.921875},{x:.296875,y:.921875},{x:.296875,y:.921875},{x:.328125,y:.921875},{x:.328125,y:.921875},{x:.359375,y:.921875},{x:.359375,y:.921875},{x:.390625,y:.921875},{x:.390625,y:.921875},{x:.421875,y:.921875},{x:.421875,y:.921875},{x:.453125,y:.921875},{x:.453125,y:.921875},{x:.484375,y:.921875},{x:.484375,y:.921875},{x:.515625,y:.921875},{x:.515625,y:.921875},{x:.546875,y:.921875},{x:.546875,y:.921875},{x:.578125,y:.921875},{x:.578125,y:.921875},{x:.609375,y:.921875},{x:.609375,y:.921875},{x:.640625,y:.921875},{x:.640625,y:.921875},{x:.671875,y:.921875},{x:.671875,y:.921875},{x:.703125,y:.921875},{x:.703125,y:.921875},{x:.734375,y:.921875},{x:.734375,y:.921875},{x:.765625,y:.921875},{x:.765625,y:.921875},{x:.796875,y:.921875},{x:.796875,y:.921875},{x:.828125,y:.921875},{x:.828125,y:.921875},{x:.859375,y:.921875},{x:.859375,y:.921875},{x:.890625,y:.921875},{x:.890625,y:.921875},{x:.921875,y:.921875},{x:.921875,y:.921875},{x:.953125,y:.921875},{x:.953125,y:.921875},{x:.984375,y:.921875},{x:.984375,y:.921875},{x:.015625,y:.953125},{x:.015625,y:.953125},{x:.046875,y:.953125},{x:.046875,y:.953125},{x:.078125,y:.953125},{x:.078125,y:.953125},{x:.109375,y:.953125},{x:.109375,y:.953125},{x:.140625,y:.953125},{x:.140625,y:.953125},{x:.171875,y:.953125},{x:.171875,y:.953125},{x:.203125,y:.953125},{x:.203125,y:.953125},{x:.234375,y:.953125},{x:.234375,y:.953125},{x:.265625,y:.953125},{x:.265625,y:.953125},{x:.296875,y:.953125},{x:.296875,y:.953125},{x:.328125,y:.953125},{x:.328125,y:.953125},{x:.359375,y:.953125},{x:.359375,y:.953125},{x:.390625,y:.953125},{x:.390625,y:.953125},{x:.421875,y:.953125},{x:.421875,y:.953125},{x:.453125,y:.953125},{x:.453125,y:.953125},{x:.484375,y:.953125},{x:.484375,y:.953125},{x:.515625,y:.953125},{x:.515625,y:.953125},{x:.546875,y:.953125},{x:.546875,y:.953125},{x:.578125,y:.953125},{x:.578125,y:.953125},{x:.609375,y:.953125},{x:.609375,y:.953125},{x:.640625,y:.953125},{x:.640625,y:.953125},{x:.671875,y:.953125},{x:.671875,y:.953125},{x:.703125,y:.953125},{x:.703125,y:.953125},{x:.734375,y:.953125},{x:.734375,y:.953125},{x:.765625,y:.953125},{x:.765625,y:.953125},{x:.796875,y:.953125},{x:.796875,y:.953125},{x:.828125,y:.953125},{x:.828125,y:.953125},{x:.859375,y:.953125},{x:.859375,y:.953125},{x:.890625,y:.953125},{x:.890625,y:.953125},{x:.921875,y:.953125},{x:.921875,y:.953125},{x:.953125,y:.953125},{x:.953125,y:.953125},{x:.984375,y:.953125},{x:.984375,y:.953125},{x:.015625,y:.984375},{x:.015625,y:.984375},{x:.046875,y:.984375},{x:.046875,y:.984375},{x:.078125,y:.984375},{x:.078125,y:.984375},{x:.109375,y:.984375},{x:.109375,y:.984375},{x:.140625,y:.984375},{x:.140625,y:.984375},{x:.171875,y:.984375},{x:.171875,y:.984375},{x:.203125,y:.984375},{x:.203125,y:.984375},{x:.234375,y:.984375},{x:.234375,y:.984375},{x:.265625,y:.984375},{x:.265625,y:.984375},{x:.296875,y:.984375},{x:.296875,y:.984375},{x:.328125,y:.984375},{x:.328125,y:.984375},{x:.359375,y:.984375},{x:.359375,y:.984375},{x:.390625,y:.984375},{x:.390625,y:.984375},{x:.421875,y:.984375},{x:.421875,y:.984375},{x:.453125,y:.984375},{x:.453125,y:.984375},{x:.484375,y:.984375},{x:.484375,y:.984375},{x:.515625,y:.984375},{x:.515625,y:.984375},{x:.546875,y:.984375},{x:.546875,y:.984375},{x:.578125,y:.984375},{x:.578125,y:.984375},{x:.609375,y:.984375},{x:.609375,y:.984375},{x:.640625,y:.984375},{x:.640625,y:.984375},{x:.671875,y:.984375},{x:.671875,y:.984375},{x:.703125,y:.984375},{x:.703125,y:.984375},{x:.734375,y:.984375},{x:.734375,y:.984375},{x:.765625,y:.984375},{x:.765625,y:.984375},{x:.796875,y:.984375},{x:.796875,y:.984375},{x:.828125,y:.984375},{x:.828125,y:.984375},{x:.859375,y:.984375},{x:.859375,y:.984375},{x:.890625,y:.984375},{x:.890625,y:.984375},{x:.921875,y:.984375},{x:.921875,y:.984375},{x:.953125,y:.984375},{x:.953125,y:.984375},{x:.984375,y:.984375},{x:.984375,y:.984375},{x:.03125,y:.03125},{x:.03125,y:.03125},{x:.09375,y:.03125},{x:.09375,y:.03125},{x:.15625,y:.03125},{x:.15625,y:.03125},{x:.21875,y:.03125},{x:.21875,y:.03125},{x:.28125,y:.03125},{x:.28125,y:.03125},{x:.34375,y:.03125},{x:.34375,y:.03125},{x:.40625,y:.03125},{x:.40625,y:.03125},{x:.46875,y:.03125},{x:.46875,y:.03125},{x:.53125,y:.03125},{x:.53125,y:.03125},{x:.59375,y:.03125},{x:.59375,y:.03125},{x:.65625,y:.03125},{x:.65625,y:.03125},{x:.71875,y:.03125},{x:.71875,y:.03125},{x:.78125,y:.03125},{x:.78125,y:.03125},{x:.84375,y:.03125},{x:.84375,y:.03125},{x:.90625,y:.03125},{x:.90625,y:.03125},{x:.96875,y:.03125},{x:.96875,y:.03125},{x:.03125,y:.09375},{x:.03125,y:.09375},{x:.09375,y:.09375},{x:.09375,y:.09375},{x:.15625,y:.09375},{x:.15625,y:.09375},{x:.21875,y:.09375},{x:.21875,y:.09375},{x:.28125,y:.09375},{x:.28125,y:.09375},{x:.34375,y:.09375},{x:.34375,y:.09375},{x:.40625,y:.09375},{x:.40625,y:.09375},{x:.46875,y:.09375},{x:.46875,y:.09375},{x:.53125,y:.09375},{x:.53125,y:.09375},{x:.59375,y:.09375},{x:.59375,y:.09375},{x:.65625,y:.09375},{x:.65625,y:.09375},{x:.71875,y:.09375},{x:.71875,y:.09375},{x:.78125,y:.09375},{x:.78125,y:.09375},{x:.84375,y:.09375},{x:.84375,y:.09375},{x:.90625,y:.09375},{x:.90625,y:.09375},{x:.96875,y:.09375},{x:.96875,y:.09375},{x:.03125,y:.15625},{x:.03125,y:.15625},{x:.09375,y:.15625},{x:.09375,y:.15625},{x:.15625,y:.15625},{x:.15625,y:.15625},{x:.21875,y:.15625},{x:.21875,y:.15625},{x:.28125,y:.15625},{x:.28125,y:.15625},{x:.34375,y:.15625},{x:.34375,y:.15625},{x:.40625,y:.15625},{x:.40625,y:.15625},{x:.46875,y:.15625},{x:.46875,y:.15625},{x:.53125,y:.15625},{x:.53125,y:.15625},{x:.59375,y:.15625},{x:.59375,y:.15625},{x:.65625,y:.15625},{x:.65625,y:.15625},{x:.71875,y:.15625},{x:.71875,y:.15625},{x:.78125,y:.15625},{x:.78125,y:.15625},{x:.84375,y:.15625},{x:.84375,y:.15625},{x:.90625,y:.15625},{x:.90625,y:.15625},{x:.96875,y:.15625},{x:.96875,y:.15625},{x:.03125,y:.21875},{x:.03125,y:.21875},{x:.09375,y:.21875},{x:.09375,y:.21875},{x:.15625,y:.21875},{x:.15625,y:.21875},{x:.21875,y:.21875},{x:.21875,y:.21875},{x:.28125,y:.21875},{x:.28125,y:.21875},{x:.34375,y:.21875},{x:.34375,y:.21875},{x:.40625,y:.21875},{x:.40625,y:.21875},{x:.46875,y:.21875},{x:.46875,y:.21875},{x:.53125,y:.21875},{x:.53125,y:.21875},{x:.59375,y:.21875},{x:.59375,y:.21875},{x:.65625,y:.21875},{x:.65625,y:.21875},{x:.71875,y:.21875},{x:.71875,y:.21875},{x:.78125,y:.21875},{x:.78125,y:.21875},{x:.84375,y:.21875},{x:.84375,y:.21875},{x:.90625,y:.21875},{x:.90625,y:.21875},{x:.96875,y:.21875},{x:.96875,y:.21875},{x:.03125,y:.28125},{x:.03125,y:.28125},{x:.09375,y:.28125},{x:.09375,y:.28125},{x:.15625,y:.28125},{x:.15625,y:.28125},{x:.21875,y:.28125},{x:.21875,y:.28125},{x:.28125,y:.28125},{x:.28125,y:.28125},{x:.34375,y:.28125},{x:.34375,y:.28125},{x:.40625,y:.28125},{x:.40625,y:.28125},{x:.46875,y:.28125},{x:.46875,y:.28125},{x:.53125,y:.28125},{x:.53125,y:.28125},{x:.59375,y:.28125},{x:.59375,y:.28125},{x:.65625,y:.28125},{x:.65625,y:.28125},{x:.71875,y:.28125},{x:.71875,y:.28125},{x:.78125,y:.28125},{x:.78125,y:.28125},{x:.84375,y:.28125},{x:.84375,y:.28125},{x:.90625,y:.28125},{x:.90625,y:.28125},{x:.96875,y:.28125},{x:.96875,y:.28125},{x:.03125,y:.34375},{x:.03125,y:.34375},{x:.09375,y:.34375},{x:.09375,y:.34375},{x:.15625,y:.34375},{x:.15625,y:.34375},{x:.21875,y:.34375},{x:.21875,y:.34375},{x:.28125,y:.34375},{x:.28125,y:.34375},{x:.34375,y:.34375},{x:.34375,y:.34375},{x:.40625,y:.34375},{x:.40625,y:.34375},{x:.46875,y:.34375},{x:.46875,y:.34375},{x:.53125,y:.34375},{x:.53125,y:.34375},{x:.59375,y:.34375},{x:.59375,y:.34375},{x:.65625,y:.34375},{x:.65625,y:.34375},{x:.71875,y:.34375},{x:.71875,y:.34375},{x:.78125,y:.34375},{x:.78125,y:.34375},{x:.84375,y:.34375},{x:.84375,y:.34375},{x:.90625,y:.34375},{x:.90625,y:.34375},{x:.96875,y:.34375},{x:.96875,y:.34375},{x:.03125,y:.40625},{x:.03125,y:.40625},{x:.09375,y:.40625},{x:.09375,y:.40625},{x:.15625,y:.40625},{x:.15625,y:.40625},{x:.21875,y:.40625},{x:.21875,y:.40625},{x:.28125,y:.40625},{x:.28125,y:.40625},{x:.34375,y:.40625},{x:.34375,y:.40625},{x:.40625,y:.40625},{x:.40625,y:.40625},{x:.46875,y:.40625},{x:.46875,y:.40625},{x:.53125,y:.40625},{x:.53125,y:.40625},{x:.59375,y:.40625},{x:.59375,y:.40625},{x:.65625,y:.40625},{x:.65625,y:.40625},{x:.71875,y:.40625},{x:.71875,y:.40625},{x:.78125,y:.40625},{x:.78125,y:.40625},{x:.84375,y:.40625},{x:.84375,y:.40625},{x:.90625,y:.40625},{x:.90625,y:.40625},{x:.96875,y:.40625},{x:.96875,y:.40625},{x:.03125,y:.46875},{x:.03125,y:.46875},{x:.09375,y:.46875},{x:.09375,y:.46875},{x:.15625,y:.46875},{x:.15625,y:.46875},{x:.21875,y:.46875},{x:.21875,y:.46875},{x:.28125,y:.46875},{x:.28125,y:.46875},{x:.34375,y:.46875},{x:.34375,y:.46875},{x:.40625,y:.46875},{x:.40625,y:.46875},{x:.46875,y:.46875},{x:.46875,y:.46875},{x:.53125,y:.46875},{x:.53125,y:.46875},{x:.59375,y:.46875},{x:.59375,y:.46875},{x:.65625,y:.46875},{x:.65625,y:.46875},{x:.71875,y:.46875},{x:.71875,y:.46875},{x:.78125,y:.46875},{x:.78125,y:.46875},{x:.84375,y:.46875},{x:.84375,y:.46875},{x:.90625,y:.46875},{x:.90625,y:.46875},{x:.96875,y:.46875},{x:.96875,y:.46875},{x:.03125,y:.53125},{x:.03125,y:.53125},{x:.09375,y:.53125},{x:.09375,y:.53125},{x:.15625,y:.53125},{x:.15625,y:.53125},{x:.21875,y:.53125},{x:.21875,y:.53125},{x:.28125,y:.53125},{x:.28125,y:.53125},{x:.34375,y:.53125},{x:.34375,y:.53125},{x:.40625,y:.53125},{x:.40625,y:.53125},{x:.46875,y:.53125},{x:.46875,y:.53125},{x:.53125,y:.53125},{x:.53125,y:.53125},{x:.59375,y:.53125},{x:.59375,y:.53125},{x:.65625,y:.53125},{x:.65625,y:.53125},{x:.71875,y:.53125},{x:.71875,y:.53125},{x:.78125,y:.53125},{x:.78125,y:.53125},{x:.84375,y:.53125},{x:.84375,y:.53125},{x:.90625,y:.53125},{x:.90625,y:.53125},{x:.96875,y:.53125},{x:.96875,y:.53125},{x:.03125,y:.59375},{x:.03125,y:.59375},{x:.09375,y:.59375},{x:.09375,y:.59375},{x:.15625,y:.59375},{x:.15625,y:.59375},{x:.21875,y:.59375},{x:.21875,y:.59375},{x:.28125,y:.59375},{x:.28125,y:.59375},{x:.34375,y:.59375},{x:.34375,y:.59375},{x:.40625,y:.59375},{x:.40625,y:.59375},{x:.46875,y:.59375},{x:.46875,y:.59375},{x:.53125,y:.59375},{x:.53125,y:.59375},{x:.59375,y:.59375},{x:.59375,y:.59375},{x:.65625,y:.59375},{x:.65625,y:.59375},{x:.71875,y:.59375},{x:.71875,y:.59375},{x:.78125,y:.59375},{x:.78125,y:.59375},{x:.84375,y:.59375},{x:.84375,y:.59375},{x:.90625,y:.59375},{x:.90625,y:.59375},{x:.96875,y:.59375},{x:.96875,y:.59375},{x:.03125,y:.65625},{x:.03125,y:.65625},{x:.09375,y:.65625},{x:.09375,y:.65625},{x:.15625,y:.65625},{x:.15625,y:.65625},{x:.21875,y:.65625},{x:.21875,y:.65625},{x:.28125,y:.65625},{x:.28125,y:.65625},{x:.34375,y:.65625},{x:.34375,y:.65625},{x:.40625,y:.65625},{x:.40625,y:.65625},{x:.46875,y:.65625},{x:.46875,y:.65625},{x:.53125,y:.65625},{x:.53125,y:.65625},{x:.59375,y:.65625},{x:.59375,y:.65625},{x:.65625,y:.65625},{x:.65625,y:.65625},{x:.71875,y:.65625},{x:.71875,y:.65625},{x:.78125,y:.65625},{x:.78125,y:.65625},{x:.84375,y:.65625},{x:.84375,y:.65625},{x:.90625,y:.65625},{x:.90625,y:.65625},{x:.96875,y:.65625},{x:.96875,y:.65625},{x:.03125,y:.71875},{x:.03125,y:.71875},{x:.09375,y:.71875},{x:.09375,y:.71875},{x:.15625,y:.71875},{x:.15625,y:.71875},{x:.21875,y:.71875},{x:.21875,y:.71875},{x:.28125,y:.71875},{x:.28125,y:.71875},{x:.34375,y:.71875},{x:.34375,y:.71875},{x:.40625,y:.71875},{x:.40625,y:.71875},{x:.46875,y:.71875},{x:.46875,y:.71875},{x:.53125,y:.71875},{x:.53125,y:.71875},{x:.59375,y:.71875},{x:.59375,y:.71875},{x:.65625,y:.71875},{x:.65625,y:.71875},{x:.71875,y:.71875},{x:.71875,y:.71875},{x:.78125,y:.71875},{x:.78125,y:.71875},{x:.84375,y:.71875},{x:.84375,y:.71875},{x:.90625,y:.71875},{x:.90625,y:.71875},{x:.96875,y:.71875},{x:.96875,y:.71875},{x:.03125,y:.78125},{x:.03125,y:.78125},{x:.09375,y:.78125},{x:.09375,y:.78125},{x:.15625,y:.78125},{x:.15625,y:.78125},{x:.21875,y:.78125},{x:.21875,y:.78125},{x:.28125,y:.78125},{x:.28125,y:.78125},{x:.34375,y:.78125},{x:.34375,y:.78125},{x:.40625,y:.78125},{x:.40625,y:.78125},{x:.46875,y:.78125},{x:.46875,y:.78125},{x:.53125,y:.78125},{x:.53125,y:.78125},{x:.59375,y:.78125},{x:.59375,y:.78125},{x:.65625,y:.78125},{x:.65625,y:.78125},{x:.71875,y:.78125},{x:.71875,y:.78125},{x:.78125,y:.78125},{x:.78125,y:.78125},{x:.84375,y:.78125},{x:.84375,y:.78125},{x:.90625,y:.78125},{x:.90625,y:.78125},{x:.96875,y:.78125},{x:.96875,y:.78125},{x:.03125,y:.84375},{x:.03125,y:.84375},{x:.09375,y:.84375},{x:.09375,y:.84375},{x:.15625,y:.84375},{x:.15625,y:.84375},{x:.21875,y:.84375},{x:.21875,y:.84375},{x:.28125,y:.84375},{x:.28125,y:.84375},{x:.34375,y:.84375},{x:.34375,y:.84375},{x:.40625,y:.84375},{x:.40625,y:.84375},{x:.46875,y:.84375},{x:.46875,y:.84375},{x:.53125,y:.84375},{x:.53125,y:.84375},{x:.59375,y:.84375},{x:.59375,y:.84375},{x:.65625,y:.84375},{x:.65625,y:.84375},{x:.71875,y:.84375},{x:.71875,y:.84375},{x:.78125,y:.84375},{x:.78125,y:.84375},{x:.84375,y:.84375},{x:.84375,y:.84375},{x:.90625,y:.84375},{x:.90625,y:.84375},{x:.96875,y:.84375},{x:.96875,y:.84375},{x:.03125,y:.90625},{x:.03125,y:.90625},{x:.09375,y:.90625},{x:.09375,y:.90625},{x:.15625,y:.90625},{x:.15625,y:.90625},{x:.21875,y:.90625},{x:.21875,y:.90625},{x:.28125,y:.90625},{x:.28125,y:.90625},{x:.34375,y:.90625},{x:.34375,y:.90625},{x:.40625,y:.90625},{x:.40625,y:.90625},{x:.46875,y:.90625},{x:.46875,y:.90625},{x:.53125,y:.90625},{x:.53125,y:.90625},{x:.59375,y:.90625},{x:.59375,y:.90625},{x:.65625,y:.90625},{x:.65625,y:.90625},{x:.71875,y:.90625},{x:.71875,y:.90625},{x:.78125,y:.90625},{x:.78125,y:.90625},{x:.84375,y:.90625},{x:.84375,y:.90625},{x:.90625,y:.90625},{x:.90625,y:.90625},{x:.96875,y:.90625},{x:.96875,y:.90625},{x:.03125,y:.96875},{x:.03125,y:.96875},{x:.09375,y:.96875},{x:.09375,y:.96875},{x:.15625,y:.96875},{x:.15625,y:.96875},{x:.21875,y:.96875},{x:.21875,y:.96875},{x:.28125,y:.96875},{x:.28125,y:.96875},{x:.34375,y:.96875},{x:.34375,y:.96875},{x:.40625,y:.96875},{x:.40625,y:.96875},{x:.46875,y:.96875},{x:.46875,y:.96875},{x:.53125,y:.96875},{x:.53125,y:.96875},{x:.59375,y:.96875},{x:.59375,y:.96875},{x:.65625,y:.96875},{x:.65625,y:.96875},{x:.71875,y:.96875},{x:.71875,y:.96875},{x:.78125,y:.96875},{x:.78125,y:.96875},{x:.84375,y:.96875},{x:.84375,y:.96875},{x:.90625,y:.96875},{x:.90625,y:.96875},{x:.96875,y:.96875},{x:.96875,y:.96875},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375}];function T5(e,t){return function(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}(Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))}var C5=(e,t)=>[[1,0,e],[0,1,t],[0,0,1]];function N5(e,t){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}function M5(e,t){let n=[];for(let r=0;r<e.length;r++)n.push(e[r][t]);return n}function F5(e,t){let n=[],r=e.length;for(let a=0;a<r;a++){n.push([]);for(let s=0;s<r;s++)n[a].push(N5(e[a],M5(t,s)))}return n}function R5(e,t){let n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],s=F5(C5(t[0],t[1]),a);return F5(s,C5(-t[0],-t[1]))}function D5(e,t){return[N5(e,t[0]),N5(e,t[1])]}var O5,z5,P5,$5=[0,5,9,13,17,1,2],L5={thumb:[1,2,3,4],indexFinger:[5,6,7,8],middleFinger:[9,10,11,12],ringFinger:[13,14,15,16],pinky:[17,18,19,20],palmBase:[0]};async function V5(e,t){let n=await P5.estimateHands(e,t);if(!n)return[];let r=[];for(let a=0;a<n.length;a++){let t={};if(n[a].landmarks)for(let e of Object.keys(L5))t[e]=L5[e].map(e=>n[a].landmarks[e]);let s=n[a].landmarks,i=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,0,0],o=[0,0,0,0];if(s&&s.length>0){for(let e of s)e[0]<i[0]&&(i[0]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[0]>i[2]&&(i[2]=e[0]),e[1]>i[3]&&(i[3]=e[1]);i[2]-=i[0],i[3]-=i[1],o=[i[0]/(e.shape[2]||0),i[1]/(e.shape[1]||0),i[2]/(e.shape[2]||0),i[3]/(e.shape[1]||0)]}else i=n[a].box?[Math.trunc(Math.max(0,n[a].box.topLeft[0])),Math.trunc(Math.max(0,n[a].box.topLeft[1])),Math.trunc(Math.min(e.shape[2]||0,n[a].box.bottomRight[0])-Math.max(0,n[a].box.topLeft[0])),Math.trunc(Math.min(e.shape[1]||0,n[a].box.bottomRight[1])-Math.max(0,n[a].box.topLeft[1]))]:[0,0,0,0],o=[n[a].box.topLeft[0]/(e.shape[2]||0),n[a].box.topLeft[1]/(e.shape[1]||0),(n[a].box.bottomRight[0]-n[a].box.topLeft[0])/(e.shape[2]||0),(n[a].box.bottomRight[1]-n[a].box.topLeft[1])/(e.shape[1]||0)];r.push({id:a,score:Math.round(100*n[a].confidence)/100,box:i,boxRaw:o,keypoints:s,annotations:t})}return r}async function B5(e){O5&&z5?(e.debug&&c("cached model:",O5.modelUrl),e.debug&&c("cached model:",z5.modelUrl)):([O5,z5]=await Promise.all([e.hand.enabled?e$(h(e.modelBasePath,e.hand.detector.modelPath),{fromTFHub:e.hand.detector.modelPath.includes("tfhub.dev")}):null,e.hand.landmarks?e$(h(e.modelBasePath,e.hand.skeleton.modelPath),{fromTFHub:e.hand.skeleton.modelPath.includes("tfhub.dev")}):null]),e.hand.enabled&&(O5&&O5.modelUrl?e.debug&&c("load model:",O5.modelUrl):c("load model failed:",e.hand.detector.modelPath),z5&&z5.modelUrl?e.debug&&c("load model:",z5.modelUrl):c("load model failed:",e.hand.skeleton.modelPath)));let t=new class{constructor(e){var t;this.model=e,this.anchors=E5.map(e=>[e.x,e.y]),this.anchorsTensor=jc(this.anchors),this.inputSize=null==(t=this.model)?void 0:t.inputs[0].shape[2],this.inputSizeTensor=Wc([this.inputSize,this.inputSize]),this.doubleInputSizeTensor=Wc([2*this.inputSize,2*this.inputSize])}normalizeBoxes(e){return Ko(()=>{let t=Wl(e,[0,0],[-1,2]),n=Wl(e,[0,2],[-1,2]),r=ol(ul(t,this.inputSizeTensor),this.anchorsTensor),a=ul(n,this.doubleInputSizeTensor),s=hl(uh(r,a),this.inputSizeTensor),i=hl(ol(r,a),this.inputSizeTensor);return nu([s,i],1)})}normalizeLandmarks(e,t){return Ko(()=>{let n=ol(ul(e.reshape([-1,7,2]),this.inputSizeTensor),this.anchors[t]);return hl(n,this.inputSizeTensor)})}async getBoxes(e,t){let n=this.model.predict(e),r=Pc(n);n.dispose();let a=Ko(()=>Bl(Wl(r,[0,0],[-1,1])).squeeze()),s=a.dataSync(),i=Wl(r,[0,1],[-1,4]),o=this.normalizeBoxes(i);i.dispose();let l=await gp.nonMaxSuppressionAsync(o,s,t.hand.maxDetected,t.hand.iouThreshold,t.hand.minConfidence),u=l.arraySync();a.dispose(),l.dispose();let h=[];for(let c of u)if(s[c]>=t.hand.minConfidence){let e=Wl(o,[c,0],[1,-1]),t=Wl(r,[c,5],[1,14]),n=Ko(()=>this.normalizeLandmarks(t,c).reshape([-1,2]));t.dispose(),h.push({box:e,palmLandmarks:n,confidence:s[c]})}return r.dispose(),o.dispose(),h}async estimateHandBounds(e,t){let n=e.shape[1],r=e.shape[2],a=Ko(()=>e.resizeBilinear([this.inputSize,this.inputSize]).div(127.5).sub(1)),s=await this.getBoxes(a,t);a.dispose();let i=[];if(!s||0===s.length)return i;for(let o of s){let e=o.box.dataSync(),t=e.slice(0,2),a=e.slice(2,4),s=o.palmLandmarks.arraySync();o.box.dispose(),o.palmLandmarks.dispose(),i.push(S5({startPoint:t,endPoint:a,palmLandmarks:s,confidence:o.confidence},[r/this.inputSize,n/this.inputSize]))}return i}}(O5);return P5=new class{constructor(e,t){var n;this.handDetector=e,this.handPoseModel=t,this.inputSize=null==(n=this.handPoseModel)?void 0:n.inputs[0].shape[2],this.storedBoxes=[],this.skipped=0,this.detectedHands=0}calculateLandmarksBoundingBox(e){let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return{startPoint:[Math.min(...t),Math.min(...n)],endPoint:[Math.max(...t),Math.max(...n)]}}getBoxForPalmLandmarks(e,t){let n=e.map(e=>D5([...e,1],t));return I5(_5(this.calculateLandmarksBoundingBox(n)),5)}getBoxForHandLandmarks(e){let t=I5(_5(this.calculateLandmarksBoundingBox(e)),1.65);t.palmLandmarks=[];for(let n=0;n<$5.length;n++)t.palmLandmarks.push(e[$5[n]].slice(0,2));return t}transformRawCoords(e,t,n,r){let a=A5(t),s=[a[0]/this.inputSize,a[1]/this.inputSize,(a[0]+a[1])/this.inputSize/2],i=e.map(e=>[s[0]*(e[0]-this.inputSize/2),s[1]*(e[1]-this.inputSize/2),s[2]*e[2]]),o=R5(n,[0,0]),l=i.map(e=>[...D5(e,o),e[2]]),u=function(e){let t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-N5(t[0],n),-N5(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r),h=[...w5(t),1],c=[N5(h,u[0]),N5(h,u[1])];return l.map(e=>[Math.trunc(e[0]+c[0]),Math.trunc(e[1]+c[1]),Math.trunc(e[2])])}async estimateHands(e,t){let n,r=!1;(0===this.skipped||this.skipped>t.hand.skipFrames||!t.hand.landmarks||!t.skipFrame)&&(n=await this.handDetector.estimateHandBounds(e,t),this.skipped=0),t.skipFrame&&this.skipped++,n&&n.length>0&&(n.length!==this.detectedHands&&this.detectedHands!==t.hand.maxDetected||!t.hand.landmarks)&&(this.detectedHands=0,this.storedBoxes=[...n],this.storedBoxes.length>0&&(r=!0));let a=[];for(let s=0;s<this.storedBoxes.length;s++){let n=this.storedBoxes[s];if(n)if(t.hand.landmarks){let i=t.hand.rotation?T5(n.palmLandmarks[0],n.palmLandmarks[2]):0,o=w5(n),l=[o[0]/e.shape[2],o[1]/e.shape[1]],u=t.hand.rotation&&Qe.flags.IS_BROWSER?gp.rotateWithOffset(e,i,0,l):e.clone(),h=R5(-i,o),c=r?this.getBoxForPalmLandmarks(n.palmLandmarks,h):n,d=k5(c,u,[this.inputSize,this.inputSize]),p=d.div(255);d.dispose(),u.dispose();let[f,m]=await this.handPoseModel.predict(p);p.dispose();let g=f.dataSync()[0];if(f.dispose(),g>=t.hand.minConfidence){let e=Pl(m,[-1,3]),t=e.arraySync();m.dispose(),e.dispose();let n=this.transformRawCoords(t,c,i,h),r=this.getBoxForHandLandmarks(n);this.storedBoxes[s]={...r,confidence:g},a.push({landmarks:n,confidence:g,box:{topLeft:r.startPoint,bottomRight:r.endPoint}})}else this.storedBoxes[s]=null;m.dispose()}else{let e=I5(_5(n),1.65);a.push({confidence:n.confidence,box:{topLeft:e.startPoint,bottomRight:e.endPoint}})}}return this.storedBoxes=this.storedBoxes.filter(e=>null!==e),this.detectedHands=a.length,a}}(t,z5),[O5,z5]}var W5,j5=["nose","leftEyeInside","leftEye","leftEyeOutside","rightEyeInside","rightEye","rightEyeOutside","leftEar","rightEar","leftMouth","rightMouth","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftPalm","rightPalm","leftIndex","rightIndex","leftPinky","rightPinky","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","leftHeel","rightHeel","leftFoot","rightFoot","midHip","forehead","leftThumb","leftHand","rightThumb","rightHand"],H5=["nose","leftEyeInside","leftEye","leftEyeOutside","rightEyeInside","rightEye","rightEyeOutside","leftEar","rightEar","leftMouth","rightMouth","leftShoulder","rightShoulder","leftElbow","rightElbow","left:15","right:16","left:17","right:18","left:19","right:20","left:21","right:22","leftChest","rightChest","neck","forehead","left:27","right:28","left:29","right:30"];async function U5(e){return W5?e.debug&&c("cached model:",W5.modelUrl):((W5=await e$(h(e.modelBasePath,e.body.modelPath))).width=parseInt(W5.signature.inputs["input_1:0"].tensorShape.dim[2].size),W5.height=parseInt(W5.signature.inputs["input_1:0"].tensorShape.dim[1].size),W5&&W5.modelUrl?e.debug&&c("load model:",W5.modelUrl):c("load model failed:",e.body.modelPath)),W5}async function G5(e,t){var n;if(!W5)return[];if(!t.body.enabled)return[];let r=e.shape[2]||0,a=e.shape[1]||0,s=gp.resizeBilinear(e,[W5.width,W5.height],!1),i=ul(s,[255]);s.dispose();let o=await W5.predict(i),l=(null==(n=o.find(e=>195===e.size||155===e.size))?void 0:n.dataSync())||[];o.forEach(e=>e.dispose()),i.dispose();let u=[],h=195===(null==l?void 0:l.length)?j5:H5;for(let f=0;f<l.length/5;f++)u.push({id:f,part:h[f],position:[Math.trunc(r*l[5*f+0]/255),Math.trunc(a*l[5*f+1]/255),Math.trunc(l[5*f+2])+0],positionRaw:[l[5*f+0]/255,l[5*f+1]/255,l[5*f+2]+0],score:(100-Math.trunc(100/(1+Math.exp(l[5*f+3]))))/100,presence:(100-Math.trunc(100/(1+Math.exp(l[5*f+4]))))/100});let c=u.map(e=>e.position[0]),d=u.map(e=>e.position[1]),p=[Math.min(...c),Math.min(...d),Math.max(...c)-Math.min(...c),Math.max(...d)-Math.min(...c)];return[{id:0,score:u.reduce((e,t)=>t.score>e?t.score:e,0),box:p,boxRaw:[0,0,0,0],keypoints:u}]}var q5,K5=[],X5=[0,0,0,0],Z5=[0,0,0,0],Y5=0,J5=Number.MAX_SAFE_INTEGER,Q5=["head","neck","rightShoulder","rightElbow","rightWrist","chest","leftShoulder","leftElbow","leftWrist","pelvis","rightHip","rightKnee","rightAnkle","leftHip","leftKnee","leftAnkle"];async function e4(e){return q5?e.debug&&c("cached model:",q5.modelUrl):(q5=await e$(h(e.modelBasePath,e.body.modelPath)))&&q5.modelUrl?e.debug&&c("load model:",q5.modelUrl):c("load model failed:",e.body.modelPath),q5}function t4(e,t){let[n,r]=e.shape;return Ko(()=>{let a=Pl(e,[r*n]),s=lh(a,0).dataSync()[0];if(s>t){let e=yl(a,0);return[((e,t)=>uh(e,hl(ul(e,bc(t,"int32")),bc(t,"int32"))))(e,n).dataSync()[0],ul(e,bc(n,"int32")).dataSync()[0],s]}return[0,0,s]})}async function n4(e,t){return J5<t.body.skipFrames&&t.skipFrame&&Object.keys(K5).length>0?(J5++,[{id:0,score:Y5,box:X5,boxRaw:Z5,keypoints:K5}]):(J5=0,new Promise(async n=>{let r,a=Ko(()=>{if(!q5.inputs[0].shape)return null;let t=gp.resizeBilinear(e,[q5.inputs[0].shape[2],q5.inputs[0].shape[1]],!1);return hl(t,2).sub(1)});if(t.body.enabled&&(r=await q5.predict(a)),a.dispose(),r){K5.length=0;let n=r.squeeze();Xo(r);let a=n.unstack(2);Xo(n);for(let r=0;r<a.length;r++){let[n,s,i]=t4(a[r],t.body.minConfidence);Y5>t.body.minConfidence&&K5.push({score:Math.round(100*i)/100,part:Q5[r],positionRaw:[n/q5.inputs[0].shape[2],s/q5.inputs[0].shape[1]],position:[Math.round(e.shape[2]*n/q5.inputs[0].shape[2]),Math.round(e.shape[1]*s/q5.inputs[0].shape[1])]})}a.forEach(e=>Xo(e))}Y5=K5.reduce((e,t)=>t.score>e?t.score:e,0);let s=K5.map(e=>e.position[0]),i=K5.map(e=>e.position[1]);X5=[Math.min(...s),Math.min(...i),Math.max(...s)-Math.min(...s),Math.max(...i)-Math.min(...i)];let o=K5.map(e=>e.positionRaw[0]),l=K5.map(e=>e.positionRaw[1]);Z5=[Math.min(...o),Math.min(...l),Math.max(...o)-Math.min(...o),Math.max(...l)-Math.min(...l)],n([{id:0,score:Y5,box:X5,boxRaw:Z5,keypoints:K5}])}))}var r4,a4=[],s4=[0,0,0,0],i4=[0,0,0,0],o4=0,l4=Number.MAX_SAFE_INTEGER,u4=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"];async function h4(e){return r4?e.debug&&c("cached model:",r4.modelUrl):(r4=await e$(h(e.modelBasePath,e.body.modelPath)))&&r4.modelUrl?e.debug&&c("load model:",r4.modelUrl):c("load model failed:",e.body.modelPath),r4}async function c4(e,t){return l4<t.body.skipFrames&&t.skipFrame&&Object.keys(a4).length>0?(l4++,[{id:0,score:o4,box:s4,boxRaw:i4,keypoints:a4}]):(l4=0,new Promise(async n=>{let r,a=Ko(()=>{if(!r4.inputs[0].shape)return null;let t=gp.resizeBilinear(e,[r4.inputs[0].shape[2],r4.inputs[0].shape[1]],!1);return Ai(t,"int32")});if(t.body.enabled&&(r=await r4.predict(a)),a.dispose(),r){a4.length=0;let n=r.arraySync();Xo(r);let a=n[0][0];for(let r=0;r<a.length;r++)(o4=a[r][2])>t.body.minConfidence&&a4.push({score:Math.round(100*o4)/100,part:u4[r],positionRaw:[a[r][1],a[r][0]],position:[Math.round((e.shape[2]||0)*a[r][1]),Math.round((e.shape[1]||0)*a[r][0])]})}o4=a4.reduce((e,t)=>t.score>e?t.score:e,0);let s=a4.map(e=>e.position[0]),i=a4.map(e=>e.position[1]);s4=[Math.min(...s),Math.min(...i),Math.max(...s)-Math.min(...s),Math.max(...i)-Math.min(...i)];let o=a4.map(e=>e.positionRaw[0]),l=a4.map(e=>e.positionRaw[1]);i4=[Math.min(...o),Math.min(...l),Math.max(...o)-Math.min(...o),Math.max(...l)-Math.min(...l)],n([{id:0,score:o4,box:s4,boxRaw:i4,keypoints:a4}])}))}var d4,p4=[{class:1,label:"person"},{class:2,label:"bicycle"},{class:3,label:"car"},{class:4,label:"motorcycle"},{class:5,label:"airplane"},{class:6,label:"bus"},{class:7,label:"train"},{class:8,label:"truck"},{class:9,label:"boat"},{class:10,label:"traffic light"},{class:11,label:"fire hydrant"},{class:12,label:"stop sign"},{class:13,label:"parking meter"},{class:14,label:"bench"},{class:15,label:"bird"},{class:16,label:"cat"},{class:17,label:"dog"},{class:18,label:"horse"},{class:19,label:"sheep"},{class:20,label:"cow"},{class:21,label:"elephant"},{class:22,label:"bear"},{class:23,label:"zebra"},{class:24,label:"giraffe"},{class:25,label:"backpack"},{class:26,label:"umbrella"},{class:27,label:"handbag"},{class:28,label:"tie"},{class:29,label:"suitcase"},{class:30,label:"frisbee"},{class:31,label:"skis"},{class:32,label:"snowboard"},{class:33,label:"sports ball"},{class:34,label:"kite"},{class:35,label:"baseball bat"},{class:36,label:"baseball glove"},{class:37,label:"skateboard"},{class:38,label:"surfboard"},{class:39,label:"tennis racket"},{class:40,label:"bottle"},{class:41,label:"wine glass"},{class:42,label:"cup"},{class:43,label:"fork"},{class:44,label:"knife"},{class:45,label:"spoon"},{class:46,label:"bowl"},{class:47,label:"banana"},{class:48,label:"apple"},{class:49,label:"sandwich"},{class:50,label:"orange"},{class:51,label:"broccoli"},{class:52,label:"carrot"},{class:53,label:"hot dog"},{class:54,label:"pizza"},{class:55,label:"donut"},{class:56,label:"cake"},{class:57,label:"chair"},{class:58,label:"couch"},{class:59,label:"potted plant"},{class:60,label:"bed"},{class:61,label:"dining table"},{class:62,label:"toilet"},{class:63,label:"tv"},{class:64,label:"laptop"},{class:65,label:"mouse"},{class:66,label:"remote"},{class:67,label:"keyboard"},{class:68,label:"cell phone"},{class:69,label:"microwave"},{class:70,label:"oven"},{class:71,label:"toaster"},{class:72,label:"sink"},{class:73,label:"refrigerator"},{class:74,label:"book"},{class:75,label:"clock"},{class:76,label:"vase"},{class:77,label:"scissors"},{class:78,label:"teddy bear"},{class:79,label:"hair drier"},{class:80,label:"toothbrush"}],f4=[],m4=Number.MAX_SAFE_INTEGER,g4=2.5;async function y4(e){if(d4)e.debug&&c("cached model:",d4.modelUrl);else{d4=await e$(h(e.modelBasePath,e.object.modelPath));let t=Object.values(d4.modelSignature.inputs);if(d4.inputSize=Array.isArray(t)?parseInt(t[0].tensorShape.dim[2].size):null,!d4.inputSize)throw new Error("Human: Cannot determine model inputSize: "+e.object.modelPath);d4&&d4.modelUrl?e.debug&&c("load model:",d4.modelUrl):c("load model failed:",e.object.modelPath)}return d4}async function b4(e,t){return m4<t.object.skipFrames&&t.skipFrame&&f4.length>0?(m4++,f4):(m4=0,new Promise(async n=>{let r,a=[e.shape[2],e.shape[1]],s=gp.resizeBilinear(e,[d4.inputSize,d4.inputSize],!1),i=s.div(255),o=i.transpose([0,3,1,2]);i.dispose(),s.dispose(),t.object.enabled&&(r=await d4.predict(o)),o.dispose();let l=await async function(e,t,n,r){let a=0,s=[];for(let u of[1,2,4])Ko(()=>{var i,o;let l=13*u,h=null==(i=e.find(e=>e.shape[1]===l**2&&e.shape[2]===p4.length))?void 0:i.squeeze(),c=null==(o=e.find(e=>e.shape[1]===l**2&&e.shape[2]<p4.length))?void 0:o.squeeze(),d=c.reshape([-1,4,c.shape[1]/4]).argMax(2).arraySync(),p=h.arraySync();for(let e=0;e<h.shape[0];e++)for(let i=0;i<h.shape[1];i++){let o=p[e][i];if(o>r.object.minConfidence&&61!==i){let r=(.5+Math.trunc(e%l))/l,h=(.5+Math.trunc(e/l))/l,c=d[e].map(e=>e*(l/u/t)),[p,f]=[r-g4/u*c[0],h-g4/u*c[1]],[m,g]=[r+g4/u*c[2]-p,h+g4/u*c[3]-f],y=[p,f,m,g];y=y.map(e=>Math.max(0,Math.min(e,1)));let b=[y[0]*n[0],y[1]*n[1],y[2]*n[0],y[3]*n[1]],x={id:a++,score:Math.round(100*o)/100,class:i+1,label:p4[i].label,box:b.map(e=>Math.trunc(e)),boxRaw:y};s.push(x)}}});e.forEach(e=>Xo(e));let i=s.map(e=>[e.boxRaw[1],e.boxRaw[0],e.boxRaw[3],e.boxRaw[2]]),o=s.map(e=>e.score),l=[];if(i&&i.length>0){let e=await gp.nonMaxSuppressionAsync(i,o,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence);l=e.dataSync(),Xo(e)}return s=s.filter((e,t)=>l.includes(t)).sort((e,t)=>t.score-e.score),s}(r,d4.inputSize,a,t);f4=l,n(l)}))}var x4,v4=[],A4=Number.MAX_SAFE_INTEGER;async function w4(e){if(x4)e.debug&&c("cached model:",x4.modelUrl);else{x4=await e$(h(e.modelBasePath,e.object.modelPath));let t=Object.values(x4.modelSignature.inputs);if(x4.inputSize=Array.isArray(t)?parseInt(t[0].tensorShape.dim[2].size):null,!x4.inputSize)throw new Error("Human: Cannot determine model inputSize: "+e.object.modelPath);x4&&x4.modelUrl?e.debug&&c("load model:",x4.modelUrl):c("load model failed:",e.object.modelPath)}return x4}async function k4(e,t){return A4<t.object.skipFrames&&t.skipFrame&&v4.length>0?(A4++,v4):(A4=0,new Promise(async n=>{let r=[e.shape[2],e.shape[1]],a=gp.resizeBilinear(e,[x4.inputSize,x4.inputSize]),s=t.object.enabled?x4.execute(a,["tower_0/detections"]):null;a.dispose();let i=await async function(e,t,n,r){if(!e)return[];let a=[],s=e.arraySync(),i=Pc(e);e.dispose();let o=Rc(i,6,1);i.dispose();let l=$c([o[1],o[0],o[3],o[2]],1).squeeze(),u=o[4].squeeze(),h=o[5].squeeze();o.forEach(e=>e.dispose());let c=await gp.nonMaxSuppressionAsync(l,u,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence);l.dispose(),u.dispose(),h.dispose();let d=c.dataSync();c.dispose();let p=0;for(let f of d){let e=Math.trunc(100*s[0][f][4])/100,r=s[0][f][5],i=p4[r].label,[o,l]=[s[0][f][0]/t,s[0][f][1]/t],u=[o,l,s[0][f][2]/t-o,s[0][f][3]/t-l],h=[Math.trunc(u[0]*n[0]),Math.trunc(u[1]*n[1]),Math.trunc(u[2]*n[0]),Math.trunc(u[3]*n[1])];a.push({id:p++,score:e,class:r,label:i,box:h,boxRaw:u})}return a}(s,x4.inputSize,r,t);v4=i,n(i)}))}function S4(e,t,n){let r=function(e,t,n){let r=new RegExp("\\b"+t+" \\w+ (\\w+)","ig");e.replace(r,(e,t)=>(n[t]=0,e))},a=function(t,n){let r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Filter: GL compile failed",e.getShaderInfoLog(r));return r};this.uniform={},this.attribute={};let s=a(t,e.VERTEX_SHADER),i=a(n,e.FRAGMENT_SHADER);if(this.id=e.createProgram(),e.attachShader(this.id,s),e.attachShader(this.id,i),e.linkProgram(this.id),!e.getProgramParameter(this.id,e.LINK_STATUS))throw new Error("Filter: GL link failed",e.getProgramInfoLog(this.id));e.useProgram(this.id),r(t,"attribute",this.attribute);for(let o in this.attribute)this.attribute[o]=e.getAttribLocation(this.id,o);r(t,"uniform",this.uniform),r(n,"uniform",this.uniform);for(let o in this.uniform)this.uniform[o]=e.getUniformLocation(this.id,o)}function I4(e){e||(e={});let t=0,n=null,r=!1,a=-1,s=[null,null],i=[],o=-1,l=-1,u=null,h=null,c={},d=e.canvas||document.createElement("canvas"),p={},f=d.getContext("webgl");if(!f)throw new Error("Filter: getContext() failed");this.addFilter=function(e){let t=Array.prototype.slice.call(arguments,1),n=c[e];i.push({func:n,args:t})},this.reset=function(){i=[]};let m=function(e){return s[e]=s[e]||function(e,t){let n=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,n);let r=f.createRenderbuffer();f.bindRenderbuffer(f.RENDERBUFFER,r);let a=f.createTexture();return f.bindTexture(f.TEXTURE_2D,a),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,e,t,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,a,0),f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,null),{fbo:n,texture:a}}(o,l),s[e]},g=function(e=null){var s,i;let o=null,l=null,u=!1;o=0===t?n:null==(s=m(a))?void 0:s.texture,t++,!r||1&e?(a=(a+1)%2,l=null==(i=m(a))?void 0:i.fbo):(l=null,u=t%2==0),f.bindTexture(f.TEXTURE_2D,o),f.bindFramebuffer(f.FRAMEBUFFER,l),f.uniform1f(h.uniform.flipY,u?-1:1),f.drawArrays(f.TRIANGLES,0,6)};this.apply=function(e){if(function(e,t){if(e!==o||t!==l){if(d.width=e,o=e,d.height=t,l=t,!u){let e=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);u=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,u),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}f.viewport(0,0,o,l),s=[null,null]}}(e.width,e.height),t=0,n||(n=f.createTexture()),f.bindTexture(f.TEXTURE_2D,n),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e),0===i.length)return g(),d;for(let t=0;t<i.length;t++){r=t===i.length-1;let e=i[t];e.func.apply(this,e.args||[])}return d};let y=function(e){if(p[e])return h=p[e],f.useProgram(h.id),h;let t={};t.VERTEX_IDENTITY=["precision highp float;","attribute vec2 pos;","attribute vec2 uv;","varying vec2 vUv;","uniform float flipY;","void main(void) {","vUv = uv;","gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);","}"].join("\n"),t.FRAGMENT_IDENTITY=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","void main(void) {","gl_FragColor = texture2D(texture, vUv);","}"].join("\n"),h=new S4(f,t.VERTEX_IDENTITY,e);let n=Float32Array.BYTES_PER_ELEMENT,r=4*n;return f.enableVertexAttribArray(h.attribute.pos),f.vertexAttribPointer(h.attribute.pos,2,f.FLOAT,!1,r,0*n),f.enableVertexAttribArray(h.attribute.uv),f.vertexAttribPointer(h.attribute.uv,2,f.FLOAT,!1,r,2*n),p[e]=h,h};c.colorMatrix=function(e){let t=new Float32Array(e);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255;let n=y(1===t[18]&&0===t[3]&&0===t[8]&&0===t[13]&&0===t[15]&&0===t[16]&&0===t[17]&&0===t[19]?c.colorMatrix.SHADER.WITHOUT_ALPHA:c.colorMatrix.SHADER.WITH_ALPHA);f.uniform1fv(n.uniform.m,t),g()},c.colorMatrix.SHADER={},c.colorMatrix.SHADER.WITH_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];","gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];","}"].join("\n"),c.colorMatrix.SHADER.WITHOUT_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];","gl_FragColor.a = c.a;","}"].join("\n"),c.brightness=function(e){let t=(e||0)+1;c.colorMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])},c.saturation=function(e){let t=2*(e||0)/3+1,n=-.5*(t-1);c.colorMatrix([t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0])},c.desaturate=function(){c.saturation(-1)},c.contrast=function(e){let t=(e||0)+1,n=-128*(t-1);c.colorMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0])},c.negative=function(){c.contrast(-2)},c.hue=function(e){e=(e||0)/180*Math.PI;let t=Math.cos(e),n=Math.sin(e),r=.213,a=.715,s=.072;c.colorMatrix([r+t*(1-r)+n*-r,a+t*-a+n*-a,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,a+t*(1-a)+.14*n,s+t*-s+-.283*n,0,0,r+t*-r+-.787*n,a+t*-a+n*a,s+t*(1-s)+n*s,0,0,0,0,0,1,0])},c.desaturateLuminance=function(){c.colorMatrix([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0])},c.sepia=function(){c.colorMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0])},c.brownie=function(){c.colorMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])},c.vintagePinhole=function(){c.colorMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])},c.kodachrome=function(){c.colorMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])},c.technicolor=function(){c.colorMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])},c.polaroid=function(){c.colorMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])},c.shiftToBGR=function(){c.colorMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])},c.convolution=function(e){let t=new Float32Array(e),n=1/o,r=1/l,a=y(c.convolution.SHADER);f.uniform1fv(a.uniform.m,t),f.uniform2f(a.uniform.px,n,r),g()},c.convolution.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","uniform float m[9];","void main(void) {","vec4 c11 = texture2D(texture, vUv - px);","vec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y));","vec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y));","vec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) );","vec4 c22 = texture2D(texture, vUv);","vec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) );","vec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) );","vec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) );","vec4 c33 = texture2D(texture, vUv + px );","gl_FragColor = ","c11 * m[0] + c12 * m[1] + c22 * m[2] +","c21 * m[3] + c22 * m[4] + c23 * m[5] +","c31 * m[6] + c32 * m[7] + c33 * m[8];","gl_FragColor.a = c22.a;","}"].join("\n"),c.detectEdges=function(){c.convolution.call(this,[0,1,0,1,-4,1,0,1,0])},c.sobelX=function(){c.convolution.call(this,[-1,0,1,-2,0,2,-1,0,1])},c.sobelY=function(){c.convolution.call(this,[-1,-2,-1,0,0,0,1,2,1])},c.sharpen=function(e){let t=e||1;c.convolution.call(this,[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0])},c.emboss=function(e){let t=e||1;c.convolution.call(this,[-2*t,-1*t,0,-1*t,1,1*t,0,1*t,2*t])},c.blur=function(e){let t=e/7/o,n=e/7/l,r=y(c.blur.SHADER);f.uniform2f(r.uniform.px,0,n),g(1),f.uniform2f(r.uniform.px,t,0),g()},c.blur.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","void main(void) {","gl_FragColor = vec4(0.0);","gl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;","gl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv                             )*0.159576912161;","gl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;","}"].join("\n"),c.pixelate=function(e){let t=e/o,n=e/l,r=y(c.pixelate.SHADER);f.uniform2f(r.uniform.size,t,n),g()},c.pixelate.SHADER=["precision highp float;","varying vec2 vUv;","uniform vec2 size;","uniform sampler2D texture;","vec2 pixelate(vec2 coord, vec2 size) {","return floor( coord / size ) * size;","}","void main(void) {","gl_FragColor = vec4(0.0);","vec2 coord = pixelate(vUv, size);","gl_FragColor += texture2D(texture, coord);","}"].join("\n")}var _4,E4,T4,C4=2048;function N4(e,t){let n;if(!e)throw new Error("Human: Input is missing");if(!(e instanceof Ka||"undefined"!=typeof Image&&e instanceof Image||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLMediaElement&&e instanceof HTMLMediaElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw new Error("Human: Input type is not recognized");if(e instanceof Ka){if(!e.shape||4!==e.shape.length||1!==e.shape[0]||3!==e.shape[3])throw new Error("Human: Input tensor shape must be [1, height, width, 3] and instead was "+e.shape);n=wi(e)}else{let r=e.naturalWidth||e.videoWidth||e.width||e.shape&&e.shape[1]>0,a=e.naturalHeight||e.videoHeight||e.height||e.shape&&e.shape[2]>0;if(!r||!a)return{tensor:null,canvas:_4};let s=r,i=a;if(s>C4&&(s=C4,i=s*a/r),i>C4&&(i=C4,s=i*r/a),t.filter.width>0?s=t.filter.width:t.filter.height>0&&(s=r*(t.filter.height/a)),t.filter.height>0?i=t.filter.height:t.filter.width>0&&(i=a*(t.filter.width/r)),!s||!i)throw new Error("Human: Input cannot determine dimension");(!_4||(null==_4?void 0:_4.width)!==s||(null==_4?void 0:_4.height)!==i)&&((null==(_4="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(s,i):document.createElement("canvas"))?void 0:_4.width)!==s&&(_4.width=s),(null==_4?void 0:_4.height)!==i&&(_4.height=i));let o,l=_4.getContext("2d");if(e instanceof ImageData?l.putImageData(e,0,0):t.filter.flip&&void 0!==l.translate?(l.translate(r,0),l.scale(-1,1),l.drawImage(e,0,0,r,a,0,0,null==_4?void 0:_4.width,null==_4?void 0:_4.height),l.setTransform(1,0,0,1,0,0)):l.drawImage(e,0,0,r,a,0,0,null==_4?void 0:_4.width,null==_4?void 0:_4.height),t.filter.enabled){if((!T4||!E4||_4.width!==E4.width||(null==_4?void 0:_4.height)!==(null==E4?void 0:E4.height))&&((null==(E4="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(null==_4?void 0:_4.width,null==_4?void 0:_4.height):document.createElement("canvas"))?void 0:E4.width)!==(null==_4?void 0:_4.width)&&(E4.width=null==_4?void 0:_4.width),(null==E4?void 0:E4.height)!==(null==_4?void 0:_4.height)&&(E4.height=null==_4?void 0:_4.height),T4=Qe.flags.IS_BROWSER?new I4({canvas:E4}):null),!T4)return{tensor:null,canvas:_4};T4.reset(),T4.addFilter("brightness",t.filter.brightness),0!==t.filter.contrast&&T4.addFilter("contrast",t.filter.contrast),0!==t.filter.sharpness&&T4.addFilter("sharpen",t.filter.sharpness),0!==t.filter.blur&&T4.addFilter("blur",t.filter.blur),0!==t.filter.saturation&&T4.addFilter("saturation",t.filter.saturation),0!==t.filter.hue&&T4.addFilter("hue",t.filter.hue),t.filter.negative&&T4.addFilter("negative"),t.filter.sepia&&T4.addFilter("sepia"),t.filter.vintage&&T4.addFilter("brownie"),t.filter.sepia&&T4.addFilter("sepia"),t.filter.kodachrome&&T4.addFilter("kodachrome"),t.filter.technicolor&&T4.addFilter("technicolor"),t.filter.polaroid&&T4.addFilter("polaroid"),0!==t.filter.pixelate&&T4.addFilter("pixelate",t.filter.pixelate),T4.apply(_4)}else E4=_4,T4&&(T4=null);if(E4.data)o=Ki(E4.data,[E4.height,E4.width,3],"int32");else if(E4 instanceof ImageData)o=qi?qi.fromPixels(E4):null;else if("webgl"===t.backend||"humangl"===t.backend){let e="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(s,i):document.createElement("canvas");e.width=s,e.height=i;let t=e.getContext("2d");null==t||t.drawImage(E4,0,0),o=qi?qi.fromPixels(e):null}else{let e="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(s,i):document.createElement("canvas");e.width=s,e.height=i;let t=e.getContext("2d");null==t||t.drawImage(E4,0,0);let n=null==t?void 0:t.getImageData(0,0,s,i);o=qi?qi.fromPixels(n):null}if(o){let e=o.toFloat();n=e.expandDims(0),o.dispose(),e.dispose()}}return{tensor:n,canvas:t.filter.return?E4:null}}var M4,F4=!1;async function R4(e){return M4?e.debug&&c("cached model:",M4.modelUrl):(M4=await e$(h(e.modelBasePath,e.segmentation.modelPath)))&&M4.modelUrl?e.debug&&c("load model:",M4.modelUrl):c("load model failed:",e.segmentation.modelPath),M4}async function D4(e){var t,n;let r=(null==(t=e.tensor)?void 0:t.shape[1])||0,a=(null==(n=e.tensor)?void 0:n.shape[2])||0;if(!e.tensor||!M4||!M4.inputs[0].shape)return null;let s=gp.resizeBilinear(e.tensor,[M4.inputs[0].shape[1],M4.inputs[0].shape[2]],!1),i=s.div(255),o=M4.predict(i);Xo(s),Xo(i);let l,u=Pc(o,0);if(2===u.shape[2]){let e=u.softmax(),[t,n]=Yc(e,2),s=n.expandDims(2),i=s.expandDims(0);Xo(e),Xo(t),Xo(n);let o=gp.cropAndResize(i,[[0,0,.5,.5]],[0],[r,a]);l=o.squeeze(0),Xo(o),Xo(s),Xo(i)}else l=gp.resizeBilinear(u,[r,a]);if("undefined"==typeof document)return l.dataSync();let h="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(r,a):document.createElement("canvas");h.width=r,h.height=a,qi&&await qi.toPixels(l,h),Xo(l),Xo(u),Xo(o);let c="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(r,a):document.createElement("canvas");c.width=r,c.height=a;let d=c.getContext("2d");d.filter="blur(8px",await d.drawImage(h,0,0);let p=d.getImageData(0,0,r,a).data,f="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(r,a):document.createElement("canvas");f.width=r,f.height=a;let m=f.getContext("2d");return e.canvas&&await m.drawImage(e.canvas,0,0),m.globalCompositeOperation="darken",m.filter="blur(8px)",await m.drawImage(h,0,0),m.globalCompositeOperation="source-over",m.filter="none",e.canvas=f,p}var O4=(e,t)=>{let n=e=>{let t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return e[0]/=t,e[1]/=t,e[2]/=t,e},r=(e,t)=>[e[0]-t[0],e[1]-t[1],e[2]-t[2]],a=(e,t)=>[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]],s=e.meshRaw;if(!s||s.length<300)return{angle:{pitch:0,yaw:0,roll:0},matrix:[1,0,0,0,1,0,0,0,1],gaze:{bearing:0,strength:0}};let i=Math.max(e.boxRaw[2]*t[0],e.boxRaw[3]*t[1])/1.5,o=[s[10],s[152],s[234],s[454]].map(e=>[e[0]*t[0]/i,e[1]*t[1]/i,e[2]]),l=n(r(o[1],o[0])),u=n(r(o[3],o[2])),h=n(a(u,l));u=a(l,h);let c=[u[0],u[1],u[2],l[0],l[1],l[2],h[0],h[1],h[2]];return{angle:(e=>{let t,n,r,[a,s,i,o,l,u,h,c,d]=e;return o<1?o>-1?(r=Math.asin(o),n=Math.atan2(-h,a),t=Math.atan2(-u,l)):(r=-Math.PI/2,n=-Math.atan2(c,d),t=0):(r=Math.PI/2,n=Math.atan2(c,d),t=0),{pitch:2*-t,yaw:2*-n,roll:2*-r}})(c),matrix:c,gaze:478===s.length?(e=>{if(!e.annotations.rightEyeIris||!e.annotations.leftEyeIris)return{bearing:0,strength:0};let t=[0,-.1],n=e.mesh[33][2]>e.mesh[263][2],r=n?e.mesh[473]:e.mesh[468],a=n?[(e.mesh[133][0]+e.mesh[33][0])/2,(e.mesh[133][1]+e.mesh[33][1])/2]:[(e.mesh[263][0]+e.mesh[362][0])/2,(e.mesh[263][1]+e.mesh[362][1])/2],s=n?[e.mesh[133][0]-e.mesh[33][0],e.mesh[23][1]-e.mesh[27][1]]:[e.mesh[263][0]-e.mesh[362][0],e.mesh[253][1]-e.mesh[257][1]],i=[(a[0]-r[0])/s[0]-t[0],1*(r[1]-a[1])/s[1]-t[1]],o=Math.sqrt(i[0]**2+i[1]**2);return o=Math.min(o,e.boxRaw[2]/2,e.boxRaw[3]/2),{bearing:(l=[0,0],u=i,(Math.atan2(l[1]-u[1],l[0]-u[0])+Math.PI/2)%Math.PI),strength:o};var l,u})(e):{bearing:0,strength:0}}},z4=async(e,t)=>{var n,r,a,s,i,o;let l,u,h,p,f,m,g=[];e.state="run:face",l=d();let y=await async function(e,t){let n=await O3.predict(e,t),r=[],a=0;for(let s of n||[]){if(!s||s.isDisposedInternal)continue;let t=s.mesh.map(t=>[t[0]/(e.shape[2]||0),t[1]/(e.shape[1]||0),t[2]/O3.meshSize]),n={};if(s.mesh&&s.mesh.length>0)for(let e of Object.keys(I3))n[e]=I3[e].map(e=>s.mesh[e]);let i=s.box?[Math.trunc(Math.max(0,s.box.startPoint[0])),Math.trunc(Math.max(0,s.box.startPoint[1])),Math.trunc(Math.min(e.shape[2]||0,s.box.endPoint[0])-Math.max(0,s.box.startPoint[0])),Math.trunc(Math.min(e.shape[1]||0,s.box.endPoint[1])-Math.max(0,s.box.startPoint[1]))]:[0,0,0,0],o=s.box?[s.box.startPoint[0]/(e.shape[2]||0),s.box.startPoint[1]/(e.shape[1]||0),(s.box.endPoint[0]-s.box.startPoint[0])/(e.shape[2]||0),(s.box.endPoint[1]-s.box.startPoint[1])/(e.shape[1]||0)]:[0,0,0,0];r.push({id:a++,score:Math.round(100*s.faceConfidence||100*s.boxConfidence||0)/100,boxScore:Math.round(100*s.boxConfidence)/100,faceScore:Math.round(100*s.faceConfidence)/100,box:i,boxRaw:o,mesh:s.mesh,meshRaw:t,annotations:n,image:s.image,tensor:s.image}),s.coords&&s.coords.dispose()}return r}(t,e.config);if(e.performance.face=Math.trunc(d()-l),!t.shape||4!==t.shape.length)return[];if(!y)return[];for(let b=0;b<y.length;b++){if(e.analyze("Get Face"),!y[b].image||y[b].image.isDisposedInternal){c("Face object is disposed:",y[b].image);continue}let x=O4(y[b],[t.shape[2],t.shape[1]]);e.analyze("Start Emotion:"),e.config.async?p=e.config.face.emotion.enabled?t5(y[b].image||Ms([]),e.config,b,y.length):{}:(e.state="run:emotion",l=d(),p=e.config.face.emotion.enabled?await t5(y[b].image||Ms([]),e.config,b,y.length):{},e.performance.emotion=Math.trunc(d()-l)),e.analyze("End Emotion:"),e.analyze("Start Description:"),e.config.async?m=e.config.face.description.enabled?q3(y[b].image||Ms([]),e.config,b,y.length):[]:(e.state="run:description",l=d(),m=e.config.face.description.enabled?await q3(y[b].image||Ms([]),e.config,b,y.length):[],e.performance.embedding=Math.trunc(d()-l)),e.analyze("End Description:"),e.config.async&&([u,h,p,f,m]=await Promise.all([u,h,p,f,m])),e.analyze("Finish Face:"),!e.config.face.iris.enabled&&(null==(r=null==(n=y[b])?void 0:n.annotations)?void 0:r.leftEyeIris)&&(null==(s=null==(a=y[b])?void 0:a.annotations)?void 0:s.rightEyeIris)&&(delete y[b].annotations.leftEyeIris,delete y[b].annotations.rightEyeIris);let v=(null==(i=y[b].annotations)?void 0:i.leftEyeIris)&&(null==(o=y[b].annotations)?void 0:o.rightEyeIris)?Math.max(Math.abs(y[b].annotations.leftEyeIris[3][0]-y[b].annotations.leftEyeIris[1][0]),Math.abs(y[b].annotations.rightEyeIris[4][1]-y[b].annotations.rightEyeIris[2][1]))/t.shape[2]:0;g.push({...y[b],id:b,age:m.age,gender:m.gender,genderScore:m.genderScore,embedding:m.descriptor,emotion:p,iris:0!==v?Math.trunc(500/v/11.7)/100:0,rotation:x,tensor:e.config.face.detector.return?Pc(y[b].image):null}),Xo(y[b].image),y[b].image&&delete y[b].image,e.analyze("End Face")}return e.analyze("End FaceMesh:"),e.config.async&&(e.performance.face&&delete e.performance.face,e.performance.age&&delete e.performance.age,e.performance.gender&&delete e.performance.gender,e.performance.emotion&&delete e.performance.emotion),g},P4=e=>{if(!e)return[];let t=[];for(let n=0;n<e.length;n++){let r=e[n].keypoints.find(e=>"leftWrist"===e.part),a=e[n].keypoints.find(e=>"rightWrist"===e.part),s=e[n].keypoints.find(e=>"nose"===e.part);s&&r&&a&&r.position.y<s.position.y&&a.position.y<s.position.y?t.push({body:n,gesture:"i give up"}):s&&r&&r.position.y<s.position.y?t.push({body:n,gesture:"raise left hand"}):s&&a&&a.position.y<s.position.y&&t.push({body:n,gesture:"raise right hand"});let i=e[n].keypoints.find(e=>"leftShoulder"===e.part),o=e[n].keypoints.find(e=>"rightShoulder"===e.part);i&&o&&t.push({body:n,gesture:"leaning "+(i.position.y>o.position.y?"left":"right")})}return t},$4=e=>{if(!e)return[];let t=[];for(let n=0;n<e.length;n++)if(e[n].mesh&&e[n].mesh.length>0){let r=e[n].mesh[33][2]-e[n].mesh[263][2];Math.abs(r)<10?t.push({face:n,gesture:"facing center"}):t.push({face:n,gesture:"facing "+(r<0?"left":"right")}),Math.abs(e[n].mesh[374][1]-e[n].mesh[386][1])/Math.abs(e[n].mesh[443][1]-e[n].mesh[450][1])<.2&&t.push({face:n,gesture:"blink left eye"}),Math.abs(e[n].mesh[145][1]-e[n].mesh[159][1])/Math.abs(e[n].mesh[223][1]-e[n].mesh[230][1])<.2&&t.push({face:n,gesture:"blink right eye"});let a=Math.min(100,500*Math.abs(e[n].mesh[13][1]-e[n].mesh[14][1])/Math.abs(e[n].mesh[10][1]-e[n].mesh[152][1]));a>10&&t.push({face:n,gesture:`mouth ${Math.trunc(a)}% open`});let s=e[n].mesh[152][2];Math.abs(s)>10&&t.push({face:n,gesture:"head "+(s<0?"up":"down")})}return t},L4=e=>{if(!e)return[];let t=[];for(let n=0;n<e.length;n++){if(!e[n].annotations||!e[n].annotations.leftEyeIris||!e[n].annotations.rightEyeIris)continue;let r=Math.abs((e[n].annotations.leftEyeIris[3][0]-e[n].annotations.leftEyeIris[1][0])*(e[n].annotations.leftEyeIris[4][1]-e[n].annotations.leftEyeIris[2][1])),a=Math.abs((e[n].annotations.rightEyeIris[3][0]-e[n].annotations.rightEyeIris[1][0])*(e[n].annotations.rightEyeIris[4][1]-e[n].annotations.rightEyeIris[2][1])),s=!1;Math.abs(r-a)/Math.max(r,a)<.25&&(s=!0,t.push({iris:n,gesture:"facing center"}));let i=Math.abs(e[n].mesh[33][0]-e[n].annotations.rightEyeIris[0][0])/e[n].box[2],o=Math.abs(e[n].mesh[263][0]-e[n].annotations.leftEyeIris[0][0])/e[n].box[2];(o>.06||i>.06)&&(s=!1),o>.06&&t.push({iris:n,gesture:"looking right"}),i>.06&&t.push({iris:n,gesture:"looking left"});let l=Math.abs(e[n].mesh[145][1]-e[n].annotations.rightEyeIris[0][1])/e[n].box[3],u=Math.abs(e[n].mesh[374][1]-e[n].annotations.leftEyeIris[0][1])/e[n].box[3];(u<.01||l<.01||u>.022||l>.022)&&(s=!1),(u<.01||l<.01)&&t.push({iris:n,gesture:"looking down"}),(u>.022||l>.022)&&t.push({iris:n,gesture:"looking up"}),s&&t.push({iris:n,gesture:"looking center"})}return t},V4=e=>{if(!e)return[];let t=[];for(let n=0;n<e.length;n++){let r=[];for(let[t,a]of Object.entries(e[n].annotations))"palmBase"!==t&&Array.isArray(a)&&r.push({name:t.toLowerCase(),position:a[0]});if(r&&r.length>0){let e=r.reduce((e,t)=>e.position[2]<t.position[2]?e:t),a=r.reduce((e,t)=>e.position[1]<t.position[1]?e:t);t.push({hand:n,gesture:`${e.name} forward ${a.name} up`})}}return t},B4={};s(B4,{all:()=>t6,body:()=>Z4,canvas:()=>e6,face:()=>X4,gesture:()=>K4,hand:()=>Y4,object:()=>J4,options:()=>W4,person:()=>Q4});var W4={color:"rgba(173, 216, 230, 0.6)",labelColor:"rgba(173, 216, 230, 1)",shadowColor:"black",font:'small-caps 14px "Segoe UI"',lineHeight:18,lineWidth:4,pointSize:2,roundRect:8,drawPoints:!1,drawLabels:!0,drawBoxes:!0,drawPolygons:!0,drawGaze:!0,fillPolygons:!1,useDepth:!0,useCurves:!1,bufferedOutput:!0},j4=e=>Math.round(180*e/Math.PI);function H4(e,t,n,r=0,a){e.fillStyle=a.useDepth&&r?`rgba(${127.5+2*r}, ${127.5-2*r}, 255, 0.3)`:a.color,e.beginPath(),e.arc(t,n,a.pointSize,0,2*Math.PI),e.fill()}function U4(e,t,n,r,a,s){e.beginPath(),s.useCurves?e.ellipse((t+t+r)/2,(n+n+a)/2,r/2,a/2,0,0,2*Math.PI):(e.lineWidth=s.lineWidth,e.moveTo(t+s.roundRect,n),e.lineTo(t+r-s.roundRect,n),e.quadraticCurveTo(t+r,n,t+r,n+s.roundRect),e.lineTo(t+r,n+a-s.roundRect),e.quadraticCurveTo(t+r,n+a,t+r-s.roundRect,n+a),e.lineTo(t+s.roundRect,n+a),e.quadraticCurveTo(t,n+a,t,n+a-s.roundRect),e.lineTo(t,n+s.roundRect),e.quadraticCurveTo(t,n,t+s.roundRect,n),e.closePath()),e.stroke()}function G4(e,t=[],n){if(void 0!==t&&0!==t.length){e.beginPath(),e.moveTo(t[0][0],t[0][1]);for(let r of t){let t=r[2]||0;e.strokeStyle=n.useDepth&&t?`rgba(${127.5+2*t}, ${127.5-2*t}, 255, 0.3)`:n.color,e.fillStyle=n.useDepth&&t?`rgba(${127.5+2*t}, ${127.5-2*t}, 255, 0.3)`:n.color,e.lineTo(r[0],Math.round(r[1]))}e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}function q4(e,t=[],n){if(void 0!==t&&0!==t.length){if(!n.useCurves||t.length<=2)return void G4(e,t,n);e.moveTo(t[0][0],t[0][1]);for(let n=0;n<t.length-2;n++)e.quadraticCurveTo(t[n][0],t[n][1],(t[n][0]+t[n+1][0])/2,(t[n][1]+t[n+1][1])/2);e.quadraticCurveTo(t[t.length-2][0],t[t.length-2][1],t[t.length-1][0],t[t.length-1][1]),e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}async function K4(e,t,n){let r=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let a=e.getContext("2d");if(!a)return;a.font=r.font,a.fillStyle=r.color;let s=1;for(let i=0;i<t.length;i++){let e=[],n=[];if([e,n]=Object.entries(t[i]),n.length>1&&n[1].length>0){let t=`${e[0]} ${e[1]>0?"#"+e[1]:""}: ${n[1]}`;r.shadowColor&&""!==r.shadowColor&&(a.fillStyle=r.shadowColor,a.fillText(t,8,2+s*r.lineHeight)),a.fillStyle=r.labelColor,a.fillText(t,6,0+s*r.lineHeight),s+=1}}}async function X4(e,t,n){var r,a,s,i;let o=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let l=e.getContext("2d");if(l)for(let u of t){l.font=o.font,l.strokeStyle=o.color,l.fillStyle=o.color,o.drawBoxes&&U4(l,u.box[0],u.box[1],u.box[2],u.box[3],o);let e=[];if(e.push(`face: ${Math.trunc(100*u.score)}%`),u.genderScore&&e.push(`${u.gender||""} ${Math.trunc(100*u.genderScore)}%`),u.age&&e.push("age: "+(u.age||"")),u.iris&&e.push("distance: "+u.iris),u.emotion&&u.emotion.length>0){let t=u.emotion.map(e=>`${Math.trunc(100*e.score)}% ${e.emotion}`);t.length>3&&(t.length=3),e.push(t.join(" "))}u.rotation&&u.rotation.angle&&u.rotation.gaze&&(u.rotation.angle.roll&&e.push(`roll: ${j4(u.rotation.angle.roll)}\xb0 yaw:${j4(u.rotation.angle.yaw)}\xb0 pitch:${j4(u.rotation.angle.pitch)}\xb0`),u.rotation.gaze.bearing&&e.push(`gaze: ${j4(u.rotation.gaze.bearing)}\xb0`)),0===e.length&&e.push("face"),l.fillStyle=o.color;for(let t=e.length-1;t>=0;t--){let n=Math.max(u.box[0],0),r=t*o.lineHeight+u.box[1];o.shadowColor&&""!==o.shadowColor&&(l.fillStyle=o.shadowColor,l.fillText(e[t],n+5,r+16)),l.fillStyle=o.labelColor,l.fillText(e[t],n+4,r+15)}if(l.lineWidth=1,u.mesh&&u.mesh.length>0){if(o.drawPoints)for(let e of u.mesh)H4(l,e[0],e[1],e[2],o);if(o.drawPolygons){l.lineWidth=1;for(let e=0;e<T3.length/3;e++)G4(l,[T3[3*e+0],T3[3*e+1],T3[3*e+2]].map(e=>u.mesh[e]),o);if(u.annotations&&u.annotations.leftEyeIris){l.strokeStyle=o.useDepth?"rgba(255, 200, 255, 0.3)":o.color,l.beginPath();let e=Math.abs(u.annotations.leftEyeIris[3][0]-u.annotations.leftEyeIris[1][0])/2,t=Math.abs(u.annotations.leftEyeIris[4][1]-u.annotations.leftEyeIris[2][1])/2;l.ellipse(u.annotations.leftEyeIris[0][0],u.annotations.leftEyeIris[0][1],e,t,0,0,2*Math.PI),l.stroke(),o.fillPolygons&&(l.fillStyle=o.useDepth?"rgba(255, 255, 200, 0.3)":o.color,l.fill())}if(u.annotations&&u.annotations.rightEyeIris){l.strokeStyle=o.useDepth?"rgba(255, 200, 255, 0.3)":o.color,l.beginPath();let e=Math.abs(u.annotations.rightEyeIris[3][0]-u.annotations.rightEyeIris[1][0])/2,t=Math.abs(u.annotations.rightEyeIris[4][1]-u.annotations.rightEyeIris[2][1])/2;l.ellipse(u.annotations.rightEyeIris[0][0],u.annotations.rightEyeIris[0][1],e,t,0,0,2*Math.PI),l.stroke(),o.fillPolygons&&(l.fillStyle=o.useDepth?"rgba(255, 255, 200, 0.3)":o.color,l.fill())}if(o.drawGaze&&(null==(a=null==(r=u.rotation)?void 0:r.gaze)?void 0:a.strength)&&(null==(i=null==(s=u.rotation)?void 0:s.gaze)?void 0:i.bearing)&&u.annotations.leftEyeIris&&u.annotations.rightEyeIris&&u.annotations.leftEyeIris[0]&&u.annotations.rightEyeIris[0]){l.strokeStyle="pink",l.beginPath();let e=[u.annotations.leftEyeIris[0][0]+Math.sin(u.rotation.gaze.bearing)*u.rotation.gaze.strength*u.box[3],u.annotations.leftEyeIris[0][1]+Math.cos(u.rotation.gaze.bearing)*u.rotation.gaze.strength*u.box[2]];l.moveTo(u.annotations.leftEyeIris[0][0],u.annotations.leftEyeIris[0][1]),l.lineTo(e[0],e[1]);let t=[u.annotations.rightEyeIris[0][0]+Math.sin(u.rotation.gaze.bearing)*u.rotation.gaze.strength*u.box[3],u.annotations.rightEyeIris[0][1]+Math.cos(u.rotation.gaze.bearing)*u.rotation.gaze.strength*u.box[2]];l.moveTo(u.annotations.rightEyeIris[0][0],u.annotations.rightEyeIris[0][1]),l.lineTo(t[0],t[1]),l.stroke()}}}}}async function Z4(e,t,n){var r;let a=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let s=e.getContext("2d");if(s){s.lineJoin="round";for(let e=0;e<t.length;e++){if(s.strokeStyle=a.color,s.fillStyle=a.color,s.lineWidth=a.lineWidth,s.font=a.font,a.drawBoxes&&t[e].box&&4===(null==(r=t[e].box)?void 0:r.length)&&(U4(s,t[e].box[0],t[e].box[1],t[e].box[2],t[e].box[3],a),a.drawLabels&&(a.shadowColor&&""!==a.shadowColor&&(s.fillStyle=a.shadowColor,s.fillText(`body ${100*t[e].score}%`,t[e].box[0]+3,1+t[e].box[1]+a.lineHeight,t[e].box[2])),s.fillStyle=a.labelColor,s.fillText(`body ${100*t[e].score}%`,t[e].box[0]+2,0+t[e].box[1]+a.lineHeight,t[e].box[2]))),a.drawPoints)for(let n=0;n<t[e].keypoints.length;n++)s.fillStyle=a.useDepth&&t[e].keypoints[n].position[2]?`rgba(${127.5+2*(t[e].keypoints[n].position[2]||0)}, ${127.5-2*(t[e].keypoints[n].position[2]||0)}, 255, 0.5)`:a.color,H4(s,t[e].keypoints[n].position[0],t[e].keypoints[n].position[1],0,a);if(a.drawLabels&&(s.font=a.font,t[e].keypoints))for(let n of t[e].keypoints)s.fillStyle=a.useDepth&&n.position[2]?`rgba(${127.5+2*n.position[2]}, ${127.5-2*n.position[2]}, 255, 0.5)`:a.color,s.fillText(`${n.part} ${Math.trunc(100*n.score)}%`,n.position[0]+4,n.position[1]+4);if(a.drawPolygons&&t[e].keypoints){let n,r=[];r.length=0,n=t[e].keypoints.find(e=>"leftShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),q4(s,r,a),r.length=0,n=t[e].keypoints.find(e=>"rightShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightHip"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftHip"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),4===r.length&&G4(s,r,a),r.length=0,n=t[e].keypoints.find(e=>"leftHip"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftKnee"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftAnkle"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftHeel"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftFoot"===e.part),n&&r.push([n.position[0],n.position[1]]),q4(s,r,a),r.length=0,n=t[e].keypoints.find(e=>"rightHip"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightKnee"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightAnkle"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightHeel"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightFoot"===e.part),n&&r.push([n.position[0],n.position[1]]),q4(s,r,a),r.length=0,n=t[e].keypoints.find(e=>"leftShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftElbow"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftWrist"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"leftPalm"===e.part),n&&r.push([n.position[0],n.position[1]]),q4(s,r,a),r.length=0,n=t[e].keypoints.find(e=>"rightShoulder"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightElbow"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightWrist"===e.part),n&&r.push([n.position[0],n.position[1]]),n=t[e].keypoints.find(e=>"rightPalm"===e.part),n&&r.push([n.position[0],n.position[1]]),q4(s,r,a)}}}}async function Y4(e,t,n){let r=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let a=e.getContext("2d");if(a){a.lineJoin="round",a.font=r.font;for(let e of t){if(r.drawBoxes&&(a.strokeStyle=r.color,a.fillStyle=r.color,U4(a,e.box[0],e.box[1],e.box[2],e.box[3],r),r.drawLabels&&(r.shadowColor&&""!==r.shadowColor&&(a.fillStyle=r.shadowColor,a.fillText("hand",e.box[0]+3,1+e.box[1]+r.lineHeight,e.box[2])),a.fillStyle=r.labelColor,a.fillText("hand",e.box[0]+2,0+e.box[1]+r.lineHeight,e.box[2])),a.stroke()),r.drawPoints&&e.keypoints&&e.keypoints.length>0)for(let t of e.keypoints)a.fillStyle=r.useDepth?`rgba(${127.5+2*t[2]}, ${127.5-2*t[2]}, 255, 0.5)`:r.color,H4(a,t[0],t[1],0,r);if(r.drawLabels){let t=(e,t)=>{a.fillStyle=r.useDepth?`rgba(${127.5+2*e[e.length-1][2]}, ${127.5-2*e[e.length-1][2]}, 255, 0.5)`:r.color,a.fillText(t,e[e.length-1][0]+4,e[e.length-1][1]+4)};a.font=r.font,t(e.annotations.indexFinger,"index"),t(e.annotations.middleFinger,"middle"),t(e.annotations.ringFinger,"ring"),t(e.annotations.pinky,"pinky"),t(e.annotations.thumb,"thumb"),t(e.annotations.palmBase,"palm")}if(r.drawPolygons){let t=e=>{if(e)for(let t=0;t<e.length;t++)a.beginPath(),a.strokeStyle=r.useDepth?`rgba(${127.5+2*e[t][2]}, ${127.5-2*e[t][2]}, 255, 0.5)`:r.color,a.moveTo(e[t>0?t-1:0][0],e[t>0?t-1:0][1]),a.lineTo(e[t][0],e[t][1]),a.stroke()};a.lineWidth=r.lineWidth,t(e.annotations.indexFinger),t(e.annotations.middleFinger),t(e.annotations.ringFinger),t(e.annotations.pinky),t(e.annotations.thumb)}}}}async function J4(e,t,n){let r=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let a=e.getContext("2d");if(a){a.lineJoin="round",a.font=r.font;for(let e of t)if(r.drawBoxes){if(a.strokeStyle=r.color,a.fillStyle=r.color,U4(a,e.box[0],e.box[1],e.box[2],e.box[3],r),r.drawLabels){let t=`${e.label} ${Math.round(100*e.score)}%`;r.shadowColor&&""!==r.shadowColor&&(a.fillStyle=r.shadowColor,a.fillText(t,e.box[0]+3,1+e.box[1]+r.lineHeight,e.box[2])),a.fillStyle=r.labelColor,a.fillText(t,e.box[0]+2,0+e.box[1]+r.lineHeight,e.box[2])}a.stroke()}}}async function Q4(e,t,n){let r=p(W4,n);if(!(t&&e&&e instanceof HTMLCanvasElement))return;let a=e.getContext("2d");if(a){a.lineJoin="round",a.font=r.font;for(let e=0;e<t.length;e++)if(r.drawBoxes){if(a.strokeStyle=r.color,a.fillStyle=r.color,U4(a,t[e].box[0],t[e].box[1],t[e].box[2],t[e].box[3],r),r.drawLabels){let n="person #"+e;r.shadowColor&&""!==r.shadowColor&&(a.fillStyle=r.shadowColor,a.fillText(n,t[e].box[0]+3,1+t[e].box[1]+r.lineHeight,t[e].box[2])),a.fillStyle=r.labelColor,a.fillText(n,t[e].box[0]+2,0+t[e].box[1]+r.lineHeight,t[e].box[2])}a.stroke()}}}async function e6(e,t){if(!(e&&t&&e instanceof HTMLCanvasElement&&t instanceof HTMLCanvasElement))return;let n=e.getContext("2d");null==n||n.drawImage(e,0,0)}async function t6(e,t,n){let r=d(),a=p(W4,n);!t||!e||e instanceof HTMLCanvasElement&&(X4(e,t.face,a),Z4(e,t.body,a),Y4(e,t.hand,a),J4(e,t.object,a),K4(e,t.gesture,a),t.performance.draw=Math.trunc(d()-r))}var n6,r6,a6,s6,i6,o6,l6,u6,h6,c6,d6,p6,f6={face:[],body:[],hand:[],gesture:[],object:[],persons:[],performance:{},timestamp:0},m6="\n/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUA\nAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAARAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQu\nbmV0IDQuMi4xMwAA/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxob\nIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgo\nKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgBAAEAAwEhAAIRAQMRAf/E\nAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAE\nEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZH\nSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1\ntre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEB\nAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXET\nIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFla\nY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG\nx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+qaKACigApGOKAML\nXp8xlF5A7V4X8RtYs7PzfNImnx8sa8Kp9z3q2tEgp6angWs62ZZ5CTGoJ6DArGNz5p+UrID6EUrF\nPUlW1EuN0XNW7PQ2L5j3JnoKXN0KijqNP0eYoqXBdgPuuo+ZPeupisWn2Jd4+0r924XgsQOCff3/\nAJ1FzRKxDqGii6m3siiQ8F1XGfXI6YNWLfRbiRQMkcZI9fpTDluT2/h6Qy8gDPbtmtG38JeY480Z\n5zSLUTZg8M28YwYxjAArXtdPt402qgHbpSaLWhma3o0Uqk7Nx9DWLaaVblgPs6qRyds2M/gRSQp9\nzZOni2iWS2hlQ+kjYz9OMGrdjq89vIPPVhj+8M/lQyDq9P1WOYBlMZz1AOD+VdDaTiReOKulK0jO\ntHmi0WDTlr0TyxRVhT8tJjIX+9SUxHXUV553BRQAVBcPhSBTSuxPY86+IGti0s5I7dsORy9fM3i6\n8e8mfDO5P90ZrWWiJicNPpZZtxV/xrW0jQt4DOv6Vk2dEEdTY6BHuB25rpbPSo0QARjP0qTRI17W\nwA/hFaMWmoQMgflQXYsDS142rU9tpqqenfNA7GgtihxkdKuRW6qMY/GkDZY8sY4Ap4hXbyB+VArk\nEtuH4wPyrk/EGkOm+a3jw3suRQLc5i38SX9hJ9nnY+XnBUdPyNdFY6pa3KkkAE9l6f8AfJ/pSJT6\nGhDmI+Zb4ZRycdv6ium0nUhKFydrelTsNnS2829RnrVgV6NKXNG55lWPLIM81Op+WrZkRMfmNNzT\nA7GivPO4KKAEY4XNYWt3vkwPg4OK0giJdjw/xrqhm87Zs8tc7pX5A+leSajf6aHYJ50kn4AZpTep\nrBWRm2Vobm4BXfyehPFdnpmnBFUY5rI2SN63tlToK0YI+KZpFF+3QdavwoKTLtoW0Toaswpk5pCb\nLCxipAhoIuP2dKevHXoaYDylRyxhlwRQI4nxVoCXWZI1GfpXGtbSWjYPGP73+NIGupt6TqMsLruZ\nih4xnP5V09mQ+JLd8gn0xSYJnVaVdkook69K34zuUGunDS3Rx4qOzHVIp4rrOMY3NJQI7GivPO8K\nKAILt9kZrz3xlebYiu8KCCWb0XvW0NFch6ysfO3jLVjfXLIn+pQkKorl7WxNxIPl71g2dUUdpo+l\npBGvHPet23iC8ihFosrxirkHQUFo0IF4FXI1O726CpKLacCrMJoJLYHAPpTwucHpSRJJ5e4AZI9x\nUqpxzVpCuOC8cUpQUMRnXttuB4rjNdsYyeVwfXpmpGmcvcQyafMCFJjPY10eg34BUg4DcZP8jUO4\nHaRq3lLNF+IHet7R7jz7c56rwa2wz9+xhiVeFy/T1PFegeaNPWigDsc0ZrzzvDNIaAM7VpNqdegr\nxL4l6kywyRhseZ19lrdfAZL4jxYg3Fw20d63tJsdrDI5rm3Z3R0R0Mce1eKnQYAplIkWrMJ45oZS\nNO3PHbNXIyfpSGWowSOasxLUiZdjFSqtNEMkUemKlAGKsRJjAppFAiORMjmsTVrNZEO4cfSoZSOD\n1eJ7WXBUzQZ+7nkfSo7e2Ei+ZaMzxntjBX2NSU1Y6/wxqojiEFzkA8KTXYaUoWRyv3W5rSjpNHPX\n+BmpSg8V6J5gUUAdhRXnneFFAGHrTfu5PpXzj8S70/aZtxzztXFbv4DKHxHI+H4GZiz9zxXXW8G3\nGBXMjvLRXAx0oPGPSmMVeOnWrMTYpFI0bcg1fh54xmgovRcD3qxETSIZcRvzp+/BpEkqsBUqsM9K\nq4Em4Gkxk0yRGXrVW6i8yFhkg+tJjRxGsWrxllkUMh9eK5uMz6bcebbnfG33kPcVkay2OntPKuo0\nnhXI67c8qa7Lw3c+adjcEDGK1paSRhVV4s6A0or0jyRRQ1AHX0V553hRQBz+vNtt5z3xXzX8Qbdm\nuic5YnOMdK3l8JnTXvlbwpYl+WySOgrp5YfLOOB9O1c62O7qQkc+9RsKChFPWp4DluOlSykaNruH\nArUgHShFNF2NT1qxGO3NBmyxGcE1N2560CFzjrUysO9JAPDDjFOVuKoQuSRTWouBkazbCa3cd8cV\nwF7IISQccHBzUSWpV9C3o1x5b5GAjdQD1rs9DjC3kckbEhqKfxIzn8LOupRXqnkPccBSkUAzraK8\n87wooA5rxMSI3HqK8B8bQl9Q8sffY5b/AAraXwkUviNrw9pH2W1ViMMRTdRjw4HpWNtDti9TPc4P\nFQs2M5qdyyMHLcfjV63HTAoBGtap0wK0YxigpsuRDtVhVYd6GQydVwwIqdRnqKCR23I5pCMUW6gD\nYNKuetAEise9KTxQBWuFyhrznxNZkXjFeN3I+tTIZg2OqmzmxNF0PO3vXp/g2+hukVl4zyPanTXv\nJmVR+60dpThXpnlPceopWFAbnV0V553hSGgRynjC5FujOey14Ssp1HxNmTnc+a3kvcIpv37HoEYQ\nQmMdVHSsnVbYJF5jVk0dsNzlruVIsl2wKxbjWrVHILjg1CRbZJb+ILHPzyhfStODWLQgFJFYd+el\nUJM27HUIXxhga1Y5lLVLKLkMnoauxnPPrSEx7ShF+Y/n2qrc6xBbhizDAqkK1zJuvG9nbg8ZA681\nly/Ei052RO3uKAsZlx8QGd8xxvt9Aa1NH8dK7AXMcip64zigdkdrZX8F7EJLdwwNXMkrz1qRMRly\nCK4TxmpidWI49felPYSOMmi80NIoOV6qRzXYeA5SskYPfirpfEjGr8LPWVHyD6U4CvQPL3ZItOYc\nUDOoNFeed4Uhpks4H4iE/Z5MeleMeGULeLgjds10S+BGdL+Jc9OSBU2Huc5Nc74yvUtrcDBrJnZF\n63PJdXvLy/lKWw46bvQVz82jXhkLO5Y+9ZlsYthcRnbIjY9R3q3awTRkEM3WmJI6C0ea3dGRsr1x\nXY6TqW9FLHnjrUs0izpLK5DDjofSta3ckH09KRUkZuuTvFGdvPauE1Y3U6Mqbssf/rUxHPTaJPK2\nZmJPbBqzY6DCZh5xJC9s9aBJHU6dpemJjfEmfetJtI0+VPkUr/unFOxdiextHs33W07YHQHk11mk\nXb3KbZ1xIvcd6LEyWho4Nct41sTPYb16ipexCPPZN+wYGCvH1rrPAEJmvkPoc1VL4kZVvgZ6yFwK\ncBXoHkkqinFaVyzo80GuE7WJRQSziPiGdthK5HQV4x4J/wBI8WPIewNdEvgRNL42emO/yj1UHNef\neNpRczbC+I17DvWT2OqJxc0sMK4TCisy41q0hfEkqj8aixdwTXNOlwvmqD9anS9tXH7uVG+hosO4\n/wC0oOhrR0+6G4YNIEzsNEuCxAPNdjZruA4xxUmjINSjURksOlcbqFykbnjFA1sYGoassaknCqO5\nrl7rxhGm7yBnBxuJq0rkSlYpw+NLlsfd5P8AerVsvHEqSBHwPVgcgVpyMyVXU3rXxcHYETAk+hru\n/DWti6ZSTyOKzZqndHaxvvUGq2rQ+dYyqR24qWI8dvbr7LqDxyDAzXpvw6FvIxePGSM06Xxoyr/A\nzviKFHNegeX1J41zUhXioGbuaSuM6wpCaBHG/EcA6HN/exxXjXw2jL67cv8A3Qa6H8CFR+NnoWpO\nI4XI44rxLxrqjQzSEsQM1gdSPM9U1uR1YbmWIdXHf2rmpIb67YS28UrRlsLI3c/jW0VZGUpO5pW1\njfLNOjahawzwReYI5cjzMkDavHJ5/SrVv9uhtPtVxCPLBwzxnlT9KGghLU3tKvvPjHzbl7EGuisJ\nGRxWLOg7nRXJEbDjmvSNK+aFSfSoZr0KutRkphc4NcRrdkVjL9aVio7Hk3iqS8ubhrWzUlsZY9kG\ncZNc5D4aee5MclzJIFTzHAO0MfatqSOWu7bFS1srDUZEis0vIZoUxPvfcC+4/dx2xjr712XiTwXb\nWmlQ6hol3cRhoFd4rlg3zY5wR0GelavQwjq7GD4etdVvSnk2wAB+9v8A8mvcfA2kXiRo0/UdcDis\nZnTTulqeoWqbUAJqWUb42X1FZlnjfjSwlGrr5S/eNdD4RkvLAAQ4yRyaUZcruVKl7TQ9I0G+mnzH\nckFwM8VuIK7ac3KF2eXiKapz5UWYxipNtMyNejNch0jSar3cjR27uoyQCRVRWom9DxTx54gu5fMi\nlbKdMVjfCZPNlv5v9rFbVHpYqjGzbOn8SzFI9o715L4u0r7arYzk+lYdTqSujy7U/C0u4vHk+WwO\nxuh9q3J9dgvbdVukMV1EwbDDgn04rZMwlHoZ+orZ6hfQ3RWVnQYCgZAq+8U0ln5NtBsV2yxYcfgK\nJtW0CnB31LlroVwJ1nQLGDjeP7w+lb0dsFxjrWB0tHS6NuWPJ6A16ToUm63T3Gallr4S7cxiTjrX\nPaxaF7dlVeSMUhxZ5jd+H7qCa4eF3DSE5x3zXN3Wk6jbyeaiFWUY6ZyPStYS5SalPmVipFbX0E4c\nW0alvmPHJrag0rVvEE6LdljGpG2NRtQD+tW5XMI0uU9M8NeFo9PiQhecDIIrtrOMIoG3H4VlJm9t\nC6CB06VPGM1IHLeItGS6uw+ORT7e3jsbQvj7gzUNam0JaWE+HN7NqOqX80n3FO1RXo8YzXdS+BHk\n4z+KyzGPapcU2YIv7qQtiuaxvcaWqG4O6FwfSrS1JbPnrxoxkv7qIfejcitj4V2f2exumI+8+aKn\nxHTT+G5d8Txlm4rjLxMsQwzWT3OiK0Mm6sEkVsAcjFc1d+FEmlGwEDPQVopaEuOpr6f4ZWNAu3tW\nvHpAj5ZQcUFIWaDjGMVUMQ3cVDBmvbhY7QAV2nh+T/R1yeKhlrY31+b61FcQK6nIoJMi401WblRi\nqr6PCw5UYq9y+YgOgWzNkRrx3xWjp+nx2v3FQcelAbmko9anQ4GBUNisPHWr1qMrQhS2K11HvmYV\nhamcxSRZ5xRIqluS/DKAQQXZxyXrvo2FdlL4EeZjH+/ZbjNSZpswLNBrE1Gt7VE4ODVIlnh/j61F\nj4lmeTGyUbq6LwdEqWbeX0YbhSqfEddP4Bddj4JIrhL5d8h7VjI6oLQqKNzelWre3yc4/ClFjaL6\nwqBxxUUxwCKu5BmXRA6c+9ZjP83FSBoQuPs4BrsNBlUW659KmRrDY6G1lyQtW3Hy0lqQ1qVJnAbm\noy3b9KYJCqRj3o4zRctIlhjLHmpSuOBRbQOpLGpPFaES7UqkZzKN1KsEc87/AHUUmvPLTVGv72aQ\nk7WJwKmRrQ3ud74Ltilgz4++2a6iNDXdS0gjyMU71my7GpqTbxSbMki3SViajTTHqkSeR/GeyZmg\nnQHkEE1S+F+oPPavBL96I4/Cia1udVF+4dVrkW+Fq8+v4tjMDWUkdVJ6WM0cNV+F+MVmjUcZgqnP\n1qpNNnkcVRLiZtxIS1UzzIF7mghlxUZpVQdq6nTVdAoAOKzkbQWhvwM6gMM1twOJYx3NOJE11Kt1\nH1/pVVlwBkk+9NocXoOQ45FPj+fkUJFF2NSB700v/hTEty5ZpkjvVyUgcCq6GM9zC14/8Se6GcZQ\n1574Xs5WkI2HBPHFQ1dm1KSSZ7Rotn9l0+KPHIHNacae1dy0Vjxaj5ptlhVp+2s2CJ9ppCKzuWNx\nzSFc1SYrHNeNdIGpaYw25ZeRXmvheyk0jVpEdcLJ0q3ZxNKTa0O3vQHg/DNcHrsJDmsmjspnNzNt\nfFIJ24GazOhC+azDmgZIOOKBsp3J2qSaZodubq58yQ4QAnmhGT3NO18pb7BORmu205LfYpyKVkWp\nOxr5gKYWoIZWgfGfloFq1qTPLubnGO1RPtxg4P0oBAkY/hBz6VNDDkZ6AU0W2WSdqkdKr9ZOaGSj\nVtcLHmnOcgmmYvcz7mBLy3MbdD1q9ouiRK6bUAVeelOC1InPlidSsWMDFOCEdq3uefykqrinYqGy\nrFvApMVka2DAowKAsMkRXQqwyDXn/iWyitNQ3qPl6itIvRoF8RXinW4tQ6HI6GuW8SIVBPalc6qe\n5x9x97r3qruwTjrWZ0ksZ9TUmcDNAmZ9/wAoao63rR0+w22MLPtAzt6mghmfofiB76LdJBJBIp5D\nd/oa7bSdWLIPnpDi9TM8TeKdas51XTbIyxd3J/pXS+E/EFxqNoFu7do5OmD60maHWrnZyDRkn/69\nMlEyOR0xntVoNx+FUgYjPxg4FLCuWDZyKQr2RoRnP0qO+nEFpJITgAUzLqZnhu6+0rknOTXpOmwJ\nFbrt5yMmnHYyr6Oxb2ijaKLnPYMClwKQWK3n0hn+lachHOJ9pNNN0apQFzsY10a4v4hXQh0xpieQ\nMA1XLZNjhK80cT8OdV+3Wl3A7ZZJCw+hrR1qLcjZ/CsbnfHRnFXseHJArOYYbrUs1uPhYbuatqFP\nByfSkMq3UIINYkto+87Tx6GkSxfsDbflGD7CtTw/pk4nzITtPIFMFudsukh4Rxz71paTpKwP5jcn\n0qTRy0NORMDgVCqewoJTJgAoxjntTiTu7fWmFxAcnn1q3EPl+X8KZMi4gKqB1Peob/Tv7Us5bfeU\nyOoq4R5nYxqT5I8xieH9J1DTbvyJELRg8ODwa9Ms5mSFV9BWiptbnNVrKdmif7Q1KLg96XIZc5Is\npNL5pqeUrmMtZs0jzV08phchaY00zH1p2ZNxjS1g+LdJOt6U9ssmxjyGp2urDjLlaZzng/wUPDqz\nTSTmWeTrjpVjVk3Rvjr2rnqQ5dDvo1XUd2cTqSNk9OKxXGCeKxZ1DAxHTr2q5C/y8GokUhsz54qu\nuCxzSQjQ0+FZblR2ro4bZYiMVQ0dBb7Qi5x0qzuG5QOh71LYErDufpSeWrHnimIXbjkUjLkH1Hem\ngGxryc+tXI19KYmWegq9YLiLJ7mtqS945cS7QsWehqxA9dEjz4krPSxyZqbFFhGxUm6smjRM55Lk\nHvSvNxXTY57kLT+9MNwKdhXGm5FIbkU7Bca1wMEVhaiuQcVhXWiZ14R6tHGanGBI2OtYkqEHjgVy\ns9ErEeo6UBsHipKEZs5qpPdRxcbhx70NCSuybTNWihc5brW9Fq6vjMnFSdEIdDRi8RRKygZbHFbu\nm6nb3RA3gMegNJhOm0jbXGOoxTuCc1Rz3FyoGKawz9KaAVcZqeMgCmIkB4FaUTbYwB6V00Fuzixb\n0SFMuDU8Mlbs4UPeXHeiOXkUrDuXYnyKk3cVk0ap6HMxxketSMhrcwRC0dMMZFMQ3yzSeVQAeUaz\n9Vj8uPd271nVV4m+GdpnHX67pCeKyLtBtNcR6xlk9RVeWTb3qRnO6trgttyIfm71z7ai8j7/AJmN\nDNqUVa5Yi1AnjynHuBV+11YJhWWXcP8AZNSzqgmaEerSsf3NtIQP4mGKtRavdRgMIpVI9KjU0a7n\nR6T43uYQI7qN2Tpkqciu503VVuQGAYZHQjFVc4alPlZrpKGAznpTwxOc9+lWjIlUACnM4XApiLNk\nnmvnsK0NvpXZRVonmYqV52GsmanhXitTmFkSiJTSAvwrxUxXIrJ7miOfjf1pzNWxkRlqYWpgJupu\n6gQbuahvIxPA6eo4pNXVioS5WmefakGhndH4INZs5DJXA10PaTurmLO21uKpSZqGMoXGnRzBiyjd\n9Kx5rcQS428fSkjanLoaOliHGZFB56VswW+mtPufcBsGOAfmxz+tFkd8HpoaUx09FAtFY8DO71qb\nSms/Nb7RbecG6AEjFLS5c78t+p0djpVs9wsyQiJAdyr1rW+zqjErzSe559Sbk9S3C+MA1bjbgE1S\nMSXzMVG0vNUI2tPKrAuCMnrVzNd0PhR49W/O2xrHmp4TxVMzQshpIzzQBehqesnuaI5VGzT2bitz\nFEbNTC1ADS1JupgG6l3UAc14s04yR/aYRll+8BXCtLncDXFWjys9TCz5oW7GddH5qqNzWDOgQnC8\nVSuo1kHzAGkPYopEY2+RWxV23Vzj5G/Kg3jWaNazhZuqNXS6TaKhB2c0jR1nJWOlhOxRxU4YkCgx\nY0OQatQyDbyaaFYe8uF4NY3iC9ltbVGj43NTIL3h7WzMihjzXVQXYYDdW9Cf2WcOJpfaRZ3g9KsQ\nmupnCLIabGeaAL0LcVY3cVmzRHIxtUhetzEjZqjLUAIWpN1ArhupwagAfDKQ3Q1594v0c2bm6tx+\n5Y8j+6ayrR5onThp8s7dzkZjuqAAmuBnqC7c0iwgtzSA0rWzjfGRW3ZadDu4AoNYo2rfS4v7orSh\n05UA2r0pDbsTm29KRottBNyJ0wpJ9KhD7f6U0ikNWffIFBz60zVUW52ow4UcUN6EPcx44WsbgOmd\nua7TT5Bd24KHnFKnLlZFSN4koluLdueRWvp14swweG9DXoxldHlTjYtzGoo25qzEvwtUxas2jRPQ\n5CNqkLVsYoYzUzdQA3dSFqBBmnqaBhuqhriCXTpVIzxUz+Fl03aSPI9QTypW2/dz0qKNw3SvOPZR\nMqin8VLKRcs3O4Cuk0w/MDjt1NBtHY6O2IIHY1pxgFaETIRwMkjtVSUEk4570MlFW5bap6dKzWm8\n1tqH8aY+hp2FvGoGayNevVt7/ap4xzUvYjqTLtvLPcvJxSaVcyWsxTnFZlnT2t15xHmCtOBYwQy4\nB9q7cPO+jPPxFO2qLEj5HWo42+aus4HpoX4W4FTF+KlotbHII9SFuK0MUNZqiLUDE3UbqBBupwag\nBc1DefPbyD/ZND2KjujyPWlKzuPesRZjHJXms9lMuw3StjnmphKDSLTJ7OfE3JrpbO4GQc9qlnRA\n3LO82k5NbFvdADkjBoCSHyXIIIzgVQvdRigT7wzjgUzO1jHknlvG7qnp61etYFQDIpCZoqVijzXn\n3iC8EmsOuaCGb/heR/s0ijkVv6fbxy3QMg5xmsnuX0Ldzut3+UYTPWk+2GJSe+M1pFtamcldalmx\n1eO4XaThhWnC+TXqR2PHqL3maUJ4qRjxSEjj42qXdxVmaGs1MJoATfSbqBAG5p6mgAzTJTmNvpQU\ntzzHXY83D/U1zF5FhjgV5r3Pa6FMsV5HWnLe7RhqBRdmTwagN2d2K2rPU1C5LAnPrUs6Iysbdrq6\nf3gK0BrUKj/WClY05iM6xLOcQAj3NT29uznfKSzHuadzNu7NSBFjHNSm5VO9IRnajqoWMhTzXFtA\nbvUfMduSeg702Qz0rS7FbTToQFwzjJqaGTFyfK5PQViyzUuFmuIdgGABya5u/vTaN5cnUHFUmLoZ\nzyskwlgJweSK6zQdUEwVJeGr0aUrxPLxEfe0OrhPAqVjxWhznGRtUwatDK4jNxURbmkAm6jNABup\n6tQAFqhupNtu59qUnZFwV5JHnWsHdIx96w5lz15rzT2uhRmt85xWbcxMnUGmZlB0bdxmrNvFIcfM\n350mWjbs7YkDJY/jW5ZWW4jikWkdNp9mqYJFaJdEHHakUULu/VB1rLn1Ld/FgetMGYd/qWSQmSa0\n/AemS32pfa7piLeLkg9z6UmQtz0W7uQ2cZx0A9BVzR7cAea6j2rPqX0L99KRat5A6Dk1wOoKZ52a\nYfMORTYRLujiGWEq6/NWza2yKQVHNdOHerRy4laJo6TTnbbtb8KuM3Fdh5z3OJjbmpt3FaMxAtUZ\nagBN1GaQBzTwaAAms3VbjERUGsa07RsdeFpuUuY4jUjljWTKK4j02RE4IpJYFk6imQkVl0xWarsO\nmAEcUi0bNnZBR0rWtoguMCkUi21wI161mXuocEKaYXMS4u+pY/hVCSWSY4HT0pEmlouiSahdpEBl\nmOceleiwWcNjClvHgJH97Hc1EmVFFi3Czy7mwIl/WtJbjP7uLgd/apQ2VNVvtsBhiPzdK5S4nAuR\nnqOCaTGi9pcytPlU+XpmumtWII44rah8ZjiNIXRuWeNvvViQ/LXpJWPJbu7nCRvVkNxVsxBmqJmo\nEPiXca0YLMuOlJsuKuPlsSi5IrNuG8s4HWs5VEkbwoOTKsk+FJY4rC1K53k1xTk5O7PSpwVNWRzt\n4cms+WpKICtSLTETQj5q0YeBSGiys23pUguGxQMq3E59ayrm4x3yaAKiRtO2WPHcmhruKFxFajzZ\nScA44qRHoXhuMaLpxaUg6hcDLMf4F9KlhuDeXGASIl+8azZslYma68y48m1+7nFW5rtbRNhb5z1p\niMKbUg0zuW4A4rPgb7VdKXOMmpA7HRbMS7nUYiUda0lkQOBngVrS+JGdbWLRt2bAx5BqeQ/LXpnj\nPQ4GJ+ashuK0MhWaoWcA0AaOmASMK7jRNPWYBmHyiuepO2x10qfcv6vYxCzYqoGK4HVYVTJrmb5l\nc6oaM5TUJ8EgGsG4kLNUHT0M64OaqMMikSRsuKbnFMRLG3zVehOaGNE445NNlnVFpDMu6uie9Vo1\n8z5mOAOST2pDK91cNN+5tsrH3PrW54a06KxT7fdrlh/q1Pc+tJ6IUdZGvHPLezMcnBOWbsPap5r3\nylFtbdT1xUWNWzU0/Zbwlgfmx8zGsHWtRHmMqE59aAMyNifvHPc1f0gtPdqkY5JosJHeNci2tktY\neuPnNY+oXWZEVJNrZ9aun8SIq/CzodHuriIokhDIR1ronbKZr0o6o8ipoz//2Q==",g6="\n/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAsICAoIBwsKCQoNDAsNERwSEQ8PESIZGhQcKSQrKigk\nJyctMkA3LTA9MCcnOEw5PUNFSElIKzZPVU5GVEBHSEX/2wBDAQwNDREPESESEiFFLicuRUVFRUVF\nRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUX/wAARCASwBLADASIA\nAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAEDAgQFBgf/xABDEAEAAgECBAMECQIDBgUFAQAA\nAQIDBBEFEiExE0FRBiJhcRQjMkJSgZGhsWLBJDNyFSVTY3OSNEPR4fAHFjWCokT/xAAYAQEAAwEA\nAAAAAAAAAAAAAAAAAQIDBP/EACARAQEBAQADAQEBAQEBAAAAAAABAhEDITFBEjJRIhP/2gAMAwEA\nAhEDEQA/APqYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAKNTq8OkxzfNkisQC8eb1XtRNbzXT4q7eU2nu0MntRq/D8StMccvW29ZmdvgjsTyvZjxOLj\n+s8WLxn8TFPXs6Oj9oct7c14rkxz22nrB2I49KOdTjelmszfmpMeUxv/AA28OqwZ4icWWtt/SUi4\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmdo3nsPNe0Pt\nFh09Z0+DNWL7+9O/7A3eJcZppsV5raI27esvH6jX5ddM25p79Ilo59VbUZOe2Tm/PeGvfPfT2iKR\nPLv1+DO678XmW/a97U6TtOyzTbTF538/T9WjTNecm9a7126tqk3rSYxY5ta1plRZqZNXGjyZcPXl\nmZmsx+qjBrsuO16xM7eXRt04JrdTltk5OWJnfaWf0a2lty5MdZnfzSn+WOHiOutFpjHa9e8bQ2fp\n+alYy462pk7zXbuxjPesbRS0f6ZZV1ET1tErzXFLHo+A+1ddZf6NrI8PJHa1vN6iJi0bxMTHwfOa\nzhzd61v1846utwniM6DUdb3nBaNrVmd9vjC/ZVePYirBqMWppz4rxaPgtEAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAItaK1m09ojcHnvarjM8P0vh49+a/eY8ng9D\nh1fGM1rxjtGPfvbzdbjuTJxHX48cTPNltM/KsS9Dw7S49Jp6UpHaGe2vjz1y9J7LYK13vHWe7bj2\nex1tvM80ekuxW3RnW3Vm6P5jRx8H0+OYmMcb+bapo8GKPdpC6bQwtdHU8JpWkdJ/JweL6e23iU67\nd4dubSqyVi9Zi0bwIs68XGp36TtEq7ZJmZmevzdbifCKWtbJinkt6eTgZPFw32t+sRurbWVzxs1y\nRv6T8V1NZNPtfq0seTm+Kevr+SZuxXjvaPiV8N4viycto9HseG6+uu08W6Rkj7UPmFck1tE1nlmP\nLd3eA8V8HVVi1pjq6Ma/pnqce/ERMTETHaUrKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAADW19+TQ5p/p2bLS4v04Zmt5VjeQeJ4bjnLqsupv+Ka1+ERLv4reTmcNxcuC\nvy3l0qdI2hlr66sT02ot0ZV7qqrInruzrVZLGSZ37JjqgYTG0K5lbaFVhDT1Ub456RPweY4hixWi\neSdpjvD1eWejz3FNHWYtkpvFo9EIseb3tS3SerOms22rfpPqZKzvvHSYUz70TExG6Gdbs2rljeJ/\nMx5L0vEzPaelnOi98c9J2bFNTFpit47+a+PVUvx9T9nOIfT+GV5p3yY/ds67wvsXqpxau+G09Lx+\nr3TqrEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADV4ljnLw3U0jvO\nO0fs2lWqyUw6XLkyfYrWZkHldBEV09eveG3Fq1mI3jd4vPrOIaid8G9MP3Y38k6fNrt/rMk9Ou8s\ntfXXn49rGWInuy8SO/k5Gl1E3rG/fzbOe94wTy99mbRvTrMOOvNfJWsesywniukrG/jU6fF43WYN\nTmtEeJtEQ06aSmK2+bNtEd+qfSO17unF9Hmvy1y13XWyVmN4tExLxVK8PmNq5NrT58zawam+m/yc\n0Xj8NpRYSvQZ7xEOdqI3rPozxayNRXe0ct/ON03jmrKB5nV4q1yTO20Obmv4c+cx8HoeI6WZpNoj\nq83niYmYscU0r8aJ6T1n49zeJ+Meqm1drb9J+Kd5p136StGVem9l9TbHxLDFp7W7+sS+q1nesT6w\n+PcAzVjiGHftzQ+v4f8AJpv6On8jH9ZgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAABp8VrW/C9TW0ztOO3b5Nxp8VmI4bn37TWYB8f1HFtTfUfR9FWJmsdZ9I7MtJxDX5s\nd8ta1y0xzteaR2277rcuhycP12SceLxMeWNpjttHwlu8I0mfQ1y+D7k5YmJmY36T36Ka43z/AF1t\ncI1ds+qxVj7/AEej19PCw9HJ4NoK4OIU5Y35YmZdzVTGebVZabx5jJS+Tmns81rNLm1Wrzc9rVw4\nYibbem72mXTTS0w0M3BvEta1bWrM95ie5EanY87wXgNOL6XPfxraXLhra/W28bR/dzYzarBqJxRe\nbzE7Rt5vWU9n8mPHOGmS0Ypnea1naJb+k9ncNLR7u2y/WcxXO4TOoyUrN6zD0FaW5Y3hu49FiwUi\nKxCvLMR0hlW0jn6ukWw3iXjOJzbDlneOj3GaN6zDzfFOH+LE7SRGo83XNSZ2lbG2/WfdlvaT2cy6\nrNFInlrv1mfJ37cK4PwTTxOoidRm2+/2/KFuyMp47XB4LivXiunrH2b2iH2qn2K/J8x4fGDNxTSZ\n9Nh8OviRvTyfT6xtWI+DeXs9MNZubypASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAOZx6/LoOWPvWiHTcf2hiZ0e8fc2mf1E5+vP/AEeuSd7RC2uKtI6QjHfeINTfwtPf\nJvty9WPfbt/lucP03gxfJf7d/wBoReYpm97zaNeLb4Ims9Nt94auDjem1Wo5PFi1onylS+1o7l8V\nbxvtupjDMdNkYtXS1+Stt+m63xImEJ4xjHER2ZxMUjeUTO3VRmydBbjLJqPi08mbeVOXJPq1sl5Q\nVbkz9+rRy35rxHqzmZlVEe/Ez5LRlW5iyfR6zffaIjq1OSNZps2a21rZInafSPJhxGMl9LStLRWM\nlorM/A4dkrWbYfLZC2W/7K6eubX6b4RzT+W76K8b7G6X62cu3Sten59nsm3j+OXz3/0ANGIAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0OIYfpOHPijvNNo+fdvtXJO18k/\n/OwPFYbz2ls3jx8VqW6xMdWPEdP9D4lkx/dt79flLLHbkxTPwY6nt2512ORTRzE2x4/dpE7cvkme\nE4IrW3hRMxO8THRtU1FKWtvtvK2upx22rzRCtXkqzh2jtF7ZbT122b01ndnpuWuP3Z3+Ky20qDVv\nfauzVy3mejZzNK8dVjqi87KLRLYtXruqvXzkQp7Qoid88R6rcl+WGlW0/Sa22mfhCZOq2x082ix6\njkm822pO8VrPdr4dNObVeDo8XW3uzMbzK+mvxT7szE27cvnu9j7PcNjSaXx8mOIzZevbrEeic5tN\n+SZnpt8J4fHD9HXHO3PPW0x/DeBtJxx29vaAJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAKNRim9Z5e89Nl4DzXtVh5babURHrSf7f3ec1+qnDorWrvvt5Pccb0n0zhmWk\nRvevv1+cPE2rGTFNZU26PFfxwa5dVkjelI2772nZnX6bbrEUq3o0d678u8wmuDL2ittvVjXdneeK\ncGv4jpJ6U56+kS7+j118+GLXpakzHaWlp9NNY3tv+bbiYiNoQy1y30uyZJlrWmZnuym6q1iIJnop\nyW2Te8bdWnnypQqzZOadokiIpSZntWN5lrxki19vNRxrUeBwnNNd+fJEY6/OejXLn3Xe/wDp9wyn\nE8uo4lqqxblv7lJ26T6vpD5X7G8QycKzeBMbzMRM1/FH/wA/h9QwZ6ajDXLitvWzRgsAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeL45w+dDrZvWv1OWd4+E+j2jX\n12jx67TWw5Y6T2nzifU+rZ1y9eHwzDYxxEy18+DJodXfT5o96vafWPVbjyxDn1OOzHudbM0rt2UW\niI69mVtRXZq5tREb9VUoy2iIlRbJ0UX1VZ6btTLrI7V6yk62M2oisT1c7JmtkttVMUyZp6x0beDS\nRWOvdKijDimvWd3G9pNRMfRcNfvZOb9Hpb0itJeP47k/3hgjaZnbaP1XxWW3T0movbNS0W645nbf\n0nrMPpXs3xamoxdJiLbe/X1n8Uf3fKsOTw4jbaXo+EarJhtGTHMxeJ6xH7Sti9Zaj6x3HM4NxXFx\nDS1mtoi8dJrv2l011QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAGjxLhODieOIye7kr9m8d4eM4to9RwjPXFa0ZIvG9bR0fQXmPbDFvTTZPOJmEWS/V8bs9R43NxLL\nG8eFbePg1bajU5/s0l1ceKLx1hbjwRE9mOpx0y2uRTSZsm3PMw2aaKtIjo6kYo9EXpET0hVLXxYK\nxC6MZvyx1lFs0RHfaPiCnU12pLyHGNDbUajBekWma2npWN3p8+opa20e9LSyZLxExTlpM+vdOdcZ\na9tPS8MyUvFrzWlI6727u1pYxYrbVmb7x+TQx6au3Nqcl7/0rcmW9axGnwZJj1novmxnZXV0fFp4\nZxLBPgTGK8xzXr5fOH0bFlpmxVyY7Rato3iYfNuG2x56Wrqa8s2jz+7Lu8O12bS6jkwzN6THNNI6\ntvrN68Y4rxlx1vHa0bskAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAA4XtTTm0OKfTJ/aXdcL2pyRGjwU362yb7fkJz9eTxxyZJjyltRXzUZK7TFtl9Lbwy06YzrHwa+\nfJFd/wCVt8m0bQ0eS2qzcm+1K/an+zNZFL5M1pjFXeI72ky48eGnPkvNp27+TPU6nHpMfLXaIjpE\nerk5dRMxOfN1mPeisfshW1ne1a1577Y6x5R3U0zze31FOWI6ze0byU098kRlzbxM9qrMlPDpyRMR\nMd5Vt/Ihp5898mWZm1pjftE91uCt7fCI7dWeHDEW3t723l6rslqxWZnasR+SYhFbzhnfxJ2jyeq9\nlcGXWZcmW0zWKxHLaI7794eJx5fpfEKabT8t8l5isddo3l9S4VjrwrRUwzSJt3tav3pdOL6Y6dXD\nj8HFWm+/KsU4NRXPvtWazHquWVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAa+fXYNP9u8b+kdZBsDkZOO135cWOZn4y5Wu4xqctbe9y19Kp4njt6vi+PDm8DFMWybbzPlV\n5PiGtz67UxbNbeKTtWIjaIXYpnwuaftT5tXJT3vmi1pMsrU5qIrG1V1a+5DCa7b9GFbRr5J6Wnbt\nCu+Wmk0m8956z8ZWZNorbfzcbX5rZslazPux3hUt41NTntktObJ13+zX1bek01r4/HzVm0bxPXy/\n+bNfDgjVa2uOY92kdfg6ufJOKvLXtttVVSqbcta2vM7zXtHpLQy5ZtMd+vWd+7Zy3mdJHXra3f0c\nvUarw7zFY5rT2hH1Lavnrgx81p3U49Pk4nE5L35MO/StfNRXR5tXnrS8W67WvfyiPSPi7uLHFK1p\njrtSsbR5Lc4RzsXBaYreP4l45esRD2HD9fnw6evvWvO3Tfr0aGk0U55ra0TFInv6uzgrXFXlx0i0\n77RPlC83Yj+JW7oddqr6vHzTTw9/f6dod+L1t9m0T8pcbFSmPHER3892W0zPuz+jSbVvidkcqmfP\nSel7bekrI4n4dZnPWIrHeYnZee2Wpy8dEaml4npNZblw5qzb8M9JbYgAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAABEzFYmZnaI7yCXL1XGa0jJXT0571nbee27DiXEprp8nhbxG20W8\n5cbD0ikfnKO+urTPvjoZdXqctdsmTaPSvRpWmsdZ6yztfaGplvv3lWW1tyRlz1x0vkn7Vo5atTNe\nY0+1o79V2KsZsvX7Ne5mwxnyTNvsx2iGneM/rCdRSuOsTasTt5kRFtpjqmOH4t4nk7estiMNa97R\nHwhna0iuKTEdmGWa4672nZtRele1N59Zlq6vLOSsYorEc07qcW65euzRvtXvPZy52naZ7ujr6fXV\nrWdukREK8+njHgmZmPc67bq6ivVWhxxgxZLztNrT1mZ/SP4VZs0zaOvfp84WUtNsXLvtv3699+rU\nz7+Jtt5qURqMnPpctaR1rMSw4ZoK57eNk6xHaJRh97Ltt7lo5Z+L1HAPZvVauZ2nFTSzMTzeJEz8\nto6xPfvsZntPZ9rXxabmxzefdrv0j1dXh/BcmstW1qxTHHasR3+b0GPhGl+kWmd64dNEVjf73T7X\ny8vy+Ddx6O3iRakxTH5RXrMw1/lX+3Itw2MFIraN48qRHdZi0cUjmmPen9noox1iO0fNzdXEYrTt\nstcmd9aX0bJ+HePmiKTitO8TMLZ1cVjrMfqpz6ys4pjfrPRWZ9rXXptUit6zO+23VyaRHEc05L1/\nw9J9ys/en1ljqdVbwYw452tlnl3jyjzbmmiMeKtYjpEbLeTXPUU8ee/+qjJpsV5rbkrFqzE1tEbT\nDpYNbW21Mnu29fKWna0KbqTdjXXjld0cvQ63ltGHNPSfs2n+HUbS9c2s2UASqAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAOVxPWe99HpP8ArmP4b+r1EabT3yT3iOkesvMVtN7za07zad5l\nXV5GmM9vVfEstvDx0jtaVVMlq+UJ18b5cMRvPeSuK87bUt+i2Z3PtG7zXpjkzXt6R+TXyTMzvM7t\nydHqZ+zhv1+Cv/ZuqvPTHMfOYaTMil1a1K2vHSLTELq2v+KWzThGo84rH5rq8JzedqR+ZeI7WnOS\n34pYTafWXR/2Pln/AMyrKOCWnvmiPyR6O1y9585lhWJvl557Q6eo4T4dYiMvW3b3UanhldHpJtGX\ne09unmjsT7eb1l4trI2t0hsZfrdNO0bzy+nzU20/+NmkzO9esz+TZxWis9dttvPv+Tn21jjaW8zn\n26bTG3mp1M/Wzv3t0jyWXiKZJmsTERaZhXXDbNl8WaztWenxZLstPp5pau8frDtVrNMM5cfTfpMf\n3aunxxbes9d/R09Dp8ebJi09ptFr3jtt2WyrW9wy1Jx132mK+Xq9PotT0iIU19ntLtExa3T47T+q\n6nBaYvsZstZ+cT/LeMnUi0TXffo1s2m8Ws2/OIMWk5Jib5L328rS2t94Sh5TV4ppklpW6PT6rh+P\nNbebTHyas8E081mZy5P2W6OFhjxNTE/hr/LoRO0Kvo9dPqctKzMxEx1la5t3tdnjnMs4noievcrO\nyZjeFF1OSnNV0OG62cn1GWffj7Mz5w05joovzY7xes7TE7w0xrjPeex6Ua+j1UarBFu1o6Wj0lsN\n3JfQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrU5o0+nvlt92P3BxuM6nxNRGCs+7Tv8\n2hToxm1r3m9utrTvMsonqyt7XTmcja0u3O6FMfi5t/u0/lzdJM81p9O3zdvHTwsUR5+bfPqOfX1h\ndqV+3O7bs1+T31oqmI3TEM4rvCdkDGIIhlFd2daboS0NXG2bD6bufxXU1vlmu/u4us/N0+L1tTSx\nkr9qk7w89j1FNZMV3jxLzvaJ8mer+LSOZqK2xZotbvljfr/89U453rXt9lse081xZtNjx7TGKu0t\nDHlrevSevaN5Y6+tJ8c7VRNMt63n3ub+6/R54rERMztDYy4a5omclYmfxKcenrjtHLvtPrCnVmdb\neFe3JXmjy6eS/DrMuLVYsta9Mdt++6qLxO+0dEc8UmInr18iUfReHcXrqccb9Z27Q61Lb13eJ9nc\n1Z35rTvE9avY4bTkpG8xEfB05vYxqybc07R281naGMREdoT5JQqy9mply7Q3bV3iXG1eXw7TWSka\nc258t7+tpT5/BjT7MfHqndz12Z+M4lMMKyziUJJiN1WSu9fku23RaOgKNJqbaTU1t9yelo+D0cTE\nxEx1iXmM1Nt3W4PqvFweDaffx9vjDbGvxz+TP66QDRiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAOJxzU73rp6z296zsZMkYsdr2naKxvLyObNOfNfJbvad1dXkaeOdpvsc2yuZVzfbfqybutwu\ns5s8R92J3dvJb3tnO4HSMegtmt3nfZvYp8SZl0z45NfSK7onH1bNcfRFqnUKJr0Y7dVtq7prjEsK\n0XVpEM6028mW20IHK41aPo3J6zs4ODhdcvPnvExFevNXpMOrxi/PlrTee7PLX6Pwa09uaNlKtHg9\ndM3z5d7ReOu02nu0JzZMfblrv5R5uvrcdImZ26T1mYhxs1Os7RH93PZ7axuafNfLitvbaYU3yZYt\nPXs9NwHhui1HBa5LVicsb81onrEuVqNNSuS8Y67dZ6xPZa59Il9uX41vEitImZme3q2Kxbxora0T\nMd/ROSa4Ztkj7c9OafL5LuGYubmyX3iu/TfbdSfVnpvZLT/XZK233+Mbbva1xRXyiPk8pwbH4N6T\nadq5a71n0tD1WDL4tPe6Xr0tDpz8YVnJHWEXYxbqlBedoef4tW0XraO09HdyztSZcbUz43C+ee9b\nSVMaeOfqq7+jGckQ1Yz7+7v2RN/WXPXZPjci2+2yyJaVMuy+uSJlA2d+pNoVRbeDcSxyTE+TDDlt\npdRXLTynrHrDOyiyZeVFnY9TjvXJjres71tG8MnJ4Nqt4tp7T1jrV1nRL1x2cvABKAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAHJ49qfD09cNZ97JPX5PPw2uI6j6Vrsl/ux7tfk1mWr7dOM8iLdm\nvfebREefRsWldw7SxqNbWbR7lPesrn3Vteo7dYjDpMGCvfbeXQ0uLlxRLRxROfUc34p6fCHYrXlr\nEejqrjY8uzCYW7MZjdVKqK9VlaxCYrsnYExBMRMJRPZA8/xPHtmpP9W2xx76vhWOInvt/C7ike7N\nvwzE9kcapGfhlevTaFbFo8RqJ5vy8/RoW09ek0msxHfp3dzNoLzp4zUmZpMbT8HJyYJi20X2n0lh\nZY1li/RaidBF4w2mK3jrHaFGp1lN+tptPp5IjBkid5mIp16TKu0abBPv33vPlM7z+iPdFNcWXU5I\ntkrNce/b1W5db1nTaf3ax9q0fxDW1ebNk2phty1mOu09VOm8W19orEz23j1TwfSeERFuEYMddptW\nd43dvBn21eKJ75KbW+cf/JcTgMxXTb3nbljz+TpcPmc2uyZO1KRtVtGVdi0bx07qJnllsRO6rNTe\nN4XVamsy8mnvPwc3R2jPwe8TPbdlxXNOPSZfhWWpwO85OFzv57qrODkzeHntSe8Sn6Rv0a3EZ218\n8nXekfr1a0ZLVnqx19dWb6demXybOO7lYMvNMdW9S/VVLo0us7tPHdtUtEwJiZU3jq2Jhham8CVG\nPNODNTJXvWd3qcWSubFXJWd4tG8PK3pPd1OB6veLaa89Y61/u2xfxh5c/rsgNHOAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAANLimq+i6O0xPv392rdeZ4rq/pOqnlnelOkIt5F8Z7Wj27I2I6sb25YY\nV1ImY3dbQ08LRc23vZp2j5OJG+XJWle9p2h6HHtbJXFT7OOIpX+7TxT31j5rycdTh+Dpz+XaG/sw\nw18PHWseULN2trBE9UcrJKBhFU7JAQi0dEomegNDUYovM7x3jb5tO1ZvpbaTLtzRExWfWPJ08kbT\nEx5NXWYYyV5omYtHWJieyeDzuizfRs19Jn6TM7Ru1uMcJxZqTkw+5f4ebqa7SV1MR4tdrx2vEfy1\naxqsNOTLjnLXytVXi3Xj8+nmsxTLM16d5npPyUzpekTtSK+U7vS6vQ/SYmK1vWPS1HOn2dvvvvE/\ntDO5XlcO+LbfHSd/W3o6/BdDOXPTnj3Kz38rS6Wm4FNrRyRzTH3p6RH/AKvR8L4dXSzE3jmtHn5I\nmbfqLV+m4dbLSsZInHjr3iI6zLpYaxS01rHuxHRHiT9mv6s67Vj1aqL6326MrWiYa+/Q54BxPaGe\nXRZpj8MquB4+Xg8zPnB7SX30to379GxpK1xcHiKz5IS8xr8PLPixH2bftLTy05o6dHYyVjLhy0t1\nizjZa3pMVv3iO/qz1G2L+NbSajbNyW7xLsY8kTDz+fJXFqKZN4iZnafi6WHL0iYlStI7OO+7axW2\ncrFl7dW9jvE9ULN+J3ZbdFGOy+AYWpEqN7afNXLj+1Wd23KrJVMvCzseh0+auow1yU7WhY4fCdV4\nOadPefcvPuz6S7jol649Tl4AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAV581NPhtkvO0R+4NPi2\nr8DB4dJ9+/7Q83Po2NTqLanNbLfvPaPSFDHV66sZ5ET0hRknyW2lTtMyouz0c8usx2n7s7vScKwx\nzc1vu/y85p+maJh6Th+SOWeveXR4/wDLm8v+nX5mUWa9bbrInolmu5jdTNkxYFk2Isr3TuCzeGMz\n+THdEyDDJO9Ja823rt2XWnya946pGvktDXta0ztWu/ybvLE9dkcoOf4GbJPWK1j49VmLh9JtE33v\nMevb9G7WsW8l1ccREISophiJ2jpDYpijbaOjOuOJ8ujOdqxsgVcsUjaETYvbaFFrgu5lVsm0yUtu\nryg43H5m+GIj1XcJzePoL4pnrWGtxmfchr8JvfHS1622if3QljzTTLes+qrNjrkiYtCzPMxnm095\nYZJ6boS5teB49Tqscza97VtvWvlv8V/FOF34RrIxTM2xXjelp/eHoeA6XnzReY3ivX/0dfivDcfE\n9HbDbaLx1pb0lOs+jO7K8Lis3cN+0NKcd9PmthzV5clJ2mF9J9GHHVL108dm1SznYr/Ft0tuhLb8\nmNohFbMhLWy0mJ3rPXvDvcO1karBG8/WV6Wj+7kWrvDDBlvpdRGSnbzj1hpjX4z8mOx6UYYstc2O\nuSk71tG7Ns5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeXneJ62dVl5KT9VTt8Z9W9xbWclPo+O\nfft9qfSHEU1pv48ftYST23ZTDC/p0YtlVuvVjMbM5+LCZjYGWGdrTPxiHY4ffaf3cjTxz1v6xMS6\nOlty2iXVj/Dk8n+ndrkhnGRo1v8AFdW3RCrZ5uiYsqrboncSu508yjmZRYQt50TfowYTbYGVrKrT\nuTZjvukQnYhMIGVY2ZxPVWyrHVCWzXpVXkt3TE7Va+W4K7X3jv1auTNy3jdba0RZpamfroQN7Hk3\n6wr1GTaN2OOJiu6Mu98NvgDi8Wy74d/yZ8PiPAiO2zU4nb6qIn1bugjfFE/ASp1ke9u15mbbRDZ1\nMb823kx0Ontn1OOkedoJCvT8I03gaKsz9q/WW+isRWsVjtHRKyrhe0XCfpWL6Vgr9fjjrEfeh5fF\nfeH0V5Dj3DPoOo+k4a/U5J6xH3ZZ7z3228evytOk7NvFbo0cdols47bSybt7HbddHVqUs2aW3Qnq\nxVeu8LILR3SlZw3V/R8nhXn6u0/pLuPMXjeHT4Zruf6jLPvR9mZ8/g1xrvpz+TH7HUAaMAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAABRq9VXSYJyW79qx6yvmdo3l5viGs+maqYrO+OnSvx+KLeLZz2te1rZL2v\ned7WneZYWnZl5K72YV1xEyxmeqJljzIEWlVkszvbZp5soN3h2SJz3pP3odCnuWmPRxuERfJrZmtZ\nmtY96fR28kbX3dXj/wAuTyf6bmK+9YX1s0cNtm3Sd4LFY2K23W1s16StiUJW7bp22RW3RluBuruz\nmWEgrmCGWyNkoExKE1QlPmsqRDKeyBjaejWy2W3ttDUyz1QKslvehVqKTNosyyTvELabXptIJpaP\nB39Ia2mz+JGpr51jdZefDx2hzuHZObNq58poJaGtjxJ2+LoaKP8ADRPo5+T3skx5OhpOmC0fBNQ0\n5yTbn+bt8A0u9raiY6RHLVwY62mI6zMvaaHBGn0mPHt1iN5+aYVsACBXqMFNTgviyxvW0bSsAeE1\nmkvw7V2w5Ote9besJx2er4rw2nEdNNekZa9aW9JeQjnxZLYskTW9Z2mJY7zz26fHrrdpbZsY7NGt\nmxjvso1b9NmUwpx33XRO4K7VUTE1nmrvEx1bVo2VWiJE/XY4frY1WPlt0y17x6/FuPM0m+HJGTHO\n1qu9pNVXVYt46Xj7VfRtnXXL5MfzexsALsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHM4jxOMFJphmJv529Dq\nZLfjDjPEIx450+K3v2+1MeUOHSOWFc3nJkmZnf4yujpVlqunOeFpV2nctLCZUXRM7MJtsWlRkv3Q\nky5NmpWt9RnrixVm17TtEQnJabXisRMzPSIew9n+CRoccajURvqLx5/chfOest642OGcIpoOG2w7\nROW9d72+LQvXevyejcPUU5M+SvpLeOataraw2a0dLbLqTtK1G3Es4lVWWUSoldFtmcXUbpidgXzK\nGEW3TuCUSncnsDFMMLSms9EC6J6FpVzbZE5ALy0809ZbFr9GtfrEoFMzuuwz0Ueey3HbaBLDXe7i\ntMOfwWnP9I+NZbuttvhs1uBRtXPb4SDm3iIvf57N7Dbl0VrS5+XrltEd+Z1Jx7cNms9N4TURRw3T\n+PrcO3WszEvZOD7P6aYiMlvu16S7y1QAIAABxOPcLnUY/pWCv1tI96I+9DtgmXl68Biy7/NtUu3+\nO8HnFa2s0tfd75KR5fFyMWTdhrPHVnX9R0cd21S3Rzsdm1iuqs256wrmGcT0RYSx5d047X02SMmO\nesd49YRE9WcdSXhZ2O1p89NRji9J+cei1xMc3wXi+KZj1j1dTTaqmor06WjvWW+ddcu8XK8BZmAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAMMmWmKu952UZ9XFZmuP3revlDTtzWnmvO8q3XGmfHb9ZanV3yxtWeWn7y4es\nvPNtDqZJ6Ts5mppvdl/XXRMyfGvSNlu/RVvtOzLfoipLT1VTKbSpvfogRkvtDVyZOhkyvQcA4Dzz\nXV6yvTvTHMfvK+c9U3rkW+zvA/D21urr789cdZ8vi9KDb45rejl8Rry6iJ/FV1HP4vXbBTJEfYt1\n+UpiHM295bXsqrO9l8QkZ0lZEqqLeyBZHZLGvZkhIndADKJ3TMoqWQMZ6pjsxll2jsCLSrmU2lFY\n36gieyu0LJk3jbsga0wdqzK20QpyztQGprL/AFMrOE05NLkt6qdVWZxNrSe5o9vWBLiUjnzXn0vL\nq555dHt8HOwV928/1z/LpzXxbYccRvzTB+jucOwxh0dI22mY3ltIrHLWIjyjZKyoAAAAACJiJjaY\n3iXleM8InR5J1GniZw2n3oj7s/8Ao9Wi9a3rNbRE1mNpifNFnVs65XhcWTdt47bnFuF24dm8TFEz\np7T0/pn0a+HJux1OOrOux08d1ndqY7tillVkzExLOk7yd4YxGwluViJhE45raL0na0dtlWO0+bZr\n1TKi+2zptZGTamT3b/tLacvJjiY3XaTWdYxZZ6/dtPm1zrv1z78fPcbwC7EAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhkyV\nxUm152iAZWtFazNp2iGhm1Vss8uP3aevnKrNntqLdelI7VRHRnrX/HRjx/tZREVjZXeybW6KbWZt\npCZ6S08tN7Nmbb7zCrJtyoS5145bSx5mWafelr3tsKmS/o08uXyhlly7RPV2+AcBnPNdZrK+53pS\nfP4ytnPVda4y4BwHxOXV6uvu96Unz+MvVxG0bQRG0bR2G0nHLb2gCUDX12LxtFmpHeazt82wT1gH\nmMN4tWs+rcr2aEV8DU5sM/cvO3yb+O0csLUTSdrLphRE8tlkZI7Atr2ZMazDJVKTYSCawi7Ksq7z\n1QERvLK3ZGPrKbyCrbdnMcsbeaa18/RhvvM7oGEwTG0JmYYTIML22a2e28xELM19oURPNO4lOem+\nn3ZY5+prVnMc2GYU4/L4A0a15cNf6rz/AC6fC6+NxCPOuOu/5tHJTbHj+F5/l1+BYumXJMd9o3/d\nMRXYASgAAAAAAABhlxUz4rY8lYtS0bTEvH8R4ffhmo6bzhtPu29Pg9mq1Gnx6rDbFmrzVsizq2df\nzXkMWTeIbNL7tbXaHLwzUctvexWn3bmPL8WFnHVL326VZ91MfFVjvvVlz79kLrcf2m7j7bNHH3bl\nJ2SirLQoy4t1++7G0dBC/RanxI8PJPv18/WG241+alovSdrV6w6mDNGfFF4/OPSW2b1zeTPL1aAs\nzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAVZ9RXBTe3WZ7R6iZOpzZq4ac1p+UermZMl89+a/byj0Ra9815ted59PQ32hlrXXRjH\nDpCLX6ML5NlNsm/ZRqstfdXzbsZt06sLZNvNB1Za8RDWyZdo7q8udq5Mu/mIMt4md2lmy7JzZuWJ\ndHgfBL8RvGo1MTXTxPSPx/8AstJ1XWpIs4BwSdbeNVqq/URPu0n73/s9hEREbRG0QUpWlYrWIisR\ntER5JbSccur2gCUAAAAPM8Sry8Uyz67fwuxbzVPGsE49XGbvF42V4M0TEL33ERnktsxpk3sumK2j\nadmFdPFZ33VS2Mdui2J3UU6LYlFSsN2O5NkCyJ6K7T1TEsbAsxdpReerKkTFGMxvYEz0rsqtbbpC\nb2VT1QEzuwtbaGUxspuJU3neWdKoiu8rq12gCI92YatLcublnzbEz1aOptyZqTuDHLfxN6R0+t5X\nqdJhjBp6UiPLeXl9NSMnEKxHa1+bb8nrlvxUAAAAAAAAAAABTqtNj1eC2LLXeto/R43VabJw/VTh\nydY+7b1h7ho8V4dXiGlmvbJXrS3xRZ1fGv5rzeHN02bEW3cys3xZJx5ImtqztMS3MeTeGFjqlb2O\n8btql3NpbZtYsnSBLeiWfdTjtutid+ghherHS5p0+f3vsX6T8Fkw181d4lMvEWdnHaGnw/UeNh5L\nT7+PpPxbjdyWcvAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAo1Oprgr63ntAmTqdRqK4K9etp7Q5d7Wy2m953lNrWyWm953mVd77R0\nZa1104xxlN9lV8qnJl2a9s3xUXX2ybsJyRDWtl3YWydEC+2VRkzeW6q+T4tbJm+KRdfK1cmWZnlr\nvNp7RC/R6HU8SycmCk7ed57Q9ZwvgOn4fEXtHi5/O9o7fJaZ6z1uRyOEezVstq6jiEbV71xevzer\nrWtKxWsRFY6REeSRrJxz22gCUAAAAAANbX6aNVpL0npMRvWfSXlKamsRMVvXm+EvZXjmpaPWHzfL\noNRjzXicfWJ8phfPxFejx72x7xMzK+sXiNoiXlq+Pi6fWV/VfTNqfLJl/WTg9Pji8R70LqvMV1Gq\nj/zcv6yz+lanzzZP1lWpelTET6S81Gp1P/Gyf90s412rjtnyfqql6asREdWM9+jz9eJ6yP8Az7uh\nodZqMt458tpB1JvEViI3/RhzRt13/R1MNaziiZiJn5K9ZNceKZiIiQcu/WekT+iYrWI3lzdTrs+8\n8uW0fJzcur1Np/zsn6g79phVaIeetqNR/wAXJ/3SwnUaj/i5P+6UD0ldonum161h5mNRqP8Ai5P1\nlNtRqJjacuT9Qd22WN5aGeZyZd/KHJy59RHbLf8AVq31Gp/4uT9ZEvS8Lr/vSs2npzRtL1z53wK+\noza/HW2XJNd99pmX0Rb8VAAAAAAAAAAAAAAcHj/C5yV+l4I9+v24jzj1cLFk8nu5jeNpeW41wmdL\nknU6ev1Vp96sfdn/ANFdTrXG+eq1q5F2LLtbZoY8m8d11bbSydErsYsm+zZrO/zcnBm226uhiyRK\nEtrvCrJDOJTeu8A1MWX6Lqq5N/dnpb5O5ExMbx2cPNTeJb/DM/iYPDtPvY+nzhri/jDy5/W6AuwA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAa2p1UYo5adbz+xbxMlvqJ1OqjDHLXree0ejmzNrWm953tPmTPWbWneZ7yoy5YhjrXXTjH8s75N\nmtkyxt0VZM2/m175N1V03yTKubMLXVXybeYLLX2VXy7eam+b0bOg4VquJW+rry4/O9uyZOq3UjVm\n9r25axMzPaIdvhns1kzbZddM0p5Y47z8/R2+HcF03Doi1a8+Xzvbv+TotJnjDXkt+K8ODHp8cY8N\nIpSO0RCwF2YAAAAAAAAACvUZYw6fJkntWN3k8dfHz2vLucdz8mkjFE9bz1+UOZosX1UzPm0nqI/W\nMYo9FlcPNklfFGeH/NshLGun+Cz6PtHZtVZWlRLS+jxPkRpIn7rdoupHTdA5s6SI+7H6Mfo+32Y2\n+To3neSIiZ7A0IjPXpXLePlMotGW3272t85datKzHZjbTVnsDj+FG/2Y/RlGP4R+jo20u7H6N1Ql\no+H8I/REY957R+jpfReiK6eOYHLtj2tttH6KrY/6Y/R2c+kjeJiFVtLG24hxpw7/AHY/RRkw9O37\nO99Hrt1YX0tfOBLjcGp4XF8c+u8fs9c4dcVcGemSI61nd3IneN1orQAAAAAAAAAAAAABFqxes1tE\nTE9JiUgPKcX4RbRXnNgiZwWnrH4XPi28PdXpW9JraImsxtMS8pxXhF9DecuGJtgmf+1TWW2N/la1\nL7N7T5e3Vy6W3hsYcvLbqzbO9jvvCzvDR0+XeO7crO6FmGSvRThy/RtVXJ92elvk2rRvDUzU7pl4\nizsd2J3jeBpcNz+Lg5LT7+Pp+Xk3W7js5eAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs0NTrN96Yp6edkW8Wzm6+LNTq4pvTHO9vOfRoWtt\n1mes95YWvs1s2fZldddOczLPLn2ju0MmebT3YZc2/mpm3qqllN1drsbZIhr3yzvtHf4AsvlYYseb\nV5Yx4KTe0+UQ6nDvZ3UazbJqd8OKeu33peq0eh0+hxcmnxxWPOfOfm0mP+steT/ji8N9mKY9suum\nL37+HHaPm9DSlaVitKxWsdohI0Y22gAgAAAAAAAAAABXnyRhw3yT92Nwef4xm8bVzET0rPJH5d12\nCvLhho3rN9RWs9Z23n5y6O21YhrVYbdGOCfrrLPJRpv863zVS6FS09SvZj3lVZZRdPSqmnSWdrIE\nebOkK4ldTsgW1WKqd1oMZhEVZyRAImOjGI6rJ7IiATNd46qL02bHkiaxaoNGY2n4ImPgtyV2n0Vo\nGvlx7x2beiyTk08RPevSVUxux00+Fn2n7N+n5rRFb4AAAAAAAAAAAAAAACLVres1tETWekxKQHlu\nL8InR2nPp43wz3j8P/s5dLveWrFqzW0bxPeJeV4xwmdFec+CJnDM9Y/CrY1xv8qvTZ+WYdbDk5oh\n5zHk283U0eo3jaZZ2N5XYjrCnLSJhOK+8d1kxvCqzSwZvousrb7k9LfJ3nB1OLeJdLhufx9LEWn3\n6e7LXN9Ofy5/W4AuxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAETaKxMzO0Qi9646Ta07RDmZ9VbPbaOlI7Qi3i+c3TPUaqcu9adKfy0722ZXvFa9\nXO1OrjrESxt66ZJmcjPUanlidmhkzTZVfLN5VWvsC2b7R3U3yqrZZtO1esz2h2+F+zWTUcuXXTNM\nfeKR3n5+iZLVbqRzNJo9TxHLyaekz62ntD1fDOA6fQbZL7Zc/wCKY6R8odLBgxabFGPDSKUjyiFj\nSZkYa3aALKAAAAAAAAAAAAAADQ4pl2pTFH3p3n5Q33E12Tn1eSfKscsLZ+orS00eJqbW+Lfnu1tF\nXaJnZsz3WpCfsyp00fWSvmPdVYOmSUDd8kR3InoQosy7JmUX7MdwZ17ro7KKT1XRPRAsrO0rYndr\n79V1ZBaQiJ6JgCSIJASwrO07MpV2nqBlrv1a1o2bf2qtfLXaQUTO0sb05o3jv3ZXhjS20xEphW5h\nyeJjjf7UdJWNKLziyRePsz0lux1SgAQAAAAAAAAAAAAAADG9K5KTS8Rato2mJZAPIcU4ZbQZuekT\nOC3afT4NXFkmlntc2GmoxWx5K71tG0vHa/RX0GpmlutJ61t6wrY2xr8dXS5uesN+tt4ef0eaa223\n2dnHk3juyreM81OaFGiy/RtZET9jJ7s/2bdutd2jqKeic3iNTsd8a2h1H0jTVtP2o6W+bZbOO+gA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABje9cdJt\nadohGTLXFTmvO0fy52bJfU23t0pHaqLeL5xdK9Rnvqb+cUjtCi94xxvK3JetKuHrdZvaa1ljb10y\ncnIs1Wt3naJc++TmVWvMz1YWybfMGdsm3eWek0mo4jm8PT0mfW3lDf4V7P5tdMZdRviwfvZ6/TaX\nDpMMYsFIpWPTzXmf+steT8jn8L4Dp+HxF77Zc/4pjpHydYGjC3oAAAAAAAAAAAAAAAAADG9opS1p\n7RG7zszN6WtPe0zLua+3Joss/wBOzhzG2OsL5+IrY09dsSyYRijbHEMvOChb7KjF0yS2LQ169Mso\nS24noyrPVXWejNVKbTuw3T3REdQWU6LYlVvsyiUDPfqupPRr79VuOQX1lZEqoZxIMksd0gT2VT0l\nbPZVbuCaW8i8bwr32WxbcGnkjaZa9p2ndv5qbw5+aNugLItF6TEtvTX5sMb969HMpfazc0d9stqe\nvVZDdAQAAAAAAAAAAAAAAAADV1+iprtPOO/2u9bektoB4TJTJpNRbHkja1Z6uto8viVht+0HDvpG\nH6Tjj6zHHvbecONw7Ltfkmeqmo6Ma69DXbbZTkr1mGWO3RneOaGbZRoM30fVzSelMnT83aef1FZ7\nx3h1tBqfpGnjmn369LNc3sc3kzy9bQCzIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAa+q1dNNXr7157VhGp1Xh70x+9f9ocy283m1p5rz3mVbrjXHjt91lz\n5c9+fJ1nyjyhdM8lZlOOIiqrUXikd+kMreunnI5XEdX4dZiZcG+XmtNl/F83PeeWWHDOGanieSKY\nq+5H2rz2hMzWd1Iqx1yajJXHhrNrW6REeb1nCPZumn2z62Ivl7xTyr/6uhwzhGn4Zj2xxzZJ+1kn\nvLoNJnjHW7TbbsAszAAAAAAAAAAAAAAAAAAAAaPFrbaSK/itEOXt0rDf4xb/ACa/GZacRvaF58Q2\nIjasQnzPIhCU92tMbZGzHmotG10C6nZkwpPRmipIllEbMIZIE7solgmJBnCyk9VMM6z1BtVllEqK\nz0WRILYlluriWcSDJVbusV27gwInaSWM9ECyZ3hqamnSWxFmOSOaqRx725bNnSZNs9J+OynVY+WZ\nYYr7TE+nVaIr0Ais81Yn1hKAAAAAAAAAAAAAAAAAABExvG09peU4nov9n66L0j6q/WPg9Y1OJaON\nZpL0+9HWs/EWzeVz9PbmrEtnyc3h9reHy26TWdnSr2YX6657ijLXpLX0+onSamL/AHJ6W+Tbv2aW\nekTv16JzeI1Ox6KJiYiY7Slz+E6jxdN4dp3vj6fl5Og2clnKACAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeQRMxEbzO0Q08uqtkma4ulfO3r8lefUePMxWf\ncjy9WvlzVxV6T1Z61/x0Y8f7Wc7Ur1lqVy+LqOWJ2hp6rXddon5rOF1tfmz5OkT0qzb8dWbxjp1c\nbiuuilJ5Z6r+IcQrixzEy8zl1E6rNt1tMztFY81sztU1eRucN4ffi2p5esRM72n0h7rS6XFo8FcO\nCkVpX082nwXh3+z9FWLxHi36328vg6TZyW9ABAAAAAAAAAAAAAAAAAAAAAADj8Unm1tK/hqppHvw\ny1k8/EMk+m0GOPeafiFpCZYwolnXspvHvLa9mF46gmnZmwozRUiUCBKYYsoBLOFbKAX0llEqqyzi\nQXRLOJVRLOOwLIljZMEgrlhKyYYTAK5nZPN0RZjugUanHzVlz6xtLq361c+9eXItPpXX0dubTU+E\nbL2lw2++O1fSW6m/VYAISAAAAAAAAAAAAAAAAAp1GbwcfTreelYEydcuMcRrM/L9nnlsV6wqpi2r\ntv133mfWVkRyRtEdGFva7MzkYZNoamWN4bV4mYa9qztKIujhVppxGI8r1mJegeZpknBqKZY+7L0t\nLRekWrO8TG8Ns/HJ5ZypAWZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAADS12fp4VJ6z9qVuq1HgUiI+3bpDl589cOKZmevqprXPTbx477rDJlrhr1nq4+s182tMRP\nRqaziXiZJrWekNG17ZbxWJ336M5LXRbI3dLTJrs07RMY6fan1dHLrowY+X7MVjt6N3R6Kul0EbWm\ns7bz8Z+LnabQX43r7Y53php/mXj+Dnv0f1JO1x/8ZxbUzj02O15mfLtD13AvZqnDds+pmMmo26el\nXX0Wh0/D8EYtNjilY7+s/NstpOOTW7QBKgAAAAAAAAAAAAAAAAAAAAAADG88tLW9I3BwJtz6nNf1\nvK/DHVqYJ3pzT5y3MPZeojOWMQylEKpTVjZnDCwkqzYQyRRICATCITAJZQxhMAshnEq4ZQC2srKq\nqrIBZCWNZZgwswmFloVyCu0dFcx1WyrtCBhv5NTPHXds2U5o3hIz4ffbPt+KHUcTSW5c9Jme0u2v\nVYAKpAAAAAAAAAAAAAAAAYZctcVOa35R6tLrltN795/YvknNqrfhpPLH92V5isd9mWq6fHjk6rn0\nZxG8KK5Jm/wbVZiYZtqrmkqL023bkxvCiY3lJHNyRG81mHS4Rn5sNsNp64+3yaWaNrzOzHBl+i6q\nmT7s9J+S+ay8mex6EIneN47SNXKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAImYiJme0JafEs3h6fkidrZOn5eaLeJk7eOdm1Hi2vmtPTry/CHmOJcUvmvOPF1n09Pm\n6HF9ZGm01qxO3R5vSY7XwzmzTy47zzTEd7en5Mfvt2/PURWdo3tvPrPlKymbktFqTtMTvHzbOLDG\nf63JXbFX7FdnoODcDprZpq9TjiMMTvSn4vj8l5fxnrk91saPSa7i2hpOfbTVt5x1m0fLydzR6PDo\ndPGHBXasd585n1lsRERG0dIF5OOe6tAEqgAAAAAAAAAAAAAAAAAAAAAAADX11+TRZrf0y2Gjxe22\ngtH4piP3TPpXKwxtjhuYo9xq442iIblI2pC1RET2ILd9kxCqRjZmwlCSEohIJAQAAJZISDKGUd2M\nMoBnVbVVCyAWVWeSuqyOwIlXZZKue4MJV2WWYT2QKbKL9YlfdRdIo35b7/Hd3KTzUrPrDh27uxpb\nc2mpPwX/ABX9XAKpAAAAAAAAAAAAAACekTIp1eTwtJmv+GkyJn1oafeazbfpMzLR4jq/o8b823zX\n6XNF8ERCvTcNpxLV5LauvPhx9Irv3lhztdtv8TtaWLicXrt03jzjzb2k1nid56ty3s/w+a7Uwzjn\n1raejlarhmbhl/FpbxMO/fzj5p/ixSeXOvTtRfeI280ZI26tfDm3pWe63LaZx7qtGvniJ6tPLvOK\nfOa9WzbJvTbza02jl3n5SSljscK1MajSxWZ96nSW88xw/VfQ9XMT9nfa3yemid43jtLeXsce88qQ\nEqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADia3UTm1l4j7OP3Y/u\n7Vp2rM+kPJW1PhYcmS0+9MzKm/jbwz31weMzbV8UppazPL9q0/BF4rk1GLDSNqxPWPhCnHmnNrtT\nqPKteWPm6U6OdHaZvO+SaRNvhv12Ub/q3FhtrNVj0uKOt56z6R5y9zix1w4qY6RtWsREOJ7L6OKa\nS2rvX6zNM7T6Vh3mmZyOfya7eACzIAAAAAAAAAAAAAAAAAAAAAAAAAAczjVvqMVfW/8AZ03I41bf\nLp6/OVs/UVrY47NyOzUxd4bUJpEbb3Z7IiOrKIVSjZhMLJYyhKIgmGUQSDESIEbJEgQmCITEAmGU\nIiGUAyhZVhDOoM4Wx2VQtqBKuyyWEgqlhKyyuyBVaGtkbNmvk7A15l1eH2300R6TMORPSXT4ZO+O\n8fFefEX63gEAAAAAAAAAAAAAAAq1WPxdLlp+Kkx+y1Fvsz8gjhaDauGK8sx07y3OE3m1tT6RaP4c\nvU6yMNKUx73zT0ilY3l2eF6a+m0kRl/zbzz3+Ez5M8z26fJruW6wzYq5sV8d43raNpZjRzPPaTmx\n5b6bJ9rHO3zb2WJ8GWPEscY9bgzxH2t62n19GWW0eHOzHU5XbjXZ1x8WTnz2iZ7S2M1IjH2+LX0V\nKTqs8zO9ot0j8nUthi1J3UaOFMTfLFo6xMbS9BwHWTqdHOO8+/hnln5eTjYMFo1WTH5VnePzXcIm\n2k4zlpPSmXy/hfF5eMfJns69OA2cgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAADG/2LfJ874rW845mubliY7bPoto5qzHrDz0+yePNF41OotaJ7RWNtpV1OtfHqZ715fhu\nj8adNpcVfeyzE2/vLuanhOu1nEctIxTTFa/+ZPbZ3eHcF0vDbTfFE2yzG03t32+DokynXl9+leDB\nTTYKYccbUpWIhYCzEAAAAAAAAAAAAAAAAAAAAAAAAAAAAcXjE/4zDH9M/wAu04XF5/3jj/0f3Wz9\nRUYmzDWxS2I7FSyjuzY1ZKpRKEygEwiWUIkGIk2QJNhKQhMIhkCYZQxhlAMoZwwZwgWQshVCyATL\nCWc9ldpBhZXLOVdpQK7NfJPRdaWvknoDVvPvOnwuel4+TlXn3nS4VPvXj4QtEV0wAAAAAAAAAAAA\nAAAAAVV02CmTxK4qRf8AFFeq0AAAanEsfPpZmO9Ji0NDLfkwdOsulrumiyzHlVzJrz4Ovoy26vB8\ncTBa9NffLtMY77Rv8Yegx5ImkKdJoY1HC81Y+3OSbVn0mGGkmbY45u6tnrrTOu2xGO0RxCd+nNVj\nqKxTV1vH2pjaGtnyzXXYdo96ZmGXEMk15b7/AGZiVerWPTYckZcNbx5wzc7hGbnxXxzPWk7x8pdF\n0S9jh1OXgAlUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAcPjEf4/FP9H93ccXjMf4vDP9Mx+62fqKrx+S+GvibEFSsqyYwlVK\nZYsmIMoRKYJQIPIEiQ2ATCUQygCGUIhMAyhnDCGUIFkLIV1ZxIMpVWWSrsCuyqyyyq09ECq8tfJK\n66jJ2Bp5J6upwn7dv9Lk5J951uE/av8AJaIrqAAAAAAAAAAAAAAAAAAAAAAq1Mc2myxPnWf4cmtu\nXT9fR0tffk0WSe28bfq5Wbamm3326MtunwfK6PCv/AxPraZ/dz9PO97/AOqf5dHhdZrw7Dv3mOb9\nXOxRFM+avpe38mvkPHf/AFWlrKba7Tzt99ZxKkfR7euyNXMTrtPHfa0z+zPiM/UR8Zj+Wbdu8HpN\nM2bfzrV13M4dO2pyR61dNvj44/J/oAWZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADj8bj63BPzdhyeNx0wz8ZWz9RWri7Nmv\nVrYu0NmqaRZHZlDGGSiwxZSgCEkCBCQSCQBMJRCYgEsoYx3Z17AlMIhlCBnDOGEM4AlhZZKq4KrK\n7LLKrIFN2vdfZReAaObu6/CO9vk5OePR1uEd7fJeIrqAIAAAAAAAAAAAAAAAAAAAAGtxCk5NFliI\n3mI32+XVyNTyZOHTee946PQKPoeDffw4777eW/yVs60xv+ZxOnr4Okx1t05KRv8Ao41Z5q3yed5m\nXY1szXRZ5jvFJ/hxItP0aOSN9q7yrtr4f2tHFM5+KT16Yq/vK/iGSbXw4vO14UcPx5MGfNbPG18m\n1oj4THRsTw7VanPXVYpi3gzMcnrvCnG11JOupwuN8+a3pEQ6jT4divjxWnJExa09pbjbM5HHu90A\nJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAHM41H1GOf6nTc/jEf4Ws+lls/UX45uGekNujTwdm5RNIthKIZKLDFlsiQIShIC\nEgCUJ7AmGTGO7IDzZQhMSDJMMYZQgZwzhhDOATuqssmVdgVWVWWyqtCBTeVF19lF+wNLNG7q8I+9\n8nLyupwnt+S8RXUAQAAAAAAAAAAAAAAAAAAAAAAItWL1mto3iY2lyrcLyUxzix2ia2nvPeK+jrCL\nOrTVnxpanhuPPemSs8l6RtE7dJj0ldpNP9GwRSZ3neZmV4cR/Vs4AJQAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANHi1d9H\nM+kt5ra+vPoskfDdOfqK4mn7Q3aNHBPZu0W0RdDOGFWcKLCJZeTGQQlCQSgASBsCYZQxhlAJTAmA\nTsmAgGcM4YQyjsgRLC3VnaVcgwsrt3Z2V2QK7tbJ1bN5a9waeWO7p8Knt8nNyebpcK8vkvlFdQBA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK9RXmwZI+ErEWjesx6wQeZwejeo0cccuW8\nelpblJaaRGxVnCuss4ZrMvJEgCAASISCQIBlCYYpieoM0wx8k7gzIRueYM4Z79FcSy3QEsLJmWFp\nBjaVVpZWlXMoGNmvkXXlr3kGtknu6XCf7OXkl1OEdl8orqgIAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAHmskcmtzV/rls0U62OXiWX4zErcc9GmkRfWVkSqqziWayxCPIANwBIhIJSxS\nCRG6dwZwlhEs4BluMdzfqgZxLLdXuy3AmVdpZTKuZBjaVVpWWV2QlhZRdfZRcGpl7urwfrzfJy8r\nrcH61vPyWitdMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHA4nHLxKZ9awnH2ZcY\njbW459aq8fZpfiI2IZwrqzhmsz3Ebm4JN0AMhCQSIASndiAziWUSriWcAyRujc80DM3RCfIETLCW\nUsZEsJYSslXZAwlTddPZTkBp5e7r8Gj6rJPxhx8k9Xa4PG2C8/FaK10QAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAcfjcbZMFvnDWx9m5x2PqcNvS+zSxT7sNPxH62YZQwqzhRZO6UCB\nKUAJTux3SDIRuAncQAmJZRLBMSgZ7iIAZRKd2DICUSlAljLCYWMLIFVukNfI2bNbIDTyT7zu8Ijb\nSz/qcG/2nf4T/wCE/wD2WnxWt4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHL9oL\n+Hw2cm28VvEuPptfgyVj6yIn0no7/FtJfW8NzYMe3PaPd39d3iMug1WktNc2C9dvPbeP1aZ9xF+v\nT471tHu2iflK2HkqWmvaZj5Surqc9Ps5bx+alTHqYHm68S1Vf/NmfnC2vGNTXvyT84Ql6A3cSvHM\nsfaxVn5Ssrxyv3sM/lKB1xza8bwT3pePyWV4tpZ+/MfOEjfGrXiGlt2zV/PotrqcN/s5aT/+wLRj\nFontMSlAlKEgndO6IAZQljDIEgeQljLCzOVdkCu/SGrkbF56NPNeKxMzMRHxENe0+89DwuNtHHzl\n5PJr8NcnLW3Pbf7r1nCZm2gpae8zMrz4i/W6AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAETETG0xukB4HVaeMHEtRi26RedvkyjBSfX9W77QYvC4xz7dMlYlrU7M929dWJLFc6aPK0q\n7YLxPS0S22FlP6q38Zac0yR92s/KVc3tHfFf8tpbcsLRvB/dR/8ALLVnU0r9uL1+dZI1mnmdvGpv\n6TOy6ym+Oto2tWJ+cJ/tW+KLK5KW+zes/KU7tG+h01p64qx8Y6NXNo6Y+uPJlp8rLf0rfG7MXtHa\n0x8pZxqs9e2a8f8A7Oj7HaTHn0+f6RWM23LETfr6vRW4PoL99NT8ui7F4+vEdXXtnt+fVbXjGsr/\nAOZE/OsPS29nuH27YrV+VpeV9pdPXhOtw49NG9Mld55+vXcTPd42I47qo7xSfyWV9oM8d8VJ/VxM\nd8l46xWF9cV7en6o/qLfxp2I9ob+eCv/AHMo9op89P8A/wBORGmyT5R+qfo2X8P7n9Q/jTsx7RR5\n6ef+4/8AuHftg/8A6cWcOSO9J/WEbWr3pY7Efzp2Lcfv5YK/9zWy8d1E/ZpSv5Oba1/+Hb9lc+LP\nbFt87I7E/wAabWbiurvEx4nL/pjZzc2bJkn372t85ZXx55/BX85lucC0vPxnTxlnnjm32mOiZqUu\nLJ2p4TwnVavNWaYbRTfre0bQ99pcH0bT0xb78vmtiIiNojaErMwAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAHnfarF7umzRHaZrLjYrdIen9ocPi8JyTt1xzF4eUw23rCm3R4r6bMy\nwt6kdTaWLdjswmNoZontsCm0K5XWjopnuDC0dGpqG5bs08/daKV672MjbSaif6oh6Z5f2LtvptRX\n0tEvUN3Jfo8f7cYve0eX4zV7B5z20xc/C8eSPuZIRficfXlcPaG7ino08HWIbePpLF2NuiyOyrHK\n3fZFSwuovHVfaVF4QK5YWTM9UT0EKry6Ps1Tn4zjn8NZn9nOtLseydObiWW34cf918fWfk+PYANn\nKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAq1WKM+ly4p+/WYeBxTNd6zG0xO0\nvobw3FcP0bi2em20Tbmj5Srr418V9sa2Z7qKyzi07MXUylhaU7yjqhLCeiq3ddaFNxFYW7NLNG8t\nzya+WO6Va9J7FW66mvwidnrXiPY3Ny8RyUn71Jj9Ht3RPjk19HK9pMHj8D1ER3rHN+jqqtTjjNps\nuOe16zAifXzfTz7kNyndpYazS9qT0mszDdoxrsi6m8LazMq6zDOsq1ZEyrt1WWlXaUCqyq0rbKbi\nFdp6PReyFd8uqv8ACsfy83aXrPZHHto89/xX2/SP/dpj6y8vx6EBq5gAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAB5n2q03LfDqqx39y39npmlxbS/TOG5se29tuavzgWzeV4mtui2\nO3RRSY2hdVhqO2MvI36iu9lUsrSrvDHn6spnmSiq5jooyV6tq1VV69RC32byTh43h8otMx+r6I+Z\naK/g8TwX7bXh9Mid4iW+fjl8n1ICWb57xLBOm4zqse20Tbmj8+qKdnS9q8PhcTw5tumSm0/OHMxz\n0Za+uzx3sX1t0Zxurr1ZxvspWiZYWZbsbT0QK7KLrZVZJFaqt5vbezNOTg9J/FaZeJns93wCvLwb\nT/GJn92uGHldIBowAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADuAPA67F9H4l\nqMW20VvO3yRWW97T4fC4rXJHSMtI/WGhVlue3b473K2KzMML4+62tujG9pnozXaOSOVFMnVbmq1t\ntrJRW5E7wwvUxTvCyY6CHOt7moxz6Wh9PxTzYaT61h8x1MbZK/OH0zTf+Fxf6I/htj45vL9WgLMn\nmvbPFvocGWO9L7fq85p5maw9d7VYvE4JkmPu2if3eW0+PasdFNOnxfF1Y2hlykRsmY+LJ0MZjZXa\neq2eyi8oQTO0KLdZWzPRjWu6VaqtHR73g0bcI0sf0Q8Nkq93wqNuFaWP+XDTDDytwBowAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAef9q8HNpcGaI60vtPyl56k9Iew49j8ThGe\nPwxFv0l4zH2U26fDfTYiyJljvsjf4sm6vJ1hrXjq2MkqLdZEVbgbMx0auGdmzNt6iHN1Ub5af6of\nTdPG2nxx6Vj+HzaaTm1+nx/iyVj930ysbViPRrj45vL9SAuyc7j1efguqj+jd4/T33rD3HEcPj8O\n1GP8WOY/Z4TTT7sKadHhbcsZnaCJ3TPZk6VdrKbTutmP0U2nqgrGOsr8deiuI2X09EqKM1dt3uuG\nf/jdN/06/wAPE546S9rwud+Gaaf+XH8NMMPK2wGjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAABrcRp4nDtRWPPHP8PCYusPoWSvNjtX1iYfPuWaXtX8MzCuvjfw32siu8ptXoxi\n0wy5t4YulReqmazu2skbquURWFInddM7VYRGyL291KFnCcfj8e0le/Lbmn8n0N4b2Ur4nHLWmPsY\n5e5a5+OXyXugBZmiY3iY9Xz7NjnTa3Ph/BeYj5PoTxftFg8Hjk2iOmWkW/Psrr418V5WrWd2faFc\nV2jdnEMXWxntupmN7NiYU27iWML6dVMVnddjgVqMsdHr+CW5uE6f4Rt+7yuSsTDv+zWXn0WTHP3L\n/tK+GHl+O0A1c4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8Dn93W56/wDM\nt/L3z59qp24jn+OS38lnpr4r7ZxHQ2TEstt3PXUrt27K57rr1VT0BjKnJPRbMqMs7QlV2fYvHvrd\nVknyrEfu9m8f7FZI8fVU85iJewbT45NfQBKo817W4eulzxHaZrL0rje09ItwqbfhtBVs3leai8RD\nKLw1sduesL606dWFdsZT1jdhNeq6K9DlhCVUU6s4jZnt1YzAhnM71dH2bycmszY/K1d/0c6OzY4R\nfwuK4p8rTstn6z8k7HrwGzkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHz3\nVxvr80/8y38voTwGpj/F5/8AqT/JfjTx/WVeyY6FPspc9dZPVXaOq2WEwIUTVRmjo2rNfLHRI3vZ\nDJycXtX8dZh7t879nsnhcbwz23tt+r6I2nxyb+gCVBzuPY/E4PqI9K7ui19fTxNBnp60n+Aj5/pJ\n3jZu1aOnnltMNussdfXbm+l3ZM9URHREdZVXTuT1Nk7boQiOkJw28PU47/htEp5eivJPLMTCZ9Vv\nx7mJ3iJ9UqNHk8XR4b+tIXuhxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD\nweqjbWZ4/wCZP8vePCaz/wDIaiP+Zb+UX408f0r9lOxWOifJhXWjfyYWllPRXYQxnrCrJHRd3YZI\n6A1NJecHEsN/S0T+76bE7xE+r5dk93LW3pL6ZpMni6PDf8VIn9m2fjm8s9rgFmQxvHNS0esbMiew\nPnHLyai9fS0w2aNfUTtrs3+uf5bGPqy068fF227KtSsdFlKqNGMV6myyY6sbdIQI8tlOWOi6Jhhk\nj3RD0vA8nicMx9etZmHRcT2Zyb6XNT8N9/2dt0T449T2AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAHhdfG3E9TH9cvdPEcXjk4zqI/q3L8aeP6xr2TsxpLOekMK6mFo6qpXSrm\nOqBixvHSVmzC4OfqK7S9/wAByeLwbTW9K7fo8Fqo6Paeyl+fglI/Da0NcMPK7QC7AAB8313TiOf/\nAKk/y2MHWrX4jG3E9R/1Lfyv0/aFNOrHxuU7LI7MMayGTVlHWUXhNe6Z6wIUsb9d1m20q7dkDpez\nN9tRqKT5xEvRvKez9+Xis1/FSYerb5+OTyf6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAB43j9eXjN/jWJ/Z7J5L2mry8Upb8VIF8f6aGOey2eynHvOy7bowrrYSxZSwQJ2YXZ\n92N4BoanrEvVexmTm4blr+HJ/aHltRHSXofYm/1Wrp5RaJaYY+X49WA0c4AD51xONuKan/qW/lbp\n+0MOLRtxbU/9SU4J7KadWPjep2WQrr2WRPRk1TvsndXMpiRCb9FNu0rbTuqvKBscCjfi9PhWZeue\nV9n434rafTHL1TfPxy+T/QAszAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmv\navHtfTZfnV6VxPajHzcNrf8ABeJFs/XnMcr4no18c+6vr2YadkY2YM57sEDLyY37Mo7MMnYGlqO0\nvQ+xNfqNVb1tEfs87qZ2rL0/sVX/AHdnt65P7Q0wx8vx6UBo5wAHz/jUbcX1PT78qtO2vaCnJxjP\n8Zif2amnnspp04+OjWejKJ6MKdmcMmyJn4m5ZHzEVPMwtJv0VZLbQDqezcb8RzT6Y/7vUPM+ytZt\nn1OTyiIh6Ztn45N/6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABocbxeLw\nnUR5xXm/Rvq8+OMuDJjntaswEeBxT0bNZ6NatZpNqz3rO0rqsdO3PxlaWEMpY+aqWXkryT0ZT2V3\n7A0dVPuy9f7G124NM/iyT/Z4zWT7sw957MYfB4Fp4/FE2/WWmGHldcBowAAeM9qKcvFeb8VIly9P\n0nq7ntbTbVYL+tJj93CwT76unR4/jo0nozhhTsy3Y1sWljM9Ce7HyQIm3RRlttVbaWrnt0Sh6n2U\nx8vD8mSfv3/h3XN4Bi8Lg2nj8Uc36y6TeOPXugCUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAPD8RxeBxXUU26Tbmj8+quro+02Lw+I4ssdslNvzhzazvDPbq8d7GW7Dfqz2VzG\n0s2qd+iu/Zn5Ksk9BVztX1mI8930zh2LwOHabH+HHWP2fNYp4+vwYvxXiP3fUqxtWIjyjZtj45/L\nfaQFmQADzftfj3w6fJ6WmHmsP23rvaqnNwqLfhvEvIYZ+sV038bo0noy36MK9oZQxrdMyrlnMbMZ\nQKrS1M07zEestq/RRjr4utwY/wAV4j91p9V18fQdJj8LR4ccfdpEfsuREbREJbuMAAAAAAAAAAAA\nBAJAAAAEAJEAJQAJQAJEAJQAJQAJEACUJAQlAJEAJQAJQJAAAEAJEAJBAAAJAABAJEJAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwvanDzaPFmjvjv8A\ntLztJ3h7HjGHx+FainnFeaPnHV4vFbeIU038VbHeGF+kso7Mb9mTdhKnLK3dRm7SIrHhGPxeP6Sv\n9cT/AHfSnz72Zx+J7Q45/BWZ/Z9BbZ+OXyfQBZQABzeP4/E4NqI9Ii36S8Ng/wAx9C4jTxOH6ivr\njn+Hz3B/mQi/GvjdCnWNlsdI2V07LIlg6USrt2ZzZXMoFV+zPhGLxeOaavpbm/RVltEN72Yx+Jxm\nb7dKUmf7L5+s9/HtRA2cqRACRACRACRACUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCQQCRACRACRCQBCQBCQB\nACRACRACRACRACL1i9LVntMbPATTwdRkxT3pea/u+gPE8Xx+DxrPHlaYt+qNfGvjvtXXsi0dOrKk\ndEXjZg6VMtbP2bMtXUdpEV0/Y2nNxbNf8OP+727xvsXH+N1U/wBEfy9k3nxyb+gCVQAGOWvNivX1\nrMPnGGOXNNfOJ2fSZ6w+dZKeHxDPX8N7R+6L8a+L63KdoZ7q6zvEMpnowdKJ6ywmWUyqvIKM0vQ+\nx+D6rU55+9aKx+TzWa36vbezmDwODYenW+95/Nphj5L6dQBo5wAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEiAAAEoA\nAAAAAAAAAAAAAEAkEAkRuAkQbgkQAkQAkQAkQAl5T2nx8nEMOT8dNv0l6pwfarHvpcGWPu32/WCr\nYvK4mOem6b9mGKd4Z3idmFdka0y1c892zfpMtLPaNpEV6D2Kj/Eauf6YeweQ9ieuTVz8K/3evbT4\n5NfQBKoAA8FxCvJxrUx/XMvevD8Zry8fz/Haf2RfjTx/6RSOnRMyypHu9kXjowrqVSrvPRnZVl6V\nkK0775MsUjvadn0nT4ow6bFijtSsVfPuFYvpPGtNTy54mfy6vorXDm8l9pEC7JIgBIgBIgBIgBIg\nBIgBIhIAgBIhIAgBIgBIIBIAAhIAhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAA\nAAAAAAAAABAJQkAEAAAAAAAAAAjc3BIjdG4Mkbo5kcwMjdhzHMDPc3V8xzAs3N1fMjmBZubq+Y5g\nWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmTzAz3N2HMnmBlu5ftFTx\nOEZJ/DMW/d0t2rxKni8N1FPWkiZ9eS08e7Cy8dGGn6UhZaJljXZGnmc3UT3dPP2cnUT78xCIV6j2\nH/8A9c/6f7vXPI+w8bU1U+vL/d63du5NfUiDcVSIAS8b7RV5eOb/AIqRL2TyXtNX/e2KfXH/AHlF\n+NPH/pr4+2xcxx0hFpY11K7R16KM32ZWz3UaidqSgrc9kcPicWyZJjfw6T+727y3sXh2xarN+K0V\nh6lvPjj3e0ASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJQAAAAAkQAkQAkAAAAAAAAAAAAAAA\nEgAAAAAAAAAAAAAAAAAAAAAgAAABKDcAN0bgkY8xzAyRux5kcwM9zdXNkTcFm6OZXzMeYFvMibKu\nZHMC2bo51U2RuC2bom6rc3BZzom6sBZzI52ADPnOdggFnMc6skFnMc6rc3BbznOp3RzAv50c6nml\nHMC/nOf4qOY5wX85zqOc5wbHOc7X5znBsc6edr85zg2ec52vzpi4NjmY5bROG+/bllVzsNTk5dLl\nn0pP8BHmMHWNmzt0aum8obm08vVjfrtnxztR0mXHzTvaZdjVRMTLkZo6yiFen9iZ2pqY/wBP93rN\n3kPY+/LfPX1rE/u9XzN3HfqzdO6vmTuIZ7m7Hc3Bnu8t7TR/vHBP9E/y9Pu837SV31umn+if5Rfi\n/j/01MMb1hjkrtKzBG0bMsmOZY11tOYamr6Und0LUc7XT7u3rJPqL8er9lcPhcFpbzyWm39v7O00\n+FYvA4Zpsc94xxu227jv1IAgAAAAAAAAABKAAAASgASgBIgBIgBIgBIhIAAAAAAAAAAAAAAAAAAC\nUACUJAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAg3AEbomQZbo3YzLGbAz3RNlc3YzcFs2YzdVN2\nM2Bdzom6nmNwW86JurTAMuY3REJ2BB1ZRVMVBhsbSsiqeUFXLucq3lTygp5TlXcpygp5TlXcpygp\n5TlXcqOUFXKjlXcrGYBXysdlswiYBVMdUTCyY6sZBWxlnMMZgGLGZZSwkDdHMiWO4MuY5mEyjcFn\nN1OdVzHMC3nTzqeY5gX85zqOZPMC+Lqdbk20eb/RKOZr8QybaK/XvtH7iZ9aGlp2luzT3fg19NHS\nOjbmPcYX67XH1XSZ9XIzRvMuzrK7zLkZYmYnciunb9lZ5dTk+OP+71cXeP8AZnJ/ip2nf3J/l6iL\n/Fu5L9bMWZczXi6YuIbEWTzKIuyiwLt3nuO25uI4a/hx7/rLuczg8TicvFLbfdpEK6+NPH/phhjo\nstLGkctUWnoxrrU3j1cnWTzZq1jzl1clo5Zcu8c+txR63iP3Tn6pv4+g4o5cVI9IiGe7CJ2iE7t3\nGyN2O6dwSINwSISAlAAlACRAAlAAlACRACRCQAAAAAAAAAASgASISAAAAAAAAAAAAACQAAAAAAAA\nAAAAAASAAAAAAAAAAAAAAAAIAAAQCAJljuljsCJlhMs9mOwMJYys5TkBVsjZdyHICrZPKt5E8oK4\nqmKrOVOwMIqyirPY2Bjyp2ZbAI2NmSARsbMgEbI2ZAMdjZICNkbMkSCNmOzJEgx2YyzljMAwlhKy\nWEwCuWErJhhMArlhLOWEgxljMpljIImWMyTKJA3N0IBO5vux3NwZbnMx3NwZczT4jf3MdPW27a3a\nfJOq1XNP2KdIRfi+J2trSYfcjeF+Wm1OicVeWIiN9kai8xjY12ORqultnI1Ecsujq79XP1FovWYI\nrTgeq+j8QrWZ+3Mx+r2UXeC0WG2Ti2kiN5mL807eUREvbzbaejefHJv62Iv8WUXa0WTFhVtRdlF2\nrz9WUXBtc7jR9dqc2T1ttHyhvZMvJitb0jdq6XHNcNenWVN3028U99WRj6Kb02be3Tq18/SN2Lpc\n3UdN9nOmZrqKX/DaJ/d0svvTLRzV3jomK6+Pd1vvWJj0ZczT0mXxNJht60hfFnQ4qu3N1cWTEgs3\nTur5k7gz3N2O5uDM3Y7m4MtxBuCQASIASIASAAAAAAACRCQAAAAAAAAEoSAAAAAAAAAAAlAAlCQA\nAAAAAAAAAAASAAAAAAAAAAAAIASgAAAEJAQJQCNkbMgGOyOVnsAw5TlZ7GwMOVPKy2NgY7GzIBGx\nskA2AAAAAAAAAAQkBAEghEskAxYzDPZGwK5hjMLJhjMAqmGEwumrCagomFcw2JqqtUFEsLLrV82F\no7gqljKyYYTGwMZRKUSCAQAboJnaN5Bjkneu0d5W4ccViIiOzHFWbTzNumP1Zarr8eeRMbxDW1Mx\nNO67NbkhzNVnmInqzaOZrL93JyZeV0M1++7S02jvxDWxhxx033tPpC8Z6rrezWjmZyazJG2/u03h\n2vFibTHoqvamiwVwY+nLGzV0+SZ1Mx8G0/45tOhzJ5lXMc3UVXRdlF1HP+iYsDPLPPy49/tz1+Te\npSIr0ho6ak5Ms5J8o2q6NImOrHV7XX488ypzTtHXo0s9t6zG7c1G1qz6ubeZiZ3UatXJG3yauSO7\ncvMTEx5tPLb3prPRMVr0HB8vicNxf0+7+kt+LOJwTJyY/Bnz3tH93X36N58cWvq6LSyiyndMSlC7\nmZcymLJiwLosmJVRLKLAtiU7q4lMSCzc3YxJuDMRuAlKAEgAAAlAkAAAAAABKAEgAAAAAJAAAAAA\nAAAAAAAEgAAAAAAAAAAAAAkAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAhIAAACAAAASgAAAAAAEAAAA\nhGzJAImGMwzQDDZjNVuyNgUTVhNGxysZqDVmiu1G5NN2M4waM0+DCaN2cbGcQNGaMZq3JxMJxA1J\nqx2bU4kU09slorWNwa20z02RXHbJbl26QvtFovbHWkxEdJt5y2MOHlr2U1W3jx+1hiw8vSO63lmI\nXRTaEWmtY6snRHO1VpmJ+DjavpSZl2s8b7y4HFcnh0n0gha5ebJN55KRM2mdoiPN6fh+kpwXh0Wy\nRHj5Otp/s5Ps1p62y31+em9aTMYt/OfVfxTiPjZ52naI7fBrI5t66xz5+a1rW7yx0eSL6iZjtEOX\nqNbSletom3lENjh2fbHzbbWt3iVozruc+5ztWubf4M4ybpQ2Oboyrva0Vjza8WdDR4OkXt3n9ldX\nkaePP9VtYqctYhdvt5oivTeCZ2YOxXk6ubqMfV0b9mrljfqlFcq88k7z2U5axeItDa1OPessuC8P\nya7XRWYnwqdbT/ZMilvIu4dpslNdixXja8Y5tt85djZdbDWnGOesRtXFtuw6T27No5Kx2OrKYQlC\nExKJgBnEpiyvdlEgsizKLKollFgWxLKJVRLKJBbEp3VxLKJBnuMWQJEbpBIAAAJAAAABIAAAAAAA\nlAJAAAAAAAAAAAAAASAAAAAAAAAAAAAJAAAABAJABAlAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAA\nAAABAJQAAAAgAABAAI2EoBGyJhkgGPKxmqxAKpownHC+YRMdN5BrTj67R3bOn01o7p01Iv71u89o\nb9a7LfBTfS1vWI2jf12VfQPSW8KX2mas+NC2iv6xMNfJpMnLtEbuuxtMRCtzF55NR5rPps1N/ctP\ny6uHreE6nXZ4pak48X3rT06fB7fNeI33cbX6mI32R/MWu7XF116aDSRhxbRERs8f499bkyZeeKae\nkzE2mdon81/tfxDLGOunwbzlzbx08oaHBvZHJlx48mrvaa94pu04y617576rNGLRRM0397JEd/lu\n9Dw/S3x4qxffo6mm4NjwUiKY4iI9Ib1dHFY6QIaNabbrYrLfrpJtaK1rMzPZb/s+05IpP59OyLeJ\nk7eNfRaOc1ue32I7fGXYpi5Y77M8OGMeOKxHSFsU3Y29deZMzirl6dlVvhLatCjJHeYQv1rXnps1\n8k9/VsW6qLVmZIi1rzitlvFKRvaZ2h6TSaenC9FFY+3brM+sqeG8Prp4+kZ+lvuxPkr1mqm95nfp\nDXM459676a2q1dsV7XietvNno78+CJn1cjX6mOeIm0bR33dfRU5NJjidt9t5afjG/V6JZ7I2QMNh\nnyo2BhsMuVG3wAhMSbbQRAMolnE+iuGUSCyJZRKuGUSCyJZK4llEgyZMYTuCUsYSCQASISAAAlCQ\nAAAAAAEoASCASAAAAAAAAAAAAlACRACQAAAAAAAAAEgCEoASCAAAAAAAAAAAAAAAAAAAAAAABAAA\nAAAAAAAISAIAAAAAAQAAACASgAAAQJAQAAhIDHZhln3do7z0WS18mWsajHjmes7pg3dNi5aRMNqO\nyvDHTpPRaigHZhN4hHRlaVN59JY3zRENLUavaO+yq0iNVlitJ6vNcR1MVi0zO0era1/Ea0rPvbz5\nPM5MWp45qvo2GZrhmfrsnpHpHzTCseEcM/2vrr8Q1Eb4qzy44nziPN63HpYiIiI7LNHoqabBTFii\nIpSNohuVxrKtWMEejPwY9G1FFmHB4mWJn7MdfnIM9JpIx15to5pbUaas/a6rqViI7MxPxqX0UT1r\nO3wVzpbR2hviP5i03Y5s6a879FNtHljydhExCv8AMTPJXBnRZbz0iG5ptFjwe/l96zctMVamTJtE\nyTMibu1VrdTzRMR0j0ed4lr64MVpm0RERvMz5NvX62uOJ69XhOKX1HH9bHDtFvNYnfJeOy0Z2ojX\n6jjnEq6fRUmccTvN/J9H0eKcOnx45neaxEbubwHgOHg+milI3vP2resu3Wu0JQmITsmISDHZHKz2\nJgFc1RMLJhGwK9iIZ7MZgEdgmAEwyiWCdwWRLKJVxKYsC2JTuriWUSDNlEsIlMAySx3SCRCQSIAS\nAAACRACQAAAAAAASIASAAAAAAAAAAAAAAACRACRACQASIAAAAAAAAAAAAAAAAAAAAAAAAQCUAAAA\nAAAAAAIAAAAAAAAQAAAAAACBICBICAAEJAQJQCJcLjuS2ny6fPG/LWdpd1o8T0X07SXx/e7wCdJx\nWa0jmneHQpxPDMdZmJfNtZm49weZrh0/j4o7VtSZ2+Uw0/8A7o49k92vBLc/ntFohFW9PqGXimOI\n6Tu1L8T3eCx6r2t1O3JwvHjifO99v7t/Bwf2l1PXU6rS6eJ8qUm8x+so5TsekzcSjbvs4mt4rzW5\nK2mbT0itesy2cHsvbvqtbmyz5xERWP2jd1tJwrTaONsOKtZ8585+cnDrzmn4Rq+IZObUROHD32n7\nVv8A0ej0uhxaXFGPFSK1j0bkY4jyZRVZVXFGUVWbGwKsk8mObekNrSW3pWf1a2aYjHbm7bNnQ1id\nPW0TvuDdhJEbQABMsLW2R0ZTMQrvfbz2YWzVhpanUxEd0dWkW5c8R5uXxDX1w4pnfr5Q19XxKuOJ\n2neXltVqtVxbV/RdJ715+1bypANfiOu1HENV9C0MTfNeesx2rD1PAeBYuE6aKx72W3W9/WVnBuB4\neF4dqRzZbdb5J72l160WVK02ZxCYhOwI23TsnY2BGxsnYBjsiYZsZBjMMZZSgGEolMsQDdG6NwZ7\npiVe6YkFsSziVMWZRILolMSriWUSCyJTuwhMSDMRCQSI3SAlACRCQAAEoAEoASAAAAAAAAACUACR\nACQAAAAAAAAAAAAASAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAABAAAAAAAAAAAAACBKAAAAAAAQ\nJQAAAhICEbJAYTWJ7wx8KvpC0BV4ceieWGewDHlNmWwCNjZICNhIDmcZredBecdpiY69FXCOLW+i\nUiZidukulmxxlx2paN4mNng+K4+I8Hy2yaTfl37TXetoCPfRxfp1qi3F48ofKMvtvxak8s6LDv61\nrZji9rPaLUf5PC+bfttS0q8q3p9W/wBrRMdpUZuKdN99nzvFqPbTVz7nD8OKs+do2/mW3h4D7Xaq\nZnPrtNpqz35aRaYOHY9Zk4pNt9rR+rl6zi+OnS+WN57Rv1lXp/YrNaYtruL6zNPnGO3hxP6O5w/2\nf0HDuun09Yv55Le9afznqcOvO4tBreMTHu30unnva0bWt8on+70nDuE4OHYYx4Kbesz3tPrMuhGO\nIjpDOKrK9YVpsyiGUQnYGOyUgI2SlAIEmwMWMs9kTAMJYzDOYRMArmGErZhhMArlHmzmGMwDE3Ts\nbAbs4swj5pgFkSziVcM4BZEsolXDKAZwyhjCYBkACQhIAAAAAAAJAAAAAAAAAAAAAAAAAAAShIAA\nAAAAAAJAAAAAAAAAAAAAABAJEAAAAAAAAAAAAAAAIEoBKAAAAAAAAAAAAAAABAlAAAAAAAIAAAAA\nBAkBAkBAkBAlACEgMZjdjbFW8bWrEx8YWANb6Fp+bfwab+vLDKMFK9qxH5L0bAr8OPRPKz2AY7J2\nSbAjYZAI2E7AIEgIEgIEgMdkSy2NgY7MdlmyNoBXsxmFuyNgVTVjNV3KjlBRNTlXTVHKCrlIqt5T\nlBhEMohlFerLlBjEMohMVTEARDKCITsAk2AEgAAAkAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAD/\n2Q==",y6=class{constructor(e){l(this,n6,void 0),l(this,r6,void 0),l(this,a6,void 0),l(this,s6,void 0),l(this,i6,void 0),l(this,o6,void 0),this.analyze=(...e)=>{if(!o(this,r6))return;let t=this.tf.engine().state.numTensors,n=o(this,n6);u(this,n6,t);let r=t-n;0!==r&&c(...e,r)},l(this,l6,e=>{if(!o(this,a6))return null;if(!e)return"input is not defined";if(this.tf.ENV.flags.IS_NODE&&!(e instanceof Ka))return"input must be a tensor";try{this.tf.getBackend()}catch(t){return"backend not loaded"}return null}),l(this,u6,async(e=!1)=>{var t;if(this.config.backend&&this.config.backend.length>0&&e||this.tf.getBackend()!==this.config.backend){let e=d();if(this.state="backend",this.config.backend&&this.config.backend.length>0){if("undefined"==typeof window&&"undefined"!=typeof WorkerGlobalScope&&this.config.debug&&c("running inside web worker"),this.tf.ENV.flags.IS_BROWSER&&"tensorflow"===this.config.backend&&(this.config.backend="webgl"),this.tf.ENV.flags.IS_NODE&&("webgl"===this.config.backend||"humangl"===this.config.backend)&&(this.config.backend="tensorflow"),this.config.debug&&c("setting backend:",this.config.backend),"wasm"===this.config.backend){if(this.config.debug&&c("wasm path:",this.config.wasmPath),void 0===(null==(t=this.tf)?void 0:t.setWasmPaths))throw new Error("Human: WASM backend is not loaded");this.tf.setWasmPaths(this.config.wasmPath);let e=await this.tf.env().getAsync("WASM_HAS_SIMD_SUPPORT"),n=await this.tf.env().getAsync("WASM_HAS_MULTITHREAD_SUPPORT");this.config.debug&&c(`wasm execution: ${e?"SIMD":"no SIMD"} ${n?"multithreaded":"singlethreaded"}`),this.config.debug&&!e&&c("warning: wasm simd support is not enabled")}"humangl"===this.config.backend&&function(){if(!nl(o3.name)){try{o3.canvas="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(o3.width,o3.height):document.createElement("canvas")}catch(Ya){return void c("error: cannot create canvas:",Ya)}try{o3.gl=o3.canvas.getContext("webgl2",o3.webGLattr)}catch(Ya){return void c("error: cannot get WebGL2 context:",Ya)}try{vU(2,o3.gl)}catch(Ya){return void c("error: cannot set WebGL2 context:",Ya)}try{let e=new XG(o3.gl);al(o3.name,()=>new dX(e),o3.priority)}catch(Ya){return void c("error: cannot register WebGL backend:",Ya)}try{ca("webgl").forEach(e=>{da({...e,backendName:o3.name})})}catch(Ya){return void c("error: cannot update WebGL backend registration:",Ya)}try{Qe.set("WEBGL_VERSION",2)}catch(Ya){return void c("error: cannot set WebGL backend flags:",Ya)}(function(){let e=o3.gl;!e||(o3.extensions=e.getSupportedExtensions())})(),c("backend registered:",o3.name)}}();try{await this.tf.setBackend(this.config.backend)}catch(n){c("error: cannot set backend:",this.config.backend,n)}}if(this.tf.enableProdMode(),"webgl"===this.tf.getBackend()||"humangl"===this.tf.getBackend()){this.tf.ENV.set("CHECK_COMPUTATION_FOR_ERRORS",!1),this.tf.ENV.set("WEBGL_CPU_FORWARD",!0),this.tf.ENV.set("WEBGL_PACK_DEPTHWISECONV",!0),void 0!==this.config.deallocate&&this.config.deallocate&&(c("changing webgl: WEBGL_DELETE_TEXTURE_THRESHOLD:",!0),this.tf.ENV.set("WEBGL_DELETE_TEXTURE_THRESHOLD",0));let e=await this.tf.backend().getGPGPUContext().gl;this.config.debug&&c(`gl version:${e.getParameter(e.VERSION)} renderer:${e.getParameter(e.RENDERER)}`)}await this.tf.ready(),this.performance.backend=Math.trunc(d()-e)}}),this.next=e=>function(e){var t,n,r,a,s,i,o,l,u,h,c,d,p,f,m,g,y,b,x,v,A;let w=Date.now()-e.timestamp,k=w<1e3?8-Math.log(w):1;if(f6.canvas=e.canvas,f6.body&&e.body.length===f6.body.length)for(let S=0;S<e.body.length;S++){let t=e.body[S].box.map((e,t)=>((k-1)*f6.body[S].box[t]+e)/k),n=e.body[S].boxRaw.map((e,t)=>((k-1)*f6.body[S].boxRaw[t]+e)/k),r=e.body[S].keypoints.map((e,t)=>({score:e.score,part:e.part,position:[f6.body[S].keypoints[t]?((k-1)*f6.body[S].keypoints[t].position[0]+e.position[0])/k:e.position[0],f6.body[S].keypoints[t]?((k-1)*f6.body[S].keypoints[t].position[1]+e.position[1])/k:e.position[1]],positionRaw:[f6.body[S].keypoints[t]?((k-1)*f6.body[S].keypoints[t].positionRaw[0]+e.positionRaw[0])/k:e.position[0],f6.body[S].keypoints[t]?((k-1)*f6.body[S].keypoints[t].positionRaw[1]+e.positionRaw[1])/k:e.position[1]]}));f6.body[S]={...e.body[S],box:t,boxRaw:n,keypoints:r}}else f6.body=JSON.parse(JSON.stringify(e.body));if(f6.hand&&e.hand.length===f6.hand.length)for(let S=0;S<e.hand.length;S++){let t=e.hand[S].box.map((e,t)=>((k-1)*f6.hand[S].box[t]+e)/k),n=e.hand[S].boxRaw.map((e,t)=>((k-1)*f6.hand[S].boxRaw[t]+e)/k),r=e.hand[S].keypoints.map((e,t)=>e.map((e,n)=>((k-1)*f6.hand[S].keypoints[t][n]+e)/k)),a=Object.keys(e.hand[S].annotations),s={};for(let i of a)s[i]=e.hand[S].annotations[i].map((e,t)=>e.map((e,n)=>((k-1)*f6.hand[S].annotations[i][t][n]+e)/k));f6.hand[S]={...e.hand[S],box:t,boxRaw:n,keypoints:r,annotations:s}}else f6.hand=JSON.parse(JSON.stringify(e.hand));if(f6.face&&e.face.length===f6.face.length)for(let S=0;S<e.face.length;S++){let w=e.face[S].box.map((e,t)=>((k-1)*f6.face[S].box[t]+e)/k),I=e.face[S].boxRaw.map((e,t)=>((k-1)*f6.face[S].boxRaw[t]+e)/k),_={matrix:[0,0,0,0,0,0,0,0,0],angle:{roll:0,yaw:0,pitch:0},gaze:{bearing:0,strength:0}};_.matrix=null==(t=e.face[S].rotation)?void 0:t.matrix,_.angle={roll:((k-1)*((null==(r=null==(n=f6.face[S].rotation)?void 0:n.angle)?void 0:r.roll)||0)+((null==(s=null==(a=e.face[S].rotation)?void 0:a.angle)?void 0:s.roll)||0))/k,yaw:((k-1)*((null==(o=null==(i=f6.face[S].rotation)?void 0:i.angle)?void 0:o.yaw)||0)+((null==(u=null==(l=e.face[S].rotation)?void 0:l.angle)?void 0:u.yaw)||0))/k,pitch:((k-1)*((null==(c=null==(h=f6.face[S].rotation)?void 0:h.angle)?void 0:c.pitch)||0)+((null==(p=null==(d=e.face[S].rotation)?void 0:d.angle)?void 0:p.pitch)||0))/k},_.gaze={bearing:((k-1)*((null==(m=null==(f=f6.face[S].rotation)?void 0:f.gaze)?void 0:m.bearing)||0)+((null==(y=null==(g=e.face[S].rotation)?void 0:g.gaze)?void 0:y.bearing)||0))/k,strength:((k-1)*((null==(x=null==(b=f6.face[S].rotation)?void 0:b.gaze)?void 0:x.strength)||0)+((null==(A=null==(v=e.face[S].rotation)?void 0:v.gaze)?void 0:A.strength)||0))/k},f6.face[S]={...e.face[S],rotation:_,box:w,boxRaw:I}}else f6.face=JSON.parse(JSON.stringify(e.face));if(f6.object&&e.object.length===f6.object.length)for(let S=0;S<e.object.length;S++){let t=e.object[S].box.map((e,t)=>((k-1)*f6.object[S].box[t]+e)/k),n=e.object[S].boxRaw.map((e,t)=>((k-1)*f6.object[S].boxRaw[t]+e)/k);f6.object[S]={...e.object[S],box:t,boxRaw:n}}else f6.object=JSON.parse(JSON.stringify(e.object));if(e.persons){let t=e.persons;if(f6.persons&&t.length===f6.persons.length)for(let e=0;e<t.length;e++)f6.persons[e].box=t[e].box.map((t,n)=>((k-1)*f6.persons[e].box[n]+t)/k);else f6.persons=JSON.parse(JSON.stringify(t))}return e.gesture&&(f6.gesture=e.gesture),e.performance&&(f6.performance=e.performance),f6}(e||this.result),l(this,h6,async e=>{if(0===this.config.cacheSensitivity)return!1;let t=e.resizeBilinear([Math.trunc(e.shape[1]/32),Math.trunc(e.shape[2]/32)]),n=t.dataSync(),r=0;for(let i=0;i<n.length/3;i++)r+=n[3*i+2];t.dispose();let a=100*(Math.max(r,o(this,i6))/Math.min(r,o(this,i6))-1);u(this,i6,r);let s=a<Math.max(this.config.cacheSensitivity,o(this,o6));return u(this,o6,a>10*this.config.cacheSensitivity?0:a),s}),l(this,c6,async()=>{let e,t,n=(e,t="application/octet-stream")=>fetch(`data:${t};base64,${e}`).then(e=>e.blob());switch(this.config.warmup){case"face":e=await n(m6);break;case"full":e=await n(g6);break;default:e=null}if(e){let n=await createImageBitmap(e);t=await this.detect(n,this.config),n.close()}return t}),l(this,d6,async()=>new Promise(e=>{let t,n=0;switch(this.config.warmup){case"face":n=256,t="data:image/jpeg;base64,"+m6;break;case"full":case"body":n=1200,t="data:image/jpeg;base64,"+g6;break;default:t=null}let r=new Image;r.onload=async()=>{let t="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(n,n):document.createElement("canvas");t.width=r.naturalWidth,t.height=r.naturalHeight;let a=t.getContext("2d");null==a||a.drawImage(r,0,0);let s=await this.detect(t,this.config);e(s)},t?r.src=t:e(null)})),l(this,p6,async()=>{let e,t=e=>Buffer.from(e,"base64");return"face"===this.config.warmup&&(e=t(m6)),("body"===this.config.warmup||"full"===this.config.warmup)&&(e=t(g6)),e?void(this.config.debug&&c("Warmup tfjs-node not loaded")):null}),this.config=p(f,e||{}),this.tf=m,this.draw=B4,this.version="2.0.3",this.state="idle",u(this,n6,0),u(this,r6,!1),u(this,a6,!1),u(this,s6,!0),u(this,o6,0),this.performance={backend:0,load:0,image:0,frames:0,cached:0,changed:0,total:0,draw:0},this.models={face:null,posenet:null,blazepose:null,efficientpose:null,movenet:null,handpose:null,age:null,gender:null,emotion:null,embedding:null,nanodet:null,centernet:null,faceres:null,segmentation:null},this.image=e=>N4(e,this.config),this.faceTriangulation=L3,this.faceUVMap=V3,this.sysinfo=function(){let e,t;if("undefined"!=typeof navigator){let n=navigator.userAgent.match(/\(([^()]+)\)/g);if(n&&n[0]){let r=n[0].match(/\(([^()]+)\)/g);e=r?r[0].replace(/\(|\)/g,""):"",t=navigator.userAgent.replace(n[0],""),e[1]&&(t=t.replace(n[1],"")),t=t.replace(/  /g," ")}}else"undefined"!=typeof process&&(e=`${process.platform} ${process.arch}`,t="NodeJS "+process.version);return{platform:e,agent:t}}(),u(this,i6,1)}similarity(e,t){return U3(e,t)}segmentation(e,t){return async function(e,t,n){var r;if(F4)return null;F4=!0,M4||await R4(n);let a=N4(e,n),s=await D4(a);if(Xo(a.tensor),t&&s){let e=N4(t,n),i=e.canvas;Xo(e.tensor);let o=a.canvas,l=null==(r=o.getContext("2d"))?void 0:r.getImageData(0,0,o.width,o.height).data,u="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(o.width,o.height):document.createElement("canvas");u.width=o.width,u.height=o.height;let h=u.getContext("2d");h.globalCompositeOperation="copy",h.drawImage(i,0,0,u.width,u.height);let c=h.getImageData(0,0,u.width,u.height);for(let t=0;t<u.width*u.height;t++)c.data[4*t+0]=(255-s[4*t+0])/255*c.data[4*t+0]+s[4*t+0]/255*l[4*t+0],c.data[4*t+1]=(255-s[4*t+1])/255*c.data[4*t+1]+s[4*t+1]/255*l[4*t+1],c.data[4*t+2]=(255-s[4*t+2])/255*c.data[4*t+2]+s[4*t+2]/255*l[4*t+2],c.data[4*t+3]=(255-s[4*t+3])/255*c.data[4*t+3]+s[4*t+3]/255*l[4*t+3];h.putImageData(c,0,0),a.canvas=u}return F4=!1,a.canvas}(e,t,this.config)}enhance(e){return G3(e)}match(e,t,n=0){return function(e,t,n=0){let r={similarity:0,name:"",source:"",embedding:[]};if(!(e&&t&&Array.isArray(e)&&Array.isArray(t)))return r;for(let a of t)if(a.embedding&&a.name){let t=U3(e,a.embedding);t>n&&t>r.similarity&&(r={...a,similarity:t})}return r}(e,t,n)}async load(e){this.state="load";let t=d();e&&(this.config=p(this.config,e)),o(this,s6)&&(this.config.debug&&c("version: "+this.version),this.config.debug&&c("tfjs version: "+this.tf.version_core),this.config.debug&&c("platform:",this.sysinfo.platform),this.config.debug&&c("agent:",this.sysinfo.agent),await o(this,u6).call(this,!0),this.tf.ENV.flags.IS_BROWSER&&(this.config.debug&&c("configuration:",this.config),this.config.debug&&c("tf flags:",this.tf.ENV.flags))),await async function(e){e.config.async?[e.models.face,e.models.emotion,e.models.handpose,e.models.posenet,e.models.blazepose,e.models.efficientpose,e.models.movenet,e.models.nanodet,e.models.centernet,e.models.faceres,e.models.segmentation]=await Promise.all([e.models.face||(e.config.face.enabled?P3(e.config):null),e.models.emotion||(e.config.face.enabled&&e.config.face.emotion.enabled?e5(e.config):null),e.models.handpose||(e.config.hand.enabled?B5(e.config):null),e.models.posenet||(e.config.body.enabled&&e.config.body.modelPath.includes("posenet")?v5(e.config):null),e.models.blazepose||(e.config.body.enabled&&e.config.body.modelPath.includes("blazepose")?U5(e.config):null),e.models.efficientpose||(e.config.body.enabled&&e.config.body.modelPath.includes("efficientpose")?e4(e.config):null),e.models.movenet||(e.config.body.enabled&&e.config.body.modelPath.includes("movenet")?h4(e.config):null),e.models.nanodet||(e.config.object.enabled&&e.config.object.modelPath.includes("nanodet")?y4(e.config):null),e.models.centernet||(e.config.object.enabled&&e.config.object.modelPath.includes("centernet")?w4(e.config):null),e.models.faceres||(e.config.face.enabled&&e.config.face.description.enabled?H3(e.config):null),e.models.segmentation||(e.config.segmentation.enabled?R4(e.config):null)]):(e.config.face.enabled&&!e.models.face&&(e.models.face=await P3(e.config)),e.config.face.enabled&&e.config.face.emotion.enabled&&!e.models.emotion&&(e.models.emotion=await e5(e.config)),e.config.hand.enabled&&!e.models.handpose&&(e.models.handpose=await B5(e.config)),e.config.body.enabled&&!e.models.posenet&&e.config.body.modelPath.includes("posenet")&&(e.models.posenet=await v5(e.config)),e.config.body.enabled&&!e.models.blazepose&&e.config.body.modelPath.includes("blazepose")&&(e.models.blazepose=await U5(e.config)),e.config.body.enabled&&!e.models.efficientpose&&e.config.body.modelPath.includes("efficientpose")&&(e.models.efficientpose=await U5(e.config)),e.config.body.enabled&&!e.models.movenet&&e.config.body.modelPath.includes("movenet")&&(e.models.movenet=await h4(e.config)),e.config.object.enabled&&!e.models.nanodet&&e.config.object.modelPath.includes("nanodet")&&(e.models.nanodet=await y4(e.config)),e.config.object.enabled&&!e.models.centernet&&e.config.object.modelPath.includes("centernet")&&(e.models.centernet=await w4(e.config)),e.config.face.enabled&&e.config.face.description.enabled&&!e.models.faceres&&(e.models.faceres=await H3(e.config)),e.config.segmentation.enabled&&!e.models.segmentation&&(e.models.segmentation=await R4(e.config)))}(this),o(this,s6)&&(this.config.debug&&c("tf engine state:",this.tf.engine().state.numBytes,"bytes",this.tf.engine().state.numTensors,"tensors"),u(this,s6,!1));let n=Math.trunc(d()-t);n>(this.performance.load||0)&&(this.performance.load=n)}async detect(e,t){return new Promise(async n=>{let r,a;this.state="config",this.config=p(this.config,t),this.state="check";let s=o(this,l6).call(this,e);s&&(c(s,e),n({error:s}));let i=d();await o(this,u6).call(this),await this.load(),r=d();let l,u,h,f,m=N4(e,this.config);if(this.performance.image=Math.trunc(d()-r),this.analyze("Get Image:"),this.config.segmentation.enabled&&m&&m.tensor&&(this.analyze("Start Segmentation:"),this.state="run:segmentation",r=d(),await D4(m),a=Math.trunc(d()-r),a>0&&(this.performance.segmentation=a),m.canvas&&(m.tensor.dispose(),m=N4(m.canvas,this.config)),this.analyze("End Segmentation:")),!m||!m.tensor)return c("could not convert input to tensor"),void n({error:"could not convert input to tensor"});r=d(),this.config.skipFrame=await o(this,h6).call(this,m.tensor),this.performance.frames||(this.performance.frames=0),this.performance.cached||(this.performance.cached=0),this.performance.frames++,this.config.skipFrame&&this.performance.cached++,this.performance.changed=Math.trunc(d()-r),this.analyze("Check Changed:"),this.config.async?(l=this.config.face.enabled?z4(this,m.tensor):[],this.performance.face&&delete this.performance.face):(this.state="run:face",r=d(),l=this.config.face.enabled?await z4(this,m.tensor):[],a=Math.trunc(d()-r),a>0&&(this.performance.face=a)),this.analyze("Start Body:"),this.config.async?(this.config.body.modelPath.includes("posenet")?u=this.config.body.enabled?x5(m.tensor,this.config):[]:this.config.body.modelPath.includes("blazepose")?u=this.config.body.enabled?G5(m.tensor,this.config):[]:this.config.body.modelPath.includes("efficientpose")?u=this.config.body.enabled?n4(m.tensor,this.config):[]:this.config.body.modelPath.includes("movenet")&&(u=this.config.body.enabled?c4(m.tensor,this.config):[]),this.performance.body&&delete this.performance.body):(this.state="run:body",r=d(),this.config.body.modelPath.includes("posenet")?u=this.config.body.enabled?await x5(m.tensor,this.config):[]:this.config.body.modelPath.includes("blazepose")?u=this.config.body.enabled?await G5(m.tensor,this.config):[]:this.config.body.modelPath.includes("efficientpose")?u=this.config.body.enabled?await n4(m.tensor,this.config):[]:this.config.body.modelPath.includes("movenet")&&(u=this.config.body.enabled?await c4(m.tensor,this.config):[]),a=Math.trunc(d()-r),a>0&&(this.performance.body=a)),this.analyze("End Body:"),this.analyze("Start Hand:"),this.config.async?(h=this.config.hand.enabled?V5(m.tensor,this.config):[],this.performance.hand&&delete this.performance.hand):(this.state="run:hand",r=d(),h=this.config.hand.enabled?await V5(m.tensor,this.config):[],a=Math.trunc(d()-r),a>0&&(this.performance.hand=a)),this.analyze("End Hand:"),this.analyze("Start Object:"),this.config.async?(this.config.object.modelPath.includes("nanodet")?f=this.config.object.enabled?b4(m.tensor,this.config):[]:this.config.object.modelPath.includes("centernet")&&(f=this.config.object.enabled?k4(m.tensor,this.config):[]),this.performance.object&&delete this.performance.object):(this.state="run:object",r=d(),this.config.object.modelPath.includes("nanodet")?f=this.config.object.enabled?await b4(m.tensor,this.config):[]:this.config.object.modelPath.includes("centernet")&&(f=this.config.object.enabled?await k4(m.tensor,this.config):[]),a=Math.trunc(d()-r),a>0&&(this.performance.object=a)),this.analyze("End Object:"),this.config.async&&([l,u,h,f]=await Promise.all([l,u,h,f]));let g=[];this.config.gesture.enabled&&(r=d(),g=[...$4(l),...P4(u),...V4(h),...L4(l)],this.config.async?this.performance.gesture&&delete this.performance.gesture:this.performance.gesture=Math.trunc(d()-r)),this.performance.total=Math.trunc(d()-i),this.state="idle",this.result={face:l,body:u,hand:h,gesture:g,object:f,performance:this.performance,canvas:m.canvas,timestamp:Date.now(),get persons(){var e;return function(e,t,n,r,a){var s,i,o,l,u,h,c,d,p,f,m,g,y,b,x,v;let A=0,w=[];for(let k of e){let e={id:A++,face:k,body:null,hands:{left:null,right:null},gestures:[],box:[0,0,0,0]};for(let n of t)k.box[0]>n.box[0]&&k.box[0]<n.box[0]+n.box[2]&&k.box[1]+k.box[3]>n.box[1]&&k.box[1]+k.box[3]<n.box[1]+n.box[3]&&(e.body=n);if(e.body)for(let t of n)t.box[0]+t.box[2]>e.body.box[0]&&t.box[0]+t.box[2]<e.body.box[0]+e.body.box[2]&&t.box[1]+t.box[3]>e.body.box[1]&&t.box[1]+t.box[3]<e.body.box[1]+e.body.box[3]&&e.hands&&(e.hands.left=t),t.box[0]<e.body.box[0]+e.body.box[2]&&t.box[0]>e.body.box[0]&&t.box[1]+t.box[3]>e.body.box[1]&&t.box[1]+t.box[3]<e.body.box[1]+e.body.box[3]&&e.hands&&(e.hands.right=t);for(let t of r)void 0!==t.face&&t.face===k.id?null==(s=e.gestures)||s.push(t):void 0!==t.iris&&t.iris===k.id?null==(i=e.gestures)||i.push(t):void 0!==t.body&&t.body===(null==(o=e.body)?void 0:o.id)?null==(l=e.gestures)||l.push(t):void 0!==t.hand&&t.hand===(null==(h=null==(u=e.hands)?void 0:u.left)?void 0:h.id)?null==(c=e.gestures)||c.push(t):void 0!==t.hand&&t.hand===(null==(p=null==(d=e.hands)?void 0:d.right)?void 0:p.id)&&(null==(f=e.gestures)||f.push(t));let S=[],I=[],_=e=>{e&&4===e.length&&(S.push(e[0],e[0]+e[2]),I.push(e[1],e[1]+e[3]))};_(null==(m=e.face)?void 0:m.box),_(null==(g=e.body)?void 0:g.box),_(null==(b=null==(y=e.hands)?void 0:y.left)?void 0:b.box),_(null==(v=null==(x=e.hands)?void 0:x.right)?void 0:v.box);let E=Math.min(...S),T=Math.min(...I);e.box=[E,T,Math.max(...S)-E,Math.max(...I)-T],a&&4===a.length&&(e.boxRaw=[e.box[0]/a[2],e.box[1]/a[1],e.box[2]/a[2],e.box[3]/a[1]]),w.push(e)}return w}(l,u,h,g,null==(e=null==m?void 0:m.tensor)?void 0:e.shape)}},Xo(m.tensor),n(this.result)})}async warmup(e){let t,n=d();if(e&&(this.config=p(this.config,e)),!this.config.warmup||"none"===this.config.warmup)return{error:"null"};t="function"==typeof createImageBitmap?await o(this,c6).call(this):"undefined"!=typeof Image?await o(this,d6).call(this):await o(this,p6).call(this);let r=d();return this.config.debug&&c("Warmup",this.config.warmup,Math.round(r-n),"ms",t),t}};n6=new WeakMap,r6=new WeakMap,a6=new WeakMap,s6=new WeakMap,i6=new WeakMap,o6=new WeakMap,l6=new WeakMap,u6=new WeakMap,h6=new WeakMap,c6=new WeakMap,d6=new WeakMap,p6=new WeakMap},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PqYM:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("HDdC"),a=n("D0XW"),s=n("Y7HM"),i=n("z+Ro");function o(e=0,t,n){let o=-1;return Object(s.a)(t)?o=Number(t)<1?1:Number(t):Object(i.a)(t)&&(n=t),Object(i.a)(n)||(n=a.a),new r.a(t=>{const r=Object(s.a)(e)?e:+e-n.now();return n.schedule(l,r,{index:0,period:o,subscriber:t})})}function l(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},R0Ic:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"j",function(){return i}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return m});class r{}class a{}const s="*";function i(e,t){return{type:7,name:e,definitions:t,options:{}}}function o(e,t=null){return{type:4,styles:t,timings:e}}function l(e,t=null){return{type:2,steps:e,options:t}}function u(e){return{type:6,styles:e,offset:null}}function h(e,t,n){return{type:0,name:e,styles:t,options:n}}function c(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function d(e){Promise.resolve(null).then(e)}class p{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){d(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class f{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const a=this.players.length;0==a?d(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==a&&this._onFinish()}),e.onDestroy(()=>{++n==a&&this._onDestroy()}),e.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const m="!"},RxGz:function(e,t,n){"use strict";(function(e,r,a,s){n.d(t,"a",function(){return x});var i=n("mrSG"),o=n("4xwX"),l=n("NhtI"),u=n("db83"),h=n("PqYM"),c=n("fXoL"),d=n("aceb"),p=n("ofXK");const f=["imageI"],m=["imageII"];function g(e,t){if(1&e&&(c.Wb(0,"nb-alert",11),c.Wb(1,"p",12),c.Wb(2,"b"),c.yc(3,"VALIDATION"),c.Vb(),c.Vb(),c.Wb(4,"p",13),c.yc(5),c.Vb(),c.Vb()),2&e){const e=c.ec();let t;c.kc("outline",null!==(t=e.statuses[e.comparisonMessageCode])&&void 0!==t?t:"basic"),c.Eb(5),c.Ac(" ",e.comparisonMessages[e.comparisonMessageCode]," ")}}function y(e,t){if(1&e&&c.Rb(0,"img",14,15),2&e){const e=c.ec();c.kc("src",e.image1,c.sc)}}function b(e,t){if(1&e&&c.Rb(0,"img",14,16),2&e){const e=c.ec();c.kc("src",e.image2,c.sc)}}let x=(()=>{class t{constructor(e,t){this.dialogService=e,this.cd=t,this.humanConfig={modelBasePath:"./models/",face:{detector:{rotation:!0,skipFrames:0,maxDetected:1},description:{enabled:!0,skipFrames:0},emotion:{enabled:!1},iris:{enabled:!0}},body:{enabled:!1},gesture:{enabled:!1},filter:{flip:!1},hand:{enabled:!1},videoOptimized:!1,backend:"webgl"},this.workers=[],this.closeness=0,this.human=new l.a(this.humanConfig),this.comparisonMessages=["No Match!","Not Sure!","Match!","Loading"],this.statuses=["danger","warning","success","info"]}ngOnInit(){return Object(i.a)(this,void 0,void 0,function*(){this.workers.push(new Worker(e,void 0)),this.workers.push(new Worker(r,void 0)),this.workers.push(new Worker(a,void 0)),this.workers.push(new Worker(s,void 0))})}setPhoto(e){return Object(i.a)(this,void 0,void 0,function*(){const t=yield this.dialogService.open(o.a).onClose.toPromise();if(!t)return;1===e&&(this.image1=t),2===e&&(this.image2=t),this.comparisonMessageCode=3,this.cd.detectChanges();const n=yield this.checkSimilarity();this.closeness=n,0===n||n<40?this.comparisonMessageCode=0:n>40&&n<=50?this.comparisonMessageCode=1:n>50&&(this.comparisonMessageCode=2),this.cd.detectChanges()})}checkSimilarity(){var e,t,n;return Object(i.a)(this,void 0,void 0,function*(){if(!this.image1||!this.image2)return 0;let r=0,a=0;const[s,i,o,l]=yield this.workerDetections([this.imageElement1.nativeElement,this.imageElement2.nativeElement]);return this.cd.detectChanges(),r=100*this.human.similarity(null===(e=s.face[0])||void 0===e?void 0:e.embedding,null===(t=i.face[0])||void 0===t?void 0:t.embedding),a=null!==(n=100*this.getSimilarityFaceApi(o,l))&&void 0!==n?n:0,console.log(r,a),r&&a?(r+a)/2:r+a})}getSimilarityFaceApi(e,t){return(null==e?void 0:e.descriptor)&&(null==t?void 0:t.descriptor)?1-u.a(Array.from(e.descriptor),Array.from(t.descriptor)):0}imageDataInit(e){return Object(i.a)(this,void 0,void 0,function*(){return yield Object(h.a)(1).toPromise(),e.map(e=>{const t=new OffscreenCanvas(e.width,e.height),n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),{imageData:n.getImageData(0,0,t.width,t.height),canvas:t}})})}workerDetections(e){return Object(i.a)(this,void 0,void 0,function*(){const t=yield this.imageDataInit(e);return Promise.all([...this.humanWorkerExec(t),...this.faceApiExec(t)])})}humanWorkerExec(e){return e.map((e,t)=>new Promise(n=>{this.workers[t].onmessage=({data:e})=>{n(e)},this.workers[t].postMessage({image:e.imageData.data.buffer,width:e.canvas.width,height:e.canvas.height,config:this.humanConfig},[e.imageData.data.buffer.slice(0)])}))}faceApiExec(e){return e.map((e,t)=>new Promise(n=>{this.workers[t+2].onmessage=({data:e})=>{n(e)},this.workers[t+2].postMessage({image:e.imageData.data.buffer,width:e.canvas.width,height:e.canvas.height,config:this.humanConfig},[e.imageData.data.buffer.slice(0)])}))}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(d.t),c.Qb(c.h))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-compare"]],viewQuery:function(e,t){if(1&e&&(c.Bc(f,5),c.Bc(m,5)),2&e){let e;c.nc(e=c.dc())&&(t.imageElement1=e.first),c.nc(e=c.dc())&&(t.imageElement2=e.first)}},decls:29,vars:3,consts:[[1,"container","h-100"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"col-12","text-center"],[1,"col-6","mt-4","mx-auto"],["role","alert",3,"outline",4,"ngIf"],[1,"col-6","text-center"],["size",""],[1,"col-12","pt-3"],[2,"min-height","330px !important"],["style"," width: 300px;","alt","",3,"src",4,"ngIf"],["nbButton","","fullWidth","","status","primary","hero","",3,"click"],["role","alert",3,"outline"],[1,"alert-title"],[1,"paragraph-2"],["alt","",2,"width","300px",3,"src"],["imageI",""],["imageII",""]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"h1"),c.yc(4," Similarity Comparison "),c.Vb(),c.Wb(5,"div",3),c.wc(6,g,6,2,"nb-alert",4),c.Vb(),c.Vb(),c.Wb(7,"div",5),c.Wb(8,"nb-card",6),c.Wb(9,"nb-card-header"),c.Wb(10,"div",7),c.Wb(11,"h6"),c.yc(12,"Photo I"),c.Vb(),c.Vb(),c.Vb(),c.Wb(13,"nb-card-body",8),c.wc(14,y,2,1,"img",9),c.Vb(),c.Wb(15,"nb-card-footer"),c.Wb(16,"button",10),c.cc("click",function(){return t.setPhoto(1)}),c.yc(17,"Set Photo"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"div",5),c.Wb(19,"nb-card",6),c.Wb(20,"nb-card-header"),c.Wb(21,"div",7),c.Wb(22,"h6"),c.yc(23,"Photo II"),c.Vb(),c.Vb(),c.Vb(),c.Wb(24,"nb-card-body",8),c.wc(25,b,2,1,"img",9),c.Vb(),c.Wb(26,"nb-card-footer"),c.Wb(27,"button",10),c.cc("click",function(){return t.setPhoto(2)}),c.yc(28,"Set Photo"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Eb(6),c.kc("ngIf",t.comparisonMessageCode>=0),c.Eb(8),c.kc("ngIf",t.image1),c.Eb(11),c.kc("ngIf",t.image2))},directives:[p.o,d.n,d.p,d.m,d.o,d.h,d.f],styles:["img[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}"]}),t})()}).call(this,n("uOdT"),n("nZ9l"),n("H2ws"),n("keYA"))},SeVD:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("ngJS"),a=n("NJ4a"),s=n("Lhse"),i=n("kJWO"),o=n("I55L"),l=n("c2HN"),u=n("XoHu");const h=e=>{if(e&&"function"==typeof e[i.a])return h=e,e=>{const t=h[i.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(o.a)(e))return Object(r.a)(e);if(Object(l.a)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a.a),e);if(e&&"function"==typeof e[s.a])return t=e,e=>{const n=t[s.a]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=Object(u.a)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,h}},SpAZ:function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",function(){return r})},VRyK:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("HDdC"),a=n("z+Ro"),s=n("bHdf"),i=n("yCtX");function o(...e){let t=Number.POSITIVE_INFINITY,n=null,o=e[e.length-1];return Object(a.a)(o)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof o&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.a?e[0]:Object(s.a)(t)(Object(i.a)(e,n))}},WMd4:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("EY2u"),a=n("LRne"),s=n("z6cu");let i=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})()},Wr5T:function(e,t){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document,t=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(window,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(window,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(r){var a=r.element,s=i(a),o=this._rootContainsTarget(a),l=r.entry,u=e&&o&&this._computeTargetAndRootIntersection(a,t),h=r.entry=new n({time:window.performance&&performance.now&&performance.now(),target:a,boundingClientRect:s,rootBounds:t,intersectionRect:u});l?e&&o?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=window.getComputedStyle(t).display){for(var r,a,s,o,u,h,c,d,p=i(t),f=l(t),m=!1;!m;){var g=null,y=1==f.nodeType?window.getComputedStyle(f):{};if("none"==y.display)return;if(f==this.root||f==e?(m=!0,g=n):f!=e.body&&f!=e.documentElement&&"visible"!=y.overflow&&(g=i(f)),g&&(r=g,a=p,s=Math.max(r.top,a.top),o=Math.min(r.bottom,a.bottom),u=Math.max(r.left,a.left),d=o-s,!(p=(c=(h=Math.min(r.right,a.right))-u)>=0&&d>=0&&{top:s,bottom:o,left:u,right:h,width:c,height:d})))break;f=l(f)}return p}},r.prototype._getRootRect=function(){var t;if(this.root)t=i(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var a=0;a<this.thresholds.length;a++){var s=this.thresholds[a];if(s==n||s==r||s<n!=s<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||o(e,this.root)},r.prototype._rootContainsTarget=function(t){return o(this.root||e,t)},r.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},r.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=r,window.IntersectionObserverEntry=n}function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect;this.intersectionRatio=n?Number((r.width*r.height/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n,r,a,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,a=null,function(){a||(a=setTimeout(function(){n(),a=null},r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function i(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(e,t){for(var n=t;n;){if(n==e)return!0;n=l(n)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}()},XNiG:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return h});var r=n("HDdC"),a=n("7o/Q"),s=n("quSY"),i=n("9ppp"),o=n("Ylt2"),l=n("2QA8");class u extends a.a{constructor(e){super(e),this.destination=e}}let h=(()=>{class e extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.a](){return new u(this)}lift(e){const t=new c(this,this);return t.operator=e,t}next(e){if(this.closed)throw new i.a;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let a=0;a<n;a++)r[a].next(e)}}error(e){if(this.closed)throw new i.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let a=0;a<n;a++)r[a].error(e);this.observers.length=0}complete(){if(this.closed)throw new i.a;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new i.a;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new i.a;return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.isStopped?(e.complete(),s.a.EMPTY):(this.observers.push(e),new o.a(this,e))}asObservable(){const e=new r.a;return e.source=this,e}}return e.create=(e,t)=>new c(e,t),e})();class c extends h{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.a.EMPTY}}},XoHu:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",function(){return r})},Y3Y3:function(e,t,n){e.exports=n.p+"6.02e4bfa3a2c47015cd11.worker.js"},Y7HM:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("DH7j");function a(e){return!Object(r.a)(e)&&e-parseFloat(e)+1>=0}},Ylt2:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("quSY");class a extends r.a{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},ZLzc:function(e,t,n){e.exports=n.p+"7.c5834f6e46203765e484.worker.js"},ZtdT:function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,(function(t){return e[t]}).bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./package/src/index.js")}({"./node_modules/classnames/dedupe.js":function(e,t,n){var r;!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,r=0;r<n;++r)a(e,t[r])}e.prototype=Object.create(null);var n={}.hasOwnProperty,r=/\s+/;function a(e,a){if(a){var s=typeof a;"string"===s?function(e,t){for(var n=t.split(r),a=n.length,s=0;s<a;++s)e[n[s]]=!0}(e,a):Array.isArray(a)?t(e,a):"object"===s?function(e,t){for(var r in t)n.call(t,r)&&(e[r]=!!t[r])}(e,a):"number"===s&&function(e,t){e[t]=!0}(e,a)}}return function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=new e;t(s,r);var i=[];for(var o in s)s[o]&&i.push(o);return i.join(" ")}}();void 0!==e&&e.exports?(n.default=n,e.exports=n):void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)}()},"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./package/src/animation.scss":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n.eva-animation {\n  animation-duration: 1s;\n  animation-fill-mode: both; }\n\n.eva-infinite {\n  animation-iteration-count: infinite; }\n\n.eva-icon-shake {\n  animation-name: eva-shake; }\n\n.eva-icon-zoom {\n  animation-name: eva-zoomIn; }\n\n.eva-icon-pulse {\n  animation-name: eva-pulse; }\n\n.eva-icon-flip {\n  animation-name: eva-flipInY; }\n\n.eva-hover {\n  display: inline-block; }\n\n.eva-hover:hover .eva-icon-hover-shake, .eva-parent-hover:hover .eva-icon-hover-shake {\n  animation-name: eva-shake; }\n\n.eva-hover:hover .eva-icon-hover-zoom, .eva-parent-hover:hover .eva-icon-hover-zoom {\n  animation-name: eva-zoomIn; }\n\n.eva-hover:hover .eva-icon-hover-pulse, .eva-parent-hover:hover .eva-icon-hover-pulse {\n  animation-name: eva-pulse; }\n\n.eva-hover:hover .eva-icon-hover-flip, .eva-parent-hover:hover .eva-icon-hover-flip {\n  animation-name: eva-flipInY; }\n\n@keyframes eva-flipInY {\n  from {\n    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);\n    animation-timing-function: ease-in;\n    opacity: 0; }\n  40% {\n    transform: perspective(400px) rotate3d(0, 1, 0, -20deg);\n    animation-timing-function: ease-in; }\n  60% {\n    transform: perspective(400px) rotate3d(0, 1, 0, 10deg);\n    opacity: 1; }\n  80% {\n    transform: perspective(400px) rotate3d(0, 1, 0, -5deg); }\n  to {\n    transform: perspective(400px); } }\n\n@keyframes eva-shake {\n  from,\n  to {\n    transform: translate3d(0, 0, 0); }\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translate3d(-3px, 0, 0); }\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translate3d(3px, 0, 0); } }\n\n@keyframes eva-pulse {\n  from {\n    transform: scale3d(1, 1, 1); }\n  50% {\n    transform: scale3d(1.2, 1.2, 1.2); }\n  to {\n    transform: scale3d(1, 1, 1); } }\n\n@keyframes eva-zoomIn {\n  from {\n    opacity: 1;\n    transform: scale3d(0.5, 0.5, 0.5); }\n  50% {\n    opacity: 1; } }\n",""])},"./node_modules/css-loader/lib/css-base.js":function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */",s=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(s).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var s=this[a][0];"number"==typeof s&&(r[s]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},"./node_modules/isomorphic-style-loader/insertCss.js":function(e,t,n){"use strict";var r={};function a(e){e.forEach(function(e){if(--r[e]<=0){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}})}e.exports=function(e,t){for(var n,s=void 0===t?{}:t,i=s.replace,o=void 0!==i&&i,l=s.prepend,u=void 0!==l&&l,h=s.prefix,c=void 0===h?"s":h,d=[],p=0;p<e.length;p++){var f=e[p],m=f[1],g=f[2],y=f[3],b=""+c+f[0]+"-"+p;if(d.push(b),!r[b]||o){r[b]=1;var x=document.getElementById(b),v=!1;x||(v=!0,(x=document.createElement("style")).setAttribute("type","text/css"),x.id=b,g&&x.setAttribute("media",g));var A=m;y&&"function"==typeof btoa&&(A+="\n/*# sourceMappingURL=data:application/json;base64,"+(n=JSON.stringify(y),btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))+"*/"),A+="\n/*# sourceURL="+y.file+"?"+b+"*/"),"textContent"in x?x.textContent=A:x.styleSheet.cssText=A,v&&(u?document.head.insertBefore(x,document.head.childNodes[0]):document.head.appendChild(x))}else r[b]++}return a.bind(null,d)}},"./package-build/eva-icons.json":function(e){e.exports={activity:'<g data-name="Layer 2"><g data-name="activity"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M14.33 20h-.21a2 2 0 0 1-1.76-1.58L9.68 6l-2.76 6.4A1 1 0 0 1 6 13H3a1 1 0 0 1 0-2h2.34l2.51-5.79a2 2 0 0 1 3.79.38L14.32 18l2.76-6.38A1 1 0 0 1 18 11h3a1 1 0 0 1 0 2h-2.34l-2.51 5.79A2 2 0 0 1 14.33 20z"/></g></g>',"alert-circle":'<g data-name="Layer 2"><g data-name="alert-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 15a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm1-4a1 1 0 0 1-2 0V8a1 1 0 0 1 2 0z"/></g></g>',"alert-triangle":'<g data-name="Layer 2"><g data-name="alert-triangle"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zM12 17a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm1-4a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0z"/></g></g>',archive:'<g data-name="Layer 2"><g data-name="archive"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M18 3H6a3 3 0 0 0-2 5.22V18a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8.22A3 3 0 0 0 18 3zm-3 10.13a.87.87 0 0 1-.87.87H9.87a.87.87 0 0 1-.87-.87v-.26a.87.87 0 0 1 .87-.87h4.26a.87.87 0 0 1 .87.87zM18 7H6a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></g></g>',"arrow-back":'<g data-name="Layer 2"><g data-name="arrow-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"/></g></g>',"arrow-circle-down":'<g data-name="Layer 2"><g data-name="arrow-circle-down"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm3.69 11.86l-3 2.86a.49.49 0 0 1-.15.1.54.54 0 0 1-.16.1.94.94 0 0 1-.76 0 1 1 0 0 1-.33-.21l-3-3a1 1 0 0 1 1.42-1.42l1.29 1.3V8a1 1 0 0 1 2 0v5.66l1.31-1.25a1 1 0 0 1 1.38 1.45z"/></g></g>',"arrow-circle-left":'<g data-name="Layer 2"><g data-name="arrow-circle-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22 12a10 10 0 1 0-10 10 10 10 0 0 0 10-10zm-11.86 3.69l-2.86-3a.49.49 0 0 1-.1-.15.54.54 0 0 1-.1-.16.94.94 0 0 1 0-.76 1 1 0 0 1 .21-.33l3-3a1 1 0 0 1 1.42 1.42L10.41 11H16a1 1 0 0 1 0 2h-5.66l1.25 1.31a1 1 0 0 1-1.45 1.38z"/></g></g>',"arrow-circle-right":'<g data-name="Layer 2"><g data-name="arrow-circle-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M2 12A10 10 0 1 0 12 2 10 10 0 0 0 2 12zm11.86-3.69l2.86 3a.49.49 0 0 1 .1.15.54.54 0 0 1 .1.16.94.94 0 0 1 0 .76 1 1 0 0 1-.21.33l-3 3a1 1 0 0 1-1.42-1.42l1.3-1.29H8a1 1 0 0 1 0-2h5.66l-1.25-1.31a1 1 0 0 1 1.45-1.38z"/></g></g>',"arrow-circle-up":'<g data-name="Layer 2"><g data-name="arrow-circle-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 22A10 10 0 1 0 2 12a10 10 0 0 0 10 10zM8.31 10.14l3-2.86a.49.49 0 0 1 .15-.1.54.54 0 0 1 .16-.1.94.94 0 0 1 .76 0 1 1 0 0 1 .33.21l3 3a1 1 0 0 1-1.42 1.42L13 10.41V16a1 1 0 0 1-2 0v-5.66l-1.31 1.25a1 1 0 0 1-1.38-1.45z"/></g></g>',"arrow-down":'<g data-name="Layer 2"><g data-name="arrow-downward"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M12 17a1.72 1.72 0 0 1-1.33-.64l-4.21-5.1a2.1 2.1 0 0 1-.26-2.21A1.76 1.76 0 0 1 7.79 8h8.42a1.76 1.76 0 0 1 1.59 1.05 2.1 2.1 0 0 1-.26 2.21l-4.21 5.1A1.72 1.72 0 0 1 12 17z"/></g></g>',"arrow-downward":'<g data-name="Layer 2"><g data-name="arrow-down"><rect width="24" height="24" opacity="0"/><path d="M18.77 13.36a1 1 0 0 0-1.41-.13L13 16.86V5a1 1 0 0 0-2 0v11.86l-4.36-3.63a1 1 0 1 0-1.28 1.54l6 5 .15.09.13.07a1 1 0 0 0 .72 0l.13-.07.15-.09 6-5a1 1 0 0 0 .13-1.41z"/></g></g>',"arrow-forward":'<g data-name="Layer 2"><g data-name="arrow-forward"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M5 13h11.86l-3.63 4.36a1 1 0 0 0 1.54 1.28l5-6a1.19 1.19 0 0 0 .09-.15c0-.05.05-.08.07-.13A1 1 0 0 0 20 12a1 1 0 0 0-.07-.36c0-.05-.05-.08-.07-.13a1.19 1.19 0 0 0-.09-.15l-5-6A1 1 0 0 0 14 5a1 1 0 0 0-.64.23 1 1 0 0 0-.13 1.41L16.86 11H5a1 1 0 0 0 0 2z"/></g></g>',"arrow-ios-back":'<g data-name="Layer 2"><g data-name="arrow-ios-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.83 19a1 1 0 0 1-.78-.37l-4.83-6a1 1 0 0 1 0-1.27l5-6a1 1 0 0 1 1.54 1.28L10.29 12l4.32 5.36a1 1 0 0 1-.78 1.64z"/></g></g>',"arrow-ios-downward":'<g data-name="Layer 2"><g data-name="arrow-ios-downward"><rect width="24" height="24" opacity="0"/><path d="M12 16a1 1 0 0 1-.64-.23l-6-5a1 1 0 1 1 1.28-1.54L12 13.71l5.36-4.32a1 1 0 0 1 1.41.15 1 1 0 0 1-.14 1.46l-6 4.83A1 1 0 0 1 12 16z"/></g></g>',"arrow-ios-forward":'<g data-name="Layer 2"><g data-name="arrow-ios-forward"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10 19a1 1 0 0 1-.64-.23 1 1 0 0 1-.13-1.41L13.71 12 9.39 6.63a1 1 0 0 1 .15-1.41 1 1 0 0 1 1.46.15l4.83 6a1 1 0 0 1 0 1.27l-5 6A1 1 0 0 1 10 19z"/></g></g>',"arrow-ios-upward":'<g data-name="Layer 2"><g data-name="arrow-ios-upward"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 15a1 1 0 0 1-.64-.23L12 10.29l-5.37 4.32a1 1 0 0 1-1.41-.15 1 1 0 0 1 .15-1.41l6-4.83a1 1 0 0 1 1.27 0l6 5a1 1 0 0 1 .13 1.41A1 1 0 0 1 18 15z"/></g></g>',"arrow-left":'<g data-name="Layer 2"><g data-name="arrow-left"><rect width="24" height="24" opacity="0"/><path d="M13.54 18a2.06 2.06 0 0 1-1.3-.46l-5.1-4.21a1.7 1.7 0 0 1 0-2.66l5.1-4.21a2.1 2.1 0 0 1 2.21-.26 1.76 1.76 0 0 1 1.05 1.59v8.42a1.76 1.76 0 0 1-1.05 1.59 2.23 2.23 0 0 1-.91.2z"/></g></g>',"arrow-right":'<g data-name="Layer 2"><g data-name="arrow-right"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M10.46 18a2.23 2.23 0 0 1-.91-.2 1.76 1.76 0 0 1-1.05-1.59V7.79A1.76 1.76 0 0 1 9.55 6.2a2.1 2.1 0 0 1 2.21.26l5.1 4.21a1.7 1.7 0 0 1 0 2.66l-5.1 4.21a2.06 2.06 0 0 1-1.3.46z"/></g></g>',"arrow-up":'<g data-name="Layer 2"><g data-name="arrow-up"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M16.21 16H7.79a1.76 1.76 0 0 1-1.59-1 2.1 2.1 0 0 1 .26-2.21l4.21-5.1a1.76 1.76 0 0 1 2.66 0l4.21 5.1A2.1 2.1 0 0 1 17.8 15a1.76 1.76 0 0 1-1.59 1z"/></g></g>',"arrow-upward":'<g data-name="Layer 2"><g data-name="arrow-upward"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M5.23 10.64a1 1 0 0 0 1.41.13L11 7.14V19a1 1 0 0 0 2 0V7.14l4.36 3.63a1 1 0 1 0 1.28-1.54l-6-5-.15-.09-.13-.07a1 1 0 0 0-.72 0l-.13.07-.15.09-6 5a1 1 0 0 0-.13 1.41z"/></g></g>',"arrowhead-down":'<g data-name="Layer 2"><g data-name="arrowhead-down"><rect width="24" height="24" opacity="0"/><path d="M17.37 12.39L12 16.71l-5.36-4.48a1 1 0 1 0-1.28 1.54l6 5a1 1 0 0 0 1.27 0l6-4.83a1 1 0 0 0 .15-1.41 1 1 0 0 0-1.41-.14z"/><path d="M11.36 11.77a1 1 0 0 0 1.27 0l6-4.83a1 1 0 0 0 .15-1.41 1 1 0 0 0-1.41-.15L12 9.71 6.64 5.23a1 1 0 0 0-1.28 1.54z"/></g></g>',"arrowhead-left":'<g data-name="Layer 2"><g data-name="arrowhead-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M11.64 5.23a1 1 0 0 0-1.41.13l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63L7.29 12l4.48-5.37a1 1 0 0 0-.13-1.4z"/><path d="M14.29 12l4.48-5.37a1 1 0 0 0-1.54-1.28l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63z"/></g></g>',"arrowhead-right":'<g data-name="Layer 2"><g data-name="arrowhead-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M18.78 11.37l-4.78-6a1 1 0 0 0-1.41-.15 1 1 0 0 0-.15 1.41L16.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 13 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/><path d="M7 5.37a1 1 0 0 0-1.61 1.26L9.71 12l-4.48 5.36a1 1 0 0 0 .13 1.41A1 1 0 0 0 6 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 0-1.27z"/></g></g>',"arrowhead-up":'<g data-name="Layer 2"><g data-name="arrowhead-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M6.63 11.61L12 7.29l5.37 4.48A1 1 0 0 0 18 12a1 1 0 0 0 .77-.36 1 1 0 0 0-.13-1.41l-6-5a1 1 0 0 0-1.27 0l-6 4.83a1 1 0 0 0-.15 1.41 1 1 0 0 0 1.41.14z"/><path d="M12.64 12.23a1 1 0 0 0-1.27 0l-6 4.83a1 1 0 0 0-.15 1.41 1 1 0 0 0 1.41.15L12 14.29l5.37 4.48A1 1 0 0 0 18 19a1 1 0 0 0 .77-.36 1 1 0 0 0-.13-1.41z"/></g></g>',at:'<g data-name="Layer 2"><g data-name="at"><rect width="24" height="24" opacity="0"/><path d="M13 2a10 10 0 0 0-5 19.1 10.15 10.15 0 0 0 4 .9 10 10 0 0 0 6.08-2.06 1 1 0 0 0 .19-1.4 1 1 0 0 0-1.41-.19A8 8 0 1 1 12.77 4 8.17 8.17 0 0 1 20 12.22v.68a1.71 1.71 0 0 1-1.78 1.7 1.82 1.82 0 0 1-1.62-1.88V8.4a1 1 0 0 0-1-1 1 1 0 0 0-1 .87 5 5 0 0 0-3.44-1.36A5.09 5.09 0 1 0 15.31 15a3.6 3.6 0 0 0 5.55.61A3.67 3.67 0 0 0 22 12.9v-.68A10.2 10.2 0 0 0 13 2zm-1.82 13.09A3.09 3.09 0 1 1 14.27 12a3.1 3.1 0 0 1-3.09 3.09z"/></g></g>',"attach-2":'<g data-name="Layer 2"><g data-name="attach-2"><rect width="24" height="24" opacity="0"/><path d="M12 22a5.86 5.86 0 0 1-6-5.7V6.13A4.24 4.24 0 0 1 10.33 2a4.24 4.24 0 0 1 4.34 4.13v10.18a2.67 2.67 0 0 1-5.33 0V6.92a1 1 0 0 1 1-1 1 1 0 0 1 1 1v9.39a.67.67 0 0 0 1.33 0V6.13A2.25 2.25 0 0 0 10.33 4 2.25 2.25 0 0 0 8 6.13V16.3a3.86 3.86 0 0 0 4 3.7 3.86 3.86 0 0 0 4-3.7V6.13a1 1 0 1 1 2 0V16.3a5.86 5.86 0 0 1-6 5.7z"/></g></g>',attach:'<g data-name="Layer 2"><g data-name="attach"><rect width="24" height="24" opacity="0"/><path d="M9.29 21a6.23 6.23 0 0 1-4.43-1.88 6 6 0 0 1-.22-8.49L12 3.2A4.11 4.11 0 0 1 15 2a4.48 4.48 0 0 1 3.19 1.35 4.36 4.36 0 0 1 .15 6.13l-7.4 7.43a2.54 2.54 0 0 1-1.81.75 2.72 2.72 0 0 1-1.95-.82 2.68 2.68 0 0 1-.08-3.77l6.83-6.86a1 1 0 0 1 1.37 1.41l-6.83 6.86a.68.68 0 0 0 .08.95.78.78 0 0 0 .53.23.56.56 0 0 0 .4-.16l7.39-7.43a2.36 2.36 0 0 0-.15-3.31 2.38 2.38 0 0 0-3.27-.15L6.06 12a4 4 0 0 0 .22 5.67 4.22 4.22 0 0 0 3 1.29 3.67 3.67 0 0 0 2.61-1.06l7.39-7.43a1 1 0 1 1 1.42 1.41l-7.39 7.43A5.65 5.65 0 0 1 9.29 21z"/></g></g>',award:'<g data-name="Layer 2"><g data-name="award"><rect width="24" height="24" opacity="0"/><path d="M19 20.75l-2.31-9A5.94 5.94 0 0 0 18 8 6 6 0 0 0 6 8a5.94 5.94 0 0 0 1.34 3.77L5 20.75a1 1 0 0 0 1.48 1.11l5.33-3.13 5.68 3.14A.91.91 0 0 0 18 22a1 1 0 0 0 1-1.25zM12 4a4 4 0 1 1-4 4 4 4 0 0 1 4-4z"/></g></g>',backspace:'<g data-name="Layer 2"><g data-name="backspace"><rect width="24" height="24" opacity="0"/><path d="M20.14 4h-9.77a3 3 0 0 0-2 .78l-.1.11-6 7.48a1 1 0 0 0 .11 1.37l6 5.48a3 3 0 0 0 2 .78h9.77A1.84 1.84 0 0 0 22 18.18V5.82A1.84 1.84 0 0 0 20.14 4zm-3.43 9.29a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L14 13.41l-1.29 1.3a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.3-1.29-1.3-1.29a1 1 0 0 1 1.42-1.42l1.29 1.3 1.29-1.3a1 1 0 0 1 1.42 1.42L15.41 12z"/></g></g>',"bar-chart-2":'<g data-name="Layer 2"><g data-name="bar-chart-2"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M12 8a1 1 0 0 0-1 1v11a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/><path d="M19 4a1 1 0 0 0-1 1v15a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/><path d="M5 12a1 1 0 0 0-1 1v7a1 1 0 0 0 2 0v-7a1 1 0 0 0-1-1z"/></g></g>',"bar-chart":'<g data-name="Layer 2"><g data-name="bar-chart"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M12 4a1 1 0 0 0-1 1v15a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/><path d="M19 12a1 1 0 0 0-1 1v7a1 1 0 0 0 2 0v-7a1 1 0 0 0-1-1z"/><path d="M5 8a1 1 0 0 0-1 1v11a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g>',battery:'<g data-name="Layer 2"><g data-name="battery"><rect width="24" height="24" opacity="0"/><path d="M15.83 6H4.17A2.31 2.31 0 0 0 2 8.43v7.14A2.31 2.31 0 0 0 4.17 18h11.66A2.31 2.31 0 0 0 18 15.57V8.43A2.31 2.31 0 0 0 15.83 6z"/><path d="M21 9a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1z"/></g></g>',behance:'<g data-name="Layer 2"><g data-name="behance"><rect width="24" height="24" opacity="0"/><path d="M14.76 11.19a1 1 0 0 0-1 1.09h2.06a1 1 0 0 0-1.06-1.09z"/><path d="M9.49 12.3H8.26v1.94h1c1 0 1.44-.33 1.44-1s-.46-.94-1.21-.94z"/><path d="M10.36 10.52c0-.53-.35-.85-.95-.85H8.26v1.74h.85c.89 0 1.25-.32 1.25-.89z"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zM9.7 15.2H7V8.7h2.7c1.17 0 1.94.61 1.94 1.6a1.4 1.4 0 0 1-1.12 1.43A1.52 1.52 0 0 1 12 13.37c0 1.16-1 1.83-2.3 1.83zm3.55-6h3v.5h-3zM17 13.05h-3.3v.14a1.07 1.07 0 0 0 1.09 1.19.9.9 0 0 0 1-.63H17a2 2 0 0 1-2.17 1.55 2.15 2.15 0 0 1-2.36-2.3v-.44a2.11 2.11 0 0 1 2.28-2.25A2.12 2.12 0 0 1 17 12.58z"/></g></g>',"bell-off":'<g data-name="Layer 2"><g data-name="bell-off"><rect width="24" height="24" opacity="0"/><path d="M15.88 18.71l-.59-.59L14 16.78l-.07-.07L6.58 9.4 5.31 8.14a5.68 5.68 0 0 0 0 .59v4.67l-1.8 1.81A1.64 1.64 0 0 0 4.64 18H8v.34A3.84 3.84 0 0 0 12 22a3.88 3.88 0 0 0 4-3.22zM14 18.34A1.88 1.88 0 0 1 12 20a1.88 1.88 0 0 1-2-1.66V18h4z"/><path d="M7.13 4.3l1.46 1.46 9.53 9.53 2 2 .31.3a1.58 1.58 0 0 0 .45-.6 1.62 1.62 0 0 0-.35-1.78l-1.8-1.81V8.94a6.86 6.86 0 0 0-5.83-6.88 6.71 6.71 0 0 0-5.32 1.61 6.88 6.88 0 0 0-.58.54z"/><path d="M20.71 19.29L19.41 18l-2-2-9.52-9.53L6.42 5 4.71 3.29a1 1 0 0 0-1.42 1.42L5.53 7l1.75 1.7 7.31 7.3.07.07L16 17.41l.59.59 2.7 2.71a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',bell:'<g data-name="Layer 2"><g data-name="bell"><rect width="24" height="24" opacity="0"/><path d="M20.52 15.21l-1.8-1.81V8.94a6.86 6.86 0 0 0-5.82-6.88 6.74 6.74 0 0 0-7.62 6.67v4.67l-1.8 1.81A1.64 1.64 0 0 0 4.64 18H8v.34A3.84 3.84 0 0 0 12 22a3.84 3.84 0 0 0 4-3.66V18h3.36a1.64 1.64 0 0 0 1.16-2.79zM14 18.34A1.88 1.88 0 0 1 12 20a1.88 1.88 0 0 1-2-1.66V18h4z"/></g></g>',bluetooth:'<g data-name="Layer 2"><g data-name="bluetooth"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.63 12l4-3.79a1.14 1.14 0 0 0-.13-1.77l-4.67-3.23a1.17 1.17 0 0 0-1.21-.08 1.15 1.15 0 0 0-.62 1v6.2l-3.19-4a1 1 0 0 0-1.56 1.3L9.72 12l-3.5 4.43a1 1 0 0 0 .16 1.4A1 1 0 0 0 7 18a1 1 0 0 0 .78-.38L11 13.56v6.29A1.16 1.16 0 0 0 12.16 21a1.16 1.16 0 0 0 .67-.21l4.64-3.18a1.17 1.17 0 0 0 .49-.85 1.15 1.15 0 0 0-.34-.91zM13 5.76l2.5 1.73L13 9.85zm0 12.49v-4.07l2.47 2.38z"/></g></g>',"book-open":'<g data-name="Layer 2"><g data-name="book-open"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M21 4.34a1.24 1.24 0 0 0-1.08-.23L13 5.89v14.27l7.56-1.94A1.25 1.25 0 0 0 21.5 17V5.32a1.25 1.25 0 0 0-.5-.98z"/><path d="M11 5.89L4.06 4.11A1.27 1.27 0 0 0 3 4.34a1.25 1.25 0 0 0-.48 1V17a1.25 1.25 0 0 0 .94 1.21L11 20.16z"/></g></g>',book:'<g data-name="Layer 2"><g data-name="book"><rect width="24" height="24" opacity="0"/><path d="M19 3H7a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM7 19a1 1 0 0 1 0-2h11v2z"/></g></g>',bookmark:'<g data-name="Layer 2"><g data-name="bookmark"><rect width="24" height="24" opacity="0"/><path d="M6 21a1 1 0 0 1-.49-.13A1 1 0 0 1 5 20V5.33A2.28 2.28 0 0 1 7.2 3h9.6A2.28 2.28 0 0 1 19 5.33V20a1 1 0 0 1-.5.86 1 1 0 0 1-1 0l-5.67-3.21-5.33 3.2A1 1 0 0 1 6 21z"/></g></g>',briefcase:'<g data-name="Layer 2"><g data-name="briefcase"><rect width="24" height="24" opacity="0"/><path d="M7 21h10V7h-1V5.5A2.5 2.5 0 0 0 13.5 3h-3A2.5 2.5 0 0 0 8 5.5V7H7zm3-15.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h-4z"/><path d="M19 7v14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3z"/><path d="M5 7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3z"/></g></g>',browser:'<g data-name="Layer 2"><g data-name="browser"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-6 3a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 6a1 1 0 1 1-1 1 1 1 0 0 1 1-1zm11 12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-7h14z"/></g></g>',brush:'<g data-name="Layer 2"><g data-name="brush"><rect width="24" height="24" opacity="0"/><path d="M7.12 12.55a4 4 0 0 0-3.07 3.86v3.11a.47.47 0 0 0 .48.48l3.24-.06a3.78 3.78 0 0 0 3.44-2.2 3.65 3.65 0 0 0-4.09-5.19z"/><path d="M19.26 4.46a2.14 2.14 0 0 0-2.88.21L10 11.08a.47.47 0 0 0 0 .66L12.25 14a.47.47 0 0 0 .66 0l6.49-6.47a2.06 2.06 0 0 0 .6-1.47 2 2 0 0 0-.74-1.6z"/></g></g>',bulb:'<g data-name="Layer 2"><g data-name="bulb"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 7a5 5 0 0 0-3 9v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a5 5 0 0 0-3-9z"/><path d="M12 6a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1z"/><path d="M21 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M5 11H3a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M7.66 6.42L6.22 5a1 1 0 0 0-1.39 1.47l1.44 1.39a1 1 0 0 0 .73.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.06-1.41z"/><path d="M19.19 5.05a1 1 0 0 0-1.41 0l-1.44 1.37a1 1 0 0 0 0 1.41 1 1 0 0 0 .72.31 1 1 0 0 0 .69-.28l1.44-1.39a1 1 0 0 0 0-1.42z"/></g></g>',calendar:'<g data-name="Layer 2"><g data-name="calendar"><rect width="24" height="24" opacity="0"/><path d="M18 4h-1V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zM8 17a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm8 0h-4a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2zm3-6H5V7a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h1a1 1 0 0 1 1 1z"/></g></g>',camera:'<g data-name="Layer 2"><g data-name="camera"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="14" r="1.5"/><path d="M19 7h-3V5.5A2.5 2.5 0 0 0 13.5 3h-3A2.5 2.5 0 0 0 8 5.5V7H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-9-1.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h-4zm2 12a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5z"/></g></g>',car:'<g data-name="Layer 2"><g data-name="car"><rect width="24" height="24" opacity="0"/><path d="M21.6 11.22L17 7.52V5a1.91 1.91 0 0 0-1.81-2H3.79A1.91 1.91 0 0 0 2 5v10a2 2 0 0 0 1.2 1.88 3 3 0 1 0 5.6.12h6.36a3 3 0 1 0 5.64 0h.2a1 1 0 0 0 1-1v-4a1 1 0 0 0-.4-.78zM20 12.48V15h-3v-4.92zM7 18a1 1 0 1 1-1-1 1 1 0 0 1 1 1zm12 0a1 1 0 1 1-1-1 1 1 0 0 1 1 1z"/></g></g>',cast:'<g data-name="Layer 2"><g data-name="cast"><polyline points="24 24 0 24 0 0" opacity="0"/><path d="M18.4 3H5.6A2.7 2.7 0 0 0 3 5.78V7a1 1 0 0 0 2 0V5.78A.72.72 0 0 1 5.6 5h12.8a.72.72 0 0 1 .6.78v12.44a.72.72 0 0 1-.6.78H17a1 1 0 0 0 0 2h1.4a2.7 2.7 0 0 0 2.6-2.78V5.78A2.7 2.7 0 0 0 18.4 3z"/><path d="M3.86 14A1 1 0 0 0 3 15.17a1 1 0 0 0 1.14.83 2.49 2.49 0 0 1 2.12.72 2.52 2.52 0 0 1 .51 2.84 1 1 0 0 0 .48 1.33 1.06 1.06 0 0 0 .42.09 1 1 0 0 0 .91-.58A4.52 4.52 0 0 0 3.86 14z"/><path d="M3.86 10.08a1 1 0 0 0 .28 2 6 6 0 0 1 5.09 1.71 6 6 0 0 1 1.53 5.95 1 1 0 0 0 .68 1.26.9.9 0 0 0 .28 0 1 1 0 0 0 1-.72 8 8 0 0 0-8.82-10.2z"/><circle cx="4" cy="19" r="1"/></g></g>',charging:'<g data-name="Layer 2"><g data-name="charging"><rect width="24" height="24" opacity="0"/><path d="M11.28 13H7a1 1 0 0 1-.86-.5 1 1 0 0 1 0-1L9.28 6H4.17A2.31 2.31 0 0 0 2 8.43v7.14A2.31 2.31 0 0 0 4.17 18h4.25z"/><path d="M15.83 6h-4.25l-2.86 5H13a1 1 0 0 1 .86.5 1 1 0 0 1 0 1L10.72 18h5.11A2.31 2.31 0 0 0 18 15.57V8.43A2.31 2.31 0 0 0 15.83 6z"/><path d="M21 9a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1z"/></g></g>',"checkmark-circle-2":'<g data-name="Layer 2"><g data-name="checkmark-circle-2"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4.3 7.61l-4.57 6a1 1 0 0 1-.79.39 1 1 0 0 1-.79-.38l-2.44-3.11a1 1 0 0 1 1.58-1.23l1.63 2.08 3.78-5a1 1 0 1 1 1.6 1.22z"/></g></g>',"checkmark-circle":'<g data-name="Layer 2"><g data-name="checkmark-circle"><rect width="24" height="24" opacity="0"/><path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/><path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/></g></g>',"checkmark-square-2":'<g data-name="Layer 2"><g data-name="checkmark-square-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-1.7 6.61l-4.57 6a1 1 0 0 1-.79.39 1 1 0 0 1-.79-.38l-2.44-3.11a1 1 0 0 1 1.58-1.23l1.63 2.08 3.78-5a1 1 0 1 1 1.6 1.22z"/></g></g>',"checkmark-square":'<g data-name="Layer 2"><g data-name="checkmark-square"><rect width="24" height="24" opacity="0"/><path d="M20 11.83a1 1 0 0 0-1 1v5.57a.6.6 0 0 1-.6.6H5.6a.6.6 0 0 1-.6-.6V5.6a.6.6 0 0 1 .6-.6h9.57a1 1 0 1 0 0-2H5.6A2.61 2.61 0 0 0 3 5.6v12.8A2.61 2.61 0 0 0 5.6 21h12.8a2.61 2.61 0 0 0 2.6-2.6v-5.57a1 1 0 0 0-1-1z"/><path d="M10.72 11a1 1 0 0 0-1.44 1.38l2.22 2.33a1 1 0 0 0 .72.31 1 1 0 0 0 .72-.3l6.78-7a1 1 0 1 0-1.44-1.4l-6.05 6.26z"/></g></g>',checkmark:'<g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g>',"chevron-down":'<g data-name="Layer 2"><g data-name="chevron-down"><rect width="24" height="24" opacity="0"/><path d="M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z"/></g></g>',"chevron-left":'<g data-name="Layer 2"><g data-name="chevron-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z"/></g></g>',"chevron-right":'<g data-name="Layer 2"><g data-name="chevron-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z"/></g></g>',"chevron-up":'<g data-name="Layer 2"><g data-name="chevron-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z"/></g></g>',clipboard:'<g data-name="Layer 2"><g data-name="clipboard"><rect width="24" height="24" opacity="0"/><path d="M18 4v3a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3z"/><rect x="7" y="2" width="10" height="6" rx="1" ry="1"/></g></g>',clock:'<g data-name="Layer 2"><g data-name="clock"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4 11h-4a1 1 0 0 1-1-1V8a1 1 0 0 1 2 0v3h3a1 1 0 0 1 0 2z"/></g></g>',"close-circle":'<g data-name="Layer 2"><g data-name="close-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm2.71 11.29a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L12 13.41l-1.29 1.3a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.3-1.29-1.3-1.29a1 1 0 0 1 1.42-1.42l1.29 1.3 1.29-1.3a1 1 0 0 1 1.42 1.42L13.41 12z"/></g></g>',"close-square":'<g data-name="Layer 2"><g data-name="close-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-3.29 10.29a1 1 0 0 1 0 1.42 1 1 0 0 1-1.42 0L12 13.41l-1.29 1.3a1 1 0 0 1-1.42 0 1 1 0 0 1 0-1.42l1.3-1.29-1.3-1.29a1 1 0 0 1 1.42-1.42l1.29 1.3 1.29-1.3a1 1 0 0 1 1.42 1.42L13.41 12z"/></g></g>',close:'<g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"cloud-download":'<g data-name="Layer 2"><g data-name="cloud-download"><rect width="24" height="24" opacity="0"/><path d="M21.9 11c0-.11-.06-.22-.09-.33a4.17 4.17 0 0 0-.18-.57c-.05-.12-.12-.24-.18-.37s-.15-.3-.24-.44S21 9.08 21 9s-.2-.25-.31-.37-.21-.2-.32-.3L20 8l-.36-.24a3.68 3.68 0 0 0-.44-.23l-.39-.18a4.13 4.13 0 0 0-.5-.15 3 3 0 0 0-.41-.09h-.18A6 6 0 0 0 6.33 7h-.18a3 3 0 0 0-.41.09 4.13 4.13 0 0 0-.5.15l-.39.18a3.68 3.68 0 0 0-.44.23L4.05 8l-.37.31c-.11.1-.22.19-.32.3s-.21.25-.31.37-.18.23-.26.36-.16.29-.24.44-.13.25-.18.37a4.17 4.17 0 0 0-.18.57c0 .11-.07.22-.09.33A5.23 5.23 0 0 0 2 12a5.5 5.5 0 0 0 .09.91c0 .1.05.19.07.29a5.58 5.58 0 0 0 .18.58l.12.29a5 5 0 0 0 .3.56l.14.22a.56.56 0 0 0 .05.08L3 15a5 5 0 0 0 4 2 2 2 0 0 1 .59-1.41A2 2 0 0 1 9 15a1.92 1.92 0 0 1 1 .27V12a2 2 0 0 1 4 0v3.37a2 2 0 0 1 1-.27 2.05 2.05 0 0 1 1.44.61A2 2 0 0 1 17 17a5 5 0 0 0 4-2l.05-.05a.56.56 0 0 0 .05-.08l.14-.22a5 5 0 0 0 .3-.56l.12-.29a5.58 5.58 0 0 0 .18-.58c0-.1.05-.19.07-.29A5.5 5.5 0 0 0 22 12a5.23 5.23 0 0 0-.1-1z"/><path d="M14.31 16.38L13 17.64V12a1 1 0 0 0-2 0v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 21a1 1 0 0 0 .69-.28l3-2.9a1 1 0 1 0-1.38-1.44z"/><rect width="24" height="24" opacity="0"/><path d="M21.9 11c0-.11-.06-.22-.09-.33a4.17 4.17 0 0 0-.18-.57c-.05-.12-.12-.24-.18-.37s-.15-.3-.24-.44S21 9.08 21 9s-.2-.25-.31-.37-.21-.2-.32-.3L20 8l-.36-.24a3.68 3.68 0 0 0-.44-.23l-.39-.18a4.13 4.13 0 0 0-.5-.15 3 3 0 0 0-.41-.09h-.18A6 6 0 0 0 6.33 7h-.18a3 3 0 0 0-.41.09 4.13 4.13 0 0 0-.5.15l-.39.18a3.68 3.68 0 0 0-.44.23L4.05 8l-.37.31c-.11.1-.22.19-.32.3s-.21.25-.31.37-.18.23-.26.36-.16.29-.24.44-.13.25-.18.37a4.17 4.17 0 0 0-.18.57c0 .11-.07.22-.09.33A5.23 5.23 0 0 0 2 12a5.5 5.5 0 0 0 .09.91c0 .1.05.19.07.29a5.58 5.58 0 0 0 .18.58l.12.29a5 5 0 0 0 .3.56l.14.22a.56.56 0 0 0 .05.08L3 15a5 5 0 0 0 4 2 2 2 0 0 1 .59-1.41A2 2 0 0 1 9 15a1.92 1.92 0 0 1 1 .27V12a2 2 0 0 1 4 0v3.37a2 2 0 0 1 1-.27 2.05 2.05 0 0 1 1.44.61A2 2 0 0 1 17 17a5 5 0 0 0 4-2l.05-.05a.56.56 0 0 0 .05-.08l.14-.22a5 5 0 0 0 .3-.56l.12-.29a5.58 5.58 0 0 0 .18-.58c0-.1.05-.19.07-.29A5.5 5.5 0 0 0 22 12a5.23 5.23 0 0 0-.1-1z"/><path d="M14.31 16.38L13 17.64V12a1 1 0 0 0-2 0v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 21a1 1 0 0 0 .69-.28l3-2.9a1 1 0 1 0-1.38-1.44z"/></g></g>',"cloud-upload":'<g data-name="Layer 2"><g data-name="cloud-upload"><rect width="24" height="24" opacity="0"/><path d="M21.9 12c0-.11-.06-.22-.09-.33a4.17 4.17 0 0 0-.18-.57c-.05-.12-.12-.24-.18-.37s-.15-.3-.24-.44S21 10.08 21 10s-.2-.25-.31-.37-.21-.2-.32-.3L20 9l-.36-.24a3.68 3.68 0 0 0-.44-.23l-.39-.18a4.13 4.13 0 0 0-.5-.15 3 3 0 0 0-.41-.09L17.67 8A6 6 0 0 0 6.33 8l-.18.05a3 3 0 0 0-.41.09 4.13 4.13 0 0 0-.5.15l-.39.18a3.68 3.68 0 0 0-.44.23l-.36.3-.37.31c-.11.1-.22.19-.32.3s-.21.25-.31.37-.18.23-.26.36-.16.29-.24.44-.13.25-.18.37a4.17 4.17 0 0 0-.18.57c0 .11-.07.22-.09.33A5.23 5.23 0 0 0 2 13a5.5 5.5 0 0 0 .09.91c0 .1.05.19.07.29a5.58 5.58 0 0 0 .18.58l.12.29a5 5 0 0 0 .3.56l.14.22a.56.56 0 0 0 .05.08L3 16a5 5 0 0 0 4 2h3v-1.37a2 2 0 0 1-1 .27 2.05 2.05 0 0 1-1.44-.61 2 2 0 0 1 .05-2.83l3-2.9A2 2 0 0 1 12 10a2 2 0 0 1 1.41.59l3 3a2 2 0 0 1 0 2.82A2 2 0 0 1 15 17a1.92 1.92 0 0 1-1-.27V18h3a5 5 0 0 0 4-2l.05-.05a.56.56 0 0 0 .05-.08l.14-.22a5 5 0 0 0 .3-.56l.12-.29a5.58 5.58 0 0 0 .18-.58c0-.1.05-.19.07-.29A5.5 5.5 0 0 0 22 13a5.23 5.23 0 0 0-.1-1z"/><path d="M12.71 11.29a1 1 0 0 0-1.4 0l-3 2.9a1 1 0 1 0 1.38 1.44L11 14.36V20a1 1 0 0 0 2 0v-5.59l1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"code-download":'<g data-name="Layer 2"><g data-name="code-download"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M4.29 12l4.48-5.36a1 1 0 1 0-1.54-1.28l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63z"/><path d="M21.78 11.37l-4.78-6a1 1 0 0 0-1.56 1.26L19.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 16 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/><path d="M15.72 11.41a1 1 0 0 0-1.41 0L13 12.64V8a1 1 0 0 0-2 0v4.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .69-.28l3-2.9a1 1 0 0 0 .03-1.41z"/></g></g>',code:'<g data-name="Layer 2"><g data-name="code"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M8.64 5.23a1 1 0 0 0-1.41.13l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63L4.29 12l4.48-5.36a1 1 0 0 0-.13-1.41z"/><path d="M21.78 11.37l-4.78-6a1 1 0 0 0-1.41-.15 1 1 0 0 0-.15 1.41L19.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 16 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/></g></g>',collapse:'<g data-name="Layer 2"><g data-name="collapse"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z"/><path d="M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z"/></g></g>',"color-palette":'<g data-name="Layer 2"><g data-name="color-palette"><rect width="24" height="24" opacity="0"/><path d="M19.54 5.08A10.61 10.61 0 0 0 11.91 2a10 10 0 0 0-.05 20 2.58 2.58 0 0 0 2.53-1.89 2.52 2.52 0 0 0-.57-2.28.5.5 0 0 1 .37-.83h1.65A6.15 6.15 0 0 0 22 11.33a8.48 8.48 0 0 0-2.46-6.25zm-12.7 9.66a1.5 1.5 0 1 1 .4-2.08 1.49 1.49 0 0 1-.4 2.08zM8.3 9.25a1.5 1.5 0 1 1-.55-2 1.5 1.5 0 0 1 .55 2zM11 7a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 11 7zm5.75.8a1.5 1.5 0 1 1 .55-2 1.5 1.5 0 0 1-.55 2z"/></g></g>',"color-picker":'<g data-name="Layer 2"><g data-name="color-picker"><rect width="24" height="24" opacity="0"/><path d="M19.4 7.34L16.66 4.6A1.92 1.92 0 0 0 14 4.53l-2 2-1.29-1.24a1 1 0 0 0-1.42 1.42L10.53 8 5 13.53a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l5.58-5.58 1.24 1.24a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-1.24-1.24 2-2a1.92 1.92 0 0 0-.07-2.71zm-13 7.6L12 9.36l2.69 2.7-2.79 2.79"/></g></g>',compass:'<g data-name="Layer 2"><g data-name="compass"><rect width="24" height="24" opacity="0"/><polygon points="10.8 13.21 12.49 12.53 13.2 10.79 11.51 11.47 10.8 13.21"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm3.93 7.42l-1.75 4.26a1 1 0 0 1-.55.55l-4.21 1.7A1 1 0 0 1 9 16a1 1 0 0 1-.71-.31h-.05a1 1 0 0 1-.18-1l1.75-4.26a1 1 0 0 1 .55-.55l4.21-1.7a1 1 0 0 1 1.1.25 1 1 0 0 1 .26.99z"/></g></g>',copy:'<g data-name="Layer 2"><g data-name="copy"><rect width="24" height="24" opacity="0"/><path d="M18 9h-3V5.67A2.68 2.68 0 0 0 12.33 3H5.67A2.68 2.68 0 0 0 3 5.67v6.66A2.68 2.68 0 0 0 5.67 15H9v3a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-6a3 3 0 0 0-3-3zm-9 3v1H5.67a.67.67 0 0 1-.67-.67V5.67A.67.67 0 0 1 5.67 5h6.66a.67.67 0 0 1 .67.67V9h-1a3 3 0 0 0-3 3z"/></g></g>',"corner-down-left":'<g data-name="Layer 2"><g data-name="corner-down-left"><rect x=".05" y=".05" width="24" height="24" transform="rotate(-89.76 12.05 12.05)" opacity="0"/><path d="M20 6a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 1-.29.71A1 1 0 0 1 17 12H8.08l2.69-3.39a1 1 0 0 0-1.52-1.17l-4 5a1 1 0 0 0 0 1.25l4 5a1 1 0 0 0 .78.37 1 1 0 0 0 .62-.22 1 1 0 0 0 .15-1.41l-2.66-3.36h8.92a3 3 0 0 0 3-3z"/></g></g>',"corner-down-right":'<g data-name="Layer 2"><g data-name="corner-down-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19.78 12.38l-4-5a1 1 0 0 0-1.56 1.24l2.7 3.38H8a1 1 0 0 1-1-1V6a1 1 0 0 0-2 0v5a3 3 0 0 0 3 3h8.92l-2.7 3.38a1 1 0 0 0 .16 1.4A1 1 0 0 0 15 19a1 1 0 0 0 .78-.38l4-5a1 1 0 0 0 0-1.24z"/></g></g>',"corner-left-down":'<g data-name="Layer 2"><g data-name="corner-left-down"><rect width="24" height="24" opacity="0"/><path d="M18 5h-5a3 3 0 0 0-3 3v8.92l-3.38-2.7a1 1 0 0 0-1.24 1.56l5 4a1 1 0 0 0 1.24 0l5-4a1 1 0 1 0-1.24-1.56L12 16.92V8a1 1 0 0 1 1-1h5a1 1 0 0 0 0-2z"/></g></g>',"corner-left-up":'<g data-name="Layer 2"><g data-name="corner-left-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 17h-5a1 1 0 0 1-1-1V7.08l3.38 2.7A1 1 0 0 0 16 10a1 1 0 0 0 .78-.38 1 1 0 0 0-.16-1.4l-5-4a1 1 0 0 0-1.24 0l-5 4a1 1 0 0 0 1.24 1.56L10 7.08V16a3 3 0 0 0 3 3h5a1 1 0 0 0 0-2z"/></g></g>',"corner-right-down":'<g data-name="Layer 2"><g data-name="corner-right-down"><rect width="24" height="24" opacity="0"/><path d="M18.78 14.38a1 1 0 0 0-1.4-.16L14 16.92V8a3 3 0 0 0-3-3H6a1 1 0 0 0 0 2h5a1 1 0 0 1 1 1v8.92l-3.38-2.7a1 1 0 0 0-1.24 1.56l5 4a1 1 0 0 0 1.24 0l5-4a1 1 0 0 0 .16-1.4z"/></g></g>',"corner-right-up":'<g data-name="Layer 2"><g data-name="corner-right-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.62 8.22l-5-4a1 1 0 0 0-1.24 0l-5 4a1 1 0 0 0 1.24 1.56L12 7.08V16a1 1 0 0 1-1 1H6a1 1 0 0 0 0 2h5a3 3 0 0 0 3-3V7.08l3.38 2.7A1 1 0 0 0 18 10a1 1 0 0 0 .78-.38 1 1 0 0 0-.16-1.4z"/></g></g>',"corner-up-left":'<g data-name="Layer 2"><g data-name="corner-up-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M16 10H7.08l2.7-3.38a1 1 0 1 0-1.56-1.24l-4 5a1 1 0 0 0 0 1.24l4 5A1 1 0 0 0 9 17a1 1 0 0 0 .62-.22 1 1 0 0 0 .16-1.4L7.08 12H16a1 1 0 0 1 1 1v5a1 1 0 0 0 2 0v-5a3 3 0 0 0-3-3z"/></g></g>',"corner-up-right":'<g data-name="Layer 2"><g data-name="corner-up-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19.78 10.38l-4-5a1 1 0 0 0-1.56 1.24l2.7 3.38H8a3 3 0 0 0-3 3v5a1 1 0 0 0 2 0v-5a1 1 0 0 1 1-1h8.92l-2.7 3.38a1 1 0 0 0 .16 1.4A1 1 0 0 0 15 17a1 1 0 0 0 .78-.38l4-5a1 1 0 0 0 0-1.24z"/></g></g>',"credit-card":'<g data-name="Layer 2"><g data-name="credit-card"><rect width="24" height="24" opacity="0"/><path d="M19 5H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3zm-8 10H7a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2zm6 0h-2a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2zm3-6H4V8a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1z"/></g></g>',crop:'<g data-name="Layer 2"><g data-name="crop"><rect width="24" height="24" opacity="0"/><path d="M21 16h-3V8.56A2.56 2.56 0 0 0 15.44 6H8V3a1 1 0 0 0-2 0v3H3a1 1 0 0 0 0 2h3v7.44A2.56 2.56 0 0 0 8.56 18H16v3a1 1 0 0 0 2 0v-3h3a1 1 0 0 0 0-2zM8.56 16a.56.56 0 0 1-.56-.56V8h7.44a.56.56 0 0 1 .56.56V16z"/></g></g>',cube:'<g data-name="Layer 2"><g data-name="cube"><rect width="24" height="24" opacity="0"/><path d="M11.25 11.83L3 8.36v7.73a1.69 1.69 0 0 0 1 1.52L11.19 21h.06z"/><path d="M12 10.5l8.51-3.57a1.62 1.62 0 0 0-.51-.38l-7.2-3.37a1.87 1.87 0 0 0-1.6 0L4 6.55a1.62 1.62 0 0 0-.51.38z"/><path d="M12.75 11.83V21h.05l7.2-3.39a1.69 1.69 0 0 0 1-1.51V8.36z"/></g></g>',"diagonal-arrow-left-down":'<g data-name="Layer 2"><g data-name="diagonal-arrow-left-down"><rect width="24" height="24" opacity="0"/><path d="M17.71 6.29a1 1 0 0 0-1.42 0L8 14.59V9a1 1 0 0 0-2 0v8a1 1 0 0 0 1 1h8a1 1 0 0 0 0-2H9.41l8.3-8.29a1 1 0 0 0 0-1.42z"/></g></g>',"diagonal-arrow-left-up":'<g data-name="Layer 2"><g data-name="diagonal-arrow-left-up"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17.71 16.29L9.42 8H15a1 1 0 0 0 0-2H7.05a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1H7a1 1 0 0 0 1-1V9.45l8.26 8.26a1 1 0 0 0 1.42 0 1 1 0 0 0 .03-1.42z"/></g></g>',"diagonal-arrow-right-down":'<g data-name="Layer 2"><g data-name="diagonal-arrow-right-down"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M17 8a1 1 0 0 0-1 1v5.59l-8.29-8.3a1 1 0 0 0-1.42 1.42l8.3 8.29H9a1 1 0 0 0 0 2h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"/></g></g>',"diagonal-arrow-right-up":'<g data-name="Layer 2"><g data-name="diagonal-arrow-right-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 7.05a1 1 0 0 0-1-1L9 6a1 1 0 0 0 0 2h5.56l-8.27 8.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L16 9.42V15a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/></g></g>',"done-all":'<g data-name="Layer 2"><g data-name="done-all"><rect width="24" height="24" opacity="0"/><path d="M16.62 6.21a1 1 0 0 0-1.41.17l-7 9-3.43-4.18a1 1 0 1 0-1.56 1.25l4.17 5.18a1 1 0 0 0 .78.37 1 1 0 0 0 .83-.38l7.83-10a1 1 0 0 0-.21-1.41z"/><path d="M21.62 6.21a1 1 0 0 0-1.41.17l-7 9-.61-.75-1.26 1.62 1.1 1.37a1 1 0 0 0 .78.37 1 1 0 0 0 .78-.38l7.83-10a1 1 0 0 0-.21-1.4z"/><path d="M8.71 13.06L10 11.44l-.2-.24a1 1 0 0 0-1.43-.2 1 1 0 0 0-.15 1.41z"/></g></g>',download:'<g data-name="Layer 2"><g data-name="download"><rect width="24" height="24" opacity="0"/><rect x="4" y="18" width="16" height="2" rx="1" ry="1"/><rect x="3" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 5 18)"/><rect x="17" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 19 18)"/><path d="M12 15a1 1 0 0 1-.58-.18l-4-2.82a1 1 0 0 1-.24-1.39 1 1 0 0 1 1.4-.24L12 12.76l3.4-2.56a1 1 0 0 1 1.2 1.6l-4 3a1 1 0 0 1-.6.2z"/><path d="M12 13a1 1 0 0 1-1-1V4a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1z"/></g></g>',"droplet-off":'<g data-name="Layer 2"><g data-name="droplet-off"><rect width="24" height="24" opacity="0"/><path d="M19 16.14A7.73 7.73 0 0 0 17.34 8l-4.56-4.69a1 1 0 0 0-.71-.31 1 1 0 0 0-.72.3L8.74 5.92z"/><path d="M6 8.82a7.73 7.73 0 0 0 .64 9.9A7.44 7.44 0 0 0 11.92 21a7.34 7.34 0 0 0 4.64-1.6z"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',droplet:'<g data-name="Layer 2"><g data-name="droplet"><rect x=".1" y=".1" width="24" height="24" transform="rotate(.48 11.987 11.887)" opacity="0"/><path d="M12 21.1a7.4 7.4 0 0 1-5.28-2.28 7.73 7.73 0 0 1 .1-10.77l4.64-4.65a.94.94 0 0 1 .71-.3 1 1 0 0 1 .71.31l4.56 4.72a7.73 7.73 0 0 1-.09 10.77A7.33 7.33 0 0 1 12 21.1z"/></g></g>',"edit-2":'<g data-name="Layer 2"><g data-name="edit-2"><rect width="24" height="24" opacity="0"/><path d="M19 20H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2z"/><path d="M5 18h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71L16.66 2.6A2 2 0 0 0 14 2.53l-9 9a2 2 0 0 0-.57 1.21L4 16.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 18zM15.27 4L18 6.73l-2 1.95L13.32 6z"/></g></g>',edit:'<g data-name="Layer 2"><g data-name="edit"><rect width="24" height="24" opacity="0"/><path d="M19.4 7.34L16.66 4.6A2 2 0 0 0 14 4.53l-9 9a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71zM16 10.68L13.32 8l1.95-2L18 8.73z"/></g></g>',email:'<g data-name="Layer 2"><g data-name="email"><rect width="24" height="24" opacity="0"/><path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm0 2l-6.5 4.47a1 1 0 0 1-1 0L5 6z"/></g></g>',expand:'<g data-name="Layer 2"><g data-name="expand"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/><path d="M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z"/></g></g>',"external-link":'<g data-name="Layer 2"><g data-name="external-link"><rect width="24" height="24" opacity="0"/><path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"/><path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"/></g></g>',"eye-off-2":'<g data-name="Layer 2"><g data-name="eye-off-2"><rect width="24" height="24" opacity="0"/><path d="M17.81 13.39A8.93 8.93 0 0 0 21 7.62a1 1 0 1 0-2-.24 7.07 7.07 0 0 1-14 0 1 1 0 1 0-2 .24 8.93 8.93 0 0 0 3.18 5.77l-2.3 2.32a1 1 0 0 0 1.41 1.41l2.61-2.6a9.06 9.06 0 0 0 3.1.92V19a1 1 0 0 0 2 0v-3.56a9.06 9.06 0 0 0 3.1-.92l2.61 2.6a1 1 0 0 0 1.41-1.41z"/></g></g>',"eye-off":'<g data-name="Layer 2"><g data-name="eye-off"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="12" r="1.5"/><path d="M15.29 18.12L14 16.78l-.07-.07-1.27-1.27a4.07 4.07 0 0 1-.61.06A3.5 3.5 0 0 1 8.5 12a4.07 4.07 0 0 1 .06-.61l-2-2L5 7.87a15.89 15.89 0 0 0-2.87 3.63 1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25a9.48 9.48 0 0 0 3.23-.67z"/><path d="M8.59 5.76l2.8 2.8A4.07 4.07 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 4.07 4.07 0 0 1-.06.61l2.68 2.68.84.84a15.89 15.89 0 0 0 2.91-3.63 1 1 0 0 0 0-1c-.64-1.11-4.16-6.68-10.14-6.5a9.48 9.48 0 0 0-3.23.67z"/><path d="M20.71 19.29L19.41 18l-2-2-9.52-9.53L6.42 5 4.71 3.29a1 1 0 0 0-1.42 1.42L5.53 7l1.75 1.7 7.31 7.3.07.07L16 17.41l.59.59 2.7 2.71a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',eye:'<g data-name="Layer 2"><g data-name="eye"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="12" r="1.5"/><path d="M21.87 11.5c-.64-1.11-4.16-6.68-10.14-6.5-5.53.14-8.73 5-9.6 6.5a1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25c5.53-.14 8.74-5 9.6-6.5a1 1 0 0 0 0-1zm-9.87 4a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5z"/></g></g>',facebook:'<g data-name="Layer 2"><g data-name="facebook"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 3.5a.5.5 0 0 0-.5-.5H14a4.77 4.77 0 0 0-5 4.5v2.7H6.5a.5.5 0 0 0-.5.5v2.6a.5.5 0 0 0 .5.5H9v6.7a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-6.7h2.62a.5.5 0 0 0 .49-.37l.72-2.6a.5.5 0 0 0-.48-.63H13V7.5a1 1 0 0 1 1-.9h2.5a.5.5 0 0 0 .5-.5z"/></g></g>',"file-add":'<g data-name="Layer 2"><g data-name="file-add"><rect width="24" height="24" opacity="0"/><path d="M19.74 7.33l-4.44-5a1 1 0 0 0-.74-.33h-8A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V8a1 1 0 0 0-.26-.67zM14 15h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1h1a1 1 0 0 1 0 2zm.71-7a.79.79 0 0 1-.71-.85V4l3.74 4z"/></g></g>',"file-remove":'<g data-name="Layer 2"><g data-name="file-remove"><rect width="24" height="24" opacity="0"/><path d="M19.74 7.33l-4.44-5a1 1 0 0 0-.74-.33h-8A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V8a1 1 0 0 0-.26-.67zM14 15h-4a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2zm.71-7a.79.79 0 0 1-.71-.85V4l3.74 4z"/></g></g>',"file-text":'<g data-name="Layer 2"><g data-name="file-text"><rect width="24" height="24" opacity="0"/><path d="M19.74 7.33l-4.44-5a1 1 0 0 0-.74-.33h-8A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V8a1 1 0 0 0-.26-.67zM9 12h3a1 1 0 0 1 0 2H9a1 1 0 0 1 0-2zm6 6H9a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2zm-.29-10a.79.79 0 0 1-.71-.85V4l3.74 4z"/></g></g>',file:'<g data-name="Layer 2"><g data-name="file"><rect width="24" height="24" opacity="0"/><path d="M19.74 7.33l-4.44-5a1 1 0 0 0-.74-.33h-8A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V8a1 1 0 0 0-.26-.67zM14 4l3.74 4h-3a.79.79 0 0 1-.74-.85z"/></g></g>',film:'<g data-name="Layer 2"><g data-name="film"><rect width="24" height="24" opacity="0"/><path d="M18.26 3H5.74A2.74 2.74 0 0 0 3 5.74v12.52A2.74 2.74 0 0 0 5.74 21h12.52A2.74 2.74 0 0 0 21 18.26V5.74A2.74 2.74 0 0 0 18.26 3zM7 11H5V9h2zm-2 2h2v2H5zm14-2h-2V9h2zm-2 2h2v2h-2zm2-7.26V7h-2V5h1.26a.74.74 0 0 1 .74.74zM5.74 5H7v2H5V5.74A.74.74 0 0 1 5.74 5zM5 18.26V17h2v2H5.74a.74.74 0 0 1-.74-.74zm14 0a.74.74 0 0 1-.74.74H17v-2h2z"/></g></g>',flag:'<g data-name="Layer 2"><g data-name="flag"><polyline points="24 24 0 24 0 0" opacity="0"/><path d="M19.27 4.68a1.79 1.79 0 0 0-1.6-.25 7.53 7.53 0 0 1-2.17.28 8.54 8.54 0 0 1-3.13-.78A10.15 10.15 0 0 0 8.5 3c-2.89 0-4 1-4.2 1.14a1 1 0 0 0-.3.72V20a1 1 0 0 0 2 0v-4.3a6.28 6.28 0 0 1 2.5-.41 8.54 8.54 0 0 1 3.13.78 10.15 10.15 0 0 0 3.87.93 7.66 7.66 0 0 0 3.5-.7 1.74 1.74 0 0 0 1-1.55V6.11a1.77 1.77 0 0 0-.73-1.43z"/></g></g>',"flash-off":'<g data-name="Layer 2"><g data-name="flash-off"><rect width="24" height="24" opacity="0"/><path d="M17.33 14.5l2.5-3.74A1 1 0 0 0 19 9.2h-5.89l.77-7.09a1 1 0 0 0-.65-1 1 1 0 0 0-1.17.38L8.94 6.11z"/><path d="M6.67 9.5l-2.5 3.74A1 1 0 0 0 5 14.8h5.89l-.77 7.09a1 1 0 0 0 .65 1.05 1 1 0 0 0 .34.06 1 1 0 0 0 .83-.44l3.12-4.67z"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',flash:'<g data-name="Layer 2"><g data-name="flash"><rect width="24" height="24" opacity="0"/><path d="M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44z"/></g></g>',"flip-2":'<g data-name="Layer 2"><g data-name="flip-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M6.09 19h12l-1.3 1.29a1 1 0 0 0 1.42 1.42l3-3a1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0 1 1 0 0 0 0 1.42l1.3 1.29h-12a1.56 1.56 0 0 1-1.59-1.53V13a1 1 0 0 0-2 0v2.47A3.56 3.56 0 0 0 6.09 19z"/><path d="M5.79 9.71a1 1 0 1 0 1.42-1.42L5.91 7h12a1.56 1.56 0 0 1 1.59 1.53V11a1 1 0 0 0 2 0V8.53A3.56 3.56 0 0 0 17.91 5h-12l1.3-1.29a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0l-3 3a1 1 0 0 0 0 1.42z"/></g></g>',flip:'<g data-name="Layer 2"><g data-name="flip-in"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M5 6.09v12l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3a1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0L7 18.09v-12A1.56 1.56 0 0 1 8.53 4.5H11a1 1 0 0 0 0-2H8.53A3.56 3.56 0 0 0 5 6.09z"/><path d="M14.29 5.79a1 1 0 0 0 1.42 1.42L17 5.91v12a1.56 1.56 0 0 1-1.53 1.59H13a1 1 0 0 0 0 2h2.47A3.56 3.56 0 0 0 19 17.91v-12l1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0z"/></g></g>',"folder-add":'<g data-name="Layer 2"><g data-name="folder-add"><rect width="24" height="24" opacity="0"/><path d="M19.5 7.05h-7L9.87 3.87a1 1 0 0 0-.77-.37H4.5A2.47 2.47 0 0 0 2 5.93v12.14a2.47 2.47 0 0 0 2.5 2.43h15a2.47 2.47 0 0 0 2.5-2.43V9.48a2.47 2.47 0 0 0-2.5-2.43zM14 15h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1h1a1 1 0 0 1 0 2z"/></g></g>',"folder-remove":'<g data-name="Layer 2"><g data-name="folder-remove"><rect width="24" height="24" opacity="0"/><path d="M19.5 7.05h-7L9.87 3.87a1 1 0 0 0-.77-.37H4.5A2.47 2.47 0 0 0 2 5.93v12.14a2.47 2.47 0 0 0 2.5 2.43h15a2.47 2.47 0 0 0 2.5-2.43V9.48a2.47 2.47 0 0 0-2.5-2.43zM14 15h-4a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2z"/></g></g>',folder:'<g data-name="Layer 2"><g data-name="folder"><rect width="24" height="24" opacity="0"/><path d="M19.5 20.5h-15A2.47 2.47 0 0 1 2 18.07V5.93A2.47 2.47 0 0 1 4.5 3.5h4.6a1 1 0 0 1 .77.37l2.6 3.18h7A2.47 2.47 0 0 1 22 9.48v8.59a2.47 2.47 0 0 1-2.5 2.43z"/></g></g>',funnel:'<g data-name="Layer 2"><g data-name="funnel"><rect width="24" height="24" opacity="0"/><path d="M13.9 22a1 1 0 0 1-.6-.2l-4-3.05a1 1 0 0 1-.39-.8v-3.27l-4.8-9.22A1 1 0 0 1 5 4h14a1 1 0 0 1 .86.49 1 1 0 0 1 0 1l-5 9.21V21a1 1 0 0 1-.55.9 1 1 0 0 1-.41.1z"/></g></g>',gift:'<g data-name="Layer 2"><g data-name="gift"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M4.64 15.27v4.82a.92.92 0 0 0 .92.91h5.62v-5.73z"/><path d="M12.82 21h5.62a.92.92 0 0 0 .92-.91v-4.82h-6.54z"/><path d="M20.1 7.09h-1.84a2.82 2.82 0 0 0 .29-1.23A2.87 2.87 0 0 0 15.68 3 4.21 4.21 0 0 0 12 5.57 4.21 4.21 0 0 0 8.32 3a2.87 2.87 0 0 0-2.87 2.86 2.82 2.82 0 0 0 .29 1.23H3.9c-.5 0-.9.59-.9 1.31v3.93c0 .72.4 1.31.9 1.31h7.28V7.09h1.64v6.55h7.28c.5 0 .9-.59.9-1.31V8.4c0-.72-.4-1.31-.9-1.31zm-11.78 0a1.23 1.23 0 1 1 0-2.45c1.4 0 2.19 1.44 2.58 2.45zm7.36 0H13.1c.39-1 1.18-2.45 2.58-2.45a1.23 1.23 0 1 1 0 2.45z"/></g></g>',github:'<g data-name="Layer 2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 1A10.89 10.89 0 0 0 1 11.77 10.79 10.79 0 0 0 8.52 22c.55.1.75-.23.75-.52v-1.83c-3.06.65-3.71-1.44-3.71-1.44a2.86 2.86 0 0 0-1.22-1.58c-1-.66.08-.65.08-.65a2.31 2.31 0 0 1 1.68 1.11 2.37 2.37 0 0 0 3.2.89 2.33 2.33 0 0 1 .7-1.44c-2.44-.27-5-1.19-5-5.32a4.15 4.15 0 0 1 1.11-2.91 3.78 3.78 0 0 1 .11-2.84s.93-.29 3 1.1a10.68 10.68 0 0 1 5.5 0c2.1-1.39 3-1.1 3-1.1a3.78 3.78 0 0 1 .11 2.84A4.15 4.15 0 0 1 19 11.2c0 4.14-2.58 5.05-5 5.32a2.5 2.5 0 0 1 .75 2v2.95c0 .35.2.63.75.52A10.8 10.8 0 0 0 23 11.77 10.89 10.89 0 0 0 12 1" data-name="github"/></g>',"globe-2":'<g data-name="Layer 2"><g data-name="globe-2"><rect width="24" height="24" opacity="0"/><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 2a8.19 8.19 0 0 1 1.79.21 2.61 2.61 0 0 1-.78 1c-.22.17-.46.31-.7.46a4.56 4.56 0 0 0-1.85 1.67 6.49 6.49 0 0 0-.62 3.3c0 1.36 0 2.16-.95 2.87-1.37 1.07-3.46.47-4.76-.07A8.33 8.33 0 0 1 4 12a8 8 0 0 1 8-8zm4.89 14.32a6.79 6.79 0 0 0-.63-1.14c-.11-.16-.22-.32-.32-.49-.39-.68-.25-1 .38-2l.1-.17a4.77 4.77 0 0 0 .58-2.43 5.42 5.42 0 0 1 .09-1c.16-.73 1.71-.93 2.67-1a7.94 7.94 0 0 1-2.86 8.28z"/></g></g>',"globe-3":'<g data-name="Layer 2"><g data-name="globe-3"><rect width="24" height="24" opacity="0"/><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zM5 15.8a8.42 8.42 0 0 0 2 .27 5 5 0 0 0 3.14-1c1.71-1.34 1.71-3.06 1.71-4.44a4.76 4.76 0 0 1 .37-2.34 2.86 2.86 0 0 1 1.12-.91 9.75 9.75 0 0 0 .92-.61 4.55 4.55 0 0 0 1.4-1.87A8 8 0 0 1 19 8.12c-1.43.2-3.46.67-3.86 2.53A7 7 0 0 0 15 12a2.93 2.93 0 0 1-.29 1.47l-.1.17c-.65 1.08-1.38 2.31-.39 4 .12.21.25.41.38.61a2.29 2.29 0 0 1 .52 1.08A7.89 7.89 0 0 1 12 20a8 8 0 0 1-7-4.2z"/></g></g>',globe:'<g data-name="Layer 2"><g data-name="globe"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M22 12A10 10 0 0 0 12 2a10 10 0 0 0 0 20 10 10 0 0 0 10-10zm-2.07-1H17a12.91 12.91 0 0 0-2.33-6.54A8 8 0 0 1 19.93 11zM9.08 13H15a11.44 11.44 0 0 1-3 6.61A11 11 0 0 1 9.08 13zm0-2A11.4 11.4 0 0 1 12 4.4a11.19 11.19 0 0 1 3 6.6zm.36-6.57A13.18 13.18 0 0 0 7.07 11h-3a8 8 0 0 1 5.37-6.57zM4.07 13h3a12.86 12.86 0 0 0 2.35 6.56A8 8 0 0 1 4.07 13zm10.55 6.55A13.14 13.14 0 0 0 17 13h2.95a8 8 0 0 1-5.33 6.55z"/></g></g>',google:'<g data-name="Layer 2"><g data-name="google"><polyline points="0 0 24 0 24 24 0 24" opacity="0"/><path d="M17.5 14a5.51 5.51 0 0 1-4.5 3.93 6.15 6.15 0 0 1-7-5.45A6 6 0 0 1 12 6a6.12 6.12 0 0 1 2.27.44.5.5 0 0 0 .64-.21l1.44-2.65a.52.52 0 0 0-.23-.7A10 10 0 0 0 2 12.29 10.12 10.12 0 0 0 11.57 22 10 10 0 0 0 22 12.52v-2a.51.51 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h5"/></g></g>',grid:'<g data-name="Layer 2"><g data-name="grid"><rect width="24" height="24" opacity="0"/><path d="M9 3H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/><path d="M19 3h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/><path d="M9 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2z"/><path d="M19 13h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2z"/></g></g>',"hard-drive":'<g data-name="Layer 2"><g data-name="hard-drive"><rect width="24" height="24" opacity="0"/><path d="M20.79 11.34l-3.34-6.68A3 3 0 0 0 14.76 3H9.24a3 3 0 0 0-2.69 1.66l-3.34 6.68a2 2 0 0 0-.21.9V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5.76a2 2 0 0 0-.21-.9zM8 17a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm8 0h-4a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2zM5.62 11l2.72-5.45a1 1 0 0 1 .9-.55h5.52a1 1 0 0 1 .9.55L18.38 11z"/></g></g>',hash:'<g data-name="Layer 2"><g data-name="hash"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 14h-4.3l.73-4H20a1 1 0 0 0 0-2h-3.21l.69-3.81A1 1 0 0 0 16.64 3a1 1 0 0 0-1.22.82L14.67 8h-3.88l.69-3.81A1 1 0 0 0 10.64 3a1 1 0 0 0-1.22.82L8.67 8H4a1 1 0 0 0 0 2h4.3l-.73 4H4a1 1 0 0 0 0 2h3.21l-.69 3.81A1 1 0 0 0 7.36 21a1 1 0 0 0 1.22-.82L9.33 16h3.88l-.69 3.81a1 1 0 0 0 .84 1.19 1 1 0 0 0 1.22-.82l.75-4.18H20a1 1 0 0 0 0-2zM9.7 14l.73-4h3.87l-.73 4z"/></g></g>',headphones:'<g data-name="Layer 2"><g data-name="headphones"><rect width="24" height="24" opacity="0"/><path d="M12 2A10.2 10.2 0 0 0 2 12.37V17a4 4 0 1 0 4-4 3.91 3.91 0 0 0-2 .56v-1.19A8.2 8.2 0 0 1 12 4a8.2 8.2 0 0 1 8 8.37v1.19a3.91 3.91 0 0 0-2-.56 4 4 0 1 0 4 4v-4.63A10.2 10.2 0 0 0 12 2z"/></g></g>',heart:'<g data-name="Layer 2"><g data-name="heart"><rect width="24" height="24" opacity="0"/><path d="M12 21a1 1 0 0 1-.71-.29l-7.77-7.78a5.26 5.26 0 0 1 0-7.4 5.24 5.24 0 0 1 7.4 0L12 6.61l1.08-1.08a5.24 5.24 0 0 1 7.4 0 5.26 5.26 0 0 1 0 7.4l-7.77 7.78A1 1 0 0 1 12 21z"/></g></g>',home:'<g data-name="Layer 2"><g data-name="home"><rect width="24" height="24" opacity="0"/><rect x="10" y="14" width="4" height="7"/><path d="M20.42 10.18L12.71 2.3a1 1 0 0 0-1.42 0l-7.71 7.89A2 2 0 0 0 3 11.62V20a2 2 0 0 0 1.89 2H8v-9a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v9h3.11A2 2 0 0 0 21 20v-8.38a2.07 2.07 0 0 0-.58-1.44z"/></g></g>',"image-2":'<g data-name="Layer 2"><g data-name="image-2"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM8 7a1.5 1.5 0 1 1-1.5 1.5A1.5 1.5 0 0 1 8 7zm11 10.83A1.09 1.09 0 0 1 18 19H6l7.57-6.82a.69.69 0 0 1 .93 0l4.5 4.48z"/></g></g>',image:'<g data-name="Layer 2"><g data-name="image"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM6 5h12a1 1 0 0 1 1 1v8.36l-3.2-2.73a2.77 2.77 0 0 0-3.52 0L5 17.7V6a1 1 0 0 1 1-1z"/><circle cx="8" cy="8.5" r="1.5"/></g></g>',inbox:'<g data-name="Layer 2"><g data-name="inbox"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.79 11.34l-3.34-6.68A3 3 0 0 0 14.76 3H9.24a3 3 0 0 0-2.69 1.66l-3.34 6.68a2 2 0 0 0-.21.9V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5.76a2 2 0 0 0-.21-.9zM8.34 5.55a1 1 0 0 1 .9-.55h5.52a1 1 0 0 1 .9.55L18.38 11H16a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-2a1 1 0 0 0-1-1H5.62z"/></g></g>',info:'<g data-name="Layer 2"><g data-name="info"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 14a1 1 0 0 1-2 0v-5a1 1 0 0 1 2 0zm-1-7a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',keypad:'<g data-name="Layer 2"><g data-name="keypad"><rect width="24" height="24" opacity="0"/><path d="M5 2a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M12 2a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M19 8a3 3 0 1 0-3-3 3 3 0 0 0 3 3z"/><path d="M5 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M12 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M19 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M5 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M12 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/><path d="M19 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/></g></g>',layers:'<g data-name="Layer 2"><g data-name="layers"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M3.24 7.29l8.52 4.63a.51.51 0 0 0 .48 0l8.52-4.63a.44.44 0 0 0-.05-.81L12.19 3a.5.5 0 0 0-.38 0L3.29 6.48a.44.44 0 0 0-.05.81z"/><path d="M20.71 10.66l-1.83-.78-6.64 3.61a.51.51 0 0 1-.48 0L5.12 9.88l-1.83.78a.48.48 0 0 0 0 .85l8.52 4.9a.46.46 0 0 0 .48 0l8.52-4.9a.48.48 0 0 0-.1-.85z"/><path d="M20.71 15.1l-1.56-.68-6.91 3.76a.51.51 0 0 1-.48 0l-6.91-3.76-1.56.68a.49.49 0 0 0 0 .87l8.52 5a.51.51 0 0 0 .48 0l8.52-5a.49.49 0 0 0-.1-.87z"/></g></g>',layout:'<g data-name="Layer 2"><g data-name="layout"><rect width="24" height="24" opacity="0"/><path d="M21 8V6a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v2z"/><path d="M3 10v8a3 3 0 0 0 3 3h5V10z"/><path d="M13 10v11h5a3 3 0 0 0 3-3v-8z"/></g></g>',"link-2":'<g data-name="Layer 2"><g data-name="link-2"><rect width="24" height="24" opacity="0"/><path d="M13.29 9.29l-4 4a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4-4a1 1 0 0 0-1.42-1.42z"/><path d="M12.28 17.4L11 18.67a4.2 4.2 0 0 1-5.58.4 4 4 0 0 1-.27-5.93l1.42-1.43a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0l-1.27 1.28a6.15 6.15 0 0 0-.67 8.07 6.06 6.06 0 0 0 9.07.6l1.42-1.42a1 1 0 0 0-1.42-1.42z"/><path d="M19.66 3.22a6.18 6.18 0 0 0-8.13.68L10.45 5a1.09 1.09 0 0 0-.17 1.61 1 1 0 0 0 1.42 0L13 5.3a4.17 4.17 0 0 1 5.57-.4 4 4 0 0 1 .27 5.95l-1.42 1.43a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l1.42-1.42a6.06 6.06 0 0 0-.6-9.06z"/></g></g>',link:'<g data-name="Layer 2"><g data-name="link"><rect width="24" height="24" opacity="0"/><path d="M8 12a1 1 0 0 0 1 1h6a1 1 0 0 0 0-2H9a1 1 0 0 0-1 1z"/><path d="M9 16H7.21A4.13 4.13 0 0 1 3 12.37 4 4 0 0 1 7 8h2a1 1 0 0 0 0-2H7.21a6.15 6.15 0 0 0-6.16 5.21A6 6 0 0 0 7 18h2a1 1 0 0 0 0-2z"/><path d="M23 11.24A6.16 6.16 0 0 0 16.76 6h-1.51C14.44 6 14 6.45 14 7a1 1 0 0 0 1 1h1.79A4.13 4.13 0 0 1 21 11.63 4 4 0 0 1 17 16h-2a1 1 0 0 0 0 2h2a6 6 0 0 0 6-6.76z"/></g></g>',linkedin:'<g data-name="Layer 2"><g data-name="linkedin"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M15.15 8.4a5.83 5.83 0 0 0-5.85 5.82v5.88a.9.9 0 0 0 .9.9h2.1a.9.9 0 0 0 .9-.9v-5.88a1.94 1.94 0 0 1 2.15-1.93 2 2 0 0 1 1.75 2v5.81a.9.9 0 0 0 .9.9h2.1a.9.9 0 0 0 .9-.9v-5.88a5.83 5.83 0 0 0-5.85-5.82z"/><rect x="3" y="9.3" width="4.5" height="11.7" rx=".9" ry=".9"/><circle cx="5.25" cy="5.25" r="2.25"/></g></g>',list:'<g data-name="Layer 2"><g data-name="list"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><circle cx="4" cy="7" r="1"/><circle cx="4" cy="12" r="1"/><circle cx="4" cy="17" r="1"/><rect x="7" y="11" width="14" height="2" rx=".94" ry=".94"/><rect x="7" y="16" width="14" height="2" rx=".94" ry=".94"/><rect x="7" y="6" width="14" height="2" rx=".94" ry=".94"/></g></g>',lock:'<g data-name="Layer 2"><g data-name="lock"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="15" r="1"/><path d="M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4zM12 18a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/></g></g>',"log-in":'<g data-name="Layer 2"><g data-name="log-in"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19 4h-2a1 1 0 0 0 0 2h1v12h-1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1z"/><path d="M11.8 7.4a1 1 0 0 0-1.6 1.2L12 11H4a1 1 0 0 0 0 2h8.09l-1.72 2.44a1 1 0 0 0 .24 1.4 1 1 0 0 0 .58.18 1 1 0 0 0 .81-.42l2.82-4a1 1 0 0 0 0-1.18z"/></g></g>',"log-out":'<g data-name="Layer 2"><g data-name="log-out"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M7 6a1 1 0 0 0 0-2H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h2a1 1 0 0 0 0-2H6V6z"/><path d="M20.82 11.42l-2.82-4a1 1 0 0 0-1.39-.24 1 1 0 0 0-.24 1.4L18.09 11H10a1 1 0 0 0 0 2h8l-1.8 2.4a1 1 0 0 0 .2 1.4 1 1 0 0 0 .6.2 1 1 0 0 0 .8-.4l3-4a1 1 0 0 0 .02-1.18z"/></g></g>',map:'<g data-name="Layer 2"><g data-name="map"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.41 5.89l-4-1.8H15.59L12 5.7 8.41 4.09h-.05L8.24 4h-.6l-4 1.8a1 1 0 0 0-.64 1V19a1 1 0 0 0 .46.84A1 1 0 0 0 4 20a1 1 0 0 0 .41-.09L8 18.3l3.59 1.61h.05a.85.85 0 0 0 .72 0h.05L16 18.3l3.59 1.61A1 1 0 0 0 20 20a1 1 0 0 0 .54-.16A1 1 0 0 0 21 19V6.8a1 1 0 0 0-.59-.91zM9 6.55l2 .89v10l-2-.89zm10 10.9l-2-.89v-10l2 .89z"/></g></g>',maximize:'<g data-name="Layer 2"><g data-name="maximize"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM13 12h-1v1a1 1 0 0 1-2 0v-1H9a1 1 0 0 1 0-2h1V9a1 1 0 0 1 2 0v1h1a1 1 0 0 1 0 2z"/></g></g>',"menu-2":'<g data-name="Layer 2"><g data-name="menu-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><circle cx="4" cy="12" r="1"/><rect x="7" y="11" width="14" height="2" rx=".94" ry=".94"/><rect x="3" y="16" width="18" height="2" rx=".94" ry=".94"/><rect x="3" y="6" width="18" height="2" rx=".94" ry=".94"/></g></g>',"menu-arrow":'<g data-name="Layer 2"><g data-name="menu-arrow"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.05 11H5.91l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3a1 1 0 0 0 0 1.42l3 3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L5.91 13h14.14a1 1 0 0 0 .95-.95V12a1 1 0 0 0-.95-1z"/><rect x="3" y="17" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="5" width="18" height="2" rx=".95" ry=".95"/></g></g>',menu:'<g data-name="Layer 2"><g data-name="menu"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><rect x="3" y="11" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="16" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="6" width="18" height="2" rx=".95" ry=".95"/></g></g>',"message-circle":'<g data-name="Layer 2"><g data-name="message-circle"><rect width="24" height="24" opacity="0"/><path d="M19.07 4.93a10 10 0 0 0-16.28 11 1.06 1.06 0 0 1 .09.64L2 20.8a1 1 0 0 0 .27.91A1 1 0 0 0 3 22h.2l4.28-.86a1.26 1.26 0 0 1 .64.09 10 10 0 0 0 11-16.28zM8 13a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm4 0a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm4 0a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"message-square":'<g data-name="Layer 2"><g data-name="message-square"><rect width="24" height="24" opacity="0"/><path d="M19 3H5a3 3 0 0 0-3 3v15a1 1 0 0 0 .51.87A1 1 0 0 0 3 22a1 1 0 0 0 .51-.14L8 19.14a1 1 0 0 1 .55-.14H19a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM8 12a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm4 0a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm4 0a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"mic-off":'<g data-name="Layer 2"><g data-name="mic-off"><rect width="24" height="24" opacity="0"/><path d="M15.58 12.75A4 4 0 0 0 16 11V6a4 4 0 0 0-7.92-.75"/><path d="M19 11a1 1 0 0 0-2 0 4.86 4.86 0 0 1-.69 2.48L17.78 15A7 7 0 0 0 19 11z"/><path d="M12 15h.16L8 10.83V11a4 4 0 0 0 4 4z"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M15 20h-2v-2.08a7 7 0 0 0 1.65-.44l-1.6-1.6A4.57 4.57 0 0 1 12 16a5 5 0 0 1-5-5 1 1 0 0 0-2 0 7 7 0 0 0 6 6.92V20H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/></g></g>',mic:'<g data-name="Layer 2"><g data-name="mic"><rect width="24" height="24" opacity="0"/><path d="M12 15a4 4 0 0 0 4-4V6a4 4 0 0 0-8 0v5a4 4 0 0 0 4 4z"/><path d="M19 11a1 1 0 0 0-2 0 5 5 0 0 1-10 0 1 1 0 0 0-2 0 7 7 0 0 0 6 6.92V20H8.89a.89.89 0 0 0-.89.89v.22a.89.89 0 0 0 .89.89h6.22a.89.89 0 0 0 .89-.89v-.22a.89.89 0 0 0-.89-.89H13v-2.08A7 7 0 0 0 19 11z"/></g></g>',minimize:'<g data-name="Layer 2"><g data-name="minimize"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM13 12H9a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2z"/></g></g>',"minus-circle":'<g data-name="Layer 2"><g data-name="minus-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm3 11H9a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2z"/></g></g>',"minus-square":'<g data-name="Layer 2"><g data-name="minus-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-3 10H9a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2z"/></g></g>',minus:'<g data-name="Layer 2"><g data-name="minus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z"/></g></g>',monitor:'<g data-name="Layer 2"><g data-name="monitor"><rect width="24" height="24" opacity="0"/><path d="M19 3H5a3 3 0 0 0-3 3v5h20V6a3 3 0 0 0-3-3z"/><path d="M2 14a3 3 0 0 0 3 3h6v2H7a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2h-4v-2h6a3 3 0 0 0 3-3v-1H2z"/></g></g>',moon:'<g data-name="Layer 2"><g data-name="moon"><rect width="24" height="24" opacity="0"/><path d="M12.3 22h-.1a10.31 10.31 0 0 1-7.34-3.15 10.46 10.46 0 0 1-.26-14 10.13 10.13 0 0 1 4-2.74 1 1 0 0 1 1.06.22 1 1 0 0 1 .24 1 8.4 8.4 0 0 0 1.94 8.81 8.47 8.47 0 0 0 8.83 1.94 1 1 0 0 1 1.27 1.29A10.16 10.16 0 0 1 19.6 19a10.28 10.28 0 0 1-7.3 3z"/></g></g>',"more-horizontal":'<g data-name="Layer 2"><g data-name="more-horizotnal"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/><circle cx="5" cy="12" r="2"/></g></g>',"more-vertical":'<g data-name="Layer 2"><g data-name="more-vertical"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="12" cy="19" r="2"/></g></g>',move:'<g data-name="Layer 2"><g data-name="move"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M21.71 11.31l-3-3a1 1 0 0 0-1.42 1.42L18.58 11H13V5.41l1.29 1.3A1 1 0 0 0 15 7a1 1 0 0 0 .71-.29 1 1 0 0 0 0-1.42l-3-3A1 1 0 0 0 12 2a1 1 0 0 0-.7.29l-3 3a1 1 0 0 0 1.41 1.42L11 5.42V11H5.41l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3A1 1 0 0 0 2 12a1 1 0 0 0 .29.71l3 3A1 1 0 0 0 6 16a1 1 0 0 0 .71-.29 1 1 0 0 0 0-1.42L5.42 13H11v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 22a1 1 0 0 0 .7-.29l3-3a1 1 0 0 0-1.42-1.42L13 18.58V13h5.59l-1.3 1.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 16a1 1 0 0 0 .71-.29l3-3A1 1 0 0 0 22 12a1 1 0 0 0-.29-.69z"/></g></g>',music:'<g data-name="Layer 2"><g data-name="music"><rect width="24" height="24" opacity="0"/><path d="M19 15V4a1 1 0 0 0-.38-.78 1 1 0 0 0-.84-.2l-9 2A1 1 0 0 0 8 6v8.34a3.49 3.49 0 1 0 2 3.18 4.36 4.36 0 0 0 0-.52V6.8l7-1.55v7.09a3.49 3.49 0 1 0 2 3.17 4.57 4.57 0 0 0 0-.51z"/></g></g>',"navigation-2":'<g data-name="Layer 2"><g data-name="navigation-2"><rect width="24" height="24" opacity="0"/><path d="M13.67 22h-.06a1 1 0 0 1-.92-.8l-1.54-7.57a1 1 0 0 0-.78-.78L2.8 11.31a1 1 0 0 1-.12-1.93l16-5.33A1 1 0 0 1 20 5.32l-5.33 16a1 1 0 0 1-1 .68z"/></g></g>',navigation:'<g data-name="Layer 2"><g data-name="navigation"><rect width="24" height="24" opacity="0"/><path d="M20 20a.94.94 0 0 1-.55-.17l-6.9-4.56a1 1 0 0 0-1.1 0l-6.9 4.56a1 1 0 0 1-1.44-1.28l8-16a1 1 0 0 1 1.78 0l8 16a1 1 0 0 1-.23 1.2A1 1 0 0 1 20 20z"/></g></g>',npm:'<g data-name="Layer 2"><g data-name="npm"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h7V11h4v10h1a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3z"/></g></g>',"options-2":'<g data-name="Layer 2"><g data-name="options-2"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 9a3 3 0 0 0-2.82 2H3a1 1 0 0 0 0 2h13.18A3 3 0 1 0 19 9z"/><path d="M3 7h1.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2H9.82a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2z"/><path d="M21 17h-7.18a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2h5.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2z"/></g></g>',options:'<g data-name="Layer 2"><g data-name="options"><rect width="24" height="24" opacity="0"/><path d="M7 14.18V3a1 1 0 0 0-2 0v11.18a3 3 0 0 0 0 5.64V21a1 1 0 0 0 2 0v-1.18a3 3 0 0 0 0-5.64z"/><path d="M21 13a3 3 0 0 0-2-2.82V3a1 1 0 0 0-2 0v7.18a3 3 0 0 0 0 5.64V21a1 1 0 0 0 2 0v-5.18A3 3 0 0 0 21 13z"/><path d="M15 5a3 3 0 1 0-4 2.82V21a1 1 0 0 0 2 0V7.82A3 3 0 0 0 15 5z"/></g></g>',pantone:'<g data-name="Layer 2"><g data-name="pantone"><rect width="24" height="24" opacity="0"/><path d="M20 13.18h-2.7l-1.86 2L11.88 19l-1.41 1.52L10 21h10a1 1 0 0 0 1-1v-5.82a1 1 0 0 0-1-1z"/><path d="M18.19 9.3l-4.14-3.86a.89.89 0 0 0-.71-.26 1 1 0 0 0-.7.31l-.82.89v10.71a5.23 5.23 0 0 1-.06.57l6.48-6.95a1 1 0 0 0-.05-1.41z"/><path d="M10.82 4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v13.09a3.91 3.91 0 0 0 7.82 0zm-2 13.09a1.91 1.91 0 0 1-3.82 0V15h3.82zm0-4.09H5v-3h3.82zm0-5H5V5h3.82z"/></g></g>',"paper-plane":'<g data-name="Layer 2"><g data-name="paper-plane"><rect width="24" height="24" opacity="0"/><path d="M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z"/></g></g>',"pause-circle":'<g data-name="Layer 2"><g data-name="pause-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm-2 13a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0zm6 0a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0z"/></g></g>',people:'<g data-name="Layer 2"><g data-name="people"><rect width="24" height="24" opacity="0"/><path d="M9 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M17 13a3 3 0 1 0-3-3 3 3 0 0 0 3 3z"/><path d="M21 20a1 1 0 0 0 1-1 5 5 0 0 0-8.06-3.95A7 7 0 0 0 2 20a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1"/></g></g>',percent:'<g data-name="Layer 2"><g data-name="percent"><rect width="24" height="24" opacity="0"/><path d="M8 11a3.5 3.5 0 1 0-3.5-3.5A3.5 3.5 0 0 0 8 11zm0-5a1.5 1.5 0 1 1-1.5 1.5A1.5 1.5 0 0 1 8 6z"/><path d="M16 14a3.5 3.5 0 1 0 3.5 3.5A3.5 3.5 0 0 0 16 14zm0 5a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 16 19z"/><path d="M19.74 4.26a.89.89 0 0 0-1.26 0L4.26 18.48a.91.91 0 0 0-.26.63.89.89 0 0 0 1.52.63L19.74 5.52a.89.89 0 0 0 0-1.26z"/></g></g>',"person-add":'<g data-name="Layer 2"><g data-name="person-add"><rect width="24" height="24" opacity="0"/><path d="M21 6h-1V5a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V8h1a1 1 0 0 0 0-2z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M16 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1"/></g></g>',"person-delete":'<g data-name="Layer 2"><g data-name="person-delete"><rect width="24" height="24" opacity="0"/><path d="M20.47 7.5l.73-.73a1 1 0 0 0-1.47-1.47L19 6l-.73-.73a1 1 0 0 0-1.47 1.5l.73.73-.73.73a1 1 0 0 0 1.47 1.47L19 9l.73.73a1 1 0 0 0 1.47-1.5z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M16 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1z"/></g></g>',"person-done":'<g data-name="Layer 2"><g data-name="person-done"><rect width="24" height="24" opacity="0"/><path d="M21.66 4.25a1 1 0 0 0-1.41.09l-1.87 2.15-.63-.71a1 1 0 0 0-1.5 1.33l1.39 1.56a1 1 0 0 0 .75.33 1 1 0 0 0 .74-.34l2.61-3a1 1 0 0 0-.08-1.41z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M16 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1"/></g></g>',"person-remove":'<g data-name="Layer 2"><g data-name="person-remove"><rect width="24" height="24" opacity="0"/><path d="M21 6h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M16 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1"/></g></g>',person:'<g data-name="Layer 2"><g data-name="person"><rect width="24" height="24" opacity="0"/><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/><path d="M18 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1z"/></g></g>',"phone-call":'<g data-name="Layer 2"><g data-name="phone-call"><rect width="24" height="24" opacity="0"/><path d="M13 8a3 3 0 0 1 3 3 1 1 0 0 0 2 0 5 5 0 0 0-5-5 1 1 0 0 0 0 2z"/><path d="M13 4a7 7 0 0 1 7 7 1 1 0 0 0 2 0 9 9 0 0 0-9-9 1 1 0 0 0 0 2z"/><path d="M21.75 15.91a1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a9.91 9.91 0 0 1-4.87-4.89C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6 15.42 15.42 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76 4.34 4.34 0 0 0-.19-.73z"/></g></g>',"phone-missed":'<g data-name="Layer 2"><g data-name="phone-missed"><rect width="24" height="24" opacity="0"/><path d="M21.94 16.64a4.34 4.34 0 0 0-.19-.73 1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a10 10 0 0 1-4.88-4.89C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6 15.42 15.42 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76z"/><path d="M15.8 8.7a1.05 1.05 0 0 0 1.47 0L18 8l.73.73a1 1 0 0 0 1.47-1.5l-.73-.73.73-.73a1 1 0 0 0-1.47-1.47L18 5l-.73-.73a1 1 0 0 0-1.47 1.5l.73.73-.73.73a1.05 1.05 0 0 0 0 1.47z"/></g></g>',"phone-off":'<g data-name="Layer 2"><g data-name="phone-off"><rect width="24" height="24" opacity="0"/><path d="M9.27 12.06a10.37 10.37 0 0 1-.8-1.42C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6a15.33 15.33 0 0 0 3.27 9.46z"/><path d="M21.94 16.64a4.34 4.34 0 0 0-.19-.73 1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a10.88 10.88 0 0 1-1.41-.8l-4 4A15.33 15.33 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76z"/><path d="M19.74 4.26a.89.89 0 0 0-1.26 0L4.26 18.48a.91.91 0 0 0-.26.63.89.89 0 0 0 1.52.63L19.74 5.52a.89.89 0 0 0 0-1.26z"/></g></g>',phone:'<g data-name="Layer 2"><g data-name="phone"><rect width="24" height="24" opacity="0"/><path d="M17.4 22A15.42 15.42 0 0 1 2 6.6 4.6 4.6 0 0 1 6.6 2a3.94 3.94 0 0 1 .77.07 3.79 3.79 0 0 1 .72.18 1 1 0 0 1 .65.75l1.37 6a1 1 0 0 1-.26.92c-.13.14-.14.15-1.37.79a9.91 9.91 0 0 0 4.87 4.89c.65-1.24.66-1.25.8-1.38a1 1 0 0 1 .92-.26l6 1.37a1 1 0 0 1 .72.65 4.34 4.34 0 0 1 .19.73 4.77 4.77 0 0 1 .06.76A4.6 4.6 0 0 1 17.4 22z"/></g></g>',"pie-chart-2":'<g data-name="Layer 2"><g data-name="pie-chart-2"><rect width="24" height="24" opacity="0"/><path d="M14.5 10.33h6.67A.83.83 0 0 0 22 9.5 7.5 7.5 0 0 0 14.5 2a.83.83 0 0 0-.83.83V9.5a.83.83 0 0 0 .83.83zm.83-6.6a5.83 5.83 0 0 1 4.94 4.94h-4.94z"/><path d="M21.08 12h-8.15a.91.91 0 0 1-.91-.91V2.92A.92.92 0 0 0 11 2a10 10 0 1 0 11 11 .92.92 0 0 0-.92-1z"/></g></g>',"pie-chart":'<g data-name="Layer 2"><g data-name="pie-chart"><rect width="24" height="24" opacity="0"/><path d="M14.5 10.33h6.67A.83.83 0 0 0 22 9.5 7.5 7.5 0 0 0 14.5 2a.83.83 0 0 0-.83.83V9.5a.83.83 0 0 0 .83.83z"/><path d="M21.08 12h-8.15a.91.91 0 0 1-.91-.91V2.92A.92.92 0 0 0 11 2a10 10 0 1 0 11 11 .92.92 0 0 0-.92-1z"/></g></g>',pin:'<g data-name="Layer 2"><g data-name="pin"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="9.5" r="1.5"/><path d="M12 2a8 8 0 0 0-8 7.92c0 5.48 7.05 11.58 7.35 11.84a1 1 0 0 0 1.3 0C13 21.5 20 15.4 20 9.92A8 8 0 0 0 12 2zm0 11a3.5 3.5 0 1 1 3.5-3.5A3.5 3.5 0 0 1 12 13z"/></g></g>',"play-circle":'<g data-name="Layer 2"><g data-name="play-circle"><rect width="24" height="24" opacity="0"/><polygon points="11.5 14.6 14.31 12 11.5 9.4 11.5 14.6"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4 11.18l-3.64 3.37a1.74 1.74 0 0 1-1.16.45 1.68 1.68 0 0 1-.69-.15 1.6 1.6 0 0 1-1-1.48V8.63a1.6 1.6 0 0 1 1-1.48 1.7 1.7 0 0 1 1.85.3L16 10.82a1.6 1.6 0 0 1 0 2.36z"/></g></g>',"plus-circle":'<g data-name="Layer 2"><g data-name="plus-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm3 11h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V9a1 1 0 0 1 2 0v2h2a1 1 0 0 1 0 2z"/></g></g>',"plus-square":'<g data-name="Layer 2"><g data-name="plus-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-3 10h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V9a1 1 0 0 1 2 0v2h2a1 1 0 0 1 0 2z"/></g></g>',plus:'<g data-name="Layer 2"><g data-name="plus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"/></g></g>',power:'<g data-name="Layer 2"><g data-name="power"><rect width="24" height="24" opacity="0"/><path d="M12 13a1 1 0 0 0 1-1V2a1 1 0 0 0-2 0v10a1 1 0 0 0 1 1z"/><path d="M16.59 3.11a1 1 0 0 0-.92 1.78 8 8 0 1 1-7.34 0 1 1 0 1 0-.92-1.78 10 10 0 1 0 9.18 0z"/></g></g>',pricetags:'<g data-name="Layer 2"><g data-name="pricetags"><rect width="24" height="24" opacity="0"/><path d="M21.47 11.58l-6.42-6.41a1 1 0 0 0-.61-.29L5.09 4a1 1 0 0 0-.8.29 1 1 0 0 0-.29.8l.88 9.35a1 1 0 0 0 .29.61l6.41 6.42a1.84 1.84 0 0 0 1.29.53 1.82 1.82 0 0 0 1.28-.53l7.32-7.32a1.82 1.82 0 0 0 0-2.57zm-9.91 0a1.5 1.5 0 1 1 0-2.12 1.49 1.49 0 0 1 0 2.1z"/></g></g>',printer:'<g data-name="Layer 2"><g data-name="printer"><rect width="24" height="24" opacity="0"/><path d="M19.36 7H18V5a1.92 1.92 0 0 0-1.83-2H7.83A1.92 1.92 0 0 0 6 5v2H4.64A2.66 2.66 0 0 0 2 9.67v6.66A2.66 2.66 0 0 0 4.64 19h.86a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2h.86A2.66 2.66 0 0 0 22 16.33V9.67A2.66 2.66 0 0 0 19.36 7zM8 5h8v2H8zm-.5 14v-4h9v4z"/></g></g>',"question-mark-circle":'<g data-name="Layer 2"><g data-name="menu-arrow-circle"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 16a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm1-5.16V14a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.5-1.5 1 1 0 0 1-2 0 3.5 3.5 0 1 1 4.5 3.34z"/></g></g>',"question-mark":'<g data-name="Layer 2"><g data-name="menu-arrow"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z"/><circle cx="12" cy="19" r="1"/></g></g>',"radio-button-off":'<g data-name="Layer 2"><g data-name="radio-button-off"><rect width="24" height="24" opacity="0"/><path d="M12 22a10 10 0 1 1 10-10 10 10 0 0 1-10 10zm0-18a8 8 0 1 0 8 8 8 8 0 0 0-8-8z"/></g></g>',"radio-button-on":'<g data-name="Layer 2"><g data-name="radio-button-on"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12 7a5 5 0 1 0 5 5 5 5 0 0 0-5-5z"/></g></g>',radio:'<g data-name="Layer 2"><g data-name="radio"><rect width="24" height="24" opacity="0"/><path d="M12 8a3 3 0 0 0-1 5.83 1 1 0 0 0 0 .17v6a1 1 0 0 0 2 0v-6a1 1 0 0 0 0-.17A3 3 0 0 0 12 8z"/><path d="M3.5 11a6.87 6.87 0 0 1 2.64-5.23 1 1 0 1 0-1.28-1.54A8.84 8.84 0 0 0 1.5 11a8.84 8.84 0 0 0 3.36 6.77 1 1 0 1 0 1.28-1.54A6.87 6.87 0 0 1 3.5 11z"/><path d="M16.64 6.24a1 1 0 0 0-1.28 1.52A4.28 4.28 0 0 1 17 11a4.28 4.28 0 0 1-1.64 3.24A1 1 0 0 0 16 16a1 1 0 0 0 .64-.24A6.2 6.2 0 0 0 19 11a6.2 6.2 0 0 0-2.36-4.76z"/><path d="M8.76 6.36a1 1 0 0 0-1.4-.12A6.2 6.2 0 0 0 5 11a6.2 6.2 0 0 0 2.36 4.76 1 1 0 0 0 1.4-.12 1 1 0 0 0-.12-1.4A4.28 4.28 0 0 1 7 11a4.28 4.28 0 0 1 1.64-3.24 1 1 0 0 0 .12-1.4z"/><path d="M19.14 4.23a1 1 0 1 0-1.28 1.54A6.87 6.87 0 0 1 20.5 11a6.87 6.87 0 0 1-2.64 5.23 1 1 0 0 0 1.28 1.54A8.84 8.84 0 0 0 22.5 11a8.84 8.84 0 0 0-3.36-6.77z"/></g></g>',recording:'<g data-name="Layer 2"><g data-name="recording"><rect width="24" height="24" opacity="0"/><path d="M18 8a4 4 0 0 0-4 4 3.91 3.91 0 0 0 .56 2H9.44a3.91 3.91 0 0 0 .56-2 4 4 0 1 0-4 4h12a4 4 0 0 0 0-8z"/></g></g>',refresh:'<g data-name="Layer 2"><g data-name="refresh"><rect width="24" height="24" opacity="0"/><path d="M20.3 13.43a1 1 0 0 0-1.25.65A7.14 7.14 0 0 1 12.18 19 7.1 7.1 0 0 1 5 12a7.1 7.1 0 0 1 7.18-7 7.26 7.26 0 0 1 4.65 1.67l-2.17-.36a1 1 0 0 0-1.15.83 1 1 0 0 0 .83 1.15l4.24.7h.17a1 1 0 0 0 .34-.06.33.33 0 0 0 .1-.06.78.78 0 0 0 .2-.11l.09-.11c0-.05.09-.09.13-.15s0-.1.05-.14a1.34 1.34 0 0 0 .07-.18l.75-4a1 1 0 0 0-2-.38l-.27 1.45A9.21 9.21 0 0 0 12.18 3 9.1 9.1 0 0 0 3 12a9.1 9.1 0 0 0 9.18 9A9.12 9.12 0 0 0 21 14.68a1 1 0 0 0-.7-1.25z"/></g></g>',repeat:'<g data-name="Layer 2"><g data-name="repeat"><rect width="24" height="24" opacity="0"/><path d="M17.91 5h-12l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3a1 1 0 0 0 0 1.42l3 3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L5.91 7h12a1.56 1.56 0 0 1 1.59 1.53V11a1 1 0 0 0 2 0V8.53A3.56 3.56 0 0 0 17.91 5z"/><path d="M18.21 14.29a1 1 0 0 0-1.42 1.42l1.3 1.29h-12a1.56 1.56 0 0 1-1.59-1.53V13a1 1 0 0 0-2 0v2.47A3.56 3.56 0 0 0 6.09 19h12l-1.3 1.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 0-1.42z"/></g></g>',"rewind-left":'<g data-name="Layer 2"><g data-name="rewind-left"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.45 6.2a2.1 2.1 0 0 0-2.21.26l-4.74 3.92V7.79a1.76 1.76 0 0 0-1.05-1.59 2.1 2.1 0 0 0-2.21.26l-5.1 4.21a1.7 1.7 0 0 0 0 2.66l5.1 4.21a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59v-2.59l4.74 3.92a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59V7.79a1.76 1.76 0 0 0-1.05-1.59z"/></g></g>',"rewind-right":'<g data-name="Layer 2"><g data-name="rewind-right"><rect width="24" height="24" opacity="0"/><path d="M20.86 10.67l-5.1-4.21a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1.05 1.59v2.59L7.76 6.46a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1 1.59v8.42a1.76 1.76 0 0 0 1 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l4.74-3.92v2.59a1.76 1.76 0 0 0 1.05 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l5.1-4.21a1.7 1.7 0 0 0 0-2.66z"/></g></g>',save:'<g data-name="Layer 2"><g data-name="save"><rect width="24" height="24" opacity="0"/><rect x="10" y="17" width="4" height="4"/><path d="M20.12 8.71l-4.83-4.83A3 3 0 0 0 13.17 3H10v6h5a1 1 0 0 1 0 2H9a1 1 0 0 1-1-1V3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h2v-4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v4h2a3 3 0 0 0 3-3v-7.17a3 3 0 0 0-.88-2.12z"/></g></g>',scissors:'<g data-name="Layer 2"><g data-name="scissors"><rect width="24" height="24" opacity="0"/><path d="M20.21 5.71a1 1 0 1 0-1.42-1.42l-6.28 6.31-3.3-3.31A3 3 0 0 0 9.5 6a3 3 0 1 0-3 3 3 3 0 0 0 1.29-.3L11.1 12l-3.29 3.3A3 3 0 0 0 6.5 15a3 3 0 1 0 3 3 3 3 0 0 0-.29-1.26zM6.5 7a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0 12a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M15.21 13.29a1 1 0 0 0-1.42 1.42l5 5a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',search:'<g data-name="Layer 2"><g data-name="search"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/></g></g>',"settings-2":'<g data-name="Layer 2"><g data-name="settings-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><circle cx="12" cy="12" r="1.5"/><path d="M20.32 9.37h-1.09c-.14 0-.24-.11-.3-.26a.34.34 0 0 1 0-.37l.81-.74a1.63 1.63 0 0 0 .5-1.18 1.67 1.67 0 0 0-.5-1.19L18.4 4.26a1.67 1.67 0 0 0-2.37 0l-.77.74a.38.38 0 0 1-.41 0 .34.34 0 0 1-.22-.29V3.68A1.68 1.68 0 0 0 13 2h-1.94a1.69 1.69 0 0 0-1.69 1.68v1.09c0 .14-.11.24-.26.3a.34.34 0 0 1-.37 0L8 4.26a1.72 1.72 0 0 0-1.19-.5 1.65 1.65 0 0 0-1.18.5L4.26 5.6a1.67 1.67 0 0 0 0 2.4l.74.74a.38.38 0 0 1 0 .41.34.34 0 0 1-.29.22H3.68A1.68 1.68 0 0 0 2 11.05v1.89a1.69 1.69 0 0 0 1.68 1.69h1.09c.14 0 .24.11.3.26a.34.34 0 0 1 0 .37l-.81.74a1.72 1.72 0 0 0-.5 1.19 1.66 1.66 0 0 0 .5 1.19l1.34 1.36a1.67 1.67 0 0 0 2.37 0l.77-.74a.38.38 0 0 1 .41 0 .34.34 0 0 1 .22.29v1.09A1.68 1.68 0 0 0 11.05 22h1.89a1.69 1.69 0 0 0 1.69-1.68v-1.09c0-.14.11-.24.26-.3a.34.34 0 0 1 .37 0l.76.77a1.72 1.72 0 0 0 1.19.5 1.65 1.65 0 0 0 1.18-.5l1.34-1.34a1.67 1.67 0 0 0 0-2.37l-.73-.73a.34.34 0 0 1 0-.37.34.34 0 0 1 .29-.22h1.09A1.68 1.68 0 0 0 22 13v-1.94a1.69 1.69 0 0 0-1.68-1.69zM12 15.5a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5z"/></g></g>',settings:'<g data-name="Layer 2"><g data-name="settings"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="12" r="1.5"/><path d="M21.89 10.32L21.1 7.8a2.26 2.26 0 0 0-2.88-1.51l-.34.11a1.74 1.74 0 0 1-1.59-.26l-.11-.08a1.76 1.76 0 0 1-.69-1.43v-.28a2.37 2.37 0 0 0-.68-1.68 2.26 2.26 0 0 0-1.6-.67h-2.55a2.32 2.32 0 0 0-2.29 2.33v.24a1.94 1.94 0 0 1-.73 1.51l-.13.1a1.93 1.93 0 0 1-1.78.29 2.14 2.14 0 0 0-1.68.12 2.18 2.18 0 0 0-1.12 1.33l-.82 2.6a2.34 2.34 0 0 0 1.48 2.94h.16a1.83 1.83 0 0 1 1.12 1.22l.06.16a2.06 2.06 0 0 1-.23 1.86 2.37 2.37 0 0 0 .49 3.3l2.07 1.57a2.25 2.25 0 0 0 1.35.43A2 2 0 0 0 9 22a2.25 2.25 0 0 0 1.47-1l.23-.33a1.8 1.8 0 0 1 1.43-.77 1.75 1.75 0 0 1 1.5.78l.12.17a2.24 2.24 0 0 0 3.22.53L19 19.86a2.38 2.38 0 0 0 .5-3.23l-.26-.38A2 2 0 0 1 19 14.6a1.89 1.89 0 0 1 1.21-1.28l.2-.07a2.36 2.36 0 0 0 1.48-2.93zM12 15.5a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5z"/></g></g>',shake:'<g data-name="Layer 2"><g data-name="shake"><rect width="24" height="24" opacity="0"/><path d="M5.5 18a1 1 0 0 1-.64-.24A8.81 8.81 0 0 1 1.5 11a8.81 8.81 0 0 1 3.36-6.76 1 1 0 1 1 1.28 1.52A6.9 6.9 0 0 0 3.5 11a6.9 6.9 0 0 0 2.64 5.24 1 1 0 0 1 .13 1.4 1 1 0 0 1-.77.36z"/><path d="M12 7a4.09 4.09 0 0 1 1 .14V3a1 1 0 0 0-2 0v4.14A4.09 4.09 0 0 1 12 7z"/><path d="M12 15a4.09 4.09 0 0 1-1-.14V20a1 1 0 0 0 2 0v-5.14a4.09 4.09 0 0 1-1 .14z"/><path d="M16 16a1 1 0 0 1-.77-.36 1 1 0 0 1 .13-1.4A4.28 4.28 0 0 0 17 11a4.28 4.28 0 0 0-1.64-3.24 1 1 0 1 1 1.28-1.52A6.2 6.2 0 0 1 19 11a6.2 6.2 0 0 1-2.36 4.76A1 1 0 0 1 16 16z"/><path d="M8 16a1 1 0 0 1-.64-.24A6.2 6.2 0 0 1 5 11a6.2 6.2 0 0 1 2.36-4.76 1 1 0 1 1 1.28 1.52A4.28 4.28 0 0 0 7 11a4.28 4.28 0 0 0 1.64 3.24 1 1 0 0 1 .13 1.4A1 1 0 0 1 8 16z"/><path d="M18.5 18a1 1 0 0 1-.77-.36 1 1 0 0 1 .13-1.4A6.9 6.9 0 0 0 20.5 11a6.9 6.9 0 0 0-2.64-5.24 1 1 0 1 1 1.28-1.52A8.81 8.81 0 0 1 22.5 11a8.81 8.81 0 0 1-3.36 6.76 1 1 0 0 1-.64.24z"/><path d="M12 12a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-1zm0 0zm0 0zm0 0zm0 0zm0 0zm0 0z"/></g></g>',share:'<g data-name="Layer 2"><g data-name="share"><rect width="24" height="24" opacity="0"/><path d="M18 15a3 3 0 0 0-2.1.86L8 12.34V12v-.33l7.9-3.53A3 3 0 1 0 15 6v.34L7.1 9.86a3 3 0 1 0 0 4.28l7.9 3.53V18a3 3 0 1 0 3-3z"/></g></g>',"shield-off":'<g data-name="Layer 2"><g data-name="shield-off"><rect width="24" height="24" opacity="0"/><path d="M3.73 6.56A2 2 0 0 0 3 8.09v.14a15.17 15.17 0 0 0 7.72 13.2l.3.17a2 2 0 0 0 2 0l.3-.17a15.22 15.22 0 0 0 3-2.27z"/><path d="M18.84 16A15.08 15.08 0 0 0 21 8.23v-.14a2 2 0 0 0-1-1.75L13 2.4a2 2 0 0 0-2 0L7.32 4.49z"/><path d="M4.71 3.29a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',shield:'<g data-name="Layer 2"><g data-name="shield"><rect width="24" height="24" opacity="0"/><path d="M12 21.85a2 2 0 0 1-1-.25l-.3-.17A15.17 15.17 0 0 1 3 8.23v-.14a2 2 0 0 1 1-1.75l7-3.94a2 2 0 0 1 2 0l7 3.94a2 2 0 0 1 1 1.75v.14a15.17 15.17 0 0 1-7.72 13.2l-.3.17a2 2 0 0 1-.98.25z"/></g></g>',"shopping-bag":'<g data-name="Layer 2"><g data-name="shopping-bag"><rect width="24" height="24" opacity="0"/><path d="M20.12 6.71l-2.83-2.83A3 3 0 0 0 15.17 3H8.83a3 3 0 0 0-2.12.88L3.88 6.71A3 3 0 0 0 3 8.83V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8.83a3 3 0 0 0-.88-2.12zM12 16a4 4 0 0 1-4-4 1 1 0 0 1 2 0 2 2 0 0 0 4 0 1 1 0 0 1 2 0 4 4 0 0 1-4 4zM6.41 7l1.71-1.71A1.05 1.05 0 0 1 8.83 5h6.34a1.05 1.05 0 0 1 .71.29L17.59 7z"/></g></g>',"shopping-cart":'<g data-name="Layer 2"><g data-name="shopping-cart"><rect width="24" height="24" opacity="0"/><path d="M21.08 7a2 2 0 0 0-1.7-1H6.58L6 3.74A1 1 0 0 0 5 3H3a1 1 0 0 0 0 2h1.24L7 15.26A1 1 0 0 0 8 16h9a1 1 0 0 0 .89-.55l3.28-6.56A2 2 0 0 0 21.08 7z"/><circle cx="7.5" cy="19.5" r="1.5"/><circle cx="17.5" cy="19.5" r="1.5"/></g></g>',"shuffle-2":'<g data-name="Layer 2"><g data-name="shuffle-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.71 14.29a1 1 0 0 0-1.42 1.42l.29.29H16a4 4 0 0 1 0-8h1.59l-.3.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 10a1 1 0 0 0 .71-.29l2-2A1 1 0 0 0 21 7a1 1 0 0 0-.29-.71l-2-2a1 1 0 0 0-1.42 1.42l.29.29H16a6 6 0 0 0-5 2.69A6 6 0 0 0 6 6H4a1 1 0 0 0 0 2h2a4 4 0 0 1 0 8H4a1 1 0 0 0 0 2h2a6 6 0 0 0 5-2.69A6 6 0 0 0 16 18h1.59l-.3.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 20a1 1 0 0 0 .71-.29l2-2A1 1 0 0 0 21 17a1 1 0 0 0-.29-.71z"/></g></g>',shuffle:'<g data-name="Layer 2"><g data-name="shuffle"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 9.31a1 1 0 0 0 1 1 1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-4.3a1 1 0 0 0-1 1 1 1 0 0 0 1 1h1.89L12 10.59 6.16 4.76a1 1 0 0 0-1.41 1.41L10.58 12l-6.29 6.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42z"/><path d="M19 13.68a1 1 0 0 0-1 1v1.91l-2.78-2.79a1 1 0 0 0-1.42 1.42L16.57 18h-1.88a1 1 0 0 0 0 2H19a1 1 0 0 0 1-1.11v-4.21a1 1 0 0 0-1-1z"/></g></g>',"skip-back":'<g data-name="Layer 2"><g data-name="skip-back"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16.45 6.2a2.1 2.1 0 0 0-2.21.26l-5.1 4.21-.14.15V7a1 1 0 0 0-2 0v10a1 1 0 0 0 2 0v-3.82l.14.15 5.1 4.21a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59V7.79a1.76 1.76 0 0 0-1.05-1.59z"/></g></g>',"skip-forward":'<g data-name="Layer 2"><g data-name="skip-forward"><rect width="24" height="24" opacity="0"/><path d="M16 6a1 1 0 0 0-1 1v3.82l-.14-.15-5.1-4.21a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1 1.59v8.42a1.76 1.76 0 0 0 1 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l5.1-4.21.14-.15V17a1 1 0 0 0 2 0V7a1 1 0 0 0-1-1z"/></g></g>',slash:'<g data-name="Layer 2"><g data-name="slash"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm8 10a7.92 7.92 0 0 1-1.69 4.9L7.1 5.69A7.92 7.92 0 0 1 12 4a8 8 0 0 1 8 8zM4 12a7.92 7.92 0 0 1 1.69-4.9L16.9 18.31A7.92 7.92 0 0 1 12 20a8 8 0 0 1-8-8z"/></g></g>',smartphone:'<g data-name="Layer 2"><g data-name="smartphone"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17 2H7a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm-5 16a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 12 18zm2.5-10h-5a1 1 0 0 1 0-2h5a1 1 0 0 1 0 2z"/></g></g>',"smiling-face":'<defs><style/></defs><g id="Layer_2" data-name="Layer 2"><g id="smiling-face"><g id="smiling-face" data-name="smiling-face"><rect width="24" height="24" opacity="0"/><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm5 9a5 5 0 0 1-10 0z" id="&#x1F3A8;-Icon-&#x421;olor"/></g></g></g>',speaker:'<g data-name="Layer 2"><g data-name="speaker"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><circle cx="12" cy="15.5" r="1.5"/><circle cx="12" cy="8" r="1"/><path d="M17 2H7a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm-5 3a3 3 0 1 1-3 3 3 3 0 0 1 3-3zm0 14a3.5 3.5 0 1 1 3.5-3.5A3.5 3.5 0 0 1 12 19z"/></g></g>',square:'<g data-name="Layer 2"><g data-name="square"><rect width="24" height="24" opacity="0"/><path d="M18 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z"/></g></g>',star:'<g data-name="Layer 2"><g data-name="star"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17.56 21a1 1 0 0 1-.46-.11L12 18.22l-5.1 2.67a1 1 0 0 1-1.45-1.06l1-5.63-4.12-4a1 1 0 0 1-.25-1 1 1 0 0 1 .81-.68l5.7-.83 2.51-5.13a1 1 0 0 1 1.8 0l2.54 5.12 5.7.83a1 1 0 0 1 .81.68 1 1 0 0 1-.25 1l-4.12 4 1 5.63a1 1 0 0 1-.4 1 1 1 0 0 1-.62.18z"/></g></g>',"stop-circle":'<g data-name="Layer 2"><g data-name="stop-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4 12.75A1.25 1.25 0 0 1 14.75 16h-5.5A1.25 1.25 0 0 1 8 14.75v-5.5A1.25 1.25 0 0 1 9.25 8h5.5A1.25 1.25 0 0 1 16 9.25z"/><rect x="10" y="10" width="4" height="4"/></g></g>',sun:'<g data-name="Layer 2"><g data-name="sun"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 6a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1z"/><path d="M21 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M6 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1z"/><path d="M6.22 5a1 1 0 0 0-1.39 1.47l1.44 1.39a1 1 0 0 0 .73.28 1 1 0 0 0 .72-.31 1 1 0 0 0 0-1.41z"/><path d="M17 8.14a1 1 0 0 0 .69-.28l1.44-1.39A1 1 0 0 0 17.78 5l-1.44 1.42a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.31z"/><path d="M12 18a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-1-1z"/><path d="M17.73 16.14a1 1 0 0 0-1.39 1.44L17.78 19a1 1 0 0 0 .69.28 1 1 0 0 0 .72-.3 1 1 0 0 0 0-1.42z"/><path d="M6.27 16.14l-1.44 1.39a1 1 0 0 0 0 1.42 1 1 0 0 0 .72.3 1 1 0 0 0 .67-.25l1.44-1.39a1 1 0 0 0-1.39-1.44z"/><path d="M12 8a4 4 0 1 0 4 4 4 4 0 0 0-4-4z"/></g></g>',swap:'<g data-name="Layer 2"><g data-name="swap"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M4 9h13l-1.6 1.2a1 1 0 0 0-.2 1.4 1 1 0 0 0 .8.4 1 1 0 0 0 .6-.2l4-3a1 1 0 0 0 0-1.59l-3.86-3a1 1 0 0 0-1.23 1.58L17.08 7H4a1 1 0 0 0 0 2z"/><path d="M20 16H7l1.6-1.2a1 1 0 0 0-1.2-1.6l-4 3a1 1 0 0 0 0 1.59l3.86 3a1 1 0 0 0 .61.21 1 1 0 0 0 .79-.39 1 1 0 0 0-.17-1.4L6.92 18H20a1 1 0 0 0 0-2z"/></g></g>',sync:'<g data-name="Layer 2"><g data-name="sync"><rect width="24" height="24" opacity="0"/><path d="M21.66 10.37a.62.62 0 0 0 .07-.19l.75-4a1 1 0 0 0-2-.36l-.37 2a9.22 9.22 0 0 0-16.58.84 1 1 0 0 0 .55 1.3 1 1 0 0 0 1.31-.55A7.08 7.08 0 0 1 12.07 5a7.17 7.17 0 0 1 6.24 3.58l-1.65-.27a1 1 0 1 0-.32 2l4.25.71h.16a.93.93 0 0 0 .34-.06.33.33 0 0 0 .1-.06.78.78 0 0 0 .2-.11l.08-.1a1.07 1.07 0 0 0 .14-.16.58.58 0 0 0 .05-.16z"/><path d="M19.88 14.07a1 1 0 0 0-1.31.56A7.08 7.08 0 0 1 11.93 19a7.17 7.17 0 0 1-6.24-3.58l1.65.27h.16a1 1 0 0 0 .16-2L3.41 13a.91.91 0 0 0-.33 0H3a1.15 1.15 0 0 0-.32.14 1 1 0 0 0-.18.18l-.09.1a.84.84 0 0 0-.07.19.44.44 0 0 0-.07.17l-.75 4a1 1 0 0 0 .8 1.22h.18a1 1 0 0 0 1-.82l.37-2a9.22 9.22 0 0 0 16.58-.83 1 1 0 0 0-.57-1.28z"/></g></g>',text:'<g data-name="Layer 2"><g data-name="text"><rect width="24" height="24" opacity="0"/><path d="M20 4H4a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V6h6v13H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2h-2V6h6v2a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/></g></g>',"thermometer-minus":'<g data-name="Layer 2"><g data-name="thermometer-minus"><rect width="24" height="24" opacity="0"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1"/><path d="M14 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm1-12.46V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 14 4a1 1 0 0 0-1 1v4.54z"/></g></g>',"thermometer-plus":'<g data-name="Layer 2"><g data-name="thermometer-plus"><rect width="24" height="24" opacity="0"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1" transform="rotate(-90 5 6)"/><path d="M14 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm1-12.46V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 14 4a1 1 0 0 0-1 1v4.54z"/></g></g>',thermometer:'<g data-name="Layer 2"><g data-name="thermometer"><rect width="24" height="24" opacity="0"/><path d="M12 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm1-12.46V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 12 4a1 1 0 0 0-1 1v4.54z"/></g></g>',"toggle-left":'<g data-name="Layer 2"><g data-name="toggle-left"><rect x=".02" y=".02" width="23.97" height="23.97" transform="rotate(179.92 12.002 11.998)" opacity="0"/><path d="M15 5H9a7 7 0 0 0 0 14h6a7 7 0 0 0 0-14zM9 15a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/><path d="M9 11a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></g></g>',"toggle-right":'<g data-name="Layer 2"><g data-name="toggle-right"><rect width="24" height="24" opacity="0"/><circle cx="15" cy="12" r="1"/><path d="M15 5H9a7 7 0 0 0 0 14h6a7 7 0 0 0 0-14zm0 10a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/></g></g>',"trash-2":'<g data-name="Layer 2"><g data-name="trash-2"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0zm0-11.67c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM16 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0z"/></g></g>',trash:'<g data-name="Layer 2"><g data-name="trash"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4z"/></g></g>',"trending-down":'<g data-name="Layer 2"><g data-name="trending-down"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M21 12a1 1 0 0 0-2 0v2.3l-4.24-5a1 1 0 0 0-1.27-.21L9.22 11.7 4.77 6.36a1 1 0 1 0-1.54 1.28l5 6a1 1 0 0 0 1.28.22l4.28-2.57 4 4.71H15a1 1 0 0 0 0 2h5a1.1 1.1 0 0 0 .36-.07l.14-.08a1.19 1.19 0 0 0 .15-.09.75.75 0 0 0 .14-.17 1.1 1.1 0 0 0 .09-.14.64.64 0 0 0 .05-.17A.78.78 0 0 0 21 17z"/></g></g>',"trending-up":'<g data-name="Layer 2"><g data-name="trending-up"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M21 7a.78.78 0 0 0 0-.21.64.64 0 0 0-.05-.17 1.1 1.1 0 0 0-.09-.14.75.75 0 0 0-.14-.17l-.12-.07a.69.69 0 0 0-.19-.1h-.2A.7.7 0 0 0 20 6h-5a1 1 0 0 0 0 2h2.83l-4 4.71-4.32-2.57a1 1 0 0 0-1.28.22l-5 6a1 1 0 0 0 .13 1.41A1 1 0 0 0 4 18a1 1 0 0 0 .77-.36l4.45-5.34 4.27 2.56a1 1 0 0 0 1.27-.21L19 9.7V12a1 1 0 0 0 2 0V7z"/></g></g>',tv:'<g data-name="Layer 2"><g data-name="tv"><rect width="24" height="24" opacity="0"/><path d="M18 6h-3.59l2.3-2.29a1 1 0 1 0-1.42-1.42L12 5.59l-3.29-3.3a1 1 0 1 0-1.42 1.42L9.59 6H6a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3zm1 13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/></g></g>',twitter:'<g data-name="Layer 2"><g data-name="twitter"><polyline points="0 0 24 0 24 24 0 24" opacity="0"/><path d="M8.08 20A11.07 11.07 0 0 0 19.52 9 8.09 8.09 0 0 0 21 6.16a.44.44 0 0 0-.62-.51 1.88 1.88 0 0 1-2.16-.38 3.89 3.89 0 0 0-5.58-.17A4.13 4.13 0 0 0 11.49 9C8.14 9.2 5.84 7.61 4 5.43a.43.43 0 0 0-.75.24 9.68 9.68 0 0 0 4.6 10.05A6.73 6.73 0 0 1 3.38 18a.45.45 0 0 0-.14.84A11 11 0 0 0 8.08 20"/></g></g>',umbrella:'<g data-name="Layer 2"><g data-name="umbrella"><rect width="24" height="24" opacity="0"/><path d="M12 2A10 10 0 0 0 2 12a1 1 0 0 0 1 1h8v6a3 3 0 0 0 6 0 1 1 0 0 0-2 0 1 1 0 0 1-2 0v-6h8a1 1 0 0 0 1-1A10 10 0 0 0 12 2z"/></g></g>',undo:'<g data-name="Layer 2"><g data-name="undo"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M20.22 21a1 1 0 0 1-1-.76 8.91 8.91 0 0 0-7.8-6.69v1.12a1.78 1.78 0 0 1-1.09 1.64A2 2 0 0 1 8.18 16l-5.06-4.41a1.76 1.76 0 0 1 0-2.68l5.06-4.42a2 2 0 0 1 2.18-.3 1.78 1.78 0 0 1 1.09 1.64V7A10.89 10.89 0 0 1 21.5 17.75a10.29 10.29 0 0 1-.31 2.49 1 1 0 0 1-1 .76z"/></g></g>',unlock:'<g data-name="Layer 2"><g data-name="unlock"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="15" r="1"/><path d="M17 8h-7V6a2 2 0 0 1 4 0 1 1 0 0 0 2 0 4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-5 10a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/></g></g>',upload:'<g data-name="Layer 2"><g data-name="upload"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><rect x="4" y="4" width="16" height="2" rx="1" ry="1" transform="rotate(180 12 5)"/><rect x="17" y="5" width="4" height="2" rx="1" ry="1" transform="rotate(90 19 6)"/><rect x="3" y="5" width="4" height="2" rx="1" ry="1" transform="rotate(90 5 6)"/><path d="M8 14a1 1 0 0 1-.8-.4 1 1 0 0 1 .2-1.4l4-3a1 1 0 0 1 1.18 0l4 2.82a1 1 0 0 1 .24 1.39 1 1 0 0 1-1.4.24L12 11.24 8.6 13.8a1 1 0 0 1-.6.2z"/><path d="M12 21a1 1 0 0 1-1-1v-8a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1z"/></g></g>',"video-off":'<g data-name="Layer 2"><g data-name="video-off"><rect width="24" height="24" opacity="0"/><path d="M14.22 17.05L4.88 7.71 3.12 6 3 5.8A3 3 0 0 0 2 8v8a3 3 0 0 0 3 3h9a2.94 2.94 0 0 0 1.66-.51z"/><path d="M21 7.15a1.7 1.7 0 0 0-1.85.3l-2.15 2V8a3 3 0 0 0-3-3H7.83l1.29 1.29 6.59 6.59 2 2 2 2a1.73 1.73 0 0 0 .6.11 1.68 1.68 0 0 0 .69-.15 1.6 1.6 0 0 0 1-1.48V8.63a1.6 1.6 0 0 0-1-1.48z"/><path d="M17 15.59l-2-2L8.41 7l-2-2-1.7-1.71a1 1 0 0 0-1.42 1.42l.54.53L5.59 7l9.34 9.34 1.46 1.46 2.9 2.91a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',video:'<g data-name="Layer 2"><g data-name="video"><rect width="24" height="24" opacity="0"/><path d="M21 7.15a1.7 1.7 0 0 0-1.85.3l-2.15 2V8a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h9a3 3 0 0 0 3-3v-1.45l2.16 2a1.74 1.74 0 0 0 1.16.45 1.68 1.68 0 0 0 .69-.15 1.6 1.6 0 0 0 1-1.48V8.63A1.6 1.6 0 0 0 21 7.15z"/></g></g>',"volume-down":'<g data-name="Layer 2"><g data-name="volume-down"><rect width="24" height="24" opacity="0"/><path d="M20.78 8.37a1 1 0 1 0-1.56 1.26 4 4 0 0 1 0 4.74A1 1 0 0 0 20 16a1 1 0 0 0 .78-.37 6 6 0 0 0 0-7.26z"/><path d="M16.47 3.12a1 1 0 0 0-1 0L9 7.57H4a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4A1.06 1.06 0 0 0 16 21a1 1 0 0 0 1-1V4a1 1 0 0 0-.53-.88z"/></g></g>',"volume-mute":'<g data-name="Layer 2"><g data-name="volume-mute"><rect width="24" height="24" opacity="0"/><path d="M17 21a1.06 1.06 0 0 1-.57-.17L10 16.43H5a1 1 0 0 1-1-1V8.57a1 1 0 0 1 1-1h5l6.41-4.4A1 1 0 0 1 18 4v16a1 1 0 0 1-1 1z"/></g></g>',"volume-off":'<g data-name="Layer 2"><g data-name="volume-off"><rect width="24" height="24" opacity="0"/><path d="M16.91 14.08l1.44 1.44a6 6 0 0 0-.07-7.15 1 1 0 1 0-1.56 1.26 4 4 0 0 1 .19 4.45z"/><path d="M21 12a6.51 6.51 0 0 1-1.78 4.39l1.42 1.42A8.53 8.53 0 0 0 23 12a8.75 8.75 0 0 0-3.36-6.77 1 1 0 1 0-1.28 1.54A6.8 6.8 0 0 1 21 12z"/><path d="M15 12.17V4a1 1 0 0 0-1.57-.83L9 6.2z"/><path d="M4.74 7.57H2a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4A1.06 1.06 0 0 0 14 21a1 1 0 0 0 1-1v-2.17z"/><path d="M4.71 3.29a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"volume-up":'<g data-name="Layer 2"><g data-name="volume-up"><rect width="24" height="24" opacity="0"/><path d="M18.28 8.37a1 1 0 1 0-1.56 1.26 4 4 0 0 1 0 4.74A1 1 0 0 0 17.5 16a1 1 0 0 0 .78-.37 6 6 0 0 0 0-7.26z"/><path d="M19.64 5.23a1 1 0 1 0-1.28 1.54A6.8 6.8 0 0 1 21 12a6.8 6.8 0 0 1-2.64 5.23 1 1 0 0 0-.13 1.41A1 1 0 0 0 19 19a1 1 0 0 0 .64-.23A8.75 8.75 0 0 0 23 12a8.75 8.75 0 0 0-3.36-6.77z"/><path d="M14.47 3.12a1 1 0 0 0-1 0L7 7.57H2a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4A1.06 1.06 0 0 0 14 21a1 1 0 0 0 1-1V4a1 1 0 0 0-.53-.88z"/></g></g>',"wifi-off":'<g data-name="Layer 2"><g data-name="wifi-off"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="19" r="1"/><path d="M12.44 11l-1.9-1.89-2.46-2.44-1.55-1.55-1.82-1.83a1 1 0 0 0-1.42 1.42l1.38 1.37 1.46 1.46 2.23 2.24 1.55 1.54 2.74 2.74 2.79 2.8 3.85 3.85a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M21.72 7.93A13.93 13.93 0 0 0 12 4a14.1 14.1 0 0 0-4.44.73l1.62 1.62a11.89 11.89 0 0 1 11.16 3 1 1 0 0 0 .69.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.03-1.39z"/><path d="M3.82 6.65a14.32 14.32 0 0 0-1.54 1.28 1 1 0 0 0 1.38 1.44 13.09 13.09 0 0 1 1.6-1.29z"/><path d="M17 13.14a1 1 0 0 0 .71.3 1 1 0 0 0 .72-1.69A9 9 0 0 0 12 9h-.16l2.35 2.35A7 7 0 0 1 17 13.14z"/><path d="M7.43 10.26a8.8 8.8 0 0 0-1.9 1.49A1 1 0 0 0 7 13.14a7.3 7.3 0 0 1 2-1.41z"/><path d="M8.53 15.4a1 1 0 1 0 1.39 1.44 3.06 3.06 0 0 1 3.84-.25l-2.52-2.52a5 5 0 0 0-2.71 1.33z"/></g></g>',wifi:'<g data-name="Layer 2"><g data-name="wifi"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="19" r="1"/><path d="M12 14a5 5 0 0 0-3.47 1.4 1 1 0 1 0 1.39 1.44 3.08 3.08 0 0 1 4.16 0 1 1 0 1 0 1.39-1.44A5 5 0 0 0 12 14z"/><path d="M12 9a9 9 0 0 0-6.47 2.75A1 1 0 0 0 7 13.14a7 7 0 0 1 10.08 0 1 1 0 0 0 .71.3 1 1 0 0 0 .72-1.69A9 9 0 0 0 12 9z"/><path d="M21.72 7.93a14 14 0 0 0-19.44 0 1 1 0 0 0 1.38 1.44 12 12 0 0 1 16.68 0 1 1 0 0 0 .69.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.03-1.41z"/></g></g>',"activity-outline":'<g data-name="Layer 2"><g data-name="activity"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M14.33 20h-.21a2 2 0 0 1-1.76-1.58L9.68 6l-2.76 6.4A1 1 0 0 1 6 13H3a1 1 0 0 1 0-2h2.34l2.51-5.79a2 2 0 0 1 3.79.38L14.32 18l2.76-6.38A1 1 0 0 1 18 11h3a1 1 0 0 1 0 2h-2.34l-2.51 5.79A2 2 0 0 1 14.33 20z"/></g></g>',"alert-circle-outline":'<g data-name="Layer 2"><g data-name="alert-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><circle cx="12" cy="16" r="1"/><path d="M12 7a1 1 0 0 0-1 1v5a1 1 0 0 0 2 0V8a1 1 0 0 0-1-1z"/></g></g>',"alert-triangle-outline":'<g data-name="Layer 2"><g data-name="alert-triangle"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zm-1.7 2.05a1.31 1.31 0 0 1-1.19.65H4.33a1.31 1.31 0 0 1-1.19-.65 1 1 0 0 1 0-1l7.68-12.73a1.48 1.48 0 0 1 2.36 0l7.67 12.72a1 1 0 0 1 .01 1.01z"/><circle cx="12" cy="16" r="1"/><path d="M12 8a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g>',"archive-outline":'<g data-name="Layer 2"><g data-name="archive"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M21 6a3 3 0 0 0-3-3H6a3 3 0 0 0-2 5.22V18a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8.22A3 3 0 0 0 21 6zM6 5h12a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2zm12 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h12z"/><rect x="9" y="12" width="6" height="2" rx=".87" ry=".87"/></g></g>',"arrow-back-outline":'<g data-name="Layer 2"><g data-name="arrow-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"/></g></g>',"arrow-circle-down-outline":'<g data-name="Layer 2"><g data-name="arrow-circle-down"><rect width="24" height="24" opacity="0"/><path d="M14.31 12.41L13 13.66V8a1 1 0 0 0-2 0v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3a1 1 0 0 0 .33.21.94.94 0 0 0 .76 0 .54.54 0 0 0 .16-.1.49.49 0 0 0 .15-.1l3-2.86a1 1 0 0 0-1.38-1.45z"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/></g></g>',"arrow-circle-left-outline":'<g data-name="Layer 2"><g data-name="arrow-circle-left"><rect width="24" height="24" opacity="0"/><path d="M16 11h-5.66l1.25-1.31a1 1 0 0 0-1.45-1.38l-2.86 3a1 1 0 0 0-.09.13.72.72 0 0 0-.11.19.88.88 0 0 0-.06.28L7 12a1 1 0 0 0 .08.38 1 1 0 0 0 .21.32l3 3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L10.41 13H16a1 1 0 0 0 0-2z"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/></g></g>',"arrow-circle-right-outline":'<g data-name="Layer 2"><g data-name="arrow-circle-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M17 12v-.09a.88.88 0 0 0-.06-.28.72.72 0 0 0-.11-.19 1 1 0 0 0-.09-.13l-2.86-3a1 1 0 0 0-1.45 1.38L13.66 11H8a1 1 0 0 0 0 2h5.59l-1.3 1.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 .21-.32A1 1 0 0 0 17 12z"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/></g></g>',"arrow-circle-up-outline":'<g data-name="Layer 2"><g data-name="arrow-circle-up"><rect width="24" height="24" opacity="0"/><path d="M12.71 7.29a1 1 0 0 0-.32-.21A1 1 0 0 0 12 7h-.1a.82.82 0 0 0-.27.06.72.72 0 0 0-.19.11 1 1 0 0 0-.13.09l-3 2.86a1 1 0 0 0 1.38 1.45L11 10.34V16a1 1 0 0 0 2 0v-5.59l1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/></g></g>',"arrow-down-outline":'<g data-name="Layer 2"><g data-name="arrow-down"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M12 17a1.72 1.72 0 0 1-1.33-.64l-4.21-5.1a2.1 2.1 0 0 1-.26-2.21A1.76 1.76 0 0 1 7.79 8h8.42a1.76 1.76 0 0 1 1.59 1.05 2.1 2.1 0 0 1-.26 2.21l-4.21 5.1A1.72 1.72 0 0 1 12 17zm-3.91-7L12 14.82 16 10z"/></g></g>',"arrow-downward-outline":'<g data-name="Layer 2"><g data-name="arrow-downward"><rect width="24" height="24" opacity="0"/><path d="M18.77 13.36a1 1 0 0 0-1.41-.13L13 16.86V5a1 1 0 0 0-2 0v11.86l-4.36-3.63a1 1 0 1 0-1.28 1.54l6 5 .15.09.13.07a1 1 0 0 0 .72 0l.13-.07.15-.09 6-5a1 1 0 0 0 .13-1.41z"/></g></g>',"arrow-forward-outline":'<g data-name="Layer 2"><g data-name="arrow-forward"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M5 13h11.86l-3.63 4.36a1 1 0 0 0 1.54 1.28l5-6a1.19 1.19 0 0 0 .09-.15c0-.05.05-.08.07-.13A1 1 0 0 0 20 12a1 1 0 0 0-.07-.36c0-.05-.05-.08-.07-.13a1.19 1.19 0 0 0-.09-.15l-5-6A1 1 0 0 0 14 5a1 1 0 0 0-.64.23 1 1 0 0 0-.13 1.41L16.86 11H5a1 1 0 0 0 0 2z"/></g></g>',"arrow-ios-back-outline":'<g data-name="Layer 2"><g data-name="arrow-ios-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.83 19a1 1 0 0 1-.78-.37l-4.83-6a1 1 0 0 1 0-1.27l5-6a1 1 0 0 1 1.54 1.28L10.29 12l4.32 5.36a1 1 0 0 1-.78 1.64z"/></g></g>',"arrow-ios-downward-outline":'<g data-name="Layer 2"><g data-name="arrow-ios-downward"><rect width="24" height="24" opacity="0"/><path d="M12 16a1 1 0 0 1-.64-.23l-6-5a1 1 0 1 1 1.28-1.54L12 13.71l5.36-4.32a1 1 0 0 1 1.41.15 1 1 0 0 1-.14 1.46l-6 4.83A1 1 0 0 1 12 16z"/></g></g>',"arrow-ios-forward-outline":'<g data-name="Layer 2"><g data-name="arrow-ios-forward"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10 19a1 1 0 0 1-.64-.23 1 1 0 0 1-.13-1.41L13.71 12 9.39 6.63a1 1 0 0 1 .15-1.41 1 1 0 0 1 1.46.15l4.83 6a1 1 0 0 1 0 1.27l-5 6A1 1 0 0 1 10 19z"/></g></g>',"arrow-ios-upward-outline":'<g data-name="Layer 2"><g data-name="arrow-ios-upward"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 15a1 1 0 0 1-.64-.23L12 10.29l-5.37 4.32a1 1 0 0 1-1.41-.15 1 1 0 0 1 .15-1.41l6-4.83a1 1 0 0 1 1.27 0l6 5a1 1 0 0 1 .13 1.41A1 1 0 0 1 18 15z"/></g></g>',"arrow-left-outline":'<g data-name="Layer 2"><g data-name="arrow-left"><rect width="24" height="24" opacity="0"/><path d="M13.54 18a2.06 2.06 0 0 1-1.3-.46l-5.1-4.21a1.7 1.7 0 0 1 0-2.66l5.1-4.21a2.1 2.1 0 0 1 2.21-.26 1.76 1.76 0 0 1 1.05 1.59v8.42a1.76 1.76 0 0 1-1.05 1.59 2.23 2.23 0 0 1-.91.2zm-4.86-6l4.82 4V8.09z"/></g></g>',"arrow-right-outline":'<g data-name="Layer 2"><g data-name="arrow-right"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M10.46 18a2.23 2.23 0 0 1-.91-.2 1.76 1.76 0 0 1-1.05-1.59V7.79A1.76 1.76 0 0 1 9.55 6.2a2.1 2.1 0 0 1 2.21.26l5.1 4.21a1.7 1.7 0 0 1 0 2.66l-5.1 4.21a2.06 2.06 0 0 1-1.3.46zm0-10v7.9l4.86-3.9z"/></g></g>',"arrow-up-outline":'<g data-name="Layer 2"><g data-name="arrow-up"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M16.21 16H7.79a1.76 1.76 0 0 1-1.59-1 2.1 2.1 0 0 1 .26-2.21l4.21-5.1a1.76 1.76 0 0 1 2.66 0l4.21 5.1A2.1 2.1 0 0 1 17.8 15a1.76 1.76 0 0 1-1.59 1zM8 14h7.9L12 9.18z"/></g></g>',"arrow-upward-outline":'<g data-name="Layer 2"><g data-name="arrow-upward"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M5.23 10.64a1 1 0 0 0 1.41.13L11 7.14V19a1 1 0 0 0 2 0V7.14l4.36 3.63a1 1 0 1 0 1.28-1.54l-6-5-.15-.09-.13-.07a1 1 0 0 0-.72 0l-.13.07-.15.09-6 5a1 1 0 0 0-.13 1.41z"/></g></g>',"arrowhead-down-outline":'<g data-name="Layer 2"><g data-name="arrowhead-down"><rect width="24" height="24" opacity="0"/><path d="M17.37 12.39L12 16.71l-5.36-4.48a1 1 0 1 0-1.28 1.54l6 5a1 1 0 0 0 1.27 0l6-4.83a1 1 0 0 0 .15-1.41 1 1 0 0 0-1.41-.14z"/><path d="M11.36 11.77a1 1 0 0 0 1.27 0l6-4.83a1 1 0 0 0 .15-1.41 1 1 0 0 0-1.41-.15L12 9.71 6.64 5.23a1 1 0 0 0-1.28 1.54z"/></g></g>',"arrowhead-left-outline":'<g data-name="Layer 2"><g data-name="arrowhead-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M11.64 5.23a1 1 0 0 0-1.41.13l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63L7.29 12l4.48-5.37a1 1 0 0 0-.13-1.4z"/><path d="M14.29 12l4.48-5.37a1 1 0 0 0-1.54-1.28l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63z"/></g></g>',"arrowhead-right-outline":'<g data-name="Layer 2"><g data-name="arrowhead-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M18.78 11.37l-4.78-6a1 1 0 0 0-1.41-.15 1 1 0 0 0-.15 1.41L16.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 13 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/><path d="M7 5.37a1 1 0 0 0-1.61 1.26L9.71 12l-4.48 5.36a1 1 0 0 0 .13 1.41A1 1 0 0 0 6 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 0-1.27z"/></g></g>',"arrowhead-up-outline":'<g data-name="Layer 2"><g data-name="arrowhead-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M6.63 11.61L12 7.29l5.37 4.48A1 1 0 0 0 18 12a1 1 0 0 0 .77-.36 1 1 0 0 0-.13-1.41l-6-5a1 1 0 0 0-1.27 0l-6 4.83a1 1 0 0 0-.15 1.41 1 1 0 0 0 1.41.14z"/><path d="M12.64 12.23a1 1 0 0 0-1.27 0l-6 4.83a1 1 0 0 0-.15 1.41 1 1 0 0 0 1.41.15L12 14.29l5.37 4.48A1 1 0 0 0 18 19a1 1 0 0 0 .77-.36 1 1 0 0 0-.13-1.41z"/></g></g>',"at-outline":'<g data-name="Layer 2"><g data-name="at"><rect width="24" height="24" opacity="0"/><path d="M13 2a10 10 0 0 0-5 19.1 10.15 10.15 0 0 0 4 .9 10 10 0 0 0 6.08-2.06 1 1 0 0 0 .19-1.4 1 1 0 0 0-1.41-.19A8 8 0 1 1 12.77 4 8.17 8.17 0 0 1 20 12.22v.68a1.71 1.71 0 0 1-1.78 1.7 1.82 1.82 0 0 1-1.62-1.88V8.4a1 1 0 0 0-1-1 1 1 0 0 0-1 .87 5 5 0 0 0-3.44-1.36A5.09 5.09 0 1 0 15.31 15a3.6 3.6 0 0 0 5.55.61A3.67 3.67 0 0 0 22 12.9v-.68A10.2 10.2 0 0 0 13 2zm-1.82 13.09A3.09 3.09 0 1 1 14.27 12a3.1 3.1 0 0 1-3.09 3.09z"/></g></g>',"attach-2-outline":'<g data-name="Layer 2"><g data-name="attach-2"><rect width="24" height="24" opacity="0"/><path d="M12 22a5.86 5.86 0 0 1-6-5.7V6.13A4.24 4.24 0 0 1 10.33 2a4.24 4.24 0 0 1 4.34 4.13v10.18a2.67 2.67 0 0 1-5.33 0V6.92a1 1 0 0 1 1-1 1 1 0 0 1 1 1v9.39a.67.67 0 0 0 1.33 0V6.13A2.25 2.25 0 0 0 10.33 4 2.25 2.25 0 0 0 8 6.13V16.3a3.86 3.86 0 0 0 4 3.7 3.86 3.86 0 0 0 4-3.7V6.13a1 1 0 1 1 2 0V16.3a5.86 5.86 0 0 1-6 5.7z"/></g></g>',"attach-outline":'<g data-name="Layer 2"><g data-name="attach"><rect width="24" height="24" opacity="0"/><path d="M9.29 21a6.23 6.23 0 0 1-4.43-1.88 6 6 0 0 1-.22-8.49L12 3.2A4.11 4.11 0 0 1 15 2a4.48 4.48 0 0 1 3.19 1.35 4.36 4.36 0 0 1 .15 6.13l-7.4 7.43a2.54 2.54 0 0 1-1.81.75 2.72 2.72 0 0 1-1.95-.82 2.68 2.68 0 0 1-.08-3.77l6.83-6.86a1 1 0 0 1 1.37 1.41l-6.83 6.86a.68.68 0 0 0 .08.95.78.78 0 0 0 .53.23.56.56 0 0 0 .4-.16l7.39-7.43a2.36 2.36 0 0 0-.15-3.31 2.38 2.38 0 0 0-3.27-.15L6.06 12a4 4 0 0 0 .22 5.67 4.22 4.22 0 0 0 3 1.29 3.67 3.67 0 0 0 2.61-1.06l7.39-7.43a1 1 0 1 1 1.42 1.41l-7.39 7.43A5.65 5.65 0 0 1 9.29 21z"/></g></g>',"award-outline":'<g data-name="Layer 2"><g data-name="award"><rect width="24" height="24" opacity="0"/><path d="M19 20.75l-2.31-9A5.94 5.94 0 0 0 18 8 6 6 0 0 0 6 8a5.94 5.94 0 0 0 1.34 3.77L5 20.75a1 1 0 0 0 1.48 1.11l5.33-3.13 5.68 3.14A.91.91 0 0 0 18 22a1 1 0 0 0 1-1.25zM12 4a4 4 0 1 1-4 4 4 4 0 0 1 4-4zm.31 12.71a1 1 0 0 0-1 0l-3.75 2.2L9 13.21a5.94 5.94 0 0 0 5.92 0L16.45 19z"/></g></g>',"backspace-outline":'<g data-name="Layer 2"><g data-name="backspace"><rect width="24" height="24" opacity="0"/><path d="M20.14 4h-9.77a3 3 0 0 0-2 .78l-.1.11-6 7.48a1 1 0 0 0 .11 1.37l6 5.48a3 3 0 0 0 2 .78h9.77A1.84 1.84 0 0 0 22 18.18V5.82A1.84 1.84 0 0 0 20.14 4zM20 18h-9.63a1 1 0 0 1-.67-.26l-5.33-4.85 5.38-6.67a1 1 0 0 1 .62-.22H20z"/><path d="M11.29 14.71a1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L15.41 12l1.3-1.29a1 1 0 0 0-1.42-1.42L14 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42z"/></g></g>',"bar-chart-2-outline":'<g data-name="Layer 2"><g data-name="bar-chart-2"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M12 8a1 1 0 0 0-1 1v11a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/><path d="M19 4a1 1 0 0 0-1 1v15a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/><path d="M5 12a1 1 0 0 0-1 1v7a1 1 0 0 0 2 0v-7a1 1 0 0 0-1-1z"/></g></g>',"bar-chart-outline":'<g data-name="Layer 2"><g data-name="bar-chart"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M12 4a1 1 0 0 0-1 1v15a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/><path d="M19 12a1 1 0 0 0-1 1v7a1 1 0 0 0 2 0v-7a1 1 0 0 0-1-1z"/><path d="M5 8a1 1 0 0 0-1 1v11a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g>',"battery-outline":'<g data-name="Layer 2"><g data-name="battery"><rect width="24" height="24" opacity="0"/><path d="M15.83 6H4.17A2.31 2.31 0 0 0 2 8.43v7.14A2.31 2.31 0 0 0 4.17 18h11.66A2.31 2.31 0 0 0 18 15.57V8.43A2.31 2.31 0 0 0 15.83 6zm.17 9.57a.52.52 0 0 1-.17.43H4.18a.5.5 0 0 1-.18-.43V8.43A.53.53 0 0 1 4.17 8h11.65a.5.5 0 0 1 .18.43z"/><path d="M21 9a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1z"/></g></g>',"behance-outline":'<g data-name="Layer 2"><g data-name="behance"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M10.52 11.78a1.4 1.4 0 0 0 1.12-1.43c0-1-.77-1.6-1.94-1.6H7v6.5h2.7c1.3-.05 2.3-.72 2.3-1.88a1.52 1.52 0 0 0-1.48-1.59zM8.26 9.67h1.15c.6 0 .95.32.95.85s-.38.89-1.25.89h-.85zm1 4.57h-1V12.3h1.23c.75 0 1.17.38 1.17 1s-.42.94-1.44.94z"/><path d="M14.75 10.3a2.11 2.11 0 0 0-2.28 2.25V13a2.15 2.15 0 0 0 2.34 2.31A2 2 0 0 0 17 13.75h-1.21a.9.9 0 0 1-1 .63 1.07 1.07 0 0 1-1.09-1.19v-.14H17v-.47a2.12 2.12 0 0 0-2.25-2.28zm1 2h-2.02a1 1 0 0 1 1-1.09 1 1 0 0 1 1 1.09z"/><rect x="13.25" y="9.2" width="3" height=".5"/></g></g>',"bell-off-outline":'<g data-name="Layer 2"><g data-name="bell-off"><rect width="24" height="24" opacity="0"/><path d="M8.9 5.17A4.67 4.67 0 0 1 12.64 4a4.86 4.86 0 0 1 4.08 4.9v4.5a1.92 1.92 0 0 0 .1.59l3.6 3.6a1.58 1.58 0 0 0 .45-.6 1.62 1.62 0 0 0-.35-1.78l-1.8-1.81V8.94a6.86 6.86 0 0 0-5.82-6.88 6.71 6.71 0 0 0-5.32 1.61 6.88 6.88 0 0 0-.58.54l1.47 1.43a4.79 4.79 0 0 1 .43-.47z"/><path d="M14 16.86l-.83-.86H5.51l1.18-1.18a2 2 0 0 0 .59-1.42v-3.29l-2-2a5.68 5.68 0 0 0 0 .59v4.7l-1.8 1.81A1.63 1.63 0 0 0 4.64 18H8v.34A3.84 3.84 0 0 0 12 22a3.88 3.88 0 0 0 4-3.22l-.83-.78zM12 20a1.88 1.88 0 0 1-2-1.66V18h4v.34A1.88 1.88 0 0 1 12 20z"/><path d="M20.71 19.29L19.41 18l-2-2-9.52-9.53L6.42 5 4.71 3.29a1 1 0 0 0-1.42 1.42L5.53 7l1.75 1.7 7.31 7.3.07.07L16 17.41l.59.59 2.7 2.71a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"bell-outline":'<g data-name="Layer 2"><g data-name="bell"><rect width="24" height="24" opacity="0"/><path d="M20.52 15.21l-1.8-1.81V8.94a6.86 6.86 0 0 0-5.82-6.88 6.74 6.74 0 0 0-7.62 6.67v4.67l-1.8 1.81A1.64 1.64 0 0 0 4.64 18H8v.34A3.84 3.84 0 0 0 12 22a3.84 3.84 0 0 0 4-3.66V18h3.36a1.64 1.64 0 0 0 1.16-2.79zM14 18.34A1.88 1.88 0 0 1 12 20a1.88 1.88 0 0 1-2-1.66V18h4zM5.51 16l1.18-1.18a2 2 0 0 0 .59-1.42V8.73A4.73 4.73 0 0 1 8.9 5.17 4.67 4.67 0 0 1 12.64 4a4.86 4.86 0 0 1 4.08 4.9v4.5a2 2 0 0 0 .58 1.42L18.49 16z"/></g></g>',"bluetooth-outline":'<g data-name="Layer 2"><g data-name="bluetooth"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.63 12l4-3.79a1.14 1.14 0 0 0-.13-1.77l-4.67-3.23a1.17 1.17 0 0 0-1.21-.08 1.15 1.15 0 0 0-.62 1v6.2l-3.19-4a1 1 0 0 0-1.56 1.3L9.72 12l-3.5 4.43a1 1 0 0 0 .16 1.4A1 1 0 0 0 7 18a1 1 0 0 0 .78-.38L11 13.56v6.29A1.16 1.16 0 0 0 12.16 21a1.16 1.16 0 0 0 .67-.21l4.64-3.18a1.17 1.17 0 0 0 .49-.85 1.15 1.15 0 0 0-.34-.91zM13 5.76l2.5 1.73L13 9.85zm0 12.49v-4.07l2.47 2.38z"/></g></g>',"book-open-outline":'<g data-name="Layer 2"><g data-name="book-open"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.62 4.22a1 1 0 0 0-.84-.2L12 5.77 4.22 4A1 1 0 0 0 3 5v12.2a1 1 0 0 0 .78 1l8 1.8h.44l8-1.8a1 1 0 0 0 .78-1V5a1 1 0 0 0-.38-.78zM5 6.25l6 1.35v10.15L5 16.4zM19 16.4l-6 1.35V7.6l6-1.35z"/></g></g>',"book-outline":'<g data-name="Layer 2"><g data-name="book"><rect width="24" height="24" opacity="0"/><path d="M19 3H7a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM7 5h11v10H7a3 3 0 0 0-1 .18V6a1 1 0 0 1 1-1zm0 14a1 1 0 0 1 0-2h11v2z"/></g></g>',"bookmark-outline":'<g data-name="Layer 2"><g data-name="bookmark"><rect width="24" height="24" opacity="0"/><path d="M6.09 21.06a1 1 0 0 1-1-1L4.94 5.4a2.26 2.26 0 0 1 2.18-2.35L16.71 3a2.27 2.27 0 0 1 2.23 2.31l.14 14.66a1 1 0 0 1-.49.87 1 1 0 0 1-1 0l-5.7-3.16-5.29 3.23a1.2 1.2 0 0 1-.51.15zm5.76-5.55a1.11 1.11 0 0 1 .5.12l4.71 2.61-.12-12.95c0-.2-.13-.34-.21-.33l-9.6.09c-.08 0-.19.13-.19.33l.12 12.9 4.28-2.63a1.06 1.06 0 0 1 .51-.14z"/></g></g>',"briefcase-outline":'<g data-name="Layer 2"><g data-name="briefcase"><rect width="24" height="24" opacity="0"/><path d="M19 7h-3V5.5A2.5 2.5 0 0 0 13.5 3h-3A2.5 2.5 0 0 0 8 5.5V7H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-4 2v10H9V9zm-5-3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h-4zM4 18v-8a1 1 0 0 1 1-1h2v10H5a1 1 0 0 1-1-1zm16 0a1 1 0 0 1-1 1h-2V9h2a1 1 0 0 1 1 1z"/></g></g>',"browser-outline":'<g data-name="Layer 2"><g data-name="browser"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-7h14zM5 9V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3z"/><circle cx="8" cy="7.03" r="1"/><circle cx="12" cy="7.03" r="1"/></g></g>',"brush-outline":'<g data-name="Layer 2"><g data-name="brush"><rect width="24" height="24" opacity="0"/><path d="M20 6.83a2.76 2.76 0 0 0-.82-2 2.89 2.89 0 0 0-4 0l-6.6 6.6h-.22a4.42 4.42 0 0 0-4.3 4.31L4 19a1 1 0 0 0 .29.73A1.05 1.05 0 0 0 5 20l3.26-.06a4.42 4.42 0 0 0 4.31-4.3v-.23l6.61-6.6A2.74 2.74 0 0 0 20 6.83zM8.25 17.94L6 18v-2.23a2.4 2.4 0 0 1 2.4-2.36 2.15 2.15 0 0 1 2.15 2.19 2.4 2.4 0 0 1-2.3 2.34zm9.52-10.55l-5.87 5.87a4.55 4.55 0 0 0-.52-.64 3.94 3.94 0 0 0-.64-.52l5.87-5.86a.84.84 0 0 1 1.16 0 .81.81 0 0 1 .23.59.79.79 0 0 1-.23.56z"/></g></g>',"bulb-outline":'<g data-name="Layer 2"><g data-name="bulb"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 7a5 5 0 0 0-3 9v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a5 5 0 0 0-3-9zm1.5 7.59a1 1 0 0 0-.5.87V20h-2v-4.54a1 1 0 0 0-.5-.87A3 3 0 0 1 9 12a3 3 0 0 1 6 0 3 3 0 0 1-1.5 2.59z"/><path d="M12 6a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1z"/><path d="M21 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M5 11H3a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M7.66 6.42L6.22 5a1 1 0 0 0-1.39 1.47l1.44 1.39a1 1 0 0 0 .73.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.06-1.41z"/><path d="M19.19 5.05a1 1 0 0 0-1.41 0l-1.44 1.37a1 1 0 0 0 0 1.41 1 1 0 0 0 .72.31 1 1 0 0 0 .69-.28l1.44-1.39a1 1 0 0 0 0-1.42z"/></g></g>',"calendar-outline":'<g data-name="Layer 2"><g data-name="calendar"><rect width="24" height="24" opacity="0"/><path d="M18 4h-1V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zM6 6h1v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h1a1 1 0 0 1 1 1v4H5V7a1 1 0 0 1 1-1zm12 14H6a1 1 0 0 1-1-1v-6h14v6a1 1 0 0 1-1 1z"/><circle cx="8" cy="16" r="1"/><path d="M16 15h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/></g></g>',"camera-outline":'<g data-name="Layer 2"><g data-name="camera"><rect width="24" height="24" opacity="0"/><path d="M19 7h-3V5.5A2.5 2.5 0 0 0 13.5 3h-3A2.5 2.5 0 0 0 8 5.5V7H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-9-1.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h-4zM20 18a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1z"/><path d="M12 10.5a3.5 3.5 0 1 0 3.5 3.5 3.5 3.5 0 0 0-3.5-3.5zm0 5a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5z"/></g></g>',"car-outline":'<g data-name="Layer 2"><g data-name="car"><rect width="24" height="24" opacity="0"/><path d="M21.6 11.22L17 7.52V5a1.91 1.91 0 0 0-1.81-2H3.79A1.91 1.91 0 0 0 2 5v10a2 2 0 0 0 1.2 1.88 3 3 0 1 0 5.6.12h6.36a3 3 0 1 0 5.64 0h.2a1 1 0 0 0 1-1v-4a1 1 0 0 0-.4-.78zM20 12.48V15h-3v-4.92zM7 18a1 1 0 1 1-1-1 1 1 0 0 1 1 1zm5-3H4V5h11v10zm7 3a1 1 0 1 1-1-1 1 1 0 0 1 1 1z"/></g></g>',"cast-outline":'<g data-name="Layer 2"><g data-name="cast"><polyline points="24 24 0 24 0 0" opacity="0"/><path d="M18.4 3H5.6A2.7 2.7 0 0 0 3 5.78V7a1 1 0 0 0 2 0V5.78A.72.72 0 0 1 5.6 5h12.8a.72.72 0 0 1 .6.78v12.44a.72.72 0 0 1-.6.78H17a1 1 0 0 0 0 2h1.4a2.7 2.7 0 0 0 2.6-2.78V5.78A2.7 2.7 0 0 0 18.4 3z"/><path d="M3.86 14A1 1 0 0 0 3 15.17a1 1 0 0 0 1.14.83 2.49 2.49 0 0 1 2.12.72 2.52 2.52 0 0 1 .51 2.84 1 1 0 0 0 .48 1.33 1.06 1.06 0 0 0 .42.09 1 1 0 0 0 .91-.58A4.52 4.52 0 0 0 3.86 14z"/><path d="M3.86 10.08a1 1 0 0 0 .28 2 6 6 0 0 1 5.09 1.71 6 6 0 0 1 1.53 5.95 1 1 0 0 0 .68 1.26.9.9 0 0 0 .28 0 1 1 0 0 0 1-.72 8 8 0 0 0-8.82-10.2z"/><circle cx="4" cy="19" r="1"/></g></g>',"charging-outline":'<g data-name="Layer 2"><g data-name="charging"><rect width="24" height="24" opacity="0"/><path d="M21 9a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1z"/><path d="M15.83 6h-3.1l-1.14 2h4.23a.5.5 0 0 1 .18.43v7.14a.52.52 0 0 1-.17.43H13l-1.15 2h4A2.31 2.31 0 0 0 18 15.57V8.43A2.31 2.31 0 0 0 15.83 6z"/><path d="M4 15.57V8.43A.53.53 0 0 1 4.17 8H7l1.13-2h-4A2.31 2.31 0 0 0 2 8.43v7.14A2.31 2.31 0 0 0 4.17 18h3.1l1.14-2H4.18a.5.5 0 0 1-.18-.43z"/><path d="M9 20a1 1 0 0 1-.87-1.5l3.15-5.5H7a1 1 0 0 1-.86-.5 1 1 0 0 1 0-1l4-7a1 1 0 0 1 1.74 1L8.72 11H13a1 1 0 0 1 .86.5 1 1 0 0 1 0 1l-4 7A1 1 0 0 1 9 20z"/></g></g>',"checkmark-circle-2-outline":'<g data-name="Layer 2"><g data-name="checkmark-circle-2"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M14.7 8.39l-3.78 5-1.63-2.11a1 1 0 0 0-1.58 1.23l2.43 3.11a1 1 0 0 0 .79.38 1 1 0 0 0 .79-.39l4.57-6a1 1 0 1 0-1.6-1.22z"/></g></g>',"checkmark-circle-outline":'<g data-name="Layer 2"><g data-name="checkmark-circle"><rect width="24" height="24" opacity="0"/><path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/><path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/></g></g>',"checkmark-outline":'<g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g>',"checkmark-square-2-outline":'<g data-name="Layer 2"><g data-name="checkmark-square-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/><path d="M14.7 8.39l-3.78 5-1.63-2.11a1 1 0 0 0-1.58 1.23l2.43 3.11a1 1 0 0 0 .79.38 1 1 0 0 0 .79-.39l4.57-6a1 1 0 1 0-1.6-1.22z"/></g></g>',"checkmark-square-outline":'<g data-name="Layer 2"><g data-name="checkmark-square"><rect width="24" height="24" opacity="0"/><path d="M20 11.83a1 1 0 0 0-1 1v5.57a.6.6 0 0 1-.6.6H5.6a.6.6 0 0 1-.6-.6V5.6a.6.6 0 0 1 .6-.6h9.57a1 1 0 1 0 0-2H5.6A2.61 2.61 0 0 0 3 5.6v12.8A2.61 2.61 0 0 0 5.6 21h12.8a2.61 2.61 0 0 0 2.6-2.6v-5.57a1 1 0 0 0-1-1z"/><path d="M10.72 11a1 1 0 0 0-1.44 1.38l2.22 2.33a1 1 0 0 0 .72.31 1 1 0 0 0 .72-.3l6.78-7a1 1 0 1 0-1.44-1.4l-6.05 6.26z"/></g></g>',"chevron-down-outline":'<g data-name="Layer 2"><g data-name="chevron-down"><rect width="24" height="24" opacity="0"/><path d="M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z"/></g></g>',"chevron-left-outline":'<g data-name="Layer 2"><g data-name="chevron-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z"/></g></g>',"chevron-right-outline":'<g data-name="Layer 2"><g data-name="chevron-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z"/></g></g>',"chevron-up-outline":'<g data-name="Layer 2"><g data-name="chevron-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z"/></g></g>',"clipboard-outline":'<g data-name="Layer 2"><g data-name="clipboard"><rect width="24" height="24" opacity="0"/><path d="M18 5V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v1a3 3 0 0 0-3 3v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3zM8 4h8v4H8V4zm11 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7a1 1 0 0 1 1 1z"/></g></g>',"clock-outline":'<g data-name="Layer 2"><g data-name="clock"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M16 11h-3V8a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2z"/></g></g>',"close-circle-outline":'<g data-name="Layer 2"><g data-name="close-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M14.71 9.29a1 1 0 0 0-1.42 0L12 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12l1.3-1.29a1 1 0 0 0 0-1.42z"/></g></g>',"close-outline":'<g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"close-square-outline":'<g data-name="Layer 2"><g data-name="close-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/><path d="M14.71 9.29a1 1 0 0 0-1.42 0L12 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12l1.3-1.29a1 1 0 0 0 0-1.42z"/></g></g>',"cloud-download-outline":'<g data-name="Layer 2"><g data-name="cloud-download"><rect width="24" height="24" opacity="0"/><path d="M14.31 16.38L13 17.64V12a1 1 0 0 0-2 0v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 21a1 1 0 0 0 .69-.28l3-2.9a1 1 0 1 0-1.38-1.44z"/><path d="M17.67 7A6 6 0 0 0 6.33 7a5 5 0 0 0-3.08 8.27A1 1 0 1 0 4.75 14 3 3 0 0 1 7 9h.1a1 1 0 0 0 1-.8 4 4 0 0 1 7.84 0 1 1 0 0 0 1 .8H17a3 3 0 0 1 2.25 5 1 1 0 0 0 .09 1.42 1 1 0 0 0 .66.25 1 1 0 0 0 .75-.34A5 5 0 0 0 17.67 7z"/></g></g>',"cloud-upload-outline":'<g data-name="Layer 2"><g data-name="cloud-upload"><rect width="24" height="24" opacity="0"/><path d="M12.71 11.29a1 1 0 0 0-1.4 0l-3 2.9a1 1 0 1 0 1.38 1.44L11 14.36V20a1 1 0 0 0 2 0v-5.59l1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M17.67 7A6 6 0 0 0 6.33 7a5 5 0 0 0-3.08 8.27A1 1 0 1 0 4.75 14 3 3 0 0 1 7 9h.1a1 1 0 0 0 1-.8 4 4 0 0 1 7.84 0 1 1 0 0 0 1 .8H17a3 3 0 0 1 2.25 5 1 1 0 0 0 .09 1.42 1 1 0 0 0 .66.25 1 1 0 0 0 .75-.34A5 5 0 0 0 17.67 7z"/></g></g>',"code-download-outline":'<g data-name="Layer 2"><g data-name="code-download"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M4.29 12l4.48-5.36a1 1 0 1 0-1.54-1.28l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63z"/><path d="M21.78 11.37l-4.78-6a1 1 0 0 0-1.56 1.26L19.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 16 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/><path d="M15.72 11.41a1 1 0 0 0-1.41 0L13 12.64V8a1 1 0 0 0-2 0v4.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .69-.28l3-2.9a1 1 0 0 0 .03-1.41z"/></g></g>',"code-outline":'<g data-name="Layer 2"><g data-name="code"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M8.64 5.23a1 1 0 0 0-1.41.13l-5 6a1 1 0 0 0 0 1.27l4.83 6a1 1 0 0 0 .78.37 1 1 0 0 0 .78-1.63L4.29 12l4.48-5.36a1 1 0 0 0-.13-1.41z"/><path d="M21.78 11.37l-4.78-6a1 1 0 0 0-1.41-.15 1 1 0 0 0-.15 1.41L19.71 12l-4.48 5.37a1 1 0 0 0 .13 1.41A1 1 0 0 0 16 19a1 1 0 0 0 .77-.36l5-6a1 1 0 0 0 .01-1.27z"/></g></g>',"collapse-outline":'<g data-name="Layer 2"><g data-name="collapse"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z"/><path d="M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z"/></g></g>',"color-palette-outline":'<g data-name="Layer 2"><g data-name="color-palette"><rect width="24" height="24" opacity="0"/><path d="M19.54 5.08A10.61 10.61 0 0 0 11.91 2a10 10 0 0 0-.05 20 2.58 2.58 0 0 0 2.53-1.89 2.52 2.52 0 0 0-.57-2.28.5.5 0 0 1 .37-.83h1.65A6.15 6.15 0 0 0 22 11.33a8.48 8.48 0 0 0-2.46-6.25zM15.88 15h-1.65a2.49 2.49 0 0 0-1.87 4.15.49.49 0 0 1 .12.49c-.05.21-.28.34-.59.36a8 8 0 0 1-7.82-9.11A8.1 8.1 0 0 1 11.92 4H12a8.47 8.47 0 0 1 6.1 2.48 6.5 6.5 0 0 1 1.9 4.77A4.17 4.17 0 0 1 15.88 15z"/><circle cx="12" cy="6.5" r="1.5"/><path d="M15.25 7.2a1.5 1.5 0 1 0 2.05.55 1.5 1.5 0 0 0-2.05-.55z"/><path d="M8.75 7.2a1.5 1.5 0 1 0 .55 2.05 1.5 1.5 0 0 0-.55-2.05z"/><path d="M6.16 11.26a1.5 1.5 0 1 0 2.08.4 1.49 1.49 0 0 0-2.08-.4z"/></g></g>',"color-picker-outline":'<g data-name="Layer 2"><g data-name="color-picker"><rect width="24" height="24" opacity="0"/><path d="M19.4 7.34L16.66 4.6A1.92 1.92 0 0 0 14 4.53l-2 2-1.29-1.24a1 1 0 0 0-1.42 1.42L10.53 8 5 13.53a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l5.58-5.58 1.24 1.24a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-1.24-1.24 2-2a1.92 1.92 0 0 0-.07-2.71zM9.08 17.62l-3 .28.27-3L12 9.36l2.69 2.7zm7-7L13.36 8l1.91-2L18 8.73z"/></g></g>',"compass-outline":'<g data-name="Layer 2"><g data-name="compass"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M15.68 8.32a1 1 0 0 0-1.1-.25l-4.21 1.7a1 1 0 0 0-.55.55l-1.75 4.26a1 1 0 0 0 .18 1h.05A1 1 0 0 0 9 16a1 1 0 0 0 .38-.07l4.21-1.7a1 1 0 0 0 .55-.55l1.75-4.26a1 1 0 0 0-.21-1.1zm-4.88 4.89l.71-1.74 1.69-.68-.71 1.74z"/></g></g>',"copy-outline":'<g data-name="Layer 2"><g data-name="copy"><rect width="24" height="24" opacity="0"/><path d="M18 21h-6a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3zm-6-10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1z"/><path d="M9.73 15H5.67A2.68 2.68 0 0 1 3 12.33V5.67A2.68 2.68 0 0 1 5.67 3h6.66A2.68 2.68 0 0 1 15 5.67V9.4h-2V5.67a.67.67 0 0 0-.67-.67H5.67a.67.67 0 0 0-.67.67v6.66a.67.67 0 0 0 .67.67h4.06z"/></g></g>',"corner-down-left-outline":'<g data-name="Layer 2"><g data-name="corner-down-left"><rect x=".05" y=".05" width="24" height="24" transform="rotate(-89.76 12.05 12.05)" opacity="0"/><path d="M20 6a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 1-.29.71A1 1 0 0 1 17 12H8.08l2.69-3.39a1 1 0 0 0-1.52-1.17l-4 5a1 1 0 0 0 0 1.25l4 5a1 1 0 0 0 .78.37 1 1 0 0 0 .62-.22 1 1 0 0 0 .15-1.41l-2.66-3.36h8.92a3 3 0 0 0 3-3z"/></g></g>',"corner-down-right-outline":'<g data-name="Layer 2"><g data-name="corner-down-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19.78 12.38l-4-5a1 1 0 0 0-1.56 1.24l2.7 3.38H8a1 1 0 0 1-1-1V6a1 1 0 0 0-2 0v5a3 3 0 0 0 3 3h8.92l-2.7 3.38a1 1 0 0 0 .16 1.4A1 1 0 0 0 15 19a1 1 0 0 0 .78-.38l4-5a1 1 0 0 0 0-1.24z"/></g></g>',"corner-left-down-outline":'<g data-name="Layer 2"><g data-name="corner-left-down"><rect width="24" height="24" opacity="0"/><path d="M18 5h-5a3 3 0 0 0-3 3v8.92l-3.38-2.7a1 1 0 0 0-1.24 1.56l5 4a1 1 0 0 0 1.24 0l5-4a1 1 0 1 0-1.24-1.56L12 16.92V8a1 1 0 0 1 1-1h5a1 1 0 0 0 0-2z"/></g></g>',"corner-left-up-outline":'<g data-name="Layer 2"><g data-name="corner-left-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 17h-5a1 1 0 0 1-1-1V7.08l3.38 2.7A1 1 0 0 0 16 10a1 1 0 0 0 .78-.38 1 1 0 0 0-.16-1.4l-5-4a1 1 0 0 0-1.24 0l-5 4a1 1 0 0 0 1.24 1.56L10 7.08V16a3 3 0 0 0 3 3h5a1 1 0 0 0 0-2z"/></g></g>',"corner-right-down-outline":'<g data-name="Layer 2"><g data-name="corner-right-down"><rect width="24" height="24" opacity="0"/><path d="M18.78 14.38a1 1 0 0 0-1.4-.16L14 16.92V8a3 3 0 0 0-3-3H6a1 1 0 0 0 0 2h5a1 1 0 0 1 1 1v8.92l-3.38-2.7a1 1 0 0 0-1.24 1.56l5 4a1 1 0 0 0 1.24 0l5-4a1 1 0 0 0 .16-1.4z"/></g></g>',"corner-right-up-outline":'<g data-name="Layer 2"><g data-name="corner-right-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.62 8.22l-5-4a1 1 0 0 0-1.24 0l-5 4a1 1 0 0 0 1.24 1.56L12 7.08V16a1 1 0 0 1-1 1H6a1 1 0 0 0 0 2h5a3 3 0 0 0 3-3V7.08l3.38 2.7A1 1 0 0 0 18 10a1 1 0 0 0 .78-.38 1 1 0 0 0-.16-1.4z"/></g></g>',"corner-up-left-outline":'<g data-name="Layer 2"><g data-name="corner-up-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M16 10H7.08l2.7-3.38a1 1 0 1 0-1.56-1.24l-4 5a1 1 0 0 0 0 1.24l4 5A1 1 0 0 0 9 17a1 1 0 0 0 .62-.22 1 1 0 0 0 .16-1.4L7.08 12H16a1 1 0 0 1 1 1v5a1 1 0 0 0 2 0v-5a3 3 0 0 0-3-3z"/></g></g>',"corner-up-right-outline":'<g data-name="Layer 2"><g data-name="corner-up-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19.78 10.38l-4-5a1 1 0 0 0-1.56 1.24l2.7 3.38H8a3 3 0 0 0-3 3v5a1 1 0 0 0 2 0v-5a1 1 0 0 1 1-1h8.92l-2.7 3.38a1 1 0 0 0 .16 1.4A1 1 0 0 0 15 17a1 1 0 0 0 .78-.38l4-5a1 1 0 0 0 0-1.24z"/></g></g>',"credit-card-outline":'<g data-name="Layer 2"><g data-name="credit-card"><rect width="24" height="24" opacity="0"/><path d="M19 5H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3zM4 8a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v1H4zm16 8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-5h16z"/><path d="M7 15h4a1 1 0 0 0 0-2H7a1 1 0 0 0 0 2z"/><path d="M15 15h2a1 1 0 0 0 0-2h-2a1 1 0 0 0 0 2z"/></g></g>',"crop-outline":'<g data-name="Layer 2"><g data-name="crop"><rect width="24" height="24" opacity="0"/><path d="M21 16h-3V8.56A2.56 2.56 0 0 0 15.44 6H8V3a1 1 0 0 0-2 0v3H3a1 1 0 0 0 0 2h3v7.44A2.56 2.56 0 0 0 8.56 18H16v3a1 1 0 0 0 2 0v-3h3a1 1 0 0 0 0-2zM8.56 16a.56.56 0 0 1-.56-.56V8h7.44a.56.56 0 0 1 .56.56V16z"/></g></g>',"cube-outline":'<g data-name="Layer 2"><g data-name="cube"><rect width="24" height="24" opacity="0"/><path d="M20.66 7.26c0-.07-.1-.14-.15-.21l-.09-.1a2.5 2.5 0 0 0-.86-.68l-6.4-3a2.7 2.7 0 0 0-2.26 0l-6.4 3a2.6 2.6 0 0 0-.86.68L3.52 7a1 1 0 0 0-.15.2A2.39 2.39 0 0 0 3 8.46v7.06a2.49 2.49 0 0 0 1.46 2.26l6.4 3a2.7 2.7 0 0 0 2.27 0l6.4-3A2.49 2.49 0 0 0 21 15.54V8.46a2.39 2.39 0 0 0-.34-1.2zm-8.95-2.2a.73.73 0 0 1 .58 0l5.33 2.48L12 10.15 6.38 7.54zM5.3 16a.47.47 0 0 1-.3-.43V9.1l6 2.79v6.72zm13.39 0L13 18.61v-6.72l6-2.79v6.44a.48.48 0 0 1-.31.46z"/></g></g>',"diagonal-arrow-left-down-outline":'<g data-name="Layer 2"><g data-name="diagonal-arrow-left-down"><rect width="24" height="24" opacity="0"/><path d="M17.71 6.29a1 1 0 0 0-1.42 0L8 14.59V9a1 1 0 0 0-2 0v8a1 1 0 0 0 1 1h8a1 1 0 0 0 0-2H9.41l8.3-8.29a1 1 0 0 0 0-1.42z"/></g></g>',"diagonal-arrow-left-up-outline":'<g data-name="Layer 2"><g data-name="diagonal-arrow-left-up"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17.71 16.29L9.42 8H15a1 1 0 0 0 0-2H7.05a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1H7a1 1 0 0 0 1-1V9.45l8.26 8.26a1 1 0 0 0 1.42 0 1 1 0 0 0 .03-1.42z"/></g></g>',"diagonal-arrow-right-down-outline":'<g data-name="Layer 2"><g data-name="diagonal-arrow-right-down"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M17 8a1 1 0 0 0-1 1v5.59l-8.29-8.3a1 1 0 0 0-1.42 1.42l8.3 8.29H9a1 1 0 0 0 0 2h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"/></g></g>',"diagonal-arrow-right-up-outline":'<g data-name="Layer 2"><g data-name="diagonal-arrow-right-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 7.05a1 1 0 0 0-1-1L9 6a1 1 0 0 0 0 2h5.56l-8.27 8.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L16 9.42V15a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/></g></g>',"done-all-outline":'<g data-name="Layer 2"><g data-name="done-all"><rect width="24" height="24" opacity="0"/><path d="M16.62 6.21a1 1 0 0 0-1.41.17l-7 9-3.43-4.18a1 1 0 1 0-1.56 1.25l4.17 5.18a1 1 0 0 0 .78.37 1 1 0 0 0 .83-.38l7.83-10a1 1 0 0 0-.21-1.41z"/><path d="M21.62 6.21a1 1 0 0 0-1.41.17l-7 9-.61-.75-1.26 1.62 1.1 1.37a1 1 0 0 0 .78.37 1 1 0 0 0 .78-.38l7.83-10a1 1 0 0 0-.21-1.4z"/><path d="M8.71 13.06L10 11.44l-.2-.24a1 1 0 0 0-1.43-.2 1 1 0 0 0-.15 1.41z"/></g></g>',"download-outline":'<g data-name="Layer 2"><g data-name="download"><rect width="24" height="24" opacity="0"/><rect x="4" y="18" width="16" height="2" rx="1" ry="1"/><rect x="3" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 5 18)"/><rect x="17" y="17" width="4" height="2" rx="1" ry="1" transform="rotate(-90 19 18)"/><path d="M12 15a1 1 0 0 1-.58-.18l-4-2.82a1 1 0 0 1-.24-1.39 1 1 0 0 1 1.4-.24L12 12.76l3.4-2.56a1 1 0 0 1 1.2 1.6l-4 3a1 1 0 0 1-.6.2z"/><path d="M12 13a1 1 0 0 1-1-1V4a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1z"/></g></g>',"droplet-off-outline":'<g data-name="Layer 2"><g data-name="droplet-off-outline"><rect width="24" height="24" opacity="0"/><path d="M12 19a5.4 5.4 0 0 1-3.88-1.64 5.73 5.73 0 0 1-.69-7.11L6 8.82a7.74 7.74 0 0 0 .7 9.94A7.37 7.37 0 0 0 12 21a7.36 7.36 0 0 0 4.58-1.59L15.15 18A5.43 5.43 0 0 1 12 19z"/><path d="M12 5.43l3.88 4a5.71 5.71 0 0 1 1.49 5.15L19 16.15A7.72 7.72 0 0 0 17.31 8l-4.6-4.7A1 1 0 0 0 12 3a1 1 0 0 0-.72.3L8.73 5.9l1.42 1.42z"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"droplet-outline":'<g data-name="Layer 2"><g data-name="droplet-outline"><rect x=".1" y=".1" width="24" height="24" transform="rotate(.48 11.987 11.887)" opacity="0"/><path d="M12 21.1a7.4 7.4 0 0 1-5.28-2.28 7.73 7.73 0 0 1 .1-10.77l4.64-4.65a.94.94 0 0 1 .71-.3 1 1 0 0 1 .71.31l4.56 4.72a7.73 7.73 0 0 1-.09 10.77A7.33 7.33 0 0 1 12 21.1zm.13-15.57L8.24 9.45a5.74 5.74 0 0 0-.07 8A5.43 5.43 0 0 0 12 19.1a5.42 5.42 0 0 0 3.9-1.61 5.72 5.72 0 0 0 .06-8z"/></g></g>',"edit-2-outline":'<g data-name="Layer 2"><g data-name="edit-2"><rect width="24" height="24" opacity="0"/><path d="M19 20H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2z"/><path d="M5 18h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71L16.66 2.6A2 2 0 0 0 14 2.53l-9 9a2 2 0 0 0-.57 1.21L4 16.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 18zM15.27 4L18 6.73l-2 1.95L13.32 6zm-8.9 8.91L12 7.32l2.7 2.7-5.6 5.6-3 .28z"/></g></g>',"edit-outline":'<g data-name="Layer 2"><g data-name="edit"><rect width="24" height="24" opacity="0"/><path d="M19.4 7.34L16.66 4.6A2 2 0 0 0 14 4.53l-9 9a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71zM9.08 17.62l-3 .28.27-3L12 9.32l2.7 2.7zM16 10.68L13.32 8l1.95-2L18 8.73z"/></g></g>',"email-outline":'<g data-name="Layer 2"><g data-name="email"><rect width="24" height="24" opacity="0"/><path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 0 1-1-1V7.25l7.4 5.55a1 1 0 0 0 .6.2 1 1 0 0 0 .6-.2L20 7.25V17a1 1 0 0 1-1 1z"/></g></g>',"expand-outline":'<g data-name="Layer 2"><g data-name="expand"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/><path d="M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z"/></g></g>',"external-link-outline":'<g data-name="Layer 2"><g data-name="external-link"><rect width="24" height="24" opacity="0"/><path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"/><path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"/></g></g>',"eye-off-2-outline":'<g data-name="Layer 2"><g data-name="eye-off-2"><rect width="24" height="24" opacity="0"/><path d="M17.81 13.39A8.93 8.93 0 0 0 21 7.62a1 1 0 1 0-2-.24 7.07 7.07 0 0 1-14 0 1 1 0 1 0-2 .24 8.93 8.93 0 0 0 3.18 5.77l-2.3 2.32a1 1 0 0 0 1.41 1.41l2.61-2.6a9.06 9.06 0 0 0 3.1.92V19a1 1 0 0 0 2 0v-3.56a9.06 9.06 0 0 0 3.1-.92l2.61 2.6a1 1 0 0 0 1.41-1.41z"/></g></g>',"eye-off-outline":'<g data-name="Layer 2"><g data-name="eye-off"><rect width="24" height="24" opacity="0"/><path d="M4.71 3.29a1 1 0 0 0-1.42 1.42l5.63 5.63a3.5 3.5 0 0 0 4.74 4.74l5.63 5.63a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM12 13.5a1.5 1.5 0 0 1-1.5-1.5v-.07l1.56 1.56z"/><path d="M12.22 17c-4.3.1-7.12-3.59-8-5a13.7 13.7 0 0 1 2.24-2.72L5 7.87a15.89 15.89 0 0 0-2.87 3.63 1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25a9.48 9.48 0 0 0 3.23-.67l-1.58-1.58a7.74 7.74 0 0 1-1.7.25z"/><path d="M21.87 11.5c-.64-1.11-4.17-6.68-10.14-6.5a9.48 9.48 0 0 0-3.23.67l1.58 1.58a7.74 7.74 0 0 1 1.7-.25c4.29-.11 7.11 3.59 8 5a13.7 13.7 0 0 1-2.29 2.72L19 16.13a15.89 15.89 0 0 0 2.91-3.63 1 1 0 0 0-.04-1z"/></g></g>',"eye-outline":'<g data-name="Layer 2"><g data-name="eye"><rect width="24" height="24" opacity="0"/><path d="M21.87 11.5c-.64-1.11-4.16-6.68-10.14-6.5-5.53.14-8.73 5-9.6 6.5a1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25c5.53-.14 8.74-5 9.6-6.5a1 1 0 0 0 0-1zM12.22 17c-4.31.1-7.12-3.59-8-5 1-1.61 3.61-4.9 7.61-5 4.29-.11 7.11 3.59 8 5-1.03 1.61-3.61 4.9-7.61 5z"/><path d="M12 8.5a3.5 3.5 0 1 0 3.5 3.5A3.5 3.5 0 0 0 12 8.5zm0 5a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5z"/></g></g>',"facebook-outline":'<g data-name="Layer 2"><g data-name="facebook"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13 22H9a1 1 0 0 1-1-1v-6.2H6a1 1 0 0 1-1-1v-3.6a1 1 0 0 1 1-1h2V7.5A5.77 5.77 0 0 1 14 2h3a1 1 0 0 1 1 1v3.6a1 1 0 0 1-1 1h-3v1.6h3a1 1 0 0 1 .8.39 1 1 0 0 1 .16.88l-1 3.6a1 1 0 0 1-1 .73H14V21a1 1 0 0 1-1 1zm-3-2h2v-6.2a1 1 0 0 1 1-1h2.24l.44-1.6H13a1 1 0 0 1-1-1V7.5a2 2 0 0 1 2-1.9h2V4h-2a3.78 3.78 0 0 0-4 3.5v2.7a1 1 0 0 1-1 1H7v1.6h2a1 1 0 0 1 1 1z"/></g></g>',"file-add-outline":'<g data-name="Layer 2"><g data-name="file-add"><rect width="24" height="24" opacity="0"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/><path d="M14 13h-1v-1a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0v-1h1a1 1 0 0 0 0-2z"/></g></g>',"file-outline":'<g data-name="Layer 2"><g data-name="file"><rect width="24" height="24" opacity="0"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM17.65 9h-3.94a.79.79 0 0 1-.71-.85V4h.11zm-.21 11H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H11v4.15A2.79 2.79 0 0 0 13.71 11H18v8.5a.53.53 0 0 1-.56.5z"/></g></g>',"file-remove-outline":'<g data-name="Layer 2"><g data-name="file-remove"><rect width="24" height="24" opacity="0"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/><path d="M14 13h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/></g></g>',"file-text-outline":'<g data-name="Layer 2"><g data-name="file-text"><rect width="24" height="24" opacity="0"/><path d="M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/><path d="M9 14h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2z"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/></g></g>',"film-outline":'<g data-name="Layer 2"><g data-name="film"><rect width="24" height="24" opacity="0"/><path d="M18.26 3H5.74A2.74 2.74 0 0 0 3 5.74v12.52A2.74 2.74 0 0 0 5.74 21h12.52A2.74 2.74 0 0 0 21 18.26V5.74A2.74 2.74 0 0 0 18.26 3zM7 11H5V9h2zm-2 2h2v2H5zm4-8h6v14H9zm10 6h-2V9h2zm-2 2h2v2h-2zm2-7.26V7h-2V5h1.26a.74.74 0 0 1 .74.74zM5.74 5H7v2H5V5.74A.74.74 0 0 1 5.74 5zM5 18.26V17h2v2H5.74a.74.74 0 0 1-.74-.74zm14 0a.74.74 0 0 1-.74.74H17v-2h2z"/></g></g>',"flag-outline":'<g data-name="Layer 2"><g data-name="flag"><polyline points="24 24 0 24 0 0" opacity="0"/><path d="M19.27 4.68a1.79 1.79 0 0 0-1.6-.25 7.53 7.53 0 0 1-2.17.28 8.54 8.54 0 0 1-3.13-.78A10.15 10.15 0 0 0 8.5 3c-2.89 0-4 1-4.2 1.14a1 1 0 0 0-.3.72V20a1 1 0 0 0 2 0v-4.3a6.28 6.28 0 0 1 2.5-.41 8.54 8.54 0 0 1 3.13.78 10.15 10.15 0 0 0 3.87.93 7.66 7.66 0 0 0 3.5-.7 1.74 1.74 0 0 0 1-1.55V6.11a1.77 1.77 0 0 0-.73-1.43zM18 14.59a6.32 6.32 0 0 1-2.5.41 8.36 8.36 0 0 1-3.13-.79 10.34 10.34 0 0 0-3.87-.92 9.51 9.51 0 0 0-2.5.29V5.42A6.13 6.13 0 0 1 8.5 5a8.36 8.36 0 0 1 3.13.79 10.34 10.34 0 0 0 3.87.92 9.41 9.41 0 0 0 2.5-.3z"/></g></g>',"flash-off-outline":'<g data-name="Layer 2"><g data-name="flash-off"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M12.54 18.06l.27-2.42L10 12.8H6.87l1.24-1.86L6.67 9.5l-2.5 3.74A1 1 0 0 0 5 14.8h5.89l-.77 7.09a1 1 0 0 0 .65 1.05 1 1 0 0 0 .34.06 1 1 0 0 0 .83-.44l3.12-4.67-1.44-1.44z"/><path d="M11.46 5.94l-.27 2.42L14 11.2h3.1l-1.24 1.86 1.44 1.44 2.5-3.74A1 1 0 0 0 19 9.2h-5.89l.77-7.09a1 1 0 0 0-.65-1 1 1 0 0 0-1.17.38L8.94 6.11l1.44 1.44z"/></g></g>',"flash-outline":'<g data-name="Layer 2"><g data-name="flash"><rect width="24" height="24" opacity="0"/><path d="M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44zM6.87 12.8H12a1 1 0 0 1 .74.33 1 1 0 0 1 .25.78l-.45 4.15 4.59-6.86H12a1 1 0 0 1-1-1.11l.45-4.15z"/></g></g>',"flip-2-outline":'<g data-name="Layer 2"><g data-name="flip-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M6.09 19h12l-1.3 1.29a1 1 0 0 0 1.42 1.42l3-3a1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0 1 1 0 0 0 0 1.42l1.3 1.29h-12a1.56 1.56 0 0 1-1.59-1.53V13a1 1 0 0 0-2 0v2.47A3.56 3.56 0 0 0 6.09 19z"/><path d="M5.79 9.71a1 1 0 1 0 1.42-1.42L5.91 7h12a1.56 1.56 0 0 1 1.59 1.53V11a1 1 0 0 0 2 0V8.53A3.56 3.56 0 0 0 17.91 5h-12l1.3-1.29a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0l-3 3a1 1 0 0 0 0 1.42z"/></g></g>',"flip-outline":'<g data-name="Layer 2"><g data-name="flip-in"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M5 6.09v12l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3a1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0L7 18.09v-12A1.56 1.56 0 0 1 8.53 4.5H11a1 1 0 0 0 0-2H8.53A3.56 3.56 0 0 0 5 6.09z"/><path d="M14.29 5.79a1 1 0 0 0 1.42 1.42L17 5.91v12a1.56 1.56 0 0 1-1.53 1.59H13a1 1 0 0 0 0 2h2.47A3.56 3.56 0 0 0 19 17.91v-12l1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0z"/></g></g>',"folder-add-outline":'<g data-name="Layer 2"><g data-name="folder-add"><rect width="24" height="24" opacity="0"/><path d="M14 13h-1v-1a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0v-1h1a1 1 0 0 0 0-2z"/><path d="M19.5 7.05h-7L9.87 3.87a1 1 0 0 0-.77-.37H4.5A2.47 2.47 0 0 0 2 5.93v12.14a2.47 2.47 0 0 0 2.5 2.43h15a2.47 2.47 0 0 0 2.5-2.43V9.48a2.47 2.47 0 0 0-2.5-2.43zm.5 11a.46.46 0 0 1-.5.43h-15a.46.46 0 0 1-.5-.43V5.93a.46.46 0 0 1 .5-.43h4.13l2.6 3.18a1 1 0 0 0 .77.37h7.5a.46.46 0 0 1 .5.43z"/></g></g>',"folder-outline":'<g data-name="Layer 2"><g data-name="folder"><rect width="24" height="24" opacity="0"/><path d="M19.5 20.5h-15A2.47 2.47 0 0 1 2 18.07V5.93A2.47 2.47 0 0 1 4.5 3.5h4.6a1 1 0 0 1 .77.37l2.6 3.18h7A2.47 2.47 0 0 1 22 9.48v8.59a2.47 2.47 0 0 1-2.5 2.43zM4 13.76v4.31a.46.46 0 0 0 .5.43h15a.46.46 0 0 0 .5-.43V9.48a.46.46 0 0 0-.5-.43H12a1 1 0 0 1-.77-.37L8.63 5.5H4.5a.46.46 0 0 0-.5.43z"/></g></g>',"folder-remove-outline":'<g data-name="Layer 2"><g data-name="folder-remove"><rect width="24" height="24" opacity="0"/><path d="M14 13h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/><path d="M19.5 7.05h-7L9.87 3.87a1 1 0 0 0-.77-.37H4.5A2.47 2.47 0 0 0 2 5.93v12.14a2.47 2.47 0 0 0 2.5 2.43h15a2.47 2.47 0 0 0 2.5-2.43V9.48a2.47 2.47 0 0 0-2.5-2.43zm.5 11a.46.46 0 0 1-.5.43h-15a.46.46 0 0 1-.5-.43V5.93a.46.46 0 0 1 .5-.43h4.13l2.6 3.18a1 1 0 0 0 .77.37h7.5a.46.46 0 0 1 .5.43z"/></g></g>',"funnel-outline":'<g data-name="Layer 2"><g data-name="funnel"><rect width="24" height="24" opacity="0"/><path d="M13.9 22a1 1 0 0 1-.6-.2l-4-3.05a1 1 0 0 1-.39-.8v-3.27l-4.8-9.22A1 1 0 0 1 5 4h14a1 1 0 0 1 .86.49 1 1 0 0 1 0 1l-5 9.21V21a1 1 0 0 1-.55.9 1 1 0 0 1-.41.1zm-3-4.54l2 1.53v-4.55A1 1 0 0 1 13 14l4.3-8H6.64l4.13 8a1 1 0 0 1 .11.46z"/></g></g>',"gift-outline":'<g data-name="Layer 2"><g data-name="gift"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19.2 7h-.39A3 3 0 0 0 19 6a3.08 3.08 0 0 0-3.14-3A4.46 4.46 0 0 0 12 5.4 4.46 4.46 0 0 0 8.14 3 3.08 3.08 0 0 0 5 6a3 3 0 0 0 .19 1H4.8A2 2 0 0 0 3 9.2v3.6A2.08 2.08 0 0 0 4.5 15v4.37A1.75 1.75 0 0 0 6.31 21h11.38a1.75 1.75 0 0 0 1.81-1.67V15a2.08 2.08 0 0 0 1.5-2.2V9.2A2 2 0 0 0 19.2 7zM19 9.2v3.6a.56.56 0 0 1 0 .2h-6V9h6a.56.56 0 0 1 0 .2zM15.86 5A1.08 1.08 0 0 1 17 6a1.08 1.08 0 0 1-1.14 1H13.4a2.93 2.93 0 0 1 2.46-2zM7 6a1.08 1.08 0 0 1 1.14-1 2.93 2.93 0 0 1 2.45 2H8.14A1.08 1.08 0 0 1 7 6zM5 9.2A.56.56 0 0 1 5 9h6v4H5a.56.56 0 0 1 0-.2zM6.5 15H11v4H6.5zm6.5 4v-4h4.5v4z"/></g></g>',"github-outline":'<g data-name="Layer 2"><rect width="24" height="24" opacity="0"/><path d="M16.24 22a1 1 0 0 1-1-1v-2.6a2.15 2.15 0 0 0-.54-1.66 1 1 0 0 1 .61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 0 0-.67-2.22 2.75 2.75 0 0 1-.41-2.06 3.71 3.71 0 0 0 0-1.41 7.65 7.65 0 0 0-2.09 1.09 1 1 0 0 1-.84.15 10.15 10.15 0 0 0-5.52 0 1 1 0 0 1-.84-.15 7.4 7.4 0 0 0-2.11-1.09 3.52 3.52 0 0 0 0 1.41 2.84 2.84 0 0 1-.43 2.08 4.07 4.07 0 0 0-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 0 1 .82.66 1 1 0 0 1-.21 1 2.06 2.06 0 0 0-.55 1.56V21a1 1 0 0 1-2 0v-.57a6 6 0 0 1-5.27-2.09 3.9 3.9 0 0 0-1.16-.88 1 1 0 1 1 .5-1.94 4.93 4.93 0 0 1 2 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 0 1 .23-1.58c-2.06-.52-5-2-5-7a6 6 0 0 1 1-3.33.85.85 0 0 0 .13-.62 5.69 5.69 0 0 1 .33-3.21 1 1 0 0 1 .63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 0 1 5.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 0 1 .63.57 5.71 5.71 0 0 1 .33 3.22.75.75 0 0 0 .11.57 6 6 0 0 1 1 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 0 1 .22 1.67V21a1 1 0 0 1-.94 1z"/></g>',"globe-2-outline":'<g data-name="Layer 2"><g data-name="globe-2"><rect width="24" height="24" opacity="0"/><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 2a8.19 8.19 0 0 1 1.79.21 2.61 2.61 0 0 1-.78 1c-.22.17-.46.31-.7.46a4.56 4.56 0 0 0-1.85 1.67 6.49 6.49 0 0 0-.62 3.3c0 1.36 0 2.16-.95 2.87-1.37 1.07-3.46.47-4.76-.07A8.33 8.33 0 0 1 4 12a8 8 0 0 1 8-8zM5 15.8a8.42 8.42 0 0 0 2 .27 5 5 0 0 0 3.14-1c1.71-1.34 1.71-3.06 1.71-4.44a4.76 4.76 0 0 1 .37-2.34 2.86 2.86 0 0 1 1.12-.91 9.75 9.75 0 0 0 .92-.61 4.55 4.55 0 0 0 1.4-1.87A8 8 0 0 1 19 8.12c-1.43.2-3.46.67-3.86 2.53A7 7 0 0 0 15 12a2.93 2.93 0 0 1-.29 1.47l-.1.17c-.65 1.08-1.38 2.31-.39 4 .12.21.25.41.38.61a2.29 2.29 0 0 1 .52 1.08A7.89 7.89 0 0 1 12 20a8 8 0 0 1-7-4.2zm11.93 2.52a6.79 6.79 0 0 0-.63-1.14c-.11-.16-.22-.32-.32-.49-.39-.68-.25-1 .38-2l.1-.17a4.77 4.77 0 0 0 .54-2.43 5.42 5.42 0 0 1 .09-1c.16-.73 1.71-.93 2.67-1a7.94 7.94 0 0 1-2.86 8.28z"/></g></g>',"globe-outline":'<g data-name="Layer 2"><g data-name="globe"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M22 12A10 10 0 0 0 12 2a10 10 0 0 0 0 20 10 10 0 0 0 10-10zm-2.07-1H17a12.91 12.91 0 0 0-2.33-6.54A8 8 0 0 1 19.93 11zM9.08 13H15a11.44 11.44 0 0 1-3 6.61A11 11 0 0 1 9.08 13zm0-2A11.4 11.4 0 0 1 12 4.4a11.19 11.19 0 0 1 3 6.6zm.36-6.57A13.18 13.18 0 0 0 7.07 11h-3a8 8 0 0 1 5.37-6.57zM4.07 13h3a12.86 12.86 0 0 0 2.35 6.56A8 8 0 0 1 4.07 13zm10.55 6.55A13.14 13.14 0 0 0 17 13h2.95a8 8 0 0 1-5.33 6.55z"/></g></g>',"google-outline":'<g data-name="Layer 2"><g data-name="google"><polyline points="0 0 24 0 24 24 0 24" opacity="0"/><path d="M12 22h-.43A10.16 10.16 0 0 1 2 12.29a10 10 0 0 1 14.12-9.41 1.48 1.48 0 0 1 .77.86 1.47 1.47 0 0 1-.1 1.16L15.5 7.28a1.44 1.44 0 0 1-1.83.64A4.5 4.5 0 0 0 8.77 9a4.41 4.41 0 0 0-1.16 3.34 4.36 4.36 0 0 0 1.66 3 4.52 4.52 0 0 0 3.45 1 3.89 3.89 0 0 0 2.63-1.57h-2.9A1.45 1.45 0 0 1 11 13.33v-2.68a1.45 1.45 0 0 1 1.45-1.45h8.1A1.46 1.46 0 0 1 22 10.64v1.88A10 10 0 0 1 12 22zm0-18a8 8 0 0 0-8 8.24A8.12 8.12 0 0 0 11.65 20 8 8 0 0 0 20 12.42V11.2h-7v1.58h5.31l-.41 1.3a6 6 0 0 1-4.9 4.25A6.58 6.58 0 0 1 8 17a6.33 6.33 0 0 1-.72-9.3A6.52 6.52 0 0 1 14 5.91l.77-1.43A7.9 7.9 0 0 0 12 4z"/></g></g>',"grid-outline":'<g data-name="Layer 2"><g data-name="grid"><rect width="24" height="24" opacity="0"/><path d="M9 3H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zM5 9V5h4v4z"/><path d="M19 3h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm-4 6V5h4v4z"/><path d="M9 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm-4 6v-4h4v4z"/><path d="M19 13h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm-4 6v-4h4v4z"/></g></g>',"hard-drive-outline":'<g data-name="Layer 2"><g data-name="hard-drive"><rect width="24" height="24" opacity="0"/><path d="M20.79 11.34l-3.34-6.68A3 3 0 0 0 14.76 3H9.24a3 3 0 0 0-2.69 1.66l-3.34 6.68a2 2 0 0 0-.21.9V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5.76a2 2 0 0 0-.21-.9zM8.34 5.55a1 1 0 0 1 .9-.55h5.52a1 1 0 0 1 .9.55L18.38 11H5.62zM18 19H6a1 1 0 0 1-1-1v-5h14v5a1 1 0 0 1-1 1z"/><path d="M16 15h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/><circle cx="8" cy="16" r="1"/></g></g>',"hash-outline":'<g data-name="Layer 2"><g data-name="hash"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 14h-4.3l.73-4H20a1 1 0 0 0 0-2h-3.21l.69-3.81A1 1 0 0 0 16.64 3a1 1 0 0 0-1.22.82L14.67 8h-3.88l.69-3.81A1 1 0 0 0 10.64 3a1 1 0 0 0-1.22.82L8.67 8H4a1 1 0 0 0 0 2h4.3l-.73 4H4a1 1 0 0 0 0 2h3.21l-.69 3.81A1 1 0 0 0 7.36 21a1 1 0 0 0 1.22-.82L9.33 16h3.88l-.69 3.81a1 1 0 0 0 .84 1.19 1 1 0 0 0 1.22-.82l.75-4.18H20a1 1 0 0 0 0-2zM9.7 14l.73-4h3.87l-.73 4z"/></g></g>',"headphones-outline":'<g data-name="Layer 2"><g data-name="headphones"><rect width="24" height="24" opacity="0"/><path d="M12 2A10.2 10.2 0 0 0 2 12.37V17a4 4 0 1 0 4-4 3.91 3.91 0 0 0-2 .56v-1.19A8.2 8.2 0 0 1 12 4a8.2 8.2 0 0 1 8 8.37v1.19a3.91 3.91 0 0 0-2-.56 4 4 0 1 0 4 4v-4.63A10.2 10.2 0 0 0 12 2zM6 15a2 2 0 1 1-2 2 2 2 0 0 1 2-2zm12 4a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/></g></g>',"heart-outline":'<g data-name="Layer 2"><g data-name="heart"><rect width="24" height="24" opacity="0"/><path d="M12 21a1 1 0 0 1-.71-.29l-7.77-7.78a5.26 5.26 0 0 1 0-7.4 5.24 5.24 0 0 1 7.4 0L12 6.61l1.08-1.08a5.24 5.24 0 0 1 7.4 0 5.26 5.26 0 0 1 0 7.4l-7.77 7.78A1 1 0 0 1 12 21zM7.22 6a3.2 3.2 0 0 0-2.28.94 3.24 3.24 0 0 0 0 4.57L12 18.58l7.06-7.07a3.24 3.24 0 0 0 0-4.57 3.32 3.32 0 0 0-4.56 0l-1.79 1.8a1 1 0 0 1-1.42 0L9.5 6.94A3.2 3.2 0 0 0 7.22 6z"/></g></g>',"home-outline":'<g data-name="Layer 2"><g data-name="home"><rect width="24" height="24" opacity="0"/><path d="M20.42 10.18L12.71 2.3a1 1 0 0 0-1.42 0l-7.71 7.89A2 2 0 0 0 3 11.62V20a2 2 0 0 0 1.89 2h14.22A2 2 0 0 0 21 20v-8.38a2.07 2.07 0 0 0-.58-1.44zM10 20v-6h4v6zm9 0h-3v-7a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v7H5v-8.42l7-7.15 7 7.19z"/></g></g>',"image-outline":'<g data-name="Layer 2"><g data-name="image"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM6 5h12a1 1 0 0 1 1 1v8.36l-3.2-2.73a2.77 2.77 0 0 0-3.52 0L5 17.7V6a1 1 0 0 1 1-1zm12 14H6.56l7-5.84a.78.78 0 0 1 .93 0L19 17v1a1 1 0 0 1-1 1z"/><circle cx="8" cy="8.5" r="1.5"/></g></g>',"inbox-outline":'<g data-name="Layer 2"><g data-name="inbox"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.79 11.34l-3.34-6.68A3 3 0 0 0 14.76 3H9.24a3 3 0 0 0-2.69 1.66l-3.34 6.68a2 2 0 0 0-.21.9V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5.76a2 2 0 0 0-.21-.9zM8.34 5.55a1 1 0 0 1 .9-.55h5.52a1 1 0 0 1 .9.55L18.38 11H16a1 1 0 0 0-1 1v3H9v-3a1 1 0 0 0-1-1H5.62zM18 19H6a1 1 0 0 1-1-1v-5h2v3a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-3h2v5a1 1 0 0 1-1 1z"/></g></g>',"info-outline":'<g data-name="Layer 2"><g data-name="info"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><circle cx="12" cy="8" r="1"/><path d="M12 10a1 1 0 0 0-1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-1-1z"/></g></g>',"keypad-outline":'<g data-name="Layer 2"><g data-name="keypad"><rect width="24" height="24" opacity="0"/><path d="M5 2a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M12 2a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M19 8a3 3 0 1 0-3-3 3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/><path d="M5 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M12 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M19 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M5 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M12 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M19 16a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"layers-outline":'<g data-name="Layer 2"><g data-name="layers"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M21 11.35a1 1 0 0 0-.61-.86l-2.15-.92 2.26-1.3a1 1 0 0 0 .5-.92 1 1 0 0 0-.61-.86l-8-3.41a1 1 0 0 0-.78 0l-8 3.41a1 1 0 0 0-.61.86 1 1 0 0 0 .5.92l2.26 1.3-2.15.92a1 1 0 0 0-.61.86 1 1 0 0 0 .5.92l2.26 1.3-2.15.92a1 1 0 0 0-.61.86 1 1 0 0 0 .5.92l8 4.6a1 1 0 0 0 1 0l8-4.6a1 1 0 0 0 .5-.92 1 1 0 0 0-.61-.86l-2.15-.92 2.26-1.3a1 1 0 0 0 .5-.92zm-9-6.26l5.76 2.45L12 10.85 6.24 7.54zm-.5 7.78a1 1 0 0 0 1 0l3.57-2 1.69.72L12 14.85l-5.76-3.31 1.69-.72zm6.26 2.67L12 18.85l-5.76-3.31 1.69-.72 3.57 2.05a1 1 0 0 0 1 0l3.57-2.05z"/></g></g>',"layout-outline":'<g data-name="Layer 2"><g data-name="layout"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM6 5h12a1 1 0 0 1 1 1v2H5V6a1 1 0 0 1 1-1zM5 18v-8h6v9H6a1 1 0 0 1-1-1zm13 1h-5v-9h6v8a1 1 0 0 1-1 1z"/></g></g>',"link-2-outline":'<g data-name="Layer 2"><g data-name="link-2"><rect width="24" height="24" opacity="0"/><path d="M13.29 9.29l-4 4a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4-4a1 1 0 0 0-1.42-1.42z"/><path d="M12.28 17.4L11 18.67a4.2 4.2 0 0 1-5.58.4 4 4 0 0 1-.27-5.93l1.42-1.43a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0l-1.27 1.28a6.15 6.15 0 0 0-.67 8.07 6.06 6.06 0 0 0 9.07.6l1.42-1.42a1 1 0 0 0-1.42-1.42z"/><path d="M19.66 3.22a6.18 6.18 0 0 0-8.13.68L10.45 5a1.09 1.09 0 0 0-.17 1.61 1 1 0 0 0 1.42 0L13 5.3a4.17 4.17 0 0 1 5.57-.4 4 4 0 0 1 .27 5.95l-1.42 1.43a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l1.42-1.42a6.06 6.06 0 0 0-.6-9.06z"/></g></g>',"link-outline":'<g data-name="Layer 2"><g data-name="link"><rect width="24" height="24" opacity="0"/><path d="M8 12a1 1 0 0 0 1 1h6a1 1 0 0 0 0-2H9a1 1 0 0 0-1 1z"/><path d="M9 16H7.21A4.13 4.13 0 0 1 3 12.37 4 4 0 0 1 7 8h2a1 1 0 0 0 0-2H7.21a6.15 6.15 0 0 0-6.16 5.21A6 6 0 0 0 7 18h2a1 1 0 0 0 0-2z"/><path d="M23 11.24A6.16 6.16 0 0 0 16.76 6h-1.51C14.44 6 14 6.45 14 7a1 1 0 0 0 1 1h1.79A4.13 4.13 0 0 1 21 11.63 4 4 0 0 1 17 16h-2a1 1 0 0 0 0 2h2a6 6 0 0 0 6-6.76z"/></g></g>',"linkedin-outline":'<g data-name="Layer 2"><g data-name="linkedin"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 22h-1.67a2 2 0 0 1-2-2v-5.37a.92.92 0 0 0-.69-.93.84.84 0 0 0-.67.19.85.85 0 0 0-.3.65V20a2 2 0 0 1-2 2H11a2 2 0 0 1-2-2v-5.46a6.5 6.5 0 1 1 13 0V20a2 2 0 0 1-2 2zm-4.5-10.31a3.73 3.73 0 0 1 .47 0 2.91 2.91 0 0 1 2.36 2.9V20H20v-5.46a4.5 4.5 0 1 0-9 0V20h1.67v-5.46a2.85 2.85 0 0 1 2.83-2.85z"/><path d="M6 22H4a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2zM4 10v10h2V10z"/><path d="M5 7a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm0-4a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"/></g></g>',"list-outline":'<g data-name="Layer 2"><g data-name="list"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><circle cx="4" cy="7" r="1"/><circle cx="4" cy="12" r="1"/><circle cx="4" cy="17" r="1"/><rect x="7" y="11" width="14" height="2" rx=".94" ry=".94"/><rect x="7" y="16" width="14" height="2" rx=".94" ry=".94"/><rect x="7" y="6" width="14" height="2" rx=".94" ry=".94"/></g></g>',"loader-outline":'<g data-name="Layer 2"><g data-name="loader"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0V3a1 1 0 0 0-1-1z"/><path d="M21 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M6 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1z"/><path d="M6.22 5a1 1 0 0 0-1.39 1.47l1.44 1.39a1 1 0 0 0 .73.28 1 1 0 0 0 .72-.31 1 1 0 0 0 0-1.41z"/><path d="M17 8.14a1 1 0 0 0 .69-.28l1.44-1.39A1 1 0 0 0 17.78 5l-1.44 1.42a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.31z"/><path d="M12 18a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-1-1z"/><path d="M17.73 16.14a1 1 0 0 0-1.39 1.44L17.78 19a1 1 0 0 0 .69.28 1 1 0 0 0 .72-.3 1 1 0 0 0 0-1.42z"/><path d="M6.27 16.14l-1.44 1.39a1 1 0 0 0 0 1.42 1 1 0 0 0 .72.3 1 1 0 0 0 .67-.25l1.44-1.39a1 1 0 0 0-1.39-1.44z"/></g></g>',"lock-outline":'<g data-name="Layer 2"><g data-name="lock"><rect width="24" height="24" opacity="0"/><path d="M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1z"/><path d="M12 12a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"log-in-outline":'<g data-name="Layer 2"><g data-name="log-in"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M19 4h-2a1 1 0 0 0 0 2h1v12h-1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1z"/><path d="M11.8 7.4a1 1 0 0 0-1.6 1.2L12 11H4a1 1 0 0 0 0 2h8.09l-1.72 2.44a1 1 0 0 0 .24 1.4 1 1 0 0 0 .58.18 1 1 0 0 0 .81-.42l2.82-4a1 1 0 0 0 0-1.18z"/></g></g>',"log-out-outline":'<g data-name="Layer 2"><g data-name="log-out"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M7 6a1 1 0 0 0 0-2H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h2a1 1 0 0 0 0-2H6V6z"/><path d="M20.82 11.42l-2.82-4a1 1 0 0 0-1.39-.24 1 1 0 0 0-.24 1.4L18.09 11H10a1 1 0 0 0 0 2h8l-1.8 2.4a1 1 0 0 0 .2 1.4 1 1 0 0 0 .6.2 1 1 0 0 0 .8-.4l3-4a1 1 0 0 0 .02-1.18z"/></g></g>',"map-outline":'<g data-name="Layer 2"><g data-name="map"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.41 5.89l-4-1.8H15.59L12 5.7 8.41 4.09h-.05L8.24 4h-.6l-4 1.8a1 1 0 0 0-.64 1V19a1 1 0 0 0 .46.84A1 1 0 0 0 4 20a1 1 0 0 0 .41-.09L8 18.3l3.59 1.61h.05a.85.85 0 0 0 .72 0h.05L16 18.3l3.59 1.61A1 1 0 0 0 20 20a1 1 0 0 0 .54-.16A1 1 0 0 0 21 19V6.8a1 1 0 0 0-.59-.91zM5 7.44l2-.89v10l-2 .89zm4-.89l2 .89v10l-2-.89zm4 .89l2-.89v10l-2 .89zm6 10l-2-.89v-10l2 .89z"/></g></g>',"maximize-outline":'<g data-name="Layer 2"><g data-name="maximize"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/><path d="M13 10h-1V9a1 1 0 0 0-2 0v1H9a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0v-1h1a1 1 0 0 0 0-2z"/></g></g>',"menu-2-outline":'<g data-name="Layer 2"><g data-name="menu-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><circle cx="4" cy="12" r="1"/><rect x="7" y="11" width="14" height="2" rx=".94" ry=".94"/><rect x="3" y="16" width="18" height="2" rx=".94" ry=".94"/><rect x="3" y="6" width="18" height="2" rx=".94" ry=".94"/></g></g>',"menu-arrow-outline":'<g data-name="Layer 2"><g data-name="menu-arrow"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20.05 11H5.91l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3a1 1 0 0 0 0 1.42l3 3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L5.91 13h14.14a1 1 0 0 0 .95-.95V12a1 1 0 0 0-.95-1z"/><rect x="3" y="17" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="5" width="18" height="2" rx=".95" ry=".95"/></g></g>',"menu-outline":'<g data-name="Layer 2"><g data-name="menu"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><rect x="3" y="11" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="16" width="18" height="2" rx=".95" ry=".95"/><rect x="3" y="6" width="18" height="2" rx=".95" ry=".95"/></g></g>',"message-circle-outline":'<g data-name="Layer 2"><g data-name="message-circle"><circle cx="12" cy="12" r="1"/><circle cx="16" cy="12" r="1"/><circle cx="8" cy="12" r="1"/><path d="M19.07 4.93a10 10 0 0 0-16.28 11 1.06 1.06 0 0 1 .09.64L2 20.8a1 1 0 0 0 .27.91A1 1 0 0 0 3 22h.2l4.28-.86a1.26 1.26 0 0 1 .64.09 10 10 0 0 0 11-16.28zm.83 8.36a8 8 0 0 1-11 6.08 3.26 3.26 0 0 0-1.25-.26 3.43 3.43 0 0 0-.56.05l-2.82.57.57-2.82a3.09 3.09 0 0 0-.21-1.81 8 8 0 0 1 6.08-11 8 8 0 0 1 9.19 9.19z"/><rect width="24" height="24" opacity="0"/></g></g>',"message-square-outline":'<g data-name="Layer 2"><g data-name="message-square"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="11" r="1"/><circle cx="16" cy="11" r="1"/><circle cx="8" cy="11" r="1"/><path d="M19 3H5a3 3 0 0 0-3 3v15a1 1 0 0 0 .51.87A1 1 0 0 0 3 22a1 1 0 0 0 .51-.14L8 19.14a1 1 0 0 1 .55-.14H19a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 13a1 1 0 0 1-1 1H8.55a3 3 0 0 0-1.55.43l-3 1.8V6a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1z"/></g></g>',"mic-off-outline":'<g data-name="Layer 2"><g data-name="mic-off"><rect width="24" height="24" opacity="0"/><path d="M10 6a2 2 0 0 1 4 0v5a1 1 0 0 1 0 .16l1.6 1.59A4 4 0 0 0 16 11V6a4 4 0 0 0-7.92-.75L10 7.17z"/><path d="M19 11a1 1 0 0 0-2 0 4.86 4.86 0 0 1-.69 2.48L17.78 15A7 7 0 0 0 19 11z"/><path d="M12 15h.16L8 10.83V11a4 4 0 0 0 4 4z"/><path d="M20.71 19.29l-16-16a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M15 20h-2v-2.08a7 7 0 0 0 1.65-.44l-1.6-1.6A4.57 4.57 0 0 1 12 16a5 5 0 0 1-5-5 1 1 0 0 0-2 0 7 7 0 0 0 6 6.92V20H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/></g></g>',"mic-outline":'<g data-name="Layer 2"><g data-name="mic"><rect width="24" height="24" opacity="0"/><path d="M12 15a4 4 0 0 0 4-4V6a4 4 0 0 0-8 0v5a4 4 0 0 0 4 4zm-2-9a2 2 0 0 1 4 0v5a2 2 0 0 1-4 0z"/><path d="M19 11a1 1 0 0 0-2 0 5 5 0 0 1-10 0 1 1 0 0 0-2 0 7 7 0 0 0 6 6.92V20H8.89a.89.89 0 0 0-.89.89v.22a.89.89 0 0 0 .89.89h6.22a.89.89 0 0 0 .89-.89v-.22a.89.89 0 0 0-.89-.89H13v-2.08A7 7 0 0 0 19 11z"/></g></g>',"minimize-outline":'<g data-name="Layer 2"><g data-name="minimize"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/><path d="M13 10H9a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/></g></g>',"minus-circle-outline":'<g data-name="Layer 2"><g data-name="minus-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M15 11H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/></g></g>',"minus-outline":'<g data-name="Layer 2"><g data-name="minus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z"/></g></g>',"minus-square-outline":'<g data-name="Layer 2"><g data-name="minus-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/><path d="M15 11H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/></g></g>',"monitor-outline":'<g data-name="Layer 2"><g data-name="monitor"><rect width="24" height="24" opacity="0"/><path d="M19 3H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h6v2H7a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2h-4v-2h6a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 11a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1z"/></g></g>',"moon-outline":'<g data-name="Layer 2"><g data-name="moon"><rect width="24" height="24" opacity="0"/><path d="M12.3 22h-.1a10.31 10.31 0 0 1-7.34-3.15 10.46 10.46 0 0 1-.26-14 10.13 10.13 0 0 1 4-2.74 1 1 0 0 1 1.06.22 1 1 0 0 1 .24 1 8.4 8.4 0 0 0 1.94 8.81 8.47 8.47 0 0 0 8.83 1.94 1 1 0 0 1 1.27 1.29A10.16 10.16 0 0 1 19.6 19a10.28 10.28 0 0 1-7.3 3zM7.46 4.92a7.93 7.93 0 0 0-1.37 1.22 8.44 8.44 0 0 0 .2 11.32A8.29 8.29 0 0 0 12.22 20h.08a8.34 8.34 0 0 0 6.78-3.49A10.37 10.37 0 0 1 7.46 4.92z"/></g></g>',"more-horizontal-outline":'<g data-name="Layer 2"><g data-name="more-horizotnal"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/><circle cx="5" cy="12" r="2"/></g></g>',"more-vertical-outline":'<g data-name="Layer 2"><g data-name="more-vertical"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="12" cy="19" r="2"/></g></g>',"move-outline":'<g data-name="Layer 2"><g data-name="move"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M21.71 11.31l-3-3a1 1 0 0 0-1.42 1.42L18.58 11H13V5.41l1.29 1.3A1 1 0 0 0 15 7a1 1 0 0 0 .71-.29 1 1 0 0 0 0-1.42l-3-3A1 1 0 0 0 12 2a1 1 0 0 0-.7.29l-3 3a1 1 0 0 0 1.41 1.42L11 5.42V11H5.41l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3A1 1 0 0 0 2 12a1 1 0 0 0 .29.71l3 3A1 1 0 0 0 6 16a1 1 0 0 0 .71-.29 1 1 0 0 0 0-1.42L5.42 13H11v5.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 22a1 1 0 0 0 .7-.29l3-3a1 1 0 0 0-1.42-1.42L13 18.58V13h5.59l-1.3 1.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 16a1 1 0 0 0 .71-.29l3-3A1 1 0 0 0 22 12a1 1 0 0 0-.29-.69z"/></g></g>',"music-outline":'<g data-name="Layer 2"><g data-name="music"><rect width="24" height="24" opacity="0"/><path d="M19 15V4a1 1 0 0 0-.38-.78 1 1 0 0 0-.84-.2l-9 2A1 1 0 0 0 8 6v8.34a3.49 3.49 0 1 0 2 3.18 4.36 4.36 0 0 0 0-.52V6.8l7-1.55v7.09a3.49 3.49 0 1 0 2 3.17 4.57 4.57 0 0 0 0-.51zM6.54 19A1.49 1.49 0 1 1 8 17.21a1.53 1.53 0 0 1 0 .3A1.49 1.49 0 0 1 6.54 19zm9-2A1.5 1.5 0 1 1 17 15.21a1.53 1.53 0 0 1 0 .3A1.5 1.5 0 0 1 15.51 17z"/></g></g>',"navigation-2-outline":'<g data-name="Layer 2"><g data-name="navigation-2"><rect width="24" height="24" opacity="0"/><path d="M13.67 22h-.06a1 1 0 0 1-.92-.8L11 13l-8.2-1.69a1 1 0 0 1-.12-1.93l16-5.33A1 1 0 0 1 20 5.32l-5.33 16a1 1 0 0 1-1 .68zm-6.8-11.9l5.19 1.06a1 1 0 0 1 .79.78l1.05 5.19 3.52-10.55z"/></g></g>',"navigation-outline":'<g data-name="Layer 2"><g data-name="navigation"><rect width="24" height="24" opacity="0"/><path d="M20 20a.94.94 0 0 1-.55-.17L12 14.9l-7.45 4.93a1 1 0 0 1-1.44-1.28l8-16a1 1 0 0 1 1.78 0l8 16a1 1 0 0 1-.23 1.2A1 1 0 0 1 20 20zm-8-7.3a1 1 0 0 1 .55.17l4.88 3.23L12 5.24 6.57 16.1l4.88-3.23a1 1 0 0 1 .55-.17z"/></g></g>',"npm-outline":'<g data-name="Layer 2"><g data-name="npm"><rect width="24" height="24" opacity="0"/><path d="M18 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z"/><rect x="12" y="9" width="4" height="10"/></g></g>',"options-2-outline":'<g data-name="Layer 2"><g data-name="options-2"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 9a3 3 0 0 0-2.82 2H3a1 1 0 0 0 0 2h13.18A3 3 0 1 0 19 9zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M3 7h1.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2H9.82a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2zm4-2a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/><path d="M21 17h-7.18a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2h5.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2zm-10 2a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"options-outline":'<g data-name="Layer 2"><g data-name="options"><rect width="24" height="24" opacity="0"/><path d="M7 14.18V3a1 1 0 0 0-2 0v11.18a3 3 0 0 0 0 5.64V21a1 1 0 0 0 2 0v-1.18a3 3 0 0 0 0-5.64zM6 18a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M21 13a3 3 0 0 0-2-2.82V3a1 1 0 0 0-2 0v7.18a3 3 0 0 0 0 5.64V21a1 1 0 0 0 2 0v-5.18A3 3 0 0 0 21 13zm-3 1a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M15 5a3 3 0 1 0-4 2.82V21a1 1 0 0 0 2 0V7.82A3 3 0 0 0 15 5zm-3 1a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"pantone-outline":'<g data-name="Layer 2"><g data-name="pantone"><rect width="24" height="24" opacity="0"/><path d="M20 13.18h-4.06l2.3-2.47a1 1 0 0 0 0-1.41l-4.19-3.86a.93.93 0 0 0-.71-.26 1 1 0 0 0-.7.31l-1.82 2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v13.09A3.91 3.91 0 0 0 6.91 21H20a1 1 0 0 0 1-1v-5.82a1 1 0 0 0-1-1zm-6.58-5.59l2.67 2.49-5.27 5.66v-5.36zM8.82 10v3H5v-3zm0-5v3H5V5zM5 17.09V15h3.82v2.09a1.91 1.91 0 0 1-3.82 0zM19 19h-8.49l3.56-3.82H19z"/></g></g>',"paper-plane-outline":'<g data-name="Layer 2"><g data-name="paper-plane"><rect width="24" height="24" opacity="0"/><path d="M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z"/></g></g>',"pause-circle-outline":'<g data-name="Layer 2"><g data-name="pause-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M15 8a1 1 0 0 0-1 1v6a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/><path d="M9 8a1 1 0 0 0-1 1v6a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g>',"people-outline":'<g data-name="Layer 2"><g data-name="people"><rect width="24" height="24" opacity="0"/><path d="M9 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M17 13a3 3 0 1 0-3-3 3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/><path d="M17 14a5 5 0 0 0-3.06 1.05A7 7 0 0 0 2 20a1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 6.9 6.9 0 0 0-.86-3.35A3 3 0 0 1 20 19a1 1 0 0 0 2 0 5 5 0 0 0-5-5z"/></g></g>',"percent-outline":'<g data-name="Layer 2"><g data-name="percent"><rect width="24" height="24" opacity="0"/><path d="M8 11a3.5 3.5 0 1 0-3.5-3.5A3.5 3.5 0 0 0 8 11zm0-5a1.5 1.5 0 1 1-1.5 1.5A1.5 1.5 0 0 1 8 6z"/><path d="M16 14a3.5 3.5 0 1 0 3.5 3.5A3.5 3.5 0 0 0 16 14zm0 5a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 16 19z"/><path d="M19.74 4.26a.89.89 0 0 0-1.26 0L4.26 18.48a.91.91 0 0 0-.26.63.89.89 0 0 0 1.52.63L19.74 5.52a.89.89 0 0 0 0-1.26z"/></g></g>',"person-add-outline":'<g data-name="Layer 2"><g data-name="person-add"><rect width="24" height="24" opacity="0"/><path d="M21 6h-1V5a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V8h1a1 1 0 0 0 0-2z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M10 13a7 7 0 0 0-7 7 1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 7 7 0 0 0-7-7z"/></g></g>',"person-delete-outline":'<g data-name="Layer 2"><g data-name="person-delete"><rect width="24" height="24" opacity="0"/><path d="M20.47 7.5l.73-.73a1 1 0 0 0-1.47-1.47L19 6l-.73-.73a1 1 0 0 0-1.47 1.5l.73.73-.73.73a1 1 0 0 0 1.47 1.47L19 9l.73.73a1 1 0 0 0 1.47-1.5z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M10 13a7 7 0 0 0-7 7 1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 7 7 0 0 0-7-7z"/></g></g>',"person-done-outline":'<g data-name="Layer 2"><g data-name="person-done"><rect width="24" height="24" opacity="0"/><path d="M21.66 4.25a1 1 0 0 0-1.41.09l-1.87 2.15-.63-.71a1 1 0 0 0-1.5 1.33l1.39 1.56a1 1 0 0 0 .75.33 1 1 0 0 0 .74-.34l2.61-3a1 1 0 0 0-.08-1.41z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M10 13a7 7 0 0 0-7 7 1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 7 7 0 0 0-7-7z"/></g></g>',"person-outline":'<g data-name="Layer 2"><g data-name="person"><rect width="24" height="24" opacity="0"/><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M12 13a7 7 0 0 0-7 7 1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 7 7 0 0 0-7-7z"/></g></g>',"person-remove-outline":'<g data-name="Layer 2"><g data-name="person-remove"><rect width="24" height="24" opacity="0"/><path d="M21 6h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2z"/><path d="M10 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2z"/><path d="M10 13a7 7 0 0 0-7 7 1 1 0 0 0 2 0 5 5 0 0 1 10 0 1 1 0 0 0 2 0 7 7 0 0 0-7-7z"/></g></g>',"phone-call-outline":'<g data-name="Layer 2"><g data-name="phone-call"><rect width="24" height="24" opacity="0"/><path d="M13 8a3 3 0 0 1 3 3 1 1 0 0 0 2 0 5 5 0 0 0-5-5 1 1 0 0 0 0 2z"/><path d="M13 4a7 7 0 0 1 7 7 1 1 0 0 0 2 0 9 9 0 0 0-9-9 1 1 0 0 0 0 2z"/><path d="M21.75 15.91a1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a9.91 9.91 0 0 1-4.87-4.89C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6 15.42 15.42 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76 4.34 4.34 0 0 0-.19-.73zM17.4 20A13.41 13.41 0 0 1 4 6.6 2.61 2.61 0 0 1 6.6 4h.33L8 8.64l-.54.28c-.86.45-1.54.81-1.18 1.59a11.85 11.85 0 0 0 7.18 7.21c.84.34 1.17-.29 1.62-1.16l.29-.55L20 17.07v.33a2.61 2.61 0 0 1-2.6 2.6z"/></g></g>',"phone-missed-outline":'<g data-name="Layer 2"><g data-name="phone-missed"><rect width="24" height="24" opacity="0"/><path d="M21.94 16.64a4.34 4.34 0 0 0-.19-.73 1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a10 10 0 0 1-4.88-4.89C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6 15.42 15.42 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76zM17.4 20A13.41 13.41 0 0 1 4 6.6 2.61 2.61 0 0 1 6.6 4h.33L8 8.64l-.55.29c-.87.45-1.5.78-1.17 1.58a11.85 11.85 0 0 0 7.18 7.21c.84.34 1.17-.29 1.62-1.16l.29-.55L20 17.07v.33a2.61 2.61 0 0 1-2.6 2.6z"/><path d="M15.8 8.7a1.05 1.05 0 0 0 1.47 0L18 8l.73.73a1 1 0 0 0 1.47-1.5l-.73-.73.73-.73a1 1 0 0 0-1.47-1.47L18 5l-.73-.73a1 1 0 0 0-1.47 1.5l.73.73-.73.73a1.05 1.05 0 0 0 0 1.47z"/></g></g>',"phone-off-outline":'<g data-name="Layer 2"><g data-name="phone-off"><rect width="24" height="24" opacity="0"/><path d="M19.74 4.26a.89.89 0 0 0-1.26 0L4.26 18.48a.91.91 0 0 0-.26.63.89.89 0 0 0 1.52.63L19.74 5.52a.89.89 0 0 0 0-1.26z"/><path d="M6.7 14.63A13.29 13.29 0 0 1 4 6.6 2.61 2.61 0 0 1 6.6 4h.33L8 8.64l-.55.29c-.87.45-1.5.78-1.17 1.58a11.57 11.57 0 0 0 1.57 3l1.43-1.42a10.37 10.37 0 0 1-.8-1.42C9.71 10 9.72 10 9.85 9.85a1 1 0 0 0 .26-.92L8.74 3a1 1 0 0 0-.65-.72 3.79 3.79 0 0 0-.72-.18A3.94 3.94 0 0 0 6.6 2 4.6 4.6 0 0 0 2 6.6a15.33 15.33 0 0 0 3.27 9.46z"/><path d="M21.94 16.64a4.34 4.34 0 0 0-.19-.73 1 1 0 0 0-.72-.65l-6-1.37a1 1 0 0 0-.92.26c-.14.13-.15.14-.8 1.38a10.88 10.88 0 0 1-1.41-.8l-1.43 1.43a11.52 11.52 0 0 0 2.94 1.56c.84.34 1.17-.29 1.62-1.16l.29-.55L20 17.07v.33a2.61 2.61 0 0 1-2.6 2.6 13.29 13.29 0 0 1-8-2.7l-1.46 1.43A15.33 15.33 0 0 0 17.4 22a4.6 4.6 0 0 0 4.6-4.6 4.77 4.77 0 0 0-.06-.76z"/></g></g>',"phone-outline":'<g data-name="Layer 2"><g data-name="phone"><rect width="24" height="24" opacity="0"/><path d="M17.4 22A15.42 15.42 0 0 1 2 6.6 4.6 4.6 0 0 1 6.6 2a3.94 3.94 0 0 1 .77.07 3.79 3.79 0 0 1 .72.18 1 1 0 0 1 .65.75l1.37 6a1 1 0 0 1-.26.92c-.13.14-.14.15-1.37.79a9.91 9.91 0 0 0 4.87 4.89c.65-1.24.66-1.25.8-1.38a1 1 0 0 1 .92-.26l6 1.37a1 1 0 0 1 .72.65 4.34 4.34 0 0 1 .19.73 4.77 4.77 0 0 1 .06.76A4.6 4.6 0 0 1 17.4 22zM6.6 4A2.61 2.61 0 0 0 4 6.6 13.41 13.41 0 0 0 17.4 20a2.61 2.61 0 0 0 2.6-2.6v-.33L15.36 16l-.29.55c-.45.87-.78 1.5-1.62 1.16a11.85 11.85 0 0 1-7.18-7.21c-.36-.78.32-1.14 1.18-1.59L8 8.64 6.93 4z"/></g></g>',"pie-chart-outline":'<g data-name="Layer 2"><g data-name="pie-chart"><rect width="24" height="24" opacity="0"/><path d="M13 2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1 9 9 0 0 0-9-9zm1 8V4.07A7 7 0 0 1 19.93 10z"/><path d="M20.82 14.06a1 1 0 0 0-1.28.61A8 8 0 1 1 9.33 4.46a1 1 0 0 0-.66-1.89 10 10 0 1 0 12.76 12.76 1 1 0 0 0-.61-1.27z"/></g></g>',"pin-outline":'<g data-name="Layer 2"><g data-name="pin"><rect width="24" height="24" opacity="0"/><path d="M12 2a8 8 0 0 0-8 7.92c0 5.48 7.05 11.58 7.35 11.84a1 1 0 0 0 1.3 0C13 21.5 20 15.4 20 9.92A8 8 0 0 0 12 2zm0 17.65c-1.67-1.59-6-6-6-9.73a6 6 0 0 1 12 0c0 3.7-4.33 8.14-6 9.73z"/><path d="M12 6a3.5 3.5 0 1 0 3.5 3.5A3.5 3.5 0 0 0 12 6zm0 5a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 12 11z"/></g></g>',"play-circle-outline":'<g data-name="Layer 2"><g data-name="play-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12.34 7.45a1.7 1.7 0 0 0-1.85-.3 1.6 1.6 0 0 0-1 1.48v6.74a1.6 1.6 0 0 0 1 1.48 1.68 1.68 0 0 0 .69.15 1.74 1.74 0 0 0 1.16-.45L16 13.18a1.6 1.6 0 0 0 0-2.36zm-.84 7.15V9.4l2.81 2.6z"/></g></g>',"plus-circle-outline":'<g data-name="Layer 2"><g data-name="plus-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M15 11h-2V9a1 1 0 0 0-2 0v2H9a1 1 0 0 0 0 2h2v2a1 1 0 0 0 2 0v-2h2a1 1 0 0 0 0-2z"/></g></g>',"plus-outline":'<g data-name="Layer 2"><g data-name="plus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"/></g></g>',"plus-square-outline":'<g data-name="Layer 2"><g data-name="plus-square"><rect width="24" height="24" opacity="0"/><path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/><path d="M15 11h-2V9a1 1 0 0 0-2 0v2H9a1 1 0 0 0 0 2h2v2a1 1 0 0 0 2 0v-2h2a1 1 0 0 0 0-2z"/></g></g>',"power-outline":'<g data-name="Layer 2"><g data-name="power"><rect width="24" height="24" opacity="0"/><path d="M12 13a1 1 0 0 0 1-1V2a1 1 0 0 0-2 0v10a1 1 0 0 0 1 1z"/><path d="M16.59 3.11a1 1 0 0 0-.92 1.78 8 8 0 1 1-7.34 0 1 1 0 1 0-.92-1.78 10 10 0 1 0 9.18 0z"/></g></g>',"pricetags-outline":'<g data-name="Layer 2"><g data-name="pricetags"><rect width="24" height="24" opacity="0"/><path d="M12.87 22a1.84 1.84 0 0 1-1.29-.53l-6.41-6.42a1 1 0 0 1-.29-.61L4 5.09a1 1 0 0 1 .29-.8 1 1 0 0 1 .8-.29l9.35.88a1 1 0 0 1 .61.29l6.42 6.41a1.82 1.82 0 0 1 0 2.57l-7.32 7.32a1.82 1.82 0 0 1-1.28.53zm-6-8.11l6 6 7.05-7.05-6-6-7.81-.73z"/><circle cx="10.5" cy="10.5" r="1.5"/></g></g>',"printer-outline":'<g data-name="Layer 2"><g data-name="printer"><rect width="24" height="24" opacity="0"/><path d="M19.36 7H18V5a1.92 1.92 0 0 0-1.83-2H7.83A1.92 1.92 0 0 0 6 5v2H4.64A2.66 2.66 0 0 0 2 9.67v6.66A2.66 2.66 0 0 0 4.64 19h.86a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2h.86A2.66 2.66 0 0 0 22 16.33V9.67A2.66 2.66 0 0 0 19.36 7zM8 5h8v2H8zm-.5 14v-4h9v4zM20 16.33a.66.66 0 0 1-.64.67h-.86v-2a2 2 0 0 0-2-2h-9a2 2 0 0 0-2 2v2h-.86a.66.66 0 0 1-.64-.67V9.67A.66.66 0 0 1 4.64 9h14.72a.66.66 0 0 1 .64.67z"/></g></g>',"question-mark-circle-outline":'<g data-name="Layer 2"><g data-name="menu-arrow-circle"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12 6a3.5 3.5 0 0 0-3.5 3.5 1 1 0 0 0 2 0A1.5 1.5 0 1 1 12 11a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.16A3.49 3.49 0 0 0 12 6z"/><circle cx="12" cy="17" r="1"/></g></g>',"question-mark-outline":'<g data-name="Layer 2"><g data-name="question-mark"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z"/><circle cx="12" cy="19" r="1"/></g></g>',"radio-button-off-outline":'<g data-name="Layer 2"><g data-name="radio-button-off"><rect width="24" height="24" opacity="0"/><path d="M12 22a10 10 0 1 1 10-10 10 10 0 0 1-10 10zm0-18a8 8 0 1 0 8 8 8 8 0 0 0-8-8z"/></g></g>',"radio-button-on-outline":'<g data-name="Layer 2"><g data-name="radio-button-on"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12 7a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/></g></g>',"radio-outline":'<g data-name="Layer 2"><g data-name="radio"><rect width="24" height="24" opacity="0"/><path d="M12 8a3 3 0 0 0-1 5.83 1 1 0 0 0 0 .17v6a1 1 0 0 0 2 0v-6a1 1 0 0 0 0-.17A3 3 0 0 0 12 8zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M3.5 11a6.87 6.87 0 0 1 2.64-5.23 1 1 0 1 0-1.28-1.54A8.84 8.84 0 0 0 1.5 11a8.84 8.84 0 0 0 3.36 6.77 1 1 0 1 0 1.28-1.54A6.87 6.87 0 0 1 3.5 11z"/><path d="M16.64 6.24a1 1 0 0 0-1.28 1.52A4.28 4.28 0 0 1 17 11a4.28 4.28 0 0 1-1.64 3.24A1 1 0 0 0 16 16a1 1 0 0 0 .64-.24A6.2 6.2 0 0 0 19 11a6.2 6.2 0 0 0-2.36-4.76z"/><path d="M8.76 6.36a1 1 0 0 0-1.4-.12A6.2 6.2 0 0 0 5 11a6.2 6.2 0 0 0 2.36 4.76 1 1 0 0 0 1.4-.12 1 1 0 0 0-.12-1.4A4.28 4.28 0 0 1 7 11a4.28 4.28 0 0 1 1.64-3.24 1 1 0 0 0 .12-1.4z"/><path d="M19.14 4.23a1 1 0 1 0-1.28 1.54A6.87 6.87 0 0 1 20.5 11a6.87 6.87 0 0 1-2.64 5.23 1 1 0 0 0 1.28 1.54A8.84 8.84 0 0 0 22.5 11a8.84 8.84 0 0 0-3.36-6.77z"/></g></g>',"recording-outline":'<g data-name="Layer 2"><g data-name="recording"><rect width="24" height="24" opacity="0"/><path d="M18 8a4 4 0 0 0-4 4 3.91 3.91 0 0 0 .56 2H9.44a3.91 3.91 0 0 0 .56-2 4 4 0 1 0-4 4h12a4 4 0 0 0 0-8zM4 12a2 2 0 1 1 2 2 2 2 0 0 1-2-2zm14 2a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/></g></g>',"refresh-outline":'<g data-name="Layer 2"><g data-name="refresh"><rect width="24" height="24" opacity="0"/><path d="M20.3 13.43a1 1 0 0 0-1.25.65A7.14 7.14 0 0 1 12.18 19 7.1 7.1 0 0 1 5 12a7.1 7.1 0 0 1 7.18-7 7.26 7.26 0 0 1 4.65 1.67l-2.17-.36a1 1 0 0 0-1.15.83 1 1 0 0 0 .83 1.15l4.24.7h.17a1 1 0 0 0 .34-.06.33.33 0 0 0 .1-.06.78.78 0 0 0 .2-.11l.09-.11c0-.05.09-.09.13-.15s0-.1.05-.14a1.34 1.34 0 0 0 .07-.18l.75-4a1 1 0 0 0-2-.38l-.27 1.45A9.21 9.21 0 0 0 12.18 3 9.1 9.1 0 0 0 3 12a9.1 9.1 0 0 0 9.18 9A9.12 9.12 0 0 0 21 14.68a1 1 0 0 0-.7-1.25z"/></g></g>',"repeat-outline":'<g data-name="Layer 2"><g data-name="repeat"><rect width="24" height="24" opacity="0"/><path d="M17.91 5h-12l1.3-1.29a1 1 0 0 0-1.42-1.42l-3 3a1 1 0 0 0 0 1.42l3 3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L5.91 7h12a1.56 1.56 0 0 1 1.59 1.53V11a1 1 0 0 0 2 0V8.53A3.56 3.56 0 0 0 17.91 5z"/><path d="M18.21 14.29a1 1 0 0 0-1.42 1.42l1.3 1.29h-12a1.56 1.56 0 0 1-1.59-1.53V13a1 1 0 0 0-2 0v2.47A3.56 3.56 0 0 0 6.09 19h12l-1.3 1.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 0-1.42z"/></g></g>',"rewind-left-outline":'<g data-name="Layer 2"><g data-name="rewind-left"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.45 6.2a2.1 2.1 0 0 0-2.21.26l-4.74 3.92V7.79a1.76 1.76 0 0 0-1.05-1.59 2.1 2.1 0 0 0-2.21.26l-5.1 4.21a1.7 1.7 0 0 0 0 2.66l5.1 4.21a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59v-2.59l4.74 3.92a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59V7.79a1.76 1.76 0 0 0-1.05-1.59zM9.5 16l-4.82-4L9.5 8.09zm8 0l-4.82-4 4.82-3.91z"/></g></g>',"rewind-right-outline":'<g data-name="Layer 2"><g data-name="rewind-right"><rect width="24" height="24" opacity="0"/><path d="M20.86 10.67l-5.1-4.21a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1.05 1.59v2.59L7.76 6.46a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1 1.59v8.42a1.76 1.76 0 0 0 1 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l4.74-3.92v2.59a1.76 1.76 0 0 0 1.05 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l5.1-4.21a1.7 1.7 0 0 0 0-2.66zM6.5 15.91V8l4.82 4zm8 0V8l4.82 4z"/></g></g>',"save-outline":'<g data-name="Layer 2"><g data-name="save"><rect width="24" height="24" opacity="0"/><path d="M20.12 8.71l-4.83-4.83A3 3 0 0 0 13.17 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-7.17a3 3 0 0 0-.88-2.12zM10 19v-2h4v2zm9-1a1 1 0 0 1-1 1h-2v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h2v5a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2h-3V5h3.17a1.05 1.05 0 0 1 .71.29l4.83 4.83a1 1 0 0 1 .29.71z"/></g></g>',"scissors-outline":'<g data-name="Layer 2"><g data-name="scissors"><rect width="24" height="24" opacity="0"/><path d="M20.21 5.71a1 1 0 1 0-1.42-1.42l-6.28 6.31-3.3-3.31A3 3 0 0 0 9.5 6a3 3 0 1 0-3 3 3 3 0 0 0 1.29-.3L11.1 12l-3.29 3.3A3 3 0 0 0 6.5 15a3 3 0 1 0 3 3 3 3 0 0 0-.29-1.26zM6.5 7a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0 12a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M15.21 13.29a1 1 0 0 0-1.42 1.42l5 5a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g>',"search-outline":'<g data-name="Layer 2"><g data-name="search"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/></g></g>',"settings-2-outline":'<g data-name="Layer 2"><g data-name="settings-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12.94 22h-1.89a1.68 1.68 0 0 1-1.68-1.68v-1.09a.34.34 0 0 0-.22-.29.38.38 0 0 0-.41 0l-.74.8a1.67 1.67 0 0 1-2.37 0L4.26 18.4a1.66 1.66 0 0 1-.5-1.19 1.72 1.72 0 0 1 .5-1.21l.74-.74a.34.34 0 0 0 0-.37c-.06-.15-.16-.26-.3-.26H3.68A1.69 1.69 0 0 1 2 12.94v-1.89a1.68 1.68 0 0 1 1.68-1.68h1.09a.34.34 0 0 0 .29-.22.38.38 0 0 0 0-.41L4.26 8a1.67 1.67 0 0 1 0-2.37L5.6 4.26a1.65 1.65 0 0 1 1.18-.5 1.72 1.72 0 0 1 1.22.5l.74.74a.34.34 0 0 0 .37 0c.15-.06.26-.16.26-.3V3.68A1.69 1.69 0 0 1 11.06 2H13a1.68 1.68 0 0 1 1.68 1.68v1.09a.34.34 0 0 0 .22.29.38.38 0 0 0 .41 0l.69-.8a1.67 1.67 0 0 1 2.37 0l1.37 1.34a1.67 1.67 0 0 1 .5 1.19 1.63 1.63 0 0 1-.5 1.21l-.74.74a.34.34 0 0 0 0 .37c.06.15.16.26.3.26h1.09A1.69 1.69 0 0 1 22 11.06V13a1.68 1.68 0 0 1-1.68 1.68h-1.09a.34.34 0 0 0-.29.22.34.34 0 0 0 0 .37l.77.77a1.67 1.67 0 0 1 0 2.37l-1.31 1.33a1.65 1.65 0 0 1-1.18.5 1.72 1.72 0 0 1-1.19-.5l-.77-.74a.34.34 0 0 0-.37 0c-.15.06-.26.16-.26.3v1.09A1.69 1.69 0 0 1 12.94 22zm-1.57-2h1.26v-.77a2.33 2.33 0 0 1 1.46-2.14 2.36 2.36 0 0 1 2.59.47l.54.54.88-.88-.54-.55a2.34 2.34 0 0 1-.48-2.56 2.33 2.33 0 0 1 2.14-1.45H20v-1.29h-.77a2.33 2.33 0 0 1-2.14-1.46 2.36 2.36 0 0 1 .47-2.59l.54-.54-.88-.88-.55.54a2.39 2.39 0 0 1-4-1.67V4h-1.3v.77a2.33 2.33 0 0 1-1.46 2.14 2.36 2.36 0 0 1-2.59-.47l-.54-.54-.88.88.54.55a2.39 2.39 0 0 1-1.67 4H4v1.26h.77a2.33 2.33 0 0 1 2.14 1.46 2.36 2.36 0 0 1-.47 2.59l-.54.54.88.88.55-.54a2.39 2.39 0 0 1 4 1.67z" data-name="&lt;Group&gt;"/><path d="M12 15.5a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5zm0-5a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0-1.5-1.5z"/></g></g>',"settings-outline":'<g data-name="Layer 2"><g data-name="settings"><rect width="24" height="24" opacity="0"/><path d="M8.61 22a2.25 2.25 0 0 1-1.35-.46L5.19 20a2.37 2.37 0 0 1-.49-3.22 2.06 2.06 0 0 0 .23-1.86l-.06-.16a1.83 1.83 0 0 0-1.12-1.22h-.16a2.34 2.34 0 0 1-1.48-2.94L2.93 8a2.18 2.18 0 0 1 1.12-1.41 2.14 2.14 0 0 1 1.68-.12 1.93 1.93 0 0 0 1.78-.29l.13-.1a1.94 1.94 0 0 0 .73-1.51v-.24A2.32 2.32 0 0 1 10.66 2h2.55a2.26 2.26 0 0 1 1.6.67 2.37 2.37 0 0 1 .68 1.68v.28a1.76 1.76 0 0 0 .69 1.43l.11.08a1.74 1.74 0 0 0 1.59.26l.34-.11A2.26 2.26 0 0 1 21.1 7.8l.79 2.52a2.36 2.36 0 0 1-1.46 2.93l-.2.07A1.89 1.89 0 0 0 19 14.6a2 2 0 0 0 .25 1.65l.26.38a2.38 2.38 0 0 1-.5 3.23L17 21.41a2.24 2.24 0 0 1-3.22-.53l-.12-.17a1.75 1.75 0 0 0-1.5-.78 1.8 1.8 0 0 0-1.43.77l-.23.33A2.25 2.25 0 0 1 9 22a2 2 0 0 1-.39 0zM4.4 11.62a3.83 3.83 0 0 1 2.38 2.5v.12a4 4 0 0 1-.46 3.62.38.38 0 0 0 0 .51L8.47 20a.25.25 0 0 0 .37-.07l.23-.33a3.77 3.77 0 0 1 6.2 0l.12.18a.3.3 0 0 0 .18.12.25.25 0 0 0 .19-.05l2.06-1.56a.36.36 0 0 0 .07-.49l-.26-.38A4 4 0 0 1 17.1 14a3.92 3.92 0 0 1 2.49-2.61l.2-.07a.34.34 0 0 0 .19-.44l-.78-2.49a.35.35 0 0 0-.2-.19.21.21 0 0 0-.19 0l-.34.11a3.74 3.74 0 0 1-3.43-.57L15 7.65a3.76 3.76 0 0 1-1.49-3v-.31a.37.37 0 0 0-.1-.26.31.31 0 0 0-.21-.08h-2.54a.31.31 0 0 0-.29.33v.25a3.9 3.9 0 0 1-1.52 3.09l-.13.1a3.91 3.91 0 0 1-3.63.59.22.22 0 0 0-.14 0 .28.28 0 0 0-.12.15L4 11.12a.36.36 0 0 0 .22.45z" data-name="&lt;Group&gt;"/><path d="M12 15.5a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5zm0-5a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0-1.5-1.5z"/></g></g>',"shake-outline":'<g data-name="Layer 2"><g data-name="shake"><rect width="24" height="24" opacity="0"/><path d="M5.5 18a1 1 0 0 1-.64-.24A8.81 8.81 0 0 1 1.5 11a8.81 8.81 0 0 1 3.36-6.76 1 1 0 1 1 1.28 1.52A6.9 6.9 0 0 0 3.5 11a6.9 6.9 0 0 0 2.64 5.24 1 1 0 0 1 .13 1.4 1 1 0 0 1-.77.36z"/><path d="M12 7a4.09 4.09 0 0 1 1 .14V3a1 1 0 0 0-2 0v4.14A4.09 4.09 0 0 1 12 7z"/><path d="M12 15a4.09 4.09 0 0 1-1-.14V20a1 1 0 0 0 2 0v-5.14a4.09 4.09 0 0 1-1 .14z"/><path d="M16 16a1 1 0 0 1-.77-.36 1 1 0 0 1 .13-1.4A4.28 4.28 0 0 0 17 11a4.28 4.28 0 0 0-1.64-3.24 1 1 0 1 1 1.28-1.52A6.2 6.2 0 0 1 19 11a6.2 6.2 0 0 1-2.36 4.76A1 1 0 0 1 16 16z"/><path d="M8 16a1 1 0 0 1-.64-.24A6.2 6.2 0 0 1 5 11a6.2 6.2 0 0 1 2.36-4.76 1 1 0 1 1 1.28 1.52A4.28 4.28 0 0 0 7 11a4.28 4.28 0 0 0 1.64 3.24 1 1 0 0 1 .13 1.4A1 1 0 0 1 8 16z"/><path d="M18.5 18a1 1 0 0 1-.77-.36 1 1 0 0 1 .13-1.4A6.9 6.9 0 0 0 20.5 11a6.9 6.9 0 0 0-2.64-5.24 1 1 0 1 1 1.28-1.52A8.81 8.81 0 0 1 22.5 11a8.81 8.81 0 0 1-3.36 6.76 1 1 0 0 1-.64.24z"/><path d="M12 12a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-1zm0 0zm0 0zm0 0zm0 0zm0 0zm0 0z"/></g></g>',"share-outline":'<g data-name="Layer 2"><g data-name="share"><rect width="24" height="24" opacity="0"/><path d="M18 15a3 3 0 0 0-2.1.86L8 12.34V12v-.33l7.9-3.53A3 3 0 1 0 15 6v.34L7.1 9.86a3 3 0 1 0 0 4.28l7.9 3.53V18a3 3 0 1 0 3-3zm0-10a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM5 13a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm13 6a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"shield-off-outline":'<g data-name="Layer 2"><g data-name="shield-off"><rect width="24" height="24" opacity="0"/><path d="M4.71 3.29a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M12.3 19.68l-.3.17-.3-.17A13.15 13.15 0 0 1 5 8.23v-.14L5.16 8 3.73 6.56A2 2 0 0 0 3 8.09v.14a15.17 15.17 0 0 0 7.72 13.2l.3.17a2 2 0 0 0 2 0l.3-.17a15.22 15.22 0 0 0 3-2.27l-1.42-1.42a12.56 12.56 0 0 1-2.6 1.94z"/><path d="M20 6.34L13 2.4a2 2 0 0 0-2 0L7.32 4.49 8.78 6 12 4.15l7 3.94v.14a13 13 0 0 1-1.63 6.31L18.84 16A15.08 15.08 0 0 0 21 8.23v-.14a2 2 0 0 0-1-1.75z"/></g></g>',"shield-outline":'<g data-name="Layer 2"><g data-name="shield"><rect width="24" height="24" opacity="0"/><path d="M12 21.85a2 2 0 0 1-1-.25l-.3-.17A15.17 15.17 0 0 1 3 8.23v-.14a2 2 0 0 1 1-1.75l7-3.94a2 2 0 0 1 2 0l7 3.94a2 2 0 0 1 1 1.75v.14a15.17 15.17 0 0 1-7.72 13.2l-.3.17a2 2 0 0 1-.98.25zm0-17.7L5 8.09v.14a13.15 13.15 0 0 0 6.7 11.45l.3.17.3-.17A13.15 13.15 0 0 0 19 8.23v-.14z"/></g></g>',"shopping-bag-outline":'<g data-name="Layer 2"><g data-name="shopping-bag"><rect width="24" height="24" opacity="0"/><path d="M20.12 6.71l-2.83-2.83A3 3 0 0 0 15.17 3H8.83a3 3 0 0 0-2.12.88L3.88 6.71A3 3 0 0 0 3 8.83V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8.83a3 3 0 0 0-.88-2.12zm-12-1.42A1.05 1.05 0 0 1 8.83 5h6.34a1.05 1.05 0 0 1 .71.29L17.59 7H6.41zM18 19H6a1 1 0 0 1-1-1V9h14v9a1 1 0 0 1-1 1z"/><path d="M15 11a1 1 0 0 0-1 1 2 2 0 0 1-4 0 1 1 0 0 0-2 0 4 4 0 0 0 8 0 1 1 0 0 0-1-1z"/></g></g>',"shopping-cart-outline":'<g data-name="Layer 2"><g data-name="shopping-cart"><rect width="24" height="24" opacity="0"/><path d="M21.08 7a2 2 0 0 0-1.7-1H6.58L6 3.74A1 1 0 0 0 5 3H3a1 1 0 0 0 0 2h1.24L7 15.26A1 1 0 0 0 8 16h9a1 1 0 0 0 .89-.55l3.28-6.56A2 2 0 0 0 21.08 7zm-4.7 7H8.76L7.13 8h12.25z"/><circle cx="7.5" cy="19.5" r="1.5"/><circle cx="17.5" cy="19.5" r="1.5"/></g></g>',"shuffle-2-outline":'<g data-name="Layer 2"><g data-name="shuffle-2"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18.71 14.29a1 1 0 0 0-1.42 1.42l.29.29H16a4 4 0 0 1 0-8h1.59l-.3.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 10a1 1 0 0 0 .71-.29l2-2A1 1 0 0 0 21 7a1 1 0 0 0-.29-.71l-2-2a1 1 0 0 0-1.42 1.42l.29.29H16a6 6 0 0 0-5 2.69A6 6 0 0 0 6 6H4a1 1 0 0 0 0 2h2a4 4 0 0 1 0 8H4a1 1 0 0 0 0 2h2a6 6 0 0 0 5-2.69A6 6 0 0 0 16 18h1.59l-.3.29a1 1 0 0 0 0 1.42A1 1 0 0 0 18 20a1 1 0 0 0 .71-.29l2-2A1 1 0 0 0 21 17a1 1 0 0 0-.29-.71z"/></g></g>',"shuffle-outline":'<g data-name="Layer 2"><g data-name="shuffle"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M18 9.31a1 1 0 0 0 1 1 1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-4.3a1 1 0 0 0-1 1 1 1 0 0 0 1 1h1.89L12 10.59 6.16 4.76a1 1 0 0 0-1.41 1.41L10.58 12l-6.29 6.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42z"/><path d="M19 13.68a1 1 0 0 0-1 1v1.91l-2.78-2.79a1 1 0 0 0-1.42 1.42L16.57 18h-1.88a1 1 0 0 0 0 2H19a1 1 0 0 0 1-1.11v-4.21a1 1 0 0 0-1-1z"/></g></g>',"skip-back-outline":'<g data-name="Layer 2"><g data-name="skip-back"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16.45 6.2a2.1 2.1 0 0 0-2.21.26l-5.1 4.21-.14.15V7a1 1 0 0 0-2 0v10a1 1 0 0 0 2 0v-3.82l.14.15 5.1 4.21a2.06 2.06 0 0 0 1.3.46 2.23 2.23 0 0 0 .91-.2 1.76 1.76 0 0 0 1.05-1.59V7.79a1.76 1.76 0 0 0-1.05-1.59zM15.5 16l-4.82-4 4.82-3.91z"/></g></g>',"skip-forward-outline":'<g data-name="Layer 2"><g data-name="skip-forward"><rect width="24" height="24" opacity="0"/><path d="M16 6a1 1 0 0 0-1 1v3.82l-.14-.15-5.1-4.21a2.1 2.1 0 0 0-2.21-.26 1.76 1.76 0 0 0-1 1.59v8.42a1.76 1.76 0 0 0 1 1.59 2.23 2.23 0 0 0 .91.2 2.06 2.06 0 0 0 1.3-.46l5.1-4.21.14-.15V17a1 1 0 0 0 2 0V7a1 1 0 0 0-1-1zm-7.5 9.91V8l4.82 4z"/></g></g>',"slash-outline":'<g data-name="Layer 2"><g data-name="slash"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm8 10a7.92 7.92 0 0 1-1.69 4.9L7.1 5.69A7.92 7.92 0 0 1 12 4a8 8 0 0 1 8 8zM4 12a7.92 7.92 0 0 1 1.69-4.9L16.9 18.31A7.92 7.92 0 0 1 12 20a8 8 0 0 1-8-8z"/></g></g>',"smartphone-outline":'<g data-name="Layer 2"><g data-name="smartphone"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17 2H7a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm1 17a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1z"/><circle cx="12" cy="16.5" r="1.5"/><path d="M14.5 6h-5a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2z"/></g></g>',"smiling-face-outline":'<defs><style/></defs><g id="Layer_2" data-name="Layer 2"><g id="smiling-face"><g id="smiling-face" data-name="smiling-face"><rect width="24" height="24" opacity="0"/><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm5 9a5 5 0 0 1-10 0z" id="&#x1F3A8;-Icon-&#x421;olor"/></g></g></g>',"speaker-outline":'<g data-name="Layer 2"><g data-name="speaker"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M12 11a3 3 0 1 0-3-3 3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/><path d="M12 12a3.5 3.5 0 1 0 3.5 3.5A3.5 3.5 0 0 0 12 12zm0 5a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 12 17z"/><path d="M17 2H7a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm1 17a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1z"/></g></g>',"square-outline":'<g data-name="Layer 2"><g data-name="square"><rect width="24" height="24" opacity="0"/><path d="M18 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z"/></g></g>',"star-outline":'<g data-name="Layer 2"><g data-name="star"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M17.56 21a1 1 0 0 1-.46-.11L12 18.22l-5.1 2.67a1 1 0 0 1-1.45-1.06l1-5.63-4.12-4a1 1 0 0 1-.25-1 1 1 0 0 1 .81-.68l5.7-.83 2.51-5.13a1 1 0 0 1 1.8 0l2.54 5.12 5.7.83a1 1 0 0 1 .81.68 1 1 0 0 1-.25 1l-4.12 4 1 5.63a1 1 0 0 1-.4 1 1 1 0 0 1-.62.18zM12 16.1a.92.92 0 0 1 .46.11l3.77 2-.72-4.21a1 1 0 0 1 .29-.89l3-2.93-4.2-.62a1 1 0 0 1-.71-.56L12 5.25 10.11 9a1 1 0 0 1-.75.54l-4.2.62 3 2.93a1 1 0 0 1 .29.89l-.72 4.16 3.77-2a.92.92 0 0 1 .5-.04z"/></g></g>',"stop-circle-outline":'<g data-name="Layer 2"><g data-name="stop-circle"><rect width="24" height="24" opacity="0"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M14.75 8h-5.5A1.25 1.25 0 0 0 8 9.25v5.5A1.25 1.25 0 0 0 9.25 16h5.5A1.25 1.25 0 0 0 16 14.75v-5.5A1.25 1.25 0 0 0 14.75 8zM14 14h-4v-4h4z"/></g></g>',"sun-outline":'<g data-name="Layer 2"><g data-name="sun"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M12 6a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1z"/><path d="M21 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2z"/><path d="M6 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1z"/><path d="M6.22 5a1 1 0 0 0-1.39 1.47l1.44 1.39a1 1 0 0 0 .73.28 1 1 0 0 0 .72-.31 1 1 0 0 0 0-1.41z"/><path d="M17 8.14a1 1 0 0 0 .69-.28l1.44-1.39A1 1 0 0 0 17.78 5l-1.44 1.42a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.31z"/><path d="M12 18a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-1-1z"/><path d="M17.73 16.14a1 1 0 0 0-1.39 1.44L17.78 19a1 1 0 0 0 .69.28 1 1 0 0 0 .72-.3 1 1 0 0 0 0-1.42z"/><path d="M6.27 16.14l-1.44 1.39a1 1 0 0 0 0 1.42 1 1 0 0 0 .72.3 1 1 0 0 0 .67-.25l1.44-1.39a1 1 0 0 0-1.39-1.44z"/><path d="M12 8a4 4 0 1 0 4 4 4 4 0 0 0-4-4zm0 6a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/></g></g>',"swap-outline":'<g data-name="Layer 2"><g data-name="swap"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M4 9h13l-1.6 1.2a1 1 0 0 0-.2 1.4 1 1 0 0 0 .8.4 1 1 0 0 0 .6-.2l4-3a1 1 0 0 0 0-1.59l-3.86-3a1 1 0 0 0-1.23 1.58L17.08 7H4a1 1 0 0 0 0 2z"/><path d="M20 16H7l1.6-1.2a1 1 0 0 0-1.2-1.6l-4 3a1 1 0 0 0 0 1.59l3.86 3a1 1 0 0 0 .61.21 1 1 0 0 0 .79-.39 1 1 0 0 0-.17-1.4L6.92 18H20a1 1 0 0 0 0-2z"/></g></g>',"sync-outline":'<g data-name="Layer 2"><g data-name="sync"><rect width="24" height="24" opacity="0"/><path d="M21.66 10.37a.62.62 0 0 0 .07-.19l.75-4a1 1 0 0 0-2-.36l-.37 2a9.22 9.22 0 0 0-16.58.84 1 1 0 0 0 .55 1.3 1 1 0 0 0 1.31-.55A7.08 7.08 0 0 1 12.07 5a7.17 7.17 0 0 1 6.24 3.58l-1.65-.27a1 1 0 1 0-.32 2l4.25.71h.16a.93.93 0 0 0 .34-.06.33.33 0 0 0 .1-.06.78.78 0 0 0 .2-.11l.08-.1a1.07 1.07 0 0 0 .14-.16.58.58 0 0 0 .05-.16z"/><path d="M19.88 14.07a1 1 0 0 0-1.31.56A7.08 7.08 0 0 1 11.93 19a7.17 7.17 0 0 1-6.24-3.58l1.65.27h.16a1 1 0 0 0 .16-2L3.41 13a.91.91 0 0 0-.33 0H3a1.15 1.15 0 0 0-.32.14 1 1 0 0 0-.18.18l-.09.1a.84.84 0 0 0-.07.19.44.44 0 0 0-.07.17l-.75 4a1 1 0 0 0 .8 1.22h.18a1 1 0 0 0 1-.82l.37-2a9.22 9.22 0 0 0 16.58-.83 1 1 0 0 0-.57-1.28z"/></g></g>',"text-outline":'<g data-name="Layer 2"><g data-name="text"><rect width="24" height="24" opacity="0"/><path d="M20 4H4a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V6h6v13H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2h-2V6h6v2a1 1 0 0 0 2 0V5a1 1 0 0 0-1-1z"/></g></g>',"thermometer-minus-outline":'<g data-name="Layer 2"><g data-name="thermometer-minus"><rect width="24" height="24" opacity="0"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1"/><path d="M14 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm0-18a1 1 0 0 0-1 1v8.54a1 1 0 0 1-.5.87A3 3 0 0 0 11 17a3 3 0 0 0 6 0 3 3 0 0 0-1.5-2.59 1 1 0 0 1-.5-.87V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 14 4z"/></g></g>',"thermometer-outline":'<g data-name="Layer 2"><g data-name="thermometer"><rect width="24" height="24" opacity="0"/><path d="M12 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm0-18a1 1 0 0 0-1 1v8.54a1 1 0 0 1-.5.87A3 3 0 0 0 9 17a3 3 0 0 0 6 0 3 3 0 0 0-1.5-2.59 1 1 0 0 1-.5-.87V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 12 4z"/></g></g>',"thermometer-plus-outline":'<g data-name="Layer 2"><g data-name="thermometer-plus"><rect width="24" height="24" opacity="0"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1"/><rect x="2" y="5" width="6" height="2" rx="1" ry="1" transform="rotate(-90 5 6)"/><path d="M14 22a5 5 0 0 1-3-9V5a3 3 0 0 1 3-3 3 3 0 0 1 3 3v8a5 5 0 0 1-3 9zm0-18a1 1 0 0 0-1 1v8.54a1 1 0 0 1-.5.87A3 3 0 0 0 11 17a3 3 0 0 0 6 0 3 3 0 0 0-1.5-2.59 1 1 0 0 1-.5-.87V5a.93.93 0 0 0-.29-.69A1 1 0 0 0 14 4z"/></g></g>',"toggle-left-outline":'<g data-name="Layer 2"><g data-name="toggle-left"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M15 5H9a7 7 0 0 0 0 14h6a7 7 0 0 0 0-14zm0 12H9A5 5 0 0 1 9 7h6a5 5 0 0 1 0 10z"/><path d="M9 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"toggle-right-outline":'<g data-name="Layer 2"><g data-name="toggle-right"><rect width="24" height="24" opacity="0"/><path d="M15 5H9a7 7 0 0 0 0 14h6a7 7 0 0 0 0-14zm0 12H9A5 5 0 0 1 9 7h6a5 5 0 0 1 0 10z"/><path d="M15 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"trash-2-outline":'<g data-name="Layer 2"><g data-name="trash-2"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z"/><path d="M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/><path d="M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/></g></g>',"trash-outline":'<g data-name="Layer 2"><g data-name="trash"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z"/></g></g>',"trending-down-outline":'<g data-name="Layer 2"><g data-name="trending-down"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M21 12a1 1 0 0 0-2 0v2.3l-4.24-5a1 1 0 0 0-1.27-.21L9.22 11.7 4.77 6.36a1 1 0 1 0-1.54 1.28l5 6a1 1 0 0 0 1.28.22l4.28-2.57 4 4.71H15a1 1 0 0 0 0 2h5a1.1 1.1 0 0 0 .36-.07l.14-.08a1.19 1.19 0 0 0 .15-.09.75.75 0 0 0 .14-.17 1.1 1.1 0 0 0 .09-.14.64.64 0 0 0 .05-.17A.78.78 0 0 0 21 17z"/></g></g>',"trending-up-outline":'<g data-name="Layer 2"><g data-name="trending-up"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M21 7a.78.78 0 0 0 0-.21.64.64 0 0 0-.05-.17 1.1 1.1 0 0 0-.09-.14.75.75 0 0 0-.14-.17l-.12-.07a.69.69 0 0 0-.19-.1h-.2A.7.7 0 0 0 20 6h-5a1 1 0 0 0 0 2h2.83l-4 4.71-4.32-2.57a1 1 0 0 0-1.28.22l-5 6a1 1 0 0 0 .13 1.41A1 1 0 0 0 4 18a1 1 0 0 0 .77-.36l4.45-5.34 4.27 2.56a1 1 0 0 0 1.27-.21L19 9.7V12a1 1 0 0 0 2 0V7z"/></g></g>',"tv-outline":'<g data-name="Layer 2"><g data-name="tv"><rect width="24" height="24" opacity="0"/><path d="M18 6h-3.59l2.3-2.29a1 1 0 1 0-1.42-1.42L12 5.59l-3.29-3.3a1 1 0 1 0-1.42 1.42L9.59 6H6a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3zm1 13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/></g></g>',"twitter-outline":'<g data-name="Layer 2"><g data-name="twitter"><polyline points="0 0 24 0 24 24 0 24" opacity="0"/><path d="M8.51 20h-.08a10.87 10.87 0 0 1-4.65-1.09A1.38 1.38 0 0 1 3 17.47a1.41 1.41 0 0 1 1.16-1.18 6.63 6.63 0 0 0 2.54-.89 9.49 9.49 0 0 1-3.51-9.07 1.41 1.41 0 0 1 1-1.15 1.35 1.35 0 0 1 1.43.41 7.09 7.09 0 0 0 4.88 2.75 4.5 4.5 0 0 1 1.41-3.1 4.47 4.47 0 0 1 6.37.19.7.7 0 0 0 .78.1A1.39 1.39 0 0 1 21 7.13a6.66 6.66 0 0 1-1.28 2.6A10.79 10.79 0 0 1 8.51 20zm0-2h.08a8.79 8.79 0 0 0 9.09-8.59 1.32 1.32 0 0 1 .37-.85 5.19 5.19 0 0 0 .62-1 2.56 2.56 0 0 1-1.91-.85A2.45 2.45 0 0 0 15 6a2.5 2.5 0 0 0-1.79.69 2.53 2.53 0 0 0-.72 2.42l.26 1.14-1.17.08a8.3 8.3 0 0 1-6.54-2.4 7.12 7.12 0 0 0 3.73 6.46l.95.54-.63.9a5.62 5.62 0 0 1-2.68 1.92A8.34 8.34 0 0 0 8.5 18zM19 6.65z"/></g></g>',"umbrella-outline":'<g data-name="Layer 2"><g data-name="umbrella"><rect width="24" height="24" opacity="0"/><path d="M12 2A10 10 0 0 0 2 12a1 1 0 0 0 1 1h8v6a3 3 0 0 0 6 0 1 1 0 0 0-2 0 1 1 0 0 1-2 0v-6h8a1 1 0 0 0 1-1A10 10 0 0 0 12 2zm-7.94 9a8 8 0 0 1 15.88 0z"/></g></g>',"undo-outline":'<g data-name="Layer 2"><g data-name="undo"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M20.22 21a1 1 0 0 1-1-.76 8.91 8.91 0 0 0-7.8-6.69v1.12a1.78 1.78 0 0 1-1.09 1.64A2 2 0 0 1 8.18 16l-5.06-4.41a1.76 1.76 0 0 1 0-2.68l5.06-4.42a2 2 0 0 1 2.18-.3 1.78 1.78 0 0 1 1.09 1.64V7A10.89 10.89 0 0 1 21.5 17.75a10.29 10.29 0 0 1-.31 2.49 1 1 0 0 1-1 .76zm-9.77-9.5a11.07 11.07 0 0 1 8.81 4.26A9 9 0 0 0 10.45 9a1 1 0 0 1-1-1V6.08l-4.82 4.17 4.82 4.21v-2a1 1 0 0 1 1-.96z"/></g></g>',"unlock-outline":'<g data-name="Layer 2"><g data-name="unlock"><rect width="24" height="24" opacity="0"/><path d="M17 8h-7V6a2 2 0 0 1 4 0 1 1 0 0 0 2 0 4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1z"/><path d="M12 12a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g>',"upload-outline":'<g data-name="Layer 2"><g data-name="upload"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><rect x="4" y="4" width="16" height="2" rx="1" ry="1" transform="rotate(180 12 5)"/><rect x="17" y="5" width="4" height="2" rx="1" ry="1" transform="rotate(90 19 6)"/><rect x="3" y="5" width="4" height="2" rx="1" ry="1" transform="rotate(90 5 6)"/><path d="M8 14a1 1 0 0 1-.8-.4 1 1 0 0 1 .2-1.4l4-3a1 1 0 0 1 1.18 0l4 2.82a1 1 0 0 1 .24 1.39 1 1 0 0 1-1.4.24L12 11.24 8.6 13.8a1 1 0 0 1-.6.2z"/><path d="M12 21a1 1 0 0 1-1-1v-8a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1z"/></g></g>',"video-off-outline":'<g data-name="Layer 2"><g data-name="video-off"><rect width="24" height="24" opacity="0"/><path d="M17 15.59l-2-2L8.41 7l-2-2-1.7-1.71a1 1 0 0 0-1.42 1.42l.54.53L5.59 7l9.34 9.34 1.46 1.46 2.9 2.91a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M14 17H5a1 1 0 0 1-1-1V8a1 1 0 0 1 .4-.78L3 5.8A3 3 0 0 0 2 8v8a3 3 0 0 0 3 3h9a2.94 2.94 0 0 0 1.66-.51L14.14 17a.7.7 0 0 1-.14 0z"/><path d="M21 7.15a1.7 1.7 0 0 0-1.85.3l-2.15 2V8a3 3 0 0 0-3-3H7.83l2 2H14a1 1 0 0 1 1 1v4.17l4.72 4.72a1.73 1.73 0 0 0 .6.11 1.68 1.68 0 0 0 .69-.15 1.6 1.6 0 0 0 1-1.48V8.63A1.6 1.6 0 0 0 21 7.15zm-1 7.45L17.19 12 20 9.4z"/></g></g>',"video-outline":'<g data-name="Layer 2"><g data-name="video"><rect width="24" height="24" opacity="0"/><path d="M21 7.15a1.7 1.7 0 0 0-1.85.3l-2.15 2V8a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h9a3 3 0 0 0 3-3v-1.45l2.16 2a1.74 1.74 0 0 0 1.16.45 1.68 1.68 0 0 0 .69-.15 1.6 1.6 0 0 0 1-1.48V8.63A1.6 1.6 0 0 0 21 7.15zM15 16a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1zm5-1.4L17.19 12 20 9.4z"/></g></g>',"volume-down-outline":'<g data-name="Layer 2"><g data-name="volume-down"><rect width="24" height="24" opacity="0"/><path d="M20.78 8.37a1 1 0 1 0-1.56 1.26 4 4 0 0 1 0 4.74A1 1 0 0 0 20 16a1 1 0 0 0 .78-.37 6 6 0 0 0 0-7.26z"/><path d="M16.47 3.12a1 1 0 0 0-1 0L9 7.57H4a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4A1.06 1.06 0 0 0 16 21a1 1 0 0 0 1-1V4a1 1 0 0 0-.53-.88zM15 18.1l-5.1-3.5a1 1 0 0 0-.57-.17H5V9.57h4.33a1 1 0 0 0 .57-.17L15 5.9z"/></g></g>',"volume-mute-outline":'<g data-name="Layer 2"><g data-name="volume-mute"><rect width="24" height="24" opacity="0"/><path d="M17 21a1.06 1.06 0 0 1-.57-.17L10 16.43H5a1 1 0 0 1-1-1V8.57a1 1 0 0 1 1-1h5l6.41-4.4A1 1 0 0 1 18 4v16a1 1 0 0 1-1 1zM6 14.43h4.33a1 1 0 0 1 .57.17l5.1 3.5V5.9l-5.1 3.5a1 1 0 0 1-.57.17H6z"/></g></g>',"volume-off-outline":'<g data-name="Layer 2"><g data-name="volume-off"><rect width="24" height="24" opacity="0"/><path d="M4.71 3.29a1 1 0 0 0-1.42 1.42l16 16a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M16.91 14.08l1.44 1.44a6 6 0 0 0-.07-7.15 1 1 0 1 0-1.56 1.26 4 4 0 0 1 .19 4.45z"/><path d="M21 12a6.51 6.51 0 0 1-1.78 4.39l1.42 1.42A8.53 8.53 0 0 0 23 12a8.75 8.75 0 0 0-3.36-6.77 1 1 0 1 0-1.28 1.54A6.8 6.8 0 0 1 21 12z"/><path d="M13.5 18.1l-5.1-3.5a1 1 0 0 0-.57-.17H3.5V9.57h3.24l-2-2H2.5a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4a1.06 1.06 0 0 0 .57.17 1 1 0 0 0 1-1v-1.67l-2-2z"/><path d="M13.5 5.9v4.77l2 2V4a1 1 0 0 0-1.57-.83L9.23 6.4l1.44 1.44z"/></g></g>',"volume-up-outline":'<g data-name="Layer 2"><g data-name="volume-up"><rect width="24" height="24" opacity="0"/><path d="M18.28 8.37a1 1 0 1 0-1.56 1.26 4 4 0 0 1 0 4.74A1 1 0 0 0 17.5 16a1 1 0 0 0 .78-.37 6 6 0 0 0 0-7.26z"/><path d="M19.64 5.23a1 1 0 1 0-1.28 1.54A6.8 6.8 0 0 1 21 12a6.8 6.8 0 0 1-2.64 5.23 1 1 0 0 0-.13 1.41A1 1 0 0 0 19 19a1 1 0 0 0 .64-.23A8.75 8.75 0 0 0 23 12a8.75 8.75 0 0 0-3.36-6.77z"/><path d="M15 3.12a1 1 0 0 0-1 0L7.52 7.57h-5a1 1 0 0 0-1 1v6.86a1 1 0 0 0 1 1h5l6.41 4.4a1.06 1.06 0 0 0 .57.17 1 1 0 0 0 1-1V4a1 1 0 0 0-.5-.88zm-1.47 15L8.4 14.6a1 1 0 0 0-.57-.17H3.5V9.57h4.33a1 1 0 0 0 .57-.17l5.1-3.5z"/></g></g>',"wifi-off-outline":'<g data-name="Layer 2"><g data-name="wifi-off"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="19" r="1"/><path d="M12.44 11l-1.9-1.89-2.46-2.44-1.55-1.55-1.82-1.83a1 1 0 0 0-1.42 1.42l1.38 1.37 1.46 1.46 2.23 2.24 1.55 1.54 2.74 2.74 2.79 2.8 3.85 3.85a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/><path d="M21.72 7.93A13.93 13.93 0 0 0 12 4a14.1 14.1 0 0 0-4.44.73l1.62 1.62a11.89 11.89 0 0 1 11.16 3 1 1 0 0 0 .69.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.03-1.39z"/><path d="M3.82 6.65a14.32 14.32 0 0 0-1.54 1.28 1 1 0 0 0 1.38 1.44 13.09 13.09 0 0 1 1.6-1.29z"/><path d="M17 13.14a1 1 0 0 0 .71.3 1 1 0 0 0 .72-1.69A9 9 0 0 0 12 9h-.16l2.35 2.35A7 7 0 0 1 17 13.14z"/><path d="M7.43 10.26a8.8 8.8 0 0 0-1.9 1.49A1 1 0 0 0 7 13.14a7.3 7.3 0 0 1 2-1.41z"/><path d="M8.53 15.4a1 1 0 1 0 1.39 1.44 3.06 3.06 0 0 1 3.84-.25l-2.52-2.52a5 5 0 0 0-2.71 1.33z"/></g></g>',"wifi-outline":'<g data-name="Layer 2"><g data-name="wifi"><rect width="24" height="24" opacity="0"/><circle cx="12" cy="19" r="1"/><path d="M12 14a5 5 0 0 0-3.47 1.4 1 1 0 1 0 1.39 1.44 3.08 3.08 0 0 1 4.16 0 1 1 0 1 0 1.39-1.44A5 5 0 0 0 12 14z"/><path d="M12 9a9 9 0 0 0-6.47 2.75A1 1 0 0 0 7 13.14a7 7 0 0 1 10.08 0 1 1 0 0 0 .71.3 1 1 0 0 0 .72-1.69A9 9 0 0 0 12 9z"/><path d="M21.72 7.93a14 14 0 0 0-19.44 0 1 1 0 0 0 1.38 1.44 12 12 0 0 1 16.68 0 1 1 0 0 0 .69.28 1 1 0 0 0 .72-.31 1 1 0 0 0-.03-1.41z"/></g></g>'}},"./package/src/animation.scss":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./package/src/animation.scss"),a=n("./node_modules/isomorphic-style-loader/insertCss.js"),s="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return s},t._getCss=function(){return""+r},t._insertCss=function(e){return a(s,e)}},"./package/src/default-attrs.json":function(e){e.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"}},"./package/src/icon.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/classnames/dedupe.js"),a=n.n(r),s=n("./package/src/default-attrs.json");function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={hover:!0},h=function(e){return"string"==typeof e||e instanceof String};function c(e){if(!e)return null;e.hover&&(e.hover=h(e.hover)?JSON.parse(e.hover):e.hover);var t=o({},u,e),n=t.hover?"eva-icon-hover-".concat(t.type):"eva-icon-".concat(t.type);return t.class=a()({"eva-animation":!0,"eva-infinite":h(e.infinite)?JSON.parse(e.infinite):e.infinite},n),t}function d(e){return Object.keys(e).map(function(t){return"".concat(t,'="').concat(e[t],'"')}).join(" ")}t.default=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.contents=n,this.attrs=o({},s,{class:"eva eva-".concat(t)})}var t;return(t=[{key:"toSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.animation,n=i(e,["animation"]),r=c(t),s=r?r.class:"",l=o({},this.attrs,n,{class:a()(this.attrs.class,e.class,s)}),u="<svg ".concat(d(l),">").concat(this.contents,"</svg>");return r&&r.hover?'<i class="eva-hover">'.concat(u,"</i>"):u}},{key:"toString",value:function(){return this.contents}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()},"./package/src/icons.js":function(e,t,n){"use strict";n.r(t);var r=n("./package/src/icon.js"),a=n("./package-build/eva-icons.json");t.default=Object.keys(a).map(function(e){return new r.default(e,a[e])}).reduce(function(e,t){return e[t.name]=t,e},{})},"./package/src/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./package/src/icons.js");n.d(t,"icons",function(){return r.default});var a=n("./package/src/replace.js");n.d(t,"replace",function(){return a.default});var s=n("./package/src/animation.scss");"undefined"!=typeof window&&n.n(s).a._insertCss()},"./package/src/replace.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/classnames/dedupe.js"),a=n.n(r),s=n("./package/src/icons.js");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u={"data-eva-animation":"type","data-eva-hover":"hover","data-eva-infinite":"infinite"},h={"data-eva":"name","data-eva-width":"width","data-eva-height":"height","data-eva-fill":"fill"};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d(e),r=n.name,o=l(n,["name"]),u=s.default[r].toSvg(i({},t,o,{animation:p(t.animation,o.animation)},{class:a()(t.class,o.class)})),h=(new DOMParser).parseFromString(u,"text/html"),c=h.querySelector(".eva-hover")||h.querySelector("svg");e.parentNode.replaceChild(c,e)}function d(e){return Array.from(e.attributes).reduce(function(e,t){return u[t.name]?e.animation=i({},e.animation,o({},u[t.name],t.value)):e=i({},e,function(e){return o({},h[e.name]?h[e.name]:e.name,e.value)}(t)),e},{})}function p(e,t){return e||t?i({},e,t):null}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof document)throw new Error("`eva.replace()` only works in a browser environment.");var t=document.querySelectorAll("[data-eva]");Array.from(t).forEach(function(t){return c(t,e)})}}})},e.exports=r()},aceb:function(e,t,n){"use strict";n.d(t,"F",function(){return er}),n.d(t,"q",function(){return pr}),n.d(t,"p",function(){return ur}),n.d(t,"m",function(){return hr}),n.d(t,"o",function(){return cr}),n.d(t,"n",function(){return dr}),n.d(t,"z",function(){return wr}),n.d(t,"y",function(){return vr}),n.d(t,"x",function(){return Ar}),n.d(t,"A",function(){return kr}),n.d(t,"B",function(){return Sr}),n.d(t,"f",function(){return Ir}),n.d(t,"g",function(){return _r}),n.d(t,"C",function(){return Tr}),n.d(t,"D",function(){return Cr}),n.d(t,"a",function(){return Nr}),n.d(t,"c",function(){return Mr}),n.d(t,"b",function(){return Rr}),n.d(t,"d",function(){return Dr}),n.d(t,"e",function(){return Or}),n.d(t,"h",function(){return gr}),n.d(t,"k",function(){return yr}),n.d(t,"i",function(){return Pr}),n.d(t,"j",function(){return $r}),n.d(t,"l",function(){return zr}),n.d(t,"s",function(){return Br}),n.d(t,"t",function(){return jr}),n.d(t,"r",function(){return Hr}),n.d(t,"w",function(){return lr}),n.d(t,"u",function(){return or}),n.d(t,"E",function(){return rr}),n.d(t,"v",function(){return ir});var r=n("fXoL"),a=n("ofXK"),s=n("jtHE"),i=n("XNiG"),o=n("HDdC"),l=n("xgIS"),u=n("VRyK"),h=n("EY2u"),c=n("2Vo4"),d=n("LRne"),p=n("Cfvw"),f=n("D0XW");n("Y7HM");var m=n("PqYM"),g=(n("DH7j"),n("lJxs"));n("XoHu"),n("itXk");var y=n("JX91"),b=n("7o/Q");function x(){return e=>e.lift(new v)}class v{call(e,t){return t.subscribe(new A(e))}}class A extends b.a{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var w=n("pLZG");class k{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new S(e,this.compare,this.keySelector))}}class S extends b.a{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var I=n("w1tV"),_=n("1G5W"),E=n("3E0/");function T(e=-1){return t=>0===e?Object(h.b)():t.lift(new C(e<0?-1:e-1,t))}class C{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new N(e,this.count,this.source))}}class N extends b.a{constructor(e,t,n){super(e),this.count=t,this.source=n}complete(){if(!this.isStopped){const{source:e,count:t}=this;if(0===t)return super.complete();t>-1&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}}}var M=n("eIep");function F(e,t=f.a){return n=>n.lift(new R(e,t))}class R{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new D(e,this.dueTime,this.scheduler))}}class D extends b.a{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(O,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function O(e){e.debouncedNext()}function z(e,t=!1){return n=>n.lift(new P(e,t))}class P{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new $(e,this.predicate,this.inclusive))}}class $ extends b.a{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}var L=n("IzEk"),V=n("vkgz");n("x+ZX"),n("nYR2");let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})(),W=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[B]]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[W]}),e})();var H=n("tyNb"),U=n("quSY");function G(e){return Array.isArray(e)?e:[e]}function q(e){return null==e?"":"string"==typeof e?e:e+"px"}function K(e){return e instanceof r.l?e.nativeElement:e}let X;try{X="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ur){X=!1}let Z,Y,J,Q=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Object(a.D)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.D))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(r.D))},token:e,providedIn:"root"}),e})(),ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})();function te(e){return function(){if(null==Z&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Z=!0}))}finally{Z=Z||!1}return Z}()?e:!!e.capture}function ne(){if(null==Y){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Y=!1,Y;if("scrollBehavior"in document.documentElement.style)Y=!0;else{const e=Element.prototype.scrollTo;Y=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Y}class re{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new i.a,this._typeaheadSubscription=U.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new i.a,this.change=new i.a,e instanceof r.F&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(V.a)(e=>this._pressedLetters.push(e)),F(e),Object(w.a)(()=>this._pressedLetters.length>0),Object(g.a)(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const r=(this._activeItemIndex+n)%t.length,a=t[r];if(!this._skipPredicateFn(a)&&0===a.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||function(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof r.F?this._items.toArray():this._items}}class ae extends re{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class se extends re{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let ie=(()=>{class e{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(Ur){return null}}((n=e).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(t){if(-1===le(t))return!1;if(!this.isVisible(t))return!1}let r=e.nodeName.toLowerCase(),a=le(e);return e.hasAttribute("contenteditable")?-1!==a:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==a:"video"===r?-1!==a&&(null!==a||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||oe(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Q))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(Q))},token:e,providedIn:"root"}),e})();function oe(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function le(e){if(!oe(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class ue{constructor(e,t,n,r,a=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let n=0;n<t.length;n++)t[n].hasAttribute("cdk-focus-"+e)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]):t[n].hasAttribute("cdk-focus-region-"+e)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=0;n<t.length;n++){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=t.length-1;n>=0;n--){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Object(L.a)(1)).subscribe(e)}}let he=(()=>{class e{constructor(e,t,n){this._checker=e,this._ngZone=t,this._document=n}create(e,t=!1){return new ue(e,this._checker,this._ngZone,this._document,t)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(ie),r.ac(r.B),r.ac(a.d))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(ie),Object(r.ac)(r.B),Object(r.ac)(a.d))},token:e,providedIn:"root"}),e})();"undefined"!=typeof Element&&Element;const ce=new r.s("cdk-focus-monitor-default-options"),de=te({passive:!0,capture:!0});let pe=(()=>{class e{constructor(e,t,n,r){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=e=>{if(!this._lastTouchTarget){const t=function(e){return 0===e.buttons}(e)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=e=>{!function(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(e)?(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=fe(e),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)):this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard")},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=e=>{const t=fe(e),n="focus"===e.type?this._onFocus:this._onBlur;for(let r=t;r;r=r.parentElement)n.call(this,e,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(e,t=!1){const n=K(e);if(!this._platform.isBrowser||1!==n.nodeType)return Object(d.a)(null);const r=function(e){if(function(){if(null==J){const e="undefined"!=typeof document?document.head:null;J=!(!e||!e.createShadowRoot&&!e.attachShadow)}return J}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(n)||this._getDocument(),a=this._elementInfo.get(n);if(a)return t&&(a.checkChildren=!0),a.subject;const s={checkChildren:t,subject:new i.a,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){const t=K(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}focusVia(e,t,n){const r=K(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([e,n])=>this._originChanged(e,t,n)):(this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const t=fe(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const n=this._elementInfo.get(t);n&&(n.checkChildren||t===fe(e))&&this._originChanged(t,this._getFocusOrigin(e),n)}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,n=this._rootNodeFocusListenerCount.get(t)||0;n||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,de),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,de)}),this._rootNodeFocusListenerCount.set(t,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,de),e.addEventListener("mousedown",this._documentMousedownListener,de),e.addEventListener("touchstart",this._documentTouchstartListener,de),t.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,de),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,de),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,de),e.removeEventListener("mousedown",this._documentMousedownListener,de),e.removeEventListener("touchstart",this._documentTouchstartListener,de),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){const t=[];return this._elementInfo.forEach((n,r)=>{(r===e||n.checkChildren&&r.contains(e))&&t.push([r,n])}),t}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.B),r.ac(Q),r.ac(a.d,8),r.ac(ce,8))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(r.B),Object(r.ac)(Q),Object(r.ac)(a.d,8),Object(r.ac)(ce,8))},token:e,providedIn:"root"}),e})();function fe(e){return e.composedPath?e.composedPath()[0]:e.target}class me{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class ge extends me{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class ye extends me{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class be extends me{constructor(e){super(),this.element=e instanceof r.l?e.nativeElement:e}}class xe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof ge?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ye?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof be?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ve extends xe{constructor(e,t,n,r,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=a}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),this._attachedPortal=e,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ae=(()=>{class e extends xe{constructor(e,t,n){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new r.o,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(n,t),this._getRootNode().appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r=t.createComponent(n,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.j),r.Qb(r.S),r.Qb(a.d))},e.\u0275dir=r.Lb({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.Bb]}),e})(),we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})();n("eNwd"),n("3N8a"),n("IjjT");var ke=n("zx2A");class Se{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Ie(e,this.durationSelector))}}class Ie extends ke.b{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=Object(ke.c)(n,new ke.a(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function _e(e,t=f.a){return n=()=>Object(m.a)(e,t),function(e){return e.lift(new Se(n))};var n}const Ee=new r.s("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.X)(a.d)}});let Te=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new r.o,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Ee,8))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(Ee,8))},token:e,providedIn:"root"}),e})(),Ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})(),Ne=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new i.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new o.a(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(_e(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(d.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Object(w.a)(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=K(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return Object(l.a)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.B),r.ac(Q),r.ac(a.d,8))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(r.B),Object(r.ac)(Q),Object(r.ac)(a.d,8))},token:e,providedIn:"root"}),e})(),Me=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new i.a,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(_e(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Q),r.ac(r.B),r.ac(a.d,8))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(Q),Object(r.ac)(r.B),Object(r.ac)(a.d,8))},token:e,providedIn:"root"}),e})(),Fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})(),Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[Ce,ee,Fe],Ce,Fe]}),e})();const De=ne();class Oe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=q(-this._previousScrollPosition.left),e.style.top=q(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",a=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),De&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),De&&(t.scrollBehavior=r,n.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class ze{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Pe{enable(){}disable(){}attach(){}}function $e(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function Le(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class Ve{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();$e(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Be=(()=>{class e{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new Pe,this.close=e=>new ze(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new Oe(this._viewportRuler,this._document),this.reposition=e=>new Ve(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=r}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Ne),r.ac(Me),r.ac(r.B),r.ac(a.d))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(Ne),Object(r.ac)(Me),Object(r.ac)(r.B),Object(r.ac)(a.d))},token:e,providedIn:"root"}),e})();class We{constructor(e){if(this.scrollStrategy=new Pe,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class je{constructor(e,t,n,r,a){this.offsetX=n,this.offsetY=r,this.panelClass=a,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class He{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Ue=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(r.ac(a.d))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(a.d))},token:e,providedIn:"root"}),e})(),Ge=(()=>{class e extends Ue{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(a.d))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(a.d))},token:e,providedIn:"root"}),e})(),qe=(()=>{class e extends Ue{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._clickListener=e=>{const t=e.composedPath?e.composedPath()[0]:e.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const a=n[r];if(!(a._outsidePointerEvents.observers.length<1)&&a.hasAttached()){if(a.overlayElement.contains(t))break;a._outsidePointerEvents.next(e)}}}}add(e){if(super.add(e),!this._isAttached){const e=this._document.body;e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return e.\u0275fac=function(t){return new(t||e)(r.ac(a.d),r.ac(Q))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(a.d),Object(r.ac)(Q))},token:e,providedIn:"root"}),e})();const Ke=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let Xe=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ke){const t=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const t=this._document.createElement("div");t.classList.add(e),Ke?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return e.\u0275fac=function(t){return new(t||e)(r.ac(a.d),r.ac(Q))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(a.d),Object(r.ac)(Q))},token:e,providedIn:"root"}),e})();class Ze{constructor(e,t,n,r,a,s,o,l,u){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=a,this._keyboardDispatcher=s,this._document=o,this._location=l,this._outsideClickDispatcher=u,this._backdropElement=null,this._backdropClick=new i.a,this._attachments=new i.a,this._detachments=new i.a,this._locationChanges=U.a.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new i.a,this._outsidePointerEvents=new i.a,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Object(L.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=q(this._config.width),e.height=q(this._config.height),e.minWidth=q(this._config.minWidth),e.minHeight=q(this._config.minHeight),e.maxWidth=q(this._config.maxWidth),e.maxHeight=q(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const r=e.classList;G(t).forEach(e=>{e&&(n?r.add(e):r.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Object(_.a)(Object(u.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const Ye="cdk-overlay-connected-position-bounding-box",Je=/([A-Za-z%]+)$/;class Qe{constructor(e,t,n,r,a){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new i.a,this._resizeSubscription=U.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Ye),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=[];let a;for(let s of this._preferredPositions){let i=this._getOriginPoint(e,s),o=this._getOverlayPoint(i,t,s),l=this._getOverlayFit(o,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,i);this._canFitWithFlexibleDimensions(l,o,n)?r.push({position:s,origin:i,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(i,s)}):(!a||a.overlayFit.visibleArea<l.visibleArea)&&(a={overlayFit:l,overlayPoint:o,originPoint:i,position:s,overlayRect:t})}if(r.length){let e=null,t=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>t&&(t=r,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&et(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ye),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,r;if("center"==t.originX)n=e.left+e.width/2;else{const r=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;n="start"==t.originX?r:a}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:r}}_getOverlayPoint(e,t,n){let r,a;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+a}}_getOverlayFit(e,t,n,r){const a=nt(t);let{x:s,y:i}=e,o=this._getOffset(r,"x"),l=this._getOffset(r,"y");o&&(s+=o),l&&(i+=l);let u=0-i,h=i+a.height-n.height,c=this._subtractOverflows(a.width,0-s,s+a.width-n.width),d=this._subtractOverflows(a.height,u,h),p=c*d;return{visibleArea:p,isCompletelyWithinViewport:a.width*a.height===p,fitsInViewportVertically:d===a.height,fitsInViewportHorizontally:c==a.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,a=n.right-t.x,s=tt(this._overlayRef.getConfig().minHeight),i=tt(this._overlayRef.getConfig().minWidth),o=e.fitsInViewportHorizontally||null!=i&&i<=a;return(e.fitsInViewportVertically||null!=s&&s<=r)&&o}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=nt(t),a=this._viewportRect,s=Math.max(e.x+r.width-a.width,0),i=Math.max(e.y+r.height-a.height,0),o=Math.max(a.top-n.top-e.y,0),l=Math.max(a.left-n.left-e.x,0);let u=0,h=0;return u=r.width<=a.width?l||-s:e.x<this._viewportMargin?a.left-n.left-e.x:0,h=r.height<=a.height?o||-i:e.y<this._viewportMargin?a.top-n.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new He(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let a,s,i,o,l,u;if("top"===t.overlayY)s=e.y,a=n.height-s+this._viewportMargin;else if("bottom"===t.overlayY)i=n.height-e.y+2*this._viewportMargin,a=n.height-i+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),r=this._lastBoundingBoxSize.height;a=2*t,s=e.y-t,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-r/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)u=n.width-e.x+this._viewportMargin,o=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)l=e.x,o=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),r=this._lastBoundingBoxSize.width;o=2*t,l=e.x-t,o>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-r/2)}return{top:s,left:l,bottom:i,right:u,width:o,height:a}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=q(n.height),r.top=q(n.top),r.bottom=q(n.bottom),r.width=q(n.width),r.left=q(n.left),r.right=q(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(r.maxHeight=q(e)),a&&(r.maxWidth=q(a))}this._lastBoundingBoxSize=n,et(this._boundingBox.style,r)}_resetBoundingBoxStyles(){et(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){et(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),a=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();et(n,this._getExactOverlayY(t,e,r)),et(n,this._getExactOverlayX(t,e,r))}else n.position="static";let i="",o=this._getOffset(t,"x"),l=this._getOffset(t,"y");o&&(i+=`translateX(${o}px) `),l&&(i+=`translateY(${l}px)`),n.transform=i.trim(),s.maxHeight&&(r?n.maxHeight=q(s.maxHeight):a&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=q(s.maxWidth):a&&(n.maxWidth="")),et(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=s,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":r.top=q(a.y),r}_getExactOverlayX(e,t,n){let r,a={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),r=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===r?a.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":a.left=q(s.x),a}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Le(e,n),isOriginOutsideView:$e(e,n),isOverlayClipped:Le(t,n),isOverlayOutsideView:$e(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&G(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof r.l)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function et(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function tt(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(Je);return n&&"px"!==n?null:parseFloat(t)}return e||null}function nt(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class rt{constructor(e,t,n,r,a,s,i){this._preferredPositions=[],this._positionStrategy=new Qe(n,r,a,s,i).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,r){const a=new je(e,t,n,r);return this._preferredPositions.push(a),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const at="cdk-global-overlay-wrapper";class st{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(at),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:a,maxWidth:s,maxHeight:i}=n,o=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==a&&"100vh"!==a||i&&"100%"!==i&&"100vh"!==i);e.position=this._cssPosition,e.marginLeft=o?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,o?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(at),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let it=(()=>{class e{constructor(e,t,n,r){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=r}global(){return new st}connectedTo(e,t,n){return new rt(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new Qe(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Me),r.ac(a.d),r.ac(Q),r.ac(Xe))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(Me),Object(r.ac)(a.d),Object(r.ac)(Q),Object(r.ac)(Xe))},token:e,providedIn:"root"}),e})(),ot=0,lt=(()=>{class e{constructor(e,t,n,r,a,s,i,o,l,u,h){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=a,this._injector=s,this._ngZone=i,this._document=o,this._directionality=l,this._location=u,this._outsideClickDispatcher=h}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),a=new We(e);return a.direction=a.direction||this._directionality.value,new Ze(r,t,n,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+ot++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(r.g)),new ve(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Be),r.ac(Xe),r.ac(r.j),r.ac(it),r.ac(Ge),r.ac(r.t),r.ac(r.B),r.ac(a.d),r.ac(Te),r.ac(a.k),r.ac(qe))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();const ut={provide:new r.s("cdk-connected-overlay-scroll-strategy"),deps:[lt],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let ht=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:[lt,ut],imports:[[Ce,we,Re],Re]}),e})();var ct=n("R0Ic");n("Wr5T");var dt=n("jhN1");const pt=["*"],ft=[[["nb-card-header"]],[["nb-card-body"]],"*",[["nb-card-footer"]]],mt=["nb-card-header","nb-card-body","*","nb-card-footer"],gt=["nbButton",""],yt="[_nghost-%COMP%]{display:flex;flex-direction:column}",bt=["layoutTopDynamicArea"],xt=["scrollableContainer"],vt=["layoutContainer"],At=[[["nb-layout-header",3,"subheader",""]],[["nb-sidebar"]],[["nb-layout-header","subheader",""]],[["nb-layout-column"]],[["nb-layout-footer"]]],wt=["nb-layout-header:not([subheader])","nb-sidebar","nb-layout-header[subheader]","nb-layout-column","nb-layout-footer"];function kt(e,t){if(1&e&&(r.Wb(0,"span"),r.yc(1),r.Vb()),2&e){const e=r.ec();r.Eb(1),r.Ac("",e.value,"%")}}function St(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",1),r.cc("click",function(){return r.qc(e),r.ec().onClose()}),r.Wb(1,"span",2),r.yc(2,"\xd7"),r.Vb(),r.Vb()}}function It(e,t){if(1&e&&(r.Wb(0,"span",2),r.yc(1),r.Vb()),2&e){const e=r.ec();r.Eb(1),r.zc(e.message)}}const _t=[[["nb-accordion-item"]]],Et=["nb-accordion-item"],Tt=[[["nb-accordion-item-header"]],[["nb-accordion-item-body"]]],Ct=["nb-accordion-item-header","nb-accordion-item-body"],Nt=function(e){return{value:e}};function Mt(e,t){if(1&e&&r.Rb(0,"nb-icon",1),2&e){const e=r.ec();r.kc("@expansionIndicator",e.state)}}const Ft=[[["nb-accordion-item-title"]],[["nb-accordion-item-description"]],"*"],Rt=["nb-accordion-item-title","nb-accordion-item-description","*"];function Dt(e,t){}const Ot=new r.s("Nebular Theme Options"),zt=new r.s("Nebular Media Breakpoints"),Pt=new r.s("Nebular Built-in JS Themes"),$t=new r.s("Nebular JS Themes"),Lt=new r.s("Window"),Vt=new r.s("Document"),Bt="#3366ff",Wt="#a16eff",jt="#73a1ff",Ht="#3366ff",Ut=[{name:"default",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#ffffff",bg2:"#f7f9fc",bg3:"#edf1f7",bg4:"#e4e9f2",border:"#ffffff",border2:"#f7f9fc",border3:"#edf1f7",border4:"#e4e9f2",border5:"#c5cee0",fg:"#8f9bb3",fgHeading:"#1a2138",fgText:"#1a2138",fgHighlight:Bt,layoutBg:"#f7f9fc",separator:"#edf1f7",primary:Bt,success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"cosmic",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#323259",bg2:"#252547",bg3:"#1b1b38",bg4:"#13132b",border:"#323259",border2:"#252547",border3:"#1b1b38",border4:"#13132b",border5:"#13132b",fg:"#b4b4db",fgHeading:"#ffffff",fgText:"#ffffff",fgHighlight:Wt,layoutBg:"#151a30",separator:"#151a30",primary:Wt,success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#b18aff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"corporate",base:"default",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#ffffff",bg2:"#f7f9fc",bg3:"#edf1f7",bg4:"#e4e9f2",border:"#ffffff",border2:"#f7f9fc",border3:"#edf1f7",border4:"#e4e9f2",border5:"#c5cee0",fg:"#8f9bb3",fgHeading:"#1a2138",fgText:"#1a2138",fgHighlight:jt,layoutBg:"#f7f9fc",separator:"#edf1f7",primary:jt,success:"#5dcfe3",info:"#ba7fec",warning:"#ffa36b",danger:"#ff6b83",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"dark",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#222b45",bg2:"#1a2138",bg3:"#151a30",bg4:"#101426",border:"#222b45",border2:"#1a2138",border3:"#151a30",border4:"#101426",border5:"#101426",fg:"#8f9bb3",fgHeading:"#ffffff",fgText:"#ffffff",fgHighlight:Ht,layoutBg:"#1b1b38",separator:"#1b1b38",primary:Ht,success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}}];let Gt=(()=>{class e{constructor(e,t=[]){this.themes={},this.combineByNames(t,e).forEach(e=>{this.register(e,e.name,e.base)})}register(e,t,n){const r=this.has(n)?this.get(n):{};this.themes[t]=this.mergeDeep({},r,e)}has(e){return!!this.themes[e]}get(e){if(!this.themes[e])throw Error(`NbThemeConfig: no theme '${e}' found registered.`);return JSON.parse(JSON.stringify(this.themes[e]))}combineByNames(e,t){if(e){const n=[];return e.forEach(e=>{const r=t.find(t=>t.name===e.name)||{},a=this.mergeDeep({},r,e);n.push(a)}),t.forEach(e=>{n.find(t=>t.name===e.name)||n.push(e)}),n}return t}isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}mergeDeep(e,...t){if(!t.length)return e;const n=t.shift();if(this.isObject(e)&&this.isObject(n))for(const r in n)this.isObject(n[r])?(e[r]||Object.assign(e,{[r]:{}}),this.mergeDeep(e[r],n[r])):Object.assign(e,{[r]:n[r]});return this.mergeDeep(e,...t)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Pt),r.ac($t))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();const qt=[{name:"xs",width:0},{name:"is",width:400},{name:"sm",width:576},{name:"md",width:768},{name:"lg",width:992},{name:"xl",width:1200},{name:"xxl",width:1400},{name:"xxxl",width:1600}];let Kt=(()=>{class e{constructor(e){this.breakpoints=e,this.breakpointsMap=this.breakpoints.reduce((e,t)=>(e[t.name]=t.width,e),{})}getByWidth(e){const t={name:"unknown",width:e},n=this.getBreakpoints();return n.find((t,r)=>{const a=n[r+1];return e>=t.width&&(!a||e<a.width)})||t}getByName(e){return this.getBreakpoints().find(t=>e===t.name)||{name:"unknown",width:NaN}}getBreakpoints(){return this.breakpoints}getBreakpointsMap(){return this.breakpointsMap}}return e.\u0275fac=function(t){return new(t||e)(r.ac(zt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Xt=(()=>{class e{constructor(e,t,n){this.options=e,this.breakpointService=t,this.jsThemesRegistry=n,this.themeChanges$=new s.a(1),this.appendLayoutClass$=new i.a,this.removeLayoutClass$=new i.a,this.changeWindowWidth$=new s.a(2),e&&e.name&&this.changeTheme(e.name)}changeTheme(e){this.themeChanges$.next({name:e,previous:this.currentTheme}),this.currentTheme=e}changeWindowWidth(e){this.changeWindowWidth$.next(e)}getJsTheme(){return this.onThemeChange().pipe(Object(g.a)(e=>this.jsThemesRegistry.get(e.name)))}onMediaQueryChange(){return this.changeWindowWidth$.pipe(Object(y.a)(void 0),x(),Object(g.a)(([e,t])=>[this.breakpointService.getByWidth(e),this.breakpointService.getByWidth(t)]),Object(w.a)(([e,t])=>e.name!==t.name),(null,e=e=>e[0].name+e[1].name,t=>t.lift(new k(null,e))),Object(I.a)());var e}onThemeChange(){return this.themeChanges$.pipe(Object(I.a)())}appendLayoutClass(e){this.appendLayoutClass$.next(e)}onAppendLayoutClass(){return this.appendLayoutClass$.pipe(Object(I.a)())}removeLayoutClass(e){this.removeLayoutClass$.next(e)}onRemoveLayoutClass(){return this.removeLayoutClass$.pipe(Object(I.a)())}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Ot),r.ac(Kt),r.ac(Gt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Zt=(()=>{class e{constructor(e){this.document=e,this.loaders=[],this.selector="nb-global-spinner"}registerLoader(e){this.loaders.push(e)}clear(){this.loaders=[]}load(){this.showSpinner(),this.executeAll()}executeAll(e=(()=>{})){Promise.all(this.loaders).then(t=>{this.hideSpinner(),e.call(null,t)}).catch(e=>{console.error(e)})}showSpinner(){const e=this.getSpinnerElement();e&&(e.style.display="block")}hideSpinner(){const e=this.getSpinnerElement();e&&(e.style.display="none")}getSpinnerElement(){return this.document.getElementById(this.selector)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();var Yt=function(e){return e.LTR="ltr",e.RTL="rtl",e}({});const Jt=new r.s("Layout direction");let Qt=(()=>{class e{constructor(e=Yt.LTR){this.direction=e,this.$directionChange=new s.a(1),this.setDirection(e)}isLtr(){return this.direction===Yt.LTR}isRtl(){return this.direction===Yt.RTL}getDirection(){return this.direction}setDirection(e){this.direction=e,this.$directionChange.next(e)}onDirectionChange(){return this.$directionChange.pipe(Object(I.a)())}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Jt,8))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),en=(()=>{class e{constructor(){this.scrollPositionReq$=new i.a,this.manualScroll$=new i.a,this.scroll$=new i.a,this.scrollable$=new i.a}getPosition(){return o.a.create(e=>{const t=new i.a;return t.subscribe(e),this.scrollPositionReq$.next({listener:t}),()=>t.complete()})}scrollTo(e=null,t=null){this.manualScroll$.next({x:e,y:t})}onScroll(){return this.scroll$.pipe(Object(I.a)())}onManualScroll(){return this.manualScroll$.pipe(Object(I.a)())}onGetPosition(){return this.scrollPositionReq$}onScrollableChange(){return this.scrollable$.pipe(Object(I.a)())}fireScrollChange(e){this.scroll$.next(e)}scrollable(e){this.scrollable$.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),tn=(()=>{class e{constructor(){this.contentDimensionsReq$=new i.a}getDimensions(){return o.a.create(e=>{const t=new i.a;return t.subscribe(e),this.contentDimensionsReq$.next({listener:t}),()=>t.complete()})}onGetDimensions(){return this.contentDimensionsReq$}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),nn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[a.c,j,H.g]}),e})();class rn extends ue{constructor(e,t,n,r,a){super(e,t,n,r,a),this.element=e,this.checker=t,this.ngZone=n,this.document=r,this.savePreviouslyFocusedElement()}restoreFocus(){this.previouslyFocusedElement.focus(),this.destroy()}blurPreviouslyFocusedElement(){this.previouslyFocusedElement.blur()}savePreviouslyFocusedElement(){this.previouslyFocusedElement=this.document.activeElement}}let an=(()=>{class e extends he{constructor(e,t,n){super(e,t,n),this.checker=e,this.ngZone=t,this.document=n}create(e,t){return new rn(e,this.checker,this.ngZone,this.document,t)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(ie),r.ac(r.B),r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class sn extends se{}class on{create(e){return new sn(e)}}class ln extends ae{}class un{create(e){return new ln(e)}}let hn=(()=>{class e extends pe{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),cn=(()=>{class e{static forRoot(){return{ngModule:e,providers:[an,on,un,{provide:hn,useClass:pe}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})(),dn=(()=>{class e extends Ae{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275dir=r.Lb({type:e,selectors:[["","nbPortalOutlet",""]],features:[r.Bb]}),e})();class pn extends ge{}let fn=(()=>{class e extends lt{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),mn=(()=>{class e extends it{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class gn extends ye{constructor(e,t,n){super(e,t,n)}}let yn=(()=>{class e extends Xe{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class bn extends Qe{}class xn extends class{constructor(e,t){this._parentInjector=e,this._customTokens=t}get(e,t){const n=this._customTokens.get(e);return void 0!==n?n:this._parentInjector.get(e,t)}}{}const vn=[ht,we];let An=(()=>{class e{static forRoot(){return{ngModule:e,providers:[fn,mn]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[...vn],ht,we]}),e})(),wn=(()=>{class e extends Q{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=Object(r.Mb)({factory:function(){return new Q(Object(r.ac)(r.D))},token:e,providedIn:"root"}),e})(),kn=(()=>{class e extends yn{setContainer(e){this.container=e}clearContainer(){this.container=null,this._containerElement=null}_createContainer(){const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this.container.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.Yb(e)))(n||e)}}(),e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Sn=(()=>{class e extends Me{constructor(e,t,n,r,a){super(e,t,a),this.ruler=n,this.scroll=r}getViewportSize(){let e;return this.ruler.getDimensions().pipe(Object(g.a)(e=>({width:e.clientWidth,height:e.clientHeight}))).subscribe(t=>e=t),e}getViewportScrollPosition(){let e;return this.scroll.getPosition().pipe(Object(g.a)(e=>({top:e.y,left:e.x}))).subscribe(t=>e=t),e}}return e.\u0275fac=function(t){return new(t||e)(r.ac(wn),r.ac(r.B),r.ac(tn),r.ac(en),r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();var In=function(e){return e.TOP_START="top-start",e.TOP_END="top-end",e.BOTTOM_START="bottom-start",e.BOTTOM_END="bottom-end",e}({}),_n=function(e){return e.TOP_RIGHT="top-right",e.TOP_LEFT="top-left",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e}({});let En=(()=>{class e{constructor(e){this.layoutDirection=e}toLogicalPosition(e){return Object.values(In).includes(e)?e:this.layoutDirection.isLtr()?this.toLogicalPositionWhenLtr(e):this.toLogicalPositionWhenRtl(e)}toPhysicalPosition(e){return Object.values(_n).includes(e)?e:this.layoutDirection.isLtr()?this.toPhysicalPositionWhenLtr(e):this.toPhysicalPositionWhenRtl(e)}isTopPosition(e){const t=this.toLogicalPosition(e);return t===In.TOP_END||t===In.TOP_START}isRightPosition(e){const t=this.toPhysicalPosition(e);return t===_n.TOP_RIGHT||t===_n.BOTTOM_RIGHT}toLogicalPositionWhenLtr(e){switch(e){case _n.TOP_RIGHT:return In.TOP_END;case _n.TOP_LEFT:return In.TOP_START;case _n.BOTTOM_RIGHT:return In.BOTTOM_END;case _n.BOTTOM_LEFT:return In.BOTTOM_START}}toLogicalPositionWhenRtl(e){switch(e){case _n.TOP_RIGHT:return In.TOP_START;case _n.TOP_LEFT:return In.TOP_END;case _n.BOTTOM_RIGHT:return In.BOTTOM_START;case _n.BOTTOM_LEFT:return In.BOTTOM_END}}toPhysicalPositionWhenLtr(e){switch(e){case In.TOP_START:return _n.TOP_LEFT;case In.TOP_END:return _n.TOP_RIGHT;case In.BOTTOM_START:return _n.BOTTOM_LEFT;case In.BOTTOM_END:return _n.BOTTOM_RIGHT}}toPhysicalPositionWhenRtl(e){switch(e){case In.TOP_START:return _n.TOP_RIGHT;case In.TOP_END:return _n.TOP_LEFT;case In.BOTTOM_START:return _n.BOTTOM_RIGHT;case In.BOTTOM_END:return _n.BOTTOM_LEFT}}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Qt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();var Tn=function(e){return e.NOOP="noop",e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counterclockwise",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),Cn=function(e){return e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e.START="start",e.END="end",e.TOP_END="top-end",e.TOP_START="top-start",e.BOTTOM_END="bottom-end",e.BOTTOM_START="bottom-start",e.END_TOP="end-top",e.END_BOTTOM="end-bottom",e.START_TOP="start-top",e.START_BOTTOM="start-bottom",e}({});const Nn={[Cn.RIGHT]:e=>({originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:e}),[Cn.BOTTOM]:e=>({originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:e}),[Cn.LEFT]:e=>({originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-e}),[Cn.TOP]:e=>({originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-e}),[Cn.START](e){return this[Cn.LEFT](e)},[Cn.END](e){return this[Cn.RIGHT](e)},[Cn.END_TOP]:e=>({originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom",offsetX:e}),[Cn.END_BOTTOM]:e=>({originX:"end",originY:"top",overlayX:"start",overlayY:"top",offsetX:e}),[Cn.BOTTOM_START]:e=>({originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:e}),[Cn.BOTTOM_END]:e=>({originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:e}),[Cn.START_TOP]:e=>({originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom",offsetX:-e}),[Cn.START_BOTTOM]:e=>({originX:"start",originY:"top",overlayX:"end",overlayY:"top",offsetX:-e}),[Cn.TOP_START]:e=>({originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-e}),[Cn.TOP_END]:e=>({originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-e})},Mn=[Cn.TOP,Cn.TOP_END,Cn.TOP_START,Cn.START,Cn.START_TOP,Cn.START_BOTTOM,Cn.BOTTOM,Cn.BOTTOM_START,Cn.BOTTOM_END,Cn.END,Cn.END_BOTTOM,Cn.END_TOP],Fn=[Cn.TOP,Cn.TOP_START,Cn.TOP_END,Cn.END,Cn.END_TOP,Cn.END_BOTTOM,Cn.BOTTOM,Cn.BOTTOM_END,Cn.BOTTOM_START,Cn.START,Cn.START_BOTTOM,Cn.START_TOP],Rn=[Cn.BOTTOM,Cn.TOP],Dn=[Cn.START,Cn.END];class On extends bn{constructor(){super(...arguments),this._offset=15,this.positionChange=this.positionChanges.pipe(Object(g.a)(e=>e.connectionPair),Object(g.a)(e=>this.appliedPositions.find(({connectedPosition:t})=>{return(n=t).originX===(r=e).originX&&n.originY===r.originY&&n.overlayX===r.overlayX&&n.overlayY===r.overlayY;var n,r}).key))}attach(e){this.applyPositions(),super.attach(e)}apply(){this.applyPositions(),super.apply()}position(e){return this._position=e,this}adjustment(e){return this._adjustment=e,this}offset(e){return this._offset=e,this}applyPositions(){const e=this.createPositions();this.persistChosenPositions(e),this.withPositions(this.appliedPositions.map(({connectedPosition:e})=>e))}createPositions(){switch(this._adjustment){case Tn.NOOP:return[this._position];case Tn.CLOCKWISE:return this.reorderPreferredPositions(Fn);case Tn.COUNTERCLOCKWISE:return this.reorderPreferredPositions(Mn);case Tn.HORIZONTAL:return this.reorderPreferredPositions(Dn);case Tn.VERTICAL:return this.reorderPreferredPositions(Rn)}}persistChosenPositions(e){this.appliedPositions=e.map(e=>({key:e,connectedPosition:Nn[e](this._offset)}))}reorderPreferredPositions(e){const t=e.indexOf(this.mapToLogicalPosition(this._position)),n=e.slice(t),r=e.slice(0,t);return n.concat(r)}mapToLogicalPosition(e){return e===Cn.LEFT?Cn.START:e===Cn.RIGHT?Cn.END:e}}class zn extends st{position(e){switch(e){case In.TOP_START:return this.top().left();case In.TOP_END:return this.top().right();case In.BOTTOM_START:return this.bottom().left();case In.BOTTOM_END:return this.bottom().right()}}}let Pn=(()=>{class e{constructor(e,t,n,r,a){this.document=e,this.viewportRuler=t,this.platform=n,this.positionBuilder=r,this.overlayContainer=a}global(){return new zn}connectedTo(e){return new On(e,this.viewportRuler,this.document,this.platform,this.overlayContainer).withFlexibleDimensions(!1).withPush(!1)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Vt),r.ac(Sn),r.ac(wn),r.ac(mn),r.ac(kn))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),$n=(()=>{class e{constructor(e,t){this.overlay=e,this.layoutDirection=t}get scrollStrategies(){return this.overlay.scrollStrategies}create(e){const t=this.overlay.create(e);return this.layoutDirection.onDirectionChange().subscribe(e=>t.setDirection(e)),t}}return e.\u0275fac=function(t){return new(t||e)(r.ac(fn),r.ac(Qt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Ln=(()=>{class e extends Ne{constructor(e,t,n,r){super(e,t,r),this.scrollService=n}scrolled(e){return this.scrollService.onScroll()}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.B),r.ac(wn),r.ac(en),r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Vn=(()=>{class e extends Oe{constructor(e,t,n){super(t,e),this.scrollService=n}enable(){super.enable(),this.scrollService.scrollable(!1)}disable(){super.disable(),this.scrollService.scrollable(!0)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Vt),r.ac(Sn),r.ac(en))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Bn=(()=>{class e extends Be{constructor(e,t,n,r,a){super(t,n,r,a),this.scrollService=e,this.scrollDispatcher=t,this.viewportRuler=n,this.ngZone=r,this.document=a,this.block=()=>new Vn(this.document,this.viewportRuler,this.scrollService)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(en),r.ac(Ne),r.ac(Sn),r.ac(r.B),r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Wn=(()=>{class e{static forRoot(){return{ngModule:e,providers:[Sn,kn,Vn,Ln,Bn,{provide:Xe,useExisting:kn},{provide:yn,useExisting:kn},{provide:Ne,useExisting:Ln},{provide:Be,useExisting:Bn}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})();var jn=function(e){return e.NOOP="noop",e.CLICK="click",e.HOVER="hover",e.HINT="hint",e.FOCUS="focus",e}({});class Hn{constructor(e,t,n){this.document=e,this.host=t,this.container=n,this.destroyed$=new i.a}destroy(){this.destroyed$.next()}isNotOnHostOrContainer(e){return!this.isOnHost(e)&&!this.isOnContainer(e)}isOnHostOrContainer(e){return this.isOnHost(e)||this.isOnContainer(e)}isOnHost({target:e}){return this.host.contains(e)}isOnContainer({target:e}){return this.container()&&this.container().location.nativeElement.contains(e)}}class Un extends Hn{constructor(){super(...arguments),this.click$=Object(l.a)(this.document,"click").pipe(Object(g.a)(e=>[!this.container()&&this.isOnHost(e),e]),Object(I.a)(),Object(_.a)(this.destroyed$)),this.show$=this.click$.pipe(Object(w.a)(([e])=>e),Object(g.a)(([,e])=>e),Object(_.a)(this.destroyed$)),this.hide$=this.click$.pipe(Object(w.a)(([e,t])=>!e&&!this.isOnContainer(t)),Object(g.a)(([,e])=>e),Object(_.a)(this.destroyed$))}}class Gn extends Hn{constructor(){super(...arguments),this.show$=Object(l.a)(this.host,"mouseenter").pipe(Object(w.a)(()=>!this.container()),Object(E.a)(100),Object(_.a)(Object(l.a)(this.host,"mouseleave")),T(),Object(_.a)(this.destroyed$)),this.hide$=Object(l.a)(this.host,"mouseleave").pipe(Object(M.a)(()=>Object(l.a)(this.document,"mousemove").pipe(F(100),z(()=>!!this.container()),Object(w.a)(e=>this.isNotOnHostOrContainer(e)))),Object(_.a)(this.destroyed$))}}class qn extends Hn{constructor(){super(...arguments),this.show$=Object(l.a)(this.host,"mouseenter").pipe(Object(E.a)(100),Object(_.a)(Object(l.a)(this.host,"mouseleave")),T(),Object(_.a)(this.destroyed$)),this.hide$=Object(l.a)(this.host,"mouseleave").pipe(Object(_.a)(this.destroyed$))}}class Kn extends Hn{constructor(){super(...arguments),this.focusOut$=Object(l.a)(this.host,"focusout").pipe(Object(M.a)(()=>Object(l.a)(this.document,"focusin").pipe(z(()=>!!this.container()),Object(w.a)(e=>this.isNotOnHostOrContainer(e)))),Object(_.a)(this.destroyed$)),this.clickIn$=Object(l.a)(this.host,"click").pipe(Object(w.a)(()=>!this.container()),Object(_.a)(this.destroyed$)),this.clickOut$=Object(l.a)(this.document,"click").pipe(Object(w.a)(()=>!!this.container()),Object(w.a)(e=>this.isNotOnHostOrContainer(e)),Object(_.a)(this.destroyed$)),this.tabKeyPress$=Object(l.a)(this.document,"keydown").pipe(Object(w.a)(e=>9===e.keyCode),Object(w.a)(()=>!!this.container()),Object(_.a)(this.destroyed$)),this.show$=Object(u.a)(Object(l.a)(this.host,"focusin"),this.clickIn$).pipe(Object(w.a)(()=>!this.container()),F(100),Object(_.a)(Object(l.a)(this.host,"focusout")),T(),Object(_.a)(this.destroyed$)),this.hide$=Object(u.a)(this.focusOut$,this.tabKeyPress$,this.clickOut$).pipe(Object(_.a)(this.destroyed$))}}class Xn extends Hn{constructor(){super(...arguments),this.show$=h.a,this.hide$=h.a}}let Zn=(()=>{class e{constructor(e){this._document=e}trigger(e){return this._trigger=e,this}host(e){return this._host=e,this}container(e){return this._container=e,this}build(){switch(this._trigger){case jn.CLICK:return new Un(this._document,this._host,this._container);case jn.HINT:return new qn(this._document,this._host,this._container);case jn.HOVER:return new Gn(this._document,this._host,this._container);case jn.FOCUS:return new Kn(this._document,this._host,this._container);case jn.NOOP:return new Xn(this._document,this._host,this._container);default:throw new Error("Trigger have to be provided")}}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Vt))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Yn=(()=>{class e{static forRoot(){return{ngModule:e,providers:[Pn,Zn,$n,En,...An.forRoot().providers,...Wn.forRoot().providers,...cn.forRoot().providers]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[An,nn],An,Wn]}),e})(),Jn=(()=>{class e{constructor(){this.coreStatuses=["basic","primary","info","warning","danger","control"]}isCoreStatus(e){return this.coreStatuses.includes(e)}isCustomStatus(e){return!!this.isValidStatusString(e)&&!this.isCoreStatus(e)}getStatusClass(e){if(this.isValidStatusString(e))return"status-"+e}isValidStatusString(e){return"string"==typeof e&&e.length>0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();function Qn(e){if(Object(a.D)(e))return window}let er=(()=>{class e{static forRoot(t={name:"default"},n,s,i){return{ngModule:e,providers:[{provide:Ot,useValue:t||{}},{provide:Pt,useValue:Ut},{provide:$t,useValue:n||[]},{provide:zt,useValue:s||qt},{provide:Vt,useExisting:a.d},{provide:Lt,useFactory:Qn,deps:[r.D]},Gt,Xt,Kt,Zt,{provide:Jt,useValue:i||Yt.LTR},Qt,en,tn,...Yn.forRoot().providers,Jn]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[a.c]]}),e})();var tr=function(e){return e.SVG="svg",e.FONT="font",e}({});class nr{constructor(e,t,n={}){this.name=e,this.content=t,this.params=n}getClasses(e){const t=[];return this.params.packClass&&t.push(this.params.packClass),t.push(this.params.iconClassPrefix?`${this.params.iconClassPrefix}-${this.name}`:this.name),t}getContent(e){return this.content}}class rr{constructor(e,t,n={}){this.name=e,this.content=t,this.params=n}getClasses(e){const t=[];return this.params.packClass&&t.push(this.params.packClass),t}getContent(e){return this.content}}function ar(e){throw Error(`Icon Pack '${e}' is not registered`)}function sr(e,t,n){throw Error(`Pack '${e}' is not an '${n}' Pack and its type is '${t}'`)}let ir=(()=>{class e{constructor(){this.packs=new Map}registerSvgPack(e,t,n={}){this.packs.set(e,{name:e,icons:new Map(Object.entries(t)),params:n,type:tr.SVG})}registerFontPack(e,t={}){this.packs.set(e,{name:e,params:t,icons:new Map,type:tr.FONT})}getPack(e){return this.packs.get(e)}setDefaultPack(e){this.packs.has(e)||ar(e),this.defaultPack=this.packs.get(e)}getSvgIcon(e,t){const n=t?this.getPackOrThrow(t):this.getDefaultPackOrThrow();n.type!==tr.SVG&&sr(n.name,n.type,"SVG");const r=this.getIconFromPack(e,n);return r?{name:e,pack:n.name,type:tr.SVG,icon:this.createSvgIcon(e,r,n.params)}:null}getFontIcon(e,t){const n=t?this.getPackOrThrow(t):this.getDefaultPackOrThrow();n.type!==tr.FONT&&sr(n.name,n.type,"Font");const r=this.getIconFromPack(e,n);return{name:e,pack:n.name,type:tr.FONT,icon:this.createFontIcon(e,r||"",n.params)}}getIcon(e,t){return(t?this.getPackOrThrow(t):this.getDefaultPackOrThrow()).type===tr.SVG?this.getSvgIcon(e,t):this.getFontIcon(e,t)}createSvgIcon(e,t,n){return t instanceof rr?t:new rr(e,t,n)}createFontIcon(e,t,n){return t instanceof nr?t:new nr(e,t,n)}getPackOrThrow(e){const t=this.packs.get(e);return t||ar(e),t}getDefaultPackOrThrow(){return this.defaultPack||function(){throw Error("Default pack is not registered.")}(),this.defaultPack}getIconFromPack(e,t){return t.icons.has(e)?t.icons.get(e):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),or=(()=>{class e{constructor(e,t,n,r,a){this.sanitizer=e,this.iconLibrary=t,this.el=n,this.renderer=r,this.statusService=a,this.prevClasses=[],this.html=""}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}get config(){return this._config}set config(e){e&&(this._config=e,"string"==typeof e?this.icon=e:(this.icon=e.icon,this.pack=e.pack,this.status=e.status,this.options=e.options))}ngOnInit(){this.iconDef=this.renderIcon(this.icon,this.pack,this.options)}ngOnChanges(){this.iconLibrary.getIcon(this.icon,this.pack)?this.renderIcon(this.icon,this.pack,this.options):this.clearIcon()}renderIcon(e,t,n){const r=this.iconLibrary.getIcon(e,t);if(!r)return;const a=r.icon.getContent(n);return a&&(this.html=this.sanitizer.bypassSecurityTrustHtml(a)),this.assignClasses(r.icon.getClasses(n)),r}clearIcon(){this.html="",this.assignClasses([])}assignClasses(e){this.prevClasses.forEach(e=>{this.renderer.removeClass(this.el.nativeElement,e)}),e.forEach(e=>{this.renderer.addClass(this.el.nativeElement,e)}),this.prevClasses=e}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(dt.b),r.Qb(ir),r.Qb(r.l),r.Qb(r.G),r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-icon"]],hostVars:17,hostBindings:function(e,t){2&e&&(r.Zb("innerHtml",t.html,r.rc),r.Gb(t.additionalClasses),r.Ib("status-primary",t.primary)("status-info",t.info)("status-success",t.success)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control))},inputs:{config:"config",icon:"icon",pack:"pack",status:"status",options:"options"},features:[r.Cb],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0}),e})(),lr=(()=>{class e{constructor(e){this.iconsLibrary=e,this.essentialsPackName="nebular-essentials",this.iconsLibrary.getPack(this.essentialsPackName)||this.iconsLibrary.registerSvgPack(this.essentialsPackName,{"chevron-down-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-down"><rect width="24" height="24" opacity="0"/><path d="M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z"/></g></g></svg>',"chevron-up-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z"/></g></g></svg>',"chevron-left-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z"/></g></g></svg>',"chevron-right-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z"/></g></g></svg>',"checkmark-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',"paper-plane-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="paper-plane"><rect width="24" height="24" opacity="0"/><path d="M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z"/></g></g></svg>',"file-text-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="file-text"><rect width="24" height="24" opacity="0"/><path d="M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/><path d="M9 14h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2z"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/></g></g></svg>',"alert-triangle-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="alert-triangle"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zm-1.7 2.05a1.31 1.31 0 0 1-1.19.65H4.33a1.31 1.31 0 0 1-1.19-.65 1 1 0 0 1 0-1l7.68-12.73a1.48 1.48 0 0 1 2.36 0l7.67 12.72a1 1 0 0 1 .01 1.01z"/><circle cx="12" cy="16" r="1"/><path d="M12 8a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g></svg>',"question-mark-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="question-mark"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z"/><circle cx="12" cy="19" r="1"/></g></g></svg>',"email-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="email"><rect width="24" height="24" opacity="0"/><path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 0 1-1-1V7.25l7.4 5.55a1 1 0 0 0 .6.2 1 1 0 0 0 .6-.2L20 7.25V17a1 1 0 0 1-1 1z"/></g></g></svg>',"flash-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="flash"><rect width="24" height="24" opacity="0"/><path d="M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44zM6.87 12.8H12a1 1 0 0 1 .74.33 1 1 0 0 1 .25.78l-.45 4.15 4.59-6.86H12a1 1 0 0 1-1-1.11l.45-4.15z"/></g></g></svg>',"search-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="search"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/></g></g></svg>',"close-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>',"collapse-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="collapse"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z"/><path d="M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z"/></g></g></svg>',"expand-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="expand"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/><path d="M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z"/></g></g></svg>',"minus-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="minus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z"/></g></g></svg>',"minus-bold-outline":'<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 2" width="100%" height="100%"><defs><rect id="nb-mbo" y="3" width="8" height="2" rx="1"/></defs><use xlink:href="#nb-mbo" transform="translate(0 -3)" fill-rule="evenodd"/></svg>',"checkmark-bold-outline":'<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 7" width="100%" height="100%"><defs><path id="nb-cbo" d="M6.039 1.43a1.11 1.11 0 0 1 1.517-.228c.483.342.588.998.234 1.466L4.431 7.1a1 1 0 0 1-1.492.115L.317 4.677a1.023 1.023 0 0 1 .002-1.483 1.113 1.113 0 0 1 1.535.002l1.641 1.59L6.04 1.428z"/></defs><use xlink:href="#nb-cbo" transform="translate(0 -1)" fill-rule="evenodd"/></svg>',"arrow-back":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="arrow-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"/></g></g></svg>'})}}return e.\u0275fac=function(t){return new(t||e)(r.ac(ir))},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[a.c]]}),e})(),ur=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-card-header"]],ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2}),e})(),hr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-card-body"]],ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2}),e})(),cr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-card-footer"]],ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2}),e})(),dr=(()=>{class e{constructor(e){this.statusService=e,this._size="",this.status="",this.accent=""}get size(){return this._size}set size(e){this._size=e}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get hasAccent(){return this.accent}get primaryAccent(){return"primary"===this.accent}get infoAccent(){return"info"===this.accent}get successAccent(){return"success"===this.accent}get warningAccent(){return"warning"===this.accent}get dangerAccent(){return"danger"===this.accent}get basicAccent(){return"basic"===this.accent}get controlAccent(){return"control"===this.accent}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-card"]],hostVars:42,hostBindings:function(e,t){2&e&&(r.Gb(t.additionalClasses),r.Ib("size-tiny",t.tiny)("size-small",t.small)("size-medium",t.medium)("size-large",t.large)("size-giant",t.giant)("status-primary",t.primary)("status-info",t.info)("status-success",t.success)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control)("accent",t.hasAccent)("accent-primary",t.primaryAccent)("accent-info",t.infoAccent)("accent-success",t.successAccent)("accent-warning",t.warningAccent)("accent-danger",t.dangerAccent)("accent-basic",t.basicAccent)("accent-control",t.controlAccent))},inputs:{status:"status",accent:"accent",size:"size"},ngContentSelectors:mt,decls:4,vars:0,template:function(e,t){1&e&&(r.jc(ft),r.ic(0),r.ic(1,1),r.ic(2,2),r.ic(3,3))},styles:[yt]}),e})(),pr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn,lr]]}),e})();function fr(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||""===e:!!e}let mr=(()=>{class e{constructor(e,t,n,r,a){this.renderer=e,this.hostElement=t,this.cd=n,this.zone=r,this.statusService=a,this.size="medium",this.status="basic",this.shape="rectangle",this.appearance="filled",this._fullWidth=!1,this._disabled=!1}get filled(){return"filled"===this.appearance}set filled(e){fr(e)&&(this.appearance="filled")}get outline(){return"outline"===this.appearance}set outline(e){fr(e)&&(this.appearance="outline")}get ghost(){return"ghost"===this.appearance}set ghost(e){fr(e)&&(this.appearance="ghost")}get fullWidth(){return this._fullWidth}set fullWidth(e){this._fullWidth=fr(e)}get disabled(){return this._disabled}set disabled(e){this.disabled!==fr(e)&&(this._disabled=!this.disabled,this.renderer.setProperty(this.hostElement.nativeElement,"disabled",this.disabled))}get tabbable(){return this.disabled?"-1":null==this.tabIndex?"0":this.tabIndex.toString()}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get rectangle(){return"rectangle"===this.shape}get round(){return"round"===this.shape}get semiRound(){return"semi-round"===this.shape}get iconLeft(){const e=this.iconElement;return!(!e||(t=this.hostElement.nativeElement,Array.from(t.childNodes).filter(e=>e.nodeType!==Node.COMMENT_NODE)[0]!==e));var t}get iconRight(){const e=this.iconElement;return!(!e||function(e){const t=Array.from(e.childNodes).filter(e=>e.nodeType!==Node.COMMENT_NODE);return t[t.length-1]}(this.hostElement.nativeElement)!==e)}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}ngAfterViewInit(){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.renderer.addClass(this.hostElement.nativeElement,"nb-transition")}))}updateProperties(e){let t=!1;for(const n in e)e.hasOwnProperty(n)&&this[n]!==e[n]&&(this[n]=e[n],t=!0);t&&this.cd.markForCheck()}get iconElement(){return this.hostElement.nativeElement.querySelector("nb-icon")}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.G),r.Qb(r.l),r.Qb(r.h),r.Qb(r.B),r.Qb(Jn))},e.\u0275dir=r.Lb({type:e,hostVars:34,hostBindings:function(e,t){2&e&&(r.Fb("aria-disabled",t.disabled)("tabindex",t.tabbable),r.Gb(t.additionalClasses),r.Ib("appearance-filled",t.filled)("appearance-outline",t.outline)("appearance-ghost",t.ghost)("full-width",t.fullWidth)("btn-disabled",t.disabled)("size-tiny",t.tiny)("size-small",t.small)("size-medium",t.medium)("size-large",t.large)("size-giant",t.giant)("shape-rectangle",t.rectangle)("shape-round",t.round)("shape-semi-round",t.semiRound)("icon-start",t.iconLeft)("icon-end",t.iconRight))},inputs:{size:"size",status:"status",shape:"shape",appearance:"appearance",filled:"filled",outline:"outline",ghost:"ghost",fullWidth:"fullWidth",disabled:"disabled",tabIndex:"tabIndex"}}),e})(),gr=(()=>{class e extends mr{constructor(e,t,n,r,a){super(e,t,n,r,a),this.renderer=e,this.hostElement=t,this.cd=n,this.zone=r,this.statusService=a}get hero(){return"hero"===this.appearance}set hero(e){fr(e)&&(this.appearance="hero")}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}onClick(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.G),r.Qb(r.l),r.Qb(r.h),r.Qb(r.B),r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["button","nbButton",""],["a","nbButton",""],["input","type","button","nbButton",""],["input","type","submit","nbButton",""]],hostVars:16,hostBindings:function(e,t){1&e&&r.cc("click",function(e){return t.onClick(e)}),2&e&&r.Ib("appearance-hero",t.hero)("status-primary",t.primary)("status-info",t.info)("status-success",t.success)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control)},inputs:{hero:"hero"},features:[r.Db([{provide:mr,useExisting:e}]),r.Bb],attrs:gt,ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2,changeDetection:0}),e})(),yr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn]]}),e})();function br(e){return e.match(/.*?(?=[?;#]|$)/)[0]}new r.s("NB_TIME_PICKER_CONFIG"),new r.s("Datepicker Adapter"),new r.s("Date service options");let xr=(()=>{class e{constructor(e){this.router=e}shouldRestore(){return this.router.events.pipe(Object(y.a)(null),Object(w.a)(e=>null===e||e instanceof H.b),x(),Object(g.a)(([e,t])=>this.pageChanged(e,t)),Object(w.a)(e=>!!e))}pageChanged(e,t){return!e||br(e.url)!==br(t.url)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(H.c))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),vr=(()=>{class e{constructor(e,t,n,r,s,o,l,u,h,d,p,f){this.themeService=e,this.spinnerService=t,this.elementRef=n,this.renderer=r,this.window=s,this.document=o,this.platformId=l,this.layoutDirectionService=u,this.scrollService=h,this.rulerService=d,this.scrollTop=p,this.overlayContainer=f,this.scrollBlockClass="nb-global-scrollblock",this.isScrollBlocked=!1,this.centerValue=!1,this.restoreScrollTopValue=!0,this.windowModeValue=!1,this.withScrollValue=!1,this.withSubheader=!1,this.afterViewInit$=new c.a(null),this.destroy$=new i.a,this.registerAsOverlayContainer(),this.themeService.onThemeChange().pipe(Object(_.a)(this.destroy$)).subscribe(e=>{const t=this.document.getElementsByTagName("body")[0];e.previous&&this.renderer.removeClass(t,"nb-theme-"+e.previous),this.renderer.addClass(t,"nb-theme-"+e.name)}),this.themeService.onAppendLayoutClass().pipe(Object(_.a)(this.destroy$)).subscribe(e=>{this.renderer.addClass(this.elementRef.nativeElement,e)}),this.themeService.onRemoveLayoutClass().pipe(Object(_.a)(this.destroy$)).subscribe(e=>{this.renderer.removeClass(this.elementRef.nativeElement,e)}),this.spinnerService.registerLoader(new Promise((e,t)=>{this.afterViewInit$.pipe(Object(_.a)(this.destroy$)).subscribe(t=>e())})),this.spinnerService.load(),this.rulerService.onGetDimensions().pipe(Object(_.a)(this.destroy$)).subscribe(({listener:e})=>{e.next(this.getDimensions()),e.complete()}),this.scrollService.onScrollableChange().pipe(Object(w.a)(()=>this.withScrollValue)).subscribe(e=>{e?this.enableScroll():this.blockScroll()}),Object(a.D)(this.platformId)&&this.themeService.changeWindowWidth(this.window.innerWidth)}set center(e){this.centerValue=fr(e)}set windowMode(e){this.windowModeValue=fr(e),this.withScroll=this.windowModeValue}set withScroll(e){this.withScrollValue=fr(e);const t=this.document.getElementsByTagName("body")[0];this.renderer.setStyle(t,"overflow",this.withScrollValue?"hidden":"initial")}set restoreScrollTop(e){this.restoreScrollTopValue=fr(e)}ngAfterViewInit(){this.scrollService.onGetPosition().pipe(Object(_.a)(this.destroy$)).subscribe(({listener:e})=>{e.next(this.getScrollPosition()),e.complete()}),this.scrollTop.shouldRestore().pipe(Object(w.a)(()=>this.restoreScrollTopValue),Object(_.a)(this.destroy$)).subscribe(()=>this.scroll(0,0)),this.layoutDirectionService.onDirectionChange().pipe(Object(_.a)(this.destroy$)).subscribe(e=>this.document.dir=e),this.scrollService.onManualScroll().pipe(Object(_.a)(this.destroy$)).subscribe(({x:e,y:t})=>this.scroll(e,t)),this.afterViewInit$.next(!0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.unregisterAsOverlayContainer()}onScroll(e){this.scrollService.fireScrollChange(e)}onResize(e){this.themeService.changeWindowWidth(e.target.innerWidth)}getDimensions(){let e,t,n,r=0;if(this.withScrollValue){const a=this.scrollableContainerRef.nativeElement;e=a.clientWidth,t=a.clientHeight,n=a.scrollWidth,r=a.scrollHeight}else{const{documentElement:a,body:s}=this.document;e=a.clientWidth||s.clientWidth,t=a.clientHeight||s.clientHeight,n=a.scrollWidth||s.scrollWidth,r=a.scrollHeight||s.scrollHeight}return{clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:r}}getScrollPosition(){if(!Object(a.D)(this.platformId))return{x:0,y:0};if(this.withScrollValue){const e=this.scrollableContainerRef.nativeElement;return{x:e.scrollLeft,y:e.scrollTop}}const e=this.document.documentElement.getBoundingClientRect();return{x:-e.left||this.document.body.scrollLeft||this.window.scrollX||this.document.documentElement.scrollLeft||0,y:-e.top||this.document.body.scrollTop||this.window.scrollY||this.document.documentElement.scrollTop||0}}registerAsOverlayContainer(){this.overlayContainer.setContainer&&this.overlayContainer.setContainer(this.elementRef.nativeElement)}unregisterAsOverlayContainer(){this.overlayContainer.clearContainer&&this.overlayContainer.clearContainer()}scroll(e=null,t=null){const{x:n,y:r}=this.getScrollPosition();if(e=null==e?n:e,t=null==t?r:t,Object(a.D)(this.platformId))if(this.withScrollValue){const n=this.scrollableContainerRef.nativeElement;n.scrollTo?n.scrollTo(e,t):(n.scrollLeft=e,n.scrollTop=t)}else this.window.scrollTo(e,t)}blockScroll(){if(this.isScrollBlocked)return;this.isScrollBlocked=!0,this.renderer.addClass(this.document.documentElement,this.scrollBlockClass);const e=this.scrollableContainerRef.nativeElement,t=this.layoutContainerRef.nativeElement,n=t.clientWidth;this.scrollableContainerOverflowOldValue=e.style.overflow,e.style.overflow="hidden";const r=t.clientWidth-n;r&&(this.layoutPaddingOldValue={left:t.style.paddingLeft,right:t.style.paddingRight},this.layoutDirectionService.isLtr()?t.style.paddingRight=r+"px":t.style.paddingLeft=r+"px")}enableScroll(){if(this.isScrollBlocked&&(this.isScrollBlocked=!1,this.renderer.removeClass(this.document.documentElement,this.scrollBlockClass),this.scrollableContainerRef.nativeElement.style.overflow=this.scrollableContainerOverflowOldValue,this.layoutPaddingOldValue)){const e=this.layoutContainerRef.nativeElement;e.style.paddingLeft=this.layoutPaddingOldValue.left,e.style.paddingRight=this.layoutPaddingOldValue.right,this.layoutPaddingOldValue=null}}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Xt),r.Qb(Zt),r.Qb(r.l),r.Qb(r.G),r.Qb(Lt),r.Qb(Vt),r.Qb(r.D),r.Qb(Qt),r.Qb(en),r.Qb(tn),r.Qb(xr),r.Qb(kn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-layout"]],viewQuery:function(e,t){if(1&e&&(r.Bc(bt,5,r.S),r.Bc(xt,5,r.l),r.Bc(vt,5,r.l)),2&e){let e;r.nc(e=r.dc())&&(t.veryTopRef=e.first),r.nc(e=r.dc())&&(t.scrollableContainerRef=e.first),r.nc(e=r.dc())&&(t.layoutContainerRef=e.first)}},hostVars:6,hostBindings:function(e,t){1&e&&r.cc("scroll",function(e){return t.onScroll(e)},!1,r.pc)("resize",function(e){return t.onResize(e)},!1,r.pc),2&e&&r.Ib("window-mode",t.windowModeValue)("with-scroll",t.withScrollValue)("with-subheader",t.withSubheader)},inputs:{center:"center",windowMode:"windowMode",withScroll:"withScroll",restoreScrollTop:"restoreScrollTop"},ngContentSelectors:wt,decls:12,vars:2,consts:[[1,"scrollable-container",3,"scroll"],["scrollableContainer",""],[1,"layout"],["layoutContainer",""],[1,"layout-container"],[1,"content"],[1,"columns"]],template:function(e,t){1&e&&(r.jc(At),r.Wb(0,"div",0,1),r.cc("scroll",function(e){return t.onScroll(e)}),r.Wb(2,"div",2,3),r.ic(4),r.Wb(5,"div",4),r.ic(6,1),r.Wb(7,"div",5),r.ic(8,2),r.Wb(9,"div",6),r.ic(10,3),r.Vb(),r.ic(11,4),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Eb(7),r.Ib("center",t.centerValue))},styles:["[_nghost-%COMP%]{-webkit-font-smoothing:antialiased}[dir=ltr]   [_nghost-%COMP%]{text-align:left}[dir=rtl]   [_nghost-%COMP%]{text-align:right}[_nghost-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]     nb-layout-header{display:block}[_nghost-%COMP%]     nb-layout-header nav{align-items:center;justify-content:flex-start;display:flex}[_nghost-%COMP%]     nb-layout-header.fixed{position:fixed;top:0;left:0;right:0;z-index:1040}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:2}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:2}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.end{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar .fixed{position:fixed;width:100%;overflow-y:auto;height:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:column;min-width:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content.center[_ngcontent-%COMP%]{max-width:100%;position:relative;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row;width:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column{order:1;flex:1 0;min-width:0}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.start{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer{display:block;margin-top:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer nav{justify-content:center;display:flex}"]}),e})(),Ar=(()=>{class e{set left(e){this.leftValue=fr(e),this.startValue=!1}set start(e){this.startValue=fr(e),this.leftValue=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-layout-column"]],hostVars:4,hostBindings:function(e,t){2&e&&r.Ib("left",t.leftValue)("start",t.startValue)},inputs:{left:"left",start:"start"},ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2}),e})(),wr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:[xr],imports:[[nn]]}),e})();new i.a,new s.a(1),new s.a(1),new s.a(1),new s.a(1),new s.a(1),new s.a(1),new s.a(1),new i.a,new i.a;let kr=(()=>{class e{constructor(e){this.statusService=e,this.value=0,this.status="basic",this.size="medium",this.displayValue=!1}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get primary(){return"primary"===this.status}get success(){return"success"===this.status}get info(){return"info"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-progress-bar"]],hostVars:26,hostBindings:function(e,t){2&e&&(r.Gb(t.additionalClasses),r.Ib("size-tiny",t.tiny)("size-small",t.small)("size-medium",t.medium)("size-large",t.large)("size-giant",t.giant)("status-primary",t.primary)("status-success",t.success)("status-info",t.info)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control))},inputs:{value:"value",status:"status",size:"size",displayValue:"displayValue"},ngContentSelectors:pt,decls:4,vars:3,consts:[[1,"progress-container"],[1,"progress-value"],[4,"ngIf"]],template:function(e,t){1&e&&(r.jc(),r.Wb(0,"div",0),r.Wb(1,"div",1),r.wc(2,kt,2,1,"span",2),r.ic(3),r.Vb(),r.Vb()),2&e&&(r.Eb(1),r.uc("width",t.value,"%"),r.Eb(1),r.kc("ngIf",t.displayValue))},directives:[a.o],styles:["[_nghost-%COMP%]{display:block}.progress-container[_ngcontent-%COMP%]{overflow:hidden}.progress-value[_ngcontent-%COMP%]{height:100%;text-align:center;overflow:hidden}"]}),e})(),Sr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn]]}),e})(),Ir=(()=>{class e{constructor(e){this.statusService=e,this.size="",this.status="basic",this.accent="",this.outline="",this._closable=!1,this.close=new r.o}get closable(){return this._closable}set closable(e){this._closable=fr(e)}onClose(){this.close.emit()}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get primary(){return"primary"===this.status}get success(){return"success"===this.status}get info(){return"info"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get primaryAccent(){return"primary"===this.accent}get successAccent(){return"success"===this.accent}get infoAccent(){return"info"===this.accent}get warningAccent(){return"warning"===this.accent}get dangerAccent(){return"danger"===this.accent}get basicAccent(){return"basic"===this.accent}get controlAccent(){return"control"===this.accent}get primaryOutline(){return"primary"===this.outline}get successOutline(){return"success"===this.outline}get infoOutline(){return"info"===this.outline}get warningOutline(){return"warning"===this.outline}get dangerOutline(){return"danger"===this.outline}get basicOutline(){return"basic"===this.outline}get controlOutline(){return"control"===this.outline}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-alert"]],hostVars:56,hostBindings:function(e,t){2&e&&(r.Gb(t.additionalClasses),r.Ib("closable",t.closable)("size-tiny",t.tiny)("size-small",t.small)("size-medium",t.medium)("size-large",t.large)("size-giant",t.giant)("status-primary",t.primary)("status-success",t.success)("status-info",t.info)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control)("accent-primary",t.primaryAccent)("accent-success",t.successAccent)("accent-info",t.infoAccent)("accent-warning",t.warningAccent)("accent-danger",t.dangerAccent)("accent-basic",t.basicAccent)("accent-control",t.controlAccent)("outline-primary",t.primaryOutline)("outline-success",t.successOutline)("outline-info",t.infoOutline)("outline-warning",t.warningOutline)("outline-danger",t.dangerOutline)("outline-basic",t.basicOutline)("outline-control",t.controlOutline))},inputs:{size:"size",status:"status",accent:"accent",outline:"outline",closable:"closable"},outputs:{close:"close"},ngContentSelectors:pt,decls:2,vars:1,consts:[["type","button","class","close","aria-label","Close",3,"click",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&(r.jc(),r.wc(0,St,3,0,"button",0),r.ic(1)),2&e&&r.kc("ngIf",t.closable)},directives:[a.o],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}[dir=ltr]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{right:0}[dir=rtl]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{left:0}.close[_ngcontent-%COMP%]{position:absolute;top:0;color:inherit;background-color:transparent;border:0;appearance:none}"]}),e})(),_r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn]]}),e})(),Er=(()=>{class e{constructor(e){this.statusService=e,this.message="Loading...",this.size="medium",this.status="basic"}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-spinner"]],hostVars:26,hostBindings:function(e,t){2&e&&(r.Gb(t.additionalClasses),r.Ib("size-tiny",t.tiny)("size-small",t.small)("size-medium",t.medium)("size-large",t.large)("size-giant",t.giant)("status-primary",t.primary)("status-info",t.info)("status-success",t.success)("status-warning",t.warning)("status-danger",t.danger)("status-basic",t.basic)("status-control",t.control))},inputs:{message:"message",size:"size",status:"status"},decls:2,vars:1,consts:[[1,"spin-circle"],["class","message",4,"ngIf"],[1,"message"]],template:function(e,t){1&e&&(r.Rb(0,"span",0),r.wc(1,It,2,1,"span",1)),2&e&&(r.Eb(1),r.kc("ngIf",t.message))},directives:[a.o],styles:["[_nghost-%COMP%]{opacity:1;position:absolute;border-radius:inherit;top:0;right:0;left:0;bottom:0;overflow:hidden;z-index:9999;display:flex;justify-content:center;align-items:center;visibility:visible}[_nghost-%COMP%]   .spin-circle[_ngcontent-%COMP%]{animation:spin 0.8s infinite linear;border-radius:50%;border-style:solid;border-width:0.125em;width:1em;height:1em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:0.5rem}"]}),e})(),Tr=(()=>{class e{constructor(e,t,n,r){this.directiveView=e,this.componentFactoryResolver=t,this.renderer=n,this.directiveElement=r,this.shouldShow=!1,this.spinnerStatus="basic",this.spinnerSize="medium",this.isSpinnerExist=!1}set nbSpinner(e){this.componentFactory?e?this.show():this.hide():this.shouldShow=e}ngOnInit(){this.componentFactory=this.componentFactoryResolver.resolveComponentFactory(Er),this.shouldShow&&this.show()}hide(){this.isSpinnerExist&&(this.directiveView.remove(),this.isSpinnerExist=!1)}show(){this.isSpinnerExist||(this.spinner=this.directiveView.createComponent(this.componentFactory),this.setInstanceInputs(this.spinner.instance),this.spinner.changeDetectorRef.detectChanges(),this.renderer.appendChild(this.directiveElement.nativeElement,this.spinner.location.nativeElement),this.isSpinnerExist=!0)}setInstanceInputs(e){e.message=this.spinnerMessage,void 0!==this.spinnerStatus&&(e.status=this.spinnerStatus),void 0!==this.spinnerSize&&(e.size=this.spinnerSize)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S),r.Qb(r.j),r.Qb(r.G),r.Qb(r.l))},e.\u0275dir=r.Lb({type:e,selectors:[["","nbSpinner",""]],hostVars:2,hostBindings:function(e,t){2&e&&r.Ib("nb-spinner-container",t.isSpinnerExist)},inputs:{spinnerStatus:["nbSpinnerStatus","spinnerStatus"],spinnerSize:["nbSpinnerSize","spinnerSize"],nbSpinner:"nbSpinner",spinnerMessage:["nbSpinnerMessage","spinnerMessage"]}}),e})(),Cr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn]]}),e})();new r.s("Nebular Stepper Component");let Nr=(()=>{class e{constructor(){this.openCloseItems=new i.a,this.multiValue=!1}get multi(){return this.multiValue}set multi(e){this.multiValue=fr(e)}openAll(){this.multi&&this.openCloseItems.next(!1)}closeAll(){this.openCloseItems.next(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-accordion"]],inputs:{multi:"multi"},ngContentSelectors:Et,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(_t),r.ic(0))},encapsulation:2,changeDetection:0}),e})(),Mr=(()=>{class e{constructor(e,t){this.accordion=e,this.cd=t,this.collapsedChange=new r.o,this.accordionItemInvalidate=new i.a,this.collapsedValue=!0,this.disabledValue=!1,this.destroy$=new i.a}get collapsed(){return this.collapsedValue}set collapsed(e){this.collapsedValue=fr(e),this.collapsedChange.emit(this.collapsedValue),this.invalidate()}get expanded(){return!this.collapsed}set expanded(e){this.collapsedValue=!fr(e)}get disabled(){return this.disabledValue}set disabled(e){this.disabledValue=fr(e),this.invalidate()}toggle(){if(!this.disabled){const e=!this.collapsed;this.accordion.multi||this.accordion.openCloseItems.next(!0),this.collapsed=e}}open(){!this.disabled&&(this.collapsed=!1)}close(){!this.disabled&&(this.collapsed=!0)}ngOnInit(){this.accordion.openCloseItems.pipe(Object(_.a)(this.destroy$)).subscribe(e=>{!this.disabled&&(this.collapsed=e)})}ngOnChanges(e){this.accordionItemInvalidate.next(!0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.accordionItemInvalidate.complete()}invalidate(){this.accordionItemInvalidate.next(!0),this.cd.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Nr,1),r.Qb(r.h))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-accordion-item"]],hostVars:6,hostBindings:function(e,t){2&e&&r.Ib("collapsed",t.collapsed)("expanded",t.expanded)("disabled",t.disabled)},inputs:{collapsed:"collapsed",expanded:"expanded",disabled:"disabled"},outputs:{collapsedChange:"collapsedChange"},features:[r.Cb],ngContentSelectors:Ct,decls:2,vars:0,template:function(e,t){1&e&&(r.jc(Tt),r.ic(0),r.ic(1,1))},styles:[yt],changeDetection:0}),e})();const Fr=Object(ct.j)("accordionItemBody",[Object(ct.g)("collapsed",Object(ct.h)({overflow:"hidden",visibility:"hidden",height:0})),Object(ct.g)("expanded",Object(ct.h)({overflow:"hidden",visibility:"visible"})),Object(ct.i)("collapsed => expanded",Object(ct.e)("100ms ease-in")),Object(ct.i)("expanded => collapsed",Object(ct.e)("100ms ease-out"))]);let Rr=(()=>{class e{constructor(e,t){this.accordionItem=e,this.cd=t,this.destroy$=new i.a}get state(){return this.accordionItem.collapsed?"collapsed":"expanded"}ngOnInit(){this.accordionItem.accordionItemInvalidate.pipe(Object(_.a)(this.destroy$)).subscribe(()=>this.cd.markForCheck())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Mr,1),r.Qb(r.h))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-accordion-item-body"]],ngContentSelectors:pt,decls:3,vars:3,consts:[[1,"item-body"]],template:function(e,t){1&e&&(r.jc(),r.Wb(0,"div"),r.Wb(1,"div",0),r.ic(2),r.Vb(),r.Vb()),2&e&&r.kc("@accordionItemBody",r.mc(1,Nt,t.state))},encapsulation:2,data:{animation:[Fr]},changeDetection:0}),e})(),Dr=(()=>{class e{constructor(e,t){this.accordionItem=e,this.cd=t,this.destroy$=new i.a}get isCollapsed(){return this.accordionItem.collapsed}get expanded(){return!this.accordionItem.collapsed}get tabbable(){return this.accordionItem.disabled?"-1":"0"}get disabled(){return this.accordionItem.disabled}toggle(){this.accordionItem.toggle()}get state(){return this.isCollapsed?"collapsed":this.expanded?"expanded":void 0}ngOnInit(){this.accordionItem.accordionItemInvalidate.pipe(Object(_.a)(this.destroy$)).subscribe(()=>this.cd.markForCheck())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Mr,1),r.Qb(r.h))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-accordion-item-header"]],hostVars:7,hostBindings:function(e,t){1&e&&r.cc("click",function(){return t.toggle()})("keydown.space",function(){return t.toggle()})("keydown.enter",function(){return t.toggle()}),2&e&&(r.Fb("aria-expanded",t.expanded)("tabindex",t.tabbable)("aria-disabled",t.disabled),r.Ib("accordion-item-header-collapsed",t.isCollapsed)("accordion-item-header-expanded",t.expanded))},ngContentSelectors:Rt,decls:4,vars:1,consts:[["icon","chevron-down-outline","pack","nebular-essentials","class","expansion-indicator",4,"ngIf"],["icon","chevron-down-outline","pack","nebular-essentials",1,"expansion-indicator"]],template:function(e,t){1&e&&(r.jc(Ft),r.ic(0),r.ic(1,1),r.ic(2,2),r.wc(3,Mt,1,1,"nb-icon",0)),2&e&&(r.Eb(3),r.kc("ngIf",!t.disabled))},directives:[a.o,or],styles:["[_nghost-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]:focus{outline:0}"],data:{animation:[Object(ct.j)("expansionIndicator",[Object(ct.g)("expanded",Object(ct.h)({transform:"rotate(180deg)"})),Object(ct.i)("collapsed => expanded",Object(ct.e)("100ms ease-in")),Object(ct.i)("expanded => collapsed",Object(ct.e)("100ms ease-out"))])]},changeDetection:0}),e})(),Or=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:[],imports:[[a.c,lr]]}),e})(),zr=(()=>{class e extends mr{constructor(e,t,n,a,s){super(e,t,n,a,s),this.renderer=e,this.hostElement=t,this.cd=n,this.zone=a,this.statusService=s,this._pressedChange$=new i.a,this.appearance="filled",this._pressed=!1,this.pressedChange=new r.o}get pressedChange$(){return this._pressedChange$.asObservable()}get pressed(){return this._pressed}set pressed(e){this.pressed!==fr(e)&&(this._pressed=!this.pressed,this.pressedChange.emit(this.pressed),this._pressedChange$.next({source:this,pressed:this.pressed}))}get basic(){return!this.pressed}get primary(){return this.pressed&&("basic"===this.status||"primary"===this.status)}get success(){return this.pressed&&"success"===this.status}get info(){return this.pressed&&"info"===this.status}get warning(){return this.pressed&&"warning"===this.status}get danger(){return this.pressed&&"danger"===this.status}get control(){return this.pressed&&"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}onClick(){this.pressed=!this.pressed}_updatePressed(e){this.pressed=e,this.cd.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.G),r.Qb(r.l),r.Qb(r.h),r.Qb(r.B),r.Qb(Jn))},e.\u0275dir=r.Lb({type:e,selectors:[["button","nbButtonToggle",""]],hostVars:17,hostBindings:function(e,t){1&e&&r.cc("click",function(){return t.onClick()}),2&e&&(r.Fb("aria-pressed",t.pressed),r.Gb(t.additionalClasses),r.Ib("status-basic",t.basic)("status-primary",t.primary)("status-success",t.success)("status-info",t.info)("status-warning",t.warning)("status-danger",t.danger)("status-control",t.control))},inputs:{appearance:"appearance",pressed:"pressed"},outputs:{pressedChange:"pressedChange"},exportAs:["nbButtonToggle"],features:[r.Db([{provide:mr,useExisting:e}]),r.Bb]}),e})(),Pr=(()=>{class e{constructor(e,t){this.cd=e,this.statusService=t,this.destroy$=new i.a,this.buttonsChange$=new i.a,this.size="medium",this.status="basic",this.shape="rectangle",this.appearance="filled",this._disabled=!1,this._multiple=!1,this.role="group"}get disabled(){return this._disabled}set disabled(e){this.disabled!==fr(e)&&(this._disabled=!this.disabled)}get multiple(){return this._multiple}set multiple(e){this._multiple=fr(e)}get filled(){return"filled"===this.appearance}set filled(e){fr(e)&&(this.appearance="filled")}get outline(){return"outline"===this.appearance}set outline(e){fr(e)&&(this.appearance="outline")}get ghost(){return"ghost"===this.appearance}set ghost(e){fr(e)&&(this.appearance="ghost")}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}ngOnChanges({size:e,status:t,shape:n,multiple:r,filled:a,outline:s,ghost:i,disabled:o}){var l;(e||t||n||r||a||s||i||o)&&this.syncButtonsProperties((null===(l=this.buttons)||void 0===l?void 0:l.toArray())||[])}ngAfterContentInit(){this.buttonsChange$.pipe(Object(_.a)(this.destroy$)).subscribe(e=>{this.listenButtonPressedState(e),this.syncButtonsProperties(e)}),this.buttons.changes.pipe(Object(M.a)(e=>Object(p.a)(Promise.resolve(e.toArray()))),Object(_.a)(this.destroy$)).subscribe(this.buttonsChange$),this.buttonsChange$.next(this.buttons.toArray())}listenButtonPressedState(e){const t=e.filter(e=>e instanceof zr);if(!t.length)return;const n=t.map(e=>e.pressedChange$);Object(u.a)(...n).pipe(Object(w.a)(({pressed:e})=>!this.multiple&&e),Object(_.a)(Object(u.a)(this.buttonsChange$,this.destroy$))).subscribe(({source:e})=>{t.filter(t=>t!==e).forEach(e=>e._updatePressed(!1))})}syncButtonsProperties(e){e.forEach(e=>{e.updateProperties({appearance:this.appearance,size:this.size,status:this.status,shape:this.shape,disabled:this.disabled})})}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.h),r.Qb(Jn))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-button-group"]],contentQueries:function(e,t,n){if(1&e&&r.Jb(n,mr,4),2&e){let e;r.nc(e=r.dc())&&(t.buttons=e)}},hostVars:3,hostBindings:function(e,t){2&e&&(r.Fb("role",t.role),r.Gb(t.additionalClasses))},inputs:{size:"size",status:"status",shape:"shape",appearance:"appearance",disabled:"disabled",multiple:"multiple",filled:"filled",outline:"outline",ghost:"ghost"},features:[r.Cb],ngContentSelectors:pt,decls:1,vars:0,template:function(e,t){1&e&&(r.jc(),r.ic(0))},encapsulation:2,changeDetection:0}),e})(),$r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})();new r.s("NB_SORT_HEADER_COLUMN_DEF");const Lr=new r.s("Default dialog options");class Vr{constructor(e){this.hasBackdrop=!0,this.backdropClass="overlay-backdrop",this.dialogClass="",this.closeOnBackdropClick=!0,this.closeOnEsc=!0,this.hasScroll=!1,this.autoFocus=!0,Object.assign(this,e)}}class Br{constructor(e){this.overlayRef=e,this.onClose$=new i.a,this.onClose=this.onClose$.asObservable(),this.onBackdropClick=this.overlayRef.backdropClick()}close(e){this.overlayRef.detach(),this.overlayRef.dispose(),this.onClose$.next(e),this.onClose$.complete()}}let Wr=(()=>{class e{constructor(e,t,n){this.config=e,this.elementRef=t,this.focusTrapFactory=n}ngOnInit(){this.config.autoFocus&&(this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement),this.focusTrap.blurPreviouslyFocusedElement(),this.focusTrap.focusInitialElement())}ngOnDestroy(){this.config.autoFocus&&this.focusTrap&&this.focusTrap.restoreFocus()}attachComponentPortal(e){return this.portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this.portalOutlet.attachTemplatePortal(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Vr),r.Qb(r.l),r.Qb(an))},e.\u0275cmp=r.Kb({type:e,selectors:[["nb-dialog-container"]],viewQuery:function(e,t){if(1&e&&r.Bc(dn,7),2&e){let e;r.nc(e=r.dc())&&(t.portalOutlet=e.first)}},decls:1,vars:0,consts:[["nbPortalOutlet",""]],template:function(e,t){1&e&&r.wc(0,Dt,0,0,"ng-template",0)},directives:[dn],encapsulation:2}),e})(),jr=(()=>{class e{constructor(e,t,n,r,a,s){this.document=e,this.globalConfig=t,this.positionBuilder=n,this.overlay=r,this.injector=a,this.cfr=s}open(e,t={}){const n=new Vr(Object.assign(Object.assign({},this.globalConfig),t)),r=this.createOverlay(n),a=new Br(r),s=this.createContainer(n,r);return this.createContent(n,e,s,a),this.registerCloseListeners(n,r,a),a}createOverlay(e){const t=this.createPositionStrategy(),n=this.createScrollStrategy(e.hasScroll);return this.overlay.create({positionStrategy:t,scrollStrategy:n,hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.dialogClass})}createPositionStrategy(){return this.positionBuilder.global().centerVertically().centerHorizontally()}createScrollStrategy(e){return e?this.overlay.scrollStrategies.noop():this.overlay.scrollStrategies.block()}createContainer(e,t){const n=new xn(this.createInjector(e),new WeakMap([[Vr,e]])),r=new pn(Wr,null,n,this.cfr);return t.attach(r).instance}createContent(e,t,n,a){if(t instanceof r.O){const r=this.createTemplatePortal(e,t,a);n.attachTemplatePortal(r)}else{const r=this.createComponentPortal(e,t,a);a.componentRef=n.attachComponentPortal(r),e.context&&Object.assign(a.componentRef.instance,Object.assign({},e.context))}}createTemplatePortal(e,t,n){return new gn(t,null,{$implicit:e.context,dialogRef:n})}createComponentPortal(e,t,n){const r=this.createInjector(e),a=new xn(r,new WeakMap([[Br,n]]));return new pn(t,e.viewContainerRef,a)}createInjector(e){return e.viewContainerRef&&e.viewContainerRef.injector||this.injector}registerCloseListeners(e,t,n){e.closeOnBackdropClick&&t.backdropClick().subscribe(()=>n.close()),e.closeOnEsc&&Object(l.a)(this.document,"keyup").pipe(Object(w.a)(e=>27===e.keyCode),Object(_.a)(n.onClose)).subscribe(()=>n.close())}}return e.\u0275fac=function(t){return new(t||e)(r.ac(Vt),r.ac(Lr),r.ac(Pn),r.ac($n),r.ac(r.t),r.ac(r.j))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Hr=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[jr,{provide:Lr,useValue:t}]}}static forChild(t={}){return{ngModule:e,providers:[jr,{provide:Lr,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[nn,Yn]]}),e})();Object(ct.h)({transform:"translateX({{ direction }}110%)",height:0,marginLeft:"0",marginRight:"0",marginTop:"0",marginBottom:"0"}),new r.s("Default toastr options"),new r.s("NB_SELECT_INJECTION_TOKEN"),new r.s("Nebular Window Content"),new r.s("Nebular Window Config"),new r.s("Nebular Window Context"),new r.s("NB_TREE_GRID")},bHdf:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("5+tZ"),a=n("SpAZ");function s(e=Number.POSITIVE_INFINITY){return Object(r.a)(a.a,e)}},c2HN:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},db83:function(e,t,n){"use strict";n.d(t,"a",function(){return rH});var r=Object.defineProperty,a=e=>n("AfPn")(e),s=(e,t)=>{for(var n in(e=>{r(e,"__esModule",{value:!0})})(e),t)r(e,n,{get:t[n],enumerable:!0})};s({},{Abs:()=>Ue,Acos:()=>Ge,Acosh:()=>qe,AdadeltaOptimizer:()=>fp,AdagradOptimizer:()=>mp,AdamOptimizer:()=>gp,AdamaxOptimizer:()=>yp,Add:()=>Ke,AddN:()=>Xe,All:()=>Ze,Any:()=>Ye,ArgMax:()=>Je,ArgMin:()=>Qe,Asin:()=>et,Asinh:()=>tt,Atan:()=>nt,Atan2:()=>at,Atanh:()=>rt,AvgPool:()=>st,AvgPool3D:()=>ot,AvgPool3DGrad:()=>lt,AvgPoolGrad:()=>it,BackendWasm:()=>KB,BatchMatMul:()=>ut,BatchToSpaceND:()=>ht,Bincount:()=>ct,BroadcastTo:()=>dt,Callback:()=>uk,CallbackList:()=>ib,Cast:()=>pt,Ceil:()=>ft,ClipByValue:()=>mt,Complex:()=>gt,ComplexAbs:()=>yt,Concat:()=>bt,Conv2D:()=>xt,Conv2DBackpropFilter:()=>vt,Conv2DBackpropInput:()=>At,Conv3D:()=>wt,Conv3DBackpropFilterV2:()=>kt,Conv3DBackpropInputV2:()=>St,Cos:()=>It,Cosh:()=>_t,CropAndResize:()=>Tt,Cumsum:()=>Et,CustomCallback:()=>ub,DataStorage:()=>W,DenseBincount:()=>Ct,DepthToSpace:()=>Nt,DepthwiseConv2dNative:()=>Mt,DepthwiseConv2dNativeBackpropFilter:()=>Ft,DepthwiseConv2dNativeBackpropInput:()=>Rt,Diag:()=>Dt,Dilation2D:()=>Ot,Dilation2DBackpropFilter:()=>Pt,Dilation2DBackpropInput:()=>zt,ENV:()=>We,EarlyStopping:()=>mk,Einsum:()=>Lt,Elu:()=>Vt,EluGrad:()=>Bt,Environment:()=>$e,Equal:()=>jt,Erf:()=>Wt,Exp:()=>Ht,ExpandDims:()=>Ut,Expm1:()=>Gt,FFT:()=>qt,Fill:()=>Kt,FlipLeftRight:()=>Xt,Floor:()=>Zt,FloorDiv:()=>Yt,FromPixels:()=>Ur,FusedBatchNorm:()=>Jt,FusedConv2D:()=>Kr,FusedDepthwiseConv2D:()=>Xr,GatherNd:()=>en,GatherV2:()=>Qt,GraphModel:()=>GS,Greater:()=>tn,GreaterEqual:()=>nn,History:()=>lb,IFFT:()=>an,Identity:()=>rn,Imag:()=>sn,InputSpec:()=>Gy,IsFinite:()=>on,IsInf:()=>ln,IsNan:()=>un,KernelBackend:()=>j,LRN:()=>vn,LRNGrad:()=>An,LayerVariable:()=>jy,LayersModel:()=>fx,LeakyRelu:()=>hn,Less:()=>cn,LessEqual:()=>dn,LinSpace:()=>pn,Log:()=>fn,Log1p:()=>mn,LogSoftmax:()=>xn,LogicalAnd:()=>gn,LogicalNot:()=>yn,LogicalOr:()=>bn,Max:()=>wn,MaxPool:()=>Sn,MaxPool3D:()=>_n,MaxPool3DGrad:()=>En,MaxPoolGrad:()=>In,MaxPoolWithArgmax:()=>Tn,Maximum:()=>kn,Mean:()=>Cn,Min:()=>Nn,Minimum:()=>Mn,MirrorPad:()=>Fn,Mod:()=>Rn,MomentumOptimizer:()=>xp,Multinomial:()=>Dn,Multiply:()=>On,Neg:()=>zn,NonMaxSuppressionV3:()=>$n,NonMaxSuppressionV4:()=>Ln,NonMaxSuppressionV5:()=>Vn,NotEqual:()=>Pn,OP_SCOPE_SUFFIX:()=>vs,OneHot:()=>Wn,OnesLike:()=>Bn,Optimizer:()=>pp,Pack:()=>jn,PadV2:()=>Hn,Pool:()=>Un,Pow:()=>Gn,Prelu:()=>qn,Prod:()=>Kn,RMSPropOptimizer:()=>vp,RNN:()=>vv,Range:()=>Xn,Rank:()=>Va,Real:()=>Zn,RealDiv:()=>$t,Reciprocal:()=>Yn,Reduction:()=>Bd,Relu:()=>Jn,Relu6:()=>ar,Reshape:()=>Qn,ResizeBilinear:()=>nr,ResizeBilinearGrad:()=>rr,ResizeNearestNeighbor:()=>er,ResizeNearestNeighborGrad:()=>tr,Reverse:()=>sr,RotateWithOffset:()=>Gr,Round:()=>ir,Rsqrt:()=>or,SGDOptimizer:()=>bp,ScatterNd:()=>lr,Select:()=>ur,Selu:()=>hr,Sequential:()=>yx,Sigmoid:()=>mr,Sign:()=>fr,Sin:()=>dr,Sinh:()=>pr,Slice:()=>cr,Softmax:()=>Ar,Softplus:()=>gr,SpaceToBatchND:()=>xr,SparseFillEmptyRows:()=>wr,SparseReshape:()=>kr,SparseSegmentMean:()=>Sr,SparseSegmentSum:()=>Ir,SparseToDense:()=>_r,SplitV:()=>vr,Sqrt:()=>yr,Square:()=>Tr,SquaredDifference:()=>Er,Step:()=>Hr,StridedSlice:()=>Cr,StringNGrams:()=>Nr,StringSplit:()=>Mr,StringToHashBucketFast:()=>Fr,Sub:()=>Rr,Sum:()=>br,SymbolicTensor:()=>qy,Tan:()=>Dr,Tanh:()=>Or,Tensor:()=>Pa,TensorBuffer:()=>Da,Tile:()=>zr,TopK:()=>Pr,Transform:()=>$r,Transpose:()=>Lr,Unique:()=>Vr,Unpack:()=>Br,UnsortedSegmentSum:()=>Wr,Variable:()=>La,ZerosLike:()=>jr,_FusedMatMul:()=>qr,abs:()=>rl,acos:()=>al,acosh:()=>sl,add:()=>Qo,addN:()=>il,all:()=>ol,any:()=>ll,argMax:()=>ul,argMin:()=>hl,asin:()=>cl,asinh:()=>dl,atan:()=>pl,atan2:()=>fl,atanh:()=>ml,avgPool:()=>Nl,avgPool3d:()=>Ml,backend:()=>Yo,backend_util:()=>Ip,basicLSTMCell:()=>zl,batchNorm:()=>$l,batchNorm2d:()=>Ll,batchNorm3d:()=>Vl,batchNorm4d:()=>Bl,batchToSpaceND:()=>Pl,bincount:()=>Wl,booleanMaskAsync:()=>Gc,broadcastTo:()=>jl,browser:()=>Li,buffer:()=>pi,callbacks:()=>gk,cast:()=>fi,ceil:()=>Hl,clipByValue:()=>Ul,clone:()=>mi,complex:()=>ws,concat:()=>Fl,concat1d:()=>Gl,concat2d:()=>ql,concat3d:()=>Kl,concat4d:()=>Xl,constraints:()=>Tm,conv1d:()=>Yl,conv2d:()=>Zl,conv2dTranspose:()=>Ql,conv3d:()=>eu,conv3dTranspose:()=>nu,copyRegisteredKernels:()=>sa,cos:()=>ru,cosh:()=>au,cosineWindow:()=>td,cumsum:()=>su,customGrad:()=>Ku,data:()=>XS,denseBincount:()=>iu,deprecationWarn:()=>Oo,depthToSpace:()=>ou,depthwiseConv2d:()=>lu,deregisterOp:()=>vk,device_util:()=>cs,diag:()=>uu,dilation2d:()=>hu,disableDeprecationWarnings:()=>Do,dispose:()=>Bo,disposeVariables:()=>zo,div:()=>tl,divNoNan:()=>yu,dot:()=>bu,dropout:()=>Qc,einsum:()=>xu,elu:()=>vu,enableDebugMode:()=>Ro,enableProdMode:()=>Fo,enclosingPowerOfTwo:()=>ed,engine:()=>Po,env:()=>Ve,equal:()=>fu,erf:()=>Au,exp:()=>wu,expandDims:()=>ku,expm1:()=>Su,eye:()=>_u,fft:()=>Ac,fill:()=>Eu,findBackend:()=>Ko,findBackendFactory:()=>Xo,floor:()=>Tu,floorDiv:()=>el,fused:()=>rd,gather:()=>Cu,gatherND:()=>Jc,gather_util:()=>Ui,getBackend:()=>Go,getGradient:()=>Qr,getKernel:()=>Jr,getKernelsForBackend:()=>ea,grad:()=>ju,grads:()=>Hu,greater:()=>Nu,greaterEqual:()=>Mu,ifft:()=>wc,imag:()=>Fu,image:()=>lp,inTopKAsync:()=>nd,initializers:()=>fg,input:()=>Ax,io:()=>yi,irfft:()=>kc,isFinite:()=>Ru,isInf:()=>Du,isNaN:()=>Ou,keep:()=>Wo,kernel_impls:()=>mf,layers:()=>Ry,leakyRelu:()=>zu,less:()=>Pu,lessEqual:()=>$u,linalg:()=>up,linspace:()=>Lu,loadGraphModel:()=>qS,loadLayersModel:()=>vx,localResponseNormalization:()=>Vu,log:()=>Bu,log1p:()=>Wu,logSigmoid:()=>Ju,logSoftmax:()=>nh,logSumExp:()=>ch,logicalAnd:()=>dh,logicalNot:()=>ph,logicalOr:()=>fh,logicalXor:()=>mh,losses:()=>hp,matMul:()=>Oi,math:()=>Ri,max:()=>Qu,maxPool:()=>gh,maxPool3d:()=>yh,maxPoolWithArgmax:()=>bh,maximum:()=>xh,mean:()=>vh,memory:()=>$o,meshgrid:()=>kh,metrics:()=>Ww,min:()=>Sh,minimum:()=>Ih,mirrorPad:()=>_h,mod:()=>Eh,model:()=>bx,models:()=>ak,moments:()=>Ch,movingAverage:()=>Xc,mul:()=>nl,multiRNNCell:()=>Nh,multinomial:()=>Mh,neg:()=>Zu,nextFrame:()=>Sp,norm:()=>Kc,notEqual:()=>Fh,oneHot:()=>zi,ones:()=>wh,onesLike:()=>Rh,op:()=>As,outerProduct:()=>Dh,pad:()=>Oh,pad1d:()=>zh,pad2d:()=>Ph,pad3d:()=>$h,pad4d:()=>Lh,pool:()=>Bh,pow:()=>Wh,prelu:()=>jh,print:()=>gi,prod:()=>Hh,profile:()=>Lo,rand:()=>Uh,randomGamma:()=>Kh,randomNormal:()=>Xh,randomUniform:()=>Zh,range:()=>Yh,ready:()=>Uo,real:()=>Jh,reciprocal:()=>Qh,registerBackend:()=>Zo,registerCallbackConstructor:()=>wx,registerGradient:()=>na,registerKernel:()=>ta,registerOp:()=>bk,regularizers:()=>sk,relu:()=>ec,relu6:()=>tc,removeBackend:()=>qo,reshape:()=>Cl,reverse:()=>nc,reverse1d:()=>rc,reverse2d:()=>ac,reverse3d:()=>sc,reverse4d:()=>ic,rfft:()=>Ic,round:()=>oc,rsqrt:()=>lc,scalar:()=>uc,scatterND:()=>Zc,scatter_util:()=>qi,selu:()=>hc,separableConv2d:()=>cc,sequential:()=>xx,serialization:()=>mo,setBackend:()=>Ho,setPlatform:()=>Jo,setWasmPath:()=>nW,setWasmPaths:()=>rW,setdiff1dAsync:()=>dc,sigmoid:()=>Rl,sign:()=>pc,signal:()=>op,sin:()=>fc,sinh:()=>mc,slice:()=>Dl,slice1d:()=>gc,slice2d:()=>yc,slice3d:()=>bc,slice4d:()=>xc,slice_util:()=>Yi,softmax:()=>vc,softplus:()=>Yu,spaceToBatchND:()=>Vh,sparse:()=>cp,sparseToDense:()=>Yc,spectral:()=>ip,split:()=>Sc,sqrt:()=>_c,square:()=>Th,squaredDifference:()=>Ec,squeeze:()=>Tc,stack:()=>Cc,step:()=>Nc,stridedSlice:()=>Mc,string:()=>dp,sub:()=>eh,sum:()=>th,sumOutType:()=>Qa,tan:()=>Fc,tanh:()=>Ol,tensor:()=>Ss,tensor1d:()=>Rc,tensor2d:()=>Dc,tensor3d:()=>Vi,tensor4d:()=>Oc,tensor5d:()=>zc,tensor6d:()=>Pc,tensor_util:()=>Za,test_util:()=>xo,tidy:()=>Vo,tile:()=>Iu,time:()=>jo,topk:()=>$c,train:()=>wp,transpose:()=>Pi,truncatedNormal:()=>Lc,unique:()=>Vc,unregisterGradient:()=>aa,unregisterKernel:()=>ra,unsortedSegmentSum:()=>Bc,unstack:()=>Wc,upcastType:()=>Ja,util:()=>oa,valueAndGrad:()=>Uu,valueAndGrads:()=>Gu,variable:()=>jc,variableGrads:()=>qu,version:()=>xL,version_converter:()=>KS,version_core:()=>Mo,version_layers:()=>jb,version_wasm:()=>aW,where:()=>mu,whereAsync:()=>Uc,zeros:()=>Ah,zerosLike:()=>gu});var i=Object.create,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,h=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,d=e=>o(e,"__esModule",{value:!0}),p=e=>a(e),f=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},m=(e,t)=>{for(var n in d(e),t)o(e,n,{get:t[n],enumerable:!0})},g=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of u(t))c.call(e,r)||"default"===r||o(e,r,{get:()=>t[r],enumerable:!(n=l(t,r))||n.enumerable});return e})(d(o(null!=e?i(h(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),y=f({"node_modules/.pnpm/long@4.0.0/node_modules/long/src/long.js"(e,t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(_){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var s={},i={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),a&&(i[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=u(e,e<0?-1:0,!1),a&&(s[e]=n),n)}function l(e,t){if(isNaN(e))return t?b:y;if(t){if(e<0)return b;if(e>=f)return k}else{if(e<=-m)return S;if(e+1>=m)return w}return e<0?l(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var h=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=l(h(n,8)),s=y,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),u=parseInt(e.substring(i,i+o),n);if(o<8){var d=l(h(n,o));s=s.mul(d).add(l(u))}else s=(s=s.mul(a)).add(l(u))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?c(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var p=4294967296,f=p*p,m=f/2,g=o(1<<24),y=o(0);r.ZERO=y;var b=o(0,!0);r.UZERO=b;var x=o(1);r.ONE=x;var v=o(1,!0);r.UONE=v;var A=o(-1);r.NEG_ONE=A;var w=u(-1,2147483647,!1);r.MAX_VALUE=w;var k=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);r.MIN_VALUE=S;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(h(e,6),this.unsigned),s=this,i="";;){var o=s.div(a),u=(s.sub(o.mul(a)).toInt()>>>0).toString(e);if((s=o).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(x)},I.neg=I.negate,I.add=function(e){a(e)||(e=d(e));var t=0,n=0,r=0,s=0;return r+=(s+=(65535&this.low)+(65535&e.low))>>>16,n+=(r+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(n+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),u((r&=65535)<<16|(s&=65535),(t&=65535)<<16|(n&=65535),this.unsigned)},I.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return y;if(a(e)||(e=d(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(S))return e.isOdd()?S:y;if(e.eq(S))return this.isOdd()?S:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=65535&this.high,r=this.low>>>16,s=65535&this.low,i=65535&e.high,o=e.low>>>16,h=65535&e.low,c=0,p=0,f=0,m=0;return f+=(m+=s*h)>>>16,p+=(f+=r*h)>>>16,f&=65535,p+=(f+=s*o)>>>16,c+=(p+=t*h)>>>16,p&=65535,c+=(p+=r*o)>>>16,p&=65535,c+=(p+=s*i)>>>16,c+=(this.high>>>16)*h+t*o+r*i+s*(e.high>>>16),u((f&=65535)<<16|(m&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return v;s=b}else{if(this.eq(S))return e.eq(x)||e.eq(A)?S:e.eq(S)?x:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?x:A:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(S))return this.unsigned?b:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:h(2,i-48),c=l(t),p=c.mul(e);p.isNegative()||p.gt(r);)p=(c=l(t-=o,this.unsigned)).mul(e);c.isZero()&&(c=x),s=s.add(c),r=r.sub(p)}return s},I.div=I.divide,I.modulo=function(e){return a(e)||(e=d(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return u(~this.low,~this.high,this.unsigned)},I.and=function(e){return a(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return a(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return a(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}),b=f({"(disabled):node_modules/.pnpm/node-fetch@2.6.1/node_modules/node-fetch/browser.js"(){}}),x=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/alea.js"(e,t){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),v=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xor128.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),A=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xorwow.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),w=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xorshift7.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.x&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),k=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/xor4096.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n=a[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(a=0==(n=o[127&s]^=r+(i=i+1640531527|0))?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,o[a]=(r^=r>>>15)^(n^=n>>>12);e.w=i,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.X&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),S=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/lib/tychei.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),I=f({"(disabled):crypto"(){}}),_=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/seedrandom.js"(e,t){!function(e,r){var a,s=this,i=256,o=r.pow(i,6),l=r.pow(2,52),u=2*l,h=255;function c(t,n,h){var c=[],y=m(f((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(i):(t=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(t)),g(t)}catch(o){var n=s.navigator,r=n&&n.plugins;return[+new Date,s,r,s.screen,g(e)]}}():t,3),c),b=new d(c),x=function(){for(var e=b.g(6),t=o,n=0;e<l;)e=(e+n)*i,t*=i,n=b.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,m(g(b.S),e),(n.pass||h||function(e,t,n,a){return a&&(a.S&&p(a,b),e.state=function(){return p(b,{})}),n?(r.random=e,t):e})(x,y,"global"in n?n.global:this==r,n.state)}function d(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=h&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*i+o[h&(o[a]=o[s=h&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(f(e[n],t-1))}catch(s){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r.seedrandom=c,m(r.random(),e),"object"==typeof t&&t.exports){t.exports=c;try{a=I()}catch(y){}}else"function"==typeof define&&n("PDX0")&&define(function(){return c})}([],Math)}}),E=f({"node_modules/.pnpm/seedrandom@2.4.3/node_modules/seedrandom/index.js"(e,t){var n=x(),r=v(),a=A(),s=w(),i=k(),o=S(),l=_();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=s,l.xor4096=i,l.tychei=o,t.exports=l}}),T=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/alea.js"(e,t){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),C=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xor128.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),N=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xorwow.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),M=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xorshift7.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.x&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),F=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/xor4096.js"(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n=a[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(a=0==(n=o[127&s]^=r+(i=i+1640531527|0))?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,o[a]=(r^=r>>>15)^(n^=n>>>12);e.w=i,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.X&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),R=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/lib/tychei.js"(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),D=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/seedrandom.js"(e,t){!function(e,r,a){var s,i=256,o=a.pow(i,6),l=a.pow(2,52),u=2*l,h=255;function c(t,n,h){var c=[],y=m(f((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(i):(t=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(o){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,g(r)]}}():t,3),c),b=new d(c),x=function(){for(var e=b.g(6),t=o,n=0;e<l;)e=(e+n)*i,t*=i,n=b.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,m(g(b.S),r),(n.pass||h||function(e,t,n,r){return r&&(r.S&&p(r,b),e.state=function(){return p(b,{})}),n?(a.random=e,t):e})(x,y,"global"in n?n.global:this==a,n.state)}function d(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=h&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*i+o[h&(o[a]=o[s=h&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(f(e[n],t-1))}catch(s){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(a.random(),r),"object"==typeof t&&t.exports){t.exports=c;try{s=I()}catch(y){}}else"function"==typeof define&&n("PDX0")?define(function(){return c}):a.seedrandom=c}("undefined"!=typeof self?self:e,[],Math)}}),O=f({"node_modules/.pnpm/seedrandom@3.0.5/node_modules/seedrandom/index.js"(e,t){var n=T(),r=C(),a=N(),s=M(),i=F(),o=R(),l=D();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=s,l.xor4096=i,l.tychei=o,t.exports=l}}),z=f({"(disabled):node_modules/.pnpm/string_decoder@1.1.1/node_modules/string_decoder/lib/string_decoder.js"(){}}),P=f({"(disabled):path"(){}}),$=f({"(disabled):worker_threads"(){}}),L=f({"(disabled):perf_hooks"(){}}),V=f({"node_modules/.pnpm/@tensorflow+tfjs-backend-wasm@3.7.0/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js"(e,t){var r,a=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){function t(){return M.buffer!=D&&te(M.buffer),O}function n(){return M.buffer!=D&&te(M.buffer),z}function a(){return M.buffer!=D&&te(M.buffer),V}function s(){return M.buffer!=D&&te(M.buffer),B}function i(){return M.buffer!=D&&te(M.buffer),W}var o,l,u=void 0!==(e=e||{})?e:{};u.ready=new Promise(function(e,t){o=e,l=t});var h,c={};for(h in u)u.hasOwnProperty(h)&&(c[h]=u[h]);var d=[],f=function(e,t){throw t},m=!1,g=!1,y=!1,b=!1;m="object"==typeof window,g="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=!m&&!y&&!g;var x=u.ENVIRONMENT_IS_PTHREAD||!1;x&&(D=u.buffer);var v,A,w,k,S,I="";function _(e){return u.locateFile?u.locateFile(e,I):I+e}if(y){var E;I=g?P().dirname(I)+"/":__dirname+"/",v=function(e,t){return k||(k=p("fs")),S||(S=P()),e=S.normalize(e),k.readFileSync(e,t?null:"utf8")},w=function(e){var t=v(e,!0);return t.buffer||(t=new Uint8Array(t)),H(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),d=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof un))throw e}),process.on("unhandledRejection",ve),f=function(e){process.exit(e)},u.inspect=function(){return"[Emscripten Module object]"};try{E=$()}catch(dn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),dn}global.Worker=E.Worker}else b?("undefined"!=typeof read&&(v=function(e){return read(e)}),w=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(H("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?d=scriptArgs:void 0!==arguments&&(d=arguments),"function"==typeof quit&&(f=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(m||g)&&(g?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==r&&r&&(I=r),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",y?(v=function(e,t){return k||(k=p("fs")),S||(S=P()),e=S.normalize(e),k.readFileSync(e,t?null:"utf8")},w=function(e){var t=v(e,!0);return t.buffer||(t=new Uint8Array(t)),H(t.buffer),t}):(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(w=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),A=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));y&&"undefined"==typeof performance&&(global.performance=L().performance);var T,C=u.print||console.log.bind(console),N=u.printErr||console.warn.bind(console);for(h in c)c.hasOwnProperty(h)&&(u[h]=c[h]);c=null,u.arguments&&(d=u.arguments),u.quit&&(f=u.quit),Atomics,Atomics,Atomics,u.wasmBinary&&(T=u.wasmBinary);var M,F,R=u.noExitRuntime||!0;"object"!=typeof WebAssembly&&ve("no native wasm support detected");var D,O,z,V,B,W,j=!1;function H(e,t){e||ve("Assertion failed: "+t)}function U(e){var t=u["_"+e];return H(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function G(e,t,n,r,a){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);Y(e,t=rn(n),n)}return t},array:function(e){var t=rn(e.length);return Q(e,t),t}},i=U(e),o=[],l=0;if(r)for(var u=0;u<r.length;u++){var h=s[n[u]];h?(0===l&&(l=tn()),o[u]=h(r[u])):o[u]=r[u]}var c,d=i.apply(null,o);return c=d,d="string"===t?X(c):"boolean"===t?Boolean(c):c,0!==l&&nn(l),d}function q(e,t,n,r){var a=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&a&&!r?U(e):function(){return G(e,t,n,arguments)}}function K(e,t,n){for(var r=t+n,a="";!(t>=r);){var s=e[t++];if(!s)return a;if(128&s){var i=63&e[t++];if(192!=(224&s)){var o=63&e[t++];if((s=224==(240&s)?(15&s)<<12|i<<6|o:(7&s)<<18|i<<12|o<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|i)}else a+=String.fromCharCode(s)}return a}function X(e,t){return e?K(n(),e,t):""}function Z(e,t,n,r){if(!(r>0))return 0;for(var a=n,s=n+r-1,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),o<=127){if(n>=s)break;t[n++]=o}else if(o<=2047){if(n+1>=s)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=s)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}return t[n]=0,n-a}function Y(e,t,r){return Z(e,n(),t,r)}function J(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function Q(e,n){t().set(e,n)}function ee(e,t){return e%t>0&&(e+=t-e%t),e}function te(e){D=e,u.HEAP8=O=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAP32=V=new Int32Array(e),u.HEAPU8=z=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAPU32=B=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=W=new Float64Array(e)}var ne,re=u.INITIAL_MEMORY||16777216;if(x)M=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)M=u.wasmMemory;else if(!((M=new WebAssembly.Memory({initial:re/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");M&&(D=M.buffer),re=D.byteLength,te(D);var ae=[],se=[],ie=[],oe=[],le=[];function ue(){if(!x){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)pe(u.preRun.shift());Fe(ae)}}function he(){x||Fe(se)}function ce(){x||Fe(ie)}function de(){if(!x){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)fe(u.postRun.shift());Fe(le)}}function pe(e){ae.unshift(e)}function fe(e){le.unshift(e)}x||se.push({func:function(){Bt()}});var me=0,ge=null,ye=null;function be(e){H(!x,"addRunDependency cannot be used in a pthread worker"),me++,u.monitorRunDependencies&&u.monitorRunDependencies(me)}function xe(e){if(me--,u.monitorRunDependencies&&u.monitorRunDependencies(me),0==me&&(null!==ge&&(clearInterval(ge),ge=null),ye)){var t=ye;ye=null,t()}}function ve(e){u.onAbort&&u.onAbort(e),x&&console.error("Pthread aborting at "+(new Error).stack),N(e+=""),j=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw l(t),t}function Ae(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}u.preloadedImages={},u.preloadedAudios={};var we="data:application/octet-stream;base64,";function ke(e){return Ae(e,we)}var Se="file://";function Ie(e){return Ae(e,Se)}var _e="tfjs-backend-wasm-threaded-simd.wasm";function Ee(e){try{if(e==_e&&T)return new Uint8Array(T);if(w)return w(e);throw"both async and sync fetching of the wasm failed"}catch(t){ve(t)}}function Te(){if(!T&&(m||g)){if("function"==typeof fetch&&!Ie(_e))return fetch(_e,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+_e+"'";return e.arrayBuffer()}).catch(function(){return Ee(_e)});if(A)return new Promise(function(e,t){A(_e,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return Ee(_e)})}function Ce(){var e={a:Vt};function t(e,t){if(u.asm=e.exports,ne=u.asm.F,F=t,!x){var n=$e.unusedWorkers.length;$e.unusedWorkers.forEach(function(e){$e.loadWasmModuleToWorker(e,function(){--n||xe()})})}}function n(e){t(e.instance,e.module)}function r(t){return Te().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){N("failed to asynchronously prepare wasm: "+e),ve(e)})}if(x||be(),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(dn){return N("Module.instantiateWasm callback failed with error: "+dn),!1}return(T||"function"!=typeof WebAssembly.instantiateStreaming||ke(_e)||Ie(_e)||"function"!=typeof fetch?r(n):fetch(_e,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(n,function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)})})).catch(l),{}}ke(_e)||(_e=_(_e));var Ne={9816:function(){throw"Canceled!"},9834:function(e,t){setTimeout(function(){Zt(e,t)},0)}};function Me(){$e.initRuntime()}function Fe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?ne.get(n)():ne.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(u)}}function Re(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ln>>2),s=0;if(r==e&&Atomics.compareExchange(a(),ln>>2,r,0)==r&&(s=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+s;throw"Atomics.notify returned an unexpected value "+i}function De(e){if(x)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=$e.pthreads[e];t.worker.terminate(),$e.freeThreadData(t),$e.runningWorkers.splice($e.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function Oe(e){if(x)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";$e.pthreads[e].worker.postMessage({cmd:"cancel"})}function ze(e){if(x)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=$e.pthreads[e];t&&(a()[e+12>>2]=0,$e.returnWorkerToPool(t.worker))}u._emscripten_futex_wake=Re;var Pe,$e={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=Math.min(4,Math.max(1,(navigator.hardwareConcurrency||1)/2)),t=0;t<e;++t)$e.allocateUnusedWorker()},initRuntime:function(){for(var e=Wt(228),t=0;t<57;++t)s()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=Wt(512);for(t=0;t<128;++t)s()[r/4+t]=0;Atomics.store(s(),e+100>>2,r),Atomics.store(s(),e+40>>2,e),en(e,!g,1),Xt(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;$e.threadExitHandlers.length>0;)$e.threadExitHandlers.pop()();x&&Gt()&&qt()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(s(),e+56>>2,1),Atomics.store(s(),e+60>>2,0),$e.runExitHandlers(),Atomics.store(s(),e+4>>2,t),Atomics.store(s(),e+0>>2,1),Re(e+0,2147483647),en(0,0,0)},threadExit:function(e){var t=Gt();t&&($e.runExitHandlersAndDeinitThread(t,e),x&&postMessage({cmd:"exit"}))},threadCancel:function(){$e.runExitHandlersAndDeinitThread(Gt(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in $e.pthreads)(r=$e.pthreads[e])&&r.worker&&$e.returnWorkerToPool(r.worker);$e.pthreads={};for(var t=0;t<$e.unusedWorkers.length;++t)(n=$e.unusedWorkers[t]).terminate();for($e.unusedWorkers=[],t=0;t<$e.runningWorkers.length;++t){var n,r;$e.freeThreadData(r=(n=$e.runningWorkers[t]).pthread),n.terminate()}$e.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,jt(t),jt(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&jt(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){$e.runWithoutMainThreadQueuedCalls(function(){delete $e.pthreads[e.pthread.threadInfoStruct],$e.unusedWorkers.push(e),$e.runningWorkers.splice($e.runningWorkers.indexOf(e),1),$e.freeThreadData(e.pthread),e.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(e){a()[on>>2]=0;try{e()}finally{a()[on>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&($e.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=Gt()){var i=$e.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void($e.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Kt();else if("spawnThread"===a)Ot(n.data);else if("cleanupThread"===a)ze(r.thread);else if("killThread"===a)De(r.thread);else if("cancelThread"===a)Oe(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)C("Thread "+r.threadId+": "+r.text);else if("printErr"===a)N("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(s(),e.pthread.threadInfoStruct+64>>2)&&$e.returnWorkerToPool(e);else if("exitProcess"===a)try{cn(r.returnCode)}catch(o){if(o instanceof un)return;throw o}else"cancelDone"===a?$e.returnWorkerToPool(e):"objectTransfer"===a?$e.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):N("worker sent an unknown command "+a);$e.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){N("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},y&&(e.on("message",function(t){e.onmessage({data:t})}),e.on("error",function(t){e.onerror(t)}),e.on("exit",function(e){})),e.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:M,wasmModule:F})},allocateUnusedWorker:function(){var e=_("tfjs-backend-wasm-threaded-simd.worker.js");$e.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==$e.unusedWorkers.length&&($e.allocateUnusedWorker(),$e.loadWasmModuleToWorker($e.unusedWorkers[0])),$e.unusedWorkers.length>0?$e.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function Le(e,t){an(e,t),nn(e)}function Ve(){return R}function Be(e,t){return ne.get(e)(t)}function We(e,t,n,r){ve("Assertion failed: "+X(e)+", at: "+[t?X(t):"unknown filename",n,r?X(r):"unknown function"])}function je(e,t){_main(e,t)}function He(e){return a()[Ht()>>2]=e,e}function Ue(e,t){if(x)return Qe(1,1,e,t)}function Ge(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(x)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=$e.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1}function qe(){ve()}function Ke(e,t,n){var r=nt(t,n);return Ne[e].apply(null,r)}function Xe(e,t){}function Ze(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(m){if(Atomics.load(a(),e>>2)!=n)return-6;var s=performance.now(),i=s+r;for(Atomics.exchange(a(),ln>>2,e);;){if((s=performance.now())>i)return Atomics.exchange(a(),ln>>2,0),-73;if(0==Atomics.exchange(a(),ln>>2,0))break;if(Kt(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ln>>2,e)}return 0}var o=Atomics.wait(a(),e>>2,n,r);if("timed-out"===o)return-73;if("not-equal"===o)return-6;if("ok"===o)return 0;throw"Atomics.wait returned an unexpected value "+o}function Ye(e,t,r){n().copyWithin(e,t,t+r)}function Je(){return y?p("os").cpus().length:navigator.hardwareConcurrency}function Qe(e,t){for(var n=arguments.length-2,r=tn(),a=n,s=rn(8*a),o=s>>3,l=0;l<n;l++){var u=arguments[2+l];i()[o+l]=u}var h=Jt(e,a,s,t);return nn(r),h}u.establishStackSpace=Le,u.getNoExitRuntime=Ve,u.invokeEntryPoint=Be,Pe=y?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:x?function(){return performance.now()-u.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var et=[],tt=[];function nt(e,t){var r;for(tt.length=0,t>>=2;r=n()[e++];){var s=r<105;s&&1&t&&t++,tt.push(s?i()[t++>>1]:a()[t]),++t}return tt}function rt(e,t,n){et.length=t;for(var r=n>>3,a=0;a<t;a++)et[a]=i()[r+a];return(e<0?Ne[-e-1]:Lt[e]).apply(null,et)}function at(){return n().length}function st(e){try{return M.grow(e-D.byteLength+65535>>>16),te(M.buffer),1}catch(dn){}}function it(e){var t=at();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),st(Math.min(n,ee(Math.max(e,a),65536))))return!0}return!1}var ot={inEventHandler:0,removeAllEventListeners:function(){for(var e=ot.eventHandlers.length-1;e>=0;--e)ot._removeHandler(e);ot.eventHandlers=[],ot.deferredCalls=[]},registerRemoveEventListeners:function(){ot.removeEventListenersRegistered||(oe.push(ot.removeAllEventListeners),ot.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in ot.deferredCalls){var s=ot.deferredCalls[a];if(s.targetFunction==e&&r(s.argsList,n))return}ot.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),ot.deferredCalls.sort(function(e,t){return e.precedence<t.precedence})},removeDeferredCalls:function(e){for(var t=0;t<ot.deferredCalls.length;++t)ot.deferredCalls[t].targetFunction==e&&(ot.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return ot.inEventHandler&&ot.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(ot.canPerformEventHandlerRequests())for(var e=0;e<ot.deferredCalls.length;++e){var t=ot.deferredCalls[e];ot.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<ot.eventHandlers.length;++n)ot.eventHandlers[n].target!=e||t&&t!=ot.eventHandlers[n].eventTypeString||ot._removeHandler(n--)},_removeHandler:function(e){var t=ot.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),ot.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++ot.inEventHandler,ot.currentEventHandler=e,ot.runDeferredCalls(),e.handlerFunc(t),ot.runDeferredCalls(),--ot.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),ot.eventHandlers.push(e),ot.registerRemoveEventListeners();else for(var n=0;n<ot.eventHandlers.length;++n)ot.eventHandlers[n].target==e.target&&ot.eventHandlers[n].eventTypeString==e.eventTypeString&&ot._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,s){var i=tn(),o=rn(12);a()[o>>2]=n,a()[o+4>>2]=r,a()[o+8>>2]=s,Qt(0,e,637534208,t,r,o),nn(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return $e.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function lt(e){var t=J(e)+1,n=Wt(t);return Y(e,n,t),n}function ut(e,t,n,r){var s=tn(),i=rn(12),o=0;t&&(o=lt(t)),a()[i>>2]=o,a()[i+4>>2]=n,a()[i+8>>2]=r,Qt(0,e,657457152,0,o,i),nn(s)}function ht(e,t,n,r){ut(e,t=t?X(t):"",n,r)}function ct(e){return e>2?X(e):e}var dt=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function pt(e){return e=ct(e),dt[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function ft(e){return pt(e)}function mt(e,t,n){var r=ft(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(ht(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var s=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);s=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,s&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function gt(e,t,n){return x?Qe(2,1,e,t,n):mt(e,t,n)}function yt(e,t,n){return ft(e)?mt(e,t,n):gt(e,t,n)}function bt(e){}function xt(e,t){}function vt(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,s){t.drawElementsInstancedANGLE(e,n,r,a,s)},1}function At(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function wt(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function kt(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var St={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){St.lastError||(St.lastError=e)},getNewId:function(e){for(var t=St.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var s="",i=0;i<t;++i){var o=r?a()[r+4*i>>2]:-1;s+=X(a()[n+4*i>>2],o<0?void 0:o)}return s},createContext:function(e,t){var n=e.getContext("webgl",t);return n?St.registerContext(n,t):0},registerContext:function(e,t){var n=Wt(8);a()[n+4>>2]=Gt();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),St.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&St.initExtensions(r),n},makeContextCurrent:function(e){return St.currentContext=St.contexts[e],u.ctx=Tt=St.currentContext&&St.currentContext.GLctx,!(e&&!Tt)},getContext:function(e){return St.contexts[e]},deleteContext:function(e){St.currentContext===St.contexts[e]&&(St.currentContext=null),"object"==typeof ot&&ot.removeAllHandlersOnTarget(St.contexts[e].GLctx.canvas),St.contexts[e]&&St.contexts[e].GLctx.canvas&&(St.contexts[e].GLctx.canvas.GLctxObject=void 0),jt(St.contexts[e].handle),St.contexts[e]=null},initExtensions:function(e){if(e||(e=St.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;vt(t),At(t),wt(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),kt(t),(t.getSupportedExtensions()||[]).forEach(function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)})}},populateUniformTable:function(e){for(var t=St.programs[e],n=St.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Tt.getProgramParameter(t,35718),s=0;s<a;++s){var i=Tt.getActiveUniform(t,s),o=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,o.length+1),"]"==o.slice(-1)&&(o=o.slice(0,o.lastIndexOf("[")));var l=Tt.getUniformLocation(t,o);if(l){var u=St.getNewId(St.uniforms);r[o]=[i.size,u],St.uniforms[u]=l;for(var h=1;h<i.size;++h)l=Tt.getUniformLocation(t,o+"["+h+"]"),u=St.getNewId(St.uniforms),St.uniforms[u]=l}}}},It=["default","low-power","high-performance"];function _t(e,t){var n=t>>2,r=a()[n+6],s={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:It[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=ft(e);return i?s.explicitSwapControl?0:St.createContext(i,s):0}function Et(e,t){return _t(e,t)}var Tt,Ct={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Ct.buffers[e];0===t||10===t?((1===e?C:N)(K(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Ct.varargs+=4,a()[Ct.varargs-4>>2]},getStr:function(e){return X(e)},get64:function(e,t){return e}};function Nt(e){return x?Qe(3,1,e):0}function Mt(e,t,n,r,a){if(x)return Qe(4,1,e,t,n,r,a)}function Ft(e,t,r,s){if(x)return Qe(5,1,e,t,r,s);for(var i=0,o=0;o<r;o++){for(var l=a()[t+8*o>>2],u=a()[t+(8*o+4)>>2],h=0;h<u;h++)Ct.printChar(e,n()[l+h]);i+=u}return a()[s>>2]=i,0}function Rt(e){var t=$e.threadExitHandlers.pop();e&&t()}function Dt(e,t){$e.threadExitHandlers.push(function(){ne.get(e)(t)})}function Ot(e){if(x)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=$e.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";$e.runningWorkers.push(t);for(var n=Wt(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,o=$e.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},l=o.threadInfoStruct>>2;Atomics.store(s(),l+16,e.detached),Atomics.store(s(),l+25,n),Atomics.store(s(),l+10,o.threadInfoStruct),Atomics.store(s(),l+20,e.stackSize),Atomics.store(s(),l+19,i),Atomics.store(s(),l+26,e.stackSize),Atomics.store(s(),l+28,i),Atomics.store(s(),l+29,e.detached);var u=Ut()+40;Atomics.store(s(),l+43,u),t.pthread=o;var h={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){h.time=performance.now(),t.postMessage(h,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function zt(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return N("pthread_create called with a null thread pointer!"),28;var i=[];if(x&&0===i.length)return Yt(687865856,e,t,n,r);var o=0,l=0,u=0;t&&-1!=t?(o=a()[t>>2],o+=81920,l=a()[t+8>>2],u=0!==a()[t+12>>2]):o=2097152;var h=0==l;h?l=sn(16,o):H((l-=o)>0);for(var c=Wt(228),d=0;d<57;++d)s()[(c>>2)+d]=0;a()[e>>2]=c,a()[c+12>>2]=c;var p=c+152;a()[p>>2]=p;var f={stackBase:l,stackSize:o,allocatedOwnStack:h,detached:u,startRoutine:n,pthread_ptr:c,arg:r,transferList:i};return x?(f.cmd="spawnThread",postMessage(f,i)):Ot(f),0}function Pt(e){if(x)return Qe(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return He(28),-1}x||$e.initMainThreadBlock();var $t,Lt=[null,Ue,gt,Nt,Mt,Ft,Pt],Vt={e:We,r:je,x:Ge,b:qe,y:Ke,j:Xe,c:Ze,d:Re,f:Pe,p:Ye,z:Je,u:rt,q:it,v:yt,i:bt,t:xt,w:Et,m:Nt,n:Mt,g:Ft,o:Me,a:M||u.wasmMemory,k:Rt,l:Dt,h:zt,s:Pt},Bt=(Ce(),u.___wasm_call_ctors=function(){return(Bt=u.___wasm_call_ctors=u.asm.A).apply(null,arguments)}),Wt=(u._init=function(){return(u._init=u.asm.B).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.C).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.D).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.E).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.G).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.H).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.I).apply(null,arguments)},u._All=function(){return(u._All=u.asm.J).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.K).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.L).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.M).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.N).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.O).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.P).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Q).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.R).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.S).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.T).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.U).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.V).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.W).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.X).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Y).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.Z).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm._).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.$).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.aa).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.ba).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.ca).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.da).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.ea).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.fa).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.ga).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.ha).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.ia).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.ja).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.ka).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.la).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.ma).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.na).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.oa).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.pa).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.qa).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.ra).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.sa).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.ta).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.ua).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.va).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.wa).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.xa).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.ya).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.za).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.Aa).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Ba).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Ca).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Da).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.Ea).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Fa).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Ga).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.Ha).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Ia).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.Ja).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Ka).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.La).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.Ma).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.Na).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Oa).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Pa).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Qa).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Ra).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Sa).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.Ta).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Ua).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.Va).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Wa).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Xa).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Ya).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Za).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm._a).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.$a).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.ab).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.bb).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm.cb).apply(null,arguments)},u._malloc=function(){return(Wt=u._malloc=u.asm.db).apply(null,arguments)}),jt=u._free=function(){return(jt=u._free=u.asm.eb).apply(null,arguments)},Ht=u.___errno_location=function(){return(Ht=u.___errno_location=u.asm.fb).apply(null,arguments)},Ut=u._emscripten_get_global_libc=function(){return(Ut=u._emscripten_get_global_libc=u.asm.gb).apply(null,arguments)},Gt=u._pthread_self=function(){return(Gt=u._pthread_self=u.asm.hb).apply(null,arguments)},qt=u.___pthread_tsd_run_dtors=function(){return(qt=u.___pthread_tsd_run_dtors=u.asm.ib).apply(null,arguments)},Kt=u._emscripten_main_thread_process_queued_calls=function(){return(Kt=u._emscripten_main_thread_process_queued_calls=u.asm.jb).apply(null,arguments)},Xt=(u._emscripten_current_thread_process_queued_calls=function(){return(u._emscripten_current_thread_process_queued_calls=u.asm.kb).apply(null,arguments)},u._emscripten_register_main_browser_thread_id=function(){return(Xt=u._emscripten_register_main_browser_thread_id=u.asm.lb).apply(null,arguments)}),Zt=u.__emscripten_do_dispatch_to_thread=function(){return(Zt=u.__emscripten_do_dispatch_to_thread=u.asm.mb).apply(null,arguments)},Yt=u._emscripten_sync_run_in_main_thread_4=function(){return(Yt=u._emscripten_sync_run_in_main_thread_4=u.asm.nb).apply(null,arguments)},Jt=u._emscripten_run_in_main_runtime_thread_js=function(){return(Jt=u._emscripten_run_in_main_runtime_thread_js=u.asm.ob).apply(null,arguments)},Qt=u.__emscripten_call_on_thread=function(){return(Qt=u.__emscripten_call_on_thread=u.asm.pb).apply(null,arguments)},en=(u._emscripten_tls_init=function(){return(u._emscripten_tls_init=u.asm.qb).apply(null,arguments)},u.__emscripten_thread_init=function(){return(en=u.__emscripten_thread_init=u.asm.rb).apply(null,arguments)}),tn=u.stackSave=function(){return(tn=u.stackSave=u.asm.sb).apply(null,arguments)},nn=u.stackRestore=function(){return(nn=u.stackRestore=u.asm.tb).apply(null,arguments)},rn=u.stackAlloc=function(){return(rn=u.stackAlloc=u.asm.ub).apply(null,arguments)},an=u._emscripten_stack_set_limits=function(){return(an=u._emscripten_stack_set_limits=u.asm.vb).apply(null,arguments)},sn=u._memalign=function(){return(sn=u._memalign=u.asm.wb).apply(null,arguments)},on=u.__emscripten_allow_main_runtime_queued_calls=9808,ln=u.__emscripten_main_thread_futex=11432;function un(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function hn(e){if(e=e||d,!(me>0)){if(x)return o(u),he(),void postMessage({cmd:"loaded"});ue(),me>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),t()},1)):t())}function t(){$t||($t=!0,u.calledRun=!0,j||(he(),ce(),o(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),de()))}}function cn(e,t){if(!t||!R||0!==e){if(!t&&x)throw postMessage({cmd:"exitProcess",returnCode:e}),new un(e);R||($e.terminateAllThreads(),u.onExit&&u.onExit(e),j=!0),f(e,new un(e))}}if(u.cwrap=q,u.PThread=$e,u.PThread=$e,u.wasmMemory=M,u.ExitStatus=un,ye=function e(){$t||hn(),$t||(ye=e)},u.run=hn,u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return x&&(R=!1,$e.initWorker()),hn(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=a:"function"==typeof define&&n("PDX0")?define([],function(){return a}):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=a)}}),B=f({"node_modules/.pnpm/@tensorflow+tfjs-backend-wasm@3.7.0/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js"(e,t){var r,a=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var t,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise(function(e,r){t=e,n=r});var s,i={};for(s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);var o=[],l=!1,u=!1,h=!1,c=!1;l="object"==typeof window,u="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=!l&&!h&&!u;var d,f,m,g,y,b="";function x(e){return a.locateFile?a.locateFile(e,b):b+e}h?(b=u?P().dirname(b)+"/":__dirname+"/",d=function(e,t){return g||(g=p("fs")),y||(y=P()),e=y.normalize(e),g.readFileSync(e,t?null:"utf8")},m=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),I(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),o=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof De))throw e}),process.on("unhandledRejection",ae),a.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(d=function(e){return read(e)}),m=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(I("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||u)&&(u?b=self.location.href:"undefined"!=typeof document&&document.currentScript&&(b=document.currentScript.src),r&&(b=r),b=0!==b.indexOf("blob:")?b.substr(0,b.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,A,w=a.print||console.log.bind(console),k=a.printErr||console.warn.bind(console);for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);i=null,a.arguments&&(o=a.arguments),a.wasmBinary&&(v=a.wasmBinary),"object"!=typeof WebAssembly&&ae("no native wasm support detected");var S=!1;function I(e,t){e||ae("Assertion failed: "+t)}function _(e){var t=a["_"+e];return I(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function E(e,t,n,r,a){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);$(e,t=Re(n),n)}return t},array:function(e){var t=Re(e.length);return L(e,t),t}},i=_(e),o=[],l=0;if(r)for(var u=0;u<r.length;u++){var h=s[n[u]];h?(0===l&&(l=Me()),o[u]=h(r[u])):o[u]=r[u]}var c,d=i.apply(null,o);return c=d,d="string"===t?O(c):"boolean"===t?Boolean(c):c,0!==l&&Fe(l),d}function T(e,t,n,r){var a=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&a&&!r?_(e):function(){return E(e,t,n,arguments)}}var C,N,M,F,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var s="";t<a;){var i=e[t++];if(128&i){var o=63&e[t++];if(192!=(224&i)){var l=63&e[t++];if((i=224==(240&i)?(15&i)<<12|o<<6|l:(7&i)<<18|o<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(i);else{var u=i-65536;s+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else s+=String.fromCharCode((31&i)<<6|o)}else s+=String.fromCharCode(i)}return s}function O(e,t){return e?D(M,e,t):""}function z(e,t,n,r){if(!(r>0))return 0;for(var a=n,s=n+r-1,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),o<=127){if(n>=s)break;t[n++]=o}else if(o<=2047){if(n+1>=s)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=s)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}return t[n]=0,n-a}function $(e,t,n){return z(e,M,t,n)}function L(e,t){N.set(e,t)}function V(e,t){return e%t>0&&(e+=t-e%t),e}function B(e){C=e,a.HEAP8=N=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=F=new Int32Array(e),a.HEAPU8=M=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var W,j=[],H=[],U=[],G=[];function q(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Y(a.preRun.shift());fe(j)}function K(){fe(H)}function X(){fe(U)}function Z(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)J(a.postRun.shift());fe(G)}function Y(e){j.unshift(e)}function J(e){G.unshift(e)}H.push({func:function(){Ce()}});var Q=0,ee=null,te=null;function ne(e){Q++,a.monitorRunDependencies&&a.monitorRunDependencies(Q)}function re(e){if(Q--,a.monitorRunDependencies&&a.monitorRunDependencies(Q),0==Q&&(null!==ee&&(clearInterval(ee),ee=null),te)){var t=te;te=null,t()}}function ae(e){a.onAbort&&a.onAbort(e),k(e+=""),S=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function se(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};var ie="data:application/octet-stream;base64,";function oe(e){return se(e,ie)}var le="file://";function ue(e){return se(e,le)}var he="tfjs-backend-wasm.wasm";function ce(e){try{if(e==he&&v)return new Uint8Array(v);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}catch(t){ae(t)}}function de(){if(!v&&(l||u)){if("function"==typeof fetch&&!ue(he))return fetch(he,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+he+"'";return e.arrayBuffer()}).catch(function(){return ce(he)});if(f)return new Promise(function(e,t){f(he,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return ce(he)})}function pe(){var e={a:Te};function t(e,t){a.asm=e.exports,B((A=a.asm.i).buffer),W=a.asm.o,re()}function r(e){t(e.instance)}function s(t){return de().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){k("failed to asynchronously prepare wasm: "+e),ae(e)})}if(ne(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(i){return k("Module.instantiateWasm callback failed with error: "+i),!1}return(v||"function"!=typeof WebAssembly.instantiateStreaming||oe(he)||ue(he)||"function"!=typeof fetch?s(r):fetch(he,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return k("wasm streaming compile failed: "+e),k("falling back to ArrayBuffer instantiation"),s(r)})})).catch(n),{}}function fe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?W.get(n)():W.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function me(){ae()}function ge(e,t,n){M.copyWithin(e,t,t+n)}function ye(){return M.length}function be(e){try{return A.grow(e-C.byteLength+65535>>>16),B(A.buffer),1}catch(t){}}function xe(e){var t=ye(),n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),be(Math.min(n,V(Math.max(e,a),65536))))return!0}return!1}oe(he)||(he=x(he));var ve={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ve.buffers[e];0===t||10===t?((1===e?w:k)(D(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ve.varargs+=4,F[ve.varargs-4>>2]},getStr:function(e){return O(e)},get64:function(e,t){return e}};function Ae(e){return 0}function we(e,t,n,r,a){}function ke(e,t,n,r){for(var a=0,s=0;s<n;s++){for(var i=F[t+8*s>>2],o=F[t+(8*s+4)>>2],l=0;l<o;l++)ve.printChar(e,M[i+l]);a+=o}return F[r>>2]=a,0}function Se(){return 6}function Ie(e){return F[Ne()>>2]=e,e}function _e(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ie(28),-1}var Ee,Te={a:me,d:ge,e:xe,f:Ae,c:we,b:ke,g:Se,h:_e},Ce=(pe(),a.___wasm_call_ctors=function(){return(Ce=a.___wasm_call_ctors=a.asm.j).apply(null,arguments)}),Ne=(a._init=function(){return(a._init=a.asm.k).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.l).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.m).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.n).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.p).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.q).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.r).apply(null,arguments)},a._All=function(){return(a._All=a.asm.s).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.t).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.u).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.v).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.w).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.x).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.y).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.z).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.A).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.B).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.C).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.D).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.E).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.F).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.G).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.H).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.I).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.J).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.K).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.L).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.M).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.N).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.O).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.P).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.Q).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.R).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.S).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.T).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.U).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.V).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.W).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.X).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.Y).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.Z).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm._).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.$).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.aa).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.ba).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.ca).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.da).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.ea).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.fa).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ga).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ha).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.ia).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ja).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.ka).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.la).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.ma).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.na).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.oa).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.pa).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.qa).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.ra).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.sa).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.ta).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.ua).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.va).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.wa).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.xa).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.ya).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.za).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Aa).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Ba).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.Ca).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Da).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.Ea).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Fa).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ga).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Ha).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ia).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Ja).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.Ka).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.La).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Ma).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Na).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Oa).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Pa).apply(null,arguments)},a.___errno_location=function(){return(Ne=a.___errno_location=a.asm.Qa).apply(null,arguments)}),Me=a.stackSave=function(){return(Me=a.stackSave=a.asm.Ra).apply(null,arguments)},Fe=a.stackRestore=function(){return(Fe=a.stackRestore=a.asm.Sa).apply(null,arguments)},Re=a.stackAlloc=function(){return(Re=a.stackAlloc=a.asm.Ta).apply(null,arguments)};function De(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Oe(e){function n(){Ee||(Ee=!0,a.calledRun=!0,S||(K(),X(),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),Z()))}e=e||o,Q>0||(q(),Q>0||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),n()},1)):n()))}if(a.cwrap=T,te=function e(){Ee||Oe(),Ee||(te=e)},a.run=Oe,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Oe(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=a:"function"==typeof define&&n("PDX0")?define([],function(){return a}):"object"==typeof e&&(e.WasmBackendModule=a)}}),W=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},j=class{refCount(e){return H("refCount")}incRef(e){return H("incRef")}timerAvailable(){return!0}time(e){return H("time")}read(e){return H("read")}readSync(e){return H("readSync")}numDataIds(){return H("numDataIds")}disposeData(e,t){return H("disposeData")}write(e,t,n){return H("write")}move(e,t,n,r,a){return H("move")}memory(){return H("memory")}floatPrecision(){return H("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return H("dispose")}};function H(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function U(e){let t=e.length,n=0,r=0;for(;t>0;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function G(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n,r,a=e.length,s=0;for(;a>0;)s=Math.random()*a|0,a--,n=e[a],r=t[a],e[a]=e[s],t[a]=t[s],e[s]=n,t[s]=r}function q(e,t,n){return Math.max(e,Math.min(t,n))}function K(e){return e%2==0?e:e+1}function X(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Z(e,t){const n=Math.random();return t*n+(1-n)*e}function Y(e,t){let n=0;for(let r=0;r<e.length;r++){const a=Number(e[r])-Number(t[r]);n+=a*a}return n}function J(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Q(e,t,n=""){J(ae(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function ee(e){J(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function te(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||xe(e)&&!n)for(let r=0;r<e.length;++r)te(e[r],t,n);else t.push(e);return t}function ne(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function re(e){return 0===e.length}function ae(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function se(e){return e%1==0}function ie(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function oe(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function le(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return U(t),t}function ue(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function he(e,t=(e=>0),n){return new Promise((r,a)=>{let s=0;const i=()=>{if(e())return void r();s++;const o=t(s);null!=n&&s>=n?a():setTimeout(i,o)};i()})}function ce(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const a=e.slice();return a[r]=t/n,a}function de(e,t){const n=t.length;return J((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),J(e.every(e=>se(e)),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function pe(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:de(t,e).sort();let i=0;for(let o=0;o<e.length;++o){if(null!=s){if(s[i]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==s[i]||s[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),s[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function fe(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function me(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function ge(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function ye(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function be(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function xe(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function ve(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function Ae(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function we(e){return"string"==typeof e||e instanceof String}function ke(e){return"boolean"==typeof e}function Se(e){return"number"==typeof e}function Ie(e){return Array.isArray(e)?Ie(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Se(e)?"float32":we(e)?"string":ke(e)?"bool":"float32"}function _e(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ee(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function Te(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Ce(e,t,n,r=!1){const a=new Array;if(1===t.length){const s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{const s=t[0],i=t.slice(1),o=i.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<s;t++)a[t]=Ce(e+t*o,i,n,r)}return a}function Ne(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Ce(0,e,t,n)}function Me(e,t){const n=Fe(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Fe(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Re(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Ne(e,new Float32Array(n));if("int32"===t)return Ne(e,new Int32Array(n));if("bool"===t)return Ne(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function De(e){e.forEach(t=>{J(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Oe(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function ze(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Pe(e){return e&&e.then&&"function"==typeof e.then}var $e=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Le,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Pe(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);"tfjsflags"in e&&e.tfjsflags.split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)})}};function Le(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("="))),t}function Ve(){return We}var Be,We=null;function je(){if(null==Be){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Be=e}return Be}function He(e,t){const n=function(){const e=je();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}var Ue="Abs",Ge="Acos",qe="Acosh",Ke="Add",Xe="AddN",Ze="All",Ye="Any",Je="ArgMax",Qe="ArgMin",et="Asin",tt="Asinh",nt="Atan",rt="Atanh",at="Atan2",st="AvgPool",it="AvgPoolGrad",ot="AvgPool3D",lt="AvgPool3DGrad",ut="BatchMatMul",ht="BatchToSpaceND",ct="Bincount",dt="BroadcastTo",pt="Cast",ft="Ceil",mt="ClipByValue",gt="Complex",yt="ComplexAbs",bt="Concat",xt="Conv2D",vt="Conv2DBackpropFilter",At="Conv2DBackpropInput",wt="Conv3D",kt="Conv3DBackpropFilterV2",St="Conv3DBackpropInputV2",It="Cos",_t="Cosh",Et="Cumsum",Tt="CropAndResize",Ct="DenseBincount",Nt="DepthToSpace",Mt="DepthwiseConv2dNative",Ft="DepthwiseConv2dNativeBackpropFilter",Rt="DepthwiseConv2dNativeBackpropInput",Dt="Diag",Ot="Dilation2D",zt="Dilation2DBackpropInput",Pt="Dilation2DBackpropFilter",$t="RealDiv",Lt="Einsum",Vt="Elu",Bt="EluGrad",Wt="Erf",jt="Equal",Ht="Exp",Ut="ExpandDims",Gt="Expm1",qt="FFT",Kt="Fill",Xt="FlipLeftRight",Zt="Floor",Yt="FloorDiv",Jt="FusedBatchNorm",Qt="GatherV2",en="GatherNd",tn="Greater",nn="GreaterEqual",rn="Identity",an="IFFT",sn="Imag",on="IsFinite",ln="IsInf",un="IsNan",hn="LeakyRelu",cn="Less",dn="LessEqual",pn="LinSpace",fn="Log",mn="Log1p",gn="LogicalAnd",yn="LogicalNot",bn="LogicalOr",xn="LogSoftmax",vn="LRN",An="LRNGrad",wn="Max",kn="Maximum",Sn="MaxPool",In="MaxPoolGrad",_n="MaxPool3D",En="MaxPool3DGrad",Tn="MaxPoolWithArgmax",Cn="Mean",Nn="Min",Mn="Minimum",Fn="MirrorPad",Rn="Mod",Dn="Multinomial",On="Multiply",zn="Neg",Pn="NotEqual",$n="NonMaxSuppressionV3",Ln="NonMaxSuppressionV4",Vn="NonMaxSuppressionV5",Bn="OnesLike",Wn="OneHot",jn="Pack",Hn="PadV2",Un="Pool",Gn="Pow",qn="Prelu",Kn="Prod",Xn="Range",Zn="Real",Yn="Reciprocal",Jn="Relu",Qn="Reshape",er="ResizeNearestNeighbor",tr="ResizeNearestNeighborGrad",nr="ResizeBilinear",rr="ResizeBilinearGrad",ar="Relu6",sr="Reverse",ir="Round",or="Rsqrt",lr="ScatterNd",ur="Select",hr="Selu",cr="Slice",dr="Sin",pr="Sinh",fr="Sign",mr="Sigmoid",gr="Softplus",yr="Sqrt",br="Sum",xr="SpaceToBatchND",vr="SplitV",Ar="Softmax",wr="SparseFillEmptyRows",kr="SparseReshape",Sr="SparseSegmentMean",Ir="SparseSegmentSum",_r="SparseToDense",Er="SquaredDifference",Tr="Square",Cr="StridedSlice",Nr="StringNGrams",Mr="StringSplit",Fr="StringToHashBucketFast",Rr="Sub",Dr="Tan",Or="Tanh",zr="Tile",Pr="TopK",$r="Transform",Lr="Transpose",Vr="Unique",Br="Unpack",Wr="UnsortedSegmentSum",jr="ZerosLike",Hr="Step",Ur="FromPixels",Gr="RotateWithOffset",qr="_FusedMatMul",Kr="FusedConv2D",Xr="FusedDepthwiseConv2D",Zr=He("kernelRegistry",()=>new Map),Yr=He("gradRegistry",()=>new Map);function Jr(e,t){const n=ia(e,t);return Zr.get(n)}function Qr(e){return Yr.get(e)}function ea(e){const t=Zr.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[s,i]=a,[o]=s.split("_");o===e&&n.push(i)}return n}function ta(e){const{kernelName:t,backendName:n}=e,r=ia(t,n);Zr.has(r)&&console.warn(`The kernel '${t}' for backend '${n}' is already registered`),Zr.set(r,e)}function na(e){const{kernelName:t}=e;Yr.has(t)&&Ve().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),Yr.set(t,e)}function ra(e,t){const n=ia(e,t);if(!Zr.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);Zr.delete(n)}function aa(e){if(!Yr.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);Yr.delete(e)}function sa(e,t){ea(e).forEach(e=>{ta(Object.assign({},e,{backendName:t}))})}function ia(e,t){return`${t}_${e}`}var oa={};m(oa,{arraysEqual:()=>ae,assert:()=>J,assertNonNegativeIntegerDimensions:()=>De,assertNonNull:()=>ee,assertShapesMatch:()=>Q,bytesFromStringArray:()=>Ae,bytesPerElement:()=>ve,checkConversionForErrors:()=>ge,clamp:()=>q,computeStrides:()=>Te,createScalarValue:()=>wa,createShuffledIndices:()=>le,decodeString:()=>Ea,distSquared:()=>Y,encodeString:()=>_a,fetch:()=>Ia,fingerPrint64:()=>Aa,flatten:()=>te,getArrayFromDType:()=>me,getTypedArrayFromDType:()=>fe,hasEncodingLoss:()=>be,hexToLong:()=>ha,indexToLoc:()=>ze,inferDtype:()=>Ie,inferFromImplicitShape:()=>ce,isBoolean:()=>ke,isFunction:()=>_e,isInt:()=>se,isNumber:()=>Se,isPromise:()=>Pe,isScalarShape:()=>re,isString:()=>we,isTypedArray:()=>xe,isValidDtype:()=>ye,locToIndex:()=>Oe,makeOnesTypedArray:()=>Me,makeZerosNestedTypedArray:()=>Re,makeZerosTypedArray:()=>Fe,nearestDivisor:()=>Ee,nearestLargerEven:()=>K,now:()=>Sa,parseAxisParam:()=>de,randUniform:()=>Z,repeatedTry:()=>he,rightPad:()=>ue,shuffle:()=>U,shuffleCombo:()=>G,sizeFromShape:()=>ne,sizeToSquarishShape:()=>oe,squeezeShape:()=>pe,sum:()=>X,tanh:()=>ie,toNestedArray:()=>Ne,toTypedArray:()=>ka});var la=g(y()),ua=la.default||la;function ha(e){return ua.fromString(e,!0,16)}var ca=ha("c3a5c85c97cb3127"),da=ha("b492b66fbe98f273"),pa=ha("9ae16a3b2f90404f");function fa(e){return e.xor(e.shru(47))}function ma(e,t,n){const r=e.slice(t,t+n);return ua.fromBytes(Array.from(r),!0,!0)}function ga(e,t){return ma(e,t,8)}function ya(e,t){return ma(e,t,4)}function ba(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function xa(e,t,n=ha("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function va(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=ba(s.add(a).add(r),21);const i=a;return a=(a=a.add(t)).add(n),s=s.add(ba(a,44)),[a.add(r),s.add(i)]}(ga(e,t),ga(e,t+8),ga(e,t+16),ga(e,t+24),n,r)}function Aa(e,t=e.length){const n=ua.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=pa.add(2*t),r=ga(e,0).add(pa),a=ga(e,t-8);return xa(ba(a,37).mul(n).add(r),ba(r,25).add(a).mul(n),n)}if(t>=4){const n=pa.add(2*t);return xa(ya(e,0).shl(3).add(t),ya(e,t-4),n)}if(t>0){const n=t+(e[t-1]<<2);return fa(pa.mul(e[0]+(e[t>>1]<<8)).xor(ca.mul(n))).mul(pa)}return pa}(e,t):function(e,t=e.length){const n=pa.add(2*t),r=ga(e,0).mul(da),a=ga(e,8),s=ga(e,t-8).mul(n),i=ga(e,t-16).mul(pa);return xa(ba(r.add(a),43).add(ba(s,30)).add(i),r.add(ba(a.add(pa),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=pa.add(2*t),r=ga(e,0).mul(pa),a=ga(e,8),s=ga(e,t-8).mul(n),i=ga(e,t-16).mul(pa),o=ba(r.add(a),43).add(ba(s,30)).add(i),l=xa(o,r.add(ba(a.add(pa),18)).add(s),n),u=ga(e,16).mul(n),h=ga(e,24),c=o.add(ga(e,t-32)).mul(n),d=l.add(ga(e,t-24)).mul(n);return xa(ba(u.add(h),43).add(ba(c,30)).add(d),u.add(ba(h.add(r),18)).add(c),n)}(e,t);let r=n,a=n.mul(da).add(113),s=fa(a.mul(pa).add(113)).mul(pa),i=[ua.UZERO,ua.UZERO],o=[ua.UZERO,ua.UZERO];r=r.mul(pa).add(ga(e,0));let l=0;const u=64*(t-1>>6),h=u+(t-1&63)-63;do{r=ba(r.add(a).add(i[0]).add(ga(e,l+8)),37).mul(da),a=ba(a.add(i[1]).add(ga(e,l+48)),42).mul(da),r=r.xor(o[1]),a=a.add(i[0]).add(ga(e,l+40)),s=ba(s.add(o[0]),33).mul(da),i=va(e,l,i[1].mul(da),r.add(o[0])),o=va(e,l+32,s.add(o[1]),a.add(ga(e,l+16))),[s,r]=[r,s],l+=64}while(l!==u);const c=da.add(s.and(255).shl(1));return l=h,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=ba(r.add(a).add(i[0]).add(ga(e,l+8)),37).mul(c),a=ba(a.add(i[1]).add(ga(e,l+48)),42).mul(c),r=r.xor(o[1].mul(9)),a=a.add(i[0].mul(9).add(ga(e,l+40))),s=ba(s.add(o[0]),33).mul(c),i=va(e,l,i[1].mul(c),r.add(o[0])),o=va(e,l+32,s.add(o[1]),a.add(ga(e,l+16))),[s,r]=[r,s],xa(xa(i[0],o[0],c).add(fa(a).mul(ca)).add(s),xa(i[1],o[1],c).add(r),c)}function wa(e,t){return"string"===t?_a(e):ka([e],t)}function ka(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=te(e)),Ve().getBool("DEBUG")&&ge(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type "+t)}function Sa(){return Ve().platform.now()}function Ia(e,t){return Ve().platform.fetch(e,t)}function _a(e,t="utf-8"){return t=t||"utf-8",Ve().platform.encode(e,t)}function Ea(e,t="utf-8"){return t=t||"utf-8",Ve().platform.decode(e,t)}function Ta(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}function Ca(e,t,n,r){const a=Te(t),s=function(e,t,n,r){const a=ne(t),s=r[r.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?Ra(e):e;if(o>1)for(let u=0;u<a/s;u++){const e=u*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],Na(l[e+t],0,n).length)}return i}(e,t,n,a),i=t.length,o=Fa(e,t,n,a,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function Na(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:we(e)?`'${e}'`:"bool"===n?Ma(e):parseFloat(e.toFixed(7)).toString(),ue(r,t)}function Ma(e){return 0===e?"false":"true"}function Fa(e,t,n,r,a,s=!0){const i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l)return"complex64"===n?[Na(Ra(e)[0],0,n)]:"bool"===n?[Ma(e[0])]:[e[0].toString()];if(1===l){if(o>20){let t=Array.from(e.slice(0,3*i)),r=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(t=Ra(t),r=Ra(r)),["["+t.map((e,t)=>Na(e,a[t],n)).join(", ")+", ..., "+r.map((e,t)=>Na(e,a[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Ra(e):Array.from(e)).map((e,t)=>Na(e,a[t],n)).join(", ")+"]"]}const u=t.slice(1),h=r.slice(1),c=r[0]*i,d=[];if(o>20){for(let t=0;t<3;t++){const r=t*c;d.push(...Fa(e.slice(r,r+c),u,n,h,a,!1))}d.push("...");for(let t=o-3;t<o;t++){const r=t*c;d.push(...Fa(e.slice(r,r+c),u,n,h,a,t===o-1))}}else for(let m=0;m<o;m++){const t=m*c;d.push(...Fa(e.slice(t,t+c),u,n,h,a,m===o-1))}const p=2===l?",":"";d[0]="["+d[0]+p;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":f),d}function Ra(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Da=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=ne(e),null!=n){const e=n.length;J(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||me(t,this.size),this.strides=Te(e)}set(e,...t){0===t.length&&(t=[0]),J(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t])throw new Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Oa().makeTensor(this.values,this.shape,this.dtype)}},Oa=null,za=null,Pa=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=ne(e),this.strides=Te(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return za.buffer(this.shape,this.dtype,e)}bufferSync(){return za.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ne(this.shape,e,"complex64"===this.dtype)}arraySync(){return Ne(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Oa().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>Ea(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=Oa().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>Ea(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Oa().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Oa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return za.print(this,e)}clone(){return this.throwIfDisposed(),za.clone(this)}toString(e=!1){return Ca(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),za.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Oa().makeVariable(this,e,t,n)}};function $a(){return He("Tensor",()=>Pa)}Object.defineProperty(Pa,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),$a();var La=class extends Pa{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ae(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Oa().disposeTensor(this),this.dataId=e.dataId,Oa().incRef(this,null)}dispose(){Oa().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(La,Symbol.hasInstance,{value:e=>e instanceof Pa&&null!=e.assign&&e.assign instanceof Function});var Va,Ba,Wa,ja,Ha,Ua,Ga,qa,Ka,Xa,Za={};m(Za,{assertTypesMatch:()=>ts,getTensorsInContainer:()=>rs,isTensorInList:()=>ns,makeTypesMatch:()=>es}),(Ba=Va||(Va={})).R0="R0",Ba.R1="R1",Ba.R2="R2",Ba.R3="R3",Ba.R4="R4",Ba.R5="R5",Ba.R6="R6",(ja=Wa||(Wa={})).float32="float32",ja.int32="int32",ja.bool="int32",ja.complex64="complex64",(Ua=Ha||(Ha={})).float32="float32",Ua.int32="int32",Ua.bool="bool",Ua.complex64="complex64",(qa=Ga||(Ga={})).float32="float32",qa.int32="float32",qa.bool="float32",qa.complex64="complex64",(Xa=Ka||(Ka={})).float32="complex64",Xa.int32="complex64",Xa.bool="complex64",Xa.complex64="complex64";var Ya={float32:Ga,int32:Wa,bool:Ha,complex64:Ka};function Ja(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Ya[e][t]}function Qa(e){return Ja(e,"int32")}function es(e,t){if(e.dtype===t.dtype)return[e,t];const n=Ja(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ts(e,t){J(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function ns(e,t){return t.some(t=>t.id===e.id)}function rs(e){const t=[];return as(e,t,new Set),t}function as(e,t,n){if(null==e)return;if(e instanceof Pa)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!=typeof r)return;var r;const a=e;for(const s in a){const e=a[s];n.has(e)||(n.add(e),as(e,t,n))}}function ss(e){return null!=e.kernelName}var is=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}},os=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new is}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new class{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new class{logKernelProfile(e,t,n,r,a,s){const i="number"==typeof r?ue(r+"ms",9):r.error,o=ue(e,25),l=t.rank,u=t.size,h=ue(t.shape.toString(),14);let c="";for(const d in a){const e=a[d];if(null!=e){const n=e.shape||t.shape,r=n.length;c+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${i}\t%c${l}D ${h}\t%c${u}\t%c${c}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}})}profileKernel(e,t,n){let r;const a=()=>{r=n()};let s;const i=Sa();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();s=Promise.resolve({kernelMs:Sa()-i})}if(Ve().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){const t=r[o];t.data().then(n=>{Ta(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then(e=>e.kernelMs),extraInfo:s.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach(e=>{Promise.all([e.data(),r,s]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}(this.backendInstance),!0}setupRegisteredKernels(){ea(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ea(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof j||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0))).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return os.nextTensorId++}nextVariableId(){return os.nextVariableId++}clone(e){const t=us.runKernel(rn,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>us.runKernel(pt,{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,n){if(null==Jr(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});const s=r-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;let i,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const l=ss(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ss(e)){const{kernelName:t,inputs:a,attrs:s}=e,l=Jr(t,this.backendName);J(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),i=()=>{const e=this.backend.numDataIds();o=l.kernelFunc({inputs:a,attrs:s,backend:this.backend});const i=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const u=i.map(e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)});if(r){const e=this.getTensorsForGradient(t,a,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};i=()=>{const e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,a));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:h}=e,c=ss(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=i()}),r&&this.addTapeNode(l,u,t,c,n,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(e=>null!=u[e]?u[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){const r=Qr(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let s;r.saveAllInputs?(J(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(e=>t[e])):s=e.map(e=>t[e]);const i=n.filter((e,t)=>a[t]);return s.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let a=e;"string"===(n=n||"float32")&&we(e[0])&&(a=e.map(e=>_a(e)));const s=r.write(a,t,n),i=new Pa(t,n,s,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(s),t=Ae(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const a=new Pa(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new La(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*ve(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof La||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*ve(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Qr(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=Fe(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=rs(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){const e=this.state.activeScope.track[a];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n,r=!1){if(J(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));J(a instanceof Pa,()=>"The result y returned by f() must be a tensor.");const s=function(e,t,n){const r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],s=n.inputs;for(const e in s){const i=s[e];let o=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,a[n.id]=!0;break}if(o)break}}const s={};s[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(s[t.outputs[e].id]){for(const e in n)s[n[e].id]=!0,i[t.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const t=e[l];if(a[t.id]&&i[t.id]){const e={};for(const a in t.inputs){const n=t.inputs[a];r[n.id]&&(e[a]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[a.id]=null==n?function(e){const t=Me(ne(e),"float32");return us.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const s=t[a],i=[];if(s.outputs.forEach(t=>{const n=e[t.id];i.push(null!=n?n:null)}),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(i);for(const t in s.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(o)}.`);const a=n(()=>o[t]());if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);const i=s.inputs[t];if(!ae(a.shape,i.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=a;else{const t=e[i.id];e[i.id]=r(t,a),t.dispose()}}}}(e,s,e=>this.tidy(e),hs);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){return J(_e(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let n;J(t.every(e=>e instanceof Pa),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return t.forEach((e,t)=>{r[t]=e}),this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),J(n.value instanceof Pa,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),J(_e(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{const a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];J(s.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),J(s.every(e=>e instanceof Pa),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return s.forEach((e,t)=>{i[t]=()=>e}),i},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=Sa(),n=await this.backend.time(e);return n.wallMs=Sa()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new is;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function ls(){const e=je();if(null==e._tfengine){const t=new $e(e);e._tfengine=new os(t)}return We=e._tfengine.ENV,Oa=()=>e._tfengine,e._tfengine}os.nextTensorId=0,os.nextVariableId=0;var us=ls();function hs(e,t){return us.runKernel(Ke,{a:e,b:t})}var cs={};function ds(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ps(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}m(cs,{isBrowser:()=>ps,isMobile:()=>ds});var fs=Ve();function ms(e,t){let n=e;if(xe(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||xe(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ve().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&gs(e,r,[]),r}function gs(e,t,n){if(n=n||[],!Array.isArray(e)&&!xe(e))return void J(0===t.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);J(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),J(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let a=0;a<e.length;++a)gs(e[a],r,n.concat(a))}function ys(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function bs(e,t,n,r="numeric"){if(e instanceof Pa)return ys(r,e.dtype,t,n),e;let a=Ie(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),ys(r,a,t,n),null==e||!xe(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==e?"null":e.constructor.name}'`);const s=ms(e,a);xe(e)||Array.isArray(e)||(e=[e]);const i="string"!==a?ka(e,a):te(e,[],!0);return us.makeTensor(i,s,a)}function xs(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,a)=>bs(e,`${t}[${a}]`,n,r))}fs.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),fs.registerFlag("IS_BROWSER",()=>ps()),fs.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),fs.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),fs.registerFlag("PROD",()=>!1),fs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>fs.getBool("DEBUG")),fs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),fs.registerFlag("IS_TEST",()=>!1),fs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),fs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);var vs="__op";function As(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=vs;const a=(...e)=>{us.startScope(n);try{const t=r(...e);return Pe(t)&&console.error("Cannot return a Promise inside of tidy."),us.endScope(t),t}catch(t){throw us.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var ws=As({complex_:function(e,t){const n=bs(e,"real","complex"),r=bs(t,"imag","complex");return Q(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),us.runKernel(gt,{real:n,imag:r})}});function ks(e,t,n,r){if(null==r&&(r=Ie(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!xe(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){De(t);const e=ne(t),r=ne(n);J(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let a=0;a<n.length;++a){const e=n[a],r=a!==n.length-1||e!==ne(t.slice(a));J(n[a]===t[a]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return xe(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ka(e,r):te(e,[],!0),us.makeTensor(e,t,r)}function Ss(e,t,n){return ks(e,t,ms(e,n),n)}var Is={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function _s(e,t){const n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<a.length;++s){const i=a[s],o=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${o.dtype}`);const l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise(async e=>{const t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n);let a=0;for(let s=0;s<t.length;s++){const e=t[s],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:Ts(await Promise.all(r)),specs:n}}function Es(e,t){const n={};let r,a=0;for(const s of t){const t=s.name,i=s.dtype,o=s.shape,l=ne(o);let u;if("quantization"in s){const n=s.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${s.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==i)throw new Error(`Weight ${s.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${i}.`)}const o=Is[n.dtype],h=e.slice(a,a+l*o),c="uint8"===n.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===i)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(c.length);for(let e=0;e<c.length;e++)u[e]=c[e]*n.scale+n.min}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=Ds()),u=r(c)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(c.length);for(let e=0;e<c.length;e++)u[e]=Math.round(c[e]*n.scale+n.min)}a+=l*o}else if("string"===i){const t=ne(s.shape);u=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(a,a+4))[0];a+=4;const n=new Uint8Array(e.slice(a,a+t));u.push(n),a+=t}}else{const r=Is[i],s=e.slice(a,a+l*r);if("float32"===i)u=new Float32Array(s);else if("int32"===i)u=new Int32Array(s);else if("bool"===i)u=new Uint8Array(s);else{if("complex64"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);{u=new Float32Array(s);const e=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let t=0;t<e.length;t++)e[t]=u[2*t],r[t]=u[2*t+1];const a=Ss(e,o,"float32"),i=Ss(r,o,"float32");n[t]=ws(a,i),a.dispose(),i.dispose()}}a+=l*r}"complex64"!==i&&(n[t]=Ss(u,o,i))}return n}function Ts(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}var Cs="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Ns(e){return Cs?Buffer.byteLength(e):new Blob([e]).size}function Ms(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function Fs(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function Rs(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ns(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ns(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Ds(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let i=0;i<r.length;i++){const a=r[i];s[i]=e[n[a>>10]+(1023&a)]+t[a>>10]}return new Float32Array(a)}}var Os=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Os.instance&&(Os.instance=new Os),Os.instance}static registerSaveRouter(e){Os.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Os.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Os.getHandlers(e,"save")}static getLoadHandlers(e,t){return Os.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?Os.getInstance().loadRouters:Os.getInstance().saveRouters).forEach(t=>{const a=t(e,n);null!==a&&r.push(a)}),r}},zs=e=>Os.registerSaveRouter(e),Ps=e=>Os.registerLoadRouter(e),$s=e=>Os.getSaveHandlers(e),Ls=(e,t)=>Os.getLoadHandlers(e,t),Vs="tensorflowjs",Bs="models_store",Ws="model_info_store";function js(){if(!Ve().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Hs(e){const t=e.result;t.createObjectStore(Bs,{keyPath:"modelPath"}),t.createObjectStore(Ws,{keyPath:"modelPath"})}var Us=class{constructor(e){if(this.indexedDB=js(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(Vs,1);r.onupgradeneeded=()=>Hs(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(Bs,"readonly"),r=t.objectStore(Bs).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{const r=Rs(t),s=a.transaction(Ws,"readwrite");let i=s.objectStore(Ws);const o=i.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;o.onsuccess=()=>{l=a.transaction(Bs,"readwrite");const o=l.objectStore(Bs).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});o.onsuccess=()=>e({modelArtifactsInfo:r}),o.onerror=e=>{i=s.objectStore(Ws);const t=i.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(o.error)),t.onerror=e=>(a.close(),n(o.error))}},o.onerror=e=>(a.close(),n(o.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}};Us.URL_SCHEME="indexeddb://";var Gs=e=>{return Ve().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Us.URL_SCHEME)?(t=e.slice(Us.URL_SCHEME.length),new Us(t)):null;var t};Os.registerSaveRouter(Gs),Os.registerLoadRouter(Gs);var qs="/",Ks="tensorflowjs_models",Xs="info",Zs="model_topology",Ys="weight_specs",Js="weight_data",Qs="model_metadata";function ei(e){return{info:[Ks,e,Xs].join(qs),topology:[Ks,e,Zs].join(qs),weightSpecs:[Ks,e,Ys].join(qs),weightData:[Ks,e,Js].join(qs),modelMetadata:[Ks,e,Qs].join(qs)}}function ti(e){const t=e.split(qs);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(qs)}var ni=class{constructor(e){if(!Ve().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ei(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Rs(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(Cs)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Cs){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(s),t}};ni.URL_SCHEME="localstorage://";var ri=e=>{return Ve().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ni.URL_SCHEME)?(t=e.slice(ni.URL_SCHEME.length),new ni(t)):null;var t};Os.registerSaveRouter(ri),Os.registerLoadRouter(ri);var ai,si="://",ii=class{constructor(){this.managers={}}static getInstance(){return null==ii.instance&&(ii.instance=new ii),ii.instance}static registerManager(e,t){J(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(si)&&(e=e.slice(0,e.indexOf(si))),J(e.length>0,()=>"scheme must not be an empty string.");const n=ii.getInstance();J(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}};function oi(e){if(-1===e.indexOf(si))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ii.getSchemes().join(","));return{scheme:e.split(si)[0],path:e.split(si)[1]}}async function li(e,t,n=!1){J(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=Os.getLoadHandlers(e);J(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),J(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const a=r[0],s=Os.getSaveHandlers(t);J(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),J(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const i=s[0],o=oi(e).scheme,l=oi(e).path,u=o===oi(e).scheme,h=await a.load();n&&u&&await ii.getManager(o).removeModel(l);const c=await i.save(h);return n&&!u&&await ii.getManager(o).removeModel(l),c.modelArtifactsInfo}async function ui(){const e=ii.getSchemes(),t={};for(const n of e){const e=await ii.getManager(n).listModels();for(const r in e)t[n+si+r]=e[r]}return t}async function hi(e){const t=oi(e);return ii.getManager(t.scheme).removeModel(t.path)}async function ci(e,t){return li(e,t,!1)}async function di(e,t){return li(e,t,!0)}if(Ve().get("IS_BROWSER")){Ve().setPlatform("browser",new class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}});try{ii.registerManager(ni.URL_SCHEME,new class{constructor(){J(Ve().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),J("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Ks+qs,n=qs+Xs;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);a.startsWith(t)&&a.endsWith(n)&&(e[ti(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){var t;const n=ei(e=(t=e).startsWith(ni.URL_SCHEME)?t.slice(ni.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}})}catch(aH){}try{ii.registerManager(Us.URL_SCHEME,new class{constructor(){this.indexedDB=js()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(Vs,1);n.onupgradeneeded=()=>Hs(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(Ws,"readonly"),s=a.objectStore(Ws).getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(Us.URL_SCHEME)?t.slice(Us.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open(Vs,1);r.onupgradeneeded=()=>Hs(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Ws,"readwrite"),i=s.objectStore(Ws),o=i.get(e);let l;o.onsuccess=()=>{if(null==o.result)return a.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),s=()=>{l=a.transaction(Bs,"readwrite");const r=l.objectStore(Bs).delete(e);r.onsuccess=()=>t(o.result.modelArtifactsInfo),r.onerror=e=>n(o.error)};r.onsuccess=s,r.onerror=e=>(s(),a.close(),n(o.error))}},o.onerror=e=>(a.close(),n(o.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}})}catch(aH){}}function pi(e,t="float32",n){return t=t||"float32",De(e),new Da(e,t,n)}Ve().get("IS_NODE")&&Ve().setPlatform("node",new class{constructor(){this.util=p("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Ve().global.fetch?Ve().global.fetch(e,t):(null==ai&&(ai=b()),ai(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var fi=As({cast_:function(e,t){const n=bs(e,"x","cast");if(!ye(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return us.runKernel(pt,{x:n},{dtype:t})}}),mi=As({clone_:function(e){const t=bs(e,"x","clone","string_or_numeric");return us.runKernel(rn,{x:t})}});function gi(e,t=!1){console.log(e.toString(t))}ls(),za={buffer:pi,cast:fi,clone:mi,print:gi};var yi={};function bi(e){return new Promise(e=>setTimeout(e)).then(e)}m(yi,{browserFiles:()=>vi,browserHTTPRequest:()=>Ci,concatenateArrayBuffers:()=>Ms,copyModel:()=>ci,decodeWeights:()=>Es,encodeWeights:()=>_s,fromMemory:()=>Mi,getLoadHandlers:()=>Ls,getModelArtifactsInfoForJSON:()=>Rs,getSaveHandlers:()=>$s,http:()=>Ti,isHTTPScheme:()=>_i,listModels:()=>ui,loadWeights:()=>ki,moveModel:()=>di,registerLoadRouter:()=>Ps,registerSaveRouter:()=>zs,removeModel:()=>hi,weightsLoaderFactory:()=>Si,withSaveHandler:()=>Fi});var xi=class{constructor(e){if(!Ve().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(xi.URL_SCHEME)&&(e=e.slice(xi.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer);const r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=r,await bi(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await bi(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Rs(e)}}}};function vi(e){return new class{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}async load(){const e=this.files[0],t=this.files.slice(1);return new Promise((n,r)=>{const a=new FileReader;a.onload=a=>{const s=JSON.parse(a.target.result),i=s.modelTopology;if(null==i)return void r(new Error("modelTopology field is missing from file "+e.name));0===t.length&&n({modelTopology:i});const o=s.weightsManifest;if(null==o)return void r(new Error("weightManifest field is missing from file "+e.name));let l;try{l=this.checkManifestAndWeightFiles(o,t)}catch(aH){return void r(aH)}const u=[],h=[],c=[];o.forEach(e=>{e.paths.forEach(e=>{h.push(e),c.push(null)}),u.push(...e.weights)}),o.forEach(e=>{e.paths.forEach(e=>{const t=new FileReader;t.onload=t=>{const r=t.target.result,a=h.indexOf(e);if(c[a]=r,-1===c.indexOf(null)){const e={modelTopology:i,weightSpecs:u,weightData:Ms(c),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(l[e])})})},a.onerror=t=>r(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),a.readAsText(e)})}checkManifestAndWeightFiles(e,t){const n=[],r=t.map(e=>Fs(e.name)),a={};for(const s of e)s.paths.forEach(e=>{const s=Fs(e);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);a[e]=t[r.indexOf(s)]});if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return a}}(e)}function Ai(e,t,n,r){var a,s,i;J(null!=(a=e)&&Array.isArray(a)&&a.length>0,()=>"promises must be a none empty array"),i=r=null==r?1:r,J((s=n=null==n?0:n)>=0&&s<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+s),J(i>=0&&i<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+i),J(i>=s,()=>`startFraction must be no more than endFraction, but got startFraction ${s} and endFraction ${i}`);let o=0;return Promise.all(e.map(a=>(a.then(a=>{const s=n+ ++o/e.length*(r-n);return t(s),a}),a)))}async function wi(e,t){null==t&&(t={});const n=null==t.fetchFunc?Ve().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await Ai(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await Ai(a,t.onProgress,.5,1)}async function ki(e,t="",n,r){return Si(e=>wi(e,{requestInit:r}))(e,t,n)}function Si(e){return async(t,n="",r)=>{const a=t.map(()=>!1),s={},i=null!=r?r.map(()=>!1):[],o=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{const l=Is["quantization"in e?e.quantization.dtype:e.dtype]*ne(e.shape),u=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),i[n]=!0)}):u(),o.push(e.name),n+=l})}),!i.every(e=>e)){const e=r.filter((e,t)=>!i[t]);throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${o.join(", ")}.`)}const l=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});const h=await e(u),c={};let d=0;return l.forEach(e=>{const n=t[e].paths.length;let r=0;for(let t=0;t<n;t++)r+=h[d+t].byteLength;const a=new ArrayBuffer(r),i=new Uint8Array(a);let o=0;for(let t=0;t<n;t++){const e=new Uint8Array(h[d+t]);i.set(e,o),o+=e.byteLength}s[e].forEach(e=>{const t=Es(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)c[n]=t[n]}),d+=n}),c}}xi.URL_SCHEME="downloads://",Os.registerSaveRouter(e=>Ve().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xi.URL_SCHEME)?function(e="model"){return new xi(e)}(e.slice(xi.URL_SCHEME.length)):null);var Ii=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(J("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Ve().platform.fetch,J(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&J(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Rs(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(p){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest,a=t.generatedBy,s=t.convertedBy,i=t.format,o=t.signature,l=t.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let u,h;if(null!=r){const e=await this.loadWeights(r);[u,h]=e}const c={modelTopology:n,weightSpecs:u,weightData:h,generatedBy:a,convertedBy:s,format:i};null!=o&&(c.signature=o),null!=l&&(c.userDefinedMetadata=l);const d=t.modelInitializer;return d&&(c.modelInitializer=d),c}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),a=this.weightPathPrefix||n,s=[];for(const l of e)s.push(...l.weights);const i=[],o=[];for(const l of e)for(const e of l.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(o)),[s,Ms(await wi(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}};function _i(e){return null!=e.match(Ii.URL_SCHEME_REGEX)}Ii.URL_SCHEME_REGEX=/^https?:\/\//;var Ei=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>_i(e)):_i(e),n)return Ti(e,t)}return null};function Ti(e,t){return new Ii(e,t)}function Ci(e,t){return Ti(e,t)}Os.registerSaveRouter(Ei),Os.registerLoadRouter(Ei);var Ni=class{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}};function Mi(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Ni(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ni({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ni({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Fi(e){return new class{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}(e)}var Ri={};m(Ri,{confusionMatrix:()=>$i});var Di,Oi=As({matMul_:function(e,t,n=!1,r=!1){let a=bs(e,"a","matMul"),s=bs(t,"b","matMul");return[a,s]=es(a,s),us.runKernel(ut,{a:a,b:s},{transposeA:n,transposeB:r})}}),zi=As({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);const a=bs(e,"indices","oneHot","int32");return us.runKernel(Wn,{indices:a},{depth:t,onValue:n,offValue:r})}}),Pi=As({transpose_:function(e,t){const n=bs(e,"x","transpose");return null==t&&(t=n.shape.map((e,t)=>t).reverse()),J(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(e=>{J(e>=0&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1?n.clone():us.runKernel(Lr,{x:n},{perm:t})}}),$i=As({confusionMatrix_:function(e,t,n){const r=bs(e,"labels","confusionMatrix"),a=bs(t,"predictions","confusionMatrix");J(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),J(1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),J(1===a.rank,()=>"Expected the rank of predictions to be 1, but got "+a.rank),J(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),J(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);const s=zi(fi(r,"int32"),n),i=zi(fi(a,"int32"),n),o=Pi(s),l=Oi(o,i);return fi(l,"int32")}}),Li={};function Vi(e,t,n){if(ee(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=ms(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ks(e,t,r,n)}function Bi(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a){const t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=Jr(Ur,us.backendName))return us.runKernel(Ur,{pixels:e},{numChannels:t});const[l,u]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let h,c;if(i?h=e.getContext("2d").getImageData(0,0,l,u).data:r||n?h=e.data:(s||a||o)&&(null==Di&&(Di=document.createElement("canvas").getContext("2d")),Di.canvas.width=l,Di.canvas.height=u,Di.drawImage(e,0,0,l,u),h=Di.getImageData(0,0,l,u).data),4===t)c=new Int32Array(h);else{const e=l*u;c=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)c[n*t+e]=h[4*n+e]}return Vi(c,[u,l,t],"int32")}async function Wi(e,t=3){let n=null;if(Ve().getBool("WRAP_TO_IMAGEBITMAP")&&function(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(r){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Bi(n,t)}async function ji(e,t){let n=bs(e,"img","toPixels");if(!(e instanceof Pa)){const e=n;n=fi(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const i=await n.data(),o="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const e=[0,0,0,255];for(let r=0;r<s;r++){const t=i[u*s+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===s?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}const t=4*u;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){t.width=a,t.height=r;const e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}m(Li,{fromPixels:()=>Hi,fromPixelsAsync:()=>Wi,toPixels:()=>ji});var Hi=As({fromPixels_:Bi}),Ui={};function Gi(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===ne(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const a=t.shape,s=a[a.length-1];let i=1;for(let c=0;c<a.length-1;++c)i*=a[c];const o=e.shape,l=a.slice();l.pop();let u=1;for(let c=s;c<n;++c)u*=o[c],l.push(o[c]);const h=[...Te(e.shape).map(e=>e/u),1].slice(0,s);return[l,i,u,h]}m(Ui,{prepareAndValidate:()=>Gi});var qi={};function Ki(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(s+` updates.shape[${i+a}] (${n.shape[i+a]}) != shape[${i+a}] (${e[i+a]})`)}function Xi(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Ki(n,t,e)}function Zi(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length;let i=1;for(let l=a;l<s;++l)i*=n[l];const o=a<1?1:a;return{sliceRank:a,numUpdates:ne(t.shape)/o,sliceSize:i,strides:[...Te(n.slice(0,a)),1],outputSize:ne(n)}}m(qi,{calculateShapes:()=>Zi,validateInput:()=>Xi,validateUpdateShape:()=>Ki});var Yi={};function Ji(e,t,n){const r=e.shape.length;J(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),J(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)J(t[a]+n[a]<=e.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}function Qi(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function eo(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function to(e,t,n,r){const a=[...e];for(let s=a.length;s<r.length;s++)a.push(1);for(let s=0;s<n;s++)0===s?a[t]=1:(a.splice(t,0,1),a.pop());return a}function no(e,t,n){return n<=e?n:n-(t-1)}function ro(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function ao(e,t,n,r,a,s,i,o,l){const u=e.length;let h=new Array(u),c=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;h=so(i,l,u,r,e),c=io(o,l,u,a,e),d=to(s,l,u,e)}else for(let p=0;p<u;p++)h[p]=lo(i,r,s,e,p,l),c[p]=uo(o,a,s,e,p,l),d[p]=oo(s,p,l);return{begin:h,end:c,strides:d}}function so(e,t,n,r,a){const s=[...a],i=ro(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=0;else{const a=no(t,n,o);let i=r[a];e&1<<a&&(i=0),s[o]=i}return s}function io(e,t,n,r,a){const s=[...a],i=ro(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const a=no(t,n,o);let i=r[a];e&1<<a&&(i=Number.MAX_SAFE_INTEGER),s[o]=i}for(let o=0;o<s.length;o++){const e=a[o];s[o]<0&&(s[o]+=e),s[o]=q(0,s[o],a[o])}return s}function oo(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function lo(e,t,n,r,a,s){let i=t[a];(e&1<<a||s&1<<a||null==i)&&(i=(n[a]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const o=r[a];return i<0&&(i+=o),i=q(0,i,o-1),i}function uo(e,t,n,r,a,s){let i=t[a];const o=n[a]||1;(e&1<<a||s&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[a];return i<0&&(i+=l),i=o>0?q(0,i,l):q(-1,i,l-1),i}function ho(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function co(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function po(e,t,n){let r;const a=e.shape.length;let s;return r="number"==typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach(e=>{J(-1!==e,()=>"slice() does not support negative begin indexing.")}),s=null==n?new Array(a).fill(-1):"number"==typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,s=s.map((t,n)=>t>=0?t:(J(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,s]}function fo(e,t,n,r,a,s,i,o,l){let u=t.slice(),h=n.slice(),c=r;null==r&&(c=new Array(u.length));const d=Qi(i);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==o)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const p=e.length-u.length,f=Qi(o),m=e.slice();f.forEach(e=>{u[e]=0,h[e]=1,m.splice(e,0,1)});const{begin:g,end:y,strides:b}=ao(m,d,p,u,h,c,a,s,i);u=g,h=y,c=b;const x=Qi(l);x.forEach(e=>{h[e]=u[e]+1,c[e]=1});const v=eo(u,h,c),A=v.filter((e,t)=>-1===x.indexOf(t));return{nonStrided:c.every(e=>1===e),$begin:u,$end:h,$strides:c,size:v,newShape:m,outShape:A}}m(Yi,{assertParamsValid:()=>Ji,computeFlatOffset:()=>co,computeOutShape:()=>eo,getNormalizedAxes:()=>ao,isSliceContinous:()=>ho,maskToAxes:()=>Qi,parseSliceParams:()=>po,sliceInfo:()=>fo,startForAxis:()=>lo,startIndicesWithElidedDims:()=>so,stopForAxis:()=>uo,stopIndicesWithElidedDims:()=>io,stridesForAxis:()=>oo,stridesWithElidedDims:()=>to});var mo={};m(mo,{Serializable:()=>go,SerializationMap:()=>yo,registerClass:()=>bo});var go=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},yo=class{constructor(){this.classNameMap={}}static getMap(){return null==yo.instance&&(yo.instance=new yo),yo.instance}static register(e){yo.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function bo(e){J(null!=e.className,()=>"Class being registered does not have the static className property defined."),J("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),J(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),yo.register(e)}var xo={};m(xo,{TEST_EPSILON_FLOAT16:()=>vo,encodeStrings:()=>No,expectArrayBuffersEqual:()=>Co,expectArraysClose:()=>Ao,expectArraysEqual:()=>Io,expectNumbersClose:()=>_o,expectPromiseToFail:()=>So,expectValuesInRange:()=>To,testEpsilon:()=>wo});var vo=.1;function Ao(e,t,n){return null==n&&(n=wo()),ko(e,t,(e,t)=>Eo(e,t,n))}function wo(){return 32===us.backend.floatPrecision()?.001:vo}function ko(e,t,n){let r=!0;if((xe(e)||xe(t))&&(r=!1),xe(e)&&xe(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=ms(e),r=ms(t);if(!ae(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const a=xe(e)?e:te(e),s=xe(t)?t:te(t);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${s.length}.\nActual:   ${a}.\nExpected: ${s}.`);for(let i=0;i<s.length;++i){const e=a[i],t=s[i];if(!n(e,t))throw new Error(`Arrays differ: actual[${i}] = ${e}, expected[${i}] = ${t}.\nActual:   ${a}.\nExpected: ${s}.`)}}function So(e,t){e().then(()=>t.fail(),()=>t())}function Io(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return we(e)||we(e[0])||we(t)||we(t[0])?ko(e,n,(e,t)=>e==t):ko(e,t,(e,t)=>Eo(e,t,0))}function _o(e,t,n){if(null==n&&(n=wo()),!Eo(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function Eo(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function To(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Co(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function No(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?No(n):e[t]=_a(n)}return e}var Mo="3.7.0";function Fo(){Ve().set("PROD",!0)}function Ro(){Ve().set("DEBUG",!0)}function Do(){Ve().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Oo(e){Ve().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function zo(){us.disposeVariables()}function Po(){return us}function $o(){return us.memory()}function Lo(e){return us.profile(e)}function Vo(e,t){return us.tidy(e,t)}function Bo(e){rs(e).forEach(e=>e.dispose())}function Wo(e){return us.keep(e)}function jo(e){return us.time(e)}function Ho(e){return us.setBackend(e)}function Uo(){return us.ready()}function Go(){return us.backendName}function qo(e){us.removeBackend(e)}function Ko(e){return us.findBackend(e)}function Xo(e){return us.findBackendFactory(e)}function Zo(e,t,n=1){return us.registerBackend(e,t,n)}function Yo(){return us.backend}function Jo(e,t){Ve().setPlatform(e,t)}var Qo=As({add_:function(e,t){let n=bs(e,"a","add"),r=bs(t,"b","add");return[n,r]=es(n,r),us.runKernel(Ke,{a:n,b:r})}}),el=As({floorDiv_:function(e,t){let n=bs(e,"a","floorDiv"),r=bs(t,"b","floorDiv");return[n,r]=es(n,r),us.runKernel(Yt,{a:n,b:r})}}),tl=As({div_:function(e,t){let n=bs(e,"a","div"),r=bs(t,"b","div");return[n,r]=es(n,r),"int32"===n.dtype&&"int32"===r.dtype?el(n,r):us.runKernel($t,{a:n,b:r},{})}}),nl=As({mul_:function(e,t){let n=bs(e,"a","mul"),r=bs(t,"b","mul");return[n,r]=es(n,r),us.runKernel(On,{a:n,b:r})}}),rl=As({abs_:function(e){const t=bs(e,"x","abs");return us.runKernel("complex64"===t.dtype?yt:Ue,{x:t})}}),al=As({acos_:function(e){const t=bs(e,"x","acos");return us.runKernel(Ge,{x:t})}}),sl=As({acosh_:function(e){const t=bs(e,"x","acosh");return us.runKernel(qe,{x:t})}}),il=As({addN_:function(e){J(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),J(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+e.length);const t=e.map((e,t)=>bs(e,"tensors"+t,"addN")),n=t[0];return t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!ae(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),us.runKernel(Xe,t)}}),ol=As({all_:function(e,t=null,n=!1){const r=bs(e,"x","all","bool");return us.runKernel(Ze,{x:r},{axis:t,keepDims:n})}}),ll=As({any_:function(e,t=null,n=!1){const r=bs(e,"x","any","bool");return us.runKernel(Ye,{x:r},{axis:t,keepDims:n})}}),ul=As({argMax_:function(e,t=0){const n=bs(e,"x","argMax");return us.runKernel(Je,{x:n},{axis:t})}}),hl=As({argMin_:function(e,t=0){const n=bs(e,"x","argMin");return us.runKernel(Qe,{x:n},{axis:t})}}),cl=As({asin_:function(e){const t=bs(e,"x","asin");return us.runKernel(et,{x:t})}}),dl=As({asinh_:function(e){const t=bs(e,"x","asinh");return us.runKernel(tt,{x:t})}}),pl=As({atan_:function(e){const t=bs(e,"x","atan");return us.runKernel(nt,{x:t})}}),fl=As({atan2_:function(e,t){let n=bs(e,"a","atan2"),r=bs(t,"b","atan2");return[n,r]=es(n,r),us.runKernel(at,{a:n,b:r})}}),ml=As({atanh_:function(e){const t=bs(e,"x","atanh");return us.runKernel(rt,{x:t})}});function gl(e,t,n,r,a="NHWC",s){return xl(e,[...t,e[3]],n,s,r,null,null,Tl(a))}function yl(e,t,n,r,a,s,i="channelsLast"){const[o,l]=wl(t);let u;if("channelsLast"===i)u=[o,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=[o,l,e[1],e[1]]}return xl(e,u,n,r,a,s,!1,i)}function bl(e,t,n,r,a,s,i="NDHWC"){const[o,l,u]=kl(t);let h,c;if("NDHWC"===i)c="channelsLast",h=[o,l,u,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);c="channelsFirst",h=[o,l,u,e[1],e[1]]}return vl(e,h,n,r,a,!1,c,s)}function xl(e,t,n,r,a,s,i=!1,o="channelsLast"){let[l,u,h,c]=[-1,-1,-1,-1];if("channelsLast"===o)[l,u,h,c]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[l,c,u,h]=e}const[d,p,,f]=t,[m,g]=wl(n),[y,b]=wl(r),x=Sl(d,y),v=Sl(p,b),{padInfo:A,outHeight:w,outWidth:k}=function(e,t,n,r,a,s,i,o,l){let u,h,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=Al(e,t,n));const s=e[1];return[Il((e[0]-t+2*r)/n+1,a),Il((s-t+2*r)/n+1,a)]}([t,n],s,r,e,o);h=a[0],c=a[1]}else if("same"===e){h=Math.ceil(t/r),c=Math.ceil(n/a);const e=Math.max(0,(h-1)*r+s-t),o=Math.max(0,(c-1)*a+i-n),l=Math.floor(e/2),d=e-l,p=Math.floor(o/2);u={top:l,bottom:d,left:p,right:o-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-s+1)/r),c=Math.ceil((n-i+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},h=Il((t-s+d+p)/r+1,o),c=Il((n-i+f+m)/a+1,o)}}return{padInfo:u,outHeight:h,outWidth:c}}(a,u,h,m,g,x,v,s,o),S=i?f*c:f;let I;return"channelsFirst"===o?I=[l,S,w,k]:"channelsLast"===o&&(I=[l,w,k,S]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:h,inChannels:c,outHeight:w,outWidth:k,outChannels:S,padInfo:A,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:x,effectiveFilterWidth:v,dilationHeight:y,dilationWidth:b,inShape:e,outShape:I,filterShape:t}}function vl(e,t,n,r,a,s=!1,i="channelsLast",o){let[l,u,h,c,d]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,u,h,c,d]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);[l,d,u,h,c]=e}const[p,f,m,,g]=t,[y,b,x]=kl(n),[v,A,w]=kl(r),k=Sl(p,v),S=Sl(f,A),I=Sl(m,w),{padInfo:_,outDepth:E,outHeight:T,outWidth:C}=function(e,t,n,r,a,s,i,o,l,u,h){let c,d,p,f;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const s=function(e,t,n,r,a,s){null==a&&(a=Al(e,t,r));const i=e[1],o=e[2];return[Il((e[0]-t+2*a)/r+1,s),Il((i-t+2*a)/r+1,s),Il((o-t+2*a)/r+1,s),1]}([t,n,r,1],o,0,a,e,h);d=s[0],p=s[1],f=s[2]}else if("same"===e){d=Math.ceil(t/a),p=Math.ceil(n/s),f=Math.ceil(r/i);const e=(d-1)*a+o-t,h=(p-1)*s+l-n,m=(f-1)*i+u-r,g=Math.floor(e/2),y=e-g,b=Math.floor(h/2),x=h-b,v=Math.floor(m/2);c={top:b,bottom:x,left:v,right:m-v,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-o+1)/a),p=Math.ceil((n-l+1)/s),f=Math.ceil((r-u+1)/i)}return{padInfo:c,outDepth:d,outHeight:p,outWidth:f}}(a,u,h,c,y,b,x,k,S,I,o),N=s?g*d:g;let M;return"channelsFirst"===i?M=[l,N,E,T,C]:"channelsLast"===i&&(M=[l,E,T,C,N]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:h,inWidth:c,inChannels:d,outDepth:E,outHeight:T,outWidth:C,outChannels:N,padInfo:_,strideDepth:y,strideHeight:b,strideWidth:x,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationDepth:v,dilationHeight:A,dilationWidth:w,inShape:e,outShape:M,filterShape:t}}function Al(e,t,n,r=1){const a=Sl(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function wl(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function kl(e){return"number"==typeof e?[e,e,e]:e}function Sl(e,t){return t<=1?e:e+(e-1)*(t-1)}function Il(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function _l(e){const[t,n,r]=wl(e);return 1===t&&1===n&&1===r}function El(e,t){return _l(e)||_l(t)}function Tl(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}var Cl=As({reshape_:function(e,t){const n=bs(e,"x","reshape","string_or_numeric");return us.runKernel(Qn,{x:n},{shape:t})}}),Nl=As({avgPool_:function(e,t,n,r,a){const s=bs(e,"x","avgPool","float32");J(El(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let i=s,o=!1;3===s.rank&&(o=!0,i=Cl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(4===i.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),null!=a&&J(se(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let l=us.runKernel(st,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return l=fi(l,s.dtype),o?Cl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Ml=As({avgPool3d_:function(e,t,n,r,a,s="NDHWC"){const i=bs(e,"x","avgPool3d","float32");let o=i,l=!1;4===i.rank&&(l=!0,o=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),J("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&J(se(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);let u=us.runKernel(ot,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return u=fi(u,o.dtype),l?Cl(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),Fl=As({concat_:function(e,t=0){J(e.length>=1,()=>"Pass at least one tensor to concat");const n=xs(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length?mi(n[0]):us.runKernel(bt,n,{axis:t})}}),Rl=As({sigmoid_:function(e){const t=bs(e,"x","sigmoid");return us.runKernel(mr,{x:t})}}),Dl=As({slice_:function(e,t,n){const r=bs(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return us.runKernel(cr,{x:r},{begin:t,size:n})}}),Ol=As({tanh_:function(e){const t=bs(e,"x","tanh");return us.runKernel(Or,{x:t})}}),zl=As({basicLSTMCell_:function(e,t,n,r,a,s){const i=bs(e,"forgetBias","basicLSTMCell"),o=bs(t,"lstmKernel","basicLSTMCell"),l=bs(n,"lstmBias","basicLSTMCell"),u=bs(r,"data","basicLSTMCell"),h=bs(a,"c","basicLSTMCell"),c=bs(s,"h","basicLSTMCell"),d=Fl([u,c],1),p=Oi(d,o),f=Qo(p,l),m=f.shape[1]/4,g=[f.shape[0],m],y=Dl(f,[0,0],g),b=Dl(f,[0,m],g),x=Dl(f,[0,2*m],g),v=Dl(f,[0,3*m],g),A=Qo(nl(Rl(y),Ol(b)),nl(h,Rl(Qo(i,x))));return[A,nl(Ol(A),Rl(v))]}}),Pl=As({batchToSpaceND_:function(e,t,n){const r=bs(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);return J(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),J(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),J(r.shape[0]%a==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`),us.runKernel(ht,{x:r},{blockShape:t,crops:n})}}),$l=As({batchNorm_:function(e,t,n,r,a,s){null==s&&(s=.001);const i=bs(e,"x","batchNorm"),o=bs(t,"mean","batchNorm"),l=bs(n,"variance","batchNorm");let u,h;null!=a&&(u=bs(a,"scale","batchNorm")),null!=r&&(h=bs(r,"offset","batchNorm")),J(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(null==h||o.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(null==u||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const c=function(e){let t;return t=0===e.rank||1===e.rank?Cl(e,[1,1,1,e.size]):2===e.rank?Cl(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Cl(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),d=us.runKernel(Jt,{x:c,scale:u,offset:h,mean:o,variance:l},{varianceEpsilon:s});return Cl(d,i.shape)}}),Ll=As({batchNorm2d_:function(e,t,n,r,a,s){const i=bs(e,"x","batchNorm"),o=bs(t,"mean","batchNorm"),l=bs(n,"variance","batchNorm");let u,h;return null!=a&&(u=bs(a,"scale","batchNorm")),null!=r&&(h=bs(r,"offset","batchNorm")),J(2===i.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),J(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),J(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=u&&J(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=h&&J(2===h.rank||1===h.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),$l(i,o,l,h,u,s)}}),Vl=As({batchNorm3d_:function(e,t,n,r,a,s){const i=bs(e,"x","batchNorm"),o=bs(t,"mean","batchNorm"),l=bs(n,"variance","batchNorm");let u,h;return null!=a&&(u=bs(a,"scale","batchNorm")),null!=r&&(h=bs(r,"offset","batchNorm")),J(3===i.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),J(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),J(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=u&&J(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=h&&J(3===h.rank||1===h.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),$l(i,o,l,h,u,s)}}),Bl=As({batchNorm4d_:function(e,t,n,r,a,s){const i=bs(e,"x","batchNorm"),o=bs(t,"mean","batchNorm"),l=bs(n,"variance","batchNorm");let u,h;return null!=a&&(u=bs(a,"scale","batchNorm")),null!=r&&(h=bs(r,"offset","batchNorm")),J(4===i.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),J(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),J(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=u&&J(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=h&&J(4===h.rank||1===h.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),$l(i,o,l,h,u,s)}}),Wl=As({bincount_:function(e,t,n){const r=bs(e,"x","bincount"),a=bs(t,"weights","bincount");return J("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got "+r.dtype),J(n>=0,()=>`size must be non-negative, but got ${n}.`),J(a.size===r.size||0===a.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`),us.runKernel(ct,{x:r,weights:a},{size:n})}}),jl=As({broadcastTo_:function(e,t){let n=bs(e,"broadcastTo","x");const r=n.shape;if(t.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Cl(n,e)}const a=n.shape,s=Array.from(t);for(let i=t.length-1;i>=0;i--)if(a[i]===t[i])s[i]=1;else if(1!==n.shape[i])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);return 0===s.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length?mi(n):us.runKernel(zr,{x:n},{reps:s})}}),Hl=As({ceil_:function(e){const t=bs(e,"x","ceil");return us.runKernel(ft,{x:t})}}),Ul=As({clipByValue_:function(e,t,n){const r=bs(e,"x","clipByValue");return J(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),us.runKernel(mt,{x:r},{clipValueMin:t,clipValueMax:n})}}),Gl=As({concat1d_:function(e){return Fl(e,0)}}),ql=As({concat2d_:function(e,t){return Fl(e,t)}}),Kl=As({concat3d_:function(e,t){return Fl(e,t)}}),Xl=As({concat4d_:function(e,t){return Fl(e,t)}}),Zl=As({conv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){const o=bs(e,"x","conv2d"),l=bs(t,"filter","conv2d");let u=o,h=!1;3===o.rank&&(h=!0,u=Cl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),J(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),J(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),null!=i&&J(se(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const c="NHWC"===a?u.shape[3]:u.shape[1];J(c===l.shape[2],()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${l.shape[2]}.`),J(El(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const d=us.runKernel(xt,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?Cl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Yl=As({conv1d_:function(e,t,n,r,a="NWC",s=1,i){const o=bs(e,"x","conv1d"),l=bs(t,"filter","conv1d");let u=o,h=!1;2===o.rank&&(h=!0,u=Cl(o,[1,o.shape[0],o.shape[1]])),J(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),J(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),null!=i&&J(se(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),J(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),J(El(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),J("NWC"===a,()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const c=Cl(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Cl(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Zl(d,c,[1,n],r,"NHWC",[1,s],i);return Cl(p,h?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),Jl=As({conv2DBackpropInput_:function(e,t,n,r,a,s="NHWC",i){J(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;3===t.rank&&(u=!0,l=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),J(4===o.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),J(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),J(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const h="NHWC"===s?o[3]:o[1],c="NHWC"===s?l.shape[3]:l.shape[1];J(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),J(c===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[3]}.`),null!=i&&J(se(a),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`);const d=us.runKernel(At,{dy:l,filter:n},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,inputShape:o});return u?Cl(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Ql=As({conv2dTranspose_:function(e,t,n,r,a,s){const i=bs(e,"x","conv2dTranspose"),o=bs(t,"filter","conv2dTranspose");return Jl(n,i,o,r,a,"NHWC",s)}}),eu=As({conv3d_:function(e,t,n,r,a="NDHWC",s=[1,1,1]){const i=bs(e,"x","conv3d"),o=bs(t,"filter","conv3d");let l=i,u=!1;4===i.rank&&(u=!0,l=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),J(5===o.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),J(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),J(El(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),J("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const h=us.runKernel(wt,{x:l,filter:o},{strides:n,pad:r,dataFormat:a,dilations:s});return u?Cl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),tu=As({conv3DBackpropInput_:function(e,t,n,r,a){J(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,i=t,o=!1;4===t.rank&&(o=!0,i=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const l=s[4],u=i.shape[4];J(5===s.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),J(5===i.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank),J(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),J(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),J(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const h=us.runKernel(St,{dy:i,filter:n},{pad:a,strides:r,inputShape:s});return o?Cl(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),nu=As({conv3dTranspose_:function(e,t,n,r,a){const s=bs(e,"x","conv3dTranspose"),i=bs(t,"filter","conv3dTranspose");return tu(n,s,i,r,a)}}),ru=As({cos_:function(e){const t=bs(e,"x","cos");return us.runKernel(It,{x:t})}}),au=As({cosh_:function(e){const t=bs(e,"x","cosh");return us.runKernel(_t,{x:t})}}),su=As({cumsum_:function(e,t=0,n=!1,r=!1){const a=bs(e,"x","cumsum");return us.runKernel(Et,{x:a},{axis:t,exclusive:n,reverse:r})}}),iu=As({denseBincount_:function(e,t,n,r=!1){const a=bs(e,"x","denseBincount"),s=bs(t,"weights","denseBincount");return J("int32"===a.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+a.dtype),J(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),J(n>=0,()=>`size must be non-negative, but got ${n}.`),J(s.size===a.size||0===s.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`),us.runKernel(Ct,{x:a,weights:s},{size:n,binaryOutput:r})}}),ou=As({depthToSpace_:function(e,t,n="NHWC"){const r=bs(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return J(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t}  for depthToSpace with input shape\n    ${r.shape}`),J(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`),J(i%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`),us.runKernel(Nt,{x:r},{blockSize:t,dataFormat:n})}}),lu=As({depthwiseConv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){const o=bs(e,"x","depthwiseConv2d"),l=bs(t,"filter","depthwiseConv2d");let u=o,h=!1;3===o.rank&&(h=!0,u=Cl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),J(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),J(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),J(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),null!=i&&J(se(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const c=us.runKernel(Mt,{x:u,filter:l},{strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i});return h?Cl(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),uu=As({diag_:function(e){const t=bs(e,"x","diag");return us.runKernel(Dt,{x:t})}}),hu=As({dilation2d_:function(e,t,n,r,a=[1,1],s="NHWC"){const i=bs(e,"x","dilation2d"),o=bs(t,"filter","dilation2d");J(3===i.rank||4===i.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),J(3===o.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),J("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+s);let l=i,u=!1;3===i.rank&&(l=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);const h=us.runKernel(Ot,{x:l,filter:o},{strides:n,pad:r,dilations:a});return u?Cl(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});function cu(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,i=e[s]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(s)}return r}function du(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],s=t.length-r-1,i=t[s];(null==a||1===a&&i>1)&&n.unshift(s)}return n}function pu(e,t){const n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);n.unshift(r)}}return n}var fu=As({equal_:function(e,t){let n=bs(e,"a","equal","string_or_numeric"),r=bs(t,"b","equal","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(jt,{a:n,b:r})}}),mu=As({where_:function(e,t,n){const r=bs(t,"a","where"),a=bs(n,"b","where"),s=bs(e,"condition","where","bool"),i=pu(pu(s.shape,r.shape),a.shape),o=jl(s,i),l=jl(r,i),u=jl(a,i);return us.runKernel(ur,{condition:o,t:l,e:u})}}),gu=As({zerosLike_:function(e){const t=bs(e,"x","zerosLike");return us.runKernel(jr,{x:t})}}),yu=As({divNoNan_:function(e,t){let n=bs(e,"a","div"),r=bs(t,"b","div");[n,r]=es(n,r);const a=tl(n,r),s=gu(a),i=fu(r,s);return mu(i,s,a)}}),bu=As({dot_:function(e,t){const n=bs(e,"t1","dot"),r=bs(t,"t2","dot");J(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(J(a===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`),1===n.rank&&1===r.rank){const e=Cl(n,[1,-1]),t=Cl(r,[-1,1]),a=Oi(e,t);return Cl(a,[])}if(1===n.rank&&2===r.rank){const e=Cl(n,[1,-1]),t=Cl(r,[r.shape[0],r.shape[1]]),a=Oi(e,t);return Cl(a,[a.size])}if(2===n.rank&&1===r.rank){const e=Cl(r,[-1,1]),t=Oi(n,e);return Cl(t,[t.size])}{const e=Cl(r,[r.shape[0],r.shape[1]]);return Oi(n,e)}}}),xu=As({einsum_:function(e,...t){const n=t.map((e,t)=>bs(e,"tensors"+t,"einsum"));return us.runKernel(Lt,n,{equation:e})}}),vu=As({elu_:function(e){const t=bs(e,"x","elu");return us.runKernel(Vt,{x:t})}}),Au=As({erf_:function(e){let t=bs(e,"x","erf");return J("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=fi(t,"float32")),us.runKernel(Wt,{x:t})}}),wu=As({exp_:function(e){const t=bs(e,"x","exp");return us.runKernel(Ht,{x:t})}}),ku=As({expandDims_:function(e,t=0){const n=bs(e,"x","expandDims","string_or_numeric");return J(t<=n.rank,()=>"Axis must be <= rank of the tensor"),us.runKernel(Ut,{input:n},{dim:t})}}),Su=As({expm1_:function(e){const t=bs(e,"x","expm1");return us.runKernel(Gt,{x:t})}}),Iu=As({tile_:function(e,t){const n=bs(e,"x","tile","string_or_numeric");return J(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`),us.runKernel(zr,{x:n},{reps:t})}}),_u=As({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const a=pi([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)a.set(1,o,o);const i=Cl(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Iu(ku(i,0),[n[0],1,1]);if(2===n.length)return Iu(ku(ku(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Iu(ku(ku(ku(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});function Eu(e,t,n){return us.runKernel(Kt,{},{shape:e,value:t,dtype:n})}var Tu=As({floor_:function(e){const t=bs(e,"x","floor");return us.runKernel(Zt,{x:t})}}),Cu=As({gather_:function(e,t,n=0,r=0){const a=bs(e,"x","gather"),s=bs(t,"indices","gather","int32");return us.runKernel(Qt,{x:a,indices:s},{axis:n,batchDims:r})}}),Nu=As({greater_:function(e,t){let n=bs(e,"a","greater","string_or_numeric"),r=bs(t,"b","greater","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(tn,{a:n,b:r})}}),Mu=As({greaterEqual_:function(e,t){let n=bs(e,"a","greaterEqual","string_or_numeric"),r=bs(t,"b","greaterEqual","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(nn,{a:n,b:r})}}),Fu=As({imag_:function(e){const t=bs(e,"input","imag");return us.runKernel(sn,{input:t})}}),Ru=As({isFinite_:function(e){const t=bs(e,"x","isFinite");return us.runKernel(on,{x:t})}}),Du=As({isInf_:function(e){const t=bs(e,"x","isInf");return us.runKernel(ln,{x:t})}}),Ou=As({isNaN_:function(e){const t=bs(e,"x","isNaN");return us.runKernel(un,{x:t})}}),zu=As({leakyRelu_:function(e,t=.2){const n=bs(e,"x","leakyRelu");return us.runKernel(hn,{x:n},{alpha:t})}}),Pu=As({less_:function(e,t){let n=bs(e,"a","less","string_or_numeric"),r=bs(t,"b","less","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(cn,{a:n,b:r})}}),$u=As({lessEqual_:function(e,t){let n=bs(e,"a","lessEqual","string_or_numeric"),r=bs(t,"b","lessEqual","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(dn,{a:n,b:r})}});function Lu(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return us.runKernel(pn,{},{start:e,stop:t,num:n})}var Vu=As({localResponseNormalization_:function(e,t=5,n=1,r=1,a=.5){const s=bs(e,"x","localResponseNormalization");J(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),J(se(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=s,o=!1;3===s.rank&&(o=!0,i=Cl(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l=us.runKernel(vn,{x:i},{depthRadius:t,bias:n,alpha:r,beta:a});return o?Cl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Bu=As({log_:function(e){const t=bs(e,"x","log");return us.runKernel(fn,{x:t})}}),Wu=As({log1p_:function(e){const t=bs(e,"x","log1p");return us.runKernel(mn,{x:t})}});function ju(e){return J(_e(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const r=bs(t,"x","tf.grad","string_or_numeric"),a=null!=n?bs(n,"dy","tf.grad"):null;return us.tidy(()=>{const{value:t,grads:n}=us.gradients(()=>e(r),[r],a);return null!=a&&Q(t.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Xu(n),n[0]})}}function Hu(e){return J(_e(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{J(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=xs(t,"args","tf.grads","string_or_numeric"),a=null!=n?bs(n,"dy","tf.grads"):null;return us.tidy(()=>{const{value:t,grads:n}=us.gradients(()=>e(...r),r,a);return null!=a&&Q(t.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Xu(n),n})}}function Uu(e){return J(_e(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{J(t instanceof Pa,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),J(null==n||n instanceof Pa,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=us.gradients(()=>e(t),[t],n);return Xu(r),{grad:r[0],value:a}}}function Gu(e){return J(_e(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{J(Array.isArray(t)&&t.every(e=>e instanceof Pa),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),J(null==n||n instanceof Pa,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=us.gradients(()=>e(...t),t,n);return null!=n&&Q(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Xu(r.grads),r}}function qu(e,t){J(_e(e),()=>"The f passed in variableGrads(f) must be a function"),J(null==t||Array.isArray(t)&&t.every(e=>e instanceof La),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in us.registeredVariables)t.push(us.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,a=t.length;J((t=t.filter(e=>e.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const{value:s,grads:i}=us.gradients(e,t,null,!0);J(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),J(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const o={};return t.forEach((e,t)=>{null!=i[t]&&(o[e.name]=i[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:s,grads:o}}function Ku(e){return us.customGrad(e)}function Xu(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Zu=As({neg_:function(e){const t=bs(e,"x","neg");return us.runKernel(zn,{x:t})}}),Yu=As({softplus_:function(e){const t=bs(e,"x","softplus");return us.runKernel(gr,{x:t})}}),Ju=As({logSigmoid_:function(e){const t=bs(e,"x","logSigmoid");return Ku(e=>({value:Zu(Yu(Zu(e))),gradFunc:t=>nl(t,Rl(Zu(e)))}))(t)}}),Qu=As({max_:function(e,t=null,n=!1){const r=bs(e,"x","max");return us.runKernel(wn,{x:r},{reductionIndices:t,keepDims:n})}}),eh=As({sub_:function(e,t){let n=bs(e,"a","sub"),r=bs(t,"b","sub");return[n,r]=es(n,r),us.runKernel(Rr,{a:n,b:r})}}),th=As({sum_:function(e,t=null,n=!1){let r=bs(e,"x","sum");return"bool"===r.dtype&&(r=fi(r,"int32")),us.runKernel(br,{x:r},{axis:t,keepDims:n})}}),nh=As({logSoftmax_:function(e,t=-1){const n=bs(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Ku((e,n)=>{const r=Qu(e,t,!0),a=eh(e,r),s=eh(fi(a,"float32"),Bu(th(wu(a),t,!0)));return n([s]),{value:s,gradFunc:(e,n)=>{const[r]=n,a=wu(r);return eh(e,nl(th(e,t,!0),a))}}})(n)}});function rh(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ah(e,t,n){const r=e.length+t.length,a=[];let s=0,i=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[s++]):a.push(t[i++]);return a}function sh(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function ih(e,t){return ah(e,t.map(e=>1),t)}function oh(e,t,n){J(rh(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function lh(e,t){if(rh(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function uh(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function hh(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}var ch=As({logSumExp_:function(e,t=null,n=!1){const r=bs(e,"x","logSumExp"),a=de(t,r.shape),s=Qu(r,a,!0),i=eh(r,s),o=wu(i),l=th(o,a),u=Bu(l),h=Qo(Cl(s,u.shape),u);if(n){const e=ih(h.shape,a);return Cl(h,e)}return h}}),dh=As({logicalAnd_:function(e,t){const n=bs(e,"a","logicalAnd","bool"),r=bs(t,"b","logicalAnd","bool");return pu(n.shape,r.shape),us.runKernel(gn,{a:n,b:r})}}),ph=As({logicalNot_:function(e){const t=bs(e,"x","logicalNot","bool");return us.runKernel(yn,{x:t})}}),fh=As({logicalOr_:function(e,t){const n=bs(e,"a","logicalOr","bool"),r=bs(t,"b","logicalOr","bool");return pu(n.shape,r.shape),us.runKernel(bn,{a:n,b:r})}}),mh=As({logicalXor_:function(e,t){const n=bs(e,"a","logicalXor","bool"),r=bs(t,"b","logicalXor","bool");return pu(n.shape,r.shape),dh(fh(e,t),ph(dh(e,t)))}}),gh=As({maxPool_:function(e,t,n,r,a){const s=bs(e,"x","maxPool");let i=s,o=!1;3===s.rank&&(o=!0,i=Cl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(4===i.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),J(El(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),null!=a&&J(se(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const l=us.runKernel(Sn,{x:i},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return o?Cl(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),yh=As({maxPool3d_:function(e,t=[1,1,1],n,r,a,s="NDHWC"){const i=bs(e,"x","maxPool3d");let o=i,l=!1;4===i.rank&&(l=!0,o=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),J("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),null!=a&&J(se(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const u=us.runKernel(_n,{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s});return l?Cl(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}}),bh=As({maxPoolWithArgmax_:function(e,t,n,r,a=!1){const s=bs(e,"x","maxPoolWithArgmax"),i=us.runKernel(Tn,{x:s},{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:i[0],indexes:i[1]}}}),xh=As({maximum_:function(e,t){let n=bs(e,"a","maximum"),r=bs(t,"b","maximum");return[n,r]=es(n,r),"bool"===n.dtype&&(n=fi(n,"int32"),r=fi(r,"int32")),pu(n.shape,r.shape),us.runKernel(kn,{a:n,b:r})}}),vh=As({mean_:function(e,t=null,n=!1){const r=bs(e,"x","mean");return us.runKernel(Cn,{x:r},{axis:t,keepDims:n})}});function Ah(e,t="float32"){if("complex64"===t){const t=Ah(e,"float32"),n=Ah(e,"float32");return ws(t,n)}const n=Fe(ne(e),t);return us.makeTensor(n,e,t)}function wh(e,t="float32"){if("complex64"===t){const t=wh(e,"float32"),n=Ah(e,"float32");return ws(t,n)}const n=Me(ne(e),t);return us.makeTensor(n,e,t)}function kh(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(n+" is not a valid third argument to meshgrid");if(void 0===e)return[];let r=bs(e,"x","meshgrid",e instanceof Pa?e.dtype:"float32");if(void 0===t)return[r];let a=bs(t,"y","meshgrid",t instanceof Pa?t.dtype:"float32");const s=ne(r.shape),i=ne(a.shape);return"xy"===n?(r=Cl(r,[1,-1]),a=Cl(a,[-1,1]),[Oi(wh([i,1],r.dtype),r),Oi(a,wh([1,s],a.dtype))]):(r=Cl(r,[-1,1]),a=Cl(a,[1,-1]),[Oi(r,wh([1,i],r.dtype)),Oi(wh([s,1],a.dtype),a)])}var Sh=As({min_:function(e,t=null,n=!1){const r=bs(e,"x","min");return us.runKernel(Nn,{x:r},{axis:t,keepDims:n})}}),Ih=As({minimum_:function(e,t){let n=bs(e,"a","minimum"),r=bs(t,"b","minimum");return[n,r]=es(n,r),"bool"===n.dtype&&(n=fi(n,"int32"),r=fi(r,"int32")),pu(n.shape,r.shape),us.runKernel(Mn,{a:n,b:r})}}),_h=As({mirrorPad_:function(e,t,n){J("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=bs(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");J(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const a="reflect"===n?1:0;for(let s=0;s<r.rank;s++)J(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),J(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);return us.runKernel(Fn,{x:r},{paddings:t,mode:n})}}),Eh=As({mod_:function(e,t){let n=bs(e,"a","mod"),r=bs(t,"b","mod");return[n,r]=es(n,r),us.runKernel(Rn,{a:n,b:r})}}),Th=As({square_:function(e){const t=bs(e,"x","square");return us.runKernel("Square",{x:t},{})}}),Ch=As({moments_:function(e,t=null,n=!1){const r=de(t,(e=bs(e,"x","moments")).shape),a=vh(e,r,n);let s=a.shape;n||(s=ih(a.shape,r));const i=Th(eh(fi(e,"float32"),Cl(a,s)));return{mean:a,variance:vh(i,r,n)}}}),Nh=As({multiRNNCell_:function(e,t,n,r){const a=bs(t,"data","multiRNNCell"),s=xs(n,"c","multiRNNCell"),i=xs(r,"h","multiRNNCell");let o=a;const l=[];for(let c=0;c<e.length;c++){const t=e[c](o,s[c],i[c]);l.push(t[0]),l.push(t[1]),o=t[1]}const u=[],h=[];for(let c=0;c<l.length;c+=2)u.push(l[c]),h.push(l[c+1]);return[u,h]}}),Mh=As({multinomial_:function(e,t,n,r=!1){const a=bs(e,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();const o=1===i?Cl(a,[1,-1]):a,l=us.runKernel(Dn,{logits:o},{numSamples:t,seed:n,normalized:r});return 1===i?Cl(l,[l.size]):l}}),Fh=As({notEqual_:function(e,t){let n=bs(e,"a","notEqual","string_or_numeric"),r=bs(t,"b","notEqual","string_or_numeric");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(Pn,{a:n,b:r})}}),Rh=As({onesLike_:function(e){const t=bs(e,"x","onesLike");return us.runKernel(Bn,{x:t})}}),Dh=As({outerProduct_:function(e,t){const n=bs(e,"v1","outerProduct"),r=bs(t,"v2","outerProduct");J(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Cl(n,[-1,1]),s=Cl(r,[1,-1]);return Oi(a,s)}}),Oh=As({pad_:function(e,t,n=0){const r=bs(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return us.runKernel(Hn,{x:r},{paddings:t,constantValue:n})}}),zh=As({pad1d_:function(e,t,n=0){return J(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),Oh(e,[t],n)}}),Ph=As({pad2d_:function(e,t,n=0){return J(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Oh(e,t,n)}}),$h=As({pad3d_:function(e,t,n=0){return J(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Oh(e,t,n)}}),Lh=As({pad4d_:function(e,t,n=0){return J(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Oh(e,t,n)}}),Vh=As({spaceToBatchND_:function(e,t,n){const r=bs(e,"x","spaceToBatchND");return J(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),J(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),J(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),us.runKernel(xr,{x:r},{blockShape:t,paddings:n})}}),Bh=As({pool_:function(e,t,n,r,a,s){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");const i=bs(e,"x","maxPool");let o=i,l=!1;3===i.rank&&(l=!0,o=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2]])),J(El(s,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`);const u=yl(o.shape,t,s,a,r),h=[u.dilationHeight,u.dilationWidth];let c;c="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),a=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],a[t]])}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const d=1===h[0]&&1===h[1],[p,f]=function(e,t,n){const r=n.map(e=>e[0]),a=n.map(e=>e[1]),s=e.concat(r,a),i=t.map((e,t)=>(e-s[t]%e)%e),o=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[r[t],o[t]]),t.map((e,t)=>[0,i[t]])]}([u.inHeight,u.inWidth],h,c),m=d?r:"valid",g=d?o:Vh(o,h,p),y=("avg"===n?()=>Nl(g,t,s,m):()=>gh(g,t,s,m))(),b=d?y:Pl(y,h,f);return l?Cl(b,[b.shape[1],b.shape[2],b.shape[3]]):b}}),Wh=As({pow_:function(e,t){let n=bs(e,"base","pow"),r=bs(t,"exp","pow");return[n,r]=es(n,r),us.runKernel(Gn,{a:n,b:r})}}),jh=As({prelu_:function(e,t){const n=bs(e,"x","prelu"),r=bs(t,"alpha","prelu");return us.runKernel(qn,{x:n,alpha:r})}}),Hh=As({prod_:function(e,t=null,n=!1){let r=bs(e,"x","prod");return"bool"===r.dtype&&(r=fi(r,"int32")),us.runKernel(Kn,{x:r},{axis:t,keepDims:n})}}),Uh=As({rand_:function(e,t,n){const r=ne(e);let a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(let s=0;s<r;s++)a[s]=t();return us.makeTensor(a,e,n)}}),Gh=g(E()),qh=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=a||Math.random();this.random=Gh.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);const i=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*a*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},Kh=As({randomGamma_:function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);const s=new class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const a=r||Math.random();this.randu=Gh.alea(a.toString()),this.randn=new qh(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}(t,n,r,a),i=pi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),Xh=As({randomNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);const s=new qh(t,n,r,!1,a),i=pi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),Zh=As({randomUniform_:function(e,t=0,n=1,r="float32",a){const s=pi(e,r),i=new class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=Gh.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}(t,n,null,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});function Yh(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return us.runKernel(Xn,{},{start:e,stop:t,step:n,dtype:r})}var Jh=As({real_:function(e){const t=bs(e,"input","real");return us.runKernel(Zn,{input:t})}}),Qh=As({reciprocal_:function(e){const t=bs(e,"x","reciprocal");return us.runKernel(Yn,{x:t})}}),ec=As({relu_:function(e){const t=bs(e,"x","relu");return us.runKernel(Jn,{x:t})}}),tc=As({relu6_:function(e){const t=bs(e,"x","relu6");return us.runKernel(ar,{x:t})}}),nc=As({reverse_:function(e,t){const n=bs(e,"x","reverse");return us.runKernel(sr,{x:n},{dims:t})}}),rc=As({reverse1d_:function(e){const t=bs(e,"x","reverse");return J(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),nc(t,0)}}),ac=As({reverse2d_:function(e,t){const n=bs(e,"x","reverse");return J(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),nc(n,t)}}),sc=As({reverse3d_:function(e,t){const n=bs(e,"x","reverse");return J(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),nc(n,t)}}),ic=As({reverse4d_:function(e,t){const n=bs(e,"x","reverse");return J(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),nc(n,t)}}),oc=As({round_:function(e){const t=bs(e,"x","round");return us.runKernel(ir,{x:t})}}),lc=As({rsqrt_:function(e){const t=bs(e,"x","rsqrt");return us.runKernel(or,{x:t})}});function uc(e,t){if((xe(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&xe(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ks(e,[],[],t)}var hc=As({selu_:function(e){const t=bs(e,"x","selu");return us.runKernel(hr,{x:t})}}),cc=As({separableConv2d_:function(e,t,n,r,a,s=[1,1],i="NHWC"){const o=bs(e,"x","separableConv2d"),l=bs(t,"depthwiseFilter","separableConv2d"),u=bs(n,"pointwiseFilter","separableConv2d");let h=o,c=!1;if(3===o.rank&&(c=!0,h=Cl(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");J(4===h.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),J(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),J(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),J(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),J(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],p=l.shape[3];J(u.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`);const f=lu(h,l,r,a,i,s),m=Zl(f,u,1,"valid",i);return c?Cl(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),dc=async function(e,t){const n=bs(e,"x","setdiff1d"),r=bs(t,"y","setdiff1d");J(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),J(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),J(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),s=await r.data(),i=new Set(s);let o=0;for(let h=0;h<a.length;h++)i.has(a[h])||o++;const l=new Da([o],n.dtype),u=new Da([o],"int32");for(let h=0,c=0;h<a.length;h++)i.has(a[h])||(l.values[c]=a[h],u.values[c]=h,c++);return[l.toTensor(),u.toTensor()]},pc=As({sign_:function(e){const t=bs(e,"x","sign");return us.runKernel(fr,{x:t})}}),fc=As({sin_:function(e){const t=bs(e,"x","sin");return us.runKernel(dr,{x:t})}}),mc=As({sinh_:function(e){const t=bs(e,"x","sinh");return us.runKernel(pr,{x:t})}}),gc=As({slice1d_:function(e,t,n){const r=bs(e,"x","slice1d");return J(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Dl(r,[t],[n])}}),yc=As({slice2d_:function(e,t,n){const r=bs(e,"x","slice2d");return J(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Dl(r,t,n)}}),bc=As({slice3d_:function(e,t,n){const r=bs(e,"x","slice3d");return J(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Dl(r,t,n)}}),xc=As({slice4d_:function(e,t,n){const r=bs(e,"x","slice4d");return J(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Dl(r,t,n)}}),vc=As({softmax_:function(e,t=-1){const n=bs(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);return us.runKernel(Ar,{logits:n},{dim:t})}}),Ac=As({fft_:function(e){return J("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),us.runKernel(qt,{input:e})}}),wc=As({ifft_:function(e){return J("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),us.runKernel(an,{input:e})}}),kc=As({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=Cl(e,[n,t]);r=wc(a)}else{const a=[n,2*(t-1)],s=Cl(Jh(e),[n,t]),i=Cl(Fu(e),[n,t]),o=nc(Dl(s,[0,1],[n,t-2]),1),l=nl(nc(Dl(i,[0,1],[n,t-2]),1),uc(-1)),u=Fl([s,o],1),h=Fl([i,l],1),c=Cl(ws(u,h),[a[0],a[1]]);r=wc(c)}if(r=Jh(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=Cl(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}}),Sc=As({split_:function(e,t,n=0){const r=bs(e,"x","split");return us.runKernel(vr,{x:r},{numOrSizeSplits:t,axis:n})}}),Ic=As({rfft_:function(e,t){J("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got "+e.dtype);let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map(e=>0),s=e.shape.map(e=>e);s[e.shape.length-1]=t,a=Dl(e,r,s),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,a=Fl([e,Ah(r)],e.shape.length-1),n=t}else a=e;const s=gu(a),i=Cl(ws(a,s),[r,n]),o=Ac(i),l=Math.floor(n/2)+1,u=Jh(o),h=Fu(o),c=Sc(u,[l,n-l],u.shape.length-1),d=Sc(h,[l,n-l],h.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=l,Cl(ws(c[0],d[0]),p)}}),_c=As({sqrt_:function(e){const t=bs(e,"x","sqrt");return us.runKernel(yr,{x:t})}}),Ec=As({squaredDifference_:function(e,t){let n=bs(e,"a","squaredDifference"),r=bs(t,"b","squaredDifference");return[n,r]=es(n,r),pu(n.shape,r.shape),us.runKernel(Er,{a:n,b:r},{})}}),Tc=As({squeeze_:function(e,t){const n=bs(e,"x","squeeze");return Cl(n,pe(n.shape,t).newShape)}}),Cc=As({stack_:function(e,t=0){const n=xs(e,"tensors","stack","string_or_numeric");return J(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&J(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),us.runKernel(jn,n,{axis:t})}}),Nc=As({step_:function(e,t=0){const n=bs(e,"x","step");return us.runKernel(Hr,{x:n},{alpha:t})}}),Mc=As({stridedSlice_:function(e,t,n,r,a=0,s=0,i=0,o=0,l=0){const u=bs(e,"x","stridedSlice","string_or_numeric");return us.runKernel(Cr,{x:u},{begin:t,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l})}}),Fc=As({tan_:function(e){const t=bs(e,"x","tan");return us.runKernel(Dr,{x:t})}});function Rc(e,t){ee(e);const n=ms(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ks(e,null,n,t)}function Dc(e,t,n){if(ee(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=ms(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ks(e,t,r,n)}function Oc(e,t,n){if(ee(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=ms(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ks(e,t,r,n)}function zc(e,t,n){if(ee(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=ms(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ks(e,t,r,n)}function Pc(e,t,n){if(ee(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=ms(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ks(e,t=t||r,r,n)}var $c=As({topk_:function(e,t=1,n=!0){const r=bs(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);const s={x:r},i={k:t,sorted:n},[o,l]=us.runKernel(Pr,s,i);return{values:o,indices:l}}}),Lc=As({truncatedNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new qh(t,n,r,!0,a),i=pi(e,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),Vc=As({unique_:function(e,t=0){const n=bs(e,"x","unique","string_or_numeric");J(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:t},[s,i]=us.runKernel(Vr,r,a);return{values:s,indices:i}}}),Bc=As({unsortedSegmentSum_:function(e,t,n){const r=bs(e,"x","unsortedSegmentSum"),a=bs(t,"segmentIds","unsortedSegmentSum","int32");return J(se(n),()=>"numSegments must be of dtype int"),us.runKernel(Wr,{x:r,segmentIds:a},{numSegments:n})}}),Wc=As({unstack_:function(e,t=0){const n=bs(e,"x","unstack","string_or_numeric");return J(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),us.runKernel(Br,{value:n},{axis:t})}});function jc(e,t=!0,n,r){return us.makeVariable(e,t,n,r)}function Hc(e,t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);const r=pi(e,"int32"),a=pi([n.length,e.length],"int32");for(let s=0;s<n.length;s++){const t=r.indexToLoc(n[s]);a.values.set(t,s*e.length)}return a.toTensor()}var Uc=async function(e){const t=bs(e,"condition","whereAsync","bool"),n=await t.data(),r=Hc(t.shape,n);return e!==t&&t.dispose(),r},Gc=async function(e,t,n){const r=bs(e,"tensor","boolMask"),a=bs(t,"mask","boolMask","bool"),s=null==n?0:n,i=a.rank,o=r.shape;J(i>0,()=>"mask cannot be scalar"),Q(o.slice(s,s+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=s;m<s+i;m++)l*=o[m];const u=o.slice(0,s).concat([l],o.slice(s+i)),h=Cl(r,u),c=Cl(a,[-1]),d=await Uc(c),p=Tc(d,[1]),f=Cu(h,p,s);return e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),h.dispose(),c.dispose(),d.dispose(),f};function qc(e,t,n=null){if(0===e.rank)return rl(e);if(1!==e.rank&&null===n)return qc(Cl(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return th(rl(e),n);if(t===1/0)return Qu(rl(e),n);if(t===-1/0)return Sh(rl(e),n);if("euclidean"===t||2===t)return _c(th(Wh(rl(e),uc(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+t)}if(Array.isArray(n)&&2===n.length){if(1===t)return Qu(th(rl(e),n[0]),n[1]-1);if(t===1/0)return Qu(th(rl(e),n[1]),n[0]);if(t===-1/0)return Sh(th(rl(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return _c(th(Th(e),n));throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}var Kc=As({norm_:function(e,t="euclidean",n=null,r=!1){const a=qc(e=bs(e,"x","norm"),t,n);let s=a.shape;if(r){const t=de(n,e.shape);s=ih(a.shape,t)}return Cl(a,s)}}),Xc=As({movingAverage_:function(e,t,n,r,a=!0){const s=bs(e,"v","movingAverage"),i=bs(t,"x","movingAverage"),o=bs(n,"decay","movingAverage");ts(s,i),J(ae(s.shape,i.shape),()=>"Shape mismatch in v and x");const l=uc(1),u=eh(l,o);let h=nl(eh(i,s),u);if(a){J(null!=r,()=>"When using zeroDebias: true, step is required.");const e=bs(r,"step","movingAverage");h=tl(h,eh(l,Wh(o,e)))}return Qo(s,h)}}),Zc=As({scatterND_:function(e,t,n){const r=bs(e,"indices","scatterND","int32"),a=bs(t,"updates","scatterND");return Xi(a,r,n),us.runKernel(lr,{indices:r,updates:a},{shape:n})}}),Yc=As({sparseToDense_:function(e,t,n,r=0){const a=bs(e,"sparseIndices","sparseToDense","int32"),s=bs(t,"sparseValues","sparseToDense"),i=bs(r,"defaultValue","sparseToDense",s.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);if(0!==t.rank&&(1!==t.rank||t.size!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,i),us.runKernel(_r,{sparseIndices:a,sparseValues:s,defaultValue:i},{outputShape:n})}}),Jc=As({gatherND_:function(e,t){const n=bs(t,"indices","gatherND","int32"),r=bs(e,"x","gatherND","string_or_numeric");return us.runKernel(en,{params:r,indices:n})}}),Qc=As({dropout_:function(e,t,n,r){const a=bs(e,"x","dropout");if(J("float32"===a.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),J(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof Pa?a.clone():a;const s=function(e,t){if(null==t)return e.shape.slice();if(ae(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(a,n),i=1-t,o=tl(Tu(Qo(Zh(s,0,1,"float32",r),i)),i);return nl(a,o)}});function ed(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function td(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){const i=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(i)}return Rc(a,"float32")}var nd=async function(e,t,n=1){const r=bs(e,"predictions","inTopK"),a=bs(t,"targets","inTopK");J(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),J(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Q(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];J(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const i=await r.data(),o=await a.data(),[l,u]=[i.length/s,s],h=fe("bool",l);for(let c=0;c<l;c++){const e=c*u,t=i.subarray(e,e+u),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),h[c]=0;for(let a=0;a<n;a++)if(r[a].index===o[c]){h[c]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),Ss(h,a.shape,"bool")},rd={};m(rd,{conv2d:()=>ud,depthwiseConv2d:()=>dd,matMul:()=>pd});var ad=As({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",i){let o=e;3===e.rank&&(o=Cl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2]])),J(4===o.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),J(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),J(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u="NHWC"===s?o.shape[3]:o.shape[1],h="NHWC"===s?l.shape[3]:l.shape[1];return J(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),J(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),null!=i&&J(se(a),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`),us.runKernel(vt,{x:o,dy:l},{strides:r,pad:a,dataFormat:s,dimRoundingMode:i,filterShape:n})}});function sd(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return nl(e,Nc(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function id(e,t){let n=t;const r=du(e.shape,t.shape);return r.length>0&&(n=th(n,r)),Cl(n,e.shape)}function od(e,t,n,r){if("linear"===t)return e;if("relu"===t)return ec(e);if("elu"===t)return vu(e);if("relu6"===t)return tc(e);if("prelu"===t)return jh(e,n);if("leakyrelu"===t)return zu(e,r);if("sigmoid"===t)return Rl(e);throw new Error(`Unknown fused activation ${t}.`)}var ld=(e,t)=>!(e>0)||"linear"===t,ud=As({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===ld(us.state.gradientDepth,l=l||"linear")){let c=Zl(e,t,n,r,a,s,i);return null!=o&&(c=Qo(c,o)),od(c,l,u,h)}const c=bs(e,"x","conv2d"),d=bs(t,"filter","conv2d");let p=c,f=!1;3===c.rank&&(f=!0,p=Cl(c,[1,c.shape[0],c.shape[1],c.shape[2]])),J(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),J(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),null!=i&&J(se(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),J(p.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${p.shape[3]}) must match input depth for filter ${d.shape[2]}.`),J(El(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),J("NHWC"===a,()=>`Error in conv2d: got dataFormat of ${a} but only NHWC is currently supported.`);const m=xl(p.shape,d.shape,n,s,r,i);let g,y;null!=o&&(g=bs(o,"bias","fused conv2d"),[g]=es(g,c),pu(m.outShape,g.shape)),null!=u&&(y=bs(u,"prelu weights","fused conv2d"));const b=(e,t)=>{const[a,i,o,u]=t,h=sd(e,o,l);J(_l(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const c=[Jl(i.shape,h,a,n,r),ad(i,h,a.shape,n,r)];if(null!=u){const e=id(u,h);c.push(e)}return c},x={x:p,filter:d,bias:g,preluActivationWeights:y},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?Ku((e,t,n)=>{let r=us.runKernel(Kr,x,v);return n([t,e,r]),f&&(r=Cl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):Ku((e,t,n,r)=>{let a=us.runKernel(Kr,x,v);return r([t,e,a,n]),f&&(a=Cl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,g)}}),hd=As({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],i){let o=e;3===e.rank&&(o=Cl(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;return 3===l.rank&&(l=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2]])),us.runKernel(Ft,{x:o,dy:l},{strides:r,pad:a,dimRoundingMode:i,dilations:s,filterShape:n})}}),cd=As({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],i){let o=t,l=!1;3===t.rank&&(l=!0,o=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u=us.runKernel(Rt,{dy:o,filter:n},{strides:r,pad:a,dimRoundingMode:i,dilations:s,inputShape:e});return l?Cl(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),dd=As({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(!1===ld(us.state.gradientDepth,l)){let c=lu(e,t,n,r,a,s,i);return null!=o&&(c=Qo(c,o)),od(c,l,u,h)}const c=bs(e,"x","depthwiseConv2d"),d=bs(t,"filter","depthwiseConv2d");let p=c,f=!1;3===c.rank&&(f=!0,p=Cl(c,[1,c.shape[0],c.shape[1],c.shape[2]])),J(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),J(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),J(p.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==s&&(s=[1,1]),J(El(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),null!=i&&J(se(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${r}.`);const m=xl(p.shape,d.shape,n,s,r,i,!0);let g,y;null!=o&&(g=bs(o,"bias","fused conv2d"),[g]=es(g,c),pu(m.outShape,g.shape)),null!=u&&(y=bs(u,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{J(_l(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[a,o,u,h]=t,c=sd(e,u,l),d=cd(o.shape,c,a,n,r,s,i),p=hd(o,c,a.shape,n,r,s,i);return null!=h?[d,p,id(g,c)]:[d,p]},x={x:p,filter:d,bias:g,preluActivationWeights:y},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};return null==o?Ku((e,t,n)=>{let r=us.runKernel(Xr,x,v);return n([t,e,r]),f&&(r=Cl(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,d):Ku((e,t,n,r)=>{let a=us.runKernel(Xr,x,v);return r([t,e,a,n]),f&&(a=Cl(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,d,g)}}),pd=As({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:o}){if(!1===ld(us.state.gradientDepth,s)){let l=Oi(e,t,n,r);return null!=a&&(l=Qo(l,a)),od(l,s,i,o)}let l=bs(e,"a","fused matMul"),u=bs(t,"b","fused matMul");[l,u]=es(l,u);const h=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ne(f),y=ne(m);J(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),J(ae(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),J(h===c,()=>`Error in fused matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=l.shape.slice(0,-2).concat([d,p]),x=Cl(l,n?[g,h,d]:[g,d,h]),v=Cl(u,r?[y,p,c]:[y,c,p]);let A,w;null!=a&&(A=bs(a,"bias","fused matMul"),[A]=es(A,l),pu(b,A.shape)),null!=i&&(w=bs(i,"prelu weights","fused matMul"));const k=(e,t)=>{const[i,o,l,u]=t,h=sd(Cl(e,l.shape),l,s);let c,d;return n||r?!n&&r?(c=Oi(h,o,!1,!1),d=Oi(h,i,!0,!1)):n&&!r?(c=Oi(o,h,!1,!0),d=Oi(i,h,!1,!1)):(c=Oi(o,h,!0,!0),d=Oi(h,i,!0,!0)):(c=Oi(h,o,!1,!0),d=Oi(i,h,!0,!1)),null!=a?[c,d,id(u,h)]:[c,d]},S={a:x,b:v,bias:A,preluActivationWeights:w},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return null==a?Ku((e,t,n)=>{const r=us.runKernel(qr,S,I);return n([e,t,r]),{value:Cl(r,b),gradFunc:k}})(x,v):Ku((e,t,n,r)=>{const a=us.runKernel(qr,S,I);return r([e,t,a,n]),{value:Cl(a,b),gradFunc:k}})(x,v,A)}}),fd=As({hammingWindow_:function(e){return td(e,.54,.46)}}),md=As({hannWindow_:function(e){return td(e,.5,.5)}}),gd=As({frame_:function(e,t,n,r=!1,a=0){let s=0;const i=[];for(;s+t<=e.size;)i.push(Dl(e,s,t)),s+=n;if(r)for(;s<e.size;){const r=s+t-e.size,o=Fl([Dl(e,s,t-r),Eu([r],a)]);i.push(o),s+=n}return 0===i.length?Dc([],[0,t]):Cl(Fl(i),[i.length,t])}}),yd=As({stft_:function(e,t,n,r,a=md){null==r&&(r=ed(t));const s=gd(e,t,n),i=nl(s,a(t));return Ic(i,r)}}),bd=As({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){const i=bs(e,"image","cropAndResize"),o=bs(t,"boxes","cropAndResize","float32"),l=bs(n,"boxInd","cropAndResize","int32"),u=o.shape[0];return J(4===i.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),J(2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),J(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),J(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),J(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),J("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was "+a),us.runKernel(Tt,{image:i,boxes:o,boxInd:l},{method:a,extrapolationValue:s,cropSize:r})}}),xd=As({flipLeftRight_:function(e){const t=bs(e,"image","flipLeftRight","float32");return J(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`),us.runKernel(Xt,{image:t},{})}}),vd=As({rotateWithOffset_:function(e,t,n=0,r=.5){const a=bs(e,"image","rotateWithOffset","float32");return J(4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`),us.runKernel(Gr,{image:a},{radians:t,fillValue:n,center:r})}});function Ad(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);const i=e.shape[0];return n=Math.min(n,i),J(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),J(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),J(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),J(1===t.rank,()=>"scores must be a 1D tensor"),J(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),J(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}var wd=As({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=bs(e,"boxes","nonMaxSuppression"),i=bs(t,"scores","nonMaxSuppression"),o=Ad(s,i,n,r,a);return us.runKernel($n,{boxes:s,scores:i},{maxOutputSize:n=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:a=o.scoreThreshold})}});function kd(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,i=!1;for(;r<a;){s=r+(a-r>>>1);const o=n(t,e[s]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}(e,t,n||Sd)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function Sd(e,t){return e>t?1:e<t?-1:0}function Id(e,t,n,r,a){return Td(e,t,n,r,a,0)}function _d(e,t,n,r,a,s){return Td(e,t,n,r,a,0,!1,s,!0)}function Ed(e,t,n,r,a,s){return Td(e,t,n,r,a,s,!0)}function Td(e,t,n,r,a,s,i=!1,o=!1,l=!1){const u=[];for(let g=0;g<t.length;g++)t[g]>a&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(Md);const h=s>0?-.5/s:0,c=[],d=[];for(;c.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<a)break;let o=!1;for(let l=c.length-1;l>=i;--l){const n=Cd(e,s,c[l]);if(n>=r){o=!0;break}if(t.score=t.score*Nd(r,h,n),t.score<=a)break}t.suppressBeginIndex=c.length,o||(t.score===n?(c.push(s),d.push(t.score)):t.score>a&&kd(u,t,Md))}const p=c.length,f=n-p;o&&f>0&&(c.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:c};return i&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function Cd(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(o-s)*(l-i),f=(c-u)*(d-h);if(p<=0||f<=0)return 0;const m=Math.max(s,u),g=Math.max(i,h),y=Math.min(o,c),b=Math.min(l,d),x=Math.max(y-m,0)*Math.max(b-g,0);return x/(p+f-x)}function Nd(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Md(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var Fd=As({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=bs(e,"boxes","nonMaxSuppression"),o=bs(t,"scores","nonMaxSuppression"),l=Ad(i,o,n,r,a,s),u=us.runKernel(Vn,{boxes:i,scores:o},{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),Rd=As({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=bs(e,"boxes","nonMaxSuppression"),o=bs(t,"scores","nonMaxSuppression"),l=Ad(i,o,n,r,a,null),u=us.runKernel(Ln,{boxes:i,scores:o},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:u[0],validOutputs:u[1]}}}),Dd=As({resizeBilinear_:function(e,t,n=!1,r=!1){const a=bs(e,"images","resizeBilinear");J(3===a.rank||4===a.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),J(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),J(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=Cl(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o=us.runKernel(nr,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?Cl(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),Od=As({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const a=bs(e,"images","resizeNearestNeighbor");J(3===a.rank||4===a.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),J(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),J("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),J(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;3===a.rank&&(i=!0,s=Cl(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o=us.runKernel(er,{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return i?Cl(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),zd=As({threshold_:function(e,t="binary",n=!1,r=.5){const a=bs(e,"image","threshold"),s=a.shape[0]*a.shape[1];let i,o,l,u,h=nl(Rc([r]),255);if(J(3===a.rank,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),J(3===a.shape[2]||1===a.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),J("int32"===a.dtype||"float32"===a.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),J("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was "+t),3===a.shape[2]){[i,o,l]=Sc(a,[1,1,1],-1);const e=nl(i,.2989),t=nl(o,.587),n=nl(l,.114);u=Qo(Qo(e,t),n)}else u=e;"otsu"===t&&(h=function(e,t){let n,r,a,s,i,o,l=Rc([-1]),u=Rc([0]),h=Rc([0]);for(let c=0;c<e.size-1;c++){n=Dl(e,0,c+1),r=Dl(e,c+1),i=tl(th(n),t),o=tl(th(r),t);const d=th(nl(n,Yh(0,n.size)));a=tl(d,th(n));const p=Eu(r.shape,n.size),f=Qo(Yh(0,r.size),p),m=nl(r,f);s=tl(th(m),th(r));const g=eh(a,s),y=eh(a,s),b=nl(i,o);h=nl(nl(b,g),y);const x=Nu(h,u);u=mu(x,h,u),l=mu(x,Rc([c]),l)}return l}(Wl(fi(oc(u),"int32"),Ss([]),256),s));const c=n?$u(u,h):Nu(u,h);return fi(nl(c,255),"int32")}}),Pd=As({transform_:function(e,t,n="nearest",r="constant",a=0,s){const i=bs(e,"image","transform","float32"),o=bs(t,"transforms","transform","float32");return J(4===i.rank,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),J(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),J(null==s||2===s.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`),us.runKernel($r,{image:i,transforms:o},{interpolation:n,fillMode:r,fillValue:a,outputShape:s})}}),$d=As({bandPart_:function(e,t,n){J(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),J(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=bs(e,"a","bandPart");J(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[s,i]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=s),n<0&&(n=i);const o=Cl(Yh(0,s,1,"int32"),[-1,1]),l=Yh(0,i,1,"int32"),u=eh(o,l),h=dh($u(u,uc(+t,"int32")),Mu(u,uc(-n,"int32"))),c=Ah([s,i],r.dtype);return Cl(Cc(Wc(Cl(r,[-1,s,i])).map(e=>mu(h,e,c))),a)}}),Ld=As({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,J(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)J(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=Sc(e,e.shape[0],0).map(e=>Tc(e,[0]));J(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let a=0;a<e.length;++a)n.push(us.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){const r=nl(th(nl(n[t],e)),n[t]);e=eh(e,r)}return tl(e,Kc(e,"euclidean"))}));return t?Cc(n,0):n}});function Vd(e,t=!1){return us.tidy(()=>{J(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let a=_u(n),s=mi(e);const i=Dc([[1]],[1,1]);let o=mi(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=s,l=o,u=a;[o,s,a]=us.tidy(()=>{const t=Dl(s,[e,e],[n-e,1]),l=Kc(t),u=Dl(s,[e,e],[1,1]),h=mu(Nu(u,0),Dc([[-1]]),Dc([[1]])),c=eh(u,nl(h,l)),d=tl(t,c);o=1===d.shape[0]?mi(i):Fl([i,Dl(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=Zu(tl(Oi(h,c),l)),f=Dl(s,[e,0],[n-e,r]),m=nl(p,o),g=Pi(o);if(0===e)s=eh(f,Oi(m,Oi(g,f)));else{const t=eh(f,Oi(m,Oi(g,f)));s=Fl([Dl(s,[0,0],[e,r]),t],0)}const y=Pi(m),b=Dl(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=eh(b,Oi(Oi(b,o),y));else{const t=eh(b,Oi(Oi(b,o),y));a=Fl([Dl(a,[0,0],[n,e]),t],1)}return[o,s,a]}),Bo([t,l,u])}return!t&&n>r&&(a=Dl(a,[0,0],[n,r]),s=Dl(s,[0,0],[r,r])),[a,s]})}var Bd,Wd,jd=As({qr_:function(e,t=!1){if(J(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank),2===e.rank)return Vd(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=Wc(Cl(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];return r.forEach(e=>{const[n,r]=Vd(e,t);a.push(n),s.push(r)}),[Cl(Cc(a,0),e.shape),Cl(Cc(s,0),e.shape)]}}});(Wd=Bd||(Bd={}))[Wd.NONE=0]="NONE",Wd[Wd.MEAN=1]="MEAN",Wd[Wd.SUM=2]="SUM",Wd[Wd.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS";var Hd=As({computeWeightedLoss_:function(e,t,n=Bd.SUM_BY_NONZERO_WEIGHTS){const r=bs(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=bs(t,"weights","computeWeightedLoss"));const s=null==a?r:nl(r,a);if(n===Bd.NONE)return s;if(n===Bd.SUM)return th(s);if(n===Bd.MEAN){if(null==a)return vh(s);{const e=r.size/a.size,t=tl(th(s),th(a));return e>1?tl(t,uc(e)):t}}if(n===Bd.SUM_BY_NONZERO_WEIGHTS){if(null==a)return tl(th(s),uc(r.size));{const e=nl(a,wh(r.shape)),t=fi(th(Fh(e,uc(0))),"float32");return tl(th(s),t)}}throw Error("Unknown reduction: "+n)}}),Ud=As({absoluteDifference_:function(e,t,n,r=Bd.SUM_BY_NONZERO_WEIGHTS){const a=bs(e,"labels","absoluteDifference"),s=bs(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=bs(n,"weights","absoluteDifference")),Q(a.shape,s.shape,"Error in absoluteDifference: ");const o=rl(eh(a,s));return Hd(o,i,r)}}),Gd=As({cosineDistance_:function(e,t,n,r,a=Bd.SUM_BY_NONZERO_WEIGHTS){const s=bs(e,"labels","cosineDistance"),i=bs(t,"predictions","cosineDistance");let o=null;null!=r&&(o=bs(r,"weights","cosineDistance")),Q(s.shape,i.shape,"Error in cosineDistance: ");const l=uc(1),u=eh(l,th(nl(s,i),n,!0));return Hd(u,o,a)}}),qd=As({hingeLoss_:function(e,t,n,r=Bd.SUM_BY_NONZERO_WEIGHTS){let a=bs(e,"labels","hingeLoss");const s=bs(t,"predictions","hingeLoss");let i=null;null!=n&&(i=bs(n,"weights","hingeLoss")),Q(a.shape,s.shape,"Error in hingeLoss: ");const o=uc(1);a=eh(nl(uc(2),a),o);const l=ec(eh(o,nl(a,s)));return Hd(l,i,r)}}),Kd=As({huberLoss_:function(e,t,n,r=1,a=Bd.SUM_BY_NONZERO_WEIGHTS){const s=bs(e,"labels","huberLoss"),i=bs(t,"predictions","huberLoss");let o=null;null!=n&&(o=bs(n,"weights","huberLoss")),Q(s.shape,i.shape,"Error in huberLoss: ");const l=uc(r),u=rl(eh(i,s)),h=Ih(u,l),c=eh(u,h),d=Qo(nl(uc(.5),Th(h)),nl(l,c));return Hd(d,o,a)}}),Xd=As({logLoss_:function(e,t,n,r=1e-7,a=Bd.SUM_BY_NONZERO_WEIGHTS){const s=bs(e,"labels","logLoss"),i=bs(t,"predictions","logLoss");let o=null;null!=n&&(o=bs(n,"weights","logLoss")),Q(s.shape,i.shape,"Error in logLoss: ");const l=uc(1),u=uc(r),h=Zu(nl(s,Bu(Qo(i,u)))),c=nl(eh(l,s),Bu(Qo(eh(l,i),u))),d=eh(h,c);return Hd(d,o,a)}}),Zd=As({meanSquaredError_:function(e,t,n,r=Bd.SUM_BY_NONZERO_WEIGHTS){const a=bs(e,"labels","meanSquaredError"),s=bs(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=bs(n,"weights","meanSquaredError")),Q(a.shape,s.shape,"Error in meanSquaredError: ");const o=Ec(a,s);return Hd(o,i,r)}}),Yd=As({sigmoidCrossEntropy_:function(e,t,n,r=0,a=Bd.SUM_BY_NONZERO_WEIGHTS){let s=bs(e,"multiClassLabels","sigmoidCrossEntropy");const i=bs(t,"logits","sigmoidCrossEntropy");let o=null;if(null!=n&&(o=bs(n,"weights","sigmoidCrossEntropy")),Q(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=uc(r),t=uc(1),n=uc(.5);s=Qo(nl(s,eh(t,e)),nl(n,e))}const l=function(e,t){const n=bs(e,"labels","sigmoidCrossEntropyWithLogits"),r=bs(t,"logits","sigmoidCrossEntropyWithLogits");Q(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=ec(r),s=nl(r,n),i=Wu(wu(Zu(rl(r))));return Qo(eh(a,s),i)}(s,i);return Hd(l,o,a)}}),Jd=As({softmaxCrossEntropy_:function(e,t,n,r=0,a=Bd.SUM_BY_NONZERO_WEIGHTS){let s=bs(e,"onehotLabels","softmaxCrossEntropy");const i=bs(t,"logits","softmaxCrossEntropy");let o=null;if(null!=n&&(o=bs(n,"weights","softmaxCrossEntropy")),Q(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=uc(r),t=uc(1),n=uc(s.shape[1]);s=Qo(nl(s,eh(t,e)),tl(e,n))}const l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Ku((e,t,r)=>{const a=ch(t,[n],!0),s=eh(fi(t,"float32"),a);r([e,s]);const i=Zu(nl(s,e));return{value:th(i,[n]),gradFunc:(e,t)=>{const[r,a]=t,s=ih(e.shape,[n]);return[nl(Cl(e,s),eh(fi(r,"float32"),wu(a))),nl(Cl(e,s),eh(wu(a),fi(r,"float32")))]}}})(e,t)}(s,i);return Hd(l,o,a)}}),Qd=As({sparseFillEmptyRows_:function(e,t,n,r){const a=bs(e,"indices","sparseFillEmptyRows"),s=bs(t,"values","sparseFillEmptyRows"),i=bs(n,"denseShape","sparseFillEmptyRows"),o=bs(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        "+a.shape);if(1!==s.rank)throw new Error("Values should be Tensor1D but received shape "+s.shape);if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape "+i.shape);if(0!==o.rank)throw new Error("Default value should be a scalar but received shape "+o.shape);const l=us.runKernel(wr,{indices:a,values:s,denseShape:i,defaultValue:o});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),ep=As({sparseReshape_:function(e,t,n){const r=bs(e,"inputIndices","sparseReshape"),a=bs(t,"inputShape","sparseReshape"),s=bs(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        "+r.shape);if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape "+a.shape);if(1!==s.rank)throw new Error("New shape should be Tensor1D but received shape "+s.shape);const i=us.runKernel(kr,{inputIndices:r,inputShape:a,newShape:s});return{outputIndices:i[0],outputShape:i[1]}}}),tp=As({sparseSegmentMean_:function(e,t,n){const r=bs(e,"data","sparseSegmentMean"),a=bs(t,"indices","sparseSegmentMean"),s=bs(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          "+s.shape);return us.runKernel(Sr,{data:r,indices:a,segmentIds:s})}}),np=As({sparseSegmentSum_:function(e,t,n){const r=bs(e,"data","sparseSegmentSum"),a=bs(t,"indices","sparseSegmentSum"),s=bs(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         "+a.shape);if(1!==s.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         "+s.shape);return us.runKernel(Ir,{data:r,indices:a,segmentIds:s})}}),rp=As({stringNGrams_:function(e,t,n,r,a,s,i,o){const l=bs(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: "+l.shape);const u=bs(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const h=us.runKernel(Nr,{data:l,dataSplits:u},{separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:i,preserveShortSequences:o});return{nGrams:h[0],nGramsSplits:h[1]}}}),ap=As({stringSplit_:function(e,t,n=!0){const r=bs(e,"input","stringSplit","string"),a=bs(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape "+r.shape);if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape "+a.shape);const s=us.runKernel(Mr,{input:r,delimiter:a},{skipEmpty:n});return{indices:s[0],values:s[1],shape:s[2]}}}),sp=As({stringToHashBucketFast_:function(e,t){const n=bs(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");return us.runKernel(Fr,{input:n},r)}}),ip={fft:Ac,ifft:wc,rfft:Ic,irfft:kc},op={hammingWindow:fd,hannWindow:md,frame:gd,stft:yd},lp={flipLeftRight:xd,resizeNearestNeighbor:Od,resizeBilinear:Dd,rotateWithOffset:vd,cropAndResize:bd,nonMaxSuppression:wd,nonMaxSuppressionAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=bs(e,"boxes","nonMaxSuppressionAsync"),i=bs(t,"scores","nonMaxSuppressionAsync"),o=Ad(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:c}=Id(u,h,n,r,a);return s!==e&&s.dispose(),i!==t&&i.dispose(),Rc(c,"int32")},nonMaxSuppressionWithScore:Fd,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=bs(e,"boxes","nonMaxSuppressionAsync"),o=bs(t,"scores","nonMaxSuppressionAsync"),l=Ad(i,o,n,r,a,s);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([i.data(),o.data()]),h=u[0],c=u[1],{selectedIndices:d,selectedScores:p}=Ed(h,c,n,r,a,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Rc(d,"int32"),selectedScores:Rc(p)}},nonMaxSuppressionPadded:Rd,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=bs(e,"boxes","nonMaxSuppressionAsync"),o=bs(t,"scores","nonMaxSuppressionAsync"),l=Ad(i,o,n,r,a,null),u=l.maxOutputSize,h=l.iouThreshold,c=l.scoreThreshold,[d,p]=await Promise.all([i.data(),o.data()]),{selectedIndices:f,validOutputs:m}=_d(d,p,u,h,c,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Rc(f,"int32"),validOutputs:uc(m,"int32")}},threshold:zd,transform:Pd},up={bandPart:$d,gramSchmidt:Ld,qr:jd},hp={absoluteDifference:Ud,computeWeightedLoss:Hd,cosineDistance:Gd,hingeLoss:qd,huberLoss:Kd,logLoss:Xd,meanSquaredError:Zd,sigmoidCrossEntropy:Yd,softmaxCrossEntropy:Jd},cp={sparseFillEmptyRows:Qd,sparseReshape:ep,sparseSegmentMean:tp,sparseSegmentSum:np},dp={stringNGrams:rp,stringSplit:ap,stringToHashBucketFast:sp},pp=class extends go{minimize(e,t=!1,n){const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return Bo(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return qu(e,t)}dispose(){null!=this.iterations_&&Bo(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:uc(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(pp,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var fp=class extends pp{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=us.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=us.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:t+"/accum_grad",variable:Vo(()=>gu(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:t+"/accum_var",variable:Vo(()=>gu(r).variable(!1))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;Vo(()=>{const e=Qo(nl(s,this.rho),nl(Th(a),1-this.rho)),t=nl(tl(_c(Qo(i,this.epsilon)),_c(Qo(s,this.epsilon))),a),n=Qo(nl(i,this.rho),nl(Th(t),1-this.rho));s.assign(e),i.assign(n);const o=Qo(nl(t,-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Bo(this.accumulatedGrads.map(e=>e.variable)),Bo(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};fp.className="Adadelta",bo(fp);var mp=class extends pp{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=us.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:t+"/accumulator",variable:Vo(()=>Eu(r.shape,this.initialAccumulatorValue).variable(e))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable;Vo(()=>{const e=Qo(s,Th(a));s.assign(e);const t=Qo(nl(tl(a,_c(Qo(e,us.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Bo(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};mp.className="Adagrad",bo(mp);var gp=class extends pp{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Vo(()=>{this.accBeta1=uc(t).variable(),this.accBeta2=uc(n).variable()}),null==r&&(this.epsilon=us.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Vo(()=>{const n=eh(1,this.accBeta1),r=eh(1,this.accBeta2);t.forEach((t,a)=>{const s=us.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:Vo(()=>gu(s).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:t+"/v",variable:Vo(()=>gu(s).variable(!1))});const i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;const o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,u=Qo(nl(o,this.beta1),nl(i,1-this.beta1)),h=Qo(nl(l,this.beta2),nl(Th(i),1-this.beta2)),c=tl(u,n),d=tl(h,r);o.assign(u),l.assign(h);const p=Qo(nl(tl(c,Qo(_c(d),this.epsilon)),-this.learningRate),s);s.assign(p)}),this.accBeta1.assign(nl(this.accBeta1,this.beta1)),this.accBeta2.assign(nl(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Bo(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&Bo(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),Vo(()=>{this.accBeta1.assign(Wh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Wh(this.beta2,this.iterations_+1))});const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};gp.className="Adam",bo(gp);var yp=class extends pp{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Vo(()=>{this.iteration=uc(0).variable(),this.accBeta1=uc(t).variable()}),null==r&&(this.epsilon=us.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Vo(()=>{const n=eh(1,this.accBeta1),r=tl(-this.learningRate,Qo(nl(this.iteration,this.decay),1));t.forEach((t,a)=>{const s=us.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:t+"/m",variable:gu(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:t+"/v",variable:gu(s).variable(!1)});const i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;const o=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,u=Qo(nl(o,this.beta1),nl(i,1-this.beta1)),h=nl(l,this.beta2),c=rl(i),d=xh(h,c);o.assign(u),l.assign(d);const p=Qo(nl(tl(r,n),tl(u,Qo(d,this.epsilon))),s);s.assign(p)}),this.iteration.assign(Qo(this.iteration,1)),this.accBeta1.assign(nl(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Bo(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&Bo(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};yp.className="Adamax",bo(yp);var bp=class extends pp{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=us.registeredVariables[t];Vo(()=>{const e=Qo(nl(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Wo(uc(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};bp.className="SGD",bo(bp);var xp=class extends bp{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=uc(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=us.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:t+"/momentum",variable:Vo(()=>gu(r).variable(e))}}const a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&Vo(()=>{let e;const t=Qo(nl(this.m,a),s);e=Qo(nl(this.c,this.useNesterov?Qo(s,nl(t,this.m)):t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Bo(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};xp.className="Momentum",bo(xp);var vp=class extends pp{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=us.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=us.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:t+"/rms",variable:Vo(()=>gu(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:t+"/momentum",variable:Vo(()=>gu(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:t+"/mg",variable:Vo(()=>gu(r).variable(a))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;Vo(()=>{const e=Qo(nl(i,this.decay),nl(Th(s),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=Qo(nl(t,this.decay),nl(s,1-this.decay)),l=tl(nl(s,this.learningRate),_c(eh(e,Qo(Th(a),this.epsilon)))),u=Qo(nl(o,this.momentum),l);i.assign(e),t.assign(a),o.assign(u);const h=eh(r,u);r.assign(h)}else{const e=Qo(nl(i,this.decay),nl(Th(s),1-this.decay)),t=Qo(nl(o,this.momentum),tl(nl(s,this.learningRate),_c(Qo(e,this.epsilon))));i.assign(e),o.assign(t);const n=eh(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Bo(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Bo(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&Bo(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};vp.className="RMSProp",bo(vp);var Ap=class{static sgd(e){return new bp(e)}static momentum(e,t,n=!1){return new xp(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new vp(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new gp(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new fp(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new yp(e,t,n,r,a)}static adagrad(e,t=.1){return new mp(e,t)}},wp={sgd:Ap.sgd,momentum:Ap.momentum,adadelta:Ap.adadelta,adagrad:Ap.adagrad,rmsprop:Ap.rmsprop,adamax:Ap.adamax,adam:Ap.adam},kp="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function Sp(){return new Promise(e=>kp(()=>e()))}var Ip={};function _p(e,t){const n=e[0].length;e.forEach((e,t)=>{J(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),J(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((e,a)=>{for(let s=0;s<n;s++)J(s===t||e[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function Ep(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}m(Ip,{ERF_A1:()=>Lp,ERF_A2:()=>Vp,ERF_A3:()=>Bp,ERF_A4:()=>Wp,ERF_A5:()=>jp,ERF_P:()=>$p,PARALLELIZE_THRESHOLD:()=>Tp,SELU_SCALE:()=>Pp,SELU_SCALEALPHA:()=>zp,applyActivation:()=>od,assertAndGetBroadcastShape:()=>pu,assertAxesAreInnerMostDims:()=>oh,assertParamsConsistent:()=>_p,assignToTypedArray:()=>Yp,axesAreInnerMostDims:()=>rh,calculateShapes:()=>Zi,checkEinsumDimSizes:()=>rf,combineLocations:()=>ah,complexWithEvenIndex:()=>Kp,complexWithOddIndex:()=>Xp,computeConv2DInfo:()=>xl,computeConv3DInfo:()=>vl,computeDefaultPad:()=>Al,computeDilation2DInfo:()=>gl,computeOptimalWindowSize:()=>Cp,computeOutAndReduceShapes:()=>sh,computeOutShape:()=>Ep,computePool2DInfo:()=>yl,computePool3DInfo:()=>bl,convertConv2DDataFormat:()=>Tl,decodeEinsumEquation:()=>tf,eitherStridesOrDilationsAreOne:()=>El,expandShapeToKeepDim:()=>ih,exponent:()=>Qp,exponents:()=>Jp,fromStringArrayToUint8:()=>ff,fromUint8ToStringArray:()=>pf,getAxesPermutation:()=>lh,getBroadcastDims:()=>cu,getComplexWithIndex:()=>Zp,getEinsumComputePath:()=>af,getEinsumPermutation:()=>nf,getFusedBiasGradient:()=>id,getFusedDyActivation:()=>sd,getImageCenter:()=>Np,getInnerMostAxes:()=>hh,getPermuted:()=>Fp,getReductionAxes:()=>du,getReshaped:()=>Mp,getReshapedPermuted:()=>Rp,getSliceBeginCoords:()=>Dp,getSliceSize:()=>Op,getUndoAxesPermutation:()=>uh,isIdentityPermutation:()=>sf,log:()=>Up,mergeRealAndImagArrays:()=>Gp,prepareAndValidate:()=>Gi,prepareSplitSize:()=>lf,segment_util:()=>uf,shouldFuse:()=>ld,slice_util:()=>Yi,splitRealAndImagArrays:()=>qp,tupleValuesAreOne:()=>_l,upcastType:()=>Ja,validateInput:()=>Xi,validateUpdateShape:()=>Ki,warn:()=>Hp});var Tp=30;function Cp(e){return e<=Tp?e:Ee(e,Math.floor(Math.sqrt(e)))}function Np(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Mp(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Fp(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function Rp(e,t,n,r=!0){const a=[];a.push(r?e[0]/n:e[0]*n);for(let s=1;s<e.length;++s)a.push(s<=t.length?r?t[s-1]*e[s]:e[s]/t[s-1]:e[s]);return a}function Dp(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Op(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var zp=1.7580993408473768,Pp=1.0507009873554805,$p=.3275911,Lp=.254829592,Vp=-.284496736,Bp=1.421413741,Wp=-1.453152027,jp=1.061405429;function Hp(...e){Ve().getBool("IS_TEST")||console.warn(...e)}function Up(...e){Ve().getBool("IS_TEST")||console.log(...e)}function Gp(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function qp(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Kp(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Xp(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Zp(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Yp(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Jp(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function Qp(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var ef=/->/g;function tf(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(ef,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,a]=e.split("->");J(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');const s=r.split(","),i=s.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let c=0;c<a.length;++c){const e=a[c];if(!s.some(t=>-1!==t.indexOf(e)))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===o.indexOf(e)&&o.push(e)}for(let c=0;c<r.length;++c){const e=r[c];-1===o.indexOf(e)&&","!==e&&o.push(e)}const l=new Array(s.length);for(let c=0;c<i;++c){if(new Set(s[c].split("")).size!==s[c].length)throw new Error(`Found duplicate axes in input component ${s[c]}. Support for duplicate axes in input is not implemented yet.`);l[c]=[];for(let e=0;e<s[c].length;++e)l[c].push(o.indexOf(s[c][e]))}const u=o.length,h=[];for(let c=a.length;c<u;++c)h.push(c);return{allDims:o,summedDims:h,idDims:l}}function nf(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;const r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function rf(e,t,n){const r=new Array(e);for(let a=0;a<n.length;++a){const e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:J(r[t[a][n]]===e[n],()=>`Expected dimension ${r[t[a][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`)}}function af(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let i=0;i<a;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const e=of(t,n[i]);for(const t of e)-1===s.indexOf(t)&&(r[i].push(t),s.push(t))}return{path:n,steps:r}}function sf(e){return e.every((e,t)=>e===t)}function of(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function lf(e,t,n=0){let r=[];if("number"==typeof t)J(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{J(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");const a=t.indexOf(-1);if(-1!==a){const r=t.reduce((e,t)=>t>0?e+t:e);t[a]=e.shape[n]-r}J(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}var uf={};function hf(e,t){let n,r=!1;for(e<=Tp?(n=e,r=!0):n=Ee(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ee(e,n+1);return n}function cf(e,t,n){const r=[],a=e.length;for(let s=0;s<a;s++)r.push(s!==t?e[s]:n);return r}function df(e,t,n,r){const a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let c=0;c<r;++c)if(e.shape[c]!==t.shape[c])throw new Error(`x.shape[${c}]: ${e.shape[c]} should be equal to indices.shape[${c}]: ${t.shape[c]}.`);const i=e.shape[n],o=[];let l=1,u=1,h=1;for(let c=0;c<r;++c)o.push(e.shape[c]),l*=e.shape[c];for(let c=r;c<n;c++)o.push(e.shape[c]),u*=e.shape[c];for(let c=r;c<a;c++)o.push(t.shape[c]);for(let c=n+1;c<s;c++)o.push(e.shape[c]),h*=e.shape[c];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:i,outputShape:o}}function pf(e){try{return e.map(e=>Ea(e))}catch(aH){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+aH)}}function ff(e){return e.map(e=>_a(e))}m(uf,{collectGatherOpShapeInfo:()=>df,computeOutShape:()=>cf,segOpComputeOptimalWindowSize:()=>hf});var mf={};m(mf,{nonMaxSuppressionV3Impl:()=>Id,nonMaxSuppressionV4Impl:()=>_d,nonMaxSuppressionV5Impl:()=>Ed,whereImpl:()=>Hc});var gf={kernelName:Ue,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,Nc(fi(n,"float32"),-1))}}},yf={kernelName:Ge,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Th(fi(n,"float32")),r=_c(eh(uc(1),t));return Zu(tl(e,r))}}}},bf={kernelName:qe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=_c(eh(Th(fi(n,"float32")),1));return tl(e,t)}}}},xf={kernelName:Ke,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{let t=e;const r=du(n.shape,a);return r.length>0&&(t=th(t,r)),Cl(t,n.shape)},b:()=>{let t=e;const n=du(r.shape,a);return n.length>0&&(t=th(t,n)),Cl(t,r.shape)}}}},vf={kernelName:Xe,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},Af={kernelName:Je,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gu(n)}}},wf={kernelName:Qe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gu(n)}}},kf={kernelName:et,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,_c(eh(uc(1),Th(fi(n,"float32")))))}}},Sf={kernelName:tt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=_c(Qo(uc(1),Th(fi(n,"float32"))));return tl(e,t)}}}},If={kernelName:at,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{const t=Qo(Th(n),Th(r));let s=nl(e,tl(r,t));const i=du(n.shape,a);return i.length>0&&(s=th(s,i)),Cl(s,n.shape)},b:()=>{const t=Qo(Th(n),Th(r));let s=Zu(nl(e,tl(n,t)));const i=du(r.shape,a);return i.length>0&&(s=th(s,i)),Cl(s,r.shape)}}}},_f={kernelName:nt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,Qo(Th(fi(n,"float32")),1))}}},Ef={kernelName:rt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,eh(uc(1),Th(fi(n,"float32"))))}}},Tf=As({avgPool3dGrad_:function(e,t,n,r,a,s){const i=bs(e,"dy","avgPool3dGrad"),o=bs(t,"input","avgPool3dGrad");let l=i,u=o,h=!1;4===o.rank&&(h=!0,l=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=Cl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),J(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),J(5===u.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),null!=s&&J(se(a),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${s} but got pad ${a}.`);const c=us.runKernel(lt,{dy:l,input:u},{filterSize:n,strides:r,pad:a,dimRoundingMode:s});return h?Cl(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Cf={kernelName:ot,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>Tf(e,r,a,s,i,o)}}},Nf=As({avgPoolGrad_:function(e,t,n,r,a){const s=bs(e,"dy","avgPoolGrad"),i=bs(t,"input","avgPoolGrad");J(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let o=i,l=s,u=!1;3===i.rank&&(u=!0,o=Cl(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=Cl(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),J(4===o.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const h=us.runKernel(it,{dy:l,input:o},{filterSize:n,strides:r,pad:a});return u?Cl(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Mf={kernelName:st,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:i}=n;return{x:()=>Nf(e,r,a,s,i)}}},Ff={kernelName:ut,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:s,transposeB:i}=n;return s||i?!s&&i?{a:()=>Oi(e,a,!1,!1),b:()=>Oi(e,r,!0,!1)}:s&&!i?{a:()=>Oi(a,e,!1,!0),b:()=>Oi(r,e,!1,!1)}:{a:()=>Oi(a,e,!0,!0),b:()=>Oi(e,r,!0,!0)}:{a:()=>Oi(e,a,!1,!0),b:()=>Oi(r,e,!0,!1)}}},Rf={kernelName:ht,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>Vh(e,r,a)}}},Df={kernelName:dt,gradFunc:(e,t,n)=>{const r=n.inputShape,a=n.shape,s=Array.from(a);for(let o=r.length-1;o>=0;o--)if(r[o]===a[o])s[o]=1;else if(1!==r[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);const i=[];for(let o=0;o<s.length;o++)s[o]>1&&i.push(o);return{x:()=>th(e,i,!0)}}},Of={kernelName:pt,gradFunc:e=>({x:()=>e.clone()})},zf={kernelName:ft,gradFunc:e=>({x:()=>gu(e)})},Pf={kernelName:mt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>mu(dh(Mu(r,a),$u(r,s)),e,gu(e))}}},$f={kernelName:yt,inputsToSave:["x"],gradFunc:gf.gradFunc},Lf={kernelName:bt,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:a}=n,s=de(a,t[0].shape)[0],i=r.map(e=>e[s]);return Sc(e,i,s).map(e=>()=>e)}},Vf={kernelName:xt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:s,strides:i,pad:o,dataFormat:l}=n;return J(_l(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>Jl(r.shape,e,a,i,o,l),filter:()=>ad(r,e,a.shape,i,o,l)}}},Bf={kernelName:At,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:s,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Zl(e,a,s,i,o,1,l),filter:()=>ad(e,r,a.shape,s,i,o,l)}}},Wf=As({conv3DBackpropFilter_:function(e,t,n,r,a){let s=e;4===e.rank&&(s=Cl(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;return 4===i.rank&&(i=Cl(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),J(5===s.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),J(5===i.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),J(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),J(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),J(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`),us.runKernel(kt,{x:s,dy:i},{strides:r,pad:a,filterShape:n})}}),jf={kernelName:wt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s}=n;J(_l(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,o]=t;return{x:()=>tu(i.shape,e,o,a,s),filter:()=>Wf(i,e,o.shape,a,s)}}},Hf={kernelName:It,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(Zu(fc(fi(n,"float32"))),e)}}},Uf={kernelName:_t,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(mc(fi(n,"float32")),e)}}},Gf={kernelName:Et,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:s,reverse:i}=n;return{x:()=>{const t=lh([a],r.rank);let n=su(e,a,s,!i);return null!=t&&(n=Pi(n,t)),n}}}},qf={kernelName:Mt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s,dimRoundingMode:i}=n,o=null==r?[1,1]:r;J(_l(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=t;return J(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),J(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),J(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),J(El(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),null!=i&&J(se(s),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),{x:()=>cd(l.shape,e,u,a,s,r,i),filter:()=>hd(l,e,u.shape,a,s,r,i)}}},Kf={kernelName:Ot,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,s={x:r,filter:a,dy:e},i={x:r,filter:a,dy:e};return{x:()=>us.runKernel(zt,s,n),filter:()=>us.runKernel(Pt,i,n)}}},Xf={kernelName:Vt,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>us.runKernel(Bt,r)}}},Zf={kernelName:Wt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=nl(wu(Zu(Th(n))),2/Math.sqrt(Math.PI));return{x:()=>nl(e,r)}}},Yf={kernelName:Ht,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,n)}}},Jf={kernelName:Ut,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Cl(e,n.shape)}}},Qf={kernelName:Gt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,wu(n))}}},em={kernelName:Zt,gradFunc:e=>({x:()=>gu(e)})},tm={kernelName:Yt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{const t=tl(e,fi(r,"float32")),s=du(n.shape,a);return s.length>0?Cl(th(t,s),n.shape):t},b:()=>{let t=nl(e,fi(n,"float32"));const s=du(r.shape,a);s.length>0&&(t=Cl(th(t,s),r.shape));const i=Th(r);return Zu(tl(t,fi(i,"float32")))}}}},nm={kernelName:Jt,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,s,i,o]=t,l=null==o?uc(1):o,u=du(s.shape,a.shape),h=[];if(1===s.rank){for(let e=0;e<a.shape.length-1;++e)h.push(a.shape[e]);h.push(1)}const c=eh(a,s),d=nl(e,l),p=lc(Qo(i,uc(r))),f=nl(nl(nl(p,p),p),uc(-.5));return{x:()=>Cl(nl(nl(e,1===s.rank?Iu(Cl(p,[1,1,1,s.shape[0]]),h):p),l),a.shape),mean:()=>{let e=nl(nl(p,uc(-1)),d);return 1===s.rank&&(e=th(e,u)),Cl(e,s.shape)},variance:()=>{let e=nl(nl(f,c),d);return 1===s.rank&&(e=th(e,u)),Cl(e,s.shape)},scale:()=>{const t=nl(c,p);let n=nl(e,t);return 1===s.rank&&(n=th(n,u)),Cl(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=th(t,u)),Cl(t,s.shape)}}}},rm={kernelName:Qt,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:s}=n,i=de(s,r.shape)[0];return{x:()=>{const t=r.shape,n=a.size,o=t.slice(0,i),l=o.length,u=t.slice(s,t.length).slice(1),h=u.length,c=am(0,l),d=am(l+1,l+1+h),p=sm([o,[n],u]),f=Cl(e,p),m=Cl(a,[n]),g=sm([[l],c,d]),y=Pi(f,g);let b=Bc(y,m,r.shape[i]);const x=uh(g);return b=Pi(b,x),b},indices:()=>a}}};function am(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function sm(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var im={kernelName:nn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>gu(n),b:()=>gu(r)}}},om={kernelName:rn,gradFunc:e=>({x:()=>fi(e,"float32")})},lm={kernelName:on,gradFunc:e=>({x:()=>gu(e)})},um={kernelName:ln,gradFunc:e=>({x:()=>gu(e)})},hm={kernelName:un,gradFunc:e=>({x:()=>gu(e)})},cm={kernelName:hn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,s=Nu(r,0);return{x:()=>mu(s,e,nl(e,a))}}},dm={kernelName:mn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,Qo(n,1))}}},pm={kernelName:fn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,fi(n,"float32"))}}},fm={kernelName:xn,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=wu(r);return eh(e,nl(th(e,a,!0),t))}}}},mm=As({localResponseNormalizationBackprop_:function(e,t,n,r=5,a=1,s=1,i=.5){return us.runKernel(An,{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:s,beta:i})}}),gm={kernelName:vn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:s,bias:i,alpha:o,beta:l}=n;return{x:()=>mm(r,a,e,s,i,o,l)}}};function ym(e,t,n,r){return t.rank<n.rank&&(t=Cl(t,ih(t.shape,r))),e.rank<n.rank&&(e=Cl(e,ih(e.shape,r))),{x:()=>nl(e,fi(fu(n,t),e.dtype))}}var bm={kernelName:wn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,s=t[0],i=ym(e,t[1],s,de(a,s.shape));return{x:()=>i.x()}}},xm={kernelName:kn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>nl(e,fi(Mu(n,r),"float32")),b:()=>nl(e,fi(Pu(n,r),"float32"))}}},vm=As({maxPool3dGrad_:function(e,t,n,r,a,s,i){const o=bs(e,"dy","maxPool3dGrad"),l=bs(t,"input","maxPool3dGrad"),u=bs(n,"output","maxPool3dGrad");let h=o,c=l,d=u,p=!1;4===l.rank&&(p=!0,h=Cl(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Cl(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Cl(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),J(5===h.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),J(5===c.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),J(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),null!=i&&J(se(s),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`);const f=us.runKernel(En,{dy:h,input:c,output:d},{filterSize:r,strides:a,pad:s,dimRoundingMode:i});return p?Cl(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),Am={kernelName:_n,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>vm(e,r,a,s,i,o,l)}}},wm=As({maxPoolGrad_:function(e,t,n,r,a,s,i){const o=bs(e,"dy","maxPoolGrad"),l=bs(t,"input","maxPoolGrad"),u=bs(n,"output","maxPoolGrad");return J(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),J(4===o.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),J(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),null!=i&&J(se(s),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),us.runKernel(In,{dy:o,input:l,output:u},{filterSize:r,strides:a,pad:s,dimRoundingMode:i})}}),km={kernelName:Hn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>Dl(e,s,r.shape)}}},Sm={kernelName:xr,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>Pl(e,r,a)}}},Im={kernelName:vr,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>Fl(e,r)}}},_m=[gf,yf,bf,xf,vf,Af,wf,kf,Sf,If,_f,Ef,Cf,Mf,Ff,Rf,Df,Of,zf,Pf,$f,Lf,Bf,Vf,jf,Hf,Uf,Gf,qf,Kf,{kernelName:$t,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{const t=tl(e,fi(r,"float32")),s=du(n.shape,a);return s.length>0?Cl(th(t,s),n.shape):t},b:()=>{let t=nl(e,fi(n,"float32"));const s=du(r.shape,a);s.length>0&&(t=Cl(th(t,s),r.shape));const i=Th(r);return Zu(tl(t,fi(i,"float32")))}}}},Xf,Zf,Yf,Jf,Qf,tm,em,nm,rm,im,om,lm,um,hm,cm,dm,pm,fm,gm,bm,bm,xm,Am,{kernelName:Sn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:i,pad:o}=n;return{x:()=>wm(e,r,a,s,i,o)}}},{kernelName:Cn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,s=de(a,r.shape),i=ne(sh(r.shape,s)[1]);return{x:()=>{const t=r.shape.slice();s.forEach(e=>{t[e]=1});const n=Cl(e,t);return tl(nl(n,wh(r.shape,"float32")),i)}}}},{kernelName:Nn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[s,i]=t,o=ym(e,i,s,de(a,s.shape));return{x:()=>o.x()}}},{kernelName:Mn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>nl(e,fi($u(n,r),"float32")),b:()=>nl(e,fi(Nu(n,r),"float32"))}}},{kernelName:Fn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>Dl(e,s,r.shape)}}},{kernelName:Rn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{const t=du(n.shape,a);return t.length>0?Cl(th(e,t),n.shape):e},b:()=>{const t=nl(e,Zu(Tu(tl(n,r)))),s=du(r.shape,a);return s.length>0?Cl(th(t,s),r.shape):t}}}},{kernelName:On,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{const t=nl(e,fi(r,"float32")),s=du(n.shape,a);return s.length>0?Cl(th(t,s),n.shape):t},b:()=>{const t=nl(e,fi(n,"float32")),s=du(r.shape,a);return s.length>0?Cl(th(t,s),r.shape):t}}}},{kernelName:zn,gradFunc:e=>({x:()=>Zu(e)})},{kernelName:Wn,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Ah(n.shape,"float32")}}},{kernelName:Bn,gradFunc:e=>({x:()=>gu(e)})},{kernelName:jn,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return Wc(e,r).map(e=>()=>e)}},km,km,{kernelName:Gn,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,s=n,i=r,o=pu(s.shape,i.shape);return{a:()=>{const t=fi(i,"float32");let n=nl(e,nl(t,Wh(s,eh(t,uc(1)))));const r=du(s.shape,o);return r.length>0&&(n=th(n,r)),Cl(n,s.shape)},b:()=>{const t=Nu(s,0),n=mu(t,Bu(s),gu(s));let r=nl(e,nl(a,n));const l=du(i.shape,o);return l.length>0&&(r=th(r,l)),Cl(r,i.shape)}}}},{kernelName:qn,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=Nu(n,0);return{x:()=>mu(a,e,nl(e,r)),alpha:()=>{let t=mu(a,gu(e),nl(e,n));const s=du(r.shape,e.shape);return s.length>0&&(t=th(t,s)),Cl(t,r.shape)}}}},{kernelName:Yn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,Zu(Th(n)))}}},{kernelName:ar,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=nl($u(n,6),Nc(n));return{x:()=>nl(e,fi(r,"float32"))}}},{kernelName:Jn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,fi(Nc(n),"float32"))}}},{kernelName:Qn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,n.shape)}}},{kernelName:nr,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>us.runKernel(rr,a,n)}}},{kernelName:er,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>us.runKernel(tr,a,n)}}},{kernelName:sr,gradFunc:(e,t,n)=>{const{dims:r}=n,a=de(r,e.shape);return{x:()=>nc(e,a)}}},{kernelName:ir,gradFunc:e=>({x:()=>gu(e)})},{kernelName:or,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zu(tl(e,nl(Wh(n,1.5),2)))}}},{kernelName:ur,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>fi(gu(n),"float32"),t:()=>nl(e,fi(n,e.dtype)),e:()=>nl(e,fi(ph(n),e.dtype))}}},{kernelName:hr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Nu(n,uc(0)),r=uc(zp),a=uc(Pp),s=nl(e,a),i=nl(nl(e,r),wu(fi(n,"float32")));return mu(t,s,i)}}}},{kernelName:mr,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,nl(n,eh(uc(1),n)))}}},{kernelName:fr,gradFunc:e=>({x:()=>gu(e)})},{kernelName:dr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(ru(fi(n,"float32")),e)}}},{kernelName:pr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(au(fi(n,"float32")),e)}}},{kernelName:cr,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:s}=n,i=r.shape,[o,l]=po(r,a,s),u=[];for(let h=0;h<e.rank;h++)u.push([o[h],i[h]-o[h]-l[h]]);return{x:()=>Oh(e,u)}}},{kernelName:Ar,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,s=nl(e,r);return{logits:()=>eh(s,nl(th(s,[a],!0),r))}}},{kernelName:gr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,Rl(n))}}},Sm,Sm,Im,Im,{kernelName:yr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,nl(_c(fi(n,"float32")),2))}}},{kernelName:Er,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=uc(2);return{a:()=>nl(e,nl(a,eh(n,r))),b:()=>nl(e,nl(a,eh(r,n)))}}},{kernelName:Tr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(e,nl(fi(n,"float32"),2))}}},{kernelName:Hr,gradFunc:e=>({x:()=>gu(e)})},{kernelName:Rr,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=pu(n.shape,r.shape);return{a:()=>{let t=e;const r=du(n.shape,a);return r.length>0&&(t=th(t,r)),Cl(t,n.shape)},b:()=>{let t=e;const n=du(r.shape,a);return n.length>0&&(t=th(t,n)),Cl(Zu(t),r.shape)}}}},{kernelName:br,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:s}=n;de(s,r.shape).forEach(e=>{a[e]=1});const i=Cl(e,a),o=nl(i,wh(r.shape,"float32"));return{x:()=>o}}},{kernelName:Dr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tl(e,Th(ru(n)))}}},{kernelName:Or,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nl(eh(uc(1),Th(n)),e)}}},{kernelName:zr,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=gu(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=Qo(t,Dl(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)t=Qo(t,Dl(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)t=Qo(t,Dl(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)for(let o=0;o<a[3];++o)t=Qo(t,Dl(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:Lr,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,s=uh(a);return{x:()=>Pi(e,s)}}},{kernelName:Br,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>Cc(e,a)}}},{kernelName:Wr,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=xh(t,gu(t)),r=Cu(e,n);let a=Mu(t,uc(0,"int32"));const s=r.rank-a.rank;for(let o=0;o<s;++o)a=ku(a,o+1);a=dh(a,wh(r.shape,"bool"));const i=gu(r);return mu(a,r,i)}(e,n)}}},{kernelName:jr,gradFunc:e=>({x:()=>gu(e)})}];for(const sH of _m)na(sH);$a().prototype.abs=function(){return this.throwIfDisposed(),rl(this)},$a().prototype.acos=function(){return this.throwIfDisposed(),al(this)},$a().prototype.acosh=function(){return this.throwIfDisposed(),sl(this)},$a().prototype.add=function(e){return this.throwIfDisposed(),Qo(this,e)},$a().prototype.all=function(e,t){return this.throwIfDisposed(),ol(this,e,t)},$a().prototype.any=function(e,t){return this.throwIfDisposed(),ll(this,e,t)},$a().prototype.argMax=function(e){return this.throwIfDisposed(),ul(this,e)},$a().prototype.argMin=function(e){return this.throwIfDisposed(),hl(this,e)},$a().prototype.asScalar=function(){return this.throwIfDisposed(),J(1===this.size,()=>"The array must have only 1 element."),Cl(this,[])},$a().prototype.asType=function(e){return this.throwIfDisposed(),fi(this,e)},$a().prototype.as1D=function(){return this.throwIfDisposed(),Cl(this,[this.size])},$a().prototype.as2D=function(e,t){return this.throwIfDisposed(),Cl(this,[e,t])},$a().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Cl(this,[e,t,n])},$a().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Cl(this,[e,t,n,r])},$a().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Cl(this,[e,t,n,r,a])},$a().prototype.asin=function(){return this.throwIfDisposed(),cl(this)},$a().prototype.asinh=function(){return this.throwIfDisposed(),dl(this)},$a().prototype.atan=function(){return this.throwIfDisposed(),pl(this)},$a().prototype.atan2=function(e){return this.throwIfDisposed(),fl(this,e)},$a().prototype.atanh=function(){return this.throwIfDisposed(),ml(this)},$a().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Nl(this,e,t,n,r)},$a().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Pl(this,e,t)},$a().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),$l(this,e,t,n,r,a)},$a().prototype.broadcastTo=function(e){return this.throwIfDisposed(),jl(this,e)},$a().prototype.cast=function(e){return this.throwIfDisposed(),fi(this,e)},$a().prototype.ceil=function(){return this.throwIfDisposed(),Hl(this)},$a().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ul(this,e,t)},$a().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Pa&&(e=[e]),Fl([this,...e],t)},$a().prototype.conv1d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Yl(this,e,t,n,r,a,s)},$a().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Ql(this,e,t,n,r,a)},$a().prototype.conv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Zl(this,e,t,n,r,a,s)},$a().prototype.cos=function(){return this.throwIfDisposed(),ru(this)},$a().prototype.cosh=function(){return this.throwIfDisposed(),au(this)},$a().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),su(this,e,t,n)},$a().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ou(this,e,t)},$a().prototype.depthwiseConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),lu(this,e,t,n,r,a,s)},$a().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),hu(this,e,t,n,r,a)},$a().prototype.divNoNan=function(e){return this.throwIfDisposed(),yu(this,e)},$a().prototype.div=function(e){return this.throwIfDisposed(),tl(this,e)},$a().prototype.dot=function(e){return this.throwIfDisposed(),bu(this,e)},$a().prototype.elu=function(){return this.throwIfDisposed(),vu(this)},$a().prototype.equal=function(e){return this.throwIfDisposed(),fu(this,e)},$a().prototype.erf=function(){return this.throwIfDisposed(),Au(this)},$a().prototype.exp=function(){return this.throwIfDisposed(),wu(this)},$a().prototype.expandDims=function(e){return this.throwIfDisposed(),ku(this,e)},$a().prototype.expm1=function(){return this.throwIfDisposed(),Su(this)},$a().prototype.fft=function(){return this.throwIfDisposed(),Ac(this)},$a().prototype.flatten=function(){return this.throwIfDisposed(),Cl(this,[this.size])},$a().prototype.floor=function(){return this.throwIfDisposed(),Tu(this)},$a().prototype.floorDiv=function(e){return this.throwIfDisposed(),el(this,e)},$a().prototype.gather=function(e,t){return this.throwIfDisposed(),Cu(this,e,t)},$a().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Mu(this,e)},$a().prototype.greater=function(e){return this.throwIfDisposed(),Nu(this,e)},$a().prototype.ifft=function(){return this.throwIfDisposed(),wc(this)},$a().prototype.irfft=function(){return this.throwIfDisposed(),kc(this)},$a().prototype.isFinite=function(){return this.throwIfDisposed(),Ru(this)},$a().prototype.isInf=function(){return this.throwIfDisposed(),Du(this)},$a().prototype.isNaN=function(){return this.throwIfDisposed(),Ou(this)},$a().prototype.leakyRelu=function(e){return this.throwIfDisposed(),zu(this,e)},$a().prototype.lessEqual=function(e){return this.throwIfDisposed(),$u(this,e)},$a().prototype.less=function(e){return this.throwIfDisposed(),Pu(this,e)},$a().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Vu(this,e,t,n,r)},$a().prototype.logSigmoid=function(){return this.throwIfDisposed(),Ju(this)},$a().prototype.logSoftmax=function(e){return this.throwIfDisposed(),nh(this,e)},$a().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),ch(this,e,t)},$a().prototype.log=function(){return this.throwIfDisposed(),Bu(this)},$a().prototype.log1p=function(){return this.throwIfDisposed(),Wu(this)},$a().prototype.logicalAnd=function(e){return this.throwIfDisposed(),dh(this,e)},$a().prototype.logicalNot=function(){return this.throwIfDisposed(),ph(this)},$a().prototype.logicalOr=function(e){return this.throwIfDisposed(),fh(this,e)},$a().prototype.logicalXor=function(e){return this.throwIfDisposed(),mh(this,e)},$a().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Oi(this,e,t,n)},$a().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),gh(this,e,t,n,r)},$a().prototype.max=function(e,t){return this.throwIfDisposed(),Qu(this,e,t)},$a().prototype.maximum=function(e){return this.throwIfDisposed(),xh(this,e)},$a().prototype.mean=function(e,t){return this.throwIfDisposed(),vh(this,e,t)},$a().prototype.min=function(e,t){return this.throwIfDisposed(),Sh(this,e,t)},$a().prototype.minimum=function(e){return this.throwIfDisposed(),Ih(this,e)},$a().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),_h(this,e,t)},$a().prototype.mod=function(e){return this.throwIfDisposed(),Eh(this,e)},$a().prototype.mul=function(e){return this.throwIfDisposed(),nl(this,e)},$a().prototype.neg=function(){return this.throwIfDisposed(),Zu(this)},$a().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Kc(this,e,t,n)},$a().prototype.notEqual=function(e){return this.throwIfDisposed(),Fh(this,e)},$a().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),zi(this,e,t,n)},$a().prototype.onesLike=function(){return this.throwIfDisposed(),Rh(this)},$a().prototype.pad=function(e,t){return this.throwIfDisposed(),Oh(this,e,t)},$a().prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Bh(this,e,t,n,r,a)},$a().prototype.pow=function(e){return this.throwIfDisposed(),Wh(this,e)},$a().prototype.prelu=function(e){return this.throwIfDisposed(),jh(this,e)},$a().prototype.prod=function(e,t){return this.throwIfDisposed(),Hh(this,e,t)},$a().prototype.reciprocal=function(){return this.throwIfDisposed(),Qh(this)},$a().prototype.relu=function(){return this.throwIfDisposed(),ec(this)},$a().prototype.relu6=function(){return this.throwIfDisposed(),tc(this)},$a().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Cl(this,e.shape)},$a().prototype.reshape=function(e){return this.throwIfDisposed(),Cl(this,e)},$a().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Dd(this,e,t,n)},$a().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Od(this,e,t,n)},$a().prototype.reverse=function(e){return this.throwIfDisposed(),nc(this,e)},$a().prototype.rfft=function(){return this.throwIfDisposed(),Ic(this)},$a().prototype.round=function(){return this.throwIfDisposed(),oc(this)},$a().prototype.rsqrt=function(){return this.throwIfDisposed(),lc(this)},$a().prototype.selu=function(){return this.throwIfDisposed(),hc(this)},$a().prototype.separableConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),cc(this,e,t,n,r,a,s)},$a().prototype.sigmoid=function(){return this.throwIfDisposed(),Rl(this)},$a().prototype.sign=function(){return this.throwIfDisposed(),pc(this)},$a().prototype.sin=function(){return this.throwIfDisposed(),fc(this)},$a().prototype.sinh=function(){return this.throwIfDisposed(),mc(this)},$a().prototype.slice=function(e,t){return this.throwIfDisposed(),Dl(this,e,t)},$a().prototype.softmax=function(e){return this.throwIfDisposed(),vc(this,e)},$a().prototype.softplus=function(){return this.throwIfDisposed(),Yu(this)},$a().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Vh(this,e,t)},$a().prototype.split=function(e,t){return this.throwIfDisposed(),Sc(this,e,t)},$a().prototype.sqrt=function(){return this.throwIfDisposed(),_c(this)},$a().prototype.square=function(){return this.throwIfDisposed(),Th(this)},$a().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Ec(this,e)},$a().prototype.squeeze=function(e){return this.throwIfDisposed(),Tc(this,e)},$a().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Pa?[this,e]:[this,...e];return Cc(n,t)},$a().prototype.step=function(e){return this.throwIfDisposed(),Nc(this,e)},$a().prototype.stridedSlice=function(e,t,n,r,a,s,i,o){return this.throwIfDisposed(),Mc(this,e,t,n,r,a,s,i,o)},$a().prototype.sub=function(e){return this.throwIfDisposed(),eh(this,e)},$a().prototype.sum=function(e,t){return this.throwIfDisposed(),th(this,e,t)},$a().prototype.tan=function(){return this.throwIfDisposed(),Fc(this)},$a().prototype.tanh=function(){return this.throwIfDisposed(),Ol(this)},$a().prototype.tile=function(e){return this.throwIfDisposed(),Iu(this,e)},$a().prototype.toBool=function(){return this.throwIfDisposed(),fi(this,"bool")},$a().prototype.toFloat=function(){return this.throwIfDisposed(),fi(this,"float32")},$a().prototype.toInt=function(){return this.throwIfDisposed(),fi(this,"int32")},$a().prototype.topk=function(e,t){return this.throwIfDisposed(),$c(this,e,t)},$a().prototype.transpose=function(e){return this.throwIfDisposed(),Pi(this,e)},$a().prototype.unique=function(e){return this.throwIfDisposed(),Vc(this,e)},$a().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Bc(this,e,t)},$a().prototype.unstack=function(e){return this.throwIfDisposed(),Wc(this,e)},$a().prototype.where=function(e,t){return this.throwIfDisposed(),mu(e,this,t)},$a().prototype.zerosLike=function(){return this.throwIfDisposed(),gu(this)};var Em,Tm={};function Cm(){return null==Em&&(Em=Yo().epsilon()),Em}m(Tm,{maxNorm:()=>hg,minMaxNorm:()=>pg,nonNeg:()=>dg,unitNorm:()=>cg});var Nm=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Nm.prototype)}},Mm=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Mm.prototype)}},Fm=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fm.prototype)}},Rm=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Rm.prototype)}},Dm=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Dm.prototype)}};function Om(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function zm(e,t){if(!e)throw new Dm(t)}function Pm(e,t){let n=0;for(const r of e)r===t&&n++;return n}function $m(e){return 1===e.length?e[0]:e}function Lm(e){return Array.isArray(e)?e:[e]}function Vm(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Bm(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}var Wm={};function jm(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Hm(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>Hm(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?Hm(t):e[n]=t.value)}}}function Um(e,t={},n={},r="object",a=!1){if("string"==typeof e){const a=e;let s;if(a in n)s=n[a];else if(a in Wm)s=Wm[a];else if(s=t[a],null==s)throw new Fm(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{const s=e;if(null==s.className||null==s.config)throw new Fm(`${r}: Improper config format: ${JSON.stringify(s)}.\n'className' and 'config' must set.`);const i=s.className;let o,l;if(i in n?[o,l]=n[i]:i in Wm?[o,l]=Wm.className:i in t&&([o,l]=t[i]),null==o)throw new Fm(`Unknown ${r}: ${i}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(Wm))e[n]=Wm[n];for(const a of Object.keys(n))e[a]=n[a];s.config.customObjects=e;const t=Object.assign({},Wm);for(const a of Object.keys(n))Wm[a]=n[a];Hm(s.config);const r=l(o,s.config,n,a);return Wm=Object.assign({},t),r}{const e=Object.assign({},Wm);for(const r of Object.keys(n))Wm[r]=n[r];const t=new o(s.config);return Wm=Object.assign({},e),t}}}function Gm(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function qm(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function Km(e){if(null==e)throw new Fm("Invalid value in obj: "+JSON.stringify(e));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Xm(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Fm(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function Zm(e,t,n=0,r=1/0){return zm(n>=0),zm(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function Ym(e,t){Array.isArray(e)?(oa.assert(e.length>0,()=>t+" is unexpectedly an empty array."),e.forEach((e,n)=>Ym(e,`element ${n+1} of ${t}`))):oa.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${Jm(e)}.`)}function Jm(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>Jm(e)).join(",")+"]":"string"==typeof e?`"${e}"`:""+e}function Qm(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function eg(e,t){return Vo(()=>_c(th(nl(e,e),t,!0)))}var tg=class extends mo.Serializable{getConfig(){return{}}},ng=class extends tg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vo(()=>{const t=eg(e,this.axis),n=Ul(t,0,this.maxValue);return nl(e,tl(n,Qo(Cm(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};ng.className="MaxNorm",mo.registerClass(ng);var rg=class extends tg{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vo(()=>tl(e,Qo(Cm(),eg(e,this.axis))))}getConfig(){return{axis:this.axis}}};rg.className="UnitNorm",mo.registerClass(rg);var ag=class extends tg{apply(e){return ec(e)}};ag.className="NonNeg",mo.registerClass(ag);var sg=class extends tg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vo(()=>{const t=eg(e,this.axis),n=Qo(nl(this.rate,Ul(t,this.minValue,this.maxValue)),nl(1-this.rate,t));return nl(e,tl(n,Qo(Cm(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};sg.className="MinMaxNorm",mo.registerClass(sg);var ig={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function og(e){return jm(e)}function lg(e,t={}){return Um(e,mo.SerializationMap.getMap().classNameMap,t,"constraint")}function ug(e){return null==e?null:"string"==typeof e?lg({className:e in ig?ig[e]:e,config:{}}):e instanceof tg?e:lg(e)}function hg(e){return new ng(e)}function cg(e){return new rg(e)}function dg(){return new ag}function pg(e){return new sg(e)}var fg={};m(fg,{constant:()=>vy,glorotNormal:()=>Ey,glorotUniform:()=>_y,heNormal:()=>Ty,heUniform:()=>Cy,identity:()=>Sy,leCunNormal:()=>Ny,leCunUniform:()=>My,ones:()=>xy,orthogonal:()=>Fy,randomNormal:()=>wy,randomUniform:()=>Ay,truncatedNormal:()=>ky,varianceScaling:()=>Iy,zeros:()=>by});var mg=["channelsFirst","channelsLast"],gg=["nearest","bilinear"],yg=["valid","same","causal"],bg=["max","avg"],xg=["sum","mul","concat","ave"],vg=new Map;function Ag(e){Xm(mg,"DataFormat",e)}function wg(e){Xm(yg,"PaddingMode",e)}function kg(e){Xm(bg,"PoolMode",e)}var Sg=[];function Ig(e,t){Sg.push(e);try{const e=t();return Sg.pop(),e}catch(n){throw Sg.pop(),n}}function _g(e){if(!Cg(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Sg.length?"":Sg.join("/")+"/")+e}function Eg(e){if(!Cg(e))throw new Error("Not a valid tensor name: '"+e+"'");vg.has(e)||vg.set(e,0);const t=vg.get(e);if(vg.set(e,vg.get(e)+1),t>0){const n=`${e}_${t}`;return vg.set(n,1),n}return e}var Tg=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Cg(e){return!!e.match(Tg)}function Ng(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function Mg(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function Fg(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Rg(e,t){if(t<e)throw new Fm(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Dg(e,t){return e.asType(t)}function Og(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function zg(e,t,n){return Vo(()=>{switch(e.rank){case 1:return gc(e,t,n);case 2:return yc(e,[t,0],[n,e.shape[1]]);case 3:return bc(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return xc(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Dl(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Dl(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Fm("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function Pg(e,t,n){return Vo(()=>{switch(e.rank){case 1:return gc(e,t,n);case 2:return yc(e,[0,t],[e.shape[0],n]);case 3:return bc(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return xc(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Fm("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function $g(e,t,n,r){return Vo(()=>{switch(e.rank){case 1:return gc(e,t,n);case 2:switch(r){case 1:return zg(e,t,n);case 2:return Pg(e,t,n);default:throw new Fm("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return zg(e,t,n);case 2:return bc(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Pg(e,t,n);default:throw new Fm("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return zg(e,t,n);case 2:return xc(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return xc(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Pg(e,t,n);default:throw new Fm("The axis is not within the rank of the tensor "+r)}default:throw new Fm("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function Lg(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),Fl(e,t)}function Vg(e,t){switch(e.rank){case 1:return Gl([e,t]);case 2:return ql([e,t],0);case 3:return Kl([e,t],0);case 4:return Xl([e,t],0);default:throw new Fm("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function Bg(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Fm(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Iu(e,t)}function Wg(e,t=0,n=1,r,a){return Xh(e,t,n,r,a)}function jg(e,t,n,r){if(e.rank<2||t.rank<2)throw new Rm(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Rm(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return rd.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Gg(e.rank,r,"channelsLast"):null,activation:n});{const a=e.shape.slice(),s=a.pop();e=e.reshape([-1,s]);const i=t.shape.slice(),o=i.pop(),l=i.pop(),u=[...i,o],h=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=t.transpose(h).reshape([l,-1]);const c=[...a,...u];return rd.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Gg(e.rank,r,"channelsLast"):null,activation:n}).reshape(c)}}function Hg(e,t,n){return Vo(()=>(t=Array.isArray(t)?Rc(t,"int32"):t.toInt(),Cu(e,t,n)))}function Ug(e){return nl(e,e)}function Gg(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Fm(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return t;throw new Fm("Unsupported input rank by biasAdd: "+t.rank)}function qg(e,t,n){return Vo(()=>(null==n&&(n="channelsLast"),Ag(n),e.add(Gg(e.rank,t,n))))}function Kg(e,t,n,r){return Vo(()=>Qc(e,t,n,r))}function Xg(e,t,n=!1){return n?e():t()}var Zg=["fanIn","fanOut","fanAvg"],Yg=["normal","uniform","truncatedNormal"],Jg=class extends mo.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},Qg=class extends Jg{apply(e,t){return Ah(e,t)}};Qg.className="Zeros",mo.registerClass(Qg);var ey=class extends Jg{apply(e,t){return wh(e,t)}};ey.className="Ones",mo.registerClass(ey);var ty=class extends Jg{constructor(e){if(super(),"object"!=typeof e)throw new Fm("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new Fm("config must have value set but got "+e);this.value=e.value}apply(e,t){return Vo(()=>nl(uc(this.value),wh(e,t)))}getConfig(){return{value:this.value}}};ty.className="Constant",mo.registerClass(ty);var ny=class extends Jg{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Zh(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};ny.className="RandomUniform",mo.registerClass(ny);var ry=class extends Jg{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Rm(`randomNormal does not support dType ${t}.`);return Wg(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};ry.className="RandomNormal",mo.registerClass(ry);var ay=class extends Jg{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Rm(`truncatedNormal does not support dType ${t}.`);return Lc(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};ay.className="TruncatedNormal",mo.registerClass(ay);var sy=class extends Jg{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return Vo(()=>{if(2!==e.length||e[0]!==e[1])throw new Fm("Identity matrix initializer can only be used for 2D square matrices.");return nl(this.gain,_u(e[0]))})}getConfig(){return{gain:this.gain}}};sy.className="Identity",mo.registerClass(sy);var iy=class extends Jg{constructor(e){if(super(),e.scale<0)throw new Fm("scale must be a positive float. Got: "+e.scale);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,Xm(Zg,"FanMode",this.mode),this.distribution=null==e.distribution?"normal":e.distribution,Xm(Yg,"Distribution",this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,r;if(Ag(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=Ng(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=Ng(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=Ng(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],a=n[1];let s=this.scale;if(s/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,a):Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Rm(`${this.getClassName()} does not support dType ${t}.`);return Lc(e,0,n,t,this.seed)}{const n=Math.sqrt(3*s);return Zh(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};iy.className="VarianceScaling",mo.registerClass(iy);var oy=class extends iy{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return iy.className}};oy.className="GlorotUniform",mo.registerClass(oy);var ly=class extends iy{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return iy.className}};ly.className="GlorotNormal",mo.registerClass(ly);var uy=class extends iy{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return iy.className}};uy.className="HeNormal",mo.registerClass(uy);var hy=class extends iy{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return iy.className}};hy.className="HeUniform",mo.registerClass(hy);var cy=class extends iy{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return iy.className}};cy.className="LeCunNormal",mo.registerClass(cy);var dy=class extends iy{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return iy.className}};dy.className="LeCunNormal",mo.registerClass(dy);var py=class extends Jg{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new Rm("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return Vo(()=>{if(e.length<2)throw new Rm("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const t=Wg(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32");let n=up.gramSchmidt(t);return e[0]>e[1]&&(n=n.transpose()),nl(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}};py.className="Orthogonal",mo.registerClass(py);var fy={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function my(e,t={}){return Um(e,mo.SerializationMap.getMap().classNameMap,t,"initializer")}function gy(e){return jm(e)}function yy(e){if("string"==typeof e){const t=e in fy?fy[e]:e;if("GlorotNormal"===t)return new ly;if("GlorotUniform"===t)return new oy;if("HeNormal"===t)return new uy;if("HeUniform"===t)return new hy;if("LeCunNormal"===t)return new cy;if("LeCunUniform"===t)return new dy;{const e={};return e.className=t,e.config={},my(e)}}return e instanceof Jg?e:my(e)}function by(){return new Qg}function xy(){return new ey}function vy(e){return new ty(e)}function Ay(e){return new ny(e)}function wy(e){return new ry(e)}function ky(e){return new ay(e)}function Sy(e){return new sy(e)}function Iy(e){return new iy(e)}function _y(e){return new oy(e)}function Ey(e){return new ly(e)}function Ty(e){return new uy(e)}function Cy(e){return new hy(e)}function Ny(e){return new cy(e)}function My(e){return new dy(e)}function Fy(e){return new py(e)}var Ry={};m(Ry,{Layer:()=>Yy,RNN:()=>vv,RNNCell:()=>Av,activation:()=>BA,add:()=>ZA,alphaDropout:()=>Vw,average:()=>YA,averagePooling1d:()=>iw,averagePooling2d:()=>uw,averagePooling3d:()=>dw,avgPool1d:()=>ow,avgPool2d:()=>hw,avgPool3d:()=>pw,avgPooling1d:()=>lw,avgPooling2d:()=>cw,avgPooling3d:()=>fw,batchNormalization:()=>rw,bidirectional:()=>Fw,concatenate:()=>JA,conv1d:()=>FA,conv2d:()=>RA,conv2dTranspose:()=>DA,conv3d:()=>OA,conv3dTranspose:()=>zA,convLstm2d:()=>Tw,convLstm2dCell:()=>Cw,cropping2D:()=>$A,dense:()=>WA,depthwiseConv2d:()=>VA,dot:()=>nw,dropout:()=>jA,elu:()=>_A,embedding:()=>XA,flatten:()=>UA,gaussianDropout:()=>Lw,gaussianNoise:()=>$w,globalAveragePooling1d:()=>mw,globalAveragePooling2d:()=>gw,globalMaxPool1d:()=>Dw,globalMaxPool2d:()=>Ow,globalMaxPooling1d:()=>yw,globalMaxPooling2d:()=>bw,gru:()=>ww,gruCell:()=>kw,input:()=>Ax,inputLayer:()=>IA,layerNormalization:()=>aw,leakyReLU:()=>TA,lstm:()=>Sw,lstmCell:()=>Iw,masking:()=>Bw,maxPool1d:()=>zw,maxPool2d:()=>Pw,maxPooling1d:()=>xw,maxPooling2d:()=>vw,maxPooling3d:()=>Aw,maximum:()=>QA,minimum:()=>ew,multiply:()=>tw,permute:()=>KA,prelu:()=>CA,reLU:()=>EA,repeatVector:()=>GA,reshape:()=>qA,rnn:()=>Nw,separableConv2d:()=>PA,simpleRNN:()=>_w,simpleRNNCell:()=>Ew,softmax:()=>NA,spatialDropout1d:()=>HA,stackedRNNCells:()=>Mw,thresholdedReLU:()=>MA,timeDistributed:()=>Rw,upSampling2d:()=>LA,zeroPadding2d:()=>sw});var Dy=0;function Oy(){return Dy++}var zy={};function Py(e=""){return e in zy||(zy[e]=0),zy[e]+=1,e+zy[e].toString()}function $y(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ly(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Vy(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Fm("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function By(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new Fm("Expected exactly 1 Shape; got "+e.length)}return e}function Wy(e){let t=0;for(const n of e)t+=0===n.shape.length?1:n.shape.reduce((e,t)=>e*t);return t}var jy=class{constructor(e,t="float32",n="Variable",r=!0,a=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Oy(),this.originalName=_g(n=null==n?"Variable":n),this.name=Eg(this.originalName),this.trainable_=r,this.constraint=a,this.val=jc(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function Hy(e){return e.map(e=>e.read())}function Uy(e){e.forEach(e=>{e[0].write(e[1])})}var Gy=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,this.ndim=null!=e.shape?e.shape.length:e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},qy=class{constructor(e,t,n,r,a,s,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=i,this.id=Oy(),null!=s&&(this.originalName=_g(s),this.name=Eg(this.originalName)),this.rank=t.length}},Ky=0,Xy=class{constructor(e,t){this.callArgs=t,this.id=Ky++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)e.push(null!=t?t.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Zy=0,Yy=class extends mo.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Zy++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=Vm(e)+"_"+Py(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=e.weights?e.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new Mm(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Fm(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return $m(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return $m(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Nm(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Nm(`Layer ${this.name} is not connected, no input to return.`);return $m(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Nm(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Nm(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return $m(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Lm(e),null==this.inputSpec||0===this.inputSpec.length)return;const t=Lm(this.inputSpec);if(e.length!==t.length)throw new Fm(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){const r=e[n],a=t[n];if(null==a)continue;const s=r.rank;if(null!=a.ndim&&s!==a.ndim)throw new Fm(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new Fm(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new Fm(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new Fm(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){const e=r.shape;for(const t in a.axes){const r=Number(t),s=a.axes[t],i=r>=0?e[r]:e[e.length+r];if(null!=s&&-1===[s,null].indexOf(i))throw new Fm(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${e}.`)}}if(null!=a.shape)for(let e=0;e<a.shape.length;++e){const t=a.shape[e],s=r.shape[e];if(null!=t&&null!=s&&t!==s)throw new Fm(`Input ${n} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=Lm(e);let r=!0;for(const s of n)if(!(s instanceof qy)){r=!1;break}let a=!0;for(const s of n)if(s instanceof qy){a=!1;break}if(r===a)throw new Fm("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ig(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of Lm(e))t.push(n.shape);this.build($m(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);const a=Lm(r),s=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=$m(s),null!=this.activityRegularizer)throw new Rm("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=Lm(e);const t=[];for(const n of e)t.push(n.shape);return $m(t)}(e),r=this.computeOutputShape(n);let a;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new qy(s,n,this,Lm(e),t,this.name,r)):new qy(s,r,this,Lm(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new Rm("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Nm(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Nm(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Mm(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Wy(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Hy(e?this.trainableWeights:this.weights)}setWeights(e){Vo(()=>{const t=this.weights;if(t.length!==e.length)throw new Fm(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=Hy(t);for(let a=0;a<r.length;++a){const s=r[a],i=t[a],o=e[a];if(!oa.arraysEqual(s.shape,o.shape))throw new Fm(`Layer weight shape ${s.shape} not compatible with provided weight shape ${o.shape}`);n.push([i,o])}Uy(n)})}addWeight(e,t,n,r,a,s,i){if(-1!==this._addedWeightNames.indexOf(e))throw new Fm(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=yy("zeros"));const o=r.apply(t,n),l=new jy(o,n,e,s,i);return o.dispose(),null!=a&&this.addLoss(()=>a.apply(l.read())),null==s&&(s=!0),s?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=Lm(e),null!=this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach(e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return t}addInboundNode(e,t,n,r,a,s,i=null){const o=Lm(e);t=Lm(t),n=Lm(n),r=Lm(r),a=Ly(a),s=Ly(s);const l=[],u=[],h=[];for(const c of o)l.push(c.sourceLayer),u.push(c.nodeIndex),h.push(c.tensorIndex);new Xy({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:h,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:s},i);for(let c=0;c<t.length;c++)t[c].sourceLayer=this,t[c].nodeIndex=this.inboundNodes.length-1,t[c].tensorIndex=c}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function Jy(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=Jy(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}var Qy,eb,tb=class extends Yy{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:Py("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Fm("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Fm("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Fm("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new qy(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Xy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Fm("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};function nb(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Fm("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new tb({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}async function rb(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const s=e[a];if("number"!=typeof s){const e=s;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];Bo(r)}}function ab(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}tb.className="InputLayer",mo.registerClass(tb),(eb=Qy||(Qy={}))[eb.SILENT=0]="SILENT",eb[eb.VERBOSE=1]="VERBOSE";var sb=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},ib=class{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}},ob=class extends sb{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"==typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const a=Vo(()=>Qo(this.totals[r],nl(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?t[n]=this.totals[n]/this.seen:Vo(()=>{const e=nl(tl(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),Wo(t[n])}))}},lb=class extends sb{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const a in this.history){const r=this.history[a];for(let s=0;s<r.length;++s)"number"!=typeof r[s]&&(e.push(r[s].data()),t.push(a),n.push(s))}const r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}},ub=class extends sb{constructor(e,t){if(super(),this.currentEpoch=0,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");oa.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t){let n,r=oa.now();return(...a)=>{const s=oa.now();return s-r<t||(r=s,n=e(...a)),n}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await rb(n),r.push(this.yield(e,t,n))),r.push(Sp()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await rb(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await rb(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(Sp()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await rb(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await rb(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(Sp()):oa.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await rb(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await rb(e),await this.trainEnd(e))}};function hb(e,t){return null==e&&(e={}),e instanceof sb?[e]:Array.isArray(e)&&e[0]instanceof sb?e:Lm(e).map(e=>new ub(e,t))}var cb=class{constructor(){}static registerCallbackConstructor(e,t){oa.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, but got "+e),cb.checkForDuplicate(t),null==cb.constructors[e]&&(cb.constructors[e]=[]),cb.constructors[e].push(t)}static checkForDuplicate(e){for(const t in cb.constructors)cb.constructors[+t].forEach(t=>{if(t===e)throw new Fm("Duplicate callback constructor.")})}static clear(){cb.constructors={}}static createCallbacks(e){const t=[];for(const n in cb.constructors){const r=+n;e>=r&&t.push(...cb.constructors[r])}return t.map(e=>new e)}};function db(e,t,n,r,a,s,i,o,l){const u=new lb,h=[new ob,...cb.createCallbacks(t)];null!=e&&h.push(...e),h.push(u);const c=new ib(h);return c.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:i,verbose:t,doValidation:o,metrics:l}),{callbackList:c,history:u}}function pb(e,t={},n=!1){return Um(e,mo.SerializationMap.getMap().classNameMap,t,"layer",n)}function fb(e,t){return Vo(()=>{"float32"!==e.dtype&&(e=e.asType("float32"));const n=th(Ug(e),t,!0),r=Eu(n.shape,Cm()),a=_c(xh(n,r));return tl(e,a)})}function mb(e,t){return Vo(()=>vh(Ug(eh(t,e)),-1))}function gb(e,t){return Vo(()=>vh(rl(eh(t,e)),-1))}function yb(e,t){return Vo(()=>{const n=eh(e,t),r=Ul(rl(e),Cm(),Number.MAX_VALUE),a=rl(tl(n,r));return nl(100,vh(a,-1))})}function bb(e,t,n=!1){return Vo(()=>{if(n)t=vc(t);else{const e=th(t,t.shape.length-1,!0);t=tl(t,e)}return t=Ul(t,Cm(),1-Cm()),Zu(th(nl(e.toFloat(),Bu(t)),t.shape.length-1))})}function xb(e,t,n=!1){return Vo(()=>{const r=Tu(function(e){const t=[Ng(e.shape)];return e.reshape(t)}(e)).toInt(),a=(t=Ul(t,Cm(),1-Cm())).shape;return bb(zi(r,a[a.length-1]).reshape(a),t,n)})}function vb(e,t){return Vo(()=>{let n;return n=Ul(t,Cm(),1-Cm()),n=Bu(tl(n,eh(1,n))),vh(function(e,t){if(!oa.arraysEqual(e.shape,t.shape))throw new Fm(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Vo(()=>{const n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())})}(e,n),-1)})}function Ab(e,t){return Vo(()=>{const n=fb(e,-1),r=fb(t,-1),a=nl(n,r);return Zu(th(a,-1))})}cb.constructors={};var wb={meanSquaredError:mb,meanAbsoluteError:gb,meanAbsolutePercentageError:yb,meanSquaredLogarithmicError:function(e,t){return Vo(()=>{const n=Ul(t,Cm(),Number.MAX_VALUE),r=Bu(Qo(1,n)),a=Ul(e,Cm(),Number.MAX_VALUE),s=Bu(Qo(1,a));return vh(Ug(eh(r,s)),-1)})},squaredHinge:function(e,t){return Vo(()=>{const n=xh(0,eh(1,nl(e,t)));return vh(Ug(n),-1)})},hinge:function(e,t){return Vo(()=>{const n=xh(0,eh(1,nl(e,t)));return vh(n,-1)})},categoricalHinge:function(e,t){return Vo(()=>{const n=th(nl(e,t),-1),r=Qu(nl(eh(1,e),t),-1);return xh(0,Qo(1,eh(r,n)))})},logcosh:function(e,t){return Vo(()=>{const n=Math.log(2),r=eh(t,e),a=eh(Qo(r,Yu(nl(-2,r))),n);return vh(a,-1)})},categoricalCrossentropy:bb,sparseCategoricalCrossentropy:xb,binaryCrossentropy:vb,kullbackLeiblerDivergence:function(e,t){return Vo(()=>{const n=Ul(e,Cm(),1),r=Ul(t,Cm(),1);return th(nl(e,Bu(tl(n,r))),-1)})},poisson:function(e,t){return Vo(()=>{const n=Bu(Qo(Cm(),t));return vh(eh(t,nl(e,n)),-1)})},cosineProximity:Ab};function kb(e){if("string"==typeof e){if(e in wb)return wb[e];let t="Unknown loss "+e;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Fm(t)}return e}function Sb(e,t){return Vo(()=>{const n=nl(.5,Rh(t)),r=Dg(Nu(t,n),e.dtype);return vh(fu(e,r),-1)})}function Ib(e,t){return Vo(()=>Dg(fu(ul(e,-1),ul(t,-1)),"float32"))}function _b(e,t){return Vo(()=>dh(e.equal(1),t.equal(1)).sum().cast("float32"))}function Eb(e,t){return Vo(()=>{const n=_b(e,t),r=function(e,t){return Vo(()=>dh(e.equal(0),t.equal(1)).sum().cast("float32"))}(e,t),a=n.add(r);return mu(Nu(a,0),n.div(a),0).cast("float32")})}function Tb(e,t){return vb(e,t)}function Cb(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),fu(e,t).asType("float32")}var Nb=bb,Mb=xb,Fb={binaryAccuracy:Sb,categoricalAccuracy:Ib,precision:Eb,categoricalCrossentropy:Nb,sparseCategoricalCrossentropy:Mb,mse:mb,MSE:mb,mae:gb,MAE:gb,mape:yb,MAPE:yb,cosine:Ab};function Rb(e){if("string"==typeof e&&e in Fb)return Fb[e];if("string"!=typeof e&&null!=e)return e;throw new Fm("Unknown metric "+e)}function Db(e){if(zm(null!==e,"Unknown LossOrMetricFn "+e),"string"==typeof e)return e;{let t;for(const n of Object.keys(wb))if(wb[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Fb))if(Fb[n]===e){t=n;break}return void 0!==t?t:e.name}}function Ob(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!zb(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function zb(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!=typeof n)return!1;if(!zb(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!zb(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function Pb(e,t,n=console.log){let r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function $b(e,t,n){let r;try{r=JSON.stringify(e.outputShape)}catch(aH){r="multiple"}Pb([`${e.name} (${e.getClassName()})`,r,e.countParams().toString()],t,n)}function Lb(e,t,n,r){let a;try{a=JSON.stringify(e.outputShape)}catch(aH){a="multiple"}const s=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e)s.push(`${u.inboundLayers[e].name}[${u.nodeIndices[e]}][${u.tensorIndices[e]}]`);const i=e.name,o=e.getClassName(),l=0===s.length?"":s[0];Pb([`${i} (${o})`,a,e.countParams().toString(),l],t,r);for(let u=1;u<s.length;++u)Pb(["","","",s[u]],t,r)}function Vb(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function Bb(e,t){if(null===e)return null;if("string"==typeof e)return Bm(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];Vb(t,a,r)?n.push(r):n.push(Bb(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{const e=Bm(n);t[e]=Bb(r,e)}}return t}}function Wb(e,t){if(null==e)return null;if("string"==typeof e)return Vm(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];Vb(t,a,r)?n.push(r):n.push(Wb(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];t[Vm(n)]="name"!==n&&"className"!==n||"string"!=typeof r?Wb(r,n):r}return t}}var jb="3.7.0",Hb=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Hb)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Fm(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return fi(t,e.dtype)}catch(aH){throw new Fm(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof qy){if(null==this.id2Value[e.id])throw new Fm("Nonexistent key: "+e.name);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new Fm("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]}}getMask(e){if(e instanceof qy){if(null==this.id2Value[e.id])throw new Fm("Nonexistent key: "+e.name);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new Fm("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&Bo(this.id2Mask)}},Ub={},Gb={};function qb(e,t,n,r){const a=null!=n&&n.training,s=Array.isArray(e),i=s?e:[e],o=i.map(e=>e.name),l=[],u=t.names();for(const f of o)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const h=o.join(",")+"|"+t.names().join(",");let c,d;if(null==Ub[h]){const e=function(e,t){oa.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){const a=Xb(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const s of e){const{sorted:e,recipientMap:i}=Xb(s,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:Kb(r)}}(i,t);c=e.sorted,d=e.recipientCounts,Ub[h]=c,Gb[h]=d}c=Ub[h],d={},a||Object.assign(d,Gb[h]);const p=new Hb(t);for(let f=0;f<c.length;++f){if(null!=r){const e=$o().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=c[f],s=e.sourceLayer;if(s instanceof tb)continue;const i=[],u=[],h=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);i.push(e),u.push(r),null!=r&&(m=!0),a||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==o.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||h.push(e))}m&&((n=n||{}).mask=u[0]);const g=Lm(s.apply(i,n));let y=null;s.supportsMasking&&(y=s.computeMask(i,u));const b=Zb(e),x=Array.isArray(b)?b:[b];for(let t=0;t<x.length;++t){p.hasKey(x[t])||p.add(x[t],g[t],Array.isArray(y)?y[0]:y);const e=o.indexOf(x[t].name);-1!==e&&(l[e]=g[t])}a||Bo(h)}return p.disposeMasks(),s?l:l[0]}function Kb(e){const t={};for(const n in e)t[n]=e[n].size;return t}function Xb(e,t){const n=new Set,r=[],a={};for(const o of t.names())n.add(o);const s=[],i=[];for(s.push(e);s.length>0;){const e=s[s.length-1];if(n.has(e.name)){s.pop();continue}const t=i[i.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(s.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||s.push(t)}}return{sorted:r,recipientMap:a}}function Zb(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}var Yb=class extends Yy{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=Py(e)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],this.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],qm(this.inputs).length!==this.inputs.length)throw new Fm("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(e=>e.name));qm(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(e=>e.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.nodeIndex,t=y.tensorIndex;this.outputLayers.push(y.sourceLayer),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(t)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;zm(0===t,"input layer has >1 nodes"),zm(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof tb))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},a={},s={},i=[],o=(e,t,n,r,a,l)=>{null!=r&&null!=a&&null!=l||(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[a];if(-1!==n.indexOf(u))throw new Mm(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(Yb.nodeKey(r,a)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(u)&&n.push(u);const h=u.inboundLayers.length;for(let s=0;s<h;s++)o(u.inputTensors[s],t,n,u.inboundLayers[s],u.nodeIndices[s],u.tensorIndices[s]);for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);i.push(u)},l=[],u=[];for(const y of this.outputs)o(y,l,u);const h=i.slice().reverse();for(const y of h){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];e=Math.max(e,null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id]),r[y.outboundLayer.id]=e,a[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const a=y.inboundLayers[r].inboundNodes[y.nodeIndices[r]];t[a.id]=Math.max(e+1,null==t[a.id]?0:t[a.id]),n[a.id]=a}}const c={};for(const y in t){const e=t[y];e in c||(c[e]=[]),c[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(a[y])}let p=Object.keys(d).map(e=>parseInt(e,10)).sort(Gm);this.layers=[];for(const y of p){const e=d[y];e.sort((e,t)=>{const n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof Yb&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(c).map(e=>parseInt(e,10)).sort(Gm);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of c[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new Mm(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=c;const g=this.layers.map(e=>e.name);for(const y of g){const e=g.filter(e=>e===y).length;if(1!==e)throw new Mm(`The name "${y}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Xy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Fm("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;for(const s of this.layers)for(const e of s.weights){if(null!=n[e.originalName])throw new Fm("Duplicate weight name: "+e.originalName);n[e.originalName]=e,r++}const a=[];for(const s in e){let r=s;if(null==n[s]){const e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[s]]);else if(t)throw new Fm("Provided weight data has no target variable: "+s);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new Fm(`${e.length} of ${r} weights are not set: ${e}`)}Uy(a)}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers "+jb,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=Wb(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return Vo(()=>{e=Lm(e);const n=new Hb;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return qb(this.outputs,n,t)})}computeMask(e,t){return Vo(()=>{let n;return e=Lm(e),n=null==t?Om(null,e.length):Lm(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=Ly(e);if(t.length!==this.inputLayers.length)throw new Fm(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let i=0;i<t.length;i++)n[this.inputLayers[i].name+"_0_0"]=t[i];const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(Gm);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++)r.push(n[`${t.inboundLayers[i].name}_${t.nodeIndices[i]}_${t.tensorIndices[i]}`]);const a=Ly(e.computeOutputShape($m(r))),s=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++)n[`${e.name}_${s}_${t}`]=a[t]}}const a=[],s=[];for(let i=0;i<this.outputLayers.length;i++)s.push(`${this.outputLayers[i].name}_${this.outputLayersNodeIndices[i]}_${this.outputLayersTensorIndices[i]}`);for(let i=0;i<s.length;i++){const e=s[i];zm(e in n),a.push(n[e])}return $m(a)}runInternalGraph(e,t){null==t&&(t=Om(null,e.length));const n={};for(let o=0;o<this.inputs.length;++o)n[this.inputs[o].id]=[e[o],t[o]];const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(Gm);for(const o of r){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,s=new Array;for(const t of r)t.id in n&&s.push(n[t.id]);if(s.length===r.length){let r,i,o,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===s.length){const[t,n]=s[0];null==u.mask&&(u.mask=n),o=Lm(e.call(t,u)),l=Lm(e.computeMask(t,n)),r=[t],i=[n]}else r=s.map(e=>e[0]),i=s.map(e=>e[1]),null==u.mask&&(u.mask=i),o=Lm(e.call(r,u)),l=Lm(e.computeMask(r,i));if(e.activityRegularizer)throw new Rm("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e)n[a[e].id]=[o[e],l[e]]}}}const a=[],s=[],i=[];for(const o of this.outputs){zm(o.id in n,`Could not compute output ${o.name} : ${o.id}`);const[e,t]=n[o.id];i.push(e.shape),a.push(e),s.push(t)}return[a,s,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof Yb?1:0;for(let e=0;e<r.inboundNodes.length;e++){const a=Yb.nodeKey(r,e);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new Fm(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new Fm("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===e)return n;throw new Fm("No such layer: "+e)}calculateLosses(){return Vo(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=Yb.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const e=s.getClassName(),r=s.getConfig(),a=[];for(let n=0;n<s.inboundNodes.length;n++){const e=s.inboundNodes[n],r=Yb.nodeKey(s,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(aH){console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],s=e.tensorIndices[r];let o=t[Yb.nodeKey(a,e.nodeIndices[r])];null==o&&(o=0),n.push([a.name,o,s,i])}a.push(n)}}}const i={};i.name=s.name,i.className=e,i.config=r,i.inboundNodes=a,n.push(i)}e.layers=n;const r=[];for(let s=0;s<this.inputLayers.length;s++){const e=this.inputLayers[s],n=Yb.nodeKey(e,this.inputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let a=t[n];null==a&&(a=0),r.push([e.name,a,this.inputLayersTensorIndices[s]])}e.inputLayers=r;const a=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],n=Yb.nodeKey(e,this.outputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let r=t[n];null==r&&(r=0),a.push([e.name,r,this.outputLayersTensorIndices[s]])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){const a={},s={};function i(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function o(e,t){const n=[];let r;for(const s of t){const o=s[0],l=s[1],u=s[2];if(r=null==s[3]?{}:s[3],!(o in a))return void i(e,t);const h=a[o];if(h.inboundNodes.length<=l)return void i(e,t);n.push(h.inboundNodes[l].outputTensors[u])}n.length>0&&e.apply($m(n),r)}function l(e){const n=e.name,s=pb(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(r),a[n]=s,e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new Fm("Corrupted configuration, expected array for nodeData: "+e);i(s,e)})}const u=t.name,h=t.layers;for(const m of h)l(m);for(;!Km(s);)for(const e of h){const t=a[e.name];if(t.name in s){const e=s[t.name];delete s[t.name];for(const n of e)o(t,n)}}const c=[],d=[],p=t.inputLayers;for(const m of p){const e=m[0],t=m[1],n=m[2];zm(e in a),c.push(a[e].inboundNodes[t].outputTensors[n])}const f=t.outputLayers;for(const m of f){const e=m[0],t=m[1],n=m[2];zm(e in a),d.push(a[e].inboundNodes[t].outputTensors[n])}return new e({inputs:c,outputs:d,name:u})}get stateful(){if(this._stateful)throw new Fm("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Vo(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function Jb(e,t){return function(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided classWeight is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{n.push(t in e?e[t]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, so classWeight must be either an array with ${r} elements or an object with ${t} keys. Provided classWeight not understood: ${JSON.stringify(e)}`)}(e,t)}async function Qb(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=Vo(()=>{if(1===e.shape.length)return e.clone();if(2===e.shape.length){if(e.shape[1]>1)return e.argMax(1);if(1===e.shape[1])return e.reshape([e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await t.data());Bo(t);const a=[];return r.forEach(e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);a.push(n[e])}),Rc(a,"float32")}return null}function ex(e,t){return nl(e,t)}function tx(e,t){let n,r;n=t.xs,r=t.ys,oa.assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+t);const a=nx("input",e.inputNames,n),s=nx("output",e.outputNames,r),i=a[0].shape[0];oa.assert(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),oa.assert(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let o=0;o<a.length;o++)oa.assert(a[o].shape[0]===i,()=>`Batch size mismatch: input ${e.inputNames[o]} has ${a[o].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);for(let o=0;o<s.length;o++)oa.assert(s[o].shape[0]===i,()=>`Batch size mismatch: output ${e.outputNames[o]} has ${s[o].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);return{xs:a,ys:s}}function nx(e,t,n){if(n instanceof Pa)return[n];if(Array.isArray(n))return oa.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const r=[];for(const a of t){if(null==n[a])throw new Fm(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}function rx(e){return"function"==typeof e.iterator}function ax(e){oa.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got "+e)}function sx(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>zg(e,t,n-t)):zg(e,t,n-t)}function ix(e,t){return Vo(()=>null==e?null:Array.isArray(e)?e.map(e=>ix(e,t)):Hg(e,"int32"===t.dtype?t:t.toInt()))}function ox(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function lx(e){const t=[];e instanceof Pa&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Og(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function ux(e,t){if(null==e)return;const n=[];if(t instanceof Pa)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const a in t)n.push(t[a].id);const r=[];if(e instanceof Pa)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const a in e){const t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function hx(e){return Array.isArray(e)}function cx(e){return!function(e){return e instanceof Pa}(e)&&!hx(e)}function dx(e,t,n,r=!0,a=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(hx(e)&&e.length>0)t=!0;else if(cx(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Fm(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let s;if(cx(e)){e=e,s=[];for(const n of t){if(null==e[n])throw new Fm(`No data provided for "${n}". Need data for each key in: ${t}`);s.push(e[n])}}else if(hx(e)){if((e=e).length!==t.length)throw new Fm(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new Fm(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=lx(s),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=s[i];if(e.shape.length!==n[i].length)throw new Fm(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${e.shape}`);for(let s=0;s<n[i].length;++s){if(0===s&&!r)continue;const o=e.shape[s],l=n[i][s];if(null!=l&&l>=0&&o!==l)throw new Fm(`Error when checking ${a}: expected ${t[i]} to have shape [${n[i]}], but got array with shape [${e.shape}].`)}}return s}function px(e,t,n,r=!0,a=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new Fm(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new Fm(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=s[i];if(e.shape.length!==n[i].length)throw new Fm(`Error when checking ${a}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let s=0;s<n[i].length;++s){if(0===s&&!r)continue;const o=e.shape[s],l=n[i][s];if(null!=l&&l!==o)throw new Fm(`Error when checking ${a}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}var fx=class extends Yb{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new Fm("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n,r=console.log){const a=function(e){let t=!0;const n=[],r=[];for(const a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(const a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(const a of e.layers){let e=!1;for(const n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Output shape","Param #"];let i;if(a?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!a){s.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),Pb(s,n,r),r("=".repeat(t));const o=e.layers;for(let h=0;h<o.length;++h)a?$b(o[h],n,r):Lb(o[h],n,i,r),r((h===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;return t=Wy(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights),t}(e),u=Wy(e.nonTrainableWeights);r("Total params: "+(l+u)),r("Trainable params: "+l),r("Non-trainable params: "+u),r("_".repeat(t))}(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>wp.adagrad(.01),Adadelta:()=>wp.adadelta(1,.95,Cm()),Adam:()=>wp.adam(.001,.9,.999,Cm()),Adamax:()=>wp.adamax(.002,.9,.999,Cm(),0),RMSProp:()=>wp.rmsprop(.001,.9,0,Cm()),SGD:()=>wp.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Fm("Unknown Optimizer "+e)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof pp))throw new Fm("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Fm(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(e=>kb(e))}else{const n=kb(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Fm(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(kb(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const e=this.internalOutputShapes[s];this.feedOutputNames.push(this.outputNames[s]),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[s])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ig("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+e);n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Ig("metric",()=>{for(let e=0;e<this.outputs.length;++e)-1===n.indexOf(e)&&(t=>{let n,r,s;for(const i of t){if("string"==typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===vb?-1!==["accuracy","acc"].indexOf(i)?r=Sb:-1!==["crossentropy","ce"].indexOf(i)&&(r=Tb):this.lossFunctions[e]===xb?-1!==["accuracy","acc"].indexOf(i)?r=Cb:-1!==["crossentropy","ce"].indexOf(i)&&(r=Mb):-1!==["accuracy","acc"].indexOf(i)?r=Ib:-1!==["crossentropy","ce"].indexOf(i)&&(r=Nb),-1!==["accuracy","acc"].indexOf(i)?a="acc":-1!==["crossentropy","ce"].indexOf(i)&&(a="ce"),s=r,n=""+a}else{const e=Rb(i);s=e,n=""+Db(i)}let t;Ig(n,()=>{t=s}),a(e,n,t)}})(r[e])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;ax(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const s=a[0].concat(a[1]);return this.makeTestFunction(),$m(this.testLoop(this.testFunction,s,r,n.verbose,n.steps))}finally{ux(a[0],e),ux(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let s=[];if(n.verbose>0)throw new Rm("Verbose mode is not implemented yet.");oa.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));const i="function"==typeof t.next?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const t=await i.next();if(s=Vo(()=>{if(t.value){const{xs:n,ys:r}=tx(e,t.value),i=n.concat(r),u=Vo(()=>a(i));if(Bo(i),0===l)for(let e=0;e<u.length;++e)s.push(uc(0));const h=i[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=s[e];s[e]=Vo(()=>Qo(s[e],nl(h,t))),l>0&&Bo(n)}Bo(u),o+=h,++l}return s}),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const e=s[u];s[u]=tl(s[u],o),Bo(e)}return $m(s)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(null!=n){if(a=null,null!=t)throw new Fm(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new Fm(`Either the input data should have a defined shape, or ${r} shoud be specified.`);a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Fm("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),a=new Hb;if(e instanceof Pa&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Fm(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const i of this.inputs){const t=e[i.name];if(null==t)throw new Fm("No value is provided for the model's input "+i.name);a.add(i,t)}const s=qb(r,a);return n?s:s[0]}retrieveSymbolicTensors(e){const t=Om(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],s=a.map(e=>e.name);for(let r=0;r<e.length;++r){const i=s.indexOf(e[r]);if(-1!==i&&(t[r]=a[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new Fm("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return t}predictLoop(e,t=32,n=!1){return Vo(()=>{const r=this.checkNumSamples(e);if(n)throw new Rm("Verbose predictLoop() is not implemented yet.");const a=ox(r,t),s=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t)Vo(()=>{const n=sx(e,a[t][0],a[t][1]),r=[];if(Array.isArray(n))for(let e=0;e<n.length;++e)r.push({key:this.inputs[e],value:n[e]});else r.push({key:this.inputs[0],value:n});const s=new Hb(r);return qb(this.outputs,s)}).forEach((e,t)=>s[t].push(e));return $m(s.map(e=>Fl(e,0)))})}predict(e,t={}){const n=lx(e);px(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return ax(r),this.predictLoop(n,r)}finally{ux(n,e)}}predictOnBatch(e){px(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new Mm("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let s=0;s<this.feedOutputShapes.length;++s){const e=this.feedOutputShapes[s];a.push(this.feedLossFns[s]===xb?e.slice(0,e.length-1).concat([1]):e)}if(function(e,t,n){const r=qm(e.map(e=>e.shape[0]));r.sort();const a=qm(t.map(e=>e.shape[0]));if(a.sort(),r.length>1)throw new Fm("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(e=>e.shape)));if(a.length>1)throw new Fm("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(e=>e.shape)));if(r.length>0&&a.length>0&&!oa.arraysEqual(r,a))throw new Fm(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}(e=dx(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=dx(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){const r=[mb,vb,bb];for(let a=0;a<e.length;++a){const s=e[a],i=t[a],o=n[a];if(null!=i){if(i===bb&&1===s.shape[s.shape.length-1])throw new Fm(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(i)){const e=s.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new Fm(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new Fm(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,a=!0,s){const[i,o]=this.standardizeUserDataXY(e,t,a,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=Jb(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await Qb(o[t],null,e[t]))}return[i,o,l]}testLoop(e,t,n,r=0,a){return Vo(()=>{const s=this.checkNumSamples(t,n,a,"steps"),i=[];if(r>0)throw new Rm("Verbose mode is not implemented yet.");if(null!=a)throw new Rm("steps mode in testLoop() is not implemented yet");{const r=ox(s,n),a=Rc(Rg(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],o=r[n][1],l=zg(a,s,o-s),u=ix(t,l),h=e(u);if(0===n)for(let e=0;e<h.length;++e)i.push(uc(0));for(let e=0;e<h.length;++e)i[e]=Qo(i[e],nl(o-s,h[e]))}for(let e=0;e<i.length;++e)i[e]=tl(i[e],s)}return i})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;Pm(e,r)>1&&(a+="_"+Pm(e.slice(0,n),r)),t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],i=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new Hb(e),o=qb(this.outputs,i,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],o[n]);null!=a[n]&&(e=ex(e,a[n]));const s=vh(e);t.push(s),l=0===n?e:Qo(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][1];e=vh((0,this.metricsTensors[n][0])(r[t],o[t]))}Wo(e),s.push(e)}return l=vh(l),this.calculateLosses().forEach(e=>{l=Qo(l,e)}),l},!0,i)].concat(s)}}makeTestFunction(){this.testFunction=e=>Vo(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:r[e]});const i=new Hb(s),o=qb(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=vh((0,this.lossFunctions[e])(a[e],o[e]));n=0===e?r:Qo(n,r),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][1],r=vh((0,this.metricsTensors[e][0])(a[n],o[n]));t.push(r)}return t})}async fit(e,t,n={}){return async function(e,t,n,r={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let a,s,i,o,l,u,h;e.isTraining=!0;try{const c=null==r.batchSize?32:r.batchSize;ax(c);const d=!1,p=await e.standardizeUserData(t,n,r.sampleWeight,r.classWeight,d,c);a=p[0],s=p[1],h=p[2];let f,m=!1;if(null!=r.validationData&&r.validationData.length>0){if(m=!0,2!==r.validationData.length)throw 3===r.validationData.length?new Rm("validationData including sample weights is not supported yet."):new Fm(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);i=r.validationData[0],o=r.validationData[1];const t=!0,n=await e.standardizeUserData(i,o,null,null,t,c);l=n[0],u=n[1],f=l.concat(u)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){m=!0;const e=Math.floor(a[0].shape[0]*(1-r.validationSplit)),t=a[0].shape[0];l=sx(a,e,t),a=sx(a,0,e),u=sx(s,e,t),s=sx(s,0,e),f=l.concat(u)}else null!=r.validationSteps&&(m=!0);const g=a.concat(s).concat(h);e.checkTrainableWeightsConsistency();const y=e.makeTrainFunction(),b=e.getDedupedMetricsNames();let x,v;m?(e.makeTestFunction(),x=e.testFunction,v=b.slice().concat(b.map(e=>"val_"+e))):(x=null,f=[],v=b.slice());const A=hb(r.callbacks,r.yieldEvery);return await async function(e,t,n,r,a,s,i,o,l,u,h,c,d,p,f){null==a&&(a=32),null==s&&(s=1),null==h&&(h=!0),null==d&&(d=0);let m=!1;null!=l&&null!=u&&(m=!0);const g=e.checkNumSamples(n,a,null,"steps_per_epoch");let y;null!=g&&(y=Rg(0,g)),null==i&&(i=1);const{callbackList:b,history:x}=db(o,i,s,d,g,null,a,m,c);b.setModel(e),e.history=x,await b.onTrainBegin(),e.stopTraining_=!1;for(let v=d;v<s;++v){await b.onEpochBegin(v);const s={};{if("batch"===h)throw new Rm("batch shuffling is not implemneted yet");h&&oa.shuffle(y);const i=Rc(y),o=ox(g,a);for(let h=0;h<o.length;++h){const c={};if(await b.onBatchBegin(h,c),Vo(()=>{const d=o[h][0],p=o[h][1],f=zg(i,d,p-d);c.batch=h,c.size=p-d;const g=ix(n,f),y=t(g);for(let e=0;e<r.length;++e){const t=y[e];c[r[e]]=t,Wo(t)}if(h===o.length-1&&m){const t=e.testLoop(l,u,a);for(let e=0;e<r.length;++e){const n=r[e],a=t[e];Wo(a),s["val_"+n]=a}}}),await b.onBatchEnd(h,c),ab(c),e.stopTraining_)break}i.dispose()}if(await b.onEpochEnd(v,s),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}(e,y,g,b,c,r.epochs,r.verbose,A,x,f,r.shuffle,v,r.initialEpoch)}finally{e.isTraining=!1,ux(a,t),ux(s,n),ux(l,i),ux(u,o),null!=h&&Bo(h)}}(this,e,t,n)}async fitDataset(e,t){return async function(e,t,n){const r=null!=n.batchesPerEpoch;if(oa.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),oa.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),oa.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),oa.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),oa.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let s,i;if(a)if(rx(n.validationData))oa.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{const e=function(e){if(3===e.length)throw new Rm("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);s=e.xs,i=e.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=a?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const h=hb(n.callbacks,n.yieldEvery),c=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=db(h,c,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,a,u);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await d.onEpochBegin(f);let h=0,c=0;for(r||(m=await t.iterator());!r||h<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${h} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){const{xs:r,ys:a}=tx(e,t.value),s={};s.batch=c,s.size=r[0].shape[0],await d.onBatchBegin(c,s);const i=[];if(null!=n.classWeight){const t=Jb(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await Qb(a[e],null,t[e]))}const u=r.concat(a).concat(i),p=o(u);Bo(u);for(let e=0;e<l.length;++e){const t=p[e];s[l[e]]=t,Wo(t)}await d.onBatchEnd(c,s),ab(s),c++,h++}if(r?h>=n.batchesPerEpoch:t.done){if(a){let t;t=rx(n.validationData)?Lm(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):Lm(e.evaluate(s,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u["val_"+e.metricsNames[n]]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],s=this.makeTrainFunction()(r.concat(a)),i=[];for(const o of s){const e=await o.data();i.push(e[0])}return Bo(s),$m(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let s=0;s<r.length;++s)n&&!r[s].trainable||t.push({name:r[s].originalName,tensor:a[s]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=$o().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-$o().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=Vm(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>Vm(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Vm(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Vm(Db(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Vm(Db(e)));{const e={};for(const t in this.metrics)e[t]=Vm(Db(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=pb(Bb(e.optimizer_config));let n,r;if("string"==typeof e.loss)n=Bm(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>Bm(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=Bm(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>Bm(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=Bm(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"==typeof e){const t=yi.getSaveHandlers(e);if(0===t.length)throw new Fm(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Fm(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Fm("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await yi.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+jb,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:a}=await yi.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=yi.concatenateArrayBuffers([n.data,t])}return null!=this.userDefinedMetadata&&(Ob(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){Ob(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};fx.className="Model",mo.registerClass(fx);var mx=class extends fx{};async function gx(e,t){"modelTopology"in e||(e={modelTopology:e});let n=(e=e).modelTopology;null!=n.model_config&&(n=n.model_config);const r=pb(Bb(n),t);if(null!=e.weightsManifest){const t=await yi.loadWeights(e.weightsManifest,e.pathPrefix,r.weights.map(e=>e.originalName)),n={};for(const e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),Bo(t)}return r}mx.className="Functional",mo.registerClass(mx);var yx=class extends fx{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:Py("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new Fm(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof yx||e instanceof fx;let n;if(t){if(n=e,1!==n.outputs.length)throw new Fm("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Fm("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Fm("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=nb({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new Fm(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new Fm("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Jy(this.outputs[0])}this.inboundNodes=[],new Xy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Om(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(By(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new fx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Mm("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Mm("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Mm("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Mm("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Fm("Legacy serialization format not supported yet.");a=t}else oa.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,s=t;const i=new e(s);if(!(i instanceof yx))throw new Rm("Sequential.fromConfig called on non-Sequential input: "+i);for(const o of a){const e=pb(o,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),i.add(e)}return i}set stopTraining(e){if(null==this.model)throw new Fm("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Fm("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};function bx(e){return new fx(e)}function xx(e){return new yx(e)}function vx(e,t){return null==t&&(t={}),async function(e,t){if(null==t&&(t={}),"string"==typeof e){const n=yi.getLoadHandlers(e,t);if(0===n.length)n.push(yi.browserHTTPRequest(e,t));else if(n.length>1)throw new Fm(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return async function(e,t,n){if(null==n&&(n={}),null==e.load)throw new Fm("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await e.load();let a=r.modelTopology;null!=a.model_config&&(a=a.model_config);const s=null==n.strict||n.strict,i=null!=r.weightData&&null!=r.weightSpecs&&s,o=pb(Bb(a),void 0,i),l=r.trainingConfig;if(null!=l&&o.loadTrainingConfig(l),null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new Fm("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=yi.decodeWeights(e,t),r={},a=[];return t.forEach(e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:a}}(r.weightData,r.weightSpecs);o.loadWeights(e,s),null!=o.optimizer&&t.length>0&&await o.optimizer.setWeights(t),Bo(e),Bo(t.map(e=>e.tensor))}return o}(e,0,t)}(e,t)}function Ax(e){return nb(e)}function wx(e,t){cb.registerCallbackConstructor(e,t)}yx.className="Sequential",mo.registerClass(yx);var kx=class extends mo.Serializable{getConfig(){return{}}},Sx=class extends kx{apply(e,t=1){return function(e,t=1){if(1!==t)throw new Rm(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return vu(e)}(e,t)}};Sx.className="elu",mo.registerClass(Sx);var Ix=class extends kx{apply(e){return hc(e)}};Ix.className="selu",mo.registerClass(Ix);var _x=class extends kx{apply(e){return ec(e)}};_x.className="relu",mo.registerClass(_x);var Ex=class extends kx{apply(e){return Vo(()=>Ih(6,ec(e)))}};Ex.className="relu6",mo.registerClass(Ex);var Tx=class extends kx{apply(e){return e}};Tx.className="linear",mo.registerClass(Tx);var Cx=class extends kx{apply(e){return Rl(e)}};Cx.className="sigmoid",mo.registerClass(Cx);var Nx=class extends kx{apply(e){return function(e){return Vo(()=>{const t=Qo(.5,nl(.2,e));return Ul(t,0,1)})}(e)}};Nx.className="hardSigmoid",mo.registerClass(Nx);var Mx=class extends kx{apply(e){return Yu(e)}};Mx.className="softplus",mo.registerClass(Mx);var Fx=class extends kx{apply(e){return function(e){return Vo(()=>tl(e,rl(e).add(1)))}(e)}};Fx.className="softsign",mo.registerClass(Fx);var Rx=class extends kx{apply(e){return Ol(e)}};Rx.className="tanh",mo.registerClass(Rx);var Dx=class extends kx{apply(e,t=-1){return vc(e,t)}};Dx.className="softmax",mo.registerClass(Dx);var Ox=class extends kx{apply(e,t=-1){return nh(e,t)}};Ox.className="logSoftmax",mo.registerClass(Ox);var zx=class extends kx{apply(e,t=1){return Vo(()=>Rl(e.mul(t)).mul(e))}};zx.className="swish",mo.registerClass(zx);var Px=class extends kx{apply(e){return Vo(()=>nl(e,Ol(Yu(e))))}};function $x(e){return e.getClassName()}function Lx(e,t={}){return Um(e,mo.SerializationMap.getMap().classNameMap,t,"activation")}function Vx(e){if(null==e)return Lx({className:"linear",config:{}});if("string"==typeof e){const t={};return t.className=e,t.config={},Lx(t)}return e instanceof kx?e:Lx(e)}function Bx(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+e)}Px.className="mish",mo.registerClass(Px);var Wx=class extends mo.Serializable{},jx=class extends Wx{constructor(e){super(),Bx(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Vo(()=>{let t=Ah([1]);return this.hasL1&&(t=Qo(t,th(nl(this.l1,rl(e))))),this.hasL2&&(t=Qo(t,th(nl(this.l2,Ug(e))))),t.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};jx.className="L1L2",mo.registerClass(jx);var Hx={l1l2:"L1L2"};function Ux(e){return jm(e)}function Gx(e,t={}){return Um(e,mo.SerializationMap.getMap().classNameMap,t,"regularizer")}function qx(e){return null==e?null:"string"==typeof e?Gx({className:e in Hx?Hx[e]:e,config:{}}):e instanceof Wx?e:Gx(e)}var Kx=class extends Yy{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Vy(e);let n=ec(e);return null!=this.maxValue&&(n=Ul(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};Kx.className="ReLU",mo.registerClass(Kx);var Xx=class extends Yy{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Vy(e);return zu(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};Xx.className="LeakyReLU",mo.registerClass(Xx);var Zx=class extends Yy{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=yy(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=qx(e.alphaRegularizer),this.alphaConstraint=ug(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new Fm("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=By(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new Gy({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Vy(e),jh(e,this.alpha.read())}getConfig(){const e={alphaInitializer:gy(this.alphaInitializer),alphaRegularizer:Ux(this.alphaRegularizer),alphaConstraint:og(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};Zx.className="PReLU",mo.registerClass(Zx);var Yx=class extends Yy{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new Rm(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Vy(e);return vu(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};Yx.className="ELU",mo.registerClass(Yx);var Jx=class extends Yy{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=Vy(e);return n.mul(Dg(n.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};Jx.className="ThresholdedReLU",mo.registerClass(Jx);var Qx=class extends Yy{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Dx).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const n=Vy(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function ev(e,t,n){if("number"==typeof e)return Om(e,t);if(e.length!==t)throw new Fm(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let a=0;a<t;++a){const s=e[a];if((r=s)!==parseInt(r.toString(),10))throw new Fm(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${s}`)}return e;var r}function tv(e,t,n,r,a=1){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((s+r-1)/r)}function nv(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Fg([n-t,0]);else{if("same"!==r)throw new Fm(`Unsupport padding mode: ${r}.`);e*=t}return e}function rv(e,t){return Vo(()=>(Ag(t),"channelsFirst"===t?Pi(e,[0,2,3,1]):e))}function av(e,t){return Vo(()=>(Ag(t),"channelsFirst"===t?Pi(e,[0,2,3,4,1]):e))}function sv(e,t,n,r=[1,1],a="valid",s,i,o=null){return Vo(()=>{if(null==s&&(s="channelsLast"),Ag(s),3!==e.rank&&4!==e.rank)throw new Fm(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new Fm(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=rv(e,s);if("causal"===a)throw new Rm("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=rd.conv2d({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===s&&(l=Pi(l,[0,3,1,2])),l})}Qx.className="Softmax",mo.registerClass(Qx);var iv=class extends Yy{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",iv.verifyArgs(t),this.rank=e,Ym(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Rm(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ev(t.kernelSize,e,"kernelSize"),this.strides=ev(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,wg(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Ag(this.dataFormat),this.activation=Vx(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=yy(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ug(t.biasConstraint),this.biasRegularizer=qx(t.biasRegularizer),this.activityRegularizer=qx(t.activityRegularizer),this.dilationRate=ev(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Fm("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Fm("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Fm("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(e){if(zm("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Zm(e.kernelSize,"number",1,3))throw new Fm(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:$x(this.activation),useBias:this.useBias,biasInitializer:gy(this.biasInitializer),biasRegularizer:Ux(this.biasRegularizer),activityRegularizer:Ux(this.activityRegularizer),biasConstraint:og(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},ov=class extends iv{constructor(e,t){super(e,t),this.kernel=null,ov.verifyArgs(t),this.filters=t.filters,Ym(this.filters,"filters"),this.kernelInitializer=yy(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ug(t.kernelConstraint),this.kernelRegularizer=qx(t.kernelRegularizer)}build(e){e=By(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Fm("The channel dimension of the input should be defined. Found "+e[t]);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return Vo(()=>{let t;e=Vy(e);const n=null==this.bias?null:this.bias.read(),r=Qm(this.activation.getClassName());if(null!=r&&2===this.rank)t=sv(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n,r=1,a="valid",s,i=1){return Vo(()=>{if(null==s&&(s="channelsLast"),Ag(s),3!==e.shape.length)throw new Fm(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new Fm(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new Fm(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===s&&(e=Pi(e,[0,2,1])),"causal"===a)throw new Rm("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Yl(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(o=qg(o,n)),o})}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=sv(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Rm("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,r=[1,1,1],a="valid",s,i){return Vo(()=>{if(null==s&&(s="channelsLast"),Ag(s),4!==e.rank&&5!==e.rank)throw new Fm(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new Fm(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=av(e,s);if("causal"===a)throw new Rm("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=eu(o,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(o=qg(o,n)),"channelsFirst"===s&&(o=Pi(o,[0,4,1,2,3])),o})}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=By(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){const e=tv(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:gy(this.kernelInitializer),kernelRegularizer:Ux(this.kernelRegularizer),kernelConstraint:og(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new Fm("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))}},lv=class extends ov{constructor(e){super(2,e),lv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Zm(e.kernelSize,"number",1,2))throw new Fm(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};lv.className="Conv2D",mo.registerClass(lv);var uv=class extends ov{constructor(e){super(3,e),uv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Fm(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};uv.className="Conv3D",mo.registerClass(uv);var hv=class extends lv{constructor(e){if(super(e),this.inputSpec=[new Gy({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Fm("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(4!==(e=By(e)).length)throw new Fm("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Fm("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gy({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Vo(()=>{let t=Vy(e);if(4!==t.shape.length)throw new Fm("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);const n=t.shape;let r,a;"channelsFirst"===this.dataFormat?(r=2,a=3):(r=1,a=2);const s=n[a],i=this.kernelSize[1],o=this.strides[1],l=[n[0],nv(n[r],this.strides[0],this.kernelSize[0],this.padding),nv(s,o,i,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Pi(t,[0,2,3,1]));let u=Ql(t,this.kernel.read(),l,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(u=Pi(u,[0,3,1,2])),null!=this.bias&&(u=qg(u,this.bias.read(),this.dataFormat)),null!=this.activation&&(u=this.activation.apply(u)),u})}computeOutputShape(e){const t=(e=By(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const s=this.kernelSize[0],i=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=nv(t[r],o,s,this.padding),t[a]=nv(t[a],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}};hv.className="Conv2DTranspose",mo.registerClass(hv);var cv=class extends uv{constructor(e){if(super(e),this.inputSpec=[new Gy({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new Fm("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(5!==(e=By(e)).length)throw new Fm("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Fm("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gy({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Vo(()=>{let t=Vy(e);if(5!==t.shape.length)throw new Fm("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);const n=t.shape;let r,a,s;"channelsFirst"===this.dataFormat?(s=2,r=3,a=4):(s=1,r=2,a=3);const i=n[r],o=n[a],l=this.kernelSize[1],u=this.kernelSize[2],h=this.strides[1],c=this.strides[2],d=[n[0],nv(n[s],this.strides[0],this.kernelSize[0],this.padding),nv(i,h,l,this.padding),nv(o,c,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Pi(t,[0,2,3,4,1]));let p=nu(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=Pi(p,[0,4,1,2,3])),null!==this.bias&&(p=qg(p,this.bias.read(),this.dataFormat)),null!==this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=By(e)).slice();let n,r,a,s;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,s=4):(n=4,r=1,a=2,s=3);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],h=this.strides[1],c=this.strides[2];return t[n]=this.filters,t[r]=nv(t[r],u,i,this.padding),t[a]=nv(t[a],h,o,this.padding),t[s]=nv(t[s],c,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}};cv.className="Conv3DTranspose",mo.registerClass(cv);var dv=class extends ov{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Fm("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Fm("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Fm(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=yy(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=qx(t.depthwiseRegularizer),this.depthwiseConstraint=ug(t.depthwiseConstraint),this.pointwiseInitializer=yy(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=qx(t.pointwiseRegularizer),this.pointwiseConstraint=ug(t.pointwiseConstraint)}build(e){if((e=By(e)).length<this.rank+2)throw new Fm(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Fm("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):null,this.inputSpec=[new Gy({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return Vo(()=>{let t;if(e=Vy(e),1===this.rank)throw new Rm("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Pi(e,[0,2,3,1])),t=cc(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=qg(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Pi(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=gy(this.depthwiseInitializer),e.pointwiseInitializer=gy(this.pointwiseInitializer),e.depthwiseRegularizer=Ux(this.depthwiseRegularizer),e.pointwiseRegularizer=Ux(this.pointwiseRegularizer),e.depthwiseConstraint=og(this.depthwiseConstraint),e.pointwiseConstraint=og(this.pointwiseConstraint),e}};dv.className="SeparableConv";var pv=class extends dv{constructor(e){super(2,e)}};pv.className="SeparableConv2D",mo.registerClass(pv);var fv=class extends ov{constructor(e){super(1,e),fv.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Zm(e.kernelSize,"number",1,1))throw new Fm(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};fv.className="Conv1D",mo.registerClass(fv);var mv=class extends Yy{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Vo(()=>{if(e=Vy(e),"channelsLast"===this.dataFormat){const t=$g(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return $g(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=$g(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return $g(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};mv.className="Cropping2D",mo.registerClass(mv);var gv=class extends Yy{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ag(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,Xm(gg,"InterpolationFormat",this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,t){return Vo(()=>{let t=Vy(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Pi(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r]);return Pi(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};gv.className="UpSampling2D",mo.registerClass(gv);var yv=class extends iv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=yy(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ug(e.depthwiseConstraint),this.depthwiseRegularizer=qx(e.depthwiseRegularizer)}build(e){if((e=By(e)).length<4)throw new Fm(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Fm(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return Vo(()=>{let t=function(e,t,n=[1,1],r="valid",a,s){return Vo(()=>{null==a&&(a="channelsLast"),Ag(a);let i=rv(e,a);if(4!==e.rank)throw new Fm(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new Fm(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=lu(i,t,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===a&&(i=Pi(i,[0,3,1,2])),i})}(e=Vy(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=qg(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=By(e);const t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=tv("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=tv(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,a]:[e[0],r,a,n]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=gy(this.depthwiseInitializer),e.depthwiseRegularizer=Ux(this.depthwiseRegularizer),e.depthwiseConstraint=og(this.depthwiseRegularizer),e}};function bv(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Fm("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function xv(e,t,n,r=!1,a,s,i=!1,o=!1){return Vo(()=>{const l=t.shape.length;if(l<3)throw new Fm(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Rg(2,l));if(t=Pi(t,u),null!=s)throw new Rm("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===l-1&&(a=ku(a,-1)),a=Pi(a,u)),r&&(t=nc(t,0),null!=a&&(a=nc(a,0)));const h=[];let c,d=n;const p=t.shape[0],f=Wc(t);let m,g;null!=a&&(m=Wc(a));for(let t=0;t<p;++t){const n=f[t],r=Vo(()=>e(n,d));if(null==a)c=r[0],d=r[1];else{const e=Vo(()=>{const e=m[t],n=Rh(e).sub(e);return{output:r[0].mul(e).add(d[0].mul(n)),newStates:d.map((t,a)=>r[1][a].mul(e).add(t.mul(n)))}});c=e.output,d=e.newStates}o&&h.push(c)}return o&&(g=Cc(h,1)),[c,g,d]})}yv.className="DepthwiseConv2D",mo.registerClass(yv);var vv=class extends Yy{constructor(e){let t;if(super(e),null==e.cell)throw new Fm("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new Tv({cells:e.cell}):e.cell,null==t.stateSize)throw new Fm("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Gy({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?Rg(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null):this.states_}setStates(e){this.states_=e}computeOutputShape(e){$y(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return Vo(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new Rm("Constants support is not implemented in RNN yet.");$y(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Gy({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!oa.arraysEqual(this.stateSpec.map(e=>e.shape[e.shape.length-1]),a))throw new Fm(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(e=>new Gy({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){Vo(()=>{if(!this.stateful)throw new Nm("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new Fm("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>Ah([n,e])):[Ah([n,this.cell.stateSize])];else if(null==e)Bo(this.states_),null!=this.keptStates&&(Bo(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>Ah([n,e])):this.states_[0]=Ah([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Fm(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):Bo(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,s=[n,a];if(!oa.arraysEqual(r.shape,s))throw new Fm(`State ${t} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map(e=>Wo(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=bv(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let s=[],i=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new Gy({shape:e.shape}));i=i.concat(this.stateSpec)}if(null!=r&&(t.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof qy){const n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return Vo(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=Vy(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new Fm(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},o=xv((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],u=o[1],h=o[2];this.stateful&&this.resetStates(h,r);const c=this.returnSequences?u:l;return this.returnState?[c].concat(h):c})}getInitialState(e){return Vo(()=>{let t=Ah(e.shape);return t=th(t,[1,2]),t=Og(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?Bg(t,[1,e]):t):this.cell.stateSize>1?[Bg(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===vv.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){const r=pb(t.cell,n);return new e(Object.assign(t,{cell:r}))}};vv.className="RNN",mo.registerClass(vv);var Av=class extends Yy{},wv=class extends Av{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ym(this.units,"units"),this.activation=Vx(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=yy(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=yy(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=yy(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=qx(e.kernelRegularizer),this.recurrentRegularizer=qx(e.recurrentRegularizer),this.biasRegularizer=qx(e.biasRegularizer),this.kernelConstraint=ug(e.kernelConstraint),this.recurrentConstraint=ug(e.recurrentConstraint),this.biasConstraint=ug(e.biasConstraint),this.dropout=Mg([1,Fg([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Mg([1,Fg([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=By(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return Vo(()=>{if(2!==(e=e).length)throw new Fm(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Cv({ones:()=>Rh(e),rate:this.dropout,training:r})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Cv({ones:()=>Rh(n),rate:this.recurrentDropout,training:r}));const s=this.dropoutMask,i=this.recurrentDropoutMask;a=jg(null!=s?nl(e,s):e,this.kernel.read()),null!=this.bias&&(a=qg(a,this.bias.read())),null!=i&&(n=nl(n,i));let o=Qo(a,jg(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:$x(this.activation),useBias:this.useBias,kernelInitializer:gy(this.kernelInitializer),recurrentInitializer:gy(this.recurrentInitializer),biasInitializer:gy(this.biasInitializer),kernelRegularizer:Ux(this.kernelRegularizer),recurrentRegularizer:Ux(this.recurrentRegularizer),biasRegularizer:Ux(this.biasRegularizer),activityRegularizer:Ux(this.activityRegularizer),kernelConstraint:og(this.kernelConstraint),recurrentConstraint:og(this.recurrentConstraint),biasConstraint:og(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}};wv.className="SimpleRNNCell",mo.registerClass(wv);var kv=class extends vv{constructor(e){e.cell=new wv(e),super(e)}call(e,t){return Vo(()=>(null!=this.cell.dropoutMask&&(Bo(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Bo(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return new e(t)}};kv.className="SimpleRNN",mo.registerClass(kv);var Sv=class extends Av{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Fm("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ym(this.units,"units"),this.activation=Vx(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Vx(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=yy(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=yy(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=yy(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=qx(e.kernelRegularizer),this.recurrentRegularizer=qx(e.recurrentRegularizer),this.biasRegularizer=qx(e.biasRegularizer),this.kernelConstraint=ug(e.kernelConstraint),this.recurrentConstraint=ug(e.recurrentConstraint),this.biasConstraint=ug(e.biasConstraint),this.dropout=Mg([1,Fg([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Mg([1,Fg([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=By(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return Vo(()=>{if(2!==(e=e).length)throw new Fm(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Cv({ones:()=>Rh(e),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Cv({ones:()=>Rh(r),rate:this.recurrentDropout,training:n,count:3}));const a=this.recurrentDropoutMask;let s,i,o;0<this.dropout&&this.dropout<1&&(e=nl(e,this.dropoutMask[0]));let l=jg(e,this.kernel.read());this.useBias&&(l=qg(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nl(r,a[0]));const u=this.recurrentKernel.read(),[h,c]=Sc(u,[2*this.units,this.units],u.rank-1),d=jg(r,h),[p,f,m]=Sc(l,3,l.rank-1),[g,y]=Sc(d,2,d.rank-1);s=this.recurrentActivation.apply(Qo(p,g)),i=this.recurrentActivation.apply(Qo(f,y));const b=jg(nl(i,r),c);o=this.activation.apply(Qo(m,b));const x=Qo(nl(s,r),nl(Qo(1,Zu(s)),o));return[x,x]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:$x(this.activation),recurrentActivation:$x(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gy(this.kernelInitializer),recurrentInitializer:gy(this.recurrentInitializer),biasInitializer:gy(this.biasInitializer),kernelRegularizer:Ux(this.kernelRegularizer),recurrentRegularizer:Ux(this.recurrentRegularizer),biasRegularizer:Ux(this.biasRegularizer),activityRegularizer:Ux(this.activityRegularizer),kernelConstraint:og(this.kernelConstraint),recurrentConstraint:og(this.recurrentConstraint),biasConstraint:og(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}};Sv.className="GRUCell",mo.registerClass(Sv);var Iv=class extends vv{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Sv(e),super(e)}call(e,t){return Vo(()=>(null!=this.cell.dropoutMask&&(Bo(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Bo(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};Iv.className="GRU",mo.registerClass(Iv);var _v=class extends Av{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ym(this.units,"units"),this.activation=Vx(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Vx(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=yy(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=yy(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=yy(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=qx(e.kernelRegularizer),this.recurrentRegularizer=qx(e.recurrentRegularizer),this.biasRegularizer=qx(e.biasRegularizer),this.kernelConstraint=ug(e.kernelConstraint),this.recurrentConstraint=ug(e.recurrentConstraint),this.biasConstraint=ug(e.biasConstraint),this.dropout=Mg([1,Fg([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Mg([1,Fg([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;let n;if(e=By(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,r=this.units;n=new((t=class extends Jg{apply(t,n){const a=e.apply([r]),s=(new ey).apply([r]),i=e.apply([2*r]);return Vg(Vg(a,s),i)}}).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Vo(()=>{const n=null!=t.training&&t.training;if(3!==(e=e).length)throw new Fm(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Cv({ones:()=>Rh(e),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Cv({ones:()=>Rh(r),rate:this.recurrentDropout,training:n,count:4}));const s=this.recurrentDropoutMask;let i,o,l,u;0<this.dropout&&this.dropout<1&&(e=nl(e,this.dropoutMask[0]));let h=jg(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nl(r,s[0])),h=Qo(h,jg(r,this.recurrentKernel.read())),this.useBias&&(h=qg(h,this.bias.read()));const[c,d,p,f]=Sc(h,4,h.rank-1);i=this.recurrentActivation.apply(c),o=this.recurrentActivation.apply(d),l=Qo(nl(o,a),nl(i,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const m=nl(u,this.activation.apply(l));return[m,m,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:$x(this.activation),recurrentActivation:$x(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gy(this.kernelInitializer),recurrentInitializer:gy(this.recurrentInitializer),biasInitializer:gy(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ux(this.kernelRegularizer),recurrentRegularizer:Ux(this.recurrentRegularizer),biasRegularizer:Ux(this.biasRegularizer),activityRegularizer:Ux(this.activityRegularizer),kernelConstraint:og(this.kernelConstraint),recurrentConstraint:og(this.recurrentConstraint),biasConstraint:og(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}};_v.className="LSTMCell",mo.registerClass(_v);var Ev=class extends vv{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new _v(e),super(e)}call(e,t){return Vo(()=>(null!=this.cell.dropoutMask&&(Bo(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Bo(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};Ev.className="LSTM",mo.registerClass(Ev);var Tv=class extends Av{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Vo(()=>{let n=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let s;for(let i=0;i<this.cells.length;++i){const o=this.cells[i];n=r[i],s=0===i?[e[0]].concat(n):[s[0]].concat(n),s=o.call(s,t),a.push(s.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[s[0]].concat(n)})}build(e){let t;$y(e)&&(e=e[0]),e=e,this.cells.forEach((n,r)=>{Ig("RNNCell_"+r,()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}));return Object.assign({},e,{cells:t})}static fromConfig(e,t,n={}){const r=[];for(const a of t.cells)r.push(pb(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return Hy(e)}setWeights(e){const t=[];for(const n of this.cells){const r=e.splice(n.weights.length);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}Uy(t)}};function Cv(e){const{ones:t,rate:n,training:r=!1,count:a=1}=e,s=()=>Kg(t(),n),i=()=>Xg(s,t,r);return!a||a<=1?Wo(i().clone()):Array(a).fill(void 0).map(i).map(e=>Wo(e.clone()))}Tv.className="StackedRNNCells",mo.registerClass(Tv);var Nv=class extends vv{constructor(e){if(e.unroll)throw new Rm("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Rm("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Gy({ndim:5})]}call(e,t){return Vo(()=>{if(null!=this.cell.dropoutMask&&(Bo(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Bo(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Fm("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Vo(()=>{const{stateSize:t}=this.cell,n=this.computeSingleOutputShape(e.shape),r=Ah([n[0],...n.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]})}resetStates(e,t=!1){Vo(()=>{if(!this.stateful)throw new Nm("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new Fm("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>Ah(a)):[Ah(a)];else if(null==e)Bo(this.states_),null!=this.keptStates&&(Bo(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ah(a)):this.states_[0]=Ah(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Fm(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):Bo(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!oa.arraysEqual(n.shape,r))throw new Fm(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>Wo(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:s,dilationRate:i}=this.cell,o="channelsFirst"===t,l=e[o?4:3],u=tv(e[o?3:2],r[0],a,s[0],i[0]),h=tv(l,r[1],a,s[1],i[1]);return[...e.slice(0,2),...o?[n,u,h]:[u,h,n]]}};Nv.className="ConvRNN2D";var Mv=class extends _v{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:s,dilationRate:i}=e;super(Object.assign({},e,{units:t})),this.filters=t,Ym(this.filters,"filters"),this.kernelSize=ev(n,2,"kernelSize"),this.kernelSize.forEach(e=>Ym(e,"kernelSize")),this.strides=ev(r||1,2,"strides"),this.strides.forEach(e=>Ym(e,"strides")),this.padding=a||"valid",wg(this.padding),this.dataFormat=s||"channelsLast",Ag(this.dataFormat),this.dilationRate=ev(i||1,2,"dilationRate"),this.dilationRate.forEach(e=>Ym(e,"dilationRate"))}build(e){var t;e=By(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Fm("The channel dimension of the input should be defined. Found "+e[n]);const r=this.kernelSize.concat([e[n],4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends Jg{apply(e,t){return Lg([n.apply([r]),wh([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Vo(()=>{if(3!==e.length)throw new Fm(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],a=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Cv({ones:()=>Rh(r),rate:this.dropout,training:n,count:4}));const i=this.dropoutMask,o=(e,t,n)=>t&&t[n]?nl(t[n],e):e;let l=o(r,i,0),u=o(r,i,1),h=o(r,i,2),c=o(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Cv({ones:()=>Rh(a),rate:this.recurrentDropout,training:n,count:4}));const d=this.recurrentDropoutMask;let p=o(a,d,0),f=o(a,d,1),m=o(a,d,2),g=o(a,d,3);const[y,b,x,v]=Sc(this.kernel.read(),4,3),[A,w,k,S]=this.useBias?Sc(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,A,this.padding),u=this.inputConv(u,b,w,this.padding),h=this.inputConv(h,x,k,this.padding),c=this.inputConv(c,v,S,this.padding);const[I,_,E,T]=Sc(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,I),f=this.recurrentConv(f,_),m=this.recurrentConv(m,E),g=this.recurrentConv(g,T);const C=this.recurrentActivation.apply(Qo(l,p)),N=this.recurrentActivation.apply(Qo(u,f)),M=Qo(nl(N,s),nl(C,this.activation.apply(Qo(h,m)))),F=nl(this.recurrentActivation.apply(Qo(c,g)),this.activation.apply(M));return[F,F,M]})}getConfig(){const e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(super.getConfig(),["units"]);return Object.assign({},e,{filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides})}inputConv(e,t,n,r){const a=Zl(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?qg(a,n,this.dataFormat):a}recurrentConv(e,t){return Zl(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}};Mv.className="ConvLSTM2DCell",mo.registerClass(Mv);var Fv=class extends Nv{constructor(e){const t=new Mv(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}};Fv.className="ConvLSTM2D",mo.registerClass(Fv);var Rv=class extends Yy{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return Xg(()=>Kg(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};Rv.className="Dropout",mo.registerClass(Rv);var Dv=class extends Rv{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}};Dv.className="SpatialDropout1D",mo.registerClass(Dv);var Ov=class extends Yy{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Ym(this.units,"units"),this.activation=Vx(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=yy(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=yy(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ug(e.kernelConstraint),this.biasConstraint=ug(e.biasConstraint),this.kernelRegularizer=qx(e.kernelRegularizer),this.biasRegularizer=qx(e.biasRegularizer),this.activityRegularizer=qx(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=By(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=By(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e),r=Qm(this.activation.getClassName());let a;return null!=r?a=jg(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=jg(n,this.kernel.read()),null!=this.bias&&(a=qg(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:$x(this.activation),useBias:this.useBias,kernelInitializer:gy(this.kernelInitializer),biasInitializer:gy(this.biasInitializer),kernelRegularizer:Ux(this.kernelRegularizer),biasRegularizer:Ux(this.biasRegularizer),activityRegularizer:Ux(this.activityRegularizer),kernelConstraint:og(this.kernelConstraint),biasConstraint:og(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};Ov.className="Dense",mo.registerClass(Ov);var zv=class extends Yy{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=By(e);for(const t of e.slice(1))if(null==t)throw new Fm(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ng(e,1)]}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);let n=Vy(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=n.transpose(e)}return function(e){if(e.rank<=1)throw new Fm(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Ng(e.shape,1)];return e.reshape(t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}};zv.className="Flatten",mo.registerClass(zv);var Pv=class extends Yy{constructor(e){super(e),this.supportsMasking=!0,this.activation=Vx(e.activation)}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e);return this.activation.apply(n)})}getConfig(){const e={activation:$x(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};Pv.className="Activation",mo.registerClass(Pv);var $v=class extends Yy{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Vo(()=>{return e=Vy(e),t=e,n=this.n,Vo(()=>{if(2!==t.shape.length)throw new Fm(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return Bg(Og(t,1),[1,n,1])});var t,n})}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};$v.className="RepeatVector",mo.registerClass($v);var Lv=class extends Yy{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,s=null;for(let o=0;o<r.length;++o){const e=r[o];if(this.isUnknown(e)){if(null!==s)throw new Fm("Can only specifiy one unknown dimension.");s=o}else a*=e}const i=Ng(e);if(null!==s){if(0===a||i%a!=0)throw new Fm(n);r[s]=i/a}else if(i!==a)throw new Fm(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};Lv.className="Reshape",mo.registerClass(Lv);var Vv=class extends Yy{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Rg(1,e.dims.length+1);if(!oa.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Gy({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=By(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return Pi(Vy(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};Vv.className="Permute",mo.registerClass(Vv);var Bv=class extends Yy{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=Vy(e);return ll(Fh(n,this.maskValue),-1)}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e),r=ll(Fh(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}};Bv.className="Masking",mo.registerClass(Bv);var Wv=class extends Yy{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=null==e.inputLength?[t,null]:[t].concat(Lm(e.inputLength))}this.inputDim=e.inputDim,Ym(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ym(this.outputDim,"outputDim"),this.embeddingsInitializer=yy(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=qx(e.embeddingsRegularizer),this.activityRegularizer=qx(e.activityRegularizer),this.embeddingsConstraint=ug(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Vo(()=>this.maskZero?(e=Vy(e),Fh(e,gu(e))):null)}computeOutputShape(e){if(e=By(e),null==this.inputLength)return[...e,this.outputDim];const t=Lm(this.inputLength);if(t.length!==e.length-1)throw new Fm(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const a=t[r],s=e[r+1];if(null!=a&&null!=s&&a!==s)throw new Fm(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);let n=Vy(e);return"int32"!==n.dtype&&(n=Dg(n,"int32")),Hg(this.embeddings.read(),n.as1D()).reshape(By(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:gy(this.embeddingsInitializer),embeddingsRegularizer:Ux(this.embeddingsRegularizer),activityRegularizer:Ux(this.activityRegularizer),embeddingsConstraint:og(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};Wv.className="Embedding",mo.registerClass(Wv);var jv=class extends Yy{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Rm}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],s=t[r];if(null==a||null==s||a<0||s<0)n.push(null);else if(1===a)n.push(s);else if(1===s)n.push(a);else{if(a!==s)throw new Fm("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[By(e)]),(e=e).length<2)throw new Fm(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=qm(t),t.length>1)throw new Fm(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);this.reshapeRequired=-1!==e.indexOf(null)||1!==qm(r).length}call(e,t){return Vo(()=>{if(e=e,this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=Fg(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Og(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const s of e){const e=s.rank;if(null==e){const e=s.shape,r=e[0],a=e.slice(1).concat([r]);let i=s.reshape([r].concat(Ng(e.slice(1))));i=Pi(i,[1,0]),i=i.reshape(a),t.push(i),n=!0}else if(e>1){const r=Rg(1,e).concat([0]);t.push(Pi(s,r)),n=!0}else t.push(s)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=Pi(r.reshape([-1,t]),[1,0]).reshape(n)}else if(a>1){const e=[a-1].concat(Rg(0,a-1));r=Pi(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=qm(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Vo(()=>{if(null==t)return null;if(!Array.isArray(t))throw new Fm("`mask` should be an Array");if(!Array.isArray(e))throw new Fm("`inputs` should be an Array");if(t.length!==e.length)throw new Fm(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:ku(e,0)))[0];for(let e=1;e<t.length-1;++e)n=dh(n,t[e]);return n})}},Hv=class extends jv{constructor(e){super(e)}mergeFunction(e){return Vo(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Qo(t,e[n]);return t})}};Hv.className="Add",mo.registerClass(Hv);var Uv=class extends jv{constructor(e){super(e)}mergeFunction(e){return Vo(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=nl(t,e[n]);return t})}};Uv.className="Multiply",mo.registerClass(Uv);var Gv=class extends jv{constructor(e){super(e)}mergeFunction(e){return Vo(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Qo(t,e[n]);return nl(1/e.length,t)})}};Gv.className="Average",mo.registerClass(Gv);var qv=class extends jv{constructor(e){super(e)}mergeFunction(e){return Vo(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=xh(t,e[n]);return t})}};qv.className="Maximum",mo.registerClass(qv);var Kv=class extends jv{constructor(e){super(e)}mergeFunction(e){return Vo(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Ih(t,e[n]);return t})}};Kv.className="Minimum",mo.registerClass(Kv);var Xv=class extends jv{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Fm("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let a=!1;for(const e of n)if(oa.arraysEqual(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new Fm("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Vo(()=>Lg(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Fm("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Fm("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Fm("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Fm(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Vo(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let s=0;s<e.length;++s)r.push(null==t[s]?Rh(e[s]).asType("bool"):t[s].rank<e[s].rank?ku(t[s],-1):t[s]);const a=Fl(r,this.axis);return ol(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function Zv(e,t){for(;e<0;)e+=t;return e}Xv.className="Concatenate",mo.registerClass(Xv);var Yv=class extends jv{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){oa.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Rm("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Fm(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new Fm(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>Zv(t,e[n].shape.length)):[Zv(this.axes,n.shape.length),Zv(this.axes,r.shape.length)],this.normalize&&(n=fb(n,t[0]),r=fb(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Rm("batchDot is not implemented for tensors of 4D or higher rank yet");if(oa.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+e.shape.length),oa.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+t.shape.length),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Rm("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const s=n;return Vo(()=>{let n,i;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else n=0;if(i=2===e.shape.length&&2===t.shape.length?s[0]===s[1]?e.mul(t).sum(s[0]):e.transpose([1,0]).mul(t).sum(s[1]):e.matMul(t,s[0]!==e.shape.length-1,s[1]===t.shape.length-1),n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=i.squeeze(t)}return 1===i.shape.length&&(i=i.expandDims(1)),i})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Zv(this.axes,e.length),Zv(this.axes,t.length)],n}computeOutputShape(e){oa.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Rm("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};Yv.className="Dot",mo.registerClass(Yv);var Jv=class extends Yy{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e);return Xg(()=>Wg(n.shape,0,this.stddev).add(n),()=>n,t.training||!1)})}};Jv.className="GaussianNoise",mo.registerClass(Jv);var Qv=class extends Yy{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Vo(()=>{this.invokeCallHook(e,t);const n=Vy(e);return this.rate>0&&this.rate<1?Xg(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return n.mul(Wg(n.shape,1,e))},()=>n,t.training||!1):n})}};Qv.className="GaussianDropout",mo.registerClass(Qv);var eA=class extends Yy{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Vy(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Vo(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e);return Xg(()=>{const t=Vy(e),r=-1.7580993408473766;let a=Mu(Zh(n),this.rate);a=Dg(a,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-s*r*this.rate;return t.mul(a).add(a.add(-1).mul(r)).mul(s).add(i)},()=>Vy(e),t.training||!1)}return e})}};function tA(e,t,n,r,a,s=.001){let i;if(2===e.rank)i=Ll(e,t,n,r,a,s);else if(3===e.rank)i=Vl(e,t,n,r,a,s);else{if(4!==e.rank)throw new Rm(`batchNormalization is not implemented for array of rank ${e.rank} yet`);i=Bl(e,t,n,r,a,s)}return i}eA.className="AlphaDropout",mo.registerClass(eA);var nA=class extends Yy{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=yy(e.betaInitializer||"zeros"),this.gammaInitializer=yy(e.gammaInitializer||"ones"),this.movingMeanInitializer=yy(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=yy(e.movingVarianceInitializer||"ones"),this.betaConstraint=ug(e.betaConstraint),this.gammaConstraint=ug(e.gammaConstraint),this.betaRegularizer=qx(e.betaRegularizer),this.gammaRegularizer=qx(e.gammaRegularizer)}build(e){e=By(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Fm(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Gy({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Vo(()=>{const n=null!=t.training&&t.training,r=Vy(e),a=r.shape,s=a.length,i=Rg(0,s),o=this.axis>=0?this.axis:this.axis+s;i.splice(o,1);const l=Om(1,s);l[o]=a[o];const u=i.slice();u.sort();const h=!oa.arraysEqual(u,Rg(0,s).slice(0,s-1));if(!n)return(()=>{if(h){const e=this.movingMean.read().reshape(l),t=this.movingVariance.read().reshape(l),n=this.center?this.beta.read().reshape(l):null,a=this.scale?this.gamma.read().reshape(l):null;return tA(r,e,t,n,a,this.epsilon)}return tA(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[c,d,p]=function(e,t,n,r,a=.001){return oa.arraysEqual(r.slice().sort(),Rg(0,e.rank-1))?function(e,t,n,r,a=.001){return Vo(()=>{const s=Ch(e,r),i=s.mean,o=s.variance;return[tA(e,i,o,n,t,a),i,o]})}(e,t,n,r,a):function(e,t,n,r,a=.001){return Vo(()=>{const s=Ch(e,r),i=s.mean,o=s.variance,l=[];for(const t of Rg(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=i.reshape(l),h=o.reshape(l),c=null==t?null:t.reshape(l),d=null==n?null:n.reshape(l);return[tA(e,u,h,d,c,a),i,o]})}(e,t,n,r,a)}(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{Vo(()=>{const r=1-n,a=e.read(),s=a.sub(t).mul(r);e.write(a.sub(s))})};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),c})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gy(this.betaInitializer),gammaInitializer:gy(this.gammaInitializer),movingMeanInitializer:gy(this.movingMeanInitializer),movingVarianceInitializer:gy(this.movingVarianceInitializer),betaRegularizer:Ux(this.betaRegularizer),gammaRegularizer:Ux(this.gammaRegularizer),betaConstraint:og(this.betaConstraint),gammaConstraint:og(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};nA.className="BatchNormalization",mo.registerClass(nA);var rA=class extends Yy{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=yy(e.betaInitializer||"zeros"),this.gammaInitializer=yy(e.gammaInitializer||"ones"),this.betaRegularizer=qx(e.betaRegularizer),this.gammaRegularizer=qx(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=By(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: "+r);if(this.axis.length!==qm(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);const n=this.axis.map(t=>e[t]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(e,t){const n=Vy(e),r=n.shape,a=r.length;return Vo(()=>{let{mean:e,variance:t}=Ch(n,this.axis,!0);const s=Om(1,a);for(const n of this.axis)s[n]=r[n];const i=e=>null!=e&&e.shape.length!==a&&this.axis!==[a-1]?e.reshape(s):e;let o=i(this.gamma.read()),l=i(this.beta.read());const u=[],h=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),h.push(1)):(u.push(1),h.push(r[n]));return e=e.tile(u),t=t.tile(u),o=o.tile(h),l=l.tile(h),tA(n,e,t,l,o,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gy(this.betaInitializer),gammaInitializer:gy(this.gammaInitializer),betaRegularizer:Ux(this.betaRegularizer),gammaRegularizer:Ux(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};rA.className="LayerNormalization",mo.registerClass(rA);var aA=class extends Yy{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Fm(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Fm(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new Fm(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new Gy({ndim:4})]}computeOutputShape(e){let t,n;return e=By(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return Vo(()=>{return t=Vy(e),n=this.padding,r=this.dataFormat,Vo(()=>{if(4!==t.rank)throw new Fm(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new Fm("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new Fm(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],Oh(t,e)});var t,n,r})}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};function sA(e,t,n,r,a,s){return Vo(()=>{let i;Ag(a),kg(s),wg(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=rv(e,a);const o="same"===r?"same":"valid";return i="max"===s?gh(e,t,n,o):Nl(e,t,n,o),"channelsFirst"===a&&(i=Pi(i,[0,3,1,2])),i})}function iA(e,t,n,r,a,s){return Vo(()=>{let i;Ag(a),kg(s),wg(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=av(e,a);const o="same"===r?"same":"valid";return i="max"===s?yh(e,t,n,o):Ml(e,t,n,o),"channelsFirst"===a&&(i=Pi(i,[0,4,1,2,3])),i})}aA.className="ZeroPadding2D",mo.registerClass(aA);var oA=class extends Yy{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Fm("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));this.poolSize=e.poolSize}if(Ym(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Fm("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));this.strides=e.strides}Ym(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,wg(this.padding),this.inputSpec=[new Gy({ndim:3})]}computeOutputShape(e){const t=tv((e=By(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Vo(()=>{this.invokeCallHook(e,t),e=Og(Vy(e),2);const n=this.poolingFunction(Vy(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Tc(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},lA=class extends oA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),sA(e,t,n,r,a,"max")}};lA.className="MaxPooling1D",mo.registerClass(lA);var uA=class extends oA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),sA(e,t,n,r,a,"avg")}};uA.className="AveragePooling1D",mo.registerClass(uA);var hA=class extends Yy{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Fm(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Ym(this.poolSize,"poolSize"),Ym(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ag(this.dataFormat),wg(this.padding),this.inputSpec=[new Gy({ndim:4})]}computeOutputShape(e){e=By(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=tv(t,this.poolSize[0],this.padding,this.strides[0]),n=tv(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return Vo(()=>(this.invokeCallHook(e,t),this.poolingFunction(Vy(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},cA=class extends hA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),sA(e,t,n,r,a,"max")}};cA.className="MaxPooling2D",mo.registerClass(cA);var dA=class extends hA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),sA(e,t,n,r,a,"avg")}};dA.className="AveragePooling2D",mo.registerClass(dA);var pA=class extends Yy{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Fm(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ym(this.poolSize,"poolSize"),Ym(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ag(this.dataFormat),wg(this.padding),this.inputSpec=[new Gy({ndim:5})]}computeOutputShape(e){e=By(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=tv(t,this.poolSize[0],this.padding,this.strides[0]),n=tv(n,this.poolSize[1],this.padding,this.strides[1]),r=tv(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return Vo(()=>(this.invokeCallHook(e,t),this.poolingFunction(Vy(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},fA=class extends pA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),iA(e,t,n,r,a,"max")}};fA.className="MaxPooling3D",mo.registerClass(fA);var mA=class extends pA{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Ag(a),wg(r),iA(e,t,n,r,a,"avg")}};mA.className="AveragePooling3D",mo.registerClass(mA);var gA=class extends Yy{constructor(e){super(e),this.inputSpec=[new Gy({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Rm}},yA=class extends gA{constructor(e){super(e||{})}call(e,t){return Vo(()=>{const t=Vy(e);return vh(t,1)})}};yA.className="GlobalAveragePooling1D",mo.registerClass(yA);var bA=class extends gA{constructor(e){super(e||{})}call(e,t){return Vo(()=>{const t=Vy(e);return Qu(t,1)})}};bA.className="GlobalMaxPooling1D",mo.registerClass(bA);var xA=class extends Yy{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ag(this.dataFormat),this.inputSpec=[new Gy({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Rm}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},vA=class extends xA{call(e,t){return Vo(()=>{const t=Vy(e);return vh(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};vA.className="GlobalAveragePooling2D",mo.registerClass(vA);var AA=class extends xA{call(e,t){return Vo(()=>{const t=Vy(e);return Qu(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};AA.className="GlobalMaxPooling2D",mo.registerClass(AA);var wA=class extends Yy{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=pb(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}},kA=class extends wA{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=By(e)).length<3)throw new Fm("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=By(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))}call(e,t){return Vo(()=>xv((e,n)=>[Vy(this.layer.call(e,t)),[]],e=Vy(e),[],!1,null,null,!1,!0)[1])}};kA.className="TimeDistributed",mo.registerClass(kA);var SA=class extends wA{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=pb(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=pb(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,Xm(xg,"BidirectionalMergeMode",this.mergeMode),e.weights)throw new Rm("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):$m(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=bv(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const s=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new Fm("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);const r=n.map(e=>new Gy({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new Rm("Support for constants in Bidirectional layers is not implemented yet.");const o=s[0]instanceof qy;for(const l of s)if(l instanceof qy!==o)throw new Fm("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return Vo(()=>{const n=t.initialState;let r,a,s,i;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const s=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:s})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=nc(a,1)),"concat"===this.mergeMode?i=Lg([r,a]):"sum"===this.mergeMode?i=Qo(r,a):"ave"===this.mergeMode?i=nl(.5,Qo(r,a)):"mul"===this.mergeMode?i=nl(r,a):null==this.mergeMode&&(i=[r,a]),this.returnState?null==this.mergeMode?i.concat(s):[i].concat(s):i})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ig(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ig(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=pb(t.layer);if(delete t.layer,null!=t.numConstants)throw new Rm("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}};function IA(e){return new tb(e)}function _A(e){return new Yx(e)}function EA(e){return new Kx(e)}function TA(e){return new Xx(e)}function CA(e){return new Zx(e)}function NA(e){return new Qx(e)}function MA(e){return new Jx(e)}function FA(e){return new fv(e)}function RA(e){return new lv(e)}function DA(e){return new hv(e)}function OA(e){return new uv(e)}function zA(e){return new cv(e)}function PA(e){return new pv(e)}function $A(e){return new mv(e)}function LA(e){return new gv(e)}function VA(e){return new yv(e)}function BA(e){return new Pv(e)}function WA(e){return new Ov(e)}function jA(e){return new Rv(e)}function HA(e){return new Dv(e)}function UA(e){return new zv(e)}function GA(e){return new $v(e)}function qA(e){return new Lv(e)}function KA(e){return new Vv(e)}function XA(e){return new Wv(e)}function ZA(e){return new Hv(e)}function YA(e){return new Gv(e)}function JA(e){return new Xv(e)}function QA(e){return new qv(e)}function ew(e){return new Kv(e)}function tw(e){return new Uv(e)}function nw(e){return new Yv(e)}function rw(e){return new nA(e)}function aw(e){return new rA(e)}function sw(e){return new aA(e)}function iw(e){return new uA(e)}function ow(e){return iw(e)}function lw(e){return iw(e)}function uw(e){return new dA(e)}function hw(e){return uw(e)}function cw(e){return uw(e)}function dw(e){return new mA(e)}function pw(e){return dw(e)}function fw(e){return dw(e)}function mw(e){return new yA(e)}function gw(e){return new vA(e)}function yw(e){return new bA(e)}function bw(e){return new AA(e)}function xw(e){return new lA(e)}function vw(e){return new cA(e)}function Aw(e){return new fA(e)}function ww(e){return new Iv(e)}function kw(e){return new Sv(e)}function Sw(e){return new Ev(e)}function Iw(e){return new _v(e)}function _w(e){return new kv(e)}function Ew(e){return new wv(e)}function Tw(e){return new Fv(e)}function Cw(e){return new Mv(e)}function Nw(e){return new vv(e)}function Mw(e){return new Tv(e)}function Fw(e){return new SA(e)}function Rw(e){return new kA(e)}SA.className="Bidirectional",mo.registerClass(SA);var Dw=yw,Ow=bw,zw=xw,Pw=vw;function $w(e){return new Jv(e)}function Lw(e){return new Qv(e)}function Vw(e){return new eA(e)}function Bw(e){return new Bv(e)}var Ww={};function jw(e,t){return Sb(e,t)}function Hw(e,t){return Tb(e,t)}function Uw(e,t){return Cb(e,t)}function Gw(e,t){return Ib(e,t)}function qw(e,t){return Nb(e,t)}function Kw(e,t){return Eb(e,t)}function Xw(e,t){return function(e,t){return Vo(()=>{const n=_b(e,t),r=function(e,t){return Vo(()=>dh(e.equal(1),t.equal(0)).sum().cast("float32"))}(e,t),a=n.add(r);return mu(Nu(a,0),n.div(a),0).cast("float32")})}(e,t)}function Zw(e,t){return Ab(e,t)}function Yw(e,t){return gb(e,t)}function Jw(e,t){return yb(e,t)}function Qw(e,t){return yb(e,t)}function ek(e,t){return yb(e,t)}function tk(e,t){return mb(e,t)}function nk(e,t){return mb(e,t)}function rk(e,t){return mb(e,t)}m(Ww,{MAPE:()=>Qw,MSE:()=>nk,binaryAccuracy:()=>jw,binaryCrossentropy:()=>Hw,categoricalAccuracy:()=>Gw,categoricalCrossentropy:()=>qw,cosineProximity:()=>Zw,mape:()=>ek,meanAbsoluteError:()=>Yw,meanAbsolutePercentageError:()=>Jw,meanSquaredError:()=>tk,mse:()=>rk,precision:()=>Kw,recall:()=>Xw,sparseCategoricalAccuracy:()=>Uw});var ak={};m(ak,{modelFromJSON:()=>gx});var sk={};function ik(e){return new jx(e)}function ok(e){return Bx(t=e),new jx({l1:null!=t?t.l1:null,l2:0});var t}function lk(e){return Bx(t=e),new jx({l2:null!=t?t.l2:null,l1:0});var t}m(sk,{l1:()=>ok,l1l2:()=>ik,l2:()=>lk});var uk=class extends sb{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof fx))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function hk(e,t){return e<t}function ck(e,t){return e>t}var dk,pk,fk,mk=class extends uk{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new Rm("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.monitorFunc="min"===this.mode?hk:"max"===this.mode||-1!==this.monitor.indexOf("acc")?ck:hk,this.monitorFunc===hk&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===hk?1/0:-1/0}async onEpochEnd(e,t){await rb(t);const n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});const t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}},gk={earlyStopping:function(e){return new mk(e)}};(pk=dk||(dk={}))[pk.DT_INVALID=0]="DT_INVALID",pk[pk.DT_FLOAT=1]="DT_FLOAT",pk[pk.DT_DOUBLE=2]="DT_DOUBLE",pk[pk.DT_INT32=3]="DT_INT32",pk[pk.DT_UINT8=4]="DT_UINT8",pk[pk.DT_INT16=5]="DT_INT16",pk[pk.DT_INT8=6]="DT_INT8",pk[pk.DT_STRING=7]="DT_STRING",pk[pk.DT_COMPLEX64=8]="DT_COMPLEX64",pk[pk.DT_INT64=9]="DT_INT64",pk[pk.DT_BOOL=10]="DT_BOOL",pk[pk.DT_QINT8=11]="DT_QINT8",pk[pk.DT_QUINT8=12]="DT_QUINT8",pk[pk.DT_QINT32=13]="DT_QINT32",pk[pk.DT_BFLOAT16=14]="DT_BFLOAT16",pk[pk.DT_FLOAT_REF=101]="DT_FLOAT_REF",pk[pk.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",pk[pk.DT_INT32_REF=103]="DT_INT32_REF",pk[pk.DT_UINT8_REF=104]="DT_UINT8_REF",pk[pk.DT_INT16_REF=105]="DT_INT16_REF",pk[pk.DT_INT8_REF=106]="DT_INT8_REF",pk[pk.DT_STRING_REF=107]="DT_STRING_REF",pk[pk.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",pk[pk.DT_INT64_REF=109]="DT_INT64_REF",pk[pk.DT_BOOL_REF=110]="DT_BOOL_REF",pk[pk.DT_QINT8_REF=111]="DT_QINT8_REF",pk[pk.DT_QUINT8_REF=112]="DT_QUINT8_REF",pk[pk.DT_QINT32_REF=113]="DT_QINT32_REF",pk[pk.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",function(e){let t;var n;(n=t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"}(fk||(fk={}));var yk={};function bk(e,t){yk[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function xk(e){return yk[e]}function vk(e){delete yk[e]}function Ak(e,t,n,r,a){const s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){const e=s.inputIndexStart,i=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd;if("tensor"===s.type)return wk(t.inputNames[s.inputIndexStart],n,r,a);if("tensors"===s.type)return t.inputNames.slice(e,i).map(e=>wk(e,n,r,a));const o=wk(t.inputNames.slice(e)[0],n,r,a),l=o.dataSync();return"number"===s.type?l[0]:oa.toNestedArray(o.shape,l)}const i=t.attrParams[e];return i&&i.value}function wk(e,t,n,r){const[a,s]=Ik(e);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const i=n.currentContextIds.find(e=>!!t[Sk(a,e)]);return void 0!==i?t[Sk(a,i)][s]:void 0}function kk(e,t){const[n,r,a]=Ik(e);return[Sk(n,t&&t.currentContextId),r,a]}function Sk(e,t){return t?`${e}-${t}`:e}function Ik(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=3===t.length?t[1]:void 0;return[t[0],Number(t[t.length-1]),n]}function _k(e,t,n){let r=Ak("pad",e,t,n);if("explicit"===r){r=Ak("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function Ek(e){return e.kept?e:mi(e)}var Tk={};m(Tk,{json:()=>Ck});var Ck=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nk={};m(Nk,{json:()=>Mk});var Mk=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Fk={};m(Fk,{json:()=>Rk});var Rk=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],Dk={};m(Dk,{json:()=>Ok});var Ok=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],zk={};m(zk,{json:()=>Pk});var Pk=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],$k={};m($k,{json:()=>Lk});var Lk=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Vk={};m(Vk,{json:()=>Bk});var Bk=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Wk={};m(Wk,{json:()=>jk});var jk=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Hk={};m(Hk,{json:()=>Uk});var Uk=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Gk={};m(Gk,{json:()=>qk});var qk=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],Kk={};m(Kk,{json:()=>Xk});var Xk=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Zk={};m(Zk,{json:()=>Yk});var Yk=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Jk={};m(Jk,{json:()=>Qk});var Qk=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],eS={};m(eS,{json:()=>tS});var tS=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],nS={};m(nS,{json:()=>rS});var rS=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],aS={};m(aS,{json:()=>sS});var sS=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],iS={};m(iS,{json:()=>oS});var oS=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],lS={};m(lS,{json:()=>uS});var uS=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],hS={};m(hS,{json:()=>cS});var cS=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],dS=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[Tk,Nk,Fk,Dk,zk,$k,Vk,Wk,Hk,Gk,Kk,Zk,Jk,eS,nS,aS,iS,lS,hS].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const n=[],r=[],a=[],s=e.node.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?n.push(e[t.name]):"Const"===t.op?r.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e),{});let i=[];const o=[];let l={},u={};null!=t&&(l=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const h=Object.keys(s);h.forEach(e=>{const t=s[e];t.inputNames.forEach((e,n)=>{const[r,,a]=kk(e),i=s[r];if(null!=i.outputs){const e=i.outputs.indexOf(a);-1!==e&&(t.inputNames[n]=`${r}:${e}`)}t.inputs.push(i),i.children.push(t)})}),0===Object.keys(u).length?h.forEach(e=>{const t=s[e];0===t.children.length&&o.push(t)}):Object.keys(u).forEach(e=>{const[t]=kk(e),n=s[t];null!=n&&(n.signatureKey=u[e],o.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{const[t]=kk(e),n=s[t];n&&(n.signatureKey=l[e],i.push(n))}):i=n;let c={};null!=e.library&&null!=e.library.function&&(c=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const d={nodes:s,inputs:i,outputs:o,weights:r,placeholders:n,signature:t,functions:c};return a.length>0&&(d.initNodes=a),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){const t=xk(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{const r=n.type;let a=void 0;switch(n.type){case"string":a=fS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=fS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=SS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=SS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=gS(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=gS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=kS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=kS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=mS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=mS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=_S(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=_S(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=wS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=wS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=IS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=IS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=xS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=xS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=vS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=vS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=bS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=bS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:a,type:r},t},{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));const a=[],s=[];e.signature.inputArg.forEach(e=>{const[t]=kk(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:yS(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach((e,n)=>{const[a,,s]=kk(e),i=r[a];if(null!=i.outputs){const e=i.outputs.indexOf(s);-1!==e&&(t.inputNames[n]=`${a}:${e}`)}t.inputs.push(i),i.children.push(t)})});const i=e.ret;e.signature.outputArg.forEach(e=>{const[t,n]=kk(i[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))});const o=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}};function pS(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Ve().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function fS(e,t,n,r=!1){const a=e[t];return null!=a?pS(a.s,r):n}function mS(e,t,n){const r=e[t];return r?r.b:n}function gS(e,t,n){const r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function yS(e){switch("string"==typeof e&&(e=dk[e]),e){case dk.DT_FLOAT:return"float32";case dk.DT_INT32:case dk.DT_INT64:case dk.DT_INT8:case dk.DT_UINT8:return"int32";case dk.DT_BOOL:return"bool";case dk.DT_DOUBLE:return"float32";case dk.DT_STRING:return"string";default:return null}}function bS(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function xS(e,t,n){const r=e[t];return r&&r.type?yS(r.type):n}function vS(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>yS(e)):n}function AS(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function wS(e,t,n){const r=e[t];return r&&r.shape?AS(r.shape):n}function kS(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function SS(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>pS(e,r)):n}function IS(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>AS(e)):n}function _S(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}function ES(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){oa.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){const a=e[r],s=t[r];oa.assert(a<0||s<0||a===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function TS(e){return"number"!=typeof e&&!e.some(e=>e<0)}function CS(e,t,n){let r=NS(e,n);const a=!TS(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: "+r);if(a&&t.forEach(e=>{r=NS(e.shape,r)}),!TS(r))throw new Error("Non-fully-defined elementShape: "+r);return r}function NS(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}var MS=class{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);ES(t,e.shape,"TensorList shape mismatch: "),Wo(e)}),this.idTensor=uc(0),this.maxNumElements=r,Wo(this.idTensor)}get id(){return this.idTensor.id}copy(){return new MS([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);ES(e,this.elementShape,"TensorList shape mismatch: ");const r=CS(this.elementShape,this.tensors,e);return Vo(()=>{const e=this.tensors.map(e=>Cl(e,r));return Cc(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=CS(this.elementShape,this.tensors,e),r=this.tensors.pop();return ES(r.shape,e,"TensorList shape mismatch: "),Cl(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ES(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Wo(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);ES(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=CS(this.elementShape,this.tensors,t);return Cl(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ES(this.elementShape,t.shape,"TensorList shape mismatch: "),Wo(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ES(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=CS(this.elementShape,this.tensors,n);return 0===e.length?Ss([],[0].concat(r)):Vo(()=>{const t=e.map(e=>Cl(this.tensors[e],r));return Cc(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ES(this.elementShape,t,"TensorList shape mismatch: ");const n=CS(this.elementShape,this.tensors,t);return 0===this.size()?Ss([],[0].concat(n)):Vo(()=>{const e=this.tensors.map(e=>Cl(e,n));return Fl(e,0)})}},FS=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=Ak("thenBranch",e,t,n),a=Ak("elseBranch",e,t,n),s=Ak("cond",e,t,n),i=Ak("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Ak("body",e,t,n),a=Ak("cond",e,t,n),s=Ak("args",e,t,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(e=>e.id);let l=await i[0].data();i.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||e.dispose()});let u=s;for(;l[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map(e=>e.id);e.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const s=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await s[0].data(),s.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return u}case"LoopCond":return[Ek(Ak("pred",e,t,n))];case"Switch":{const r=Ak("pred",e,t,n);let a=Ak("data",e,t,n);return a.kept||(a=Ek(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find(e=>void 0!==wk(e,t,n));return r?[Ek(wk(r,t,n))]:void 0}case"Enter":{const r=Ak("frameName",e,t,n),a=Ak("tensor",e,t,n);return n.enterFrame(r),[Ek(a)]}case"Exit":{const r=Ak("tensor",e,t,n);return n.exitFrame(),[Ek(r)]}case"NextIteration":{const r=Ak("tensor",e,t,n);return n.nextIteration(),[Ek(r)]}case"TensorArrayV3":{const r=Ak("size",e,t,n),a=Ak("dtype",e,t,n),s=Ak("elementShape",e,t,n),i=Ak("dynamicSize",e,t,n),o=Ak("clearAfterRead",e,t,n),l=Ak("identicalElementShapes",e,t,n),u=Ak("name",e,t,n),h=new class{constructor(e,t,n,r,a,s,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=uc(0),Wo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),ES(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Wo(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Ss([],[0].concat(this.elementShape));const n=this.readMany(e);return ES(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Cc(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Ss([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return ES(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Fl(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Wc(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=0===n?0:t.size/n,s=[];Vo(()=>{t=Cl(t,[1,n,a]);for(let n=0;n<e.length;++n)s[n]=Cl(Dl(t,[0,0===n?0:r[n-1],0],[1,e[n],a]),this.elementShape);return s});const i=[];for(let o=0;o<e.length;o++)i[o]=o;this.writeMany(i,s)}}(u,a,r,s,l,i,o);return n.addTensorArray(h),[h.idTensor,uc(1)]}case"TensorArrayWriteV3":{const r=Ak("tensorArrayId",e,t,n),a=Ak("index",e,t,n),s=Ak("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{const r=Ak("tensorArrayId",e,t,n),a=Ak("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=Ak("tensorArrayId",e,t,n),a=Ak("indices",e,t,n),s=Ak("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=Ak("tensorArrayId",e,t,n),a=Ak("indices",e,t,n),s=Ak("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{const r=Ak("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=Ak("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=Ak("tensorArrayId",e,t,n),a=Ak("tensor",e,t,n),s=Ak("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{const r=Ak("tensorArrayId",e,t,n);return[uc(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=Ak("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=Ak("tensorListId",e,t,n),a=Ak("index",e,t,n),s=Ak("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{const r=Ak("tensorListId",e,t,n),a=Ak("index",e,t,n),s=Ak("elementShape",e,t,n),i=Ak("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Ak("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const s=new MS([],n,e.dtype,r),i=Wc(e,0);return t.forEach((e,t)=>{s.setItem(e,i[t])}),s}(Ak("tensor",e,t,n),r,Ak("elementShape",e,t,n),Ak("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Ak("elementShape",e,t,n),a=Ak("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=function(e,t,n){return new MS([],e,t,n)}(r,a,Ak(s,e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListGather":{const r=Ak("tensorListId",e,t,n),a=Ak("indices",e,t,n),s=Ak("elementShape",e,t,n),i=Ak("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,i,s)]}case"TensorListStack":{const r=Ak("tensorListId",e,t,n),a=Ak("elementShape",e,t,n),s=Ak("elementDType",e,t,n),i=Ak("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+e.shape);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);ES(e.shape.slice(1),t,"TensorList shape mismatch: ");const a=Wc(e);return new MS(a,t,r)}(Ak("tensor",e,t,n),Ak("elementShape",e,t,n),Ak("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=Ak("tensorListId",e,t,n),a=n.getTensorList(r.id),s=Ak("dtype",e,t,n),i=Ak("elementShape",e,t,n);return[a.concat(s,i)]}case"TensorListPushBack":{const r=Ak("tensorListId",e,t,n),a=Ak("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=Ak("tensorListId",e,t,n),a=Ak("elementShape",e,t,n),s=Ak("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=Ak("tensor",e,t,n),a=Ak("elementShape",e,t,n),s=function(e,t,n){let r=0;const a=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const s=NS(e.shape.slice(1),n),i=0===r?0:e.size/r,o=Vo(()=>{const n=[];e=Cl(e,[1,r,i]);for(let r=0;r<t.length;++r)n[r]=Cl(Dl(e,[0,0===r?0:a[r-1],0],[1,t[r],i]),s);return e.dispose(),n}),l=new MS([],n,e.dtype,t.length);for(let u=0;u<o.length;u++)l.setItem(u,o[u]);return l}(r,Ak("lengths",e,t,n),a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function RS(e,t,n){const[r,a]=Ak("fusedOps",e,t,n),s="biasadd"===r,i=!s,o="prelu"===a,l="fusedbatchnorm"===r,u=Ak("numArgs",e,t,n);if(s){if(o&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const h=Ak("strides",e,t,n),c=_k(e,t,n),d=Ak("dataFormat",e,t,n).toUpperCase(),p=Ak("dilations",e,t,n);let[f,m]=Ak("args",e,t,n);return i&&(m=f,f=void 0),{stride:h,pad:c,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:Ak("leakyreluAlpha",e,t,n)}}function DS(e,t,n){return{boxes:Ak("boxes",e,t,n),scores:Ak("scores",e,t,n),maxOutputSize:Ak("maxOutputSize",e,t,n),iouThreshold:Ak("iouThreshold",e,t,n),scoreThreshold:Ak("scoreThreshold",e,t,n),softNmsSigma:Ak("softNmsSigma",e,t,n)}}var OS=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=Ak("keyDType",e,t,n),s=Ak("valueDType",e,t,n),i=new class{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=uc(0),this.tensorMap=new Map,Wo(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return uc(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),Vo(()=>{const e=Wc(t),r=n.length,a=e.length;oa.assert(r===a,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`);for(let t=0;t<r;t++){const r=n[t],a=e[t];Wo(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Vo(()=>{const e=[];for(let r=0;r<n.length;r++){const a=this.findWithDefault(n[r],t);e.push(a)}return Cc(e)})}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}(a,s);return r.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=Ak("tableHandle",e,t,n,r),s=Ak("keys",e,t,n),i=Ak("values",e,t,n),o=r.getHashTableById(a.id);return[await o.import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{const a=Ak("tableHandle",e,t,n,r),s=Ak("keys",e,t,n),i=Ak("defaultValue",e,t,n),o=r.getHashTableById(a.id);return[await o.find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=Ak("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function zS(e,t,n,r){const a=((e,t,n)=>{switch(e.category){case"arithmetic":return Vo(()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Qo(Ak("a",e,t,n),Ak("b",e,t,n))];case"AddN":return[il(Ak("tensors",e,t,n))];case"FloorMod":case"Mod":return[Eh(Ak("a",e,t,n),Ak("b",e,t,n))];case"Mul":return[nl(Ak("a",e,t,n),Ak("b",e,t,n))];case"RealDiv":case"Div":return[tl(Ak("a",e,t,n),Ak("b",e,t,n))];case"DivNoNan":return[yu(Ak("a",e,t,n),Ak("b",e,t,n))];case"FloorDiv":return[el(Ak("a",e,t,n),Ak("b",e,t,n))];case"Sub":return[eh(Ak("a",e,t,n),Ak("b",e,t,n))];case"Minimum":return[Ih(Ak("a",e,t,n),Ak("b",e,t,n))];case"Maximum":return[xh(Ak("a",e,t,n),Ak("b",e,t,n))];case"Pow":return[Wh(Ak("a",e,t,n),Ak("b",e,t,n))];case"SquaredDifference":return[Ec(Ak("a",e,t,n),Ak("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"basic_math":return Vo(()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[rl(Ak("x",e,t,n))];case"Acos":return[al(Ak("x",e,t,n))];case"Acosh":return[sl(Ak("x",e,t,n))];case"Asin":return[cl(Ak("x",e,t,n))];case"Asinh":return[dl(Ak("x",e,t,n))];case"Atan":return[pl(Ak("x",e,t,n))];case"Atan2":return[fl(Ak("x",e,t,n),Ak("y",e,t,n))];case"Atanh":return[ml(Ak("x",e,t,n))];case"Ceil":return[Hl(Ak("x",e,t,n))];case"Complex":return[ws(Ak("real",e,t,n),Ak("imag",e,t,n))];case"Cos":return[ru(Ak("x",e,t,n))];case"Cosh":return[au(Ak("x",e,t,n))];case"Elu":return[vu(Ak("x",e,t,n))];case"Erf":return[Au(Ak("x",e,t,n))];case"Exp":return[wu(Ak("x",e,t,n))];case"Expm1":return[Su(Ak("x",e,t,n))];case"Floor":return[Tu(Ak("x",e,t,n))];case"Log":return[Bu(Ak("x",e,t,n))];case"Log1p":return[Wu(Ak("x",e,t,n))];case"Imag":return[Fu(Ak("x",e,t,n))];case"Neg":return[Zu(Ak("x",e,t,n))];case"Reciprocal":return[Qh(Ak("x",e,t,n))];case"Real":return[Jh(Ak("x",e,t,n))];case"Relu":return[ec(Ak("x",e,t,n))];case"Round":return[oc(Ak("x",e,t,n))];case"Selu":return[hc(Ak("x",e,t,n))];case"Sigmoid":return[Rl(Ak("x",e,t,n))];case"Sin":return[fc(Ak("x",e,t,n))];case"Sign":return[pc(Ak("x",e,t,n))];case"Sinh":return[mc(Ak("x",e,t,n))];case"Softplus":return[Yu(Ak("x",e,t,n))];case"Sqrt":return[_c(Ak("x",e,t,n))];case"Square":return[Th(Ak("x",e,t,n))];case"Tanh":return[Ol(Ak("x",e,t,n))];case"Tan":return[Fc(Ak("x",e,t,n))];case"ClipByValue":return[Ul(Ak("x",e,t,n),Ak("clipValueMin",e,t,n),Ak("clipValueMax",e,t,n))];case"Relu6":return[tc(Ak("x",e,t,n))];case"Rsqrt":return[lc(wk(e.inputNames[0],t,n))];case"Prod":return[Hh(Ak("x",e,t,n),Ak("axes",e,t,n))];case"LeakyRelu":return[zu(Ak("x",e,t,n),Ak("alpha",e,t,n))];case"Prelu":return[jh(Ak("x",e,t,n),Ak("alpha",e,t,n))];case"IsNan":return[Ou(wk(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"control":return FS(e,t,n);case"convolution":return Vo(()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=Ak("stride",e,t,n),a=Ak("pad",e,t,n),s=Ak("dataFormat",e,t,n).toUpperCase(),i=Ak("dilation",e,t,n);return[Yl(Ak("x",e,t,n),Ak("filter",e,t,n),r,a,s,i)]}case"Conv2D":{const r=Ak("strides",e,t,n),a=_k(e,t,n),s=Ak("dataFormat",e,t,n).toUpperCase(),i=Ak("dilations",e,t,n);return[Zl(Ak("x",e,t,n),Ak("filter",e,t,n),[r[1],r[2]],a,s,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:h}=RS(e,t,n);return[rd.conv2d({x:Ak("x",e,t,n),filter:Ak("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:h}=RS(e,t,n);return[rd.depthwiseConv2d({x:Ak("x",e,t,n),filter:Ak("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Ak("outputShape",e,t,n),a=Ak("strides",e,t,n),s=_k(e,t,n);return[Ql(Ak("x",e,t,n),Ak("filter",e,t,n),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Ak("strides",e,t,n),a=_k(e,t,n),s=Ak("dilations",e,t,n),i=Ak("dataFormat",e,t,n).toUpperCase();return[lu(Ak("input",e,t,n),Ak("filter",e,t,n),[r[1],r[2]],a,i,[s[1],s[2]])]}case"Conv3D":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("dataFormat",e,t,n).toUpperCase(),i=Ak("dilations",e,t,n);return[eu(Ak("x",e,t,n),Ak("filter",e,t,n),[r[1],r[2],r[3]],a,s,[i[1],i[2],i[3]])]}case"AvgPool":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("kernelSize",e,t,n);return[Nl(Ak("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("kernelSize",e,t,n);return[gh(Ak("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("kernelSize",e,t,n),i=Ak("includeBatchInIndex",e,t,n),{result:o,indexes:l}=bh(Ak("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a,i);return[o,l]}case"AvgPool3D":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("kernelSize",e,t,n);return[Ml(Ak("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("kernelSize",e,t,n);return[yh(Ak("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=Ak("strides",e,t,n),a=Ak("pad",e,t,n),s=Ak("dilations",e,t,n),i=r[1],o=r[2],l=s[1],u=s[2];return[hu(Ak("x",e,t,n),Ak("filter",e,t,n),[i,o],a,[l,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"creation":return Vo(()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=Ak("shape",e,t,n),a=Ak("dtype",e,t,n);return[Eu(r,Ak("value",e,t,n),a)]}case"LinSpace":return[Lu(Ak("start",e,t,n),Ak("stop",e,t,n),Ak("num",e,t,n))];case"Multinomial":{const r=Ak("logits",e,t,n),a=Ak("numSamples",e,t,n),s=Ak("seed",e,t,n);return[Mh(r,a,s)]}case"OneHot":{const r=Ak("indices",e,t,n),a=Ak("depth",e,t,n),s=Ak("onValue",e,t,n),i=Ak("offValue",e,t,n);return[zi(r,a,s,i)]}case"Ones":return[wh(Ak("shape",e,t,n),Ak("dtype",e,t,n))];case"OnesLike":return[Rh(Ak("x",e,t,n))];case"RandomUniform":return[Zh(Ak("shape",e,t,n),Ak("minval",e,t,n),Ak("maxval",e,t,n),Ak("dtype",e,t,n))];case"Range":return[Yh(Ak("start",e,t,n),Ak("stop",e,t,n),Ak("step",e,t,n),Ak("dtype",e,t,n))];case"TruncatedNormal":{const r=Ak("shape",e,t,n),a=Ak("mean",e,t,n),s=Ak("stdDev",e,t,n),i=Ak("seed",e,t,n);return[Lc(r,a,s,Ak("dtype",e,t,n),i)]}case"Zeros":return[Ah(Ak("shape",e,t,n),Ak("dtype",e,t,n))];case"ZerosLike":return[gu(Ak("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}=DS(e,t,n),u=await lp.nonMaxSuppressionWithScoreAsync(r,a,s,i,o,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o}=DS(e,t,n),l=Ak("padToMaxOutputSize",e,t,n),u=await lp.nonMaxSuppressionPaddedAsync(r,a,s,i,o,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o}=DS(e,t,n);return[await lp.nonMaxSuppressionAsync(r,a,s,i,o)]}case"Where":{const r=fi(Ak("condition",e,t,n),"bool"),a=[await Uc(r)];return r.dispose(),a}case"ListDiff":return dc(Ak("x",e,t,n),Ak("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return Vo(()=>((e,t,n)=>{switch(e.op){case"TopKV2":{const r=Ak("x",e,t,n),a=Ak("k",e,t,n),s=Ak("sorted",e,t,n),i=$c(r,a,s);return[i.values,i.indices]}case"Unique":{const r=Ak("x",e,t,n),a=Vc(r);return[a.values,a.indices]}case"UniqueV2":{const r=Ak("x",e,t,n),a=Ak("axis",e,t,n),s=Vc(r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"image":return Vo(()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=Ak("images",e,t,n),a=Ak("size",e,t,n),s=Ak("alignCorners",e,t,n),i=Ak("halfPixelCenters",e,t,n);return[lp.resizeBilinear(r,[a[0],a[1]],s,i)]}case"ResizeNearestNeighbor":{const r=Ak("images",e,t,n),a=Ak("size",e,t,n),s=Ak("alignCorners",e,t,n),i=Ak("halfPixelCenters",e,t,n);return[lp.resizeNearestNeighbor(r,[a[0],a[1]],s,i)]}case"CropAndResize":{const r=Ak("image",e,t,n),a=Ak("boxes",e,t,n),s=Ak("boxInd",e,t,n),i=Ak("cropSize",e,t,n),o=Ak("method",e,t,n),l=Ak("extrapolationValue",e,t,n);return[lp.cropAndResize(r,a,s,i,o,l)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"graph":return Vo(()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=Ak("default",e,t,n);return[wk(e.name,t,n)||r];case"Placeholder":return[wk(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[Ek(Ak("x",e,t,n))];case"IdentityN":return Ak("x",e,t,n).map(e=>Ek(e));case"Snapshot":return[Ek(Ak("x",e,t,n))];case"Shape":return[Rc(Ak("x",e,t,n).shape,"int32")];case"ShapeN":return Ak("x",e,t,n).map(e=>Rc(e.shape));case"Size":return[uc(Ak("x",e,t,n).size,"int32")];case"Rank":return[uc(Ak("x",e,t,n).rank,"int32")];case"NoOp":return[uc(1)];case"Print":const a=Ak("x",e,t,n),s=Ak("data",e,t,n),i=Ak("message",e,t,n),o=Ak("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,o));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"logical":return Vo(()=>((e,t,n)=>{switch(e.op){case"Equal":return[fu(Ak("a",e,t,n),Ak("b",e,t,n))];case"NotEqual":return[Fh(Ak("a",e,t,n),Ak("b",e,t,n))];case"Greater":return[Nu(Ak("a",e,t,n),Ak("b",e,t,n))];case"GreaterEqual":return[Mu(Ak("a",e,t,n),Ak("b",e,t,n))];case"Less":return[Pu(Ak("a",e,t,n),Ak("b",e,t,n))];case"LessEqual":return[$u(Ak("a",e,t,n),Ak("b",e,t,n))];case"LogicalAnd":return[dh(Ak("a",e,t,n),Ak("b",e,t,n))];case"LogicalNot":return[ph(Ak("a",e,t,n))];case"LogicalOr":return[fh(Ak("a",e,t,n),Ak("b",e,t,n))];case"Select":case"SelectV2":return[mu(Ak("condition",e,t,n),Ak("a",e,t,n),Ak("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"matrices":return Vo(()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Oi(Ak("a",e,t,n),Ak("b",e,t,n),Ak("transposeA",e,t,n),Ak("transposeB",e,t,n))];case"Einsum":return[xu(Ak("equation",e,t,n),...Ak("tensors",e,t,n))];case"Transpose":return[Pi(Ak("x",e,t,n),Ak("perm",e,t,n))];case"_FusedMatMul":const[r,a]=Ak("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===a,o=Ak("numArgs",e,t,n),l=Ak("leakyreluAlpha",e,t,n);if(s){if(i&&2!==o)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==o)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=Ak("args",e,t,n);return[rd.matMul({a:Ak("a",e,t,n),b:Ak("b",e,t,n),transposeA:Ak("transposeA",e,t,n),transposeB:Ak("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"normalization":return Vo(()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[$l(Ak("x",e,t,n),Ak("mean",e,t,n),Ak("variance",e,t,n),Ak("offset",e,t,n),Ak("scale",e,t,n),Ak("epsilon",e,t,n))];case"LRN":return[Vu(Ak("x",e,t,n),Ak("radius",e,t,n),Ak("bias",e,t,n),Ak("alpha",e,t,n),Ak("beta",e,t,n))];case"Softmax":return[vc(Ak("x",e,t,n))];case"LogSoftmax":return[nh(Ak("x",e,t,n))];case"SparseToDense":return[Yc(Ak("sparseIndices",e,t,n),Ak("outputShape",e,t,n),Ak("sparseValues",e,t,n),Ak("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"reduction":return Vo(()=>((e,t,n)=>{switch(e.op){case"Max":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[Qu(Ak("x",e,t,n),r,a)]}case"Mean":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[vh(Ak("x",e,t,n),r,a)]}case"Min":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[Sh(Ak("x",e,t,n),r,a)]}case"Sum":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[th(Ak("x",e,t,n),r,a)]}case"All":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[ol(Ak("x",e,t,n),r,a)]}case"Any":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[ll(Ak("x",e,t,n),r,a)]}case"ArgMax":{const r=Ak("axis",e,t,n);return[ul(Ak("x",e,t,n),r)]}case"ArgMin":{const r=Ak("axis",e,t,n);return[hl(Ak("x",e,t,n),r)]}case"Prod":{const r=Ak("axis",e,t,n),a=Ak("keepDims",e,t,n);return[Hh(Ak("x",e,t,n),r,a)]}case"Cumsum":{const r=Ak("axis",e,t,n),a=Ak("exclusive",e,t,n),s=Ak("reverse",e,t,n);return[su(Ak("x",e,t,n),r,a,s)]}case"Bincount":const r=Ak("x",e,t,n),a=Ak("weights",e,t,n),s=Ak("size",e,t,n);return[Wl(r,a,s)];case"DenseBincount":{const r=Ak("x",e,t,n),a=Ak("weights",e,t,n),s=Ak("size",e,t,n),i=Ak("binaryOutput",e,t,n);return[iu(r,a,s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"slice_join":return Vo(()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=Ak("n",e,t,n),a=Ak("axis",e,t,n);let s=Ak("tensors",e,t,n);return s=s.slice(0,r),[Fl(s,a)]}case"Gather":{const r=Ak("x",e,t,n),a=Ak("indices",e,t,n);return[Cu(r,fi(a,"int32"),0)]}case"GatherV2":{const r=Ak("axis",e,t,n),a=Ak("batchDims",e,t,n),s=Ak("x",e,t,n),i=Ak("indices",e,t,n);return[Cu(s,fi(i,"int32"),r,a)]}case"Reverse":{const r=Ak("dims",e,t,n),a=[];for(let e=0;e<r.length;e++)r[e]&&a.push(e);const s=Ak("x",e,t,n);return[nc(s,a)]}case"ReverseV2":{const r=Ak("axis",e,t,n),a=Ak("x",e,t,n);return[nc(a,r)]}case"Slice":{const r=Ak("begin",e,t,n),a=Ak("size",e,t,n);return[Dl(Ak("x",e,t,n),r,a)]}case"StridedSlice":{const r=Ak("begin",e,t,n),a=Ak("end",e,t,n),s=Ak("strides",e,t,n),i=Ak("beginMask",e,t,n),o=Ak("endMask",e,t,n),l=Ak("ellipsisMask",e,t,n),u=Ak("newAxisMask",e,t,n),h=Ak("shrinkAxisMask",e,t,n),c=Ak("x",e,t,n);return[Mc(c,r,a,s,i,o,l,u,h)]}case"Pack":return Vo(()=>{const r=Ak("axis",e,t,n),a=Ak("tensors",e,t,n),s=a[0].shape,i=Tc(a[0]).shape,o=a.map(e=>{const t=oa.arraysEqual(e.shape,s);if(!t&&!oa.arraysEqual(Tc(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:Cl(e,s)});return[Cc(o,r)]});case"Unpack":{const r=Ak("axis",e,t,n),a=Ak("tensor",e,t,n);return Wc(a,r)}case"Tile":{const r=Ak("reps",e,t,n);return[Iu(Ak("x",e,t,n),r)]}case"Split":case"SplitV":{const r=Ak("axis",e,t,n),a=Ak("numOrSizeSplits",e,t,n),s=Ak("x",e,t,n);return Sc(s,a,r)}case"ScatterNd":{const r=Ak("indices",e,t,n),a=Ak("values",e,t,n),s=Ak("shape",e,t,n);return[Zc(r,a,s)]}case"GatherNd":{const r=Ak("x",e,t,n),a=Ak("indices",e,t,n);return[Jc(r,a)]}case"SparseToDense":{const r=Ak("sparseIndices",e,t,n),a=Ak("outputShape",e,t,n),s=Ak("sparseValues",e,t,n),i=Ak("defaultValue",e,t,n);return[Yc(r,s,a,s.dtype===i.dtype?i:fi(i,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"sparse":return Vo(()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:a,emptyRowIndicator:s,reverseIndexMap:i}=cp.sparseFillEmptyRows(Ak("indices",e,t,n),Ak("values",e,t,n),Ak("denseShape",e,t,n),Ak("defaultValue",e,t,n));return[r,a,s,i]}case"SparseReshape":{const{outputIndices:r,outputShape:a}=cp.sparseReshape(Ak("inputIndices",e,t,n),Ak("inputShape",e,t,n),Ak("newShape",e,t,n));return[r,a]}case"SparseSegmentMean":return[cp.sparseSegmentMean(Ak("data",e,t,n),Ak("indices",e,t,n),Ak("segmentIds",e,t,n))];case"SparseSegmentSum":return[cp.sparseSegmentSum(Ak("data",e,t,n),Ak("indices",e,t,n),Ak("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"spectral":return Vo(()=>((e,t,n)=>{switch(e.op){case"FFT":return[Ac(Ak("x",e,t,n))];case"IFFT":return[wc(Ak("x",e,t,n))];case"RFFT":return[Ic(Ak("x",e,t,n))];case"IRFFT":return[kc(Ak("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"string":return Vo(()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:a}=dp.stringNGrams(Ak("data",e,t,n),Ak("dataSplits",e,t,n),Ak("separator",e,t,n),Ak("nGramWidths",e,t,n),Ak("leftPad",e,t,n),Ak("rightPad",e,t,n),Ak("padWidth",e,t,n),Ak("preserveShortSequences",e,t,n));return[r,a]}case"StringSplit":{const{indices:r,values:a,shape:s}=dp.stringSplit(Ak("input",e,t,n),Ak("delimiter",e,t,n),Ak("skipEmpty",e,t,n));return[r,a,s]}case"StringToHashBucketFast":return[dp.stringToHashBucketFast(Ak("input",e,t,n),Ak("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"transformation":return Vo(()=>((e,t,n)=>{switch(e.op){case"Cast":return[fi(Ak("x",e,t,n),Ak("dtype",e,t,n))];case"ExpandDims":{const r=Ak("axis",e,t,n);return[ku(Ak("x",e,t,n),r)]}case"Squeeze":{const r=Ak("axis",e,t,n);return[Tc(Ak("x",e,t,n),r)]}case"Reshape":return[Cl(Ak("x",e,t,n),Ak("shape",e,t,n))];case"MirrorPad":return[_h(Ak("x",e,t,n),Ak("padding",e,t,n),Ak("mode",e,t,n))];case"PadV2":case"Pad":return[Oh(Ak("x",e,t,n),Ak("padding",e,t,n),Ak("constantValue",e,t,n))];case"SpaceToBatchND":{const r=Ak("blockShape",e,t,n),a=Ak("paddings",e,t,n);return[Vh(Ak("x",e,t,n),r,a)]}case"BatchToSpaceND":{const r=Ak("blockShape",e,t,n),a=Ak("crops",e,t,n);return[Pl(Ak("x",e,t,n),r,a)]}case"DepthToSpace":{const r=Ak("blockSize",e,t,n),a=Ak("dataFormat",e,t,n).toUpperCase();return[ou(Ak("x",e,t,n),r,a)]}case"BroadcastTo":return[jl(Ak("x",e,t,n),Ak("shape",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"hash_table":return OS(e,t,n,r);case"custom":const a=xk(e.op);if(a&&a.customExecutor)return a.customExecutor(new class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return wk(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return wk(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return gS(this.node.rawAttrs,e,t);if(null!=n.s)return fS(this.node.rawAttrs,e,t);if(null!=n.b)return mS(this.node.rawAttrs,e,t);if(null!=n.shape)return wS(this.node.rawAttrs,e,t);if(null!=n.type)return xS(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return kS(this.node.rawAttrs,e,t);if(null!=n.list.s)return SS(this.node.rawAttrs,e,t);if(null!=n.list.shape)return IS(this.node.rawAttrs,e,t);if(null!=n.list.b)return _S(this.node.rawAttrs,e,t);if(null!=n.list.type)return vS(this.node.rawAttrs,e,t)}return t}}(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return oa.isPromise(a)?a.then(e=>[].concat(e)):[].concat(a)}var PS=class{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function $S(e,t,n,r){const a=new Set,s=[];let i=null,o=null;const l=new Set,u=Object.keys(e).map(e=>Ik(e)[0]);let h=[];null!=r&&(h=r.map(e=>Ik(e.name)[0]));const c=[...t];for(;c.length>0;){const e=c.pop();(WS(e)||jS(e)||HS(e))&&null==i&&(i=e,o=i.children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&-1===u.indexOf(e.name)&&-1===h.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),c.push(e))}):s.push(e.name))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:o}}var LS=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],VS=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],BS=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function WS(e){return LS.indexOf(e.op)>=0}function jS(e){return VS.indexOf(e.op)>=0}function HS(e){return BS.indexOf(e.op)>=0}var US=class{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new US(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=$S(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=t.map(e=>e.name),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:a}=n,s=[],i=Object.keys(a).map(e=>Ik(e)[0]).map(t=>e.nodes[t]),o=e.initNodes;i.forEach(e=>{r.has(e.name)&&s.push(e)}),e.weights.forEach(e=>{r.has(e.name)&&s.push(e)}),null!=o&&o.forEach(e=>{r.has(e.name)&&s.push(e)});const l=new Set,u=[];for(;s.length>0;){const e=s.pop();l.add(e.name),t[e.name]||u.push(e),e.children.forEach(e=>{!l.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>l.has(e.name))&&s.push(e)})}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map(e=>this.graph.nodes[Ik(e)[0]]),a=t.map(e=>Ik(e)[0]);let s=a.map(e=>this.graph.nodes[e]);0===s.length&&(s=this._outputs);const i=this.getCompilationKey(r,s);let o=this.compiledMap.get(i);null==o&&(o=this.compile(e,s),this.compiledMap.set(i,o));const l={},u={};return Vo(()=>{const n=new PS(this.weightMap,l,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,a]=Ik(t),s=[];s[a]=e[t],r[n]=s});const s=this.getFrozenTensorIds(r),i={};for(let e=0;e<o.length;e++){const t=o[e];if(!r[t.name]){const e=zS(t,r,n,this._resourceManager);if(oa.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,s,a,i)}}return null==this.parent&&n.dispose(s),t.map(e=>wk(e,r,n))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,i){"control"!==t.category&&-1===s.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){const t=function(e,t,n){return t[Sk(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach(e=>{if(e&&!e.kept&&!a.has(e.id)){const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));const s=new PS(this.weightMap,r,a,this.functionExecutorMap),i=await this.executeWithControlFlow(e,s,t,n),o=t.map(e=>wk(e,i,s)),l=o.map(e=>e.id),u=Object.keys(e).map(t=>e[t].id),h=new Set([...l,...u,...this.weightIds]);return Object.keys(i).forEach(e=>{i[e].forEach(e=>{!e||e.kept||e.isDisposed||h.has(e.id)||e.dispose()})}),null==this.parent&&s.dispose(h),o}async executeFunctionAsync(e,t,n){const r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),s=a.map(e=>this.graph.nodes[Ik(e)[0]]),i=n.map(e=>Ik(e)[0]);let o=i.map(e=>this.graph.nodes[e]);0===o.length&&(o=this._outputs);const{usedNodes:l,missingInputs:u,dynamicNode:h,syncInputs:c}=$S(e,o,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=Ik(t),a=[];a[r]=e[t],p[n]=a});const f={},m=this.getFrozenTensorIds(p),g={};for(;d.length>0;){const e=this.processStack(s,d,t,p,g,m,i,f,l);await Promise.all(e)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=o.filter(e=>!WS(e)&&!wk(e.name,p,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=h&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${c}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${a}]. Consider providing the following inputs: [${u}]. ${e}`)}return p}processStack(e,t,n,r,a,s,i,o,l){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let h="";if("Enter"===e.node.op&&Ak("isConstant",e.node,r,n)&&([h]=kk(e.node.name,n)),null==r[e.node.name]){const c=zS(e.node,r,n,this._resourceManager);h||([h]=kk(e.node.name,n));const d=n.currentContext;oa.isPromise(c)?u.push(c.then(u=>(r[h]=u,n.currentContext=d,this.checkTensorForDisposal(h,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l),u))):(r[h]=c,this.checkTensorForDisposal(h,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return u}processChildNodes(e,t,n,r,a,s){e.children.forEach(e=>{const[i]=kk(e.name,n);!a[i]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!wk(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!wk(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const n=e[t],[r]=Ik(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);oa.assert(t,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&oa.assert(n.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){const t={};for(const n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter(e=>{const[t]=Ik(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]?this._signature.outputs[e].name:e,{})}checkOutputs(e){e.forEach(e=>{const[t]=Ik(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}},GS=class{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=yi.browserHTTPRequest(e,this.loadOptions);else{const t=yi.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(yi.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=yi.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new US(dS.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=dS.Instance.transformGraph(e.modelInitializer);this.initializer=new US(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=yi.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof Pa||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,r)=>(t[n]=e[r],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}};async function qS(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e+="model.json?tfjs-format=file");const n=new GS(e,t);return await n.load(),n}var KS="3.7.0",XS={};m(XS,{CSVDataset:()=>VI,Dataset:()=>TI,FileDataSource:()=>JI,TextLineDataset:()=>RI,URLDataSource:()=>QI,array:()=>NI,csv:()=>e_,func:()=>t_,generator:()=>n_,microphone:()=>a_,version_data:()=>s_,webcam:()=>r_,zip:()=>MI});var ZS=g(O()),YS=g(O());function JS(e,t,n=new Map,r=new Set){if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(rI(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const s in e){const i=JS(e[s],t,n,r);a[s]=i}return r.delete(e),a}throw new Error("Can't recurse into non-iterable type: "+e)}return n.set(e,a.value),a.value}function QS(e,t=tI){return eI(e,t)}function eI(e,t,n=new Set){const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(rI(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const s in r){const r=eI(e.map(e=>e[s]),t,n);a[s]=r}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: "+r)}return a.value}function tI(e){return null===e?null:rI(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function nI(e,t){const n=new Map;JS(e,t,n);for(const r of Array.from(n.keys())){const e=n.get(r);if(oa.isPromise(e)){const t=await e;n.set(r,t)}}return JS(e,t,n)}function rI(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Pa))}function aI(e){return e instanceof Pa?{value:e.clone(),recurse:!1}:rI(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var sI=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},iI=class extends sI{constructor(){super(iI.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};function oI(e){return new dI(e)}function lI(e){return new pI(e)}iI.INITIAL_CAPACITY=32;var uI,hI,cI=class{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new vI(this,e)}filter(e){return new bI(this,e)}map(e){return new xI(this,e)}mapAsync(e){return new AI(this,e)}serialMapAsync(e){return new AI(this,e).serial()}flatmap(e){return new kI(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new yI(this,e,t)}columnMajorBatch(e,t=!0,n=tI){return this.rowMajorBatch(e,t).map(e=>QS(e,n))}concatenate(e,t){return new SI(oI([this,e]),t)}take(e){return e<0||null==e?this:new gI(this,e)}skip(e){return e<0||null==e?this:new mI(this,e)}prefetch(e){return new _I(this,e)}shuffle(e,t){return new EI(this,e,t)}serial(){return new fI(this)}},dI=class extends cI{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:(t=e,JS(t,aI)),done:!1};var t}},pI=class extends cI{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: "+e.message,e}}},fI=class extends cI{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},mI=class extends cI{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;Bo(e.value)}return this.upstream.next()}},gI=class extends cI{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},yI=class extends cI{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},bI=class extends cI{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Bo(e.value)}}},xI=class extends cI{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Map"}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Za.getTensorsInContainer(e.value),n=this.transform(e.value),r=Za.getTensorsInContainer(n);for(const a of t)Za.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},vI=class extends cI{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},AI=class extends cI{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Za.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Za.getTensorsInContainer(n);for(const a of t)Za.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},wI=class extends cI{constructor(){super(),this.outputQueue=new iI,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},kI=class extends wI{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=Za.getTensorsInContainer(e.value),n=this.transform(e.value),r=Za.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const a of t)Za.isTensorInList(a,r)||a.dispose();return!0}},SI=class extends cI{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}};(hI=uI||(uI={}))[hI.FAIL=0]="FAIL",hI[hI.SHORTEST=1]="SHORTEST",hI[hI.LONGEST=2]="LONGEST";var II=class extends cI{constructor(e,t=uI.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;const r=await nI(this.iterators,function(e){return e instanceof cI?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}});if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case uI.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case uI.SHORTEST:return{value:null,done:!0}}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},_I=class extends cI{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new sI(t)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},EI=class extends _I{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=YS.alea(n||oa.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}},TI=class{constructor(){this.size=null}batch(e,t=!0){const n=this;let r;return oa.assert(e>0,()=>"batchSize needs to be positive, but it is\n      "+e),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),CI(async()=>(await n.iterator()).columnMajorBatch(e,t,FI),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,CI(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,CI(async()=>(await t.iterator()).filter(t=>Vo(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return CI(async()=>(await t.iterator()).map(t=>Vo(()=>e(t))),this.size)}mapAsync(e){const t=this;return CI(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return CI(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,CI(async()=>{return n=lI(async()=>({value:await t.iterator(),done:!1})).take(e),new SI(n,void 0);var n},n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,CI(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,a=ZS.alea(t||oa.now().toString());return CI(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,CI(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};function CI(e,t=null){return new class extends TI{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function NI(e){return CI(async()=>oI(e),e.length)}function MI(e){if(!rI(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(const n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return CI(async()=>function(e,t=uI.FAIL){return new II(e,t)}(await nI(e,e=>{if(e instanceof TI)return{value:e.iterator(),recurse:!1};if(rI(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),uI.SHORTEST),t)}function FI(e){return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof Pa||oa.isTypedArray(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Pa?Cc(e):Ss(e)}(e),recurse:!1}:{value:null,recurse:!0};var t,n}TI.MAX_BUFFER_SIZE=1e4;var RI=class extends TI{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},DI='"',OI=Symbol("out"),zI=Symbol("field"),PI=Symbol("quote"),$I=Symbol("quoteafterquote"),LI=Symbol("quoteinquote"),VI=class extends TI{constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new RI(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(oa.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&oa.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);const t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(oa.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");return this.parseRow(t.value,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){const t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){const s=this.fullColumnNames[a],i=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||i){const o=t[a];let l=null;if(""===o)if(i&&void 0!==i.default)l=i.default;else{if(i&&(i.required||i.isLabel))throw new Error(`Required column ${s} is empty in this line: ${e}`);l=void 0}else{const e=Number(o);if(isNaN(e))l=i&&"bool"===i.dtype?this.getBoolean(o):o;else if(i&&i.dtype)switch(i.dtype){case"float32":l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(o);break;default:l=e}else l=e}i&&i.isLabel?r[s]=l:n[s]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const n=[];let r=0;const a=e.length;let s=OI;for(let i=0;i<a;i++)switch(s){case OI:switch(e.charAt(i)){case DI:r=i+1,s=PI;break;case this.delimiter:if(r=i+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=OI;break;default:s=zI,r=i}break;case zI:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i)),s=OI,r=i+1}break;case PI:switch(e.charAt(i)){case DI:s=$I}break;case $I:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i-1)),s=OI,r=i+1;break;case DI:s=PI;break;default:s=LI}break;case LI:switch(e.charAt(i)){case DI:s=PI}}if(n.push(s===$I?e.substring(r,a-1):e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}},BI=class extends cI{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(Ve().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const t=new BI(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t;const n=await this.getAudioData();if(this.includeSpectrogram){const t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],t=[];let n=0;return new Promise(r=>{const a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){const n=new Float32Array(oa.sizeFromShape(t));return n.set(e,n.length-e.length),Ss(n,t)}},WI=class extends cI{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Rc([0],"int32"),this.webcamConfig.centerCrop){const e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2;this.cropBox=Dc([r,n,t+r,n+e],[1,4])}else this.cropBox=Dc([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(Ve().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}const n=new WI(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&oa.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message="Error thrown while initializing video stream: "+e.message,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=Li.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(t))}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error("Error thrown cropping the video: "+t.message)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return Vo(()=>{const t=ku(fi(e,"float32"),0);let n;return n=lp.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear"),Cl(n,n.shape.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},jI=class{},HI=class extends cI{split(e){return new UI(this,e)}},UI=class extends HI{constructor(e,t){super(),this.upstream=e,this.impl=new GI(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},GI=class extends wI{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(const n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},qI=class extends cI{decodeUTF8(){return new KI(this)}},KI=class extends HI{constructor(e){super(),this.upstream=e,this.impl=new XI(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},XI=class extends wI{constructor(e){if(super(),this.upstream=e,Ve().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=z();this.decoder=new e("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){const e=await this.upstream.next();let t,n;return!e.done&&(t=e.value,n=Ve().get("IS_BROWSER")?this.decoder.decode(t,{stream:!0}):this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0)}},ZI=class extends qI{constructor(e,t={}){super(),this.file=e,this.options=t,oa.assert(e instanceof Uint8Array||!!Ve().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise((e,t)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));const a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n});return{value:await e,done:!1}}};function YI(e){return"string"==typeof e&&"file://"===e.substr(0,7)}var JI=class extends jI{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(YI(this.input)&&Ve().get("IS_NODE")){const e=p("fs");this.input=e.readFileSync(this.input.substr(7))}return new ZI(this.input,this.options)}},QI=class extends jI{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return YI(this.url)?new JI(this.url,this.fileOptions).iterator():async function(e,t={}){let n,r;var a;"string"==typeof e?n=e:(n=e.url,r={method:(a=e).method,headers:a.headers,body:a.body,mode:a.mode,credentials:a.credentials,cache:a.cache,redirect:a.redirect,referrer:a.referrer,integrity:a.integrity});const s=await oa.fetch(n,r);if(s.ok){const e=new Uint8Array(await s.arrayBuffer());return new ZI(e,t)}throw new Error(s.statusText)}(this.url,this.fileOptions)}};function e_(e,t={}){return new VI(new QI(e),t)}function t_(e){const t=lI(e);return CI(async()=>t)}function n_(e){return CI(async()=>{const t=await e();return lI(()=>t.next())})}async function r_(e,t){return WI.create(e,t)}async function a_(e){return BI.create(e)}var s_="3.7.0";function i_(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&oa.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the CPU backend.")})}var o_=mf.whereImpl,l_=class extends j{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new W(this,Po())}nextDataId(){return l_.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,Ve().get("IS_NODE")&&Ip.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&oa.isString(n[0])){const a=n.map(e=>oa.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Ip.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>oa.decodeString(e))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return pi(e.shape,e.dtype,n)}makeOutput(e,t,n){const r=this.write(e,t,n);return Po().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=oa.now();return e(),{kernelMs:oa.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){i_([e],"where");const t=this.readSync(e.dataId);return o_(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};l_.nextDataId=0;var u_={};function h_(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}m(u_,{addImpl:()=>S_,bincountImpl:()=>T_,bincountReduceImpl:()=>C_,ceilImpl:()=>R_,concatImpl:()=>z_,equalImpl:()=>P_,expImpl:()=>V_,expm1Impl:()=>j_,floorImpl:()=>G_,gatherNdImpl:()=>X_,gatherV2Impl:()=>Z_,greaterEqualImpl:()=>eE,greaterImpl:()=>Y_,lessEqualImpl:()=>iE,lessImpl:()=>rE,linSpaceImpl:()=>uE,logImpl:()=>hE,maxImpl:()=>pE,maximumImpl:()=>fE,minimumImpl:()=>yE,multiplyImpl:()=>vE,negImpl:()=>SE,notEqualImpl:()=>_E,prodImpl:()=>FE,rangeImpl:()=>DE,rsqrtImpl:()=>OE,simpleAbsImpl:()=>h_,sliceImpl:()=>$E,sparseFillEmptyRowsImpl:()=>BE,sparseReshapeImpl:()=>WE,sparseSegmentReductionImpl:()=>jE,squaredDifferenceImpl:()=>HE,stridedSliceImpl:()=>qE,stringNGramsImpl:()=>KE,stringSplitImpl:()=>ZE,stringToHashBucketFastImpl:()=>YE,subImpl:()=>JE,tileImpl:()=>nT,topKImpl:()=>rT,transposeImpl:()=>CE,uniqueImpl:()=>aT});var c_={kernelName:Ue,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;i_(t,"abs");let r=new Float32Array(oa.sizeFromShape(t.shape));return r=h_(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};function d_(e){return(t,n,r,a,s)=>{const i=Ip.assertAndGetBroadcastShape(t,n),o=i.length,l=oa.computeStrides(i),u=oa.sizeFromShape(i),h=oa.getTypedArrayFromDType(s,u),c=t.length,d=n.length,p=oa.computeStrides(t),f=oa.computeStrides(n),m=Ip.getBroadcastDims(t,i),g=Ip.getBroadcastDims(n,i);if(m.length+g.length===0)for(let y=0;y<h.length;++y)h[y]=e(r[y%r.length],a[y%a.length]);else for(let y=0;y<h.length;++y){const t=oa.indexToLoc(y,o,l),n=t.slice(-c);m.forEach(e=>n[e]=0);const s=oa.locToIndex(n,c,p),i=t.slice(-d);g.forEach(e=>i[e]=0);const u=oa.locToIndex(i,d,f);h[y]=e(r[s],a[u])}return[h,i]}}function p_(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",i)},o}var f_={kernelName:gt,backendName:"cpu",kernelFunc:p_};function m_(e,t,n="float32"){if("complex64"===n)return p_({inputs:{real:m_(e,t,"float32"),imag:m_(e,t,"float32")},backend:e});const r=oa.makeZerosTypedArray(oa.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function g_(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var y_={kernelName:rn,backendName:"cpu",kernelFunc:g_};function b_(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}var x_={kernelName:Zn,backendName:"cpu",kernelFunc:b_};function v_(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===a.dtype)return g_({inputs:{x:a},backend:n});const e=m_(n,a.shape,a.dtype),t=v_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=p_({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=b_({inputs:{input:a},backend:n}),t=v_({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!oa.hasEncodingLoss(a.dtype,s)){const e=g_({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s){const e=n.data.get(a.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(a.shape,"int32",t)}if("bool"===s){const e=n.data.get(a.dataId).values,t=oa.toTypedArray([0],a.dtype),[r,s]=d_((e,t)=>e!==t?1:0)(a.shape,[],e,t,"bool");return n.makeTensorInfo(s,"bool",r)}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}var A_={kernelName:pt,backendName:"cpu",kernelFunc:v_};function w_(e,t,n,r){return null==n?({inputs:n,backend:a})=>{const{a:s,b:i}=n,o=a;i_([s,i],e);const l=o.data.get(s.dataId).values,u=o.data.get(i.dataId).values,h="string"===s.dtype?Ip.fromUint8ToStringArray(l):l,c="string"===s.dtype?Ip.fromUint8ToStringArray(u):u,d=r||s.dtype,[p,f]=t(s.shape,i.shape,h,c,d);return o.makeTensorInfo(f,d,p)}:({inputs:e,backend:a})=>{const{a:s,b:i}=e,o=a;if("complex64"===s.dtype||"complex64"===i.dtype){const e=v_({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),t=o.data.get(e.dataId),r=t.complexTensorInfos.imag,a=o.data.get(t.complexTensorInfos.real.dataId).values,l=o.data.get(r.dataId).values,u=v_({inputs:{x:i},backend:o,attrs:{dtype:"complex64"}}),h=o.data.get(u.dataId),c=h.complexTensorInfos.imag,d=o.data.get(h.complexTensorInfos.real.dataId).values,p=o.data.get(c.dataId).values,[f,m,g]=n(s.shape,i.shape,a,l,d,p),y=o.makeTensorInfo(g,"float32",f),b=o.makeTensorInfo(g,"float32",m),x=p_({inputs:{real:y,imag:b},backend:o});return o.disposeIntermediateTensorInfo(e),o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(b),x}{const e=o.data.get(s.dataId).values,n=o.data.get(i.dataId).values,a=r||s.dtype,[l,u]=t(s.shape,i.shape,e,n,a);return o.makeTensorInfo(u,a,l)}}}function k_(e){return(t,n,r,a,s,i)=>{const o=Ip.assertAndGetBroadcastShape(t,n),l=oa.sizeFromShape(o),u=o.length,h=oa.computeStrides(o),c=oa.getTypedArrayFromDType("float32",l),d=oa.getTypedArrayFromDType("float32",l),p=Ip.getBroadcastDims(t,o),f=Ip.getBroadcastDims(n,o),m=Ip.mergeRealAndImagArrays(r,a),g=Ip.mergeRealAndImagArrays(s,i),y=t.length,b=oa.computeStrides(t),x=n.length,v=oa.computeStrides(n);if(p.length+f.length===0)for(let A=0;A<c.length;A++){const t=A%m.length,n=A%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);c[A]=r.real,d[A]=r.imag}else for(let A=0;A<c.length;A++){const t=oa.indexToLoc(A,u,h),n=t.slice(-y);p.forEach(e=>n[e]=0);const r=oa.locToIndex(n,y,b),a=t.slice(-x);f.forEach(e=>a[e]=0);const s=oa.locToIndex(a,x,v),i=e(m[2*r],m[2*r+1],g[2*s],g[2*s+1]);c[A]=i.real,d[A]=i.imag}return[c,d,o]}}var S_=d_((e,t)=>e+t),I_=k_((e,t,n,r)=>({real:e+n,imag:t+r})),__=w_(Ke,S_,I_),E_={kernelName:Ke,backendName:"cpu",kernelFunc:__};function T_(e,t,n,r,a){const s=oa.sizeFromShape(r),i=oa.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){const n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(i[n]+=s>0?t[o]:1)}return i}function C_(e,t,n,r=!1){const a=e.shape[0],s=e.shape[1],i=pi([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<s;a++){const s=e.get(o,a);if(s<0)throw new Error("Input x must be non-negative!");s>=n||i.set(r?1:t.size>0?i.get(o,s)+t.get(o,a):i.get(o,s)+1,o,s)}return i}function N_(e){return(t,n,r)=>{const a=oa.getTypedArrayFromDType(n,t.length);for(let s=0;s<t.length;++s)a[s]=e(t[s],r);return a}}function M_(e,t,n){return({inputs:r,attrs:a,backend:s})=>{const{x:i}=r;if(i_(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(i.dataId).values,u=oa.sizeFromShape(i.shape),h=n||i.dtype,c=oa.getArrayFromDType(h,u);for(let e=0;e<u;++e)c[e]=t(l[e],a);return o.makeTensorInfo(i.shape,h,c)}}function F_(e,t,n){return({inputs:r,attrs:a,backend:s})=>{const{x:i}=r;if(i_(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(i.dataId).values,u=n||i.dtype,h=t(l,u,a);return o.makeTensorInfo(i.shape,u,h)}}var R_=N_(e=>Math.ceil(e)),D_=F_(ft,R_),O_={kernelName:ft,backendName:"cpu",kernelFunc:D_};function z_(e,t,n,r){const a=oa.getArrayFromDType(n,oa.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=oa.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const s="string"===n?Ip.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=s[i++]}r+=e.shape[1]})}return a}var P_=d_((e,t)=>e===t?1:0),$_=w_(jt,P_,null,"bool"),L_={kernelName:jt,backendName:"cpu",kernelFunc:$_},V_=N_(e=>Math.exp(e)),B_=F_(Ht,V_),W_={kernelName:Ht,backendName:"cpu",kernelFunc:B_},j_=N_(e=>Math.expm1(e)),H_=F_(Gt,j_),U_={kernelName:Gt,backendName:"cpu",kernelFunc:H_},G_=N_(e=>Math.floor(e)),q_=F_(Zt,G_),K_={kernelName:Zt,backendName:"cpu",kernelFunc:q_};function X_(e,t,n,r,a,s,i,o,l){const u=pi([r,s],n);for(let h=0;h<r;h++){const n=[];let r=0;for(let t=0;t<a;t++){const s=e[h*a+t];r+=s*i[t],n.push(s)}if(r<0||r>=l/s)throw new Error(`Invalid indices: ${n} does not index into ${o}`);for(let e=0;e<s;e++)u.values[h*s+e]=t.get(...t.indexToLoc(r*s+e))}return u}function Z_(e,t,n){const r=pi(n,e.dtype);for(let a=0;a<r.size;++a){const n=r.indexToLoc(a).slice(),s=t.locToIndex([n[0],n[2]]);n[2]=t.values[s];const i=e.locToIndex(n);r.values[a]=e.values[i]}return r}var Y_=d_((e,t)=>e>t?1:0),J_=w_(tn,Y_,null,"bool"),Q_={kernelName:tn,backendName:"cpu",kernelFunc:J_},eE=d_((e,t)=>e>=t?1:0),tE=w_(nn,eE,null,"bool"),nE={kernelName:nn,backendName:"cpu",kernelFunc:tE},rE=d_((e,t)=>e<t?1:0),aE=w_(cn,rE,null,"bool"),sE={kernelName:cn,backendName:"cpu",kernelFunc:aE},iE=d_((e,t)=>e<=t?1:0),oE=w_(dn,iE,null,"bool"),lE={kernelName:dn,backendName:"cpu",kernelFunc:oE};function uE(e,t,n){const r=(t-e)/(n-1),a=oa.makeZerosTypedArray(n,"float32");a[0]=e;for(let s=1;s<a.length;s++)a[s]=a[s-1]+r;return a}var hE=N_(e=>Math.log(e)),cE=F_(fn,hE),dE={kernelName:fn,backendName:"cpu",kernelFunc:cE};function pE(e,t,n,r){const a=oa.getTypedArrayFromDType(r,oa.sizeFromShape(n));for(let s=0;s<a.length;++s){const n=s*t;let r=e[n];for(let a=0;a<t;++a){const t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[s]=r}return a}var fE=d_((e,t)=>Math.max(e,t)),mE=w_(kn,fE),gE={kernelName:kn,backendName:"cpu",kernelFunc:mE},yE=d_((e,t)=>Math.min(e,t)),bE=w_(Mn,yE),xE={kernelName:Mn,backendName:"cpu",kernelFunc:bE},vE=d_((e,t)=>e*t),AE=k_((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),wE=w_(On,vE,AE),kE={kernelName:On,backendName:"cpu",kernelFunc:wE};function SE(e,t,n){const r=oa.createScalarValue(-1,n);return vE([],t,r,e,n)}var IE={kernelName:zn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;i_(r,"neg");const a=n.data.get(r.dataId).values,[s,i]=SE(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}},_E=d_((e,t)=>e!==t?1:0),EE=w_(Pn,_E,null,"bool"),TE={kernelName:Pn,backendName:"cpu",kernelFunc:EE};function CE(e,t,n,r,a){const s=t.length,i=oa.sizeFromShape(t),o=oa.computeStrides(t),l=oa.computeStrides(a),u=oa.getTypedArrayFromDType(n,oa.sizeFromShape(a));for(let h=0;h<i;++h){const t=oa.indexToLoc(h,s,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[oa.locToIndex(n,s,l)]=e[h]}return u}function NE(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:s}=n;i_(a,"transpose");const i=new Array(a.shape.length);for(let l=0;l<i.length;l++)i[l]=a.shape[s[l]];const o=CE(r.data.get(a.dataId).values,a.shape,a.dtype,s,i);return{dataId:r.write(o,i,a.dtype),shape:i,dtype:a.dtype}}var ME={kernelName:Lr,backendName:"cpu",kernelFunc:NE};function FE(e,t,n,r){const[a,s]=Ip.computeOutAndReduceShapes(e,r),i=Ja(t,"int32"),o=oa.makeZerosTypedArray(oa.sizeFromShape(a),i),l=oa.sizeFromShape(s);for(let u=0;u<o.length;++u){const e=u*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];o[u]=t}return{outVals:o,outShape:a,outDtype:i}}var RE={kernelName:Kn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;i_(a,"prod");const o=a.shape.length,l=oa.parseAxisParam(s,a.shape),u=Ip.getAxesPermutation(l,o);let h=l,c=a;const d=[];null!=u&&(c=NE({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(c),h=Ip.getInnerMostAxes(h.length,o));const p=n.data.get(c.dataId).values,{outVals:f,outShape:m,outDtype:g}=FE(c.shape,c.dtype,p,h);let y=m;return i&&(y=Ip.expandShapeToKeepDim(m,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,f)}};function DE(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return oa.makeZerosTypedArray(0,r);const a=Math.abs(Math.ceil((t-e)/n)),s=oa.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),s[0]=e;for(let i=1;i<s.length;i++)s[i]=s[i-1]+n;return s}var OE=N_(e=>1/Math.sqrt(e)),zE=F_(or,OE),PE={kernelName:or,backendName:"cpu",kernelFunc:zE};function $E(e,t,n,r,a){const s=Yi.isSliceContinous(r,t,n),i=oa.sizeFromShape(n),o=oa.computeStrides(r);if(s){const n=Yi.computeFlatOffset(t,o);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}const l=pi(r,a,"string"===a?Ip.fromUint8ToStringArray(e):e),u=pi(n,a);for(let h=0;h<u.size;++h){const e=u.indexToLoc(h),n=e.map((e,n)=>e+t[n]);u.set(l.get(...n),...e)}return"string"===a?Ip.fromStringArrayToUint8(u.values):u.values}function LE(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r;i_(a,"slice");const[o,l]=Yi.parseSliceParams(a,s,i);Yi.assertParamsValid(a,o,l);const u=$E(n.data.get(a.dataId).values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,u)}var VE={kernelName:cr,backendName:"cpu",kernelFunc:LE};function BE(e,t,n,r,a,s,i){const o=t[0],l=s[0],u=new Array(l),h=new Array(o),c=t[1];if(0===l){if(0!==o)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = "+o);return[oa.getArrayFromDType(n,0),[0,c],oa.getArrayFromDType(a,0),u,h]}let d=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<o;++g){const t=e[g*c];if(t<0)throw new Error(`indices(${g}, 0) is invalid: ${t} < 0`);if(t>=l)throw new Error(`indices(${g}, 0) is invalid: ${t} >= ${l}`);++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=r;for(let e=0;e<o;++e)h[e]=e;return[t,[o,c],n,u,h]}{const t=f[l-1],s=oa.getArrayFromDType(n,t*c),d=oa.getArrayFromDType(a,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){const t=e[n*c],a=(0===t?0:f[t-1])+p[t];p[t]++;for(let r=0;r<c;++r)s[a*c+r]=e[n*c+r];d[a]=r[n],h[n]=a}for(let e=0;e<l;++e)if(0===p[e]){const t=0===e?0:f[e-1];s[t*c+0]=e;for(let e=1;e<c;++e)s[t*c+e]=0;d[t]=i}return[s,[t,c],d,u,h]}}function WE(e,t,n,r,a){const s=oa.sizeFromShape(r),i=t[0],o=a.length,l=[];let u=1,h=-1;for(let g=0;g<o;++g){const e=a[g];if(-1===e){if(-1!==h)throw new Error(`only one output dimension may be -1, not both ${h} and ${g}`);h=g,l.push(1)}else{if(e<0)throw new Error(`size ${g} must be non-negative, not ${e}`);u*=e,l.push(e)}}if(-1!==h){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(s/u);if(u*e!==s)throw new Error(`Input to reshape is a SparseTensor with ${s}\n          dense values, but the requested shape requires a multiple of ${u}. inputShape=${r} outputShape= ${l}`);l[h]=e}const c=oa.sizeFromShape(l);if(c!==s)throw new Error(`Input to reshape is a tensor with ${s} dense values, but the requested shape has ${c}. inputShape=${r} outputShape=${l}`);const d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}const f=[];if(o>0){f[o-1]=1;for(let e=o-2;e>=0;--e)f[e]=f[e+1]*l[e+1]}const m=oa.getArrayFromDType(n,i*o);for(let g=0;g<i;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*p[n];for(let e=0;e<o;++e)m[g*o+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[i,o],l]}function jE(e,t,n,r,a,s=!1,i=0){const o=r.length;if(o!==a.length)throw new Error("segmentIds and indices should have same size.");const l=[t[0],e.length/t[0]],u=l[1],h=o>0?a[o-1]+1:0;if(h<0)throw new Error("segment ids must be >= 0");const c=t.slice();c[0]=h;const d=c.reduce((e,t)=>e*t,1),p=oa.getArrayFromDType(n,d);if(0===o)return h>0&&p.fill(i),[p,c];if(h<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=a[f];for(;;){let t=0;if(m<o){if(t=a[m],y===t){++m;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error(`Segment id ${y} out of range [0, ${h}), possibly because segmentIds input is not sorted.`);y>g&&p.fill(i,g*u,y*u);for(let n=f;n<m;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(`Bad: indices[${n}] == ${r[n]} out of range [0, ${l[0]})`);for(let n=0;n<u;n++)p[y*u+n]+=e[t*u+n]}if(s)for(let e=0;e<u;e++)p[y*u+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>o)break}return g<h&&p.fill(i,g*u,h*u),[p,c]}var HE=d_((e,t)=>{const n=e-t;return n*n}),UE=w_(Er,HE),GE={kernelName:Er,backendName:"cpu",kernelFunc:UE};function qE(e,t,n,r){const a=pi(e,t.dtype);for(let s=0;s<a.size;s++){const e=a.indexToLoc(s),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];a.set(t.get(...i),...e)}return a}function KE(e,t,n,r,a,s,i,o){return new class{constructor(e,t,n,r,a,s){this.separator=oa.encodeString(e),this.nGramWidths=t,this.leftPad=oa.encodeString(n),this.rightPad=oa.encodeString(r),this.padWidth=a,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let i=0;i<a;++i){const o=this.getPadWidth(s),l=Math.max(0,o-i),u=Math.max(0,o-(a-(i+1))),h=s-(l+u),c=t+(l>0?0:i-o);let d=0;d+=l*this.leftPad.length;for(let t=0;t<h;++t)d+=e[c+t].length;d+=u*this.rightPad.length,d+=(l+u+h-1)*this.separator.length,n[r+i]=new Uint8Array(d);const p=n[r+i];let f=0;const m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<h-1;++t)m(e[c+t]),m(this.separator);if(h>0){m(e[c+h-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got "+e);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const a=r-1,s=oa.getArrayFromDType("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=a;++t)s[t]=0;return[e,s]}s[0]=0;for(let o=1;o<=a;++o){const e=t[o]-t[o-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),s[o]=s[o-1]+n}const i=new Array(s[a]);for(let o=0;o<a;++o){const n=t[o];let r=s[o];if(this.nGramWidths.forEach(a=>{const s=this.getNumNGrams(t[o+1]-t[o],a);this.createNGrams(e,n,i,r,s,a),r+=s}),this.preserveShort&&r===s[o]){const a=t[o+1]-t[o];if(0===a)continue;this.createNGrams(e,n,i,r,1,a+2*this.padWidth)}}return[i,s]}}(n,r,a,s,i,o).compute(e,t)}function XE(e,t,n){if(!e.length)return[];if(0===t.length){const t=new Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.subarray(n,n+1);return t}if(1===t.length){const r=t[0],a=[];let s=e.indexOf(r);for(;-1!==s;){const t=e.subarray(0,s);n&&0===t.length||a.push(t),s=(e=e.subarray(s+1)).indexOf(r)}return n&&0===e.length||a.push(e),a}const r=[];let a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){const t=e.subarray(a,s);n&&0===t.length||r.push(t),a=s+1}return r}function ZE(e,t,n){const r=e.length,a=[];let s=0,i=0;const o=new Array(r);for(let d=0;d<r;++d){const r=XE(e[d],t,n),l=r.length;o[d]=l,s+=l,i=Math.max(i,l),a.push(...r)}const l=oa.getArrayFromDType("int32",2*s),u=new Array(s),h=[r,i];let c=0;for(let d=0;d<r;++d)for(let e=0;e<o[d];++e)l[2*c]=d,l[2*c+1]=e,u[c]=a[c],++c;return[l,u,h]}function YE(e,t){const n=oa.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=oa.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var JE=d_((e,t)=>e-t),QE=k_((e,t,n,r)=>({real:e-n,imag:t-r})),eT=w_(Rr,JE,QE),tT={kernelName:Rr,backendName:"cpu",kernelFunc:eT};function nT(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const r=pi(n,e.dtype);for(let a=0;a<r.values.length;++a){const t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const s=e.locToIndex(n);r.values[a]=e.values[s]}return r}function rT(e,t,n,r,a){const s=t[t.length-1],[i,o]=[e.length/s,s],l=oa.getTypedArrayFromDType(n,i*r),u=oa.getTypedArrayFromDType("int32",i*r);for(let c=0;c<i;c++){const t=c*o,n=e.subarray(t,t+o),a=[];for(let e=0;e<n.length;e++)a.push({value:n[e],index:e});a.sort((e,t)=>t.value-e.value);const s=c*r,i=l.subarray(s,s+r),h=u.subarray(s,s+r);for(let e=0;e<r;e++)i[e]=a[e].value,h[e]=a[e].index}const h=t.slice();return h[h.length-1]=r,[pi(h,n,l),pi(h,"int32",u)]}function aT(e,t,n,r){const a=oa.parseAxisParam(t,n)[0],s=[1,n[0],1];for(let f=0;f<a;f++)s[0]*=n[f];s[1]=n[a];for(let f=a+1;f<n.length;f++)s[2]*=n[f];const i={},o=new Int32Array(n[a]),l=new Da(s,r,e),u=[],h=1===s[0]&&1===s[2];for(let f=0;f<n[a];f++){let t;if(h)t=e[f].toString();else{const e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(l.get(t,f,n));t=e.join(",")}if(void 0!==i[t])o[f]=i[t];else{const e=Object.keys(i).length;i[t]=e,o[f]=e,u.push(f)}}const c=s.slice();c[1]=Object.keys(i).length;const d=new Da(c,r);u.forEach((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)d.set(l.get(n,e,r),n,t,r)});const p=n.slice();return p[a]=c[1],{outputValues:d.values,outputShape:p,indices:o}}Zo("cpu",()=>new l_,1);var sT=M_(Vt,e=>e>=0?e:Math.exp(e)-1),iT={kernelName:Vt,backendName:"cpu",kernelFunc:sT};function oT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r;i_([a],"leakyRelu");const i=oa.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,l=oa.getTypedArrayFromDType("float32",i);for(let u=0;u<o.length;u++)l[u]=o[u]<0?s*o[u]:o[u];return n.makeTensorInfo(a.shape,"float32",l)}var lT={kernelName:hn,backendName:"cpu",kernelFunc:oT},uT=d_((e,t)=>e<0?t*e:e);function hT(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;i_([r,a],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[o,l]=uT(r.shape,a.shape,s,i,r.dtype);return n.makeTensorInfo(l,r.dtype,o)}var cT={kernelName:qn,backendName:"cpu",kernelFunc:hT},dT=M_(Jn,e=>Math.max(0,e)),pT={kernelName:Jn,backendName:"cpu",kernelFunc:dT},fT=M_(ar,e=>Math.min(Math.max(0,e),6)),mT={kernelName:ar,backendName:"cpu",kernelFunc:fT},gT=M_(mr,e=>1/(1+Math.exp(-e))),yT={kernelName:mr,backendName:"cpu",kernelFunc:gT};function bT(e,t,n,r,a){if("linear"===n)return g_({inputs:{x:t},backend:e});if("relu"===n)return dT({inputs:{x:t},backend:e});if("elu"===n)return sT({inputs:{x:t},backend:e});if("relu6"===n)return fT({inputs:{x:t},backend:e});if("prelu"===n)return hT({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return oT({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return gT({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function xT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=oa.sizeFromShape(a.shape),o=oa.inferFromImplicitShape(s,i),l=oa.sizeFromShape(o);oa.assert(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.imag;u.complexTensorInfos.real.shape=o,e.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}var vT={kernelName:Qn,backendName:"cpu",kernelFunc:xT};function AT(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;i_([a,s],"matMul");const l=a.shape.length,u=s.shape.length,h=i?a.shape[l-2]:a.shape[l-1],c=o?s.shape[u-1]:s.shape[u-2],d=i?a.shape[l-1]:a.shape[l-2],p=o?s.shape[u-2]:s.shape[u-1],f=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=oa.sizeFromShape(f),y=oa.sizeFromShape(m);oa.assert(l>=2&&u>=2&&(g===y||1===g||1===y),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${f}) and (${m}).`);const b=(g>y?a.shape.slice(0,-2):s.shape.slice(0,-2)).concat([d,p]);oa.assert(h===c,()=>`Error in matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);const x=o?[y,p,c]:[y,c,p],v=xT({inputs:{x:a},backend:n,attrs:{shape:i?[g,h,d]:[g,d,h]}}),A=xT({inputs:{x:s},backend:n,attrs:{shape:x}}),w=i?v.shape[1]:v.shape[2],k=i?v.shape[2]:v.shape[1],S=o?A.shape[1]:A.shape[2],I=Math.max(g,y),_=n.data.get(v.dataId).values,E=n.data.get(A.dataId).values,T=oa.computeStrides(v.shape),C=oa.computeStrides(A.shape),[N,M,F]=i?[T[0],1,T[1]]:[T[0],T[1],1],[R,D,O]=o?[1,C[1],C[0]]:[C[1],1,C[0]],z=k*S,P=pi([I,k,S],v.dtype),$=P.values,L=n.blockSize;for(let V=0;V<I;V++)for(let e=0;e<k;e+=L)for(let t=0;t<S;t+=L)for(let n=0;n<w;n+=L){const r=Math.min(e+L,k),a=Math.min(t+L,S),s=Math.min(n+L,w);for(let i=e;i<r;i++)for(let e=t;e<a;e++){let t=0;for(let r=n;r<s;r++){const n=Math.min(V,g-1)*N,a=Math.min(V,y-1)*O;t+=_[n+i*M+r*F]*E[r*R+e*D+a]}$[V*z+(i*S+e)]+=t}}return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(b,P.dtype,P.values)}var wT={kernelName:ut,backendName:"cpu",kernelFunc:AT},kT={kernelName:qr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:c}=r;let d,p,f;const m=[];d=AT({inputs:{a:a,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(p=__({inputs:{a:d,b:i},backend:n}),m.push(d),d=p),h&&(f=bT(n,d,h,o,c),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}},ST=M_(Ge,e=>Math.acos(e)),IT={kernelName:Ge,backendName:"cpu",kernelFunc:ST},_T=M_(qe,e=>Math.acosh(e)),ET={kernelName:qe,backendName:"cpu",kernelFunc:_T},TT={kernelName:Xe,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;i_(t,"addN");const a=r.map(e=>n.data.get(e.dataId).values),s=pi(r[0].shape,r[0].dtype),i=s.values;for(let o=0;o<r.length;o++){const e=a[o];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}},CT={kernelName:Ze,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;i_(a,"all");const o=oa.parseAxisParam(s,a.shape);let l=o;const u=Ip.getAxesPermutation(l,a.shape.length);let h=a;null!=u&&(h=NE({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Ip.getInnerMostAxes(l.length,a.shape.length)),Ip.assertAxesAreInnerMostDims("all",l,h.shape.length);const[c,d]=Ip.computeOutAndReduceShapes(h.shape,l),p=oa.sizeFromShape(d),f=oa.makeZerosTypedArray(oa.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);const g=n.makeTensorInfo(c,h.dtype,f);if(i){const e=xT({inputs:{x:g},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},NT={kernelName:Ye,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;i_(a,"any");const o=oa.parseAxisParam(s,a.shape);let l=o;const u=Ip.getAxesPermutation(l,a.shape.length);let h=a;null!=u&&(h=NE({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Ip.getInnerMostAxes(l.length,a.shape.length)),Ip.assertAxesAreInnerMostDims("any",l,h.shape.length);const[c,d]=Ip.computeOutAndReduceShapes(h.shape,l),p=oa.sizeFromShape(d),f=oa.makeZerosTypedArray(oa.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);const g=n.makeTensorInfo(c,h.dtype,f);if(i){const e=xT({inputs:{x:g},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},MT={kernelName:Je,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;i_(a,"argMax");let i=oa.parseAxisParam(s,a.shape);const o=Ip.getAxesPermutation(i,a.shape.length);let l=a;const u=[];null!=o&&(l=NE({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=Ip.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],Ip.assertAxesAreInnerMostDims("argMax",i,l.shape.length);const[h,c]=Ip.computeOutAndReduceShapes(l.shape,i),d=oa.sizeFromShape(h),p=oa.makeZerosTypedArray(d,"int32"),f=oa.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const e=g*f;let t=m[e],n=0;for(let r=0;r<f;++r){const a=m[e+r];a>t&&(t=a,n=r)}p[g]=n}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",p)}},FT={kernelName:Qe,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;i_(a,"argMin");let i=oa.parseAxisParam(s,a.shape);const o=Ip.getAxesPermutation(i,a.shape.length);let l=a;const u=[];null!=o&&(l=NE({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=Ip.getInnerMostAxes(i.length,l.shape.length)),i=[i[0]],Ip.assertAxesAreInnerMostDims("argMin",i,l.shape.length);const[h,c]=Ip.computeOutAndReduceShapes(l.shape,i),d=oa.sizeFromShape(h),p=oa.makeZerosTypedArray(d,"int32"),f=oa.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const e=g*f;let t=m[e],n=0;for(let r=0;r<f;++r){const a=m[e+r];a<t&&(t=a,n=r)}p[g]=n}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",p)}},RT=M_(et,e=>Math.asin(e)),DT={kernelName:et,backendName:"cpu",kernelFunc:RT},OT=M_(tt,e=>Math.asinh(e)),zT={kernelName:tt,backendName:"cpu",kernelFunc:OT},PT=M_(nt,e=>Math.atan(e)),$T={kernelName:nt,backendName:"cpu",kernelFunc:PT},LT=d_((e,t)=>Math.atan2(e,t)),VT=w_(at,LT),BT={kernelName:at,backendName:"cpu",kernelFunc:VT},WT=M_(rt,e=>Math.atanh(e)),jT={kernelName:rt,backendName:"cpu",kernelFunc:WT};function HT(e,t,n,r,a,s){const i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=pi(a.outShape,n),g=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],b=a.outShape[2]*a.outShape[3],x=a.outShape[3];for(let v=0;v<a.batchSize;++v){const t=v*y,n=v*r[0];for(let m=0;m<a.inChannels;++m)for(let y=0;y<a.outHeight;++y){const v=y*i-d,A=Math.max(0,v),w=Math.min(a.inHeight,h+v),k=t+y*b;for(let t=0;t<a.outWidth;++t){const i=t*o-p,h=Math.max(0,i),d=Math.min(a.inWidth,c+i);let y=f,b=0,v=0;for(let t=A;t<w;t+=l){const a=n+t*r[1];for(let t=h;t<d;t+=u){const n=e[a+t*r[2]+m];"max"===s&&n>y?y=n:"avg"===s&&(b+=n,v++)}if(isNaN(y))break}g[k+t*x+m]="avg"===s?b/v:y}}}return m}function UT(e,t,n,r,a=!1,s=!1){const i=pi(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,h=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=pi(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*o-p;let y=n;for(;y<0;)y+=u;const b=Math.min(r.inHeight,c+n);for(let o=0;o<r.outWidth;++o){const c=o*l-f;let p=c;for(;p<0;)p+=h;const x=Math.min(r.inWidth,d+c);let v=Number.NEGATIVE_INFINITY,A=-1;for(let t=y;t<b;t+=u){const i=t-n;for(let n=p;n<x;n+=h){const o=n-c,l=m.get(g,t,n,e);l>v&&(v=l,A=a?s?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*d+o)}}i.set(A,g,t,o,e)}}return i}function GT(e,t,n,r,a,s){const i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,h=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,y=a.padInfo.left,b="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=pi(a.outShape,n),v=x.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],S=a.outShape[4];for(let I=0;I<a.batchSize;++I){const t=I*A,n=I*r[0];for(let x=0;x<a.inChannels;++x)for(let A=0;A<a.outDepth;++A){const I=A*i-m;let _=I;for(;_<0;)_+=u;const E=Math.min(a.inDepth,d+I),T=t+A*w;for(let t=0;t<a.outHeight;++t){const i=t*o-g;let d=i;for(;d<0;)d+=h;const m=Math.min(a.inHeight,p+i),A=T+t*k;for(let t=0;t<a.outWidth;++t){const i=t*l-y;let o=i;for(;o<0;)o+=c;const p=Math.min(a.inWidth,f+i),g=A+t*S;let w=b,k=0,I=0;for(let t=_;t<E;t+=u){const a=n+t*r[1];for(let t=d;t<m;t+=h){const n=a+t*r[2];for(let t=o;t<p;t+=c){const a=e[n+t*r[3]+x];if("max"===s&&a>w?w=a:"avg"===s&&(k+=a,I++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}v[g+x]="avg"===s?k/I:w}}}}return x}var qT={kernelName:st,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;i_(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;oa.assert(Ip.eitherStridesOrDilationsAreOne(i,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);const u=Ip.computePool2DInfo(a.shape,s,i,1,o,l);let h;if(1===u.filterWidth&&1===u.filterHeight&&oa.arraysEqual(u.inShape,u.outShape))h=g_({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=oa.computeStrides(a.shape),r=HT(e,0,a.dtype,t,u,"avg");h=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return h}},KT={kernelName:ot,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;i_(a,"avgPool3d");const h=Ip.computePool3DInfo(a.shape,s,i,1,o,l,u),c=GT(n.data.get(a.dataId).values,0,a.dtype,oa.computeStrides(a.shape),h,"avg");return n.makeTensorInfo(c.shape,"float32",c.values)}},XT={kernelName:lt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;i_([a,s],"avgPool3DGrad");const h=Ip.computePool3DInfo(s.shape,i,o,1,l,u),c=h.strideDepth,d=h.strideHeight,p=h.strideWidth,f=h.filterDepth,m=h.filterHeight,g=h.filterWidth,y=h.dilationDepth,b=h.dilationHeight,x=h.dilationWidth,v=h.effectiveFilterDepth,A=h.effectiveFilterHeight,w=h.effectiveFilterWidth,k=v-1-h.padInfo.front,S=w-1-h.padInfo.left,I=A-1-h.padInfo.top,_=pi(s.shape,"float32"),E=1/(f*m*g),T=n.bufferSync(a);for(let C=0;C<h.batchSize;++C)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inDepth;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){const a=t-k,s=n-I,i=r-S;let o=0;for(let t=0;t<v;t+=y){const n=(a+t)/c;if(!(n<0||n>=h.outDepth||Math.floor(n)!==n))for(let t=0;t<A;t+=b){const r=(s+t)/d;if(!(r<0||r>=h.outHeight||Math.floor(r)!==r))for(let t=0;t<w;t+=x){const a=(i+t)/p;a<0||a>=h.outWidth||Math.floor(a)!==a||(o+=T.get(C,n,r,a,e))}}}_.set(o*E,C,t,n,r,e)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},ZT={kernelName:it,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;i_([a,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,h=Ip.computePool2DInfo(i.shape,o,l,1,u),c=h.strideHeight,d=h.strideWidth,p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,x=b-1-h.padInfo.left,v=y-1-h.padInfo.top,A=pi(i.shape,"float32"),w=1/(p*f),k=n.data.get(a.dataId).values,S=pi(a.shape,"float32",k);for(let I=0;I<h.batchSize;++I)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-v,a=n-x;let s=0;for(let t=0;t<y;t+=m){const n=(r+t)/c;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=g){const r=(a+t)/d;r<0||r>=h.outWidth||Math.floor(r)!==r||(s+=S.get(I,n,r,e))}}A.set(s*w,I,t,n,e)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}},YT={kernelName:Jt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:s,offset:i,mean:o,variance:l}=t;oa.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oa.assert(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oa.assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),i_([a,o,l,s,i],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const h=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(h.length),g=f.length,y=p.length,b=d.length,x=c.length;let v=0,A=0,w=0,k=0;for(let S=0;S<h.length;++S)m[S]=f[v++]+(h[S]-c[A++])*p[w++]/Math.sqrt(d[k++]+u),v>=g&&(v=0),A>=x&&(A=0),w>=y&&(w=0),k>=b&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},JT={kernelName:ht,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;i_([a],"batchToSpaceND");const o=s.reduce((e,t)=>e*t),l=Ip.getReshaped(a.shape,s,o),u=Ip.getPermuted(l.length,s.length),h=Ip.getReshapedPermuted(a.shape,s,o),c=Ip.getSliceBeginCoords(i,s.length),d=Ip.getSliceSize(h,i,s.length),p=xT({inputs:{x:a},backend:n,attrs:{shape:l}}),f=NE({inputs:{x:p},backend:n,attrs:{perm:u}}),m=xT({inputs:{x:f},backend:n,attrs:{shape:h}}),g=LE({inputs:{x:m},backend:n,attrs:{begin:c,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}},QT={kernelName:ct,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=T_(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,o)}},eC=M_(mt,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e),tC={kernelName:mt,backendName:"cpu",kernelFunc:eC},nC={kernelName:yt,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(oa.sizeFromShape(t.shape)),a=n.data.get(t.dataId),s=a.complexTensorInfos.imag,i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(s.dataId).values;for(let l=0;l<i.length;l++)r[l]=Math.hypot(i[l],o[l]);return n.makeOutput(r,t.shape,"float32")}};function rC(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}var aC={kernelName:sn,backendName:"cpu",kernelFunc:rC};function sC(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=oa.parseAxisParam(a,t[0].shape)[0];let i=Ip.computeOutShape(t.map(e=>e.shape),s);if(0===oa.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const o=t.filter(e=>oa.sizeFromShape(e.shape)>0);if(1===o.length)return g_({inputs:{x:o[0]},backend:n});const l=o.map(e=>e.shape);if(Ip.assertParamsConsistent(l,s),"complex64"===o[0].dtype){const e=o.map(e=>b_({inputs:{input:e},backend:n})),t=o.map(e=>rC({inputs:{input:e},backend:n})),r=sC({inputs:e,backend:n,attrs:{axis:s}}),a=sC({inputs:t,backend:n,attrs:{axis:s}}),i=p_({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),i}const u=o.map(e=>{const t=oa.sizeFromShape(e.shape.slice(s));return xT({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),h=u.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));i=Ip.computeOutShape(u.map(e=>e.shape),1);const c=z_(h,i,t[0].dtype,1===u[0].shape[0]),d=Ip.computeOutShape(o.map(e=>e.shape),s),p=n.makeTensorInfo(d,t[0].dtype,c);return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}var iC={kernelName:bt,backendName:"cpu",kernelFunc:sC};function oC(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:h}=r;i_([a,s],"conv2d");const c=Ip.convertConv2DDataFormat(l),d=Ip.computeConv2DInfo(a.shape,s.shape,i,u,o,h,!1,c),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,x="channelsLast"===d.dataFormat,v=new Da(d.outShape,a.dtype),A=oa.computeStrides(a.shape),w=oa.computeStrides(s.shape),k=A[0],S=x?A[1]:A[2],I=x?A[2]:1,_=x?1:A[1],E=v.strides[0],T=x?v.strides[1]:v.strides[2],C=x?v.strides[2]:1,N=x?1:v.strides[1],M=n.data.get(a.dataId).values,F=n.data.get(s.dataId).values,R=v.values;for(let D=0;D<d.batchSize;++D){const e=D*k,t=D*E;for(let n=0;n<d.outHeight;++n){const r=t+n*T,a=n*d.strideHeight-b;for(let t=0;t<p;++t){const n=a+t*m;if(n<0||n>=d.inHeight)continue;const s=t*w[0],i=e+n*S;for(let e=0;e<d.outWidth;++e){const t=r+e*C,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const a=i+r*I;let o=s+e*w[1];for(let e=0;e<d.inChannels;++e){const n=M[a+e*_];for(let e=0;e<d.outChannels;++e)R[t+e*N]+=n*F[o+e];o+=d.outChannels}}}}}}return n.makeTensorInfo(v.shape,v.dtype,R)}var lC={kernelName:xt,backendName:"cpu",kernelFunc:oC},uC={kernelName:vt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=r;i_([a,s],"conv2dBackpropFilter");const c=Ip.convertConv2DDataFormat(l),d=Ip.computeConv2DInfo(a.shape,h,i,1,o,u,!1,c),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,b=new Da(d.filterShape,"float32"),x=d.padInfo.left,v=d.padInfo.top,A=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,k=new Da(a.shape,a.dtype,A),S=new Da(s.shape,s.dtype,w);for(let I=0;I<m;++I){const e=Math.max(0,Math.ceil((v-I)/p)),t=Math.min(d.outHeight,(d.inHeight+v-I)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((x-n)/f)),a=Math.min(d.outWidth,(d.inWidth+x-n)/f);for(let s=0;s<d.inChannels;++s)for(let i=0;i<d.outChannels;++i){let o=0;for(let l=0;l<d.batchSize;++l)for(let u=e;u<t;++u){const e=I+u*p-v;for(let t=r;t<a;++t){const r=n+t*f-x;o+=y?k.get(l,e,r,s)*S.get(l,u,t,i):k.get(l,s,e,r)*S.get(l,i,u,t)}}b.set(o,I,n,s,i)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},hC={kernelName:At,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=r;i_([a,s],"conv2dBackpropInput");const c=oa.computeStrides(s.shape),d=oa.computeStrides(a.shape);let p=Ip.convertConv2DDataFormat(u);const f=Ip.computeConv2DInfo(i,s.shape,o,1,l,h,!1,p),m=new Da(f.inShape,"float32"),g=m.values,y=n.data.get(a.dataId).values,b=n.data.get(s.dataId).values,[x,v,A]=c,{batchSize:w,filterHeight:k,filterWidth:S,inChannels:I,inHeight:_,inWidth:E,outChannels:T,outHeight:C,outWidth:N,strideHeight:M,strideWidth:F}=f;p=f.dataFormat;const R=k-1-f.padInfo.top,D=S-1-f.padInfo.left,O="channelsLast"===p,z=m.strides[0],P=O?m.strides[1]:m.strides[2],$=O?m.strides[2]:1,L=O?1:m.strides[1],V=d[0],B=O?d[1]:d[2],W=O?d[2]:1,j=O?1:d[1];for(let H=0;H<w;++H)for(let e=0;e<I;++e)for(let t=0;t<_;++t){const n=t-R,r=Math.max(0,Math.ceil(n/M)),a=Math.min(C,(k+n)/M);for(let s=0;s<E;++s){const i=s-D,o=Math.max(0,Math.ceil(i/F)),l=Math.min(N,(S+i)/F);let u=0;for(let t=r;t<a;++t){const r=t*M-n;for(let n=o;n<l;++n){const a=V*H+B*t+W*n,s=x*(k-1-r)+v*(S-1-(n*F-i))+A*e;for(let e=0;e<T;++e)u+=y[a+j*e]*b[s+e]}}g[z*H+P*t+$*s+L*e]=u}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},cC={kernelName:wt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r;i_([a,s],"conv3d");const u=Ip.computeConv3DInfo(a.shape,s.shape,i,l,o),{filterDepth:h,filterHeight:c,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=u,y=g.front,b=g.left,x=g.top,v=new Da(u.outShape,a.dtype),A=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,k=v.values,S=oa.computeStrides(a.shape),I=oa.computeStrides(s.shape);for(let _=0;_<u.batchSize;++_){const e=_*S[0],t=_*v.strides[0];for(let n=0;n<u.outDepth;++n){const r=t+n*v.strides[1],a=n*u.strideDepth-y;for(let t=0;t<h;++t){const n=a+t*p;if(n<0||n>=u.inDepth)continue;const s=t*I[0],i=e+n*S[1];for(let e=0;e<u.outHeight;++e){const t=r+e*v.strides[2],n=e*u.strideHeight-x;for(let e=0;e<c;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const a=s+e*I[1],o=i+r*S[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-b;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const s=o+t*u.inChannels;let i=a+e*I[2];for(let e=0;e<u.inChannels;++e){const t=A[s+e];for(let e=0;e<u.outChannels;++e)k[n+e]+=t*w[i+e];i+=u.outChannels}}}}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},dC={kernelName:kt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r;i_([a,s],"conv3dBackpropFilterV2");const u=oa.computeStrides(a.shape),h=oa.computeStrides(s.shape),c=Ip.computeConv3DInfo(a.shape,l,i,1,o),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.filterDepth,g=c.filterHeight,y=c.filterWidth,b=new Da(c.filterShape,"float32"),x=b.values,[v,A,w,k]=b.strides,S=n.data.get(s.dataId).values,[I,_,E,T]=h,C=n.data.get(a.dataId).values,[N,M,F,R]=u,D=c.padInfo.front,O=c.padInfo.left,z=c.padInfo.top;for(let P=0;P<m;++P){const e=Math.max(0,Math.ceil((D-P)/d)),t=Math.min(c.outDepth,(c.inDepth+D-P)/d),n=P*v;for(let r=0;r<g;++r){const a=Math.max(0,Math.ceil((z-r)/p)),s=Math.min(c.outHeight,(c.inHeight+z-r)/p),i=r*A+n;for(let n=0;n<y;++n){const o=Math.max(0,Math.ceil((O-n)/f)),l=Math.min(c.outWidth,(c.inWidth+O-n)/f),u=n*w+i;for(let i=0;i<c.inChannels;++i){const h=i*k+u;for(let u=0;u<c.outChannels;++u){let m=0;for(let h=0;h<c.batchSize;++h){const c=h*N,g=h*I;for(let h=e;h<t;++h){const e=(P+h*d-D)*M+c,t=h*_+g;for(let h=a;h<s;++h){const a=(r+h*p-z)*F+e,s=h*E+t;for(let e=o;e<l;++e)m+=C[(n+e*f-O)*R+a+i]*S[e*T+s+u]}}}x[h+u]=m}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},pC={kernelName:St,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r;i_([a],"conv3dBackpropInputV2");const u=oa.computeStrides(a.shape),h=oa.computeStrides(s.shape),c=Ip.computeConv3DInfo(l,s.shape,o,1,i),d=new Da(c.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,b=n.data.get(a.dataId).values,[x,v,A,w]=u,k=n.data.get(s.dataId).values,[S,I,_,E]=h,{batchSize:T,filterDepth:C,filterHeight:N,filterWidth:M,inChannels:F,inDepth:R,inHeight:D,inWidth:O,outChannels:z,outDepth:P,outHeight:$,outWidth:L,strideDepth:V,strideHeight:B,strideWidth:W}=c,j=C-1-c.padInfo.front,H=N-1-c.padInfo.top,U=M-1-c.padInfo.left;for(let G=0;G<T;++G)for(let e=0;e<F;++e)for(let t=0;t<R;++t){const n=t-j,r=Math.max(0,Math.ceil(n/V)),a=Math.min(P,(C+n)/V);for(let s=0;s<D;++s){const i=s-H,o=Math.max(0,Math.ceil(i/B)),l=Math.min($,(N+i)/B);for(let u=0;u<O;++u){const h=u-U,c=Math.max(0,Math.ceil(h/W)),d=Math.min(L,(M+h)/W);let T=0;for(let t=r;t<a;++t){const r=t*V-n;for(let n=o;n<l;++n){const a=n*B-i;for(let s=c;s<d;++s){const i=x*G+v*t+A*n+w*s,o=S*(C-1-r)+I*(N-1-a)+_*(M-1-(s*W-h))+E*e;for(let e=0;e<z;++e)T+=b[i+e]*k[o+e]}}}p[f*G+m*t+g*s+y*u+e]=T}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},fC=M_(It,e=>Math.cos(e)),mC={kernelName:It,backendName:"cpu",kernelFunc:fC},gC=M_(_t,e=>Math.cosh(e)),yC={kernelName:_t,backendName:"cpu",kernelFunc:gC},bC={kernelName:Tt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:u}=r,[h,c,d,p]=a.shape,f=s.shape[0],[m,g]=o,y=pi([f,m,g,p],"float32"),b=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,A=oa.computeStrides(a.shape),w=oa.computeStrides(y.shape);for(let k=0;k<f;k++){const e=4*k,t=b[e],n=b[e+1],r=b[e+2],a=b[e+3],s=x[k];if(s>=h)continue;const i=m>1?(r-t)*(c-1)/(m-1):0,o=g>1?(a-n)*(d-1)/(g-1):0;for(let h=0;h<m;h++){const e=m>1?t*(c-1)+h*i:.5*(t+r)*(c-1);if(e<0||e>c-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=u;else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){const l=g>1?n*(d-1)+e*o:.5*(n+a)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++)y.values[t+e*w[2]+h*w[1]+k*w[0]]=u;continue}const c=Math.floor(l),f=Math.ceil(l),m=l-c;for(let n=0;n<p;n++){let a=n+c*A[2]+t*A[1]+s*A[0];const o=v[a];a=n+f*A[2]+t*A[1]+s*A[0];const l=v[a];a=n+c*A[2]+r*A[1]+s*A[0];const u=v[a];a=n+f*A[2]+r*A[1]+s*A[0];const d=v[a],p=o+(l-o)*m;a=n+e*w[2]+h*w[1]+k*w[0],y.values[a]=p+(u+(d-u)*m-p)*i}}}else for(let t=0;t<g;++t){const r=g>1?n*(d-1)+t*o:.5*(n+a)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=u;continue}const i=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++)y.values[e+t*w[2]+h*w[1]+k*w[0]]=v[e+i*A[2]+l*A[1]+s*A[0]]}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},xC={kernelName:Et,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;i_(a,"cumsum");const l=Ip.getAxesPermutation([s],a.shape.length);let u=a;null!=l&&(u=NE({inputs:{x:a},backend:n,attrs:{perm:l}}));const h=Ip.getInnerMostAxes(1,a.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const c=Ja(u.dtype,"int32"),d=oa.makeZerosTypedArray(oa.sizeFromShape(u.shape),c),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=i?0:p[t];else{const n=m(y,e-1);d[t]=i?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(u.shape,c,d);if(null!=l){const e=NE({inputs:{x:g},backend:n,attrs:{perm:Ip.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}},vC={kernelName:Ct,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){const e=T_(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,e)}if(2===a.shape.length){const e=C_(n.bufferSync(a),n.bufferSync(s),i,o);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},AC={kernelName:Nt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;oa.assert("NHWC"===i,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i),oa.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);const o=a.shape[0],l=a.shape[1],u=a.shape[2],h=a.shape[3],c=l*s,d=u*s,p=h/(s*s),f=n.data.get(a.dataId).values,m=new Float32Array(o*c*d*p);let g=0;for(let y=0;y<o;++y)for(let e=0;e<c;++e){const t=Math.floor(e/s),n=e%s;for(let e=0;e<d;++e){const r=Math.floor(e/s),a=(n*s+e%s)*p;for(let e=0;e<p;++e)m[g++]=f[e+a+h*(r+u*(t+l*y))]}}return n.makeTensorInfo([o,c,d,p],a.dtype,m)}};function wC(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r;i_([a,s],"depthwiseConv2DNative");const h=oa.computeStrides(a.shape),c=oa.computeStrides(s.shape);let d=l;null==d&&(d=[1,1]),oa.assert(Ip.eitherStridesOrDilationsAreOne(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const p=Ip.computeConv2DInfo(a.shape,s.shape,i,d,o,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=p,x=b.left,v=b.top,A=p.outChannels/p.inChannels,w=new Da(p.outShape,a.dtype),k=n.data.get(a.dataId).values,S=n.data.get(s.dataId).values,I=w.values;for(let _=0;_<p.batchSize;++_){const e=_*h[0],t=_*w.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*w.strides[1],a=n*p.strideHeight-v;for(let t=0;t<f;++t){const n=a+t*g;if(n<0||n>=p.inHeight)continue;const s=t*c[0],i=e+n*h[1];for(let e=0;e<p.outWidth;++e){const t=r+e*w.strides[2],n=e*p.strideWidth-x;for(let e=0;e<m;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const a=i+r*p.inChannels;let o=t,l=s+e*c[1];for(let e=0;e<p.inChannels;++e){const t=k[a+e];for(let e=0;e<A;++e)I[o+e]+=t*S[l+e];o+=A,l+=A}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var kC={kernelName:Mt,backendName:"cpu",kernelFunc:wC},SC={kernelName:Ft,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=r;i_([a,s],"depthwiseConv2dNativeBackpropFilter");const c=Ip.computeConv2DInfo(a.shape,h,i,o,l,u,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=c,g=new Da(c.filterShape,"float32"),y=c.padInfo.left,b=c.padInfo.top,x=c.outChannels/c.inChannels,v=n.data.get(a.dataId).values,A=new Da(a.shape,a.dtype,v),w=n.data.get(s.dataId).values,k=new Da(s.shape,s.dtype,w);for(let S=0;S<f;++S){const e=Math.max(0,Math.ceil((b-S)/d)),t=Math.min(c.outHeight,(c.inHeight+b-S)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((y-n)/p)),a=Math.min(c.outWidth,(c.inWidth+y-n)/p);for(let s=0;s<c.outChannels;++s){const i=Math.trunc(s/x),o=s%x;let l=0;for(let u=0;u<c.batchSize;++u)for(let o=e;o<t;++o){const e=S+o*d-b;for(let t=r;t<a;++t)l+=A.get(u,e,n+t*p-y,i)*k.get(u,o,t,s)}g.set(l,S,n,i,o)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},IC={kernelName:Rt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=r;i_([a,s],"depthwiseConv2DNativeBackpropInput");const c=oa.computeStrides(a.shape),d=oa.computeStrides(s.shape),p=Ip.computeConv2DInfo(h,s.shape,i,o,l,u,!0),f=new Da(p.inShape,"float32"),m=f.values,[g,y,b]=f.strides,x=n.data.get(a.dataId).values,[v,A,w]=c,k=n.data.get(s.dataId).values,[S,I,_]=d,{batchSize:E,filterHeight:T,filterWidth:C,inChannels:N,inHeight:M,inWidth:F,outChannels:R,outHeight:D,outWidth:O,strideHeight:z,strideWidth:P}=p,$=T-1-p.padInfo.top,L=C-1-p.padInfo.left,V=R/N;for(let B=0;B<E;++B)for(let e=0;e<N;++e)for(let t=0;t<M;++t){const n=t-$,r=Math.max(0,Math.ceil(n/z)),a=Math.min(D,(T+n)/z);for(let s=0;s<F;++s){const i=s-L,o=Math.max(0,Math.ceil(i/P)),l=Math.min(O,(C+i)/P);let u=0;for(let t=r;t<a;++t){const r=t*z-n;for(let n=o;n<l;++n){const a=v*B+A*t+w*n,s=S*(T-1-r)+I*(C-1-(n*P-i))+_*e;for(let t=0;t<V;++t)u+=x[a+(e*V+t)]*k[s+t]}}m[g*B+y*t+b*s+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},_C={kernelName:Dt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=oa.sizeFromShape(r.shape),s=n.data.get(r.dataId).values,i=pi([a,a],r.dtype),o=i.values;for(let u=0;u<s.length;u++)o[u*a+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},EC={kernelName:Ot,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a}=e,{strides:s,pad:i,dilations:o}=n,l=t,u=l.data.get(r.dataId).values,h=r.shape.length,c=l.data.get(a.dataId).values,d=a.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:A,filterHeight:w,filterWidth:k,dilationHeight:S,dilationWidth:I,outShape:_}=Ip.computeDilation2DInfo(r.shape,a.shape,s,i,"NHWC",o),E=oa.sizeFromShape(_),T=_.length,C=oa.getArrayFromDType(r.dtype,E);for(let N=0;N<p;++N)for(let e=0;e<y;++e){const t=e*v-x.top;for(let n=0;n<b;++n){const s=n*A-x.left;for(let i=0;i<g;++i){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<w;++e){const n=t+e*S;if(n>=0&&n<f)for(let t=0;t<k;++t){const l=s+t*I;if(l>=0&&l<m){const s=oa.locToIndex([N,n,l,i],h,oa.computeStrides(r.shape)),p=oa.locToIndex([e,t,i],d,oa.computeStrides(a.shape)),f=u[s]+c[p];f>o&&(o=f)}}}C[oa.locToIndex([N,e,n,i],T,oa.computeStrides(_))]=o}}}return{dataId:l.write(oa.toTypedArray(C,r.dtype),_,r.dtype),shape:_,dtype:r.dtype}}},TC={kernelName:Pt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,u=t,h=oa.toNestedArray(r.shape,u.data.get(r.dataId).values),c=oa.toNestedArray(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:x,strideWidth:v,filterHeight:A,filterWidth:w,dilationHeight:k,dilationWidth:S,outShape:I}=Ip.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",l);oa.assert(s.rank===I.length,()=>`Error in ${Pt}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const _=oa.toNestedArray(I,u.data.get(s.dataId).values),E=oa.makeZerosNestedTypedArray(a.shape,a.dtype);for(let T=0;T<d;++T)for(let e=0;e<g;++e){const t=e*x-b.top;for(let n=0;n<y;++n){const r=n*v-b.left;for(let a=0;a<m;++a){let s=Number.MIN_SAFE_INTEGER,i=0,o=0;for(let e=0;e<A;++e){const n=t+e*k;if(n>=0&&n<p)for(let t=0;t<w;++t){const l=r+t*S;if(l>=0&&l<f){const r=h[T][n][l][a]+c[e][t][a];r>s&&(s=r,i=e,o=t)}}}E[i][o][a]+=_[T][e][n][a]}}}return{dataId:u.write(oa.toTypedArray(E,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},CC={kernelName:zt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,u=t,h=oa.toNestedArray(r.shape,u.data.get(r.dataId).values),c=oa.toNestedArray(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:x,strideWidth:v,filterHeight:A,filterWidth:w,dilationHeight:k,dilationWidth:S,outShape:I}=Ip.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",l);oa.assert(s.rank===I.length,()=>`Error in ${zt}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const _=oa.toNestedArray(I,u.data.get(s.dataId).values),E=oa.makeZerosNestedTypedArray(r.shape,r.dtype);for(let T=0;T<d;++T)for(let e=0;e<g;++e){const t=e*x-b.top;for(let n=0;n<y;++n){const r=n*v-b.left;for(let a=0;a<m;++a){let s=Number.MIN_SAFE_INTEGER,i=t<0?0:t,o=r<0?0:r;for(let e=0;e<A;++e){const n=t+e*k;if(n>=0&&n<p)for(let t=0;t<w;++t){const l=r+t*S;if(l>=0&&l<f){const r=h[T][n][l][a]+c[e][t][a];r>s&&(s=r,i=n,o=l)}}}E[T][i][o][a]+=_[T][e][n][a]}}}return{dataId:u.write(oa.toTypedArray(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function NC(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;let o;i_(a,"sum"),o="bool"===a.dtype?v_({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):g_({inputs:{x:a},backend:n});const l=o.shape.length,u=oa.parseAxisParam(s,o.shape),h=Ip.getAxesPermutation(u,l);let c=u,d=o;null!=h&&(d=NE({inputs:{x:o},backend:n,attrs:{perm:h}}),c=Ip.getInnerMostAxes(c.length,l)),Ip.assertAxesAreInnerMostDims("sum",c,d.shape.length);const[p,f]=Ip.computeOutAndReduceShapes(d.shape,c);let m=m_(n,p,Ip.upcastType(d.dtype,"int32"));const g=oa.sizeFromShape(f),y=n.data.get(m.dataId).values,b=n.data.get(d.dataId).values;for(let x=0;x<y.length;++x){const e=x*g;let t=0;for(let n=0;n<g;++n)t+=b[e+n];y[x]=t}if(i){const e=m;m=xT({inputs:{x:m},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=h&&n.disposeIntermediateTensorInfo(d),m}var MC={kernelName:br,backendName:"cpu",kernelFunc:NC},FC={kernelName:Lt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=Ip.decodeEinsumEquation(a,s.length);Ip.checkEinsumDimSizes(i.length,l,s);const{path:u,steps:h}=Ip.getEinsumComputePath(o,l),c=h.length;let d=null,p=i.length;const f=[];for(let m=0;m<c;++m){for(const e of h[m]){const{permutationIndices:t,expandDims:r}=Ip.getEinsumPermutation(p,l[e]);let a;Ip.isIdentityPermutation(t)?a=s[e]:(a=NE({inputs:{x:s[e]},backend:n,attrs:{perm:t}}),f.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);oa.arraysEqual(a.shape,i)||(a=xT({inputs:{x:a},backend:n,attrs:{shape:i}}),f.push(a)),null===d?d=a:(d=wE({inputs:{a:a,b:d},backend:n}),f.push(d))}m<c-1&&(u[m]>=0&&(d=NC({inputs:{x:d},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},RC={kernelName:Bt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;i_([r,a],"eluGrad");const s=new Float32Array(oa.sizeFromShape(a.shape)),i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const e=i[l];s[l]=e>=1?o[l]:o[l]*(e+1)}return n.makeTensorInfo(a.shape,"float32",s)}},DC=Ip.ERF_P,OC=Ip.ERF_A1,zC=Ip.ERF_A2,PC=Ip.ERF_A3,$C=Ip.ERF_A4,LC=Ip.ERF_A5,VC=M_(Wt,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+DC*n);return t*(1-((((LC*r+$C)*r+PC)*r+zC)*r+OC)*r*Math.exp(-n*n))}),BC={kernelName:Wt,backendName:"cpu",kernelFunc:VC};function WC(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:s}=r,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(oa.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),xT({inputs:{x:a},backend:n,attrs:{shape:o}})}var jC={kernelName:Ut,backendName:"cpu",kernelFunc:WC},HC=d_((e,t)=>e/t),UC=w_($t,HC),GC={kernelName:$t,backendName:"cpu",kernelFunc:UC};function qC(e,t,n){const r=e.shape,a=r[0],s=r[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[a,s],h=oa.sizeFromShape(u),c=oa.getTypedArrayFromDType("float32",h),d=oa.getTypedArrayFromDType("float32",h);for(let g=0;g<a;g++){const e=LE({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,s]}}),r=LE({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),a=p_({inputs:{real:e,imag:r},backend:n}),{real:i,imag:u}=KC(a,t,n),h=Ip.mergeRealAndImagArrays(i,u);for(let t=0;t<s;t++){const e=Ip.getComplexWithIndex(h,t);c[g*s+t]=e.real,d[g*s+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}const p=n.makeTensorInfo(u,"float32",c),f=n.makeTensorInfo(u,"float32",d),m=p_({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function KC(e,t,n){const r=oa.sizeFromShape(e.shape),a=n.data.get(e.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0==((o=r)&o-1)){const a=XC(s,i,r,t,n),o=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),s=n.makeTensorInfo([],"float32",oa.createScalarValue(r,"float32")),i=g_({inputs:{x:s},backend:n}),l=GC.kernelFunc({inputs:{a:e,b:s},backend:n}),u=GC.kernelFunc({inputs:{a:t,b:i},backend:n}),h=n.data.get(l.dataId).values,c=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:h,imag:c}}return a}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let s=0,i=0;for(let r=0;r<t;r++){const o=Ip.exponent(a*r,t,n),l=Ip.getComplexWithIndex(e,r);s+=l.real*o.real-l.imag*o.imag,i+=l.real*o.imag+l.imag*o.real}n&&(s/=t,i/=t),Ip.assignToTypedArray(r,s,i,a)}return r}(Ip.mergeRealAndImagArrays(s,i),r,t);return Ip.splitRealAndImagArrays(e)}var o}function XC(e,t,n,r,a){if(1===n)return{real:e,imag:t};const s=Ip.mergeRealAndImagArrays(e,t),i=n/2,o=Ip.complexWithEvenIndex(s),l=o.real,u=o.imag,h=[l.length],c=a.makeTensorInfo(h,"float32",l),d=a.makeTensorInfo(h,"float32",u),p=p_({inputs:{real:c,imag:d},backend:a}),f=Ip.complexWithOddIndex(s),m=f.real,g=f.imag,y=[m.length],b=a.makeTensorInfo(y,"float32",m),x=a.makeTensorInfo(y,"float32",g),v=p_({inputs:{real:b,imag:x},backend:a}),A=XC(l,u,i,r,a),w=A.real,k=A.imag,S=[w.length],I=a.makeTensorInfo(S,"float32",w),_=a.makeTensorInfo(S,"float32",k),E=p_({inputs:{real:I,imag:_},backend:a}),T=XC(m,g,i,r,a),C=T.real,N=T.imag,M=[C.length],F=a.makeTensorInfo(M,"float32",C),R=a.makeTensorInfo(M,"float32",N),D=p_({inputs:{real:F,imag:R},backend:a}),O=Ip.exponents(n,r),z=[O.real.length],P=a.makeTensorInfo(z,"float32",O.real),$=a.makeTensorInfo(z,"float32",O.imag),L=p_({inputs:{real:P,imag:$},backend:a}),V=wE({inputs:{a:L,b:D},backend:a}),B=__({inputs:{a:E,b:V},backend:a}),W=eT({inputs:{a:E,b:V},backend:a}),j=b_({inputs:{input:B},backend:a}),H=b_({inputs:{input:W},backend:a}),U=rC({inputs:{input:B},backend:a}),G=rC({inputs:{input:W},backend:a}),q=sC({inputs:[j,H],backend:a,attrs:{axis:0}}),K=sC({inputs:[U,G],backend:a,attrs:{axis:0}}),X=a.data.get(q.dataId).values,Z=a.data.get(K.dataId).values;return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),{real:X,imag:Z}}var ZC={kernelName:qt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=oa.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=xT({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=qC(i,!1,n),l=xT({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}};function YC(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:s}=n,i=s||oa.inferDtype(a),o=oa.getArrayFromDType(i,oa.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var JC={kernelName:Kt,backendName:"cpu",kernelFunc:YC},QC={kernelName:Xt,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=oa.getTypedArrayFromDType(n.dtype,oa.sizeFromShape(n.shape)),[s,i,o,l]=n.shape,u=r.data.get(n.dataId).values;for(let h=0;h<s;h++){const e=h*o*i*l;for(let t=0;t<i;t++){const n=t*(o*l);for(let r=0;r<o;r++){const i=r*l;for(let h=0;h<l;h++){const c=Math.round(o-[s,t,r,h][2]),d=e+n+i+h;let p=u[d];c>=0&&c<o&&(p=u[e+n+c*l+h]),a[d]=p}}}}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},eN=d_((e,t)=>Math.floor(e/t)),tN=w_(Yt,eN,null,"int32"),nN={kernelName:Yt,backendName:"cpu",kernelFunc:tN},rN={kernelName:Kr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=oC({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d}});if(i){const e=m;m=__({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=bT(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},aN={kernelName:Xr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=wC({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d}});if(i){const e=m;m=__({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=bT(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},sN={kernelName:en,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=oa.sizeFromShape(r.shape),i=a.shape,o=i[i.length-1],[l,u,h,c]=Ip.prepareAndValidate(r,a);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const d=X_(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,u,o,h,c,r.shape,s);return n.makeTensorInfo(l,r.dtype,d.values)}},iN={kernelName:Qt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r;i_([a,s],"gatherV2");let l=o;null==o&&(l=0);const u=oa.sizeFromShape(s.shape),h=oa.parseAxisParam(i,a.shape)[0],c=Ip.segment_util.collectGatherOpShapeInfo(a,s,h,l),d=xT({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=xT({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}}),f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize],m=n.bufferSync(p),g=Z_(n.bufferSync(d),m,f);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}},oN={kernelName:an,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=oa.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=xT({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=qC(i,!0,n),l=xT({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}},lN=M_(on,e=>Number.isFinite(e)?1:0,"bool"),uN={kernelName:on,backendName:"cpu",kernelFunc:lN},hN=M_(ln,e=>Math.abs(e)===1/0?1:0,"bool"),cN={kernelName:ln,backendName:"cpu",kernelFunc:hN},dN=M_(un,e=>Number.isNaN(e)?1:0,"bool"),pN={kernelName:un,backendName:"cpu",kernelFunc:dN},fN={kernelName:pn,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=uE(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},mN=M_(mn,e=>Math.log1p(e)),gN={kernelName:mn,backendName:"cpu",kernelFunc:mN},yN=d_((e,t)=>e&&t),bN=w_(gn,yN,null,"bool"),xN={kernelName:gn,backendName:"cpu",kernelFunc:bN},vN=M_(yn,e=>e?0:1,"bool"),AN={kernelName:yn,backendName:"cpu",kernelFunc:vN},wN=d_((e,t)=>e||t),kN=w_(bn,wN,null,"bool"),SN={kernelName:bn,backendName:"cpu",kernelFunc:kN},IN={kernelName:vn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r;i_(a,"LRN");const u=a.shape[3],h=u-1,c=n.data.get(a.dataId).values,d=oa.sizeFromShape(a.shape),p=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-s);const r=e-t+Math.min(t+s,h);let a=0;for(;n<=r;n++){const e=c[n];a+=e*e}return a}for(let m=0;m<d;m++){const e=f(m),t=c[m]*Math.pow(i+o*e,-l);p[m]=t}return n.makeTensorInfo(a.shape,a.dtype,p)}},_N={kernelName:An,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:u,beta:h}=r;i_(i,"LRNGrad");const c=oa.sizeFromShape(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(c),y=c;for(let b=0;b<y;b++){const e=b%d,t=b-e+Math.max(0,e-o),n=b-e+Math.min(d,e+o+1);let r=0;for(let a=t;a<n;a++)r+=Math.pow(f[a],2);r=u*r+l;for(let a=t;a<n;a++){let e=-2*u*h*f[a]*m[b]/r;b===a&&(e+=Math.pow(r,-h)),e*=p[b],g[a]+=e}}return n.makeTensorInfo(i.shape,a.dtype,g)}};function EN(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=n;let l=a.shape;const u=l.length,h=oa.parseAxisParam(s,l);let c=h;const d=Ip.getAxesPermutation(c,u);let p=o.data.get(a.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=CE(p,l,a.dtype,d,e),c=Ip.getInnerMostAxes(c.length,u),l=e}i_(a,"max"),Ip.assertAxesAreInnerMostDims("max",c,u);const[f,m]=Ip.computeOutAndReduceShapes(l,c),g=pE(p,oa.sizeFromShape(m),f,a.dtype),y=o.write(g,f,a.dtype);let b=f;return i&&(b=Ip.expandShapeToKeepDim(f,h)),{dataId:y,shape:b,dtype:a.dtype}}var TN={kernelName:wn,backendName:"cpu",kernelFunc:EN},CN={kernelName:Sn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;i_(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;oa.assert(Ip.eitherStridesOrDilationsAreOne(i,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);const u=Ip.computePool2DInfo(a.shape,s,i,1,o,l);let h;if(1===u.filterWidth&&1===u.filterHeight&&oa.arraysEqual(u.inShape,u.outShape))h=g_({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=oa.computeStrides(a.shape),r=HT(e,0,a.dtype,t,u,"max");h=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return h}},NN={kernelName:_n,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;i_(a,"maxPool3d");const h=Ip.computePool3DInfo(a.shape,s,i,1,o,l,u),c=GT(n.data.get(a.dataId).values,0,a.dtype,oa.computeStrides(a.shape),h,"max");return n.makeTensorInfo(c.shape,"float32",c.values)}},MN={kernelName:En,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;i_([a,s],"maxPool3DGrad");const h=Ip.computePool3DInfo(s.shape,i,o,1,l,u),c=function(e,t){const n=pi(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const b=y*r-d;let x=b;for(;x<0;)x+=i;const v=Math.min(t.inDepth,u+b);for(let r=0;r<t.outHeight;++r){const u=r*a-p;let d=u;for(;d<0;)d+=o;const A=Math.min(t.inHeight,h+u);for(let a=0;a<t.outWidth;++a){const p=a*s-f;let w=p;for(;w<0;)w+=l;const k=Math.min(t.inWidth,c+p);let S=Number.NEGATIVE_INFINITY,I=-1;for(let t=x;t<v;t+=i){const n=t-b;for(let r=d;r<A;r+=o){const a=r-u;for(let s=w;s<k;s+=l){const i=s-p,o=e.get(m,t,r,s,g);o>=S&&(S=o,I=n*h*c+a*h+i)}}}n.set(I,m,y,r,a,g)}}}return n}(n.bufferSync(s),h),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.dilationDepth,g=h.dilationHeight,y=h.dilationWidth,b=h.effectiveFilterDepth,x=h.effectiveFilterHeight,v=h.effectiveFilterWidth,A=b-1-h.padInfo.front,w=v-1-h.padInfo.left,k=x-1-h.padInfo.top,S=pi(s.shape,"float32"),I=n.bufferSync(a);for(let _=0;_<h.batchSize;++_)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inDepth;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){const a=t-A,s=n-k,i=r-w;let o=0;for(let t=0;t<b;t+=m){const n=(a+t)/d;if(!(n<0||n>=h.outDepth||Math.floor(n)!==n))for(let r=0;r<x;r+=g){const a=(s+r)/p;if(!(a<0||a>=h.outHeight||Math.floor(a)!==a))for(let s=0;s<v;s+=y){const l=(i+s)/f;if(l<0||l>=h.outWidth||Math.floor(l)!==l)continue;const u=b*x*v-1-c.get(_,n,a,l,e)===t*x*v+r*v+s?1:0;0!==u&&(o+=I.get(_,n,a,l,e)*u)}}}S.set(o,_,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},FN={kernelName:In,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;i_([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:c}=r,d=Ip.computePool2DInfo(o.shape,l,u,1,h,c),p=n.data.get(o.dataId).values,f=pi(d.outShape,o.dtype,UT(p,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,x=d.effectiveFilterHeight,v=d.effectiveFilterWidth,A=v-1-d.padInfo.left,w=x-1-d.padInfo.top,k=pi(o.shape,"float32"),S=n.data.get(a.dataId).values,I=pi(a.shape,"float32",S);for(let _=0;_<d.batchSize;++_)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-w,a=n-A;let s=0;for(let t=0;t<x;t+=y){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<v;r+=b){const i=(a+r)/g;if(i<0||i>=d.outWidth||Math.floor(i)!==i)continue;const o=x*v-1-f.get(_,n,i,e)===t*v+r?1:0;0!==o&&(s+=I.get(_,n,i,e)*o)}}k.set(s,_,t,n,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},RN={kernelName:Tn,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;i_(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,h=Ip.computePool2DInfo(r.shape,a,s,[1,1],i),[c,d]=function(e,t,n,r,a){const s=HT(e,0,n,oa.computeStrides(t),a,"max"),i=UT(e,t,n,a,!0,r);return[s.values,i.values]}(u,r.shape,r.dtype,o,h),p=l.write(c,h.outShape,r.dtype),f=l.write(d,h.outShape,r.dtype);return[{dataId:p,shape:h.outShape,dtype:r.dtype},{dataId:f,shape:h.outShape,dtype:"int32"}]}},DN={kernelName:Cn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=oa.parseAxisParam(s,a.shape),l=Ip.computeOutAndReduceShapes(a.shape,o),u=oa.sizeFromShape(l[1]),h=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));h.push(c);const d=v_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});h.push(d);const p=UC({inputs:{a:d,b:c},backend:n});h.push(p);const f=NC({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:i}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},ON={kernelName:Nn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;i_(a,"min");const o=oa.parseAxisParam(s,a.shape);let l=o;const u=Ip.getAxesPermutation(l,a.shape.length);let h=a;null!=u&&(h=NE({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Ip.getInnerMostAxes(l.length,a.shape.length)),Ip.assertAxesAreInnerMostDims("min",l,h.shape.length);const[c,d]=Ip.computeOutAndReduceShapes(h.shape,l),p=oa.sizeFromShape(d),f=oa.makeZerosTypedArray(oa.sizeFromShape(c),h.dtype),m=n.data.get(h.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(h);const g=n.makeTensorInfo(c,h.dtype,f);if(i){const e=xT({inputs:{x:g},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},zN={kernelName:Fn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,mode:i}=r;i_(a,"mirrorPad");const o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),l=s.map(e=>e[0]),u=s.map((e,t)=>e[0]+a.shape[t]),h="reflect"===i?0:1,c=n.data.get(a.dataId).values,d=a.shape.length,p=oa.computeStrides(a.shape),f=oa.sizeFromShape(o),m=o.length,g=oa.computeStrides(o),y=oa.getTypedArrayFromDType(a.dtype,f);for(let b=0;b<f;b++){let e=oa.indexToLoc(b,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-h:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+h);e=e.map((e,t)=>e-l[t]);const t=oa.locToIndex(e,d,p);y[b]=c[t]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}},PN=d_((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),$N=w_(Rn,PN),LN={kernelName:Rn,backendName:"cpu",kernelFunc:$N},VN=g(E());function BN(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=a.shape.length;let o=s;if(-1===o&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=oa.parseAxisParam([o],a.shape),u=EN({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=Ip.expandShapeToKeepDim(u.shape,l),c=xT({inputs:{x:u},backend:n,attrs:{shape:h}}),d=eT({inputs:{a:a,b:c},backend:n}),p=B_({inputs:{x:d},backend:n}),f=NC({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=xT({inputs:{x:f},backend:n,attrs:{shape:h}}),g=UC({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var WN={kernelName:Ar,backendName:"cpu",kernelFunc:BN},jN={kernelName:Dn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r;i_(a,"multinomial");const l=o?a:BN({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],h=l.shape[1],c=n.data.get(l.dataId).values,d=[u,s],p=oa.makeZerosTypedArray(oa.sizeFromShape(d),"int32");for(let f=0;f<u;++f){const e=f*h,t=new Float32Array(h-1);t[0]=c[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+c[e+a];const n=VN.alea(i.toString()),r=f*s;for(let a=0;a<s;++a){const e=n();p[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+a]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}},HN=mf.nonMaxSuppressionV3Impl,UN={kernelName:$n,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;i_(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:c}=HN(u,h,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},GN=mf.nonMaxSuppressionV4Impl,qN={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;i_(a,"NonMaxSuppressionPadded");const h=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:p}=GN(h,c,i,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},KN=mf.nonMaxSuppressionV5Impl,XN={kernelName:Vn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;i_(a,"NonMaxSuppressionWithScore");const h=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,d=i,p=o,f=l,m=u,{selectedIndices:g,selectedScores:y}=KN(h,c,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},ZN={kernelName:Wn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r;i_(a,"oneHot");const l=oa.sizeFromShape(a.shape),u=new Float32Array(l*s);u.fill(o);const h=n.data.get(a.dataId).values;for(let c=0;c<l;++c)h[c]>=0&&h[c]<s&&(u[c*s+h[c]]=i);return n.makeTensorInfo([...a.shape,s],"int32",u)}};function YN(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=b_({inputs:{input:r},backend:n}),t=YN({inputs:{x:e},backend:n}),a=rC({inputs:{input:r},backend:n}),s=YN({inputs:{x:a},backend:n}),i=p_({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return YC({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var JN={kernelName:jr,backendName:"cpu",kernelFunc:YN},QN={kernelName:Bn,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=b_({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=rC({inputs:{input:a},backend:r}),i=YN({inputs:{x:s},backend:r}),o=p_({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return YC({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function eM(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return WC({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{oa.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),oa.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=sC({inputs:t.map(e=>{const t=WC({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}var tM={kernelName:jn,backendName:"cpu",kernelFunc:eM},nM={kernelName:Hn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r;i_(a,"pad");const o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),l=s.map(e=>e[0]),u=n.data.get(a.dataId).values,h=oa.sizeFromShape(a.shape),c=a.shape.length,d=oa.computeStrides(a.shape),p=oa.sizeFromShape(o),f=o.length,m=oa.computeStrides(o),g=oa.getTypedArrayFromDType(a.dtype,p);0!==i&&g.fill(i);for(let y=0;y<h;y++){const e=oa.indexToLoc(y,c,d).map((e,t)=>e+l[t]);g[oa.locToIndex(e,f,m)]=u[y]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}},rM=d_((e,t)=>Math.pow(e,t)),aM=w_(Gn,rM),sM={kernelName:Gn,backendName:"cpu",kernelFunc:aM},iM={kernelName:Xn,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:i}=n,o=DE(r,a,i,s);return t.makeTensorInfo([o.length],s,o)}},oM=M_(Yn,e=>1/e),lM={kernelName:Yn,backendName:"cpu",kernelFunc:oM},uM={kernelName:nr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;i_(a,"resizeBilinear");const l=oa.computeStrides(a.shape),[u,h]=o,[c,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(oa.sizeFromShape([c,u,h,f])),y=[s&&u>1?d-1:d,s&&h>1?p-1:p],b=[s&&u>1?u-1:u,s&&h>1?h-1:h];let x=0;const v=y[0]/b[0],A=y[1]/b[1];for(let w=0;w<c;w++)for(let e=0;e<u;e++){let t;t=i?v*(e+.5)-.5:v*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(d-1,Math.ceil(t)),s=w*l[0]+n*l[1],o=w*l[0]+a*l[1];for(let e=0;e<h;e++){let t;t=i?A*(e+.5)-.5:A*e;const n=Math.max(0,Math.floor(t)),a=t-n,u=Math.min(p-1,Math.ceil(t)),h=s+n*l[2],c=o+n*l[2],d=s+u*l[2],y=o+u*l[2];for(let e=0;e<f;e++){const t=m[h+e],n=m[c+e],s=t+(m[d+e]-t)*a;g[x++]=s+(n+(m[y+e]-n)*a-s)*r}}}return n.makeTensorInfo([c,u,h,f],"float32",g)}},hM={kernelName:rr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;i_([s,a],"resizeBilinearGrad");const o=oa.computeStrides(a.shape),[l,u,h,c]=a.shape,[,d,p]=s.shape,f=new Float32Array(l*u*h*c),m=[i&&d>1?u-1:u,i&&p>1?h-1:h],g=[i&&d>1?d-1:d,i&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],x=n.data.get(s.dataId).values;let v=0;for(let A=0;A<l;A++){const e=A*o[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),a=Math.min(Math.ceil(n),u-1),s=e+r*o[1],i=e+a*o[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),h-1),a=t-n,u=1-a,p=s+n*o[2],m=s+r*o[2],g=i+n*o[2],y=i+r*o[2],A=d*u,w=d*a,k=l*u,S=l*a;for(let e=0;e<c;e++){const t=x[v++];f[p+e]+=t*A,f[m+e]+=t*w,f[g+e]+=t*k,f[y+e]+=t*S}}}}return n.makeTensorInfo([l,h,u,c],"float32",f)}},cM={kernelName:er,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;i_(a,"resizeNearestNeighbor");const l=oa.computeStrides(a.shape),[u,h]=o,[c,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(c*u*h*f),y=[s&&u>1?d-1:d,s&&h>1?p-1:p],b=[s&&u>1?u-1:u,s&&h>1?h-1:h],x=y[0]/b[0],v=y[1]/b[1];let A=0;for(let w=0;w<c;w++){const e=w*l[0];for(let t=0;t<u;t++){const n=i?x*(t+.5):x*t;let r=Math.min(d-1,s?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const a=e+r*l[1];for(let e=0;e<h;e++){const t=i?v*(e+.5):v*e;let n=Math.min(p-1,s?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<f;e++)g[A++]=m[r+e]}}}return n.makeTensorInfo([c,u,h,f],a.dtype,g)}},dM={kernelName:tr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;i_([s,a],"resizeNearestNeighborGrad");const o=oa.computeStrides(a.shape),l=oa.computeStrides(s.shape),[u,h,c,d]=a.shape,[,p,f]=s.shape,m=new Float32Array(u*h*c*d),g=n.data.get(s.dataId).values,y=[i&&p>1?h-1:h,i&&f>1?c-1:c],b=[i&&p>1?p-1:p,i&&f>1?f-1:f],x=y[0]/b[0],v=y[1]/b[1],A=1/x,w=1/v,k=2*Math.ceil(A)+2,S=2*Math.ceil(w)+2;for(let I=0;I<u;I++){const e=I*o[0];for(let t=0;t<h;t++){const n=e+t*o[1],r=Math.floor(t*A),a=Math.floor(r-k/2);for(let s=0;s<c;s++){const r=n+s*o[2],u=Math.floor(s*w),y=Math.floor(u-S/2);for(let n=0;n<d;n++){let o=0;for(let r=0;r<k;r++){const u=r+a;if(u<0||u>=p)continue;const d=e+u*l[1],m=u*x;if(t===Math.min(h-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],a=t*v;s===Math.min(c-1,i?Math.round(a):Math.floor(a))&&(o+=g[r+n])}}m[r+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}},pM={kernelName:sr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r;i_(a,"reverse");const i=a.shape.length,o=oa.parseAxisParam(s,a.shape);if(0===i)return g_({inputs:{x:a},backend:n});const l=new Da(a.shape,a.dtype),u=n.bufferSync(a);for(let h=0;h<l.size;h++){const e=l.indexToLoc(h),t=e.slice();o.forEach(e=>t[e]=a.shape[e]-1-t[e]),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},fM={kernelName:Gr,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=oa.getTypedArrayFromDType(r.dtype,oa.sizeFromShape(r.shape)),[u,h,c,d]=r.shape,[p,f]=Ip.getImageCenter(i,h,c),m=Math.sin(a),g=Math.cos(a),y=o.data.get(r.dataId).values;for(let b=0;b<u;b++){const e=b*c*h*d;for(let t=0;t<h;t++){const n=t*(c*d);for(let r=0;r<c;r++){const a=r*d;for(let i=0;i<d;i++){const o=[u,t,r,i],b=o[2],x=o[1];let v=(b-p)*g-(x-f)*m,A=(b-p)*m+(x-f)*g;v=Math.round(v+p),A=Math.round(A+f);let w=s;"number"!=typeof s&&(w=3===i?255:s[i]),v>=0&&v<c&&A>=0&&A<h&&(w=y[e+A*(c*d)+v*d+i]),l[e+n+a+i]=w}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},mM=M_(ir,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),gM={kernelName:ir,backendName:"cpu",kernelFunc:mM};function yM(e,t,n,r,a,s,i,o,l,u){const h=[r/a,a],c=e.values,d=t.values;if(0===r)return pi(n,t.dtype);const p=pi(h,t.dtype);p.values.fill(l);for(let f=0;f<s;f++){const e=[];let s=0;for(let t=0;t<i;t++){const n=c[f*i+t];e.push(n),s+=n*o[t]}if(s<0||s>=r/a)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<a;n++)u?p.values[s*a+n]+=d[f*a+n]:p.values[s*a+n]=0===t.rank?d[0]:d[f*a+n]}return p}var bM={kernelName:lr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:c}=Ip.calculateShapes(s,a,i),d=yM(n.bufferSync(a),n.bufferSync(s),i,c,u,l,o,h,0,!0);return n.makeTensorInfo(i,d.dtype,d.values)}},xM={kernelName:ur,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t;i_([r,a,s],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,h=Ja(a.dtype,s.dtype),c=oa.makeZerosTypedArray(oa.sizeFromShape(a.shape),h);let d=0;const p=0===i||i>1||1===a.shape.length?1:oa.sizeFromShape(a.shape.slice(1));for(let f=0;f<o.length;f++)for(let e=0;e<p;e++)c[d++]=1===o[f]?l[f]:u[f];return n.makeTensorInfo(a.shape,h,c)}},vM=Ip.SELU_SCALEALPHA,AM=Ip.SELU_SCALE,wM=M_(hr,e=>e>=0?AM*e:vM*(Math.exp(e)-1)),kM={kernelName:hr,backendName:"cpu",kernelFunc:wM},SM=M_(fr,e=>e<0?-1:e>0?1:0),IM={kernelName:fr,backendName:"cpu",kernelFunc:SM},_M=M_(dr,e=>Math.sin(e)),EM={kernelName:dr,backendName:"cpu",kernelFunc:_M},TM=M_(pr,e=>Math.sinh(e)),CM={kernelName:pr,backendName:"cpu",kernelFunc:TM},NM=Math.log(1.1920928955078125e-7)+2,MM=M_(gr,e=>{const t=e>-NM,n=e<NM,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a}),FM={kernelName:gr,backendName:"cpu",kernelFunc:MM},RM={kernelName:xr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;i_([a],"spaceToBatchND");const o=oa.sizeFromShape(s),l=[[0,0]];l.push(...i);for(let g=1+s.length;g<a.shape.length;++g)l.push([0,0]);const u=nM.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),h=Ip.getReshaped(u.shape,s,o,!1),c=Ip.getPermuted(h.length,s.length,!1),d=Ip.getReshapedPermuted(u.shape,s,o,!1),p=xT({inputs:{x:u},backend:n,attrs:{shape:h}}),f=NE({inputs:{x:p},backend:n,attrs:{perm:c}}),m=xT({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}},DM={kernelName:wr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n        "+s.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        "+r.shape);if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        "+a.shape);if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+i.shape);const o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values[0],[c,d,p,f,m]=BE(o,r.shape,r.dtype,l,a.dtype,u,h);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},OM={kernelName:kr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        "+r.shape);if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        "+a.shape);if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape "+s.shape);const i=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,h,c]=WE(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}},zM={kernelName:Sr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n          "+s.shape);const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,h]=jE(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,u)}},PM={kernelName:Ir,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n         "+s.shape);const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,h]=jE(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,u)}},$M={kernelName:_r,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:h,strides:c,outputSize:d}=Ip.calculateShapes(s,a,o),p=yM(n.bufferSync(a),n.bufferSync(s),o,d,h,u,l,c,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(o,p.dtype,p.values)}},LM={kernelName:vr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=oa.parseAxisParam(i,a.shape)[0],l=Ip.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{const t=[...h];t[o]=e;const r=LE({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},VM=M_(yr,e=>Math.sqrt(e)),BM={kernelName:yr,backendName:"cpu",kernelFunc:VM},WM={kernelName:Tr,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;i_(n,"square");const a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let i=0;i<a.length;++i){const e=a[i];s[i]=e*e}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},jM=M_(Hr,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),HM={kernelName:Hr,backendName:"cpu",kernelFunc:jM},UM={kernelName:Cr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:c,shrinkAxisMask:d}=r;i_(a,"stridedSlice");const{nonStrided:p,$begin:f,$strides:m,size:g,newShape:y,outShape:b}=Yi.sliceInfo(a.shape,s,i,o,l,u,h,c,d),x=xT({inputs:{x:a},backend:n,attrs:{shape:y}});let v;if(p){const e=LE({inputs:{x:x},backend:n,attrs:{begin:f,size:g}});v=xT({inputs:{x:e},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(e)}else if(b.some(e=>0===e))v=n.makeTensorInfo(b,a.dtype,[]);else{const e=qE(b,n.bufferSync(x),m,f);v=n.makeTensorInfo(e.shape,e.dtype,e.values)}const A=xT({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),A}},GM={kernelName:Nr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:c}=t,d=n.data.get(h.dataId).values,p=n.data.get(c.dataId).values,[f,m]=KE(d,p,a,s,i,o,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}},qM={kernelName:Mr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: "+s.shape);if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+i.shape);const o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[u,h,c]=ZE(o,l,a),d=h.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},KM={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=YE(n.data.get(s.dataId).values,a);return n.makeTensorInfo(s.shape,"int32",i)}},XM=M_(Dr,e=>Math.tan(e)),ZM={kernelName:Dr,backendName:"cpu",kernelFunc:XM},YM=M_(Or,e=>Math.tanh(e));function JM(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return oa.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;return n<0?t<=1?n=0:n+=t*(Math.trunc(-n/(t-1))+1):n>t-1&&(t<=1?n=0:n-=t*Math.trunc(n/(t-1))),oa.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return oa.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function QM(e,t,n,r,a,s,i,o,l,u,h){return 0<=o&&o<t&&0<=l&&l<n?e[i*r+o*a+l*s+u]:h}function eF(e,t,n,r,a,s,i,o,l,u,h){return QM(e,t,n,r,a,s,i,Math.round(o),Math.round(l),u,h)}function tF(e,t,n,r,a,s,i,o,l,u,h){const c=Math.floor(o),d=Math.floor(l),p=c+1,f=d+1;return(p-o)*((f-l)*QM(e,t,n,r,a,s,i,c,d,u,h)+(l-d)*QM(e,t,n,r,a,s,i,c,f,u,h))+(o-c)*((f-l)*QM(e,t,n,r,a,s,i,p,d,u,h)+(l-d)*QM(e,t,n,r,a,s,i,p,f,u,h))}var nF=[kT,c_,IT,ET,E_,TT,CT,NT,MT,FT,DT,zT,$T,BT,jT,qT,KT,XT,ZT,wT,YT,JT,QT,A_,O_,tC,f_,nC,iC,uC,hC,lC,dC,pC,cC,mC,yC,bC,xC,vC,AC,kC,SC,IC,_C,EC,CC,TC,GC,FC,iT,RC,L_,BC,W_,jC,U_,ZC,JC,QC,K_,nN,rN,aN,sN,iN,Q_,nE,y_,oN,aC,uN,cN,pN,lT,sE,lE,fN,dE,gN,xN,AN,SN,IN,_N,gE,CN,NN,MN,FN,RN,TN,DN,ON,xE,zN,LN,jN,kE,IE,UN,qN,XN,TE,ZN,QN,tM,nM,sM,cT,RE,iM,x_,lM,pT,mT,vT,uM,hM,cM,dM,pM,fM,gM,PE,bM,xM,kM,yT,IM,EM,CM,VE,WN,FM,RM,DM,OM,zM,PM,$M,LM,BM,WM,GE,HM,UM,GM,qM,KM,tT,MC,ZM,{kernelName:Or,backendName:"cpu",kernelFunc:YM},{kernelName:zr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;i_(a,"tile");const i=nT(n.bufferSync(a),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:Pr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s}=r;i_(a,"topk");const i=n.data.get(a.dataId).values,[o,l]=rT(i,a.shape,a.dtype,s);return[n.makeTensorInfo(o.shape,o.dtype,o.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},ME,{kernelName:$r,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=n,[h,c,d,p]=a.shape,[f,m]=null!=u?u:[c,d],g=[h,f,m,p],y=oa.computeStrides(a.shape),b=y[0],x=y[1],v=y[2],A=oa.getTypedArrayFromDType(a.dtype,oa.sizeFromShape(g));A.fill(l);const w=r.data.get(a.dataId).values,k=r.data.get(s.dataId).values;for(let S=0;S<h;++S){const e=1===s.shape[0]?k:k.subarray(8*S,8*S+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let a;const s=e[6]*n+e[7]*t+1;if(0===s)continue;const u=(e[3]*n+e[4]*t+e[5])/s,h=JM((e[0]*n+e[1]*t+e[2])/s,d,o),p=JM(u,c,o);switch(i){case"nearest":a=eF(w,c,d,b,x,v,S,p,h,r,l);break;case"bilinear":a=tF(w,c,d,b,x,v,S,p,h,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got "+i)}A[S*b+t*x+n*v+r]=a}return r.makeTensorInfo(g,a.dtype,A)}return{dataId:r.write(A,g,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:Vr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;i_(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:u}=aT(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:Br,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a.shape.length,o=a.shape[s],l=new Array(i-1);let u=0;for(let p=0;p<i;p++)p!==s&&(l[u++]=a.shape[p]);const h=new Array(i).fill(0),c=a.shape.slice();c[s]=1;const d=new Array(o);for(let p=0;p<d.length;p++){h[s]=p;const e=LE({inputs:{x:a},backend:n,attrs:{begin:h,size:c}});d[p]=xT({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}},{kernelName:Wr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r;i_(a,"unsortedSegmentSum");const o=[],l=[],u=a.shape.length-s.shape.length;let h=s;for(let d=0;d<u;++d){const e=WC({inputs:{input:h},backend:n,attrs:{dim:d+1}});h=e,l.push(e)}for(let d=0;d<i;++d){const e=oa.createScalarValue(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=$_({inputs:{a:t,b:h},backend:n}),s=v_({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=wE({inputs:{a:s,b:a},backend:n}),u=NC({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});o.push(u),l.push(t),l.push(r),l.push(s),l.push(i),l.push(u)}const c=eM({inputs:o,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},JN];for(const sH of nF)ta(sH);var rF,aF,sF,iF,oF,lF,uF={},hF={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cF(e){if(!(e in uF)){const t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete uF[e]},!1),1===e?t.getContext("webgl",hF)||t.getContext("experimental-webgl",hF):t.getContext("webgl2",hF)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;uF[e]=t}const t=uF[e];return t.isContextLost()?(delete uF[e],cF(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),uF[e])}function dF(e,t){return[t,e]}function pF(e){const t=oa.sizeFromShape(e),n=Math.ceil(t/4);return oa.sizeToSquarishShape(n)}function fF(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mF(e,t){const n=e;let r,a,s,i,o,l,u,h,c,d;return 2===Ve().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,s=n.RGBA16F,i=n.RGBA32F,o=n.RED,u=4,h=1,c=n.HALF_FLOAT,d=n.FLOAT):(r=e.RGBA,a=e.RGBA,s=e.RGBA,i=n.RGBA,o=e.RGBA,u=4,h=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT),l=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:h,textureTypeHalfFloat:c,textureTypeFloat:d}}function gF(e,t){const n=t();return Ve().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}(e,t))}(e),n}function yF(e){return!!(Ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function bF(e,t){return EF(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}(aF=rF||(rF={}))[aF.DENSE=0]="DENSE",aF[aF.SHARED_BATCH=1]="SHARED_BATCH",(iF=sF||(sF={}))[iF.RENDER=0]="RENDER",iF[iF.UPLOAD=1]="UPLOAD",iF[iF.PIXELS=2]="PIXELS",iF[iF.DOWNLOAD=3]="DOWNLOAD",(lF=oF||(oF={}))[lF.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",lF[lF.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",lF[lF.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",lF[lF.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",lF[lF.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16";var xF,vF,AF=/ERROR: [0-9]+:([0-9]+):/g;function wF(e,t){if(gF(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function kF(e,t,n,r,a,s,i){const o=e.getAttribLocation(t,n);return-1!==o&&(gF(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),gF(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,s,i)),gF(e,()=>e.enableVertexAttribArray(o)),!0)}function SF(e,t,n){gF(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),gF(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function IF(e,t){gF(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),gF(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function _F(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}(e,t))}function EF(e,t,n){const r=gF(e,()=>t());if(null==r)throw new Error(n);return r}function TF(e,t=2){return oa.sizeFromShape(e.slice(0,e.length-t))}function CF(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function NF(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[TF(e),...CF(e)]),t}function MF(e){return e%2==0}function FF(e,t){if(e=e.slice(-2),t=t.slice(-2),oa.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(MF(n)&&MF(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&MF(e[0])&&MF(t[0])}function RF(e,t){return null!=e.getExtension(t)}function DF(e){try{if(null!=cF(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function OF(e){const t=mF(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function zF(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&oa.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the WebGL backend.")})}var PF=Ve();function $F(){let e,t,n,r,a,s,i,o,l,u;return 2===Ve().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",s="outputColor",i="out vec4 outputColor;",o="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}function LF(e,t,n="index"){const r=oa.computeStrides(t);return r.map((t,a)=>`int ${e[a]} = ${n} / ${t}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`};`).join("")}function VF(e){const t=oa.computeStrides(e).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}PF.registerFlag("HAS_WEBGL",()=>PF.getNumber("WEBGL_VERSION")>0),PF.registerFlag("WEBGL_VERSION",()=>DF(2)?2:DF(1)?1:0),PF.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),PF.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===PF.get("WEBGL_VERSION")),PF.registerFlag("WEBGL_CPU_FORWARD",()=>!0),PF.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),PF.registerFlag("WEBGL_PACK",()=>PF.getBool("HAS_WEBGL")),PF.registerFlag("WEBGL_PACK_NORMALIZATION",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_CLIP",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_PACK_REDUCE",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_LAZILY_UNPACK",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_CONV_IM2COL",()=>PF.getBool("WEBGL_PACK")),PF.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==xF){const t=cF(e);xF=t.getParameter(t.MAX_TEXTURE_SIZE)}return xF}(PF.getNumber("WEBGL_VERSION"))),PF.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==vF){const t=cF(e);vF=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,vF)}(PF.getNumber("WEBGL_VERSION"))),PF.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=PF.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=cF(e);return t=RF(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:RF(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),PF.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>PF.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!cs.isMobile()),PF.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=cF(e);if(1===e){if(!RF(t,"OES_texture_float"))return!1}else if(!RF(t,"EXT_color_buffer_float"))return!1;return OF(t)}(PF.getNumber("WEBGL_VERSION"))),PF.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!PF.getBool("WEBGL_FORCE_F16_TEXTURES")&&PF.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),PF.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function(e){if(0===e)return!1;const t=cF(e);if(1!==e){if(RF(t,"EXT_color_buffer_float"))return OF(t);const e="EXT_color_buffer_half_float";if(RF(t,e)){const n=t.getExtension(e);return function(e,t){const n=mF(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}return!!RF(t,"OES_texture_float")&&!!RF(t,"WEBGL_color_buffer_float")&&OF(t)}(PF.getNumber("WEBGL_VERSION"))),PF.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=PF.getNumber("WEBGL_VERSION"))&&null!=cF(e).fenceSync;var e}),PF.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>PF.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),PF.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),PF.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>cs.isMobile()&&PF.getBool("IS_CHROME")?1:-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),PF.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);var BF="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function WF(e,t,n,r,a,s){!function(e,t){const n=Ve().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const i=function(e){return EF(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),o=e.TEXTURE_2D;return gF(e,()=>e.bindTexture(o,i)),gF(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),gF(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),gF(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),gF(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),gF(e,()=>e.texImage2D(o,0,r,t,n,0,a,s,null)),gF(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function jF(e){return e.internalFormatFloat}function HF(e){return e.internalFormatHalfFloat}function UF(e){return e.downloadTextureFormat}function GF(e){return e.internalFormatPackedFloat}function qF(e){return e.internalFormatPackedHalfFloat}var{getBroadcastDims:KF}=Ip;function XF(e,t,n,r){const a=[];e.forEach(e=>{const t=oa.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(a.push(`uniform sampler2D ${e.name};`),a.push(`uniform int offset${e.name};`))});const s=a.join("\n"),i=e.map(e=>function(e,t,n=!1){let r="";return r+=n?YF(e):ZF(e),e.shapeInfo.logicalShape.length<=t.logicalShape.length&&(r+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,o=KF(e.shapeInfo.logicalShape,t.logicalShape),l=aR(i),u=i-s;let h;const c=["x","y","z","w","u","v"];h=0===s?"":i<2&&o.length>=1?"coords = 0;":o.map(e=>`coords.${c[e+u]} = 0;`).join("\n");let d="";d=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+c[t+u]).join(", ");let p="return outputValue;";const f=1===oa.sizeFromShape(e.shapeInfo.logicalShape),m=1===oa.sizeFromShape(t.logicalShape);if(1!==s||f||m){if(f&&!m)p=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const e=s-2,t=s-1;o.indexOf(e)>-1&&o.indexOf(t)>-1?p="return vec4(outputValue.x);":o.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${a}() {\n      ${l} coords = getOutputCoords();\n      ${h}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===i&&null==e.shapeInfo.flatOffset&&oa.arraysEqual(e.shapeInfo.texShape,t.texShape))return`\n      float ${a}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const o=aR(i),l=KF(e.shapeInfo.logicalShape,t.logicalShape),u=i-s;let h;const c=["x","y","z","w","u","v"];h=0===s?"":i<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${c[e+u]} = 0;`).join("\n");let d="";return d=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+c[t+u]).join(", "),`\n    float ${a}() {\n      ${o} coords = getOutputCoords();\n      ${h}\n      return get${r}(${d});\n    }\n  `}(e,t)),r}(e,t,r)).join("\n"),o=t.texShape,l=$F(),u=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(l);let h,c,d=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${JF}\n    ${QF}\n    ${eR}\n  `}(l);return t.isPacked?(h=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,t);case 2:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(oa.arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const r=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t);default:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2);let s=a,i="",o="b, r, c";for(let l=2;l<e.length-1;l++)s*=e[e.length-l-1],i=`\n      int b${l} = index / ${s};\n      index -= b${l} * ${s};\n    `+i,o=`b${l}, `+o;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${i}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${e.length}(${o});\n    }\n  `}(e,t)}}(t.logicalShape,o),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(l)):(h=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=t)[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `;case 2:return function(e,t){return oa.arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){const n=LF(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(e,t);case 4:return function(e,t){const n=LF(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t);case 5:return function(e,t){const n=LF(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=LF(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n}(t.logicalShape,o),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(l)),r&&(d+=tR),[d,u,c,s,h,i,n].join("\n")}function ZF(e){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${t};}`;const[r,a]=e.shapeInfo.texShape;if(1===r&&1===a)return`\n      float ${n}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const[s,i]=e.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${i}, ${nR(t)});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${rR(e)}\n      }\n    `;const r=e.shapeInfo.texShape,a=r[0],s=r[1];if(1===s&&1===a)return`\n      float ${n}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const i=nR(t);return 1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${a}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===a?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${s}, index + ${i});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);case 2:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&oa.arraysEqual(t,a))return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${a[0]}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const{newShape:s,keptDims:i}=oa.squeezeShape(t);if(s.length<t.length){const t=["row","col"];return`\n      ${ZF(sR(e,s))}\n      float ${r}(int row, int col) {\n        return ${r}(${iR(t,i)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${rR(e)}\n      }\n    `;const o=a[0],l=a[1],u=nR(n);return 1===l?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${u}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${o}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===o?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${u}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${u};\n    vec2 uv = uvFromFlat(${o}, ${l}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}(e);case 3:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],s=t[2],{newShape:i,keptDims:o}=oa.squeezeShape(t);if(i.length<t.length){const t=["row","col","depth"];return`\n        ${ZF(sR(e,i))}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${iR(t,o)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${s}, 1)));\n        ${rR(e)}\n      }\n    `;const l=e.shapeInfo.texShape,u=l[0],h=l[1],c=e.shapeInfo.flatOffset;return h===a&&null==c?`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${u}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `:h===s&&null==c?`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${u}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${s} + depth + ${nR(n)};\n        vec2 uv = uvFromFlat(${u}, ${h}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}(e);case 4:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],s=t[2]*a,i=t[1]*s,{newShape:o,keptDims:l}=oa.squeezeShape(t);if(o.length<t.length){const t=["row","col","depth","depth2"];return`\n      ${ZF(sR(e,o))}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${iR(t,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${i}, ${s}, ${a}, 1)));\n        ${rR(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,c=h[0],d=h[1];return d===i&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${d}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:d===a&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${d}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${s} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${c}, ${d}, index + ${nR(n)});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],s=t[3]*a,i=t[2]*s,o=t[1]*i,{newShape:l,keptDims:u}=oa.squeezeShape(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${ZF(sR(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${iR(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${i}, ${s}, ${a})) +\n          depth3;\n        ${rR(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,d=c[0],p=c[1];return p===o&&null==h?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:p===a&&null==h?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} + depth * ${s} +\n          depth2 * ${a} + depth3 + ${nR(n)};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:s}=oa.squeezeShape(t);if(a.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${ZF(sR(e,a))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${iR(t,s)});\n      }\n    `}const i=t[5],o=t[4]*i,l=t[3]*o,u=t[2]*l,h=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${h}, ${u}, ${l}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${rR(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];return f===h&&null==c?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${o}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:f===i&&null==c?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${h} + col * ${u} + depth * ${l} +\n          depth2 * ${o} + depth3 * ${i} + depth4 + ${nR(n)};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function YF(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${$F().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=$F();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${s.texture2D}(${t}, uv);\n    }\n  `}(e);case 2:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=a[0],i=a[1],o=$F();if(null!=a&&oa.arraysEqual(t,a))return`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${s}.0);\n\n        return ${o.texture2D}(${n}, uv);\n      }\n    `;const l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(t[1]/2)}, ${l[0]}, ${l[1]}, row, col);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e);case 3:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){const n=[1,2],a=["b","row","col"];return`\n        ${YF(sR(e,t.slice(1)))}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${iR(a,n)});\n        }\n      `}const i=s[0],o=s[1],l=Math.ceil(t[2]/2);return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${i}, ${o}, ${l*Math.ceil(t[1]/2)}, ${l}, b, row, col);\n      return ${$F().texture2D}(${n}, uv);\n    }\n  `}(e);default:return function(e){const t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],o=i[0],l=i[1],u=Math.ceil(t[n-1]/2);let h=u*Math.ceil(t[n-2]/2),c="int b, int row, int col",d=`b * ${h} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)c=`int b${p}, `+c,h*=t[n-p-1],d=`b${p} * ${h} + `+d;return`\n    vec4 ${a}(${c}) {\n      int index = ${d};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${o});\n      return ${$F().texture2D}(${r}, uv);\n    }\n  `}(e)}}var JF="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",QF="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",eR="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tR="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function nR(e){return"offset"+e}function rR(e){const t=e.name,n=oa.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function aR(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function sR(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function iR(e,t){return t.map(t=>e[t]).join(", ")}function oR(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{const r=e.logicalShape,a=t[n],s=a.shape;if(!oa.arraysEqual(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&a.isUniform)return;const i=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!oa.arraysEqual(i,o))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${o} must match`)})}var{addImpl:lR,bincountImpl:uR,bincountReduceImpl:hR,ceilImpl:cR,concatImpl:dR,equalImpl:pR,expImpl:fR,expm1Impl:mR,floorImpl:gR,gatherNdImpl:yR,gatherV2Impl:bR,greaterImpl:xR,greaterEqualImpl:vR,lessImpl:AR,lessEqualImpl:wR,linSpaceImpl:kR,logImpl:SR,maxImpl:IR,maximumImpl:_R,minimumImpl:ER,multiplyImpl:TR,negImpl:CR,notEqualImpl:NR,prodImpl:MR,rangeImpl:FR,rsqrtImpl:RR,simpleAbsImpl:DR,sliceImpl:OR,sparseFillEmptyRowsImpl:zR,sparseReshapeImpl:PR,sparseSegmentReductionImpl:$R,stridedSliceImpl:LR,stringNGramsImpl:VR,stringSplitImpl:BR,stringToHashBucketFastImpl:WR,subImpl:jR,tileImpl:HR,topKImpl:UR,transposeImpl:GR,uniqueImpl:qR}=u_;function KR(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function XR(e,t){return 1===t?[e]:KR(e,t)}var ZR=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2==1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${a}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${a>0?"}":""}\n      `}var r;this.userCode=`\n      ${r=t,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${LF(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${VF(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${e[1]};\n        int cols = ${e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}};function YR(e,t,n,r,a){const s=function(e,t){switch(e){case oF.PACKED_2X2_FLOAT32:return GF(t);case oF.PACKED_2X2_FLOAT16:return qF(t);case oF.UNPACKED_FLOAT32:return jF(t);case oF.UNPACKED_FLOAT16:return HF(t);case oF.PACKED_4X1_UNSIGNED_BYTE:return UF(t);default:throw new Error("Unknown physical texture type "+e)}}(t,r);let i;if(a){const[t,n]=fF(e[0],e[1]);i=t*n}else{const[t,n]=dF(e[0],e[1]);i=t*n}return i*function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;throw new Error("Unknown internal format "+t)}(n,s)}function JR(e,t){if(e===sF.UPLOAD)return oF.PACKED_2X2_FLOAT32;if(e===sF.RENDER||null==e)return function(e){return Ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oF.PACKED_2X2_FLOAT32:oF.UNPACKED_FLOAT32:e?oF.PACKED_2X2_FLOAT16:oF.UNPACKED_FLOAT16}(t);if(e===sF.DOWNLOAD||e===sF.PIXELS)return oF.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function QR(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var eD=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},tD="return abs(x);",nD="return x;",rD=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},aD=mf.whereImpl,sD={},iD=Ve().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),oD=class extends j{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ve().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=cF(Ve().getNumber("WEBGL_VERSION"));this.binaryCache=((t=Ve().getNumber("WEBGL_VERSION"))in sD||(sD[t]={}),sD[t]),this.gpgpu=new class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Ve().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){uF[e]=t}(t,e)):this.gl=cF(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Ve().getNumber("WEBGL_VERSION")){const e="OES_texture_half_float";if(this.textureFloatExtension=bF(this.gl,"OES_texture_float"),RF(this.gl,e))this.textureHalfFloatExtension=bF(this.gl,e);else if(Ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),RF(this.gl,r))this.colorBufferHalfFloatExtension=bF(this.gl,r);else if(Ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",RF(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!RF(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=function(e){return function(e,t){const n=EF(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return gF(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),gF(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){const n=EF(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return gF(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),gF(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return EF(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=mF(this.gl,this.textureHalfFloatExtension)}get debug(){return Ve().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;gF(e,()=>e.finish()),gF(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),gF(e,()=>e.deleteFramebuffer(this.framebuffer)),gF(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),gF(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),gF(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=dF(t,n);return WF(e,a,s,jF(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=dF(t,n);return WF(e,a,s,HF(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=dF(t,n);return WF(e,a,s,UF(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){gF(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?gF(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):gF(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),gF(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,s){let i,o,l;gF(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),o=e.FLOAT,l=s.internalFormatPackedFloat),i.set(a),gF(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,i)),gF(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=fF(t,n);return WF(e,a,s,qF(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=fF(t,n);return WF(e,a,s,GF(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(IF(this.gl,this.framebuffer),this.outputTexture=null),gF(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[a,s]=dF(t,n),i=new Uint8Array(t*n*4);return gF(e,()=>e.readPixels(0,0,a,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,s){return function(e,t,n,r,a,s,i,o){const l=e,u=new Float32Array(function(e,t){const[n,r]=fF(e,t);return n*r*4}(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}(this.gl,e,0,0,0,a,s)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const a=e.createBuffer();gF(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));const s=16*t*n;return gF(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ)),gF(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),gF(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}(this.gl,t,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Ve().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return gF(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=function(e,t){const n=EF(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(gF(e,()=>e.shaderSource(n,t)),gF(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){const n=AF.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);const r=+n[1],a=e.split("\n"),s=a.length.toString().length+2,i=a.map((e,t)=>oa.rightPad((t+1).toString(),s)+e);let o=0;for(let c=0;c<i.length;c++)o=Math.max(i[c].length,o);const l=i.slice(0,r-1),u=i.slice(r-1,r),h=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+oa.rightPad(u[0],o),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(t,e);null==this.vertexShader&&(this.vertexShader=function(e){const t=$F();return function(e,t){const n=EF(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(gF(e,()=>e.shaderSource(n,t)),gF(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(t));const r=function(e){return EF(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);return gF(t,()=>t.attachShader(r,this.vertexShader)),gF(t,()=>t.attachShader(r,n)),function(e,t){if(gF(e,()=>e.linkProgram(t)),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,r),this.debug&&wF(t,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return gF(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),kF(e,t,"clipSpacePos",n,3,20,0)&&kF(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&gF(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&wF(this.gl,this.program),gF(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return EF(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),gF(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){gF(e,()=>function(e,t,n){!function(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)}(e,n),gF(e,()=>e.activeTexture(e.TEXTURE0+n)),gF(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),gF(e,()=>e.uniform1i(n,r))}(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=fF(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&wF(this.gl,this.program),_F(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),gF(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gF(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=bF(this.gl,2===Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await oa.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||oa.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),SF(this.gl,e,this.framebuffer),this.debug&&_F(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(SF(this.gl,this.outputTexture,this.framebuffer),this.debug&&_F(this.gl)):IF(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;SF(r,e,this.framebuffer),this.debug&&_F(r),this.outputTexture=e,gF(r,()=>r.viewport(0,0,t,n)),gF(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),gF(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var t;this.textureManager=new class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=JR(t,n),a=QR(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const s=YR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[a].shift();return this.usedTextures[a].push(e),e}let i;return r===oF.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===oF.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===oF.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===oF.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===oF.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=JR(n,r),s=QR(t,a,r);s in this.freeTextures||(this.freeTextures[s]=[]);const i=YR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Ve().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[s],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}(this.gpgpu),this.numMBBeforeWarning=null==Ve().global.screen?1024:Ve().global.screen.height*Ve().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new W(this,Po())}nextDataId(){return oD.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((Ve().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ve().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:sF.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,a){if(Ve().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:sF.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:s,shape:i,isPacked:o}=t;if(null!=s){let t;t=o?new rD(i,nD):new eD(i,nD);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,h;if(l&&(u=oa.now()),"complex64"===r){const e=this.readSync(a.real.dataId),t=this.readSync(a.imag.dataId);h=Ip.mergeRealAndImagArrays(e,t)}else h=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=oa.now()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:s,complexTensorInfos:i,isPacked:o}=t;if(null!=a){let t;t=o?new rD(r,nD):new eD(r,nD);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:s}],s),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(!Ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ve().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,h=null;if("complex64"!==s&&Ve().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);h=this.gpgpu.createBufferFromTexture(t.texture,...pF(r))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);u=Ip.mergeRealAndImagArrays(e[0],e[1])}else if(null==h)u=this.getValuesFromTexture(e);else{const e=oa.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(h,e)}null!=l&&this.disposeIntermediateTensorInfo(l);const c=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(c)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Po().removeDataId(e,this),this.pendingDeletes--),c}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>oa.decodeString(e))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return pi(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!yF(n)){if(Ve().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=oa.sizeFromShape(t);if(Ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...pF(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),s}const s=Ve().getBool("WEBGL_PACK")&&!0===r,i=s?NF(t):t,o=s?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=sF.DOWNLOAD;const t=$F();this.outputShape=e,this.userCode=`\n      ${BF}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}(i):new class{constructor(e){this.variableNames=["A"],this.outTexUsage=sF.DOWNLOAD;const t=$F();this.outputShape=e,this.userCode=`\n      ${BF}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}(i),l=this.runWebGLProgram(o,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),h}timerAvailable(){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=oa.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),s=oa.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);i.kernelMs=oa.sum(e),i.getExtraProfileInfo=()=>e.map((e,t)=>({name:s[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:oa.now(),endMs:null}}endTimer(e){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=oa.now(),e)}async getQueryTime(e){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=iD){return Ve().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&oa.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Ip.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return aD(e.shape,t)}packedUnaryOp(e,t,n){const r=new rD(e.shape,t),a=this.compileAndRun(r,[e],n);return Po().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=DR(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tD,e.dtype);const t=new eD(e.shape,tD),n=this.compileAndRun(t,[e]);return Po().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&oa.isString(n[0])){const a=n.map(e=>oa.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return Po().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const t=e.length,n=XR("rc",t),r=aR(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),i=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=XR("rc",t),r=aR(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];let r="";for(let a=e-2;a<e;a++)r+=`${n[a]} >= ${t[a]}`,a<e-1&&(r+="||");return r}(t,e,n),s=function(e,t,n,r){if(1===e)return"";const a=r.slice(-2);return`\n    int r = ${a[0]};\n    int c = ${a[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${t};\n    bool rEdge = rp1 >= ${n};\n  `}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){const n=e.length,r=function(e,t){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=`${0===r?"r":"rp1"}, ${0===a?"c":"cp1"}`;for(let n=2;n<e;n++)s=t[t.length-1-n]+","+s;n.push(s)}return n}(n,t);return 1===n?`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(e,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${a}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[TF(e.shape),...CF(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[TF(t),...CF(t)],s=new ZR(a,n),i=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:a}=t,s=NF(r);let i;return i=n?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=rF.DENSE;const t=pF(e),n=$F();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${LF(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}(s):new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=rF.DENSE;const t=pF(e),n=$F();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${LF(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}(s),{dtype:a,shape:r,dataId:this.runWebGLProgram(i,[{shape:s,dtype:a,dataId:e}],a,null,!0).dataId}}runWebGLProgram(e,t,n,r,a=!1){const s=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(s.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===rF.DENSE){const t=pF(e.outputShape);i.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===oa.sizeFromShape(s.shape))return i.values=oa.getTypedArrayFromDType(s.dtype,0),s;const o=[],l=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&oa.sizeFromShape(t.shape)<=Ve().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),o.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!FF(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),o.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);const u={shape:s.shape,texData:i,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach(e=>{r+=`${e.shape}_${e.isUniform?"uniform":e.texData.texShape}_${null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0}`});let a=e.constructor.name;return a+="_"+r+"_"+e.userCode,a}(e,l,u),c=this.getAndSaveBinary(h,()=>function(e,t,n,r){const a=t.userCode,s=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=s.map(e=>e.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=XF(s,o,a,t.packedInputs),u=e.createProgram(l);let h=null;const c=e.getUniformLocation(u,"NAN",!1);1===Ve().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(u,"INFINITY",!1));const d={};for(let p=0;p<t.variableNames.length;p++){const n=t.variableNames[p],r=!1;d[n]=e.getUniformLocation(u,n,r),d["offset"+n]=e.getUniformLocation(u,"offset"+n,r)}return{program:t,source:l,webGLProgram:u,uniformLocations:d,inShapeInfos:i,outShapeInfo:o,infLoc:h,nanLoc:c}}(this.gpgpu,e,l,u)),d=null!=this.activeTimers;let p;d&&(p=this.startTimer()),function(e,t,n,r,a){oR(t.inShapeInfos,n),oR([t.outShapeInfo],[r]);const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s,i[0],i[1]):e.setOutputMatrixTexture(s,i[0],i[1]),e.setProgram(t.webGLProgram),1===Ve().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((n,r)=>{const a=t.program.variableNames[r],s=t.uniformLocations[a],i=t.uniformLocations["offset"+a];if(null!=s)if(n.isUniform)if(oa.sizeFromShape(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,s,r)}),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,c,l,u,r),o.forEach(e=>this.disposeIntermediateTensorInfo(e)),d&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));const f=Ve().get("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=oa.now();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Ve().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===a){const e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r,a=!1){return this.runWebGLProgram(e,t,n=n||t[0].dtype,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ve().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Vo(()=>{if(!Ve().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ve().getBool("DEBUG");Ve().set("DEBUG",!1);const t=this.abs(uc(1e-8)).dataSync()[0];if(Ve().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:s,usage:i,isPacked:o}=t;if(null!=s)return;const l=null!=this.activeTimers;let u;l&&(u=oa.now());let h=t.texShape;if(null==h&&(h=function(e,t=!1){let n=Ve().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((t,n)=>n>=e.length-2?oa.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length){const t=oa.squeezeShape(e);e=t.newShape}let r=oa.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=TF(e);let n=2,a=2;return e.length&&([n,a]=CF(e)),r=t*(n/2)*(a/2),oa.sizeToSquarishShape(r).map(e=>2*e)}return oa.sizeToSquarishShape(r)}(n,o),t.texShape=h),null!=a){const e=NF(n);let s,i=h[1],c=h[0];const d=a instanceof Uint8Array;o?([i,c]=fF(h[0],h[1]),s=new class{constructor(e,t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=$F(),[a,s]=t;this.outputShape=e;let i="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let l=0;l<=1;l++)for(let t=0;t<=1;t++){const n=2*l+t;i+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${e[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${l} < ${e[1]}) {\n              localCoords[1] += ${l};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${s};\n              c = imod(flatIndex, ${s});\n              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${a}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${VF(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${i}\n\n        ${r.output} = ${o};\n      }\n    `}}(e,[c,i],d)):s=new class{constructor(e,t,n=!1){this.variableNames=["A"];const r=$F(),[a,s]=t;this.outputShape=e;let i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`\n      ${VF(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${s};\n        int c = imod(flatIndex, ${s});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${a}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}(e,[c,i],d);const p=this.makeTensorInfo([c,i],r);this.texData.get(p.dataId).usage=d?sF.PIXELS:sF.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),i,c,a);const f=this.runWebGLProgram(s,[p],r,null,!0),m=this.texData.get(f.dataId);t.texture=m.texture,t.texShape=m.texShape,t.isPacked=m.isPacked,t.usage=m.usage,this.disposeIntermediateTensorInfo(p),this.texData.delete(f.dataId),t.values=null,l&&(this.uploadWaitMs+=oa.now()-u)}else{const e=this.acquireTexture(h,i,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*oa.bytesPerElement(t)}};oD.nextDataId=0,cs.isBrowser()&&Zo("webgl",()=>new oD,2);var lD=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Ip.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}},uD=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ip.assertAndGetBroadcastShape(t,n);const a=this.outputShape.length;let s="";if(r)if(0===a||1===oa.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s=`\n          ${aR(a)} coords = getOutputCoords();\n        `,1===a)s+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=XR("coords",a);s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= ${this.outputShape[a-2]};\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= ${this.outputShape[a-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${s}\n\n        setOutput(result);\n      }\n    `}};function hD(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var cD={kernelName:rn,backendName:"webgl",kernelFunc:hD};function dD(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),o=hD({inputs:{x:r},backend:n}),l=hD({inputs:{x:a},backend:n});return i.complexTensorInfos={real:o,imag:l},s}var pD={kernelName:gt,backendName:"webgl",kernelFunc:dD},fD="return (a < 0.) ? b * a : a;",mD="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",gD={kernelName:hn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r,i=n.makeTensorInfo([],"float32",oa.createScalarValue(s,"float32")),o=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uD(mD,a.shape,i.shape):new lD(fD,a.shape,i.shape),l=n.runWebGLProgram(o,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),l}},yD="return (a < 0.) ? b * a : a;",bD="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",xD={kernelName:qn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uD(bD,r.shape,a.shape):new lD(yD,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}};function vD({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:s})=>{const{x:i}=a,o=s,l=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&null!=n){const e=o.texData.get(i.dataId),t=n(e.values,l);return o.makeTensorInfo(i.shape,l,t)}let u;return u=Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new rD(i.shape,t):new eD(i.shape,e),o.runWebGLProgram(u,[i],l)}}function AD({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:s}){return({inputs:i,backend:o})=>{const{a:l,b:u}=i,h=o;if(r&&"complex64"===l.dtype){const t=h.texData.get(l.dataId),n=h.texData.get(u.dataId),[r,a]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{const[n,r]=t,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},s={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new lD(e,l.shape,u.shape);return h.runWebGLProgram(i,[a,s],Ja(n.dtype,r.dtype))}),s=dD({inputs:{real:r,imag:a},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(a),s}const c=s||Ja(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([l,u]))&&null!=a){const e=h.texData.get(l.dataId).values,t=h.texData.get(u.dataId).values,n="string"===l.dtype?Ip.fromUint8ToStringArray(e):e,r="string"===l.dtype?Ip.fromUint8ToStringArray(t):t,[s,i]=a(l.shape,u.shape,n,r,c),o=h.makeTensorInfo(i,c);return h.texData.get(o.dataId).values=s,o}let d;return d=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new uD(t,l.shape,u.shape,n):new lD(e,l.shape,u.shape),h.runWebGLProgram(d,[l,u],c)}}function wD(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?bD:yD;if("leakyrelu"===e)return t?mD:fD;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var kD=class{constructor(e,t,n,r=!1,a=!1,s=!1,i=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const u=Math.ceil((r?e[1]:e[2])/2),h=r?"i * 2, rc.y":"rc.y, i * 2",c=a?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",m="";i&&(f=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,m="result = activation(result);");const g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",b="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(b=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${f}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          int batchA = ${y};\n          int batchB = ${b};\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${c});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${p[0]});\n          result += (${d[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}},SD=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ip.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}},ID="return a * b;";function _D(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,s=Ip.upcastType(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),s=new SD("return areal * breal - aimag * bimag;",r.shape,a.shape),i=new SD("return areal * bimag + aimag * breal;",r.shape,a.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=n.runWebGLProgram(s,o,"float32"),u=n.runWebGLProgram(i,o,"float32"),h=dD({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),h}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[i,o]=TR(r.shape,a.shape,e.values,t.values,s),l=n.makeTensorInfo(o,s);return n.texData.get(l.dataId).values=i,l}let i;return i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uD(ID,r.shape,a.shape):new lD(ID,r.shape,a.shape),n.runWebGLProgram(i,[r,a],s)}var ED={kernelName:On,backendName:"webgl",kernelFunc:_D};function TD(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=n,o=oa.sizeFromShape(a.shape),l=oa.inferFromImplicitShape(s,o),u=oa.sizeFromShape(l);oa.assert(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const h=i.texData.get(a.dataId);return!h.isPacked||FF(a.shape,l)||null!==h.texture&&FF(h.shape,l)?(i.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){const r=[TF(e.shape),...CF(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[TF(t),...CF(t)],i=new ZR(s,r),o=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}(a,l,i)}var CD={kernelName:Qn,backendName:"webgl",kernelFunc:TD},ND=class{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];const i=4*Math.floor(n/4),o=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${oa.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";a%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}},MD=class{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),h=n%4;let c=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(i="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(i="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";a%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===h}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${l});\n      }\n    `}};function FD(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Ip.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let s=e;for(let i=0;i<a.length;i++){const{inSize:o,windowSize:l,outSize:u}=a[i];let h,c;h="mean"===n?0===i?new ND({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},o):new ND({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u}):new MD({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},n),c=s,s=r.runWebGLProgram(h,[s],t),c.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(c)}return s}function RD(e,t,n){const r=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=aR(this.rank),a=KR("rc",this.rank),s=new Array(this.rank);for(let u=0;u<t.length;u++)s[t[u]]=a[u];const i=`vec2(${s.slice(-2).join()})`,o=`++${a[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${o}) {\n        result[1] = ${l};\n      }\n      --${a[this.rank-1]};\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${o}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}(e.shape,t):new class{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[t[s]];this.outputShape=n,this.rank=n.length;const r=aR(this.rank),a=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function DD(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;return function(e,t,n,r){const a=e.shape.length,s=oa.parseAxisParam(t,e.shape);let i=s;const o=Ip.getAxesPermutation(i,a),l=null!=o;let u=e;l&&(u=RD(e,o,r),i=Ip.getInnerMostAxes(i.length,a)),Ip.assertAxesAreInnerMostDims("sum",i,a);const[h,c]=Ip.computeOutAndReduceShapes(u.shape,i);let d=h;n&&(d=Ip.expandShapeToKeepDim(h,s));const p=oa.sizeFromShape(c),f=TD({inputs:{x:u},attrs:{shape:[oa.sizeFromShape(e.shape)/p,p]},backend:r}),m=FD(f,Qa(e.dtype),"sum",r),g=TD({inputs:{x:m},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),l&&r.disposeIntermediateTensorInfo(u),g}(a,s,i,n)}var OD={kernelName:br,backendName:"webgl",kernelFunc:DD};function zD(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:s}=r,i=n,o=new Array(a.shape.length);for(let u=0;u<o.length;u++)o[u]=a.shape[s[u]];let l;if(i.shouldExecuteOnCPU([a])){const e=i.texData.get(a.dataId),t=GR(e.values,a.shape,a.dtype,s,o);l=i.makeTensorInfo(o,a.dtype),i.texData.get(l.dataId).values=t}else l=RD(a,s,i);return l}var PD={kernelName:Lr,backendName:"webgl",kernelFunc:zD};function $D({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const u=e.shape.length,h=t.shape.length,c=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[h-1]:t.shape[h-2],p=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[h-2]:t.shape[h-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=oa.sizeFromShape(m),b=oa.sizeFromShape(g);oa.assert(u>=2&&h>=2&&(y===b||1===y||1===b),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${g}).`);const x=(y>b?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([p,f]);oa.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=n?[y,c,p]:[y,p,c],A=r?[b,f,d]:[b,d,f],w=TD({inputs:{x:e},backend:a,attrs:{shape:v}}),k=TD({inputs:{x:t},backend:a,attrs:{shape:A}}),S=[w,k],I=Math.max(y,b),_=n?w.shape[1]:w.shape[2],E=null!=s,T=null!=i,C="leakyrelu"===l,N=null!=l?wD(l,!0):null;let M;if((1===p||1===f)&&_>1e3&&!1===(E||T||C||null!=N)){let e=w,t=k;n&&(e=zD({inputs:{x:w},backend:a,attrs:{perm:[0,2,1]}}),S.push(e)),r&&(t=zD({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),S.push(t));const s=1===f;let i=e;1!==f&&(i=TD({inputs:{x:e},backend:a,attrs:{shape:[I,_,1]}}),S.push(i));const o=1===f?2:1;let l=t;s&&(l=TD({inputs:{x:t},backend:a,attrs:{shape:[I,1,_]}}),S.push(l));const u=_D({inputs:{a:i,b:l},backend:a});M=DD({inputs:{x:u},backend:a,attrs:{axis:o,keepDims:!0}}),S.push(u)}else{const l=Ja(e.dtype,t.dtype),u=new kD(v,A,[I,p,f],n,r,E,N,T,C),h=[w,k];if(null!=s&&h.push(s),T&&h.push(i),C){const e=a.makeTensorInfo([],"float32",oa.createScalarValue(o,"float32"));h.push(e),S.push(e)}M=a.runWebGLProgram(u,h,l)}const F=TD({inputs:{x:M},backend:a,attrs:{shape:x}});S.push(M);for(const R of S)a.disposeIntermediateTensorInfo(R);return F}var LD={kernelName:qr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:c}=r;return $D({a:a,b:s,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:c,activation:h})}},VD="return abs(x);",BD={kernelName:Ue,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=DR(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new rD(r.shape,VD):new eD(r.shape,VD),n.runWebGLProgram(a,[r],r.dtype)}},WD=vD({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),jD={kernelName:Ge,backendName:"webgl",kernelFunc:WD},HD=vD({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),UD={kernelName:qe,backendName:"webgl",kernelFunc:HD},GD="return a + b;",qD=AD({opSnippet:GD,packedOpSnippet:GD,supportsComplex:!0,cpuKernelImpl:lR}),KD={kernelName:Ke,backendName:"webgl",kernelFunc:qD},XD={kernelName:Xe,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return hD({inputs:{x:a[0]},backend:r});if(a.length>Ve().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),s=e({inputs:a.slice(t),backend:r});return e({inputs:[n,s],backend:r})}const s=a.map(e=>e.dtype).reduce((e,t)=>Ja(e,t)),i=a.map(e=>e.shape),o=Ve().getBool("WEBGL_PACK")?new class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);const n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}(a[0].shape,i):new class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);const n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}(a[0].shape,i);return r.runWebGLProgram(o,a,s)}},ZD={kernelName:Ze,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=oa.parseAxisParam(s,a.shape);let u=l;const h=Ip.getAxesPermutation(u,o);let c=a;null!=h&&(c=zD({inputs:{x:a},backend:n,attrs:{perm:h}}),u=Ip.getInnerMostAxes(u.length,o)),Ip.assertAxesAreInnerMostDims("all",u,o);const[d,p]=Ip.computeOutAndReduceShapes(c.shape,u),f=TD({inputs:{x:c},backend:n,attrs:{shape:[-1,oa.sizeFromShape(p)]}}),m=FD(f,f.dtype,"all",n);let g;return g=TD(i?{inputs:{x:m},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(d,l)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(c),g}},YD={kernelName:Ye,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=oa.parseAxisParam(s,a.shape);let u=l;const h=Ip.getAxesPermutation(u,o);let c=a;null!=h&&(c=zD({inputs:{x:a},backend:n,attrs:{perm:h}}),u=Ip.getInnerMostAxes(u.length,o)),Ip.assertAxesAreInnerMostDims("any",u,o);const[d,p]=Ip.computeOutAndReduceShapes(c.shape,u),f=TD({inputs:{x:c},backend:n,attrs:{shape:[-1,oa.sizeFromShape(p)]}}),m=FD(f,f.dtype,"any",n);let g;return g=TD(i?{inputs:{x:m},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(d,l)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(c),g}};function JD(e,t,n,r=null){let a=t.shape[0],s=t.shape[1];null!=r&&(a=r.shape[0],s=r.shape[1]);const i=Ip.computeOptimalWindowSize(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},l=new class{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===t?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}(o,n,null==r),u=[t];null!=r&&u.push(r);const h=e.runWebGLProgram(l,u,"int32");if(1===h.shape[1])return h;const c=JD(e,t,n,h);return e.disposeIntermediateTensorInfo(h),c}function QD(e,t,n,r=null){const a=null!=r?r.shape:t.shape,s=Ip.computeOptimalWindowSize(a[a.length-1]),i=new class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,oa.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const a=Math.ceil(e[e.length-1]/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const s=this.outputShape,i=s.length,o=aR(i),l=XR("coords",i);let u,h;if(1===a){h=i+1;const e=aR(h);u=`\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\n        ++${l[i-1]};\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\n        ++${l[i-2]};\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\n        --${l[i-1]};\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\n        --${l[i-2]};`}else h=i,u=`\n        ${o} sourceLocR = coords;\n        ++${l[i-1]};\n        ${o} sourceLocG = coords;\n        ++${l[i-2]};\n        ${o} sourceLocA = coords;\n        --${l[i-1]};\n        ${o} sourceLocB = coords;\n        --${l[i-2]};`;const c=["x","y","z","w","u","v"].slice(0,h),d="."+c[h-1],p=c.map(e=>"int "+e),f=XR("sourceLocR",h-1).concat("inIdx.r"),m=XR("sourceLocG",h-1).concat("inIdx.g"),g=XR("sourceLocB",h-1).concat("inIdx.b"),y=XR("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,v=`vec4(\n            getAChannel(${f.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${g.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,A=r?"":`\n      float getBestIndicesAChannel(${p.join()}) {\n        return getChannel(getBestIndicesA(${c.join()}),\n                                          vec2(${c.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${p.join()}) {\n        return getChannel(getA(${c.join()}),\n                               vec2(${c.slice(-2).join()}));\n      }\n      ${A}\n      void main() {\n        ${o} coords = getOutputCoords();\n        bool hasNextCol = ${l[i-1]} < ${s[i-1]-1};\n        bool hasNextRow = ${l[i-2]} < ${s[i-2]-1};\n        ${u}\n        ivec4 srcIdx = ivec4(sourceLocR${d}, sourceLocG${d},\n          sourceLocB${d}, sourceLocA${d}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${v};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${v};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}(a,s,n,null==r),o=e.runWebGLProgram(i,null==r?[t]:[t,r],"int32");if(o.shape.length===t.shape.length){const r=QD(e,t,n,o);return e.disposeIntermediateTensorInfo(o),r}return o}function eO(e,t,n,r){const a=[n];if(Ip.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Ve().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],[s,i]=Ip.computeOutAndReduceShapes(t.shape,a),o=oa.sizeFromShape(i),l=TD({inputs:{x:t},backend:e,attrs:{shape:[-1,o]}});n.push(l);const u=JD(e,l,r);n.push(u);const h=TD({inputs:{x:u},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return QD(e,t,r)}var tO={kernelName:Je,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let i=oa.parseAxisParam(s,a.shape);const o=Ip.getAxesPermutation(i,a.shape.length);let l=a;const u=[];null!=o&&(l=zD({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=Ip.getInnerMostAxes(i.length,l.shape.length)),Ip.assertAxesAreInnerMostDims("argMax",[i[0]],l.shape.length);const h=eO(n,l,i[0],"max");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},nO={kernelName:Qe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let i=oa.parseAxisParam(s,a.shape);const o=Ip.getAxesPermutation(i,a.shape.length);let l=a;const u=[];null!=o&&(l=zD({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(l),i=Ip.getInnerMostAxes(i.length,l.shape.length)),Ip.assertAxesAreInnerMostDims("argMin",[i[0]],l.shape.length);const h=eO(n,l,i[0],"min");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},rO=vD({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),aO={kernelName:et,backendName:"webgl",kernelFunc:rO},sO=vD({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),iO={kernelName:tt,backendName:"webgl",kernelFunc:sO},oO=vD({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),lO={kernelName:nt,backendName:"webgl",kernelFunc:oO},uO=AD({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),hO={kernelName:at,backendName:"webgl",kernelFunc:uO},cO=vD({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),dO={kernelName:rt,backendName:"webgl",kernelFunc:cO},pO=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t;let m="0.0";if(f||(m="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${o});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${c};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?a?`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`:`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`:`wR * ${c} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let g=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(g="avgValue / count");const y=4*Math.floor(s/4),b=s%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${m};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${m});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${g});\n      }\n    `}},fO=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let x="0.0";if(b||(x="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${o}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${h}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${c}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / count");const A=4*Math.floor(s/4),w=s%4,k=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${o}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${x};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${x});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${h}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${A}; wC += 4) {\n              int xC = xCCorner + wC * ${c};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${c}, ch)\n              );\n\n              ${k}\n            }\n\n            int xC = xCCorner + ${A};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                initializationValue\n              );\n\n              ${k}\n            }\n          }\n          setOutput(${v});\n        }\n      }\n    `}},mO={kernelName:st,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;zF(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;oa.assert(Ip.eitherStridesOrDilationsAreOne(i,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);const u=Ip.computePool2DInfo(a.shape,s,i,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&oa.arraysEqual(u.inShape,u.outShape))return hD({inputs:{x:a},backend:n});const h=new pO(u,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},gO={kernelName:ot,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r,h=Ip.computePool3DInfo(a.shape,s,i,[1,1,1],o,l,u),c=new fO(h,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}},yO={kernelName:lt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=r,c=Ip.computePool3DInfo(i.shape,o,l,[1,1,1],u,h),d=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterDepth*e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n            wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a],i.dtype)}},bO={kernelName:it,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;zF([a,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,h=Ip.computePool2DInfo(i.shape,o,l,1,u),c=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n            wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${e.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(h);return n.runWebGLProgram(c,[a],i.dtype)}},xO={kernelName:ut,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;return $D({a:a,b:s,transposeA:i,transposeB:o,backend:n})}},vO={kernelName:Jt,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:a,variance:s,offset:i,scale:o}=e;oa.assert(a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oa.assert(null==i||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oa.assert(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;null==l&&(l=.001);const u=[r,a,s];let h=null;null!=i&&(h=i.shape,u.push(i));let c=null;null!=o&&(c=o.shape,u.push(o));const d=Ve().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ip.assertAndGetBroadcastShape(e,t),Ip.assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=r&&(Ip.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=a&&(Ip.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}(r.shape,a.shape,s.shape,h,c,l):new class{constructor(e,t,n,r,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Ip.assertAndGetBroadcastShape(e,t),Ip.assertAndGetBroadcastShape(e,n);let i="0.0";null!=r&&(Ip.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="1.0";null!=a&&(Ip.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}(r.shape,a.shape,s.shape,h,c,l);return t.runWebGLProgram(d,u,u[0].dtype)}},AO=["x","y","z","w","u","v"];function wO(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r,[o,l]=Yi.parseSliceParams(a,s,i);if(Yi.assertParamsValid(a,o,l),0===oa.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=OR(e.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}const{isPacked:u}=n.texData.get(a.dataId),h=Yi.isSliceContinous(a.shape,o,l);if(u||!h){const e=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;const t=aR(this.rank),n=XR("coords",this.rank),r=XR("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${a})`,i=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${i}\n        ${o}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}(l):new class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=aR(this.rank),n=`uniform int start[${this.rank}];`,r=function(e){if(1===e)return"sourceLoc";if(e<=6)return AO.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let a;a=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map((e,t)=>`sourceLoc.${AO[t]} = start[${t}] + coords.${AO[t]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${a}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}(l),t=e.getCustomSetupFunc(o);return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),i=r.texData.get(s.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;let o=Yi.computeFlatOffset(t,oa.computeStrides(e.shape));a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}(a,o,l,n)}var kO={kernelName:cr,backendName:"webgl",kernelFunc:wO},SO={kernelName:ht,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;oa.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((e,t)=>e*t),l=Ip.getReshaped(a.shape,s,o),u=Ip.getPermuted(l.length,s.length),h=Ip.getReshapedPermuted(a.shape,s,o),c=Ip.getSliceBeginCoords(i,s.length),d=Ip.getSliceSize(h,i,s.length),p=[],f=TD({inputs:{x:a},backend:n,attrs:{shape:l}}),m=zD({inputs:{x:f},backend:n,attrs:{perm:u}}),g=TD({inputs:{x:m},backend:n,attrs:{shape:h}}),y=wO({inputs:{x:g},backend:n,attrs:{begin:c,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},IO={kernelName:ct,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=n.readSync(a.dataId),l=n.readSync(s.dataId),u=uR(o,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}},_O=AD({opSnippet:"return float(a != b);",cpuKernelImpl:NR,dtype:"bool"}),EO={kernelName:Pn,backendName:"webgl",kernelFunc:_O};function TO(e){const{inputs:t,backend:n}=e,{input:r}=t;return hD({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var CO={kernelName:Zn,backendName:"webgl",kernelFunc:TO},NO={kernelName:pt,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:s}=n,{dtype:i}=a;if("complex64"===i){if("complex64"===s.dtype)return hD({inputs:{x:s},backend:r});const t=Ah(s.shape),n=e({inputs:{x:s},backend:r,attrs:{dtype:"float32"}}),a=dD({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===s.dtype){const t=TO({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!oa.hasEncodingLoss(s.dtype,i)){const e=hD({inputs:{x:s},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if("int32"===i)return function(e,t){const n=new eD(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(s,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",oa.getTypedArrayFromDType("bool",1)),t=_O({inputs:{a:s,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}},MO="return ceil(x);",FO=vD({opSnippet:MO,packedOpSnippet:MO,cpuKernelImpl:cR}),RO={kernelName:ft,backendName:"webgl",kernelFunc:FO},DO={kernelName:mt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:s,clipValueMax:i}=r;let o;o=Ve().getBool("WEBGL_PACK_CLIP")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}(a.shape):new class{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}(a.shape);const l=o.getCustomSetupFunc(s,i);return n.runWebGLProgram(o,[a],a.dtype,l)}};function OO(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var zO={kernelName:yt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),s=new class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}(r.shape),i=[OO(r,a.complexTensorInfos.real),OO(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}};function PO(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}function $O(e){const{inputs:t,backend:n}=e,{input:r}=t;return hD({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var LO={kernelName:sn,backendName:"webgl",kernelFunc:$O};function VO(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>TO({inputs:{input:e},backend:n})),a=e.map(e=>$O({inputs:{input:e},backend:n})),s=VO(r,t,n),i=VO(a,t,n),o=dD({inputs:{real:s,imag:i},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map(e=>{const r=oa.sizeFromShape(e.shape.slice(t));return TD({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),s=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),i=Ip.computeOutShape(a.map(e=>e.shape),1),o=dR(s,i,r,1===a[0].shape[0]),l=Ip.computeOutShape(e.map(e=>e.shape),t),u=n.makeTensorInfo(l,r,o);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}if(e.length>Ve().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),a=VO(e.slice(0,r),t,n),s=VO(e.slice(r),t,n),i=VO([a,s],t,n);return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}if(Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const a=new class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ip.computeOutShape(e,t);const n=this.outputShape,r=n.length,a=aR(r),s=XR("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T"+t);const o=new Array(e.length-1);o[0]=e[0][t];for(let p=1;p<o.length;p++)o[p]=o[p-1]+e[p][t];const l=i[t],u=i.slice(-2),h=i.join();let c=`if (${l} < ${o[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${u.join()}));\n        }`;for(let p=1;p<o.length;p++){const e=o[p-1];c+=`\n        if (${l} < ${o[p]}  && ${l} >= ${o[p-1]}) {\n          return getChannel(\n            getT${p}(${PO(i,l,e)}),\n            vec2(${PO(u,l,e)}));\n        }`}const d=o[o.length-1];c+=`\n        return getChannel(\n          getT${o.length}(${PO(i,l,d)}),\n          vec2(${PO(u,l,d)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${c}\n      }\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}(e.map(e=>e.shape),t);return n.runWebGLProgram(a,e,r)}const{tensors2D:s,outShape:i}=function(e,t,n){const r=Ip.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>TD({inputs:{x:e},attrs:{shape:[-1,oa.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}(e,t,n),o=new class{constructor(e){this.outputShape=[],this.outputShape=Ip.computeOutShape(e,1),this.variableNames=e.map((e,t)=>"T"+t);const t=new Array(e.length-1);t[0]=e[0][1];for(let r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<t.length;r++)n.push(`else if (yC < ${t[r]}) setOutput(getT${r}(yR, yC-${t[r-1]}));`);n.push(`else setOutput(getT${t.length}(yR, yC-${t[t.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}(s.map(e=>e.shape)),l=n.runWebGLProgram(o,s,r);s.forEach(e=>n.disposeIntermediateTensorInfo(e));const u=TD({inputs:{x:l},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(l),u}function BO(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=oa.parseAxisParam(a,t[0].shape)[0],i=Ip.computeOutShape(t.map(e=>e.shape),s);if(0===oa.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const o=t.filter(e=>oa.sizeFromShape(e.shape)>0);if(1===o.length)return hD({inputs:{x:o[0]},backend:n});const l=o.map(e=>e.shape);return Ip.assertParamsConsistent(l,s),VO(o,s,n)}var WO={kernelName:bt,backendName:"webgl",kernelFunc:BO},jO=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1;let x="",v="";n&&(x=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");const A=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${x}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${A}\n        ${v}\n        setOutput(result);\n      }\n    `}};function HO({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const l=e.shape,u=r.texData.get(e.dataId),h="channelsLast"===n.dataFormat;let c;const d=[],p=l[2]%2!=0&&!!u.isPacked;if((1!=l[0]*l[1]*l[2]&&1!==n.outChannels||!(n.inChannels>1e3))&&Ve().getBool("WEBGL_LAZILY_UNPACK")&&Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&p){const p={dataId:e.dataId,shape:[1,h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),n.inChannels],dtype:e.dtype},f=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,oa.assert(FF(u.shape,p.shape),()=>`packed reshape ${u.shape} to ${p.shape} isn't free`);const m=TD({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});d.push(m);const g=$D({a:p,b:m,backend:r,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i}),y=r.texData.get(g.dataId);oa.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=f,y.shape=n.outShape,c=hD({inputs:{x:g},backend:r}),c.shape=n.outShape,d.push(g)}else{const u=TD({inputs:{x:e},backend:r,attrs:{shape:[1,h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],n.inChannels]}}),p=TD({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=$D({a:u,b:p,transposeA:!1,transposeB:!1,backend:r,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i});c=TD({inputs:{x:f},backend:r,attrs:{shape:n.outShape}}),d.push(u),d.push(p),d.push(f)}for(const f of d)r.disposeIntermediateTensorInfo(f);return c}function UO({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:c,outHeight:d,dataFormat:p}=n,f="channelsLast"===p,m=l*u*h,g=d*c,y=[m,g],b=[],x=TD({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),v=TD({inputs:{x:t},backend:r,attrs:{shape:[1,m,oa.sizeFromShape(t.shape)/m]}});b.push(x),b.push(v);const A=new class{constructor(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:r,inChannels:a,strideWidth:s,strideHeight:i,padInfo:o,outWidth:l,dilationWidth:u,dilationHeight:h,dataFormat:c}=n,{left:d,top:p}=o,f=a*r,m=$F(),g="channelsLast"===c,y=g?0:1,b=g?1:2;let x="";for(let v=0;v<=1;v++)for(let n=0;n<=1;n++)x+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${v};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${l})) * ${i} - ${p};\n            d0 = offsetY + ${h} * (pos / ${f});\n\n            if(d0 < ${t[y]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${l}.) * ${s}. - ${d}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${f}.) / ${a}.));\n\n              if(d1 < ${t[b]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${a}.));\n\n                if (${g}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*v+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*v+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${x}\n\n        ${m.output} = result;\n      }\n    `}}(y,x.shape,n),w=r.runWebGLProgram(A,[x],"float32"),k=TD({inputs:{x:w},backend:r,attrs:{shape:[1,y[0],y[1]]}});b.push(w),b.push(k);const S=null!=a,I=null!=s,_="leakyrelu"===o,E=o?wD(o,!0):null,T=new kD(k.shape,v.shape,[1,g,n.outChannels],!0,!1,S,E,I,_),C=[k,v];if(a&&C.push(a),I&&C.push(s),_){const e=r.makeTensorInfo([],"float32",oa.createScalarValue(i,"float32"));C.push(e),b.push(e)}const N=r.runWebGLProgram(T,C,"float32"),M=TD({inputs:{x:N},backend:r,attrs:{shape:f?[1,d,c,n.outChannels]:[1,n.outChannels,d,c]}});b.push(N);for(const F of b)r.disposeIntermediateTensorInfo(F);return M}var GO={kernelName:xt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:h}=r,c=Ip.convertConv2DDataFormat(l),d=Ip.computeConv2DInfo(a.shape,s.shape,i,u,o,h,!1,c);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(Ve().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0])p=UO({x:a,filter:s,convInfo:d,backend:n});else{const e=new jO(d);p=n.runWebGLProgram(e,[a,s],"float32")}else p=HO({x:a,filter:s,convInfo:d,backend:n});const f=TD({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}},qO={kernelName:vt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:h}=r,c=Ip.convertConv2DDataFormat(l),d=Ip.computeConv2DInfo(a.shape,h,i,1,o,u,!1,c),p=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===e.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(p,[a,s],"float32")}},KO={kernelName:At,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:h}=r,c=Ip.convertConv2DDataFormat(u),d=Ip.computeConv2DInfo(i,s.shape,o,1,l,h,!1,c),p=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r="channelsLast"===e.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(p,[a,s],"float32")}},XO={kernelName:wt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r,u=Ip.computeConv3DInfo(a.shape,s.shape,i,l,o),h=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,c=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${s}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${h}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${c}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},ZO={kernelName:kt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r,u=Ip.computeConv3DInfo(a.shape,l,i,1,o),h=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${e.strideDepth} - ${e.padInfo.front};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},YO={kernelName:St,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r,u=Ip.computeConv3DInfo(l,s.shape,o,1,i),h=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${e.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(h,[a,s],"float32")}},JO=vD({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),QO={kernelName:It,backendName:"webgl",kernelFunc:JO},ez=vD({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),tz={kernelName:_t,backendName:"webgl",kernelFunc:ez},nz={kernelName:Tt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:u}=r,h=new class{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,i,o,l]=e,[u]=t,[h,c]=n;this.outputShape=[u,h,c,l];const d="bilinear"===r?1:0,[p,f]=[i-1+".0",o-1+".0"],[m,g,y]=h>1?[""+(i-1)/(h-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+p],[b,x,v]=c>1?[""+(o-1)/(c-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+f];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${x};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${a}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${a}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}(a.shape,s.shape,o,l,u);return n.runWebGLProgram(h,[a,s,i],"float32")}},rz=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=e;const r=e.length,a=t?"0.0":`getX(${az(r,"coords")})`,s=e[e.length-1];let i="",o="";t?(i=n?"end != "+(s-1):"end != 0",o=n?"end + 1":"end - 1"):(i=n?"end + pow2 < "+s:"end >= pow2",o=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${aR(r)} coords = getOutputCoords();\n        int end = ${sz(r,"coords")};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${i}) {\n          int idx = ${o};\n          ${sz(r,"coords")} = idx;\n          val += getX(${az(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.index&&(this.index=t.getUniformLocation(n,"index")),t.gl.uniform1f(this.index,e)}}};function az(e,t){if(1===e)return""+t;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function sz(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error(`Cumulative sum for rank ${e} is not yet supported`)}var iz={kernelName:Et,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r,l=a.shape.length,u=Ip.getAxesPermutation([s],l);let h=a;null!=u&&(h=zD({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=Ip.getInnerMostAxes(1,l)[0];if(c!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${a.shape.length-1} but got axis=${s}`);const d=h.shape[c];let p=hD({inputs:{x:h},backend:n});for(let f=0;f<=Math.ceil(Math.log2(d))-1;f++){const e=new rz(h.shape,!1,o),t=e.getCustomSetupFunc(f),r=p;p=n.runWebGLProgram(e,[p],p.dtype,t),n.disposeIntermediateTensorInfo(r)}if(i){const e=new rz(h.shape,i,o),t=p;p=n.runWebGLProgram(e,[p],p.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){const e=zD({inputs:{x:p},backend:n,attrs:{perm:Ip.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),e}return p}},oz={kernelName:Ct,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(s.dataId),r=uR(e,t,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(s),r=hR(e,t,i,o);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},lz={kernelName:Nt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;oa.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);const o=a.shape[0],l=("NHWC"===i?a.shape[1]:a.shape[2])*s,u=("NHWC"===i?a.shape[2]:a.shape[3])*s,h=("NHWC"===i?a.shape[3]:a.shape[1])/(s*s),c="NHWC"===i?[o,l,u,h]:[o,h,l,u],d=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}(c,s,i);return n.runWebGLProgram(d,[a],a.dtype)}},uz=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,u=e.strideHeight,h=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,m=e.outChannels/e.inChannels;let g="",y="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,y="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${u}, ${h});\n      const ivec2 pads = ivec2(${o}, ${l});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${m};\n        int q = d2 - d1 * ${m};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${s}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${i}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${y}\n        setOutput(result);\n      }\n    `}},hz=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;const s=e.outChannels/e.inChannels,i=e.inHeight,o=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,h=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,f=e.filterHeight,m=e.filterWidth,g=m;let y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let A=0;A<m;A++)y+=`\n          vec4 xTexelC${2*A};\n          int xTexelC${2*A}Ready;\n          vec4 xC${A};`;for(let A=0;A<f;A++){for(let e=0;e<m;e++)y+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xC${e} = vec4(0.0);`;y+=`\n        xR = xRCorner + ${A*d};\n        if (xR >=0 && xR < ${i}) {\n      `;for(let e=0;e<(g+1)/2;e++){const t=2*e,n=t*p;if(y+=`\n          xC = xCCorner + ${n};\n          `,1===c){if(t<m&&(u%2==1?(y+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n              `,y+=1===p&&n>0?`\n                xC${t} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < ${o}) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${o}) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${n}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                  }\n                  `):y+=`\n                if (xC >= 0 && xC < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xC${t} = xTexelC${n};\n                `,n+1<m)){const e=u%2==0?oa.nearestLargerEven(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(y+=`\n                  xCOffset = xC + ${u%2} + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                    xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ${o}) {\n                      xTexelC${n+2}.zw = vec2(0.0);\n                    }\n                    xTexelC${n+2}Ready = 1;\n                  }\n                  `,p>1&&(y+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                      xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${n}Ready = 1;\n                    }\n                    `),y+=`\n                  xC${t+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.xy);\n                  `):y+=1===e?`\n                    xC${t+1} = xTexelC${n};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                      xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= ${o}) {\n                        xTexelC${n+2}.zw = vec2(0.0);\n                      }\n                      xTexelC${n+2}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${n+2};\n                    `}}else n<m&&(u%2==1?(y+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= ${o}) {\n                    xTexelC${n+2}.zw = vec2(0.0);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n              `,n+1<m&&(y+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${n+2}.xy, final.xy);\n                `)):(y+=`\n                if(xC >= 0 && xC < ${o} && xTexelC${n}Ready == 0) {\n                  xTexelC${n} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ${o}) {\n                    xTexelC${n}.zw = vec2(0.0);\n                  }\n                  xTexelC${n}Ready = 1;\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${o} && xTexelC${n+2}Ready == 0) {\n                  xTexelC${n+2} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= ${o}) {\n                    xTexelC${n+2}.zw = vec2(0.);\n                  }\n                  xTexelC${n+2}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${n}.xy, xTexelC${n+2}.xy);\n              `,n+1<m&&(y+=`\n                  xC${t+1} = vec4(xTexelC${n}.zw, xTexelC${n+2}.zw);\n                `)));t<m&&(y+=`\n            wTexel = getW(${A}, ${n}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,n+1<m&&(y+=`\n              wTexel = getW(${A}, ${n+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}y+="\n        }\n      "}let b="",x="";n&&(b=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,x="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${h}, ${c});\n      const ivec2 pads = ivec2(${l}, ${u});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${y}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${v}\n        ${x}\n        setOutput(result);\n      }\n    `}},cz={kernelName:Mt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r;let h=l;null==h&&(h=[1,1]),oa.assert(Ip.eitherStridesOrDilationsAreOne(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const c=Ip.computeConv2DInfo(a.shape,s.shape,i,h,o,u,!0);let d;return d=Ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&c.strideWidth<=2&&c.outChannels/c.inChannels==1?new hz(c):new uz(c),n.runWebGLProgram(d,[a,s],"float32")}},dz={kernelName:Ft,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:h}=r,c=Ip.computeConv2DInfo(a.shape,h,i,o,l,u,!0),d=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${e.outChannels/e.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a,s],"float32")}},pz={kernelName:Rt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:h}=r,c=Ip.computeConv2DInfo(h,s.shape,i,o,l,u,!0),d=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(d,[a,s],"float32")}},fz={kernelName:Dt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],s=oa.sizeFromShape(r.shape),i=TD({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}(s),l=n.runWebGLProgram(o,[i],i.dtype),u=TD({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}},mz={kernelName:Ot,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r,u=Ip.computeDilation2DInfo(a.shape,s.shape,i,o,"NHWC",l);let h;const c=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:s,filterHeight:i,filterWidth:o,dilationHeight:l,dilationWidth:u}=e,{top:h,left:c}=r;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${h}, ${c});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}(u);h=n.runWebGLProgram(c,[a,s],"float32");const d=TD({inputs:{x:h},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(h),d}},gz={kernelName:Lt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=Ip.decodeEinsumEquation(a,s.length);Ip.checkEinsumDimSizes(i.length,l,s);const{path:u,steps:h}=Ip.getEinsumComputePath(o,l),c=h.length;let d=null,p=i.length;const f=[];for(let m=0;m<c;++m){for(const e of h[m]){const{permutationIndices:t,expandDims:r}=Ip.getEinsumPermutation(p,l[e]);let a;Ip.isIdentityPermutation(t)?a=s[e]:(a=zD({inputs:{x:s[e]},backend:n,attrs:{perm:t}}),f.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);oa.arraysEqual(a.shape,i)||(a=TD({inputs:{x:a},backend:n,attrs:{shape:i}}),f.push(a)),null===d?d=a:(d=_D({inputs:{a:a,b:d},backend:n}),f.push(d))}m<c-1&&(u[m]>=0&&(d=DD({inputs:{x:d},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},yz=vD({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),bz={kernelName:Vt,backendName:"webgl",kernelFunc:yz},xz={kernelName:Bt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,s=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uD("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new lD("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}},vz=AD({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:pR}),Az={kernelName:jt,backendName:"webgl",kernelFunc:vz},wz=vD({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Ip.ERF_P};\n  float a1 = ${Ip.ERF_A1};\n  float a2 = ${Ip.ERF_A2};\n  float a3 = ${Ip.ERF_A3};\n  float a4 = ${Ip.ERF_A4};\n  float a5 = ${Ip.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),kz={kernelName:Wt,backendName:"webgl",kernelFunc:wz},Sz="return exp(x);",Iz=vD({opSnippet:Sz,packedOpSnippet:Sz,cpuKernelImpl:fR}),_z={kernelName:Ht,backendName:"webgl",kernelFunc:Iz};function Ez(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:s}=t,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(oa.assert(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),TD({inputs:{x:s},backend:r,attrs:{shape:o}})}var Tz={kernelName:Ut,backendName:"webgl",kernelFunc:Ez},Cz="return exp(x) - 1.0;",Nz=vD({opSnippet:Cz,packedOpSnippet:Cz,cpuKernelImpl:mR}),Mz={kernelName:Gt,backendName:"webgl",kernelFunc:Nz},Fz=class{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,s=n?r+".0":"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${s};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}};function Rz(e,t,n){const r=n.texData.get(e.dataId),a=oa.sizeFromShape(e.shape),s=e.shape[e.shape.length-1],i=TD({inputs:{x:e},backend:n,attrs:{shape:[a/s,s]}}),o=i.shape,l=new Fz("real",o,t),u=new Fz("imag",o,t),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],c=n.runWebGLProgram(l,h,"float32"),d=n.runWebGLProgram(u,h,"float32"),p=dD({inputs:{real:c,imag:d},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d);const f=TD({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}var Dz={kernelName:qt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Rz(r,!1,n)}};function Oz(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:s}=n;if(s=s||oa.inferDtype(a),"string"===s){const e=oa.getArrayFromDType(s,oa.sizeFromShape(r));return e.fill(a),t.makeTensorInfo(r,s,e)}{const e=new class{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(r,a),n=e.getCustomSetupFunc(a);return t.runWebGLProgram(e,[],s,n)}}var zz,Pz={kernelName:Kt,backendName:"webgl",kernelFunc:Oz},$z={kernelName:Xt,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=new class{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},Lz="return floor(x);",Vz=vD({opSnippet:Lz,packedOpSnippet:Lz,cpuKernelImpl:gR}),Bz={kernelName:Zt,backendName:"webgl",kernelFunc:Vz},Wz=AD({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),jz={kernelName:Yt,backendName:"webgl",kernelFunc:Wz},Hz={kernelName:Ur,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:s}=r,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,u]=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],h=[u,l],c=[u,l,s];(o||i)&&(null==zz&&(zz=document.createElement("canvas").getContext("2d")),zz.canvas.width=l,zz.canvas.height=u,zz.drawImage(a,0,0,l,u),a=zz.canvas);const d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=sF.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const p=Ve().getBool("WEBGL_PACK")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=$F(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}(c):new class{constructor(e){this.variableNames=["A"];const t=$F(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}(c),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}},Uz={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:h,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=Ip.convertConv2DDataFormat(h),g=Ip.computeConv2DInfo(a.shape,s.shape,l,c,u,d,!1,m);let y;const b=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Ve().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0])y=UO({x:a,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{const e=null!=i,t=null!=o,r="leakyrelu"===p,l=p?wD(p,!1):null,u=new jO(g,e,l,t,r),h=[a,s];if(i&&h.push(i),o&&h.push(o),r){const e=n.makeTensorInfo([],"float32",oa.createScalarValue(f,"float32"));h.push(e),b.push(e)}y=n.runWebGLProgram(u,h,"float32")}else y=HO({x:a,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});const x=TD({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}},Gz={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dimRoundingMode:c,activation:d,leakyreluAlpha:p}=r,f=[];let m=h;null==m&&(m=[1,1]),oa.assert(Ip.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Ip.computeConv2DInfo(a.shape,s.shape,l,m,u,c,!0),y=Ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=d?wD(d,y):null,x=[a,s],v=null!=i,A=null!=o,w="leakyrelu"===d;if(v&&x.push(i),A&&x.push(o),w){const e=n.makeTensorInfo([],"float32",oa.createScalarValue(p,"float32"));x.push(e),f.push(e)}let k;k=y?new hz(g,v,b,A,w):new uz(g,v,b,A,w);const S=n.runWebGLProgram(k,x,"float32");return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),S}},qz={kernelName:en,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=a.shape,i=s[s.length-1],o=oa.sizeFromShape(r.shape),[l,u,h,c]=Ip.prepareAndValidate(r,a),d=TD({inputs:{x:a},backend:n,attrs:{shape:[u,i]}}),p=TD({inputs:{x:r},backend:n,attrs:{shape:[oa.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),s=yR(e,t,r.dtype,u,i,h,c,r.shape,o);return n.makeTensorInfo(l,r.dtype,s.values)}const f=new class{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=aR(t.length),a=aR(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${a} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}(i,c,[u,h]),m=n.runWebGLProgram(f,[p,d],p.dtype),g=TD({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}},Kz={kernelName:Qt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r,l=oa.parseAxisParam(i,a.shape)[0],u=Ip.segment_util.collectGatherOpShapeInfo(a,s,l,o),h=oa.sizeFromShape(s.shape),c=[],d=TD({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=TD({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,h/u.batchSize]}});c.push(d),c.push(p);const f=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,s])||"string"===a.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=bR(t,e,f);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=aR(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<e.length;a++)r.push(2===a?"int(getIndices(resRC.x, resRC.z))":""+n[a]);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);c.push(g);const y=TD({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},Xz=AD({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:xR,dtype:"bool"}),Zz={kernelName:tn,backendName:"webgl",kernelFunc:Xz},Yz=AD({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:vR}),Jz={kernelName:nn,backendName:"webgl",kernelFunc:Yz},Qz={kernelName:an,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Rz(r,!0,n)}},eP=vD({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),tP={kernelName:on,backendName:"webgl",kernelFunc:eP},nP=vD({opSnippet:"return float(isinf(x));",dtype:"bool"}),rP={kernelName:ln,backendName:"webgl",kernelFunc:nP},aP=vD({opSnippet:"return float(isnan(x));",dtype:"bool"}),sP={kernelName:un,backendName:"webgl",kernelFunc:aP},iP=AD({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:AR,dtype:"bool"}),oP={kernelName:cn,backendName:"webgl",kernelFunc:iP},lP=AD({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:wR,dtype:"bool"}),uP={kernelName:dn,backendName:"webgl",kernelFunc:lP},hP={kernelName:pn,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=kR(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},cP=vD({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:SR}),dP={kernelName:fn,backendName:"webgl",kernelFunc:cP},pP=vD({opSnippet:"return log(1.0 + x);"}),fP={kernelName:mn,backendName:"webgl",kernelFunc:pP},mP=AD({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),gP={kernelName:gn,backendName:"webgl",kernelFunc:mP},yP=vD({opSnippet:"return float(!(x >= 1.0));"}),bP={kernelName:yn,backendName:"webgl",kernelFunc:yP},xP=AD({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),vP={kernelName:bn,backendName:"webgl",kernelFunc:xP},AP={kernelName:vn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r,u=Ve().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}(a.shape,s,i,o,l):new class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const s=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}(a.shape,s,i,o,l);return n.runWebGLProgram(u,[a],a.dtype)}},wP={kernelName:An,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:u,beta:h}=r,c=new class{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${a})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${a});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}(a.shape,o,l,u,h);return n.runWebGLProgram(c,[a,s,i],a.dtype)}};function kP(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=a.shape.length,l=oa.parseAxisParam(s,a.shape);let u=l;const h=Ip.getAxesPermutation(u,o),c=null!=h,d=n.shouldExecuteOnCPU([a]);let p=a;if(c){if(d){const e=n.texData.get(p.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=a.shape[h[n]];const r=GR(e,a.shape,a.dtype,h,t);p=n.makeTensorInfo(t,a.dtype),n.texData.get(p.dataId).values=r}else p=RD(a,h,n);u=Ip.getInnerMostAxes(u.length,o)}Ip.assertAxesAreInnerMostDims("max",u,o);const[f,m]=Ip.computeOutAndReduceShapes(p.shape,u);let g,y=f;if(i&&(y=Ip.expandShapeToKeepDim(f,l)),d){const e=n.texData.get(p.dataId),t=IR(e.values,oa.sizeFromShape(m),y,a.dtype);g=n.makeTensorInfo(y,a.dtype),n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const a=oa.sizeFromShape(t),s=TD({inputs:{x:e},attrs:{shape:[oa.sizeFromShape(e.shape)/a,a]},backend:r}),i=FD(s,e.dtype,"max",r),o=TD({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(p,m,y,n);return c&&n.disposeIntermediateTensorInfo(p),g}var SP={kernelName:wn,backendName:"webgl",kernelFunc:kP},IP=AD({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:_R}),_P={kernelName:kn,backendName:"webgl",kernelFunc:IP},EP={kernelName:Sn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;zF(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;oa.assert(Ip.eitherStridesOrDilationsAreOne(i,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`);const u=Ip.computePool2DInfo(a.shape,s,i,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&oa.arraysEqual(u.inShape,u.outShape))return hD({inputs:{x:a},backend:n});const h=new pO(u,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},TP={kernelName:_n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=r,h=Ip.computePool3DInfo(a.shape,s,i,[1,1,1],o,u,l),c=new fO(h,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}},CP={kernelName:En,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:h}=r,c=Ip.computePool3DInfo(i.shape,o,l,[1,1,1],u,h),d=new fO(c,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),f=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n           wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${t*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c),m=n.runWebGLProgram(f,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}},NP={kernelName:In,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;zF([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:c}=r,d=Ip.computePool2DInfo(o.shape,l,u,1,h,c),p=new pO(d,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n          wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${t*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d),g=n.runWebGLProgram(m,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}},MP={kernelName:Tn,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;oa.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];oa.assert(Ip.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const h=Ip.computePool2DInfo(r.shape,a,s,u,i),[c,d]=function(e,t,n,r){let a=new pO(n,"max",!1);const s=r.runWebGLProgram(a,[e],"float32");return a=new pO(n,"max",!0,!0,t),[s,r.runWebGLProgram(a,[e],"float32")]}(r,o,h,l);return[c,d]}},FP={kernelName:Cn,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:a,axis:s}=t,i=n,o=r.shape.length,l=oa.parseAxisParam(s,r.shape);let u=l;const h=Ip.getAxesPermutation(u,o),c=null!=h,d=i.shouldExecuteOnCPU([r]),p=[];let f=r;if(c){if(d){const e=i.texData.get(f.dataId).values,t=new Array(o);for(let a=0;a<t.length;a++)t[a]=r.shape[h[a]];const n=GR(e,r.shape,r.dtype,h,t);f=i.makeTensorInfo(t,r.dtype),i.texData.get(f.dataId).values=n}else f=RD(r,h,i);p.push(f),u=Ip.getInnerMostAxes(u.length,o)}Ip.assertAxesAreInnerMostDims("sum",u,o);const[m,g]=Ip.computeOutAndReduceShapes(f.shape,u);let y=m;a&&(y=Ip.expandShapeToKeepDim(m,l));const b=function(e,t,n,r){const a=oa.sizeFromShape(t),s=TD({inputs:{x:e},attrs:{shape:[oa.sizeFromShape(e.shape)/a,a]},backend:r}),i=FD(s,"float32","mean",r),o=TD({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(f,g,y,i);for(const x of p)i.disposeIntermediateTensorInfo(x);return b}},RP={kernelName:Nn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=oa.parseAxisParam(s,a.shape);let u=l;const h=Ip.getAxesPermutation(u,o);let c=a;null!=h&&(c=zD({inputs:{x:a},backend:n,attrs:{perm:h}}),u=Ip.getInnerMostAxes(u.length,a.shape.length)),Ip.assertAxesAreInnerMostDims("min",u,o);const[d,p]=Ip.computeOutAndReduceShapes(c.shape,u),f=TD({inputs:{x:c},backend:n,attrs:{shape:[-1,oa.sizeFromShape(p)]}}),m=FD(f,f.dtype,"min",n);let g;return g=TD(i?{inputs:{x:m},backend:n,attrs:{shape:Ip.expandShapeToKeepDim(d,l)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=h&&n.disposeIntermediateTensorInfo(c),g}},DP=AD({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:ER}),OP={kernelName:Mn,backendName:"webgl",kernelFunc:DP},zP={kernelName:Fn,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:a,mode:s}=n,i=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=aR(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=XR("rc",r),l=XR("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,h=1===r?"source":`vec2(${l.slice(-2).join()})`,c="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${a} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${c};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${c};\n        }\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${h});\n        ${o[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${h});\n        }\n      `}else{const e=`\n        ${a} source = rc;\n        ${a} lt = ${a}(lessThan(source, start));\n        ${a} gte = ${a}(greaterThanEqual(source, end));\n        ${a} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${c}) +\n                gte * ((end - 1) * 2 - source + ${c});\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${h});\n        ${o[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${h});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${h});\n          ${o[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${h});\n          }\n        }\n      `}this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}(r.shape,a,s):new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=aR(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${a} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}(r.shape,a,s);return t.runWebGLProgram(i,[r],r.dtype)}},PP=AD({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),$P={kernelName:Rn,backendName:"webgl",kernelFunc:PP},LP=AD({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),VP={kernelName:$t,backendName:"webgl",kernelFunc:LP},BP="return a - b;",WP=AD({opSnippet:BP,packedOpSnippet:BP,supportsComplex:!0,cpuKernelImpl:jR}),jP={kernelName:Rr,backendName:"webgl",kernelFunc:WP};function HP(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=oa.parseAxisParam([s],a.shape),o=kP({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Ip.expandShapeToKeepDim(o.shape,i),u=TD({inputs:{x:o},backend:n,attrs:{shape:l}}),h=WP({inputs:{a:a,b:u},backend:n}),c=Iz({inputs:{x:h},backend:n}),d=DD({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),p=TD({inputs:{x:d},backend:n,attrs:{shape:l}}),f=LP({inputs:{a:c,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}var UP={kernelName:Ar,backendName:"webgl",kernelFunc:HP},GP={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r,l=o?a:HP({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],h=l.shape[1],c=new class{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(n,"seed")),t.gl.uniform1f(this.seedLoc,e)}}}(u,h,s),d=c.getCustomSetupFunc(i),p=n.runWebGLProgram(c,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),p}},qP="return -x;",KP={kernelName:zn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=CR(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new rD(r.shape,qP):new eD(r.shape,qP),n.runWebGLProgram(a,[r],r.dtype)}},XP=mf.nonMaxSuppressionV3Impl,ZP={kernelName:$n,backendName:"webgl",kernelFunc:function(e){Ip.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(a.dataId),h=n.readSync(s.dataId),{selectedIndices:c}=XP(u,h,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},YP=mf.nonMaxSuppressionV4Impl,JP={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){Ip.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,h=n.readSync(a.dataId),c=n.readSync(s.dataId),{selectedIndices:d,validOutputs:p}=YP(h,c,i,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},QP=mf.nonMaxSuppressionV5Impl,e$={kernelName:Vn,backendName:"webgl",kernelFunc:function(e){Ip.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,h=n.readSync(a.dataId),c=n.readSync(s.dataId),d=i,p=o,f=l,m=u,{selectedIndices:g,selectedScores:y}=QP(h,c,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},t$={kernelName:Wn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r,l=oa.sizeFromShape(a.shape),u=new class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}(l,s,i,o),h=TD({inputs:{x:a},backend:n,attrs:{shape:[l]}}),c=n.runWebGLProgram(u,[h],a.dtype);n.disposeIntermediateTensorInfo(h);const d=TD({inputs:{x:c},backend:n,attrs:{shape:[...a.shape,s]}});return n.disposeIntermediateTensorInfo(c),d}};function n$(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=TO({inputs:{input:r},backend:n}),t=n$({inputs:{x:e},backend:n}),a=$O({inputs:{input:r},backend:n}),s=n$({inputs:{x:a},backend:n}),i=dD({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return Oz({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var r$={kernelName:jr,backendName:"webgl",kernelFunc:n$},a$={kernelName:Bn,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=TO({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=$O({inputs:{input:a},backend:r}),i=n$({inputs:{x:s},backend:r}),o=dD({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return Oz({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},s$={kernelName:jn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return Ez({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{oa.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),oa.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=BO({inputs:t.map(e=>{const t=Ez({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}},i$=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r,o=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=aR(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=XR("rc",r),l=XR("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,h=1===r?"source":`vec2(${l.slice(-2).join()})`,c=[a+" rc = outputLoc;",`${o[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${c[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${a} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${h});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n      uniform float value;\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(a.shape,s,i):new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=aR(r),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n      uniform float value;\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n        uniform float value;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}(a.shape,s,i),l=o.getCustomSetupFunc(i);return n.runWebGLProgram(o,[a],a.dtype,l)},o$={kernelName:Hn,backendName:"webgl",kernelFunc:i$},l$=AD({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),u$={kernelName:Gn,backendName:"webgl",kernelFunc:l$},h$={kernelName:Kn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=[],u=oa.parseAxisParam(s,a.shape);let h=u;const c=Ip.getAxesPermutation(h,o);let d,p=a;if(null!=c&&(p=zD({inputs:{x:a},backend:n,attrs:{perm:c}}),h=Ip.getInnerMostAxes(h.length,o),l.push(p)),Ip.assertAxesAreInnerMostDims("prod",h,o),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:a}=MR(p.shape,p.dtype,e,h);d=n.makeTensorInfo(r,a,t)}else{const[e,t]=Ip.computeOutAndReduceShapes(p.shape,h),r=oa.sizeFromShape(t),s=TD({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),i=FD(s,Qa(a.dtype),"prod",n);d=TD({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(s),l.push(i)}if(i){l.push(d);const e=Ip.expandShapeToKeepDim(d.shape,u);d=TD({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},c$=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:i}=n,o=FR(r,a,s,i);return t.makeTensorInfo([o.length],i,o)},d$={kernelName:Xn,backendName:"webgl",kernelFunc:c$},p$=vD({opSnippet:"return 1.0 / x;"}),f$={kernelName:Yn,backendName:"webgl",kernelFunc:p$},m$=vD({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),g$={kernelName:Jn,backendName:"webgl",kernelFunc:m$},y$=vD({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),b$={kernelName:ar,backendName:"webgl",kernelFunc:y$},x$={kernelName:nr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,u]=o,h=Ve().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]},\n          ${u[1]/h[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${c};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i):new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${c};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i);return n.runWebGLProgram(h,[a],"float32")}},v$={kernelName:rr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],u=o[0]/l[0],h=o[1]/l[1],c=1/u,d=1/h,p=2*Math.ceil(c)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}},A$={kernelName:er,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,u]=o,h=Ve().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]},\n          ${u[1]/h[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${c};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i):new class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/h[0]},\n          ${u[1]/h[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${c};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}(a.shape,l,u,s,i);return n.runWebGLProgram(h,[a],a.dtype)}},w$={kernelName:tr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],u=o[0]/l[0],h=o[1]/l[1],c=1/u,d=1/h,p=2*Math.ceil(c)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${h});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}},k$={kernelName:sr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,i=a.shape.length,o=oa.parseAxisParam(s,a.shape);if(0===i)return hD({inputs:{x:a},backend:n});const l=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=XR("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=aR(n);var o;function l(n){const r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:""+r[n]}(a,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${a}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${o=r.slice(),l(o)};\n          if(${a}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",l(e)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            if(${a}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}(a.shape,o):new class{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),a=aR(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}},S$={kernelName:Gr,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=new class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        uniform vec4 params;\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${a}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}getCustomSetupFunc(e,t,n,r){return(a,s)=>{null==this.paramsLoc&&(this.paramsLoc=a.getUniformLocationNoThrow(s,"params")),a.gl.uniform4f(this.paramsLoc,e,t,n,r)}}}(r.shape,s),[u,h]=Ip.getImageCenter(i,r.shape[1],r.shape[2]),c=l.getCustomSetupFunc(u,h,Math.sin(a),Math.cos(a));return o.runWebGLProgram(l,[r],r.dtype,c)}},I$=vD({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),_$={kernelName:ir,backendName:"webgl",kernelFunc:I$},E$=vD({opSnippet:"return inversesqrt(x);",cpuKernelImpl:RR}),T$={kernelName:or,backendName:"webgl",kernelFunc:E$},C$=class{constructor(e,t,n,r,a,s,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const o=aR(a.length),l=aR(s.length);let u="";1===n?u="i":2===n&&(u="i, j");let h="";1===r?h="i":2===r&&(h="i, coords[1]"),this.userCode=`\n        ${o} strides = ${o}(${a});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(getIndices(${u}));\n              flattenedIndex += index * ${t>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${h});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}},N$={kernelName:lr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:h,outputSize:c}=Ip.calculateShapes(s,a,i),d=[c/u,u];if(0===c)return n.makeTensorInfo(i,a.dtype);const p=TD({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=TD({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new C$(l,o,p.shape.length,f.shape.length,h,d),y=n.runWebGLProgram(g,[f,p,m],f.dtype),b=TD({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},M$={kernelName:ur,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,i=new class{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],i=[];for(let r=0;r<t.length;r++)i.push(""+n[r]),r<e&&s.push(""+n[r]);r=s.join(),a=i.join()}const s=aR(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${a}));\n        } else {\n          setOutput(getB(${a}));\n        }\n      }\n    `}}(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,s],Ja(a.dtype,s.dtype))}},F$=vD({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Ip.SELU_SCALEALPHA};\n  float scale = ${Ip.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),R$={kernelName:hr,backendName:"webgl",kernelFunc:F$},D$=vD({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),O$={kernelName:mr,backendName:"webgl",kernelFunc:D$},z$=vD({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),P$={kernelName:fr,backendName:"webgl",kernelFunc:z$},$$=vD({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),L$={kernelName:dr,backendName:"webgl",kernelFunc:$$},V$=vD({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),B$={kernelName:pr,backendName:"webgl",kernelFunc:V$},W$=vD({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),j$={kernelName:gr,backendName:"webgl",kernelFunc:W$},H$={kernelName:xr,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;oa.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((e,t)=>e*t),l=[[0,0]];l.push(...i);for(let y=1+s.length;y<a.shape.length;++y)l.push([0,0]);const u=[],h=i$({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Ip.getReshaped(h.shape,s,o,!1),d=Ip.getPermuted(c.length,s.length,!1),p=Ip.getReshapedPermuted(h.shape,s,o,!1),f=TD({inputs:{x:h},backend:n,attrs:{shape:c}}),m=zD({inputs:{x:f},backend:n,attrs:{perm:d}}),g=TD({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(h),u.push(f),u.push(m),u.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}},U$={kernelName:wr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n         "+s.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         "+r.shape);if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         "+a.shape);if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+i.shape);const o=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(s.dataId),h=n.readSync(i.dataId)[0],[c,d,p,f,m]=zR(o,r.shape,r.dtype,l,a.dtype,u,h);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},G$={kernelName:kr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape "+r.shape);if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape "+a.shape);if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape "+s.shape);const i=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,h,c]=PR(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}},q$={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n              "+s.shape);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,h]=$R(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,u)}},K$={kernelName:Ir,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             "+a.shape);if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n             "+s.shape);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,h]=$R(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,u)}},X$={kernelName:_r,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,strides:h,outputSize:c}=Ip.calculateShapes(s,a,o),d=new C$(u,l,a.shape.length,s.shape.length,h,[c,1],!1),p=n.runWebGLProgram(d,[s,a,i],s.dtype),f=TD({inputs:{x:p},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),f}},Z$={kernelName:vr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=oa.parseAxisParam(i,a.shape)[0],l=Ip.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{const t=[...h];t[o]=e;const r=wO({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},Y$=vD({opSnippet:"return sqrt(x);"}),J$={kernelName:yr,backendName:"webgl",kernelFunc:Y$},Q$=vD({opSnippet:"return x * x;"}),eL={kernelName:Tr,backendName:"webgl",kernelFunc:Q$},tL="return (a - b) * (a - b);",nL=AD({opSnippet:tL,packedOpSnippet:tL}),rL={kernelName:Er,backendName:"webgl",kernelFunc:nL},aL={kernelName:Hr,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,a=new eD(r.shape,`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `);return n.runWebGLProgram(a,[r],r.dtype)}},sL={kernelName:Cr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:c,shrinkAxisMask:d}=r,{nonStrided:p,$begin:f,$strides:m,size:g,newShape:y,outShape:b}=Yi.sliceInfo(a.shape,s,i,o,l,u,h,c,d),x=TD({inputs:{x:a},backend:n,attrs:{shape:y}});let v;if(p){const e=wO({inputs:{x:x},backend:n,attrs:{begin:f,size:g}});v=TD({inputs:{x:e},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(e)}else if(b.some(e=>0===e))v=n.makeTensorInfo(b,a.dtype,[]);else if(n.shouldExecuteOnCPU([x])){const e=n.texData.get(x.dataId),t=pi(x.shape,x.dtype,e.values),r=LR(b,t,m,f);v=n.makeTensorInfo(b,x.dtype,r.values)}else{const e=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=aR(n.length),s=aR(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${a} begin = ${a}(${e});\n      ${a} strides = ${a}(${t});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}(f,m,b);v=n.runWebGLProgram(e,[x],x.dtype)}const A=TD({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),A}},iL={kernelName:Nr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:c}=t,d=n.readSync(h.dataId),p=n.readSync(c.dataId),[f,m]=VR(d,p,a,s,i,o,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}},oL={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: "+s.shape);if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+i.shape);const o=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[u,h,c]=BR(o,l,a),d=h.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},lL={kernelName:Fr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),o=WR(i,a);return n.makeTensorInfo(s.shape,"int32",o)}},uL=vD({opSnippet:"return tan(x);"}),hL={kernelName:Dr,backendName:"webgl",kernelFunc:uL},cL=vD({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"});function dL(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>oa.decodeString(e)):e,r=pi(a.shape,a.dtype,t),i=HR(r,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new class{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[s]*t[s];this.outputShape=n,this.rank=n.length;const r=aR(this.rank),a=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push(`imod(${n[a]}, ${e[a]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}(a.shape,s);return n.runWebGLProgram(i,[a],a.dtype)}var pL=[AP,wP,LD,BD,jD,UD,KD,XD,ZD,YD,tO,nO,aO,iO,hO,lO,dO,gO,mO,yO,bO,xO,vO,SO,IO,NO,RO,DO,zO,pD,WO,qO,KO,GO,ZO,YO,XO,QO,tz,nz,iz,oz,lz,dz,pz,cz,fz,mz,gz,bz,xz,Az,kz,_z,Tz,Mz,Dz,Pz,$z,Bz,jz,Hz,Uz,Gz,qz,Kz,Zz,Jz,cD,Qz,LO,tP,rP,sP,gD,oP,uP,hP,fP,dP,gP,bP,vP,SP,TP,EP,CP,NP,MP,_P,FP,RP,OP,zP,$P,GP,ED,KP,ZP,JP,e$,EO,t$,a$,s$,o$,u$,xD,h$,d$,CO,VP,f$,b$,g$,CD,x$,v$,A$,w$,k$,S$,_$,T$,N$,M$,R$,O$,P$,L$,B$,kO,UP,j$,H$,U$,G$,q$,K$,X$,Z$,J$,eL,rL,aL,sL,iL,oL,lL,jP,OD,hL,{kernelName:Or,backendName:"webgl",kernelFunc:cL},{kernelName:zr,backendName:"webgl",kernelFunc:dL},{kernelName:Pr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:i}=r,o=n.readSync(a.dataId),[l,u]=UR(o,a.shape,a.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},{kernelName:$r,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=r,[h,c,d,p]=a.shape,[f,m]=null!=u?u:[c,d],g=[h,f,m,p],y=new class{constructor(e,t,n,r,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const i="nearest"===n?1:2;let o;switch(r){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${o} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${a});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${a});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${i} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}(c,d,i,o,l,g);return n.runWebGLProgram(y,[a,s],"float32")}},PD,{kernelName:Vr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;zF(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:u}=qR(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:Br,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a,o=i.shape.length,l=a.shape[s],u=new Array(o-1);let h=0;for(let m=0;m<o;m++)m!==s&&(u[h++]=i.shape[m]);const c=[],d=new Array(o).fill(0),p=i.shape.slice();p[s]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[s]=m;const e=wO({inputs:{x:i},backend:n,attrs:{begin:d,size:p}}),t=TD({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,c.push(e)}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},{kernelName:Wr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r,o=a.shape.length,l=[];let u=0;const h=Ip.getAxesPermutation([u],o);let c=a;null!=h&&(c=zD({inputs:{x:a},backend:n,attrs:{perm:h}}),l.push(c),u=Ip.getInnerMostAxes(1,o)[0]);const d=Ip.segment_util.computeOutShape(c.shape,u,i),p=oa.sizeFromShape([c.shape[u]]),f=TD({inputs:{x:c},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=Qa(a.dtype),g=(e,t,r,a,s)=>{const i=e.shape[0],o=e.shape[1],u=Ip.segment_util.segOpComputeOptimalWindowSize(o,s),h={windowSize:u,inSize:o,batchSize:i,numSegments:s},c=new class{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,i=s*Math.ceil(a/n);this.outputShape=[r,i];const o=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let h="";a%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}(h,t),d=n.compileAndRun(c,[e,r],a);if(l.push(d),d.shape[1]===s)return d;const p=c$({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),f=dL({inputs:{x:p},backend:n,attrs:{reps:[o/u]}});return l.push(p),l.push(f),g(d,t,f,a,s)},y=TD({inputs:{x:g(f,"unsortedSegmentSum",s,m,i)},backend:n,attrs:{shape:d}});let b=y;if(null!=h){l.push(y);const e=Ip.getUndoAxesPermutation(h);b=zD({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},r$];for(const sH of pL)ta(sH);var fL,mL,gL,yL,bL,xL={"tfjs-core":Mo,"tfjs-backend-cpu":"3.7.0","tfjs-backend-webgl":"3.7.0","tfjs-data":s_,"tfjs-layers":jb,"tfjs-converter":KS,tfjs:"3.7.0"};(mL=fL||(fL={}))[mL.float32=0]="float32",mL[mL.int32=1]="int32",mL[mL.bool=2]="bool",mL[mL.string=3]="string",mL[mL.complex64=4]="complex64",(yL=gL||(gL={}))[yL.linear=0]="linear",yL[yL.relu=1]="relu",yL[yL.relu6=2]="relu6",yL[yL.prelu=3]="prelu",yL[yL.leakyrelu=4]="leakyrelu",yL[yL.sigmoid=5]="sigmoid";var vL={kernelName:qr,backendName:"wasm",setupFunc:function(e){bL=e.wasm.cwrap(qr,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:i,preluActivationWeights:o}=t;if("float32"!==a.dtype||"float32"!==s.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:c}=r,d=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(s.dataId).id;let f=0;if(null!=i){const e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);f=e.id}const m=null==o?0:n.dataIdMap.get(o.dataId).id,g=gL[h];if(null==g)throw new Error(h+" activation not yet supported for FusedConv2D in the wasm backend.");const y=n.makeOutput([a.shape[0],l?a.shape[2]:a.shape[1],u?s.shape[1]:s.shape[2]],a.dtype),b=n.dataIdMap.get(y.dataId).id,x=new Uint8Array(new Int32Array(a.shape).buffer),v=new Uint8Array(new Int32Array(s.shape).buffer);return bL(d,x,a.shape.length,p,v,s.shape.length,l,u,g,f,m,c||0,b),y}};function AL(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){const{backend:n,inputs:{x:r}}=e,a=n.dataIdMap.get(r.dataId).id,s=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(s.dataId).id;return 0===oa.sizeFromShape(s.shape)||t(a,i),s}}}var wL=AL(Ue);function kL(e,t,n){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){const{backend:s,inputs:i}=a,{a:o,b:l}=i,u=s.dataIdMap.get(o.dataId).id,h=s.dataIdMap.get(l.dataId).id,c=null!=n?n:o.dtype,d=Ip.assertAndGetBroadcastShape(o.shape,l.shape),p=s.makeOutput(d,c);if(0===oa.sizeFromShape(d))return p;const f=new Uint8Array(new Int32Array(o.shape).buffer),m=new Uint8Array(new Int32Array(l.shape).buffer),g=s.dataIdMap.get(p.dataId).id,y=()=>r(u,f,o.shape.length,h,m,l.shape.length,fL[o.dtype],g);if(t&&"float32"===o.dtype)return y(),p;const b=Ip.getBroadcastDims(o.shape,d),x=Ip.getBroadcastDims(l.shape,d),v=b.every((e,t)=>e===t),A=x.every((e,t)=>e===t);if(v&&A)return y(),p;throw new Error(`Broadcasting along outer dims is not yet supported for ${o.dtype} ${e}.`)}}}var SL,IL=kL(Ke,!0),_L={kernelName:Xe,backendName:"wasm",setupFunc:function(e){SL=e.wasm.cwrap(Xe,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===oa.sizeFromShape(r.shape))return r;const a=t.map(e=>n.dataIdMap.get(e.dataId).id),s=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return SL(s,a.length,fL[r.dtype],i),r}};function EL(e){const{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var TL,CL={kernelName:rn,backendName:"wasm",kernelFunc:EL};function NL(e){const{inputs:t,backend:n,attrs:r}=e,[a,s]=function(e,t){const n=[],r=[];for(let a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(let a=0;a<r.length;++a){let e=-1;for(let t=0;t<r.length;++t)r[t]>=a&&(-1===e||r[e]>r[t])&&(e=t);r[e]=a}return[n,r]}(t.x.shape,r.perm);let i=!0;for(let f=0;f<s.length;f++)s[f]!==f&&(i=!1);const o=function(e,t){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(i){const e=EL({inputs:t,backend:n});return e.shape=o,e}const u=n.makeOutput(o,l.dtype),h=n.dataIdMap.get(l.dataId).id,c=n.dataIdMap.get(u.dataId).id,d=new Uint8Array(new Int32Array(s).buffer),p=new Uint8Array(new Int32Array(l.shape).buffer);return TL(h,p,l.shape.length,fL[l.dtype],c,d,s.length),u}var ML,FL={kernelName:Lr,backendName:"wasm",kernelFunc:NL,setupFunc:function(e){TL=e.wasm.cwrap(Lr,null,["number","array","number","number","number","array","number"])}};function RL(e,t,n){const r=e.shape,a=e.shape.length,s=oa.parseAxisParam(t,r);let i=s;const o=Ip.getAxesPermutation(i,a);let l=null,u=!1;if(null!=o){const t=new Array(a);for(let e=0;e<t.length;e++)t[e]=r[o[e]];i=Ip.getInnerMostAxes(i.length,a),l=NL({inputs:{x:e},attrs:{perm:o},backend:n});const s=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==s&&(u=!0)}return{transposed:l,originalAxes:s,axes:i,inputWasTransposed:u}}var DL,OL,zL,PL={kernelName:Ze,backendName:"wasm",setupFunc:function(e){ML=e.wasm.cwrap(Ze,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n;let o=t.dataIdMap.get(i.dataId).id,l=i;const{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=RL(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),Ip.assertAxesAreInnerMostDims("all",h,l.shape.length);const[p,f]=Ip.computeOutAndReduceShapes(l.shape,h),m=oa.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==oa.sizeFromShape(l.shape)){const e=t.dataIdMap.get(g.dataId).id;ML(o,m,e)}if(d&&t.disposeData(u.dataId),s){const e=Ip.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},$L={kernelName:Ye,backendName:"wasm",setupFunc:function(e){DL=e.wasm.cwrap(Ye,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n;let o=t.dataIdMap.get(i.dataId).id,l=i;const{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=RL(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),Ip.assertAxesAreInnerMostDims("any",h,l.shape.length);const[p,f]=Ip.computeOutAndReduceShapes(l.shape,h),m=oa.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==oa.sizeFromShape(l.shape)){const e=t.dataIdMap.get(g.dataId).id;DL(o,m,e)}if(d&&t.disposeData(u.dataId),s){const e=Ip.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},LL={kernelName:Je,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a}=r,{x:s}=n,i=t.dataIdMap.get(s.dataId).id;let o=i,l=s;const{transposed:u,axes:h,inputWasTransposed:c}=RL(s,a,t);if(c){const e=t.dataIdMap.get(u.dataId).id;e!==i&&(l=u,o=e)}const d=l.shape.slice(0,-1),p=t.makeOutput(d,"int32"),f=t.dataIdMap.get(p.dataId).id,m=oa.sizeFromShape(p.shape);return OL(o,fL[l.dtype],m,l.shape[h[0]],f),c&&t.disposeData(u.dataId),p},setupFunc:function(e){OL=e.wasm.cwrap(Je,null,["number","number","number","number","number"])}},VL={kernelName:st,backendName:"wasm",setupFunc:function(e){zL=e.wasm.cwrap(st,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,a=t.x,s=r.dataIdMap.get(a.dataId).id,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=n,h=Ip.computePool2DInfo(a.shape,i,o,1,l,u),c=h.filterHeight,d=h.filterWidth,p=h.padInfo.top,f=h.padInfo.right,m=h.padInfo.bottom,g=h.padInfo.left,y=h.strideHeight,b=h.strideWidth,x=h.inChannels;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);if(1!==h.dilationWidth||1!==h.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${h.dilationHeight}, ${h.dilationWidth}].`);const v=r.makeOutput(h.outShape,"float32"),A=r.dataIdMap.get(v.dataId).id;return zL(s,a.shape[0],a.shape[1],a.shape[2],c,d,p,f,m,g,y,b,x,A),v}};function BL(e){const{inputs:t,attrs:n}=e,{x:r}=t,{shape:a}=n,s=oa.sizeFromShape(r.shape),i=oa.inferFromImplicitShape(a,s);return oa.assert(s===oa.sizeFromShape(i),()=>`new shape: ${i}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var WL,jL={kernelName:Qn,backendName:"wasm",kernelFunc:BL},HL={kernelName:ut,backendName:"wasm",setupFunc:function(e){WL=e.wasm.cwrap(ut,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:i,transposeB:o}=r;if("float32"!==a.dtype||"float32"!==s.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const l=a.shape.length,u=s.shape.length,h=i?a.shape[l-2]:a.shape[l-1],c=o?s.shape[u-1]:s.shape[u-2],d=i?a.shape[l-1]:a.shape[l-2],p=o?s.shape[u-2]:s.shape[u-1],f=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=oa.sizeFromShape(f),y=oa.sizeFromShape(m);oa.assert(l>=2&&u>=2&&(g===y||1===g||1===y),()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${f}) and (${m}).`);const b=(g>y?a.shape.slice(0,-2):s.shape.slice(0,-2)).concat([d,p]);oa.assert(h===c,()=>`Error in matMul: inner shapes (${h}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);const x=o?[y,p,c]:[y,c,p],v=BL({inputs:{x:a},backend:n,attrs:{shape:i?[g,h,d]:[g,d,h]}}),A=BL({inputs:{x:s},backend:n,attrs:{shape:x}}),w=n.dataIdMap.get(v.dataId).id,k=n.dataIdMap.get(A.dataId).id,S=i?v.shape[2]:v.shape[1],I=o?A.shape[1]:A.shape[2],_=Math.max(g,y),E=n.makeOutput([_,S,I],v.dtype),T=n.dataIdMap.get(E.dataId).id,C=new Uint8Array(new Int32Array(v.shape).buffer),N=new Uint8Array(new Int32Array(A.shape).buffer);return WL(w,C,v.shape.length,k,N,A.shape.length,i,o,T),n.disposeData(v.dataId),n.disposeData(A.dataId),E.shape=b,E}};function UL(e){const{inputs:{x:t},attrs:{dtype:n},backend:r}=e,a=r.makeOutput(t.shape,n),s=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(s),a}var GL,qL={kernelName:pt,backendName:"wasm",kernelFunc:UL},KL=AL(ft),XL={kernelName:mt,backendName:"wasm",setupFunc:function(e){GL=e.wasm.cwrap(mt,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:s,clipValueMax:i}=r,o=n.dataIdMap.get(a.dataId).id,l=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(l.dataId).id;return GL(o,s,i,u),l}};function ZL(e,t,n,r,a){const s=Yi.isSliceContinous(r,t,n),i=oa.sizeFromShape(n),o=oa.computeStrides(r);if(s){const n=Yi.computeFlatOffset(t,o);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}const l=pi(r,a,"string"===a?Ip.fromUint8ToStringArray(e):e),u=pi(n,a);for(let h=0;h<u.size;++h){const e=u.indexToLoc(h),n=e.map((e,n)=>e+t[n]);u.set(l.get(...n),...e)}return"string"===a?Ip.fromStringArrayToUint8(u.values):u.values}function YL(e){const{inputs:t,backend:n}=e,r=oa.parseAxisParam(e.attrs.axis,t[0].shape)[0];let a=Ip.computeOutShape(t.map(e=>e.shape),r);const s=t.filter(e=>oa.sizeFromShape(e.shape)>0);if(1===s.length)return EL({inputs:{x:s[0]},backend:n});const i=n.makeOutput(a,t[0].dtype);if(0===oa.sizeFromShape(a))return i;const o=s.map(e=>e.shape);if(Ip.assertParamsConsistent(o,r),"string"===s[0].dtype){const e=s.map(e=>{const t=oa.sizeFromShape(e.shape.slice(r));return BL({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),o=e.map(e=>({vals:n.readSync(e.dataId),shape:e.shape}));a=Ip.computeOutShape(e.map(e=>e.shape),1);const l=function(e,t,n,r){const a=oa.getArrayFromDType(n,oa.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=oa.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const s="string"===n?Ip.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=s[i++]}r+=e.shape[1]})}return a}(o,a,t[0].dtype,1===e[0].shape[0]),u=Ip.computeOutShape(s.map(e=>e.shape),r);return i.shape=u,n.dataIdMap.get(i.dataId).stringBytes=Ip.fromStringArrayToUint8(l),e.forEach(e=>n.disposeData(e.dataId)),i}const l=oa.sizeFromShape(s[0].shape.slice(0,r));let u=0;const h=s.map(e=>{const t=oa.sizeFromShape(e.shape.slice(r));return u+=t,t}),c=s.map(e=>n.typedArrayFromHeap(e)),d=n.typedArrayFromHeap(i);for(let p=0;p<l;p++){let e=p*u;for(let t=0;t<c.length;t++){const n=h[t],r=p*n,a=c[t].subarray(r,r+n);d.set(a,e),e+=n}}return i}var JL,QL,eV,tV,nV,rV={kernelName:bt,backendName:"wasm",kernelFunc:YL},aV={kernelName:xt,backendName:"wasm",setupFunc:function(e){JL=e.wasm.cwrap(xt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s}=t,i=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(s.dataId).id,{strides:l,dilations:u,pad:h,dimRoundingMode:c,dataFormat:d}=n,p=Ip.convertConv2DDataFormat(d),f=Ip.computeConv2DInfo(a.shape,s.shape,l,u,h,c,!1,p),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,b=f.padInfo.right,x=f.padInfo.bottom,v=f.padInfo.left,A=f.dilationHeight,w=f.dilationWidth,k=f.strideHeight,S=f.strideWidth,I=f.inChannels,_=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);const T=r.makeOutput(f.outShape,"float32"),C=r.dataIdMap.get(T.dataId).id;return JL(i,a.shape[0],a.shape[1],a.shape[2],o,m,g,y,b,x,v,E,A,w,k,S,I,_,C),T}},sV={kernelName:At,backendName:"wasm",setupFunc:function(e){QL=e.wasm.cwrap(At,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{dy:a,filter:s}=n,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,inputShape:h}=r,c=Ip.convertConv2DDataFormat(l),d=Ip.computeConv2DInfo(h,s.shape,i,1,o,u,!1,c),{batchSize:p,filterHeight:f,filterWidth:m,inChannels:g,inHeight:y,inWidth:b,outChannels:x,outHeight:v,outWidth:A,strideHeight:w,strideWidth:k}=d,S=f-1-d.padInfo.top,I=m-1-d.padInfo.left,_="channelsLast"===d.dataFormat,E=oa.computeStrides(d.inShape),T=oa.computeStrides(a.shape),[C,N,M]=oa.computeStrides(s.shape),F=E[0],R=_?E[1]:E[2],D=_?E[2]:1,O=_?1:E[1],z=T[0],P=_?T[1]:T[2],$=_?T[2]:1,L=_?1:T[1],V=t.makeOutput(d.inShape,"float32"),B=t.dataIdMap.get(V.dataId).id,W=t.dataIdMap.get(a.dataId).id,j=t.dataIdMap.get(s.dataId).id;return QL(W,j,p,f,m,y,b,g,v,A,x,w,k,S,I,C,N,M,F,R,D,O,z,P,$,L,B),V}},iV=AL(It);(tV=eV||(eV={}))[tV.bilinear=0]="bilinear",tV[tV.nearest=1]="nearest";var oV,lV,uV,hV={kernelName:Tt,backendName:"wasm",setupFunc:function(e){nV=e.wasm.cwrap(Tt,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{method:a,extrapolationValue:s,cropSize:i}=r,{image:o,boxes:l,boxInd:u}=n,h=l.shape[0],[c,d]=i,p=[h,c,d,o.shape[3]];let f,m=t.dataIdMap.get(o.dataId);"float32"!==o.dtype&&(f=UL({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(f.dataId));const g=m.id,y=t.dataIdMap.get(l.dataId).id,b=t.dataIdMap.get(u.dataId).id,x=t.makeOutput(p,"float32"),v=t.dataIdMap.get(x.dataId).id,A=new Uint8Array(new Int32Array(o.shape).buffer);return nV(g,y,b,h,A,c,d,eV[a],s,v),null!=f&&t.disposeData(f.dataId),x}},cV={kernelName:Et,backendName:"wasm",setupFunc:function(e){oV=e.wasm.cwrap(Et,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r,l=a.shape.length;oa.assert("float32"===a.dtype||"int32"===a.dtype,()=>`cumsum does not support ${a.dtype} tensors in the WASM backend`);const u=Ip.getAxesPermutation([s],l);let h=a;null!==u&&(h=NL({inputs:{x:a},attrs:{perm:u},backend:n}));const c=Ip.getInnerMostAxes(1,l)[0];Ip.assertAxesAreInnerMostDims("cumsum",[c],l);const d=n.makeOutput(h.shape,h.dtype),p=h.shape[c],f=n.dataIdMap.get(h.dataId).id,m=n.dataIdMap.get(d.dataId).id;oV(f,i?1:0,o?1:0,p,m,fL[a.dtype]);let g=d;return null!==u&&(g=NL({inputs:{x:d},attrs:{perm:Ip.getUndoAxesPermutation(u)},backend:n}),n.disposeData(h.dataId),n.disposeData(d.dataId)),g}},dV={kernelName:Nt,backendName:"wasm",setupFunc:function(e){lV=e.wasm.cwrap(Nt,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{blockSize:s,dataFormat:i}=r;oa.assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);const o=a.shape[0],l=("NHWC"===i?a.shape[1]:a.shape[2])*s,u=("NHWC"===i?a.shape[2]:a.shape[3])*s,h=("NHWC"===i?a.shape[3]:a.shape[1])/(s*s),c="NHWC"===i?[o,l,u,h]:[o,h,l,u],d=t.makeOutput(c,"float32"),p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(oa.computeStrides(a.shape)).buffer),m=new Uint8Array(new Int32Array(c).buffer),g=new Uint8Array(new Int32Array(oa.computeStrides(c)).buffer),y=t.dataIdMap.get(d.dataId).id;return lV(p,s,"NHWC"===i?1:0,f,a.shape.length-1,m,g,c.length,y),d}},pV={kernelName:Mt,backendName:"wasm",setupFunc:function(e){uV=e.wasm.cwrap(Mt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s}=t,i=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(s.dataId).id,{strides:l,dilations:u,pad:h,dimRoundingMode:c}=n,d=Ip.computeConv2DInfo(a.shape,s.shape,l,null==u?[1,1]:u,h,c,!0),p=d.filterHeight,f=d.filterWidth,m=d.padInfo.top,g=d.padInfo.right,y=d.padInfo.bottom,b=d.padInfo.left,x=d.dilationHeight,v=d.dilationWidth,A=d.strideHeight,w=d.strideWidth,k=d.inChannels,S=d.outChannels,I="SAME"===d.padInfo.type?1:0;if("channelsLast"!==d.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${d.dataFormat}'. Please use 'channelsLast'.`);const _=r.makeOutput(d.outShape,"float32"),E=r.dataIdMap.get(_.dataId).id;return uV(i,a.shape[0],a.shape[1],a.shape[2],o,p,f,m,g,y,b,I,x,v,A,w,k,S,E),_}},fV=kL(jt,!1,"bool"),mV=AL(Ht);function gV(e){const{inputs:t,attrs:n,backend:r}=e,{input:a}=t,{dim:s}=n,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(oa.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),BL({inputs:{x:a},backend:r,attrs:{shape:o}})}var yV,bV,xV,vV,AV,wV,kV,SV,IV,_V,EV,TV,CV,NV,MV={kernelName:Ut,backendName:"wasm",kernelFunc:gV},FV={kernelName:Kt,backendName:"wasm",kernelFunc:function(e){const{attrs:{shape:t,value:n,dtype:r},backend:a}=e,s=a.makeOutput(t,r);return a.typedArrayFromHeap(s).fill(n),s}},RV={kernelName:Xt,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{image:r}=t,a=n.makeOutput(r.shape,r.dtype),s=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,[o,l,u,h]=r.shape;return yV(s,o,l,u,h,i),a},setupFunc:function(e){yV=e.wasm.cwrap(Xt,null,["number","number","number","number","number","number"])}},DV=AL(Zt),OV=kL(Yt,!1),zV={kernelName:Jt,backendName:"wasm",setupFunc:function(e){bV=e.wasm.cwrap(Jt,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:a}=r,{x:s,mean:i,variance:o,offset:l,scale:u}=n,h=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,p=null!=l?t.dataIdMap.get(l.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(s.shape,s.dtype);if(0===oa.sizeFromShape(s.shape))return m;const g=t.dataIdMap.get(m.dataId).id;return bV(h,c,d,p,f,a,g),m}},PV={kernelName:Kr,backendName:"wasm",setupFunc:function(e){xV=e.wasm.cwrap(Kr,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dataFormat:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=n,m=Ip.computeConv2DInfo(a.shape,s.shape,l,h,u,d),g=gL[p];if(null==g)throw new Error(p+" activation not yet supported for FusedConv2D in the wasm backend.");const y=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,x=m.outChannels;let v=0;if(null!=i){const e=r.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==x)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${x})`);v=e.id}const A=m.filterHeight,w=m.filterWidth,k=m.padInfo.top,S=m.padInfo.right,I=m.padInfo.bottom,_=m.padInfo.left,E=m.dilationHeight,T=m.dilationWidth,C=m.strideHeight,N=m.strideWidth,M=m.inChannels,F="SAME"===m.padInfo.type?1:0,R=m.batchSize,D=m.inHeight,O=m.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);const z=r.makeOutput(m.outShape,"float32"),P=r.dataIdMap.get(z.dataId).id,$=null==o?0:r.dataIdMap.get(o.dataId).id;return xV(y,R,D,O,b,A,w,v,k,S,I,_,F,E,T,C,N,M,x,g,$,f||0,P),z}},$V={kernelName:Xr,backendName:"wasm",setupFunc:function(e){vV=e.wasm.cwrap(Xr,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:h,dataFormat:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=n,m=Ip.computeConv2DInfo(a.shape,s.shape,l,h,u,d,!0),g=gL[p];if(null==g)throw new Error(p+" activation not yet supported for FusedDepthwiseConv2D in the wasm backend.");const y=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,x=m.outChannels;let v=0;if(null!=i){const e=r.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==x)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${x})`);v=e.id}const A=m.filterHeight,w=m.filterWidth,k=m.padInfo.top,S=m.padInfo.right,I=m.padInfo.bottom,_=m.padInfo.left,E=m.dilationHeight,T=m.dilationWidth,C=m.strideHeight,N=m.strideWidth,M=m.inChannels,F="SAME"===m.padInfo.type?1:0,R=m.batchSize,D=m.inHeight,O=m.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);const z=r.makeOutput(m.outShape,"float32"),P=r.dataIdMap.get(z.dataId).id,$=null==o?0:r.dataIdMap.get(o.dataId).id;return vV(y,R,D,O,b,A,w,v,k,S,I,_,F,E,T,C,N,M,x,g,$,f||0,P),z}},LV={kernelName:en,backendName:"wasm",setupFunc:function(e){AV=e.wasm.cwrap(en,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{params:r,indices:a}=n,[s,i,o,l]=Ui.prepareAndValidate(r,a),u=t.makeOutput(s,r.dtype);if(0===i)return u;const h=a.shape,c=h[h.length-1],d=t.dataIdMap.get(r.dataId).id,p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(u.dataId).id;return AV(d,fL[r.dtype],p,i,c,o,f,m),u}},VV={kernelName:Qt,backendName:"wasm",setupFunc:function(e){wV=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{x:a,indices:s}=n,{axis:i,batchDims:o}=r,l=oa.parseAxisParam(i,a.shape)[0],u=Ip.segment_util.collectGatherOpShapeInfo(a,s,l,o),h=BL({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),c=oa.sizeFromShape(s.shape),d=BL({inputs:{x:s},attrs:{shape:[u.batchSize,c/u.batchSize]},backend:t}),p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize],f=t.makeOutput(p,a.dtype);if(0===oa.sizeFromShape(a.shape))return f;const m=h.shape.length-1,g=t.dataIdMap.get(h.dataId).id,y=t.dataIdMap.get(d.dataId).id,b=t.dataIdMap.get(f.dataId).id,x=new Uint8Array(new Int32Array(oa.computeStrides(h.shape)).buffer),v=new Uint8Array(new Int32Array(oa.computeStrides(p)).buffer);return wV(g,fL[a.dtype],x,m,y,u.batchSize,v,b),t.disposeData(h.dataId),t.disposeData(d.dataId),f.shape=u.outputShape,f}},BV=kL(tn,!1,"bool"),WV=kL(nn,!1,"bool"),jV={kernelName:hn,backendName:"wasm",setupFunc:function(e){kV=e.wasm.cwrap(hn,null,["number","number","number"])},kernelFunc:function(e){const{inputs:{x:t},attrs:{alpha:n},backend:r}=e,a=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(t.shape,t.dtype);if(0!==oa.sizeFromShape(t.shape)){const e=r.dataIdMap.get(s.dataId).id;kV(a,n,e)}return s}},HV=kL(cn,!1,"bool"),UV=kL(dn,!1,"bool"),GV=AL(fn),qV=kL(gn,!1,"bool"),KV={kernelName:wn,backendName:"wasm",setupFunc:function(e){SV=e.wasm.cwrap(wn,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{reductionIndices:a,keepDims:s}=r,{x:i}=n;let o=t.dataIdMap.get(i.dataId).id,l=i;const{transposed:u,axes:h,originalAxes:c,inputWasTransposed:d}=RL(i,a,t);d&&(l=u,o=t.dataIdMap.get(u.dataId).id),Ip.assertAxesAreInnerMostDims("max",h,l.shape.length);const[p,f]=Ip.computeOutAndReduceShapes(l.shape,h),m=oa.sizeFromShape(f),g=t.makeOutput(p,i.dtype);if(0!==oa.sizeFromShape(l.shape)){const e=t.dataIdMap.get(g.dataId).id;SV(o,m,e)}if(d&&t.disposeData(u.dataId),s){const e=Ip.expandShapeToKeepDim(g.shape,c);g.shape=e}return g}},XV=kL(kn,!1),ZV={kernelName:Sn,backendName:"wasm",setupFunc:function(e){IV=e.wasm.cwrap(Sn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,a=t.x,s=r.dataIdMap.get(a.dataId).id,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=n,h=Ip.computePool2DInfo(a.shape,i,o,1,l,u),c=h.filterHeight,d=h.filterWidth,p=h.padInfo.top,f=h.padInfo.right,m=h.padInfo.bottom,g=h.padInfo.left,y=h.dilationHeight,b=h.dilationWidth,x=h.strideHeight,v=h.strideWidth,A=h.inChannels,w=h.outChannels;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const k=r.makeOutput(h.outShape,"float32"),S=r.dataIdMap.get(k.dataId).id;return IV(s,a.shape[0],a.shape[1],a.shape[2],c,d,p,f,m,g,y,b,x,v,A,w,S),k}},YV={kernelName:Cn,backendName:"wasm",setupFunc:function(e){_V=e.wasm.cwrap(Cn,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id;let l=o,u=i;const{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=RL(i,a,t);let f=c;if(p){const e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=Ip.getInnerMostAxes(f.length,u.shape.length))}Ip.assertAxesAreInnerMostDims("mean",f,u.shape.length);const[m,g]=Ip.computeOutAndReduceShapes(u.shape,f),y=oa.sizeFromShape(g);let b=u;"float32"!==u.dtype&&(b=UL({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(b.dataId).id);const x=t.makeOutput(m,"float32");if(0!==oa.sizeFromShape(u.shape)){const e=t.dataIdMap.get(x.dataId).id;_V(l,y,e)}if(p&&t.disposeData(h.dataId),s){const e=Ip.expandShapeToKeepDim(x.shape,d);x.shape=e}return"float32"!==u.dtype&&t.disposeData(b.dataId),x}},JV={kernelName:Nn,backendName:"wasm",setupFunc:function(e){EV=e.wasm.cwrap(Nn,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id;let l=o,u=i;const{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=RL(i,a,t);if(p){const e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e)}Ip.assertAxesAreInnerMostDims("min",c,u.shape.length);const[f,m]=Ip.computeOutAndReduceShapes(u.shape,c),g=oa.sizeFromShape(m),y=t.makeOutput(f,u.dtype);if(0!==oa.sizeFromShape(u.shape)){const e=t.dataIdMap.get(y.dataId).id;EV(l,g,e)}if(p&&t.disposeData(h.dataId),s){const e=Ip.expandShapeToKeepDim(y.shape,d);y.shape=e}return y}},QV=kL(Mn,!1);(CV=TV||(TV={}))[CV.reflect=0]="reflect",CV[CV.symmetric=1]="symmetric";var eB,tB={kernelName:Fn,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,mode:a}}=e,s=r.map((e,n)=>e[0]+t.shape[n]+e[1]),i=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(s,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),h=r.map(e=>e[0]),c=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(h).buffer),p=new Uint8Array(new Int32Array(c).buffer);return NV(i,u,t.shape.length,fL[t.dtype],d,p,TV[a],l),o},setupFunc:function(e){NV=e.wasm.cwrap(Fn,null,["number","array","number","number","array","array","number","number"])}},nB=kL(On,!0),rB=AL(zn);function aB(e,t){const n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],s=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:s,pValidOutputs:i}}var sB,iB,oB,lB,uB,hB,cB,dB,pB,fB,mB,gB,yB,bB,xB,vB,AB,wB,kB,SB={kernelName:$n,backendName:"wasm",setupFunc:function(e){eB=e.wasm.cwrap($n,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i}=r,{boxes:o,scores:l}=n,u=t.dataIdMap.get(o.dataId).id,h=t.dataIdMap.get(l.dataId).id,c=eB(u,h,s,a,i),{pSelectedIndices:d,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=aB(t,c);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",d)}},IB={kernelName:Ln,backendName:"wasm",setupFunc:function(e){sB=e.wasm.cwrap(Ln,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i,padToMaxOutputSize:o}=r,{boxes:l,scores:u}=n,h=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=sB(h,c,s,a,i,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=aB(t,d);return t.wasm._free(m),[t.makeOutput([f],"int32",p),t.makeOutput([],"int32",g)]}},_B={kernelName:Vn,backendName:"wasm",setupFunc:function(e){iB=e.wasm.cwrap(Vn,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:s,scoreThreshold:i,softNmsSigma:o}=r,{boxes:l,scores:u}=n,h=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=iB(h,c,s,a,i,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=aB(t,d);return t.wasm._free(g),[t.makeOutput([f],"int32",p),t.makeOutput([f],"float32",m)]}},EB=kL(Pn,!1,"bool"),TB={kernelName:Wn,backendName:"wasm",setupFunc:function(e){oB=e.wasm.cwrap(Wn,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:i,offValue:o}=r,l=n.makeOutput([...a.shape,s],"int32"),u=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(a.dataId);return oB(h.id,s,i,o,u),l}},CB={kernelName:Bn,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},NB={kernelName:jn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return gV({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{oa.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),oa.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=YL({inputs:t.map(e=>{const t=gV({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeData(e.dataId)),l}},MB={kernelName:Hn,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:a}}=e,s=r.map((e,n)=>e[0]+t.shape[n]+e[1]),i=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(s,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),h=r.map(e=>e[0]),c=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(h).buffer),p=new Uint8Array(new Int32Array(c).buffer);return lB(i,u,t.shape.length,fL[t.dtype],d,p,a,l),o},setupFunc:function(e){lB=e.wasm.cwrap(Hn,null,["number","array","number","number","array","array","number","number"])}},FB=kL(Gn,!1),RB={kernelName:qn,backendName:"wasm",setupFunc:function(e){uB=e.wasm.cwrap(qn,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,o=n.makeOutput(r.shape,"float32"),l=n.dataIdMap.get(o.dataId).id;return uB(s,i,l),o}},DB={kernelName:Kn,backendName:"wasm",setupFunc:function(e){hB=e.wasm.cwrap(Kn,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id;let l=o,u=i;const{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=RL(i,a,t);let f=c;if(p){const e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=Ip.getInnerMostAxes(f.length,u.shape.length))}Ip.assertAxesAreInnerMostDims("prod",f,u.shape.length);const[m,g]=Ip.computeOutAndReduceShapes(u.shape,f),y=oa.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(0!==oa.sizeFromShape(u.shape)){const e=t.dataIdMap.get(b.dataId).id;hB(l,y,fL[b.dtype],e)}if(p&&t.disposeData(h.dataId),s){const e=Ip.expandShapeToKeepDim(b.shape,d);b.shape=e}return b}},OB={kernelName:Xn,backendName:"wasm",kernelFunc:e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:i}=n,o=function(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return oa.makeZerosTypedArray(0,r);const a=Math.abs(Math.ceil((t-e)/n)),s=oa.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),s[0]=e;for(let i=1;i<s.length;i++)s[i]=s[i-1]+n;return s}(r,a,s,i),l=t.makeOutput([o.length],i);return t.typedArrayFromHeap(l).set(o),l}},zB=kL($t,!0),PB=AL(Jn),$B=AL(ar),LB={kernelName:nr,backendName:"wasm",setupFunc:function(e){cB=e.wasm.cwrap(nr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,u]=o,[h,c,d,p]=a.shape,f=[h,l,u,p];let m,g=t.dataIdMap.get(a.dataId);"float32"!==g.dtype&&(m=UL({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(m.dataId));const y=g.id,b=t.makeOutput(f,"float32");if(0===oa.sizeFromShape(a.shape))return b;const x=t.dataIdMap.get(b.dataId).id;return cB(y,h,c,d,p,l,u,s?1:0,i?1:0,x),null!=m&&t.disposeData(m.dataId),b}},VB={kernelName:sr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,i=oa.parseAxisParam(s,a.shape);if(0===a.shape.length)return EL({inputs:{x:a},backend:n});const o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,h=new Uint8Array(new Int32Array(i).buffer),c=new Uint8Array(new Int32Array(a.shape).buffer);dB(l,h,i.length,c,a.shape.length,u);const d=BL({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){dB=e.wasm.cwrap(sr,null,["number","array","number","array","number","number"])}},BB={kernelName:Gr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{radians:s,fillValue:i,center:o}=r,l=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(l.dataId).id,[c,d,p,f]=a.shape,[m,g]=Ip.getImageCenter(o,d,p),y="number"==typeof i?[i,i,i,0===i?0:255]:[...i,255],b=new Uint8Array(new Int32Array(y).buffer);return pB(u,c,d,p,f,s,m,g,b,y.length,h),l},setupFunc:function(e){pB=e.wasm.cwrap(Gr,null,["number","number","number","number","number","number","number","number","array","number","number"])}},WB=AL(ir);function jB(e){const{inputs:{x:t},attrs:{begin:n,size:r},backend:a}=e,[s,i]=Yi.parseSliceParams(t,n,r),o=Yi.isSliceContinous(t.shape,s,i),l=a.readSync(t.dataId),u=a.makeOutput(i,t.dtype),h=oa.computeStrides(t.shape),c=a.dataIdMap.get(u.dataId);if(o){const e=Yi.computeFlatOffset(s,h);return"string"===t.dtype?c.stringBytes=l.slice(e,e+oa.sizeFromShape(i)):a.typedArrayFromHeap(u).set(l.subarray(e,e+oa.sizeFromShape(i))),u}if("string"===t.dtype){const e=ZL(l,s,i,t.shape,t.dtype);return c.stringBytes=e,u}const d=a.typedArrayFromHeap(u),p=t.shape.length;if(2===p)!function(e,t,n,r,a){let s=0;const i=r[0],o=r[1],l=i+a[0];for(let u=i;u<l;u++){const r=u*t+o;n.set(e.subarray(r,r+a[1]),s),s+=a[1]}}(l,h[0],d,s,i);else if(3===p)!function(e,t,n,r,a,s){let i=0;const o=a[0],l=a[1],u=a[2],h=o+s[0],c=l+s[1];for(let d=o;d<h;d++)for(let a=l;a<c;a++){const o=d*t+a*n+u;r.set(e.subarray(o,o+s[2]),i),i+=s[2]}}(l,h[0],h[1],d,s,i);else if(4===p)!function(e,t,n,r,a,s,i){let o=0;const l=s[0],u=s[1],h=s[2],c=l+i[0],d=u+i[1],p=h+i[2],f=s[3];for(let m=l;m<c;m++)for(let s=u;s<d;s++)for(let l=h;l<p;l++){const u=m*t+s*n+l*r+f;a.set(e.subarray(u,u+i[3]),o),o+=i[3]}}(l,h[0],h[1],h[2],d,s,i);else{const e=ZL(l,s,i,t.shape,t.dtype);d.set(e)}return u}var HB=[wL,IL,_L,PL,$L,LL,VL,HL,qL,KL,XL,rV,aV,sV,iV,hV,cV,dV,pV,fV,mV,MV,FV,RV,DV,OV,vL,zV,PV,$V,LV,VV,BV,WV,CL,jV,HV,UV,GV,qV,KV,XV,ZV,YV,JV,QV,tB,nB,rB,SB,IB,_B,EB,TB,CB,NB,MB,FB,RB,DB,OB,zB,PB,$B,jL,LB,VB,BB,AL(or),WB,{kernelName:lr,backendName:"wasm",setupFunc:function(e){fB=e.wasm.cwrap(lr,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{indices:a,updates:s}=n,{shape:i}=r,o=t.makeOutput(i,s.dtype);if(0===oa.sizeFromShape(i))return o;const{sliceRank:l,numUpdates:u,sliceSize:h,strides:c,outputSize:d}=qi.calculateShapes(s,a,i),p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(s.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(o.dataId).id;return fB(p,f,fL[s.dtype],l,u,h,m,d,g),o}},{kernelName:ur,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(s.dataId).id,u=n.makeOutput(a.shape,a.dtype),h=n.dataIdMap.get(u.dataId).id,c=r.shape.length,d=0===c||c>1||1===a.shape.length?1:oa.sizeFromShape(a.shape.slice(1));return mB(i,o,l,d,h),u},setupFunc:function(e){mB=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){gB=e.wasm.cwrap(mr,null,["number","number"])},kernelFunc:function(e){const{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(a.dataId).id;return 0===oa.sizeFromShape(a.shape)||gB(r,s),a}},AL(dr),{kernelName:cr,backendName:"wasm",kernelFunc:jB},{kernelName:Ar,backendName:"wasm",setupFunc:function(e){yB=e.wasm.cwrap(Ar,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,a=t.dataIdMap.get(n.dataId).id,s=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(s.dataId).id,o=n.shape[r],l=oa.sizeFromShape(n.shape)/o;return 0===oa.sizeFromShape(s.shape)||yB(a,i,o,l),s}},{kernelName:vr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=n,o=oa.parseAxisParam(i,a.shape)[0],l=Ip.prepareSplitSize(a,s,o),u=new Array(a.shape.length).fill(0),h=a.shape.slice();return l.map(e=>{const t=[...h];t[o]=e;const n=jB({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[o]+=e,n})}},AL(yr),AL(Tr),kL(Er,!0),{kernelName:Hr,backendName:"wasm",setupFunc:function(e){bB=e.wasm.cwrap(Hr,null,["number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{alpha:a}=r,{x:s}=n,i=t.dataIdMap.get(s.dataId).id,o=t.makeOutput(s.shape,s.dtype),l=t.dataIdMap.get(o.dataId).id;return bB(i,a,l),o}},{kernelName:Cr,backendName:"wasm",setupFunc:function(e){xB=e.wasm.cwrap(Cr,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{x:a}=n;let{begin:s,end:i,strides:o}=r;null==o&&(o=new Array(s.length));const{beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:c,shrinkAxisMask:d}=r,p=Ip.slice_util.maskToAxes(h);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==h&&0!==c)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==h&&0!==d)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const f=a.shape.length-s.length,m=Ip.slice_util.maskToAxes(c),g=a.shape.slice();m.forEach(e=>{s[e]=0,i[e]=1,g.splice(e,0,1)});const y=BL({inputs:{x:a},attrs:{shape:g},backend:t}),{begin:b,end:x,strides:v}=Ip.slice_util.getNormalizedAxes(y.shape,p,f,s,i,o,l,u,h);s=b,i=x,o=v;const A=Ip.slice_util.maskToAxes(d);A.forEach(e=>{i[e]=s[e]+1,o[e]=1});const w=Ip.slice_util.computeOutShape(s,i,o),k=w.filter((e,t)=>-1===A.indexOf(t));if(o.every(e=>1===e)){const e=jB({inputs:{x:y},attrs:{begin:s,size:w},backend:t});t.disposeData(y.dataId);const n=BL({inputs:{x:e},attrs:{shape:k},backend:t});return t.disposeData(e.dataId),n}const S=t.makeOutput(k,"float32");if(!k.some(e=>0===e)){const e=t.dataIdMap.get(y.dataId).id,n=new Uint8Array(new Int32Array(oa.computeStrides(y.shape)).buffer),r=new Uint8Array(new Int32Array(s).buffer),a=new Uint8Array(new Int32Array(i).buffer),l=new Uint8Array(new Int32Array(o).buffer),u=new Uint8Array(new Int32Array(k).buffer),h=new Uint8Array(new Int32Array(oa.computeStrides(k)).buffer),c=t.dataIdMap.get(S.dataId).id;xB(e,n,y.shape.length,r,a,l,u,h,k.length,c)}t.disposeData(y.dataId);const I=BL({inputs:{x:S},attrs:{shape:k},backend:t});return t.disposeData(S.dataId),I}},kL(Rr,!0),{kernelName:br,backendName:"wasm",setupFunc:function(e){vB=e.wasm.cwrap(br,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:s}=r,{x:i}=n,o=t.dataIdMap.get(i.dataId).id;let l=o,u=i;const{transposed:h,axes:c,originalAxes:d,inputWasTransposed:p}=RL(i,a,t);let f=c;if(p){const e=t.dataIdMap.get(h.dataId).id;e!==o&&(u=h,l=e,f=Ip.getInnerMostAxes(f.length,u.shape.length))}Ip.assertAxesAreInnerMostDims("sum",f,u.shape.length);const[m,g]=Ip.computeOutAndReduceShapes(u.shape,f),y=oa.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(0!==oa.sizeFromShape(u.shape)){const e=t.dataIdMap.get(b.dataId).id;vB(l,y,e)}if(p&&t.disposeData(h.dataId),s){const e=Ip.expandShapeToKeepDim(b.shape,d);b.shape=e}return b}},AL(Dr),AL(Or),{kernelName:zr,backendName:"wasm",setupFunc:function(e){AB=e.wasm.cwrap(zr,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,s=n.dataIdMap.get(a.dataId).id,{reps:i}=r,o=new Array(a.shape.length);for(let d=0;d<o.length;d++)o[d]=a.shape[d]*i[d];const l=new Uint8Array(new Int32Array(a.shape).buffer),u=new Uint8Array(new Int32Array(o).buffer),h=n.makeOutput(o,a.dtype),c=n.dataIdMap.get(h.dataId).id;return AB(s,l,a.shape.length,u,o.length,fL[h.dtype],c),h}},{kernelName:Pr,backendName:"wasm",setupFunc:function(e){wB=e.wasm.cwrap(Pr,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{k:a,sorted:s}=n,i=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=a;const u=t.makeOutput(l,r.dtype),h=t.dataIdMap.get(u.dataId).id,c=t.makeOutput(l,"int32"),d=t.dataIdMap.get(c.dataId).id;return wB(i,o,r.shape.length,fL[r.dtype],a,s,h,d),[u,c]}},{kernelName:$r,backendName:"wasm",setupFunc:function(e){kB=e.wasm.cwrap($r,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{image:a,transforms:s}=n,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=r,[h,c,d,p]=a.shape,[f,m]=null!=u?u:[c,d],g=[h,f,m,p],y=new Uint8Array(new Int32Array(oa.computeStrides(a.shape)).buffer),b=t.makeOutput(g,a.dtype),x=t.dataIdMap.get(b.dataId).id,v=t.dataIdMap.get(a.dataId).id,A=t.dataIdMap.get(s.dataId).id,w="nearest"===i?1:2;let k;switch(o){case"constant":k=1;break;case"reflect":k=2;break;case"wrap":k=3;break;case"nearest":k=4;break;default:k=1}return kB(v,A,s.shape[0]>1,h,f,m,p,d,c,y,a.shape.length-1,w,k,l,x),b}},FL,{kernelName:Br,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a.shape[s],o=a.shape.length,l=new Array(o-1);let u=0;for(let p=0;p<o;p++)p!==s&&(l[u++]=a.shape[p]);const h=new Array(i),c=new Array(o).fill(0),d=a.shape.slice();d[s]=1;for(let p=0;p<h.length;p++)c[s]=p,h[p]=jB({inputs:{x:a},attrs:{begin:c,size:d},backend:n});return h.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:l}))}},{kernelName:jr,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}];for(const sH of HB)ta(sH);var UB=Ve();UB.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))),UB.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(UB.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var GB=g(V()),qB=g(B()),KB=class extends j{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.init(),this.dataIdMap=new W(this,Po())}write(e,t,n){const r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const t=oa.now();return e(),{kernelMs:oa.now()-t}}move(e,t,n,r,a){const s=this.dataIdNextNumber++;if("string"===r)return void this.dataIdMap.set(e,{id:s,stringBytes:t,shape:n,dtype:r,memoryOffset:null,refCount:a});const i=oa.sizeFromShape(n),o=i*oa.bytesPerElement(r),l=this.wasm._malloc(o);this.dataIdMap.set(e,{id:s,memoryOffset:l,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(s,i,l),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e){const{memoryOffset:t,dtype:n,shape:r,stringBytes:a}=this.dataIdMap.get(e);return"string"===n?a:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype "+t)}}(this.wasm.HEAPU8.slice(t,t+oa.sizeFromShape(r)*oa.bytesPerElement(n)).buffer,n)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){const n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n){let r;if(null==n)r=this.write(null,e,t);else{const a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});const s=oa.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,s,n)}return{dataId:r,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){const r=this.wasm.HEAPU8.buffer,{memoryOffset:a}=this.dataIdMap.get(n),s=oa.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,a,s);case"int32":return new Int32Array(r,a,s);case"bool":return new Uint8Array(r,a,s);default:throw new Error("Unknown dtype "+t)}}};function XB(e,t,n){if(null!=YB)return YB;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=QB&&null!=QB[r]?QB[r]:n+r}var ZB=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],YB=null,JB=null,QB={},eW=!1,tW=!1;function nW(e,t=!1){if(Oo("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),eW)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");YB=e,tW=t}function rW(e,t=!1){if(eW)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)JB=e;else{QB=e;const t=ZB.filter(e=>null==QB[e]);if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}tW=t}var aW="3.7.0";function sW(e,t,n=!1){if(e.beginPath(),t.slice(1).forEach(({x:n,y:r},a)=>{const s=t[a];e.moveTo(s.x,s.y),e.lineTo(n,r)}),n){const n=t[t.length-1],r=t[0];if(!n||!r)return;e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)}e.stroke()}Zo("wasm",async()=>{const{wasm:e}=await async function(){const[e,t]=await Promise.all([Ve().getAsync("WASM_HAS_SIMD_SUPPORT"),Ve().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{const a={};var s;a.locateFile=(n,r)=>{if(n.endsWith(".worker.js")){const e=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(e)}return n.endsWith(".wasm")?XB(e,t,null!=JB?JB:r):r+n},tW&&(a.instantiateWasm=(s=XB(e,t,null!=JB?JB:""),(e,t)=>(oa.fetch(s,{credentials:"same-origin"}).then(n=>{n.ok||e.env.a(`failed to load wasm binary file at '${s}'`),n.arrayBuffer().then(n=>{WebAssembly.instantiate(n,e).then(e=>{t(e.instance,e.module)})})}),{})));let i,o=!1;a.onAbort=()=>{o||eW||(eW=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==YB?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+GB.default.toString()],{type:"text/javascript"}),i=(0,GB.default)(a)):i=(0,qB.default)(a),i.then(e=>{o=!0,eW=!1,e.tfjs={init:e.cwrap("init",null,[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})})})}();return new KB(e)},2),s({},{AnchorPosition:()=>BW,DrawBox:()=>XW,DrawBoxOptions:()=>KW,DrawFaceLandmarks:()=>Cj,DrawFaceLandmarksOptions:()=>Tj,DrawTextField:()=>qW,DrawTextFieldOptions:()=>GW,drawContour:()=>sW,drawDetections:()=>ZW,drawFaceExpressions:()=>Ej,drawFaceLandmarks:()=>Nj}),s({},{computeReshapedDimensions:()=>gW,getCenterPoint:()=>yW,isDimensions:()=>mW,isEven:()=>pW,isFloat:()=>dW,isTensor:()=>oW,isTensor1D:()=>lW,isTensor2D:()=>uW,isTensor3D:()=>hW,isTensor4D:()=>cW,isValidNumber:()=>xW,isValidProbablitiy:()=>vW,range:()=>bW,round:()=>fW});var iW=class{constructor(e,t){if(!xW(e)||!xW(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new iW(1/this.width,1/this.height)}};function oW(e,t){return e instanceof Pa&&e.shape.length===t}function lW(e){return oW(e,1)}function uW(e){return oW(e,2)}function hW(e){return oW(e,3)}function cW(e){return oW(e,4)}function dW(e){return e%1!=0}function pW(e){return e%2==0}function fW(e,t=2){const n=10**t;return Math.floor(e*n)/n}function mW(e){return e&&e.width&&e.height}function gW({width:e,height:t},n){const r=n/Math.max(t,e);return new iW(Math.round(e*r),Math.round(t*r))}function yW(e){return e.reduce((e,t)=>e.add(t),new AW(0,0)).div(new AW(e.length,e.length))}function bW(e,t,n){return Array(e).fill(0).map((e,r)=>t+r*n)}function xW(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||0===e}function vW(e){return xW(e)&&e>=0&&e<=1}var AW=class{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(e){return new AW(this.x+e.x,this.y+e.y)}sub(e){return new AW(this.x-e.x,this.y-e.y)}mul(e){return new AW(this.x*e.x,this.y*e.y)}div(e){return new AW(this.x/e.x,this.y/e.y)}abs(){return new AW(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new AW(Math.floor(this.x),Math.floor(this.y))}},wW=class{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(xW)}static assertIsValidBox(e,t,n=!1){if(!wW.isRect(e))throw new Error(`${t} - invalid box: ${JSON.stringify(e)}, expected object with properties x, y, width, height`);if(!n&&(e.width<0||e.height<0))throw new Error(`${t} - width (${e.width}) and height (${e.height}) must be positive numbers`)}constructor(e,t=!0){const n=e||{},r=[n.left,n.top,n.right,n.bottom].every(xW),a=[n.x,n.y,n.width,n.height].every(xW);if(!a&&!r)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));const[s,i,o,l]=a?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top];wW.assertIsValidBox({x:s,y:i,width:o,height:l},"Box.constructor",t),this._x=s,this._y=i,this._width=o,this._height=l}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new AW(this.left,this.top)}get topRight(){return new AW(this.right,this.top)}get bottomLeft(){return new AW(this.left,this.bottom)}get bottomRight(){return new AW(this.right,this.bottom)}round(){const[e,t,n,r]=[this.x,this.y,this.width,this.height].map(e=>Math.round(e));return new wW({x:e,y:t,width:n,height:r})}floor(){const[e,t,n,r]=[this.x,this.y,this.width,this.height].map(e=>Math.floor(e));return new wW({x:e,y:t,width:n,height:r})}toSquare(){let{x:e,y:t,width:n,height:r}=this;const a=Math.abs(n-r);return n<r&&(e-=a/2,n+=a),r<n&&(t-=a/2,r+=a),new wW({x:e,y:t,width:n,height:r})}rescale(e){const t=mW(e)?e.width:e,n=mW(e)?e.height:e;return new wW({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})}pad(e,t){const[n,r,a,s]=[this.x-e/2,this.y-t/2,this.width+e,this.height+t];return new wW({x:n,y:r,width:a,height:s})}clipAtImageBorders(e,t){const{x:n,y:r,right:a,bottom:s}=this,i=Math.max(n,0),o=Math.max(r,0),l=s-o,u=Math.min(a-i,e-i),h=Math.min(l,t-o);return new wW({x:i,y:o,width:u,height:h}).floor()}shift(e,t){const{width:n,height:r}=this;return new wW({x:this.x+e,y:this.y+t,width:n,height:r})}padAtBorders(e,t){const n=this.width+1,r=this.height+1;let a=n,s=r,i=this.left,o=this.top,l=this.right,u=this.bottom;return l>t&&(a=-l+t+n,l=t),u>e&&(s=-u+e+r,u=e),i<1&&(s=2-i,i=1),o<1&&(s=2-o,o=1),{dy:1,edy:s,dx:1,edx:a,y:o,ey:u,x:i,ex:l,w:n,h:r}}calibrate(e){return new wW({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()}},kW=class extends wW{constructor(e,t,n,r,a=!1){super({left:e,top:t,right:n,bottom:r},a)}},SW=class{constructor(e,t,n,r,a){this._imageDims=new iW(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new wW(r).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new wW(this._box).rescale(this.imageDims.reverse())}forSize(e,t){return new SW(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})}},IW=class extends SW{constructor(e,t,n){super(e,e,"",t,n)}forSize(e,t){const{score:n,relativeBox:r,imageDims:a}=super.forSize(e,t);return new IW(n,r,a)}};function _W(e,t,n=!0){const r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function EW(e,t){return Vo(()=>{const[n,r,a]=t,s=Eu([...e.shape.slice(0,3),1],n,"float32"),i=Eu([...e.shape.slice(0,3),1],r,"float32"),o=Eu([...e.shape.slice(0,3),1],a,"float32"),l=Fl([s,i,o],3);return eh(e,l)})}function TW(e){return 1/(1+Math.exp(-e))}var CW,NW=class extends wW{constructor(e,t,n,r,a=!1){super({x:e,y:t,width:n,height:r},a)}},MW=class{constructor(e,t,n=new AW(0,0)){const{width:r,height:a}=t;this._imgDims=new iW(r,a),this._shift=n,this._positions=e.map(e=>e.mul(new AW(r,a)).add(n))}get shift(){return new AW(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new AW(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new AW(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){const n=e instanceof IW?e.box.floor():new wW(e);return this.shiftBy(n.x,n.y).align(null,t)}const{useDlibAlignment:n,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...t};return n?this.alignDlib():this.alignMinBbox(r)}alignDlib(){const e=this.getRefPointsForAlignment(),[t,n,r]=e,a=e=>r.sub(e).magnitude(),s=(a(t)+a(n))/2,i=Math.floor(s/.45),o=yW(e),l=Math.floor(Math.max(0,o.x-.5*i)),u=Math.floor(Math.max(0,o.y-.43*i));return new NW(l,u,Math.min(i,this.imageWidth+l),Math.min(i,this.imageHeight+u))}alignMinBbox(e){const t=function(e){const t=e.map(e=>e.x),n=e.map(e=>e.y),r=t.reduce((e,t)=>t<e?t:e,1/0),a=n.reduce((e,t)=>t<e?t:e,1/0),s=t.reduce((e,t)=>e<t?t:e,0),i=n.reduce((e,t)=>e<t?t:e,0);return new kW(r,a,s,i)}(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},FW=class extends MW{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(yW)}};function RW(e){return e.detection instanceof IW}function DW(){const e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function OW(e){let t="";if(!e)try{e=a("fs")}catch(aH){t=aH.toString()}return{readFile:e?t=>new Promise((n,r)=>{e.readFile(t,(e,t)=>e?r(e):n(t))}):()=>{throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function zW(){const e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=global.Video||global.HTMLVideoElement,r=global.fetch,a=OW();return{Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},createVideoElement:()=>{if(n)return new n;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},fetch:r,...a}}function PW(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function $W(){return"object"==typeof global&&void 0!==e&&"undefined"!=typeof process&&!!process.version}function LW(e){CW=e}function VW(){return PW()?LW(DW()):$W()?LW(zW()):null}var BW,WW,jW={getEnv:function(){if(!CW)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return CW},setEnv:LW,initialize:VW,createBrowserEnv:DW,createFileSystem:OW,createNodejsEnv:zW,monkeyPatch:function(e){if(CW||VW(),!CW)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");const{Canvas:t=CW.Canvas,Image:n=CW.Image}=e;CW.Canvas=t,CW.Image=n,CW.createCanvasElement=e.createCanvasElement||(()=>new t),CW.createImageElement=e.createImageElement||(()=>new n),CW.ImageData=e.ImageData||CW.ImageData,CW.Video=e.Video||CW.Video,CW.fetch=e.fetch||CW.fetch,CW.readFile=e.readFile||CW.readFile},isBrowser:PW,isNodejs:$W};function HW(e){return jW.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function UW(e){const{Canvas:t,CanvasRenderingContext2D:n}=jW.getEnv();if(e instanceof n)return e;const r=HW(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");const a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}VW(),(WW=BW||(BW={})).TOP_LEFT="TOP_LEFT",WW.TOP_RIGHT="TOP_RIGHT",WW.BOTTOM_LEFT="BOTTOM_LEFT",WW.BOTTOM_RIGHT="BOTTOM_RIGHT";var GW=class{constructor(e={}){const{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:a,fontStyle:s,padding:i}=e;this.anchorPosition=t||BW.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=s||"Georgia",this.padding=i||4}},qW=class{constructor(e,t,n={}){this.text="string"==typeof e?[e]:e instanceof qW?e.text:e,this.anchor=t,this.options=new GW(n)}measureWidth(e){const{padding:t}=this.options;return this.text.map(t=>e.measureText(t).width).reduce((e,t)=>e<t?t:e,0)+2*t}measureHeight(){const{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){const{anchorPosition:n}=this.options,r=n===BW.BOTTOM_RIGHT||n===BW.TOP_RIGHT,a=n===BW.BOTTOM_LEFT||n===BW.BOTTOM_RIGHT,s=this.measureWidth(e),i=this.measureHeight(),o=r?this.anchor.x-s:this.anchor.x,l=a?this.anchor.y-i:this.anchor.y;if(t){const{width:e,height:n}=t;return{x:Math.max(Math.min(o,e-s),0),y:Math.max(Math.min(l,n-i),0)}}return{x:o,y:l}}draw(e){const t=HW(e),n=UW(t),{backgroundColor:r,fontColor:a,fontSize:s,fontStyle:i,padding:o}=this.options;n.font=`${s}px ${i}`;const l=this.measureWidth(n),u=this.measureHeight();n.fillStyle=r;const h=this.getUpperLeft(n,t);n.fillRect(h.x,h.y,l,u),n.fillStyle=a,this.text.forEach((e,t)=>{n.fillText(e,o+h.x,o+h.y+(t+1)*s)})}},KW=class{constructor(e={}){const{boxColor:t,lineWidth:n,label:r,drawLabelOptions:a}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r,this.drawLabelOptions=new GW({anchorPosition:BW.BOTTOM_LEFT,backgroundColor:this.boxColor,...a})}},XW=class{constructor(e,t={}){this.box=new wW(e),this.options=new KW(t)}draw(e){const t=UW(e),{boxColor:n,lineWidth:r}=this.options,{x:a,y:s,width:i,height:o}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(a,s,i,o);const{label:l}=this.options;l&&new qW([l],{x:a-r/2,y:s},this.options.drawLabelOptions).draw(e)}};function ZW(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{const n=t instanceof IW?t.score:RW(t)?t.detection.score:void 0,r=t instanceof IW?t.box:RW(t)?t.detection.box:new wW(t),a=n?""+fW(n):void 0;new XW(r,{label:a}).draw(e)})}function YW(e){const{Image:t,Video:n}=jW.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function JW(e){const{Image:t,Video:n}=jW.getEnv();return e instanceof t?new iW(e.naturalWidth,e.naturalHeight):e instanceof n?new iW(e.videoWidth,e.videoHeight):new iW(e.width,e.height)}function QW({width:e,height:t}){const{createCanvasElement:n}=jW.getEnv(),r=n();return r.width=e,r.height=t,r}function ej(e,t){const{ImageData:n}=jW.getEnv();if(!(e instanceof n||YW(e)))throw new Error("createCanvasFromMedia - media has not finished loading yet");const{width:r,height:a}=t||JW(e),s=QW({width:r,height:a});return e instanceof n?UW(s).putImageData(e,0,0):UW(s).drawImage(e,0,0,r,a),s}function tj(e){const{Image:t,Canvas:n,Video:r}=jW.getEnv();return e instanceof t||e instanceof n||e instanceof r}var nj=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((e,t)=>{if(hW(e))return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape);if(cW(e)){const n=e.shape[0];if(1!==n)throw new Error(`NetInput - tf.Tensor4D with batchSize ${n} passed, but not supported in input array`);return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape.slice(1))}const n=e instanceof jW.getEnv().Canvas?e:ej(e);this._canvases[t]=n,this._inputDimensions[t]=[n.height,n.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return bW(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return gW({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,Vo(()=>{const n=bW(this.batchSize,0,1).map(n=>{const r=this.getInput(n);if(r instanceof Pa){let n=cW(r)?r:ku(r);return n=function(e,t=!1){return Vo(()=>{const[n,r]=e.shape.slice(1);if(n===r)return e;const a=Math.abs(n-r),s=Math.round(a*(t?.5:1)),i=n>r?2:1,o=t=>{const n=e.shape.slice();return n[i]=t,Eu(n,0,"float32")},l=o(s),u=a-l.shape[i],h=[t&&u?o(u):null,e,l].filter(e=>!!e).map(e=>fi(e,"float32"));return Fl(h,i)})}(n,t),n.shape[1]===e&&n.shape[2]===e||(n=lp.resizeBilinear(n,[e,e],!1,!1)),n.as3D(e,e,3)}if(r instanceof jW.getEnv().Canvas)return Li.fromPixels(function(e,t,n=!1){const{Image:r,Canvas:a}=jW.getEnv();if(!(e instanceof r||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return QW({width:1,height:1});const s=JW(e),i=t/Math.max(s.height,s.width),o=i*s.width,l=i*s.height,u=QW({width:t,height:t}),h=e instanceof a?e:ej(e),c=Math.abs(o-l)/2,d=n&&o<l?c:0,p=n&&l<o?c:0;return h.width>0&&h.height>0&&UW(u).drawImage(h,d,p,o,l),u}(r,e,t));throw new Error(`toBatchTensor - at batchIdx ${n}, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ${r}`)});return Cc(n.map(e=>fi(e,"float32"))).as4D(this.batchSize,e,e,3)})}};async function rj(e){if(e instanceof nj)return e;const t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");const n=t=>Array.isArray(e)?` at input index ${t}:`:"",r=t.map(HW);return r.forEach((e,r)=>{if(!tj(e)&&!hW(e)&&!cW(e)){if("string"==typeof t[r])throw new Error(`toNetInput -${n(r)} string passed, but could not resolve HTMLElement for element id ${t[r]}`);throw new Error(`toNetInput -${n(r)} expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id`)}if(cW(e)){const t=e.shape[0];if(1!==t)throw new Error(`toNetInput -${n(r)} tf.Tensor4D with batchSize ${t} passed, but not supported in input array`)}}),await Promise.all(r.map(e=>{return tj(e)&&(t=e,new Promise((e,n)=>{if(t instanceof jW.getEnv().Canvas||YW(t))return e(null);function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",a),e.currentTarget.removeEventListener("error",r),n(e))}function a(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",a),t.currentTarget.removeEventListener("error",r),e(t))}t.addEventListener("load",a),t.addEventListener("error",r)}));var t})),new nj(r,Array.isArray(e))}function aj(e,t){const n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};const r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter(e=>e),s=e.endsWith(".json")?a[a.length-1]:n;let i=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:"/"===i?"/"+s:`${i}/${s}`}}var sj=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){const{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){const{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof La)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof La))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{const n=Ss(t.dataSync());t.dispose(),this.reassignParamFromPath(e,n)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){e instanceof Float32Array?this.extractWeights(e):await this.loadFromUri(e)}async loadFromUri(e){if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromUri - expected model uri");const t=await async function(e,t){const{manifestUri:n,modelBaseUri:r}=aj(e,t),a=await async function(e){return(await async function(e,t){const{fetch:n}=jW.getEnv(),r=await n(e,void 0);if(!(r.status<400))throw new Error(`failed to fetch: (${r.status}) ${r.statusText}, from url: ${r.url}`);return r}(e)).json()}(n);return yi.loadWeights(a,r)}(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");const{readFile:t}=jW.getEnv(),{manifestUri:n,modelBaseUri:r}=aj(e,this.getDefaultModelName()),a=yi.weightsLoaderFactory(e=>Promise.all(e.map(e=>t(e).then(e=>e.buffer)))),s=JSON.parse((await t(n)).toString()),i=await a(s,r);this.loadFromWeightMap(i)}loadFromWeightMap(e){const{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){const{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");const t=e.split("/").reduce((t,n)=>{if(!t.nextObj.hasOwnProperty(n))throw new Error(`traversePropertyPath - object does not have property ${n}, for path ${e}`);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!(n&&r&&n[r]instanceof Pa))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}}};function ij(e,t,n){return Vo(()=>{let r=cc(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Qo(r,t.bias),r})}function oj(e,t,n=!1){return Vo(()=>{const r=ec(n?Qo(Zl(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):ij(e,t.conv0,[2,2])),a=ij(r,t.conv1,[1,1]),s=ij(ec(Qo(r,a)),t.conv2,[1,1]);return ec(Qo(r,Qo(a,s)))})}function lj(e,t,n=!1,r=!0){return Vo(()=>{const a=ec(n?Qo(Zl(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):ij(e,t.conv0,r?[2,2]:[1,1])),s=ij(a,t.conv1,[1,1]),i=ij(ec(Qo(a,s)),t.conv2,[1,1]),o=ij(ec(Qo(a,Qo(s,i))),t.conv3,[1,1]);return ec(Qo(a,Qo(s,Qo(i,o))))})}function uj(e,t,n="same",r=!1){return Vo(()=>{const a=Qo(Zl(e,t.filters,[1,1],n),t.bias);return r?ec(a):a})}function hj(e,t){Object.keys(e).forEach(n=>{t.some(e=>e.originalPath===n)||e[n].dispose()})}function cj(e,t){return(n,r,a,s)=>{const i=Oc(e(n*r*a*a),[a,a,n,r]),o=Rc(e(r));return t.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:i,bias:o}}}function dj(e,t){return(n,r,a)=>{const s=Dc(e(n*r),[n,r]),i=Rc(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:s,bias:i}}}var pj=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function fj(e,t){return(n,r,a)=>{const s=Oc(e(9*n),[3,3,n,1]),i=Oc(e(n*r),[1,1,n,r]),o=Rc(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new pj(s,i,o)}}function mj(e){return t=>{const n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new pj(n,r,a)}}function gj(e,t){return(n,r,a)=>{const s=e[n];if(!oW(s,r))throw new Error(`expected weightMap[${n}] to be a Tensor${r}D, instead have ${s}`);return t.push({originalPath:n,paramPath:a||n}),s}}function yj(e){let t=e;return{extractWeights:function(e){const n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function bj(e,t){const n=cj(e,t),r=fj(e,t);function a(e,t,a,s=!1){return{conv0:s?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,s=!1){const{conv0:i,conv1:o,conv2:l}=a(e,t,n,s);return{conv0:i,conv1:o,conv2:l,conv3:r(t,t,n+"/conv3")}}}}function xj(e){return t=>({filters:e(t+"/filters",4),bias:e(t+"/bias",1)})}function vj(e,t){const n=gj(e,t),r=xj(n),a=mj(n);return{extractDenseBlock3Params:function(e,t=!1){return{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t=!1){return{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var Aj=class extends sj{constructor(){super("FaceFeatureExtractor")}forwardInput(e){const{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Vo(()=>{let n=lj(EW(fi(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=lj(n,t.dense1),n=lj(n,t.dense2),n=lj(n,t.dense3),n=Nl(n,[7,7],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await rj(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return function(e){const t=[],{extractDenseBlock4Params:n}=vj(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return hj(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){const t=[],{extractWeights:n,getRemainingWeights:r}=yj(e),{extractDenseBlock4Params:a}=bj(n,t),s=a(3,32,"dense0",!0),i=a(32,64,"dense1"),o=a(64,128,"dense2"),l=a(128,256,"dense3");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{dense0:s,dense1:i,dense2:o,dense3:l}}}(e)}};function wj(e,t){return Vo(()=>Qo(Oi(e,t.weights),t.bias))}function kj(e){const t={},n={};return Object.keys(e).forEach(r=>{(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var Sj=class extends sj{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){const{params:t}=this;if(!t)throw new Error(this._name+" - load model before inference");return Vo(()=>{const n=e instanceof nj?this.faceFeatureExtractor.forwardInput(e):e;return wj(n.as2D(n.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){const{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e,t,n){const r=[],{extractWeights:a,getRemainingWeights:s}=yj(e),i=dj(a,r)(t,n,"fc");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:i}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){const{featureExtractorMap:t,classifierMap:n}=kj(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){const t=[],n=gj(e,t),r={fc:{weights:n("fc/weights",2),bias:n("fc/bias",1)}};return hj(e,t),{params:r,paramMappings:t}}(n)}extractParams(e){const t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),s=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)}},Ij=["neutral","happy","sad","angry","fearful","disgusted","surprised"],_j=class{constructor(e){if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);Ij.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return Ij.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}};function Ej(e,t,n=.1,r){(Array.isArray(t)?t:[t]).forEach(t=>{const a=t instanceof _j?t:t.expressions instanceof _j?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");const s=a.asSortedArray().filter(e=>e.probability>n),i=RW(t)?t.detection.box.bottomLeft:r||new AW(0,0);new qW(s.map(e=>`${e.expression} (${fW(e.probability)})`),i).draw(e)})}var Tj=class{constructor(e={}){const{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:a,pointSize:s,pointColor:i}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=s||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=i||"rgba(255, 0, 255, 1)"}},Cj=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new Tj(t)}draw(e){const t=UW(e),{drawLines:n,drawPoints:r,lineWidth:a,lineColor:s,pointSize:i,pointColor:o}=this.options;n&&this.faceLandmarks instanceof FW&&(t.strokeStyle=s,t.lineWidth=a,sW(t,this.faceLandmarks.getJawOutline()),sW(t,this.faceLandmarks.getLeftEyeBrow()),sW(t,this.faceLandmarks.getRightEyeBrow()),sW(t,this.faceLandmarks.getNose()),sW(t,this.faceLandmarks.getLeftEye(),!0),sW(t,this.faceLandmarks.getRightEye(),!0),sW(t,this.faceLandmarks.getMouth(),!0)),r&&(t.strokeStyle=o,t.fillStyle=o,this.faceLandmarks.positions.forEach(e=>{t.beginPath(),t.arc(e.x,e.y,i,0,2*Math.PI),t.fill()}))}};function Nj(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{const n=t instanceof MW?t:RW(r=t)&&r.landmarks instanceof MW&&r.unshiftedLandmarks instanceof MW&&r.alignedRect instanceof IW?t.landmarks:void 0;var r;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Cj(n).draw(e)})}function Mj(e,t,n){return Qo(Zl(e,t.filters,n,"same"),t.bias)}function Fj(e,t,n=!0){let r=n?ec(e):e;return r=ij(r,t.separable_conv0,[1,1]),r=ij(ec(r),t.separable_conv1,[1,1]),r=gh(r,[3,3],[2,2],"same"),r=Qo(r,Mj(e,t.expansion_conv,[2,2])),r}var Rj,Dj,Oj=class extends sj{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){const{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return Vo(()=>{const n=EW(fi(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255);let r=ec(Mj(n,t.entry_flow.conv_in,[2,2]));return r=Fj(r,t.entry_flow.reduction_block_0,!1),r=Fj(r,t.entry_flow.reduction_block_1),bW(this._numMainBlocks,0,1).forEach(e=>{r=function(e,t){let n=ij(ec(e),t.separable_conv0,[1,1]);return n=ij(ec(n),t.separable_conv1,[1,1]),n=ij(ec(n),t.separable_conv2,[1,1]),n=Qo(n,e),n}(r,t.middle_flow["main_block_"+e])}),r=Fj(r,t.exit_flow.reduction_block),r=ec(ij(r,t.exit_flow.separable_conv,[1,1])),r})}async forward(e){return this.forwardInput(await rj(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return function(e,t){const n=[],{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:s,extractMainBlockParams:i}=function(e,t){const n=gj(e,t),r=xj(n),a=mj(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),o={conv_in:r("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},l={};bW(t,0,1).forEach(e=>{l["main_block_"+e]=i("middle_flow/main_block_"+e)});const u={reduction_block:s("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return hj(e,n),{params:{entry_flow:o,middle_flow:l,exit_flow:u},paramMappings:n}}(e,this._numMainBlocks)}extractParams(e){return function(e,t){const n=[],{extractWeights:r,getRemainingWeights:a}=yj(e),{extractConvParams:s,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:l}=function(e,t){const n=cj(e,t),r=fj(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(r,n),u={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:o(32,64,"entry_flow/reduction_block_0"),reduction_block_1:o(64,128,"entry_flow/reduction_block_1")},h={};bW(t,0,1).forEach(e=>{h["main_block_"+e]=l(128,"middle_flow/main_block_"+e)});const c={reduction_block:o(128,256,"exit_flow/reduction_block"),separable_conv:i(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:u,middle_flow:h,exit_flow:c}}}(e,this._numMainBlocks)}};(Dj=Rj||(Rj={})).FEMALE="female",Dj.MALE="male";var zj=class extends Sj{postProcess(e,t,n){const r=n.map(({width:e,height:n})=>{const r=t/Math.max(n,e);return{width:e*r,height:n*r}}),a=r.length;return Vo(()=>{const n=(e,t)=>Cc([Eu([68],e,"float32"),Eu([68],t,"float32")],1).as2D(1,136).as1D(),s=(e,t)=>{const{width:n,height:a}=r[e];return t(n,a)?Math.abs(n-a)/2:0};return e.mul(Eu([a,136],t,"float32")).sub(Cc(Array.from(Array(a),(e,t)=>n((e=>s(e,(e,t)=>e<t))(t),(e=>s(e,(e,t)=>t<e))(t))))).div(Cc(Array.from(Array(a),(e,t)=>n(r[t].width,r[t].height))))})}forwardInput(e){return Vo(()=>{const t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([e,t])=>({height:e,width:t})))})}async forward(e){return this.forwardInput(await rj(e))}async detectLandmarks(e){const t=await rj(e),n=Vo(()=>Wc(this.forwardInput(t))),r=await Promise.all(n.map(async(e,n)=>{const r=Array.from(e.dataSync()),a=r.filter((e,t)=>pW(t)),s=r.filter((e,t)=>!pW(t));return new FW(Array(68).fill(0).map((e,t)=>new AW(a[t],s[t])),{height:t.getInputHeight(n),width:t.getInputWidth(n)})}));return n.forEach(e=>e.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},Pj=class extends sj{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){const{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Vo(()=>{let n=oj(EW(fi(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=oj(n,t.dense1),n=oj(n,t.dense2),n=Nl(n,[14,14],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await rj(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return function(e){const t=[],{extractDenseBlock3Params:n}=vj(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return hj(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){const t=[],{extractWeights:n,getRemainingWeights:r}=yj(e),{extractDenseBlock3Params:a}=bj(n,t),s=a(3,32,"dense0",!0),i=a(32,64,"dense1"),o=a(64,128,"dense2");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{dense0:s,dense1:i,dense2:o}}}(e)}};function $j(e,t,n,r,a="same"){const{filters:s,bias:i}=t.conv;let o=Zl(e,s,n,a);return o=Qo(o,i),o=function(e,t){return Qo(nl(e,t.weights),t.biases)}(o,t.scale),r?ec(o):o}function Lj(e,t){return $j(e,t,[1,1],!1)}function Vj(e,t){return $j(e,t,[2,2],!0,"valid")}function Bj(e,t){let n=function(e,t){return $j(e,t,[1,1],!0)}(e,t.conv1);return n=Lj(n,t.conv2),n=Qo(n,e),n=ec(n),n}function Wj(e,t){let n=Vj(e,t.conv1);n=Lj(n,t.conv2);let r=Nl(e,2,2,"valid");const a=Ah(r.shape),s=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){const e=[...n.shape];e[1]=1;const t=Ah(e);n=Fl([n,t],1);const r=[...n.shape];r[2]=1;const a=Ah(r);n=Fl([n,a],2)}return r=s?Fl([r,a],3):r,n=Qo(r,n),n=ec(n),n}function jj(e,t,n){return Vo(()=>{let r=Zl(e,t.filters,n,"same");return r=Qo(r,t.batch_norm_offset),Ul(r,0,6)})}function Hj(e,t,n){const r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),s=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),h=Math.max(r[n][0],r[n][2]),c=Math.max(r[n][1],r[n][3]),d=(i-a)*(o-s),p=(h-l)*(c-u);if(d<=0||p<=0)return 0;const f=Math.max(a,l),m=Math.max(s,u),g=Math.min(i,h),y=Math.min(o,c),b=Math.max(g-f,0)*Math.max(y-m,0);return b/(d+p-b)}function Uj(e,t){return Vo(()=>{const n=e.shape[0];return{boxPredictionEncoding:Cl(uj(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Cl(uj(e,t.class_predictor),[n,-1,3])}})}var Gj=[new AW(.738768,.874946),new AW(2.42204,2.65704),new AW(4.30971,7.04493),new AW(10.246,4.59428),new AW(12.6868,11.8741)],qj=[new AW(1.603231,2.094468),new AW(6.041143,7.080126),new AW(2.882459,3.518061),new AW(4.266906,5.178857),new AW(9.041765,10.66308)],Kj=[117.001,114.697,97.404],Xj=e=>"number"==typeof e;function Zj(e){return Vo(()=>{const t=nl(e,uc(.10000000149011612));return Qo(ec(eh(e,t)),t)})}function Yj(e,t){return Vo(()=>{let n=Oh(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Zl(n,t.conv.filters,[1,1],"valid"),n=eh(n,t.bn.sub),n=nl(n,t.bn.truediv),n=Qo(n,t.conv.bias),Zj(n)})}function Jj(e,t){return Vo(()=>{let n=Oh(e,[[0,0],[1,1],[1,1],[0,0]]);return n=cc(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Qo(n,t.bias),Zj(n)})}var Qj=class extends sj{constructor(e){super("TinyYolov2"),function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Xj(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(e=>"string"==typeof e))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(e=>e||{}).every(e=>Xj(e.x)&&Xj(e.y)))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(Xj)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let n=Yj(e,t.conv0);return n=gh(n,[2,2],[2,2],"same"),n=Yj(n,t.conv1),n=gh(n,[2,2],[2,2],"same"),n=Yj(n,t.conv2),n=gh(n,[2,2],[2,2],"same"),n=Yj(n,t.conv3),n=gh(n,[2,2],[2,2],"same"),n=Yj(n,t.conv4),n=gh(n,[2,2],[2,2],"same"),n=Yj(n,t.conv5),n=gh(n,[2,2],[1,1],"same"),n=Yj(n,t.conv6),n=Yj(n,t.conv7),uj(n,t.conv8,"valid",!1)}runMobilenet(e,t){let n=this.config.isFirstLayerConv2d?Zj(uj(e,t.conv0,"valid",!1)):Jj(e,t.conv0);return n=gh(n,[2,2],[2,2],"same"),n=Jj(n,t.conv1),n=gh(n,[2,2],[2,2],"same"),n=Jj(n,t.conv2),n=gh(n,[2,2],[2,2],"same"),n=Jj(n,t.conv3),n=gh(n,[2,2],[2,2],"same"),n=Jj(n,t.conv4),n=gh(n,[2,2],[2,2],"same"),n=Jj(n,t.conv5),n=gh(n,[2,2],[1,1],"same"),n=t.conv6?Jj(n,t.conv6):n,n=t.conv7?Jj(n,t.conv7):n,uj(n,t.conv8,"valid",!1)}forwardInput(e,t){const{params:n}=this;if(!n)throw new Error("TinyYolov2 - load model before inference");return Vo(()=>{let r=fi(e.toBatchTensor(t,!1),"float32");return r=this.config.meanRgb?EW(r,this.config.meanRgb):r,r=r.div(255),this.config.withSeparableConvs?this.runMobilenet(r,n):this.runTinyYolov2(r,n)})}async forward(e,t){return this.forwardInput(await rj(e),t)}async detect(e,t={}){const{inputSize:n,scoreThreshold:r}=new class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}}(t),a=await rj(e),s=await this.forwardInput(a,n),i=Vo(()=>Wc(s)[0].expandDims()),o={width:a.getInputWidth(0),height:a.getInputHeight(0)},l=await this.extractBoxes(i,a.getReshapedInputDimensions(0),r);s.dispose(),i.dispose();const u=l.map(e=>e.box),h=l.map(e=>e.score),c=l.map(e=>e.classScore),d=l.map(e=>this.config.classes[e.label]);return function(e,t,n,r=!0){let a=t.map((e,t)=>({score:e,boxIndex:t})).sort((e,t)=>e.score-t.score).map(e=>e.boxIndex);const s=[];for(;a.length>0;){const t=a.pop();s.push(t);const i=a,o=[];for(let n=0;n<i.length;n++)o.push(_W(e[t],e[i[n]],r));a=a.filter((e,t)=>o[t]<=n)}return s}(u.map(e=>e.rescale(n)),h,this.config.iouThreshold,!0).map(e=>new SW(h[e],c[e],d[e],u[e],o))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return function(e,t){const n=[],{extractConvParams:r,extractConvWithBatchNormParams:a,extractSeparableConvParams:s}=function(e,t){const n=gj(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){return{conv:r(e+"/conv"),bn:function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn")}},extractSeparableConvParams:mj(n)}}(e,n);let i;if(t.withSeparableConvs){const e=t.filterSizes&&t.filterSizes.length||9;i={conv0:t.isFirstLayerConv2d?r("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:e>7?s("conv6"):void 0,conv7:e>8?s("conv7"):void 0,conv8:r("conv8")}}else i={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:r("conv8")};return hj(e,n),{params:i,paramMappings:n}}(e,this.config)}extractParams(e){const t=this.config.filterSizes||Qj.DEFAULT_FILTER_SIZES,n=t?t.length:void 0;if(7!==n&&8!==n&&9!==n)throw new Error(`TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ${n} filterSizes in config`);return function(e,t,n,r){const{extractWeights:a,getRemainingWeights:s}=yj(e),i=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:u}=function(e,t){const n=cj(e,t),r=fj(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,s){return{conv:n(r,a,3,s+"/conv"),bn:function(n,r){const a=Rc(e(n)),s=Rc(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:s}}(a,s+"/bn")}},extractSeparableConvParams:r}}(a,i);let h;if(t.withSeparableConvs){const[e,a,s,i,l,c,d,p,f]=r;h={conv0:t.isFirstLayerConv2d?o(e,a,3,"conv0"):u(e,a,"conv0"),conv1:u(a,s,"conv1"),conv2:u(s,i,"conv2"),conv3:u(i,l,"conv3"),conv4:u(l,c,"conv4"),conv5:u(c,d,"conv5"),conv6:p?u(d,p,"conv6"):void 0,conv7:f?u(p,f,"conv7"):void 0,conv8:o(f||p||d,5*n,1,"conv8")}}else{const[e,t,a,s,i,u,c,d,p]=r;h={conv0:l(e,t,"conv0"),conv1:l(t,a,"conv1"),conv2:l(a,s,"conv2"),conv3:l(s,i,"conv3"),conv4:l(i,u,"conv4"),conv5:l(u,c,"conv5"),conv6:l(c,d,"conv6"),conv7:l(d,p,"conv7"),conv8:o(p,5*n,1,"conv8")}}if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:h,paramMappings:i}}(e,this.config,this.boxEncodingSize,t)}async extractBoxes(e,t,n){const{width:r,height:a}=t,s=Math.max(r,a),i=s/r,o=s/a,l=e.shape[1],u=this.config.anchors.length,[h,c,d]=Vo(()=>{const t=e.reshape([l,l,u,this.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,u,4]),t.slice([0,0,0,4],[l,l,u,1]),this.withClassScores?vc(t.slice([0,0,0,5],[l,l,u,this.config.classes.length]),3):uc(0)]}),p=[],f=await c.array(),m=await h.array();for(let g=0;g<l;g++)for(let e=0;e<l;e++)for(let t=0;t<u;t++){const r=TW(f[g][e][t][0]);if(!n||r>n){const n=(e+TW(m[g][e][t][0]))/l*i,a=(g+TW(m[g][e][t][1]))/l*o,s=Math.exp(m[g][e][t][2])*this.config.anchors[t].x/l*i,u=Math.exp(m[g][e][t][3])*this.config.anchors[t].y/l*o,h=n-s/2,c=a-u/2,f={row:g,col:e,anchor:t},{classScore:y,label:b}=this.withClassScores?await this.extractPredictedClass(d,f):{classScore:1,label:0};p.push({box:new kW(h,c,h+s,c+u),score:r,classScore:r*y,label:b,...f})}}return h.dispose(),c.dispose(),d.dispose(),p}async extractPredictedClass(e,t){const{row:n,col:r,anchor:a}=t,s=await e.array();return Array(this.config.classes.length).fill(0).map((e,t)=>s[n][r][a][t]).map((e,t)=>({classScore:e,label:t})).reduce((e,t)=>e.classScore>t.classScore?e:t)}},eH=Qj;eH.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var tH=[new AW(1.603231,2.094468),new AW(6.041143,7.080126),new AW(2.882459,3.518061),new AW(4.266906,5.178857),new AW(9.041765,10.66308)],nH=[117.001,114.697,97.404];function rH(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");const n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((e,t)=>e-r[t]).reduce((e,t)=>e+t**2,0))}new class extends sj{constructor(){super("SsdMobilenetv1")}forwardInput(e){const{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Vo(()=>{const n=fi(e.toBatchTensor(512,!1),"float32"),r=function(e,t){return Vo(()=>{let n,r=jj(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((e,t)=>{const a=t+1,s=function(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}(a);r=function(e,t,n){return Vo(()=>{let r=lu(e,t.filters,n,"same");return r=$l(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Ul(r,0,6)})}(r,e.depthwise_conv,s),r=jj(r,e.pointwise_conv,[1,1]),11===a&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}(eh(tl(n,127.5),1),t.mobilenetv1),{boxPredictions:a,classPredictions:s}=function(e,t,n){return Vo(()=>{const r=jj(e,n.conv_0,[1,1]),a=jj(r,n.conv_1,[2,2]),s=jj(a,n.conv_2,[1,1]),i=jj(s,n.conv_3,[2,2]),o=jj(i,n.conv_4,[1,1]),l=jj(o,n.conv_5,[2,2]),u=jj(l,n.conv_6,[1,1]),h=jj(u,n.conv_7,[2,2]),c=Uj(t,n.box_predictor_0),d=Uj(e,n.box_predictor_1),p=Uj(a,n.box_predictor_2),f=Uj(i,n.box_predictor_3),m=Uj(l,n.box_predictor_4),g=Uj(h,n.box_predictor_5);return{boxPredictions:Fl([c.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:Fl([c.classPrediction,d.classPrediction,p.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Vo(()=>{const r=e.shape[0];let a=function(e,t){const{sizes:n,centers:r}=function(e){const t=Wc(Pi(e,[1,0])),n=[eh(t[2],t[0]),eh(t[3],t[1])];return{sizes:n,centers:[Qo(t[0],tl(n[0],2)),Qo(t[1],tl(n[1],2))]}}(e),a=Wc(Pi(t,[1,0])),s=tl(nl(wu(tl(a[2],5)),n[0]),2),i=Qo(nl(tl(a[0],10),n[0]),r[0]),o=tl(nl(wu(tl(a[3],5)),n[1]),2),l=Qo(nl(tl(a[1],10),n[1]),r[1]);return Pi(Cc([eh(i,s),eh(l,o),Qo(i,s),Qo(l,o)]),[1,0])}(Cl(Iu(n.extra_dim,[r,1,1]),[-1,4]),Cl(e,[-1,4]));a=Cl(a,[r,a.shape[0]/r,4]);const s=Rl(Dl(t,[0,0,1],[-1,-1,-1]));let i=Dl(s,[0,0,0],[-1,-1,1]);return i=Cl(i,[r,i.shape[1]]),{boxes:Wc(a),scores:Wc(i)}})}(a,s,t.output_layer)})}async forward(e){return this.forwardInput(await rj(e))}async locateFaces(e,t={}){const{maxResults:n,minConfidence:r}=new class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}}(t),a=await rj(e),{boxes:s,scores:i}=this.forwardInput(a),o=s[0],l=i[0];for(let y=1;y<s.length;y++)s[y].dispose(),i[y].dispose();const u=Array.from(l.dataSync()),h=function(e,t,n,r,a){const s=Math.min(n,e.shape[0]),i=t.map((e,t)=>({score:e,boxIndex:t})).filter(e=>e.score>a).sort((e,t)=>t.score-e.score),o=[];return i.forEach(t=>{if(o.length>=s)return;const n=t.score;for(let r=o.length-1;r>=0;--r){const n=Hj(e,t.boxIndex,o[r]);if(0!==n&&(t.score*=n<=.5?1:0,t.score<=a))break}n===t.score&&o.push(t.boxIndex)}),o}(o,u,n,0,r),c=a.getReshapedInputDimensions(0),d=a.inputSize,p=d/c.width,f=d/c.height,m=o.arraySync(),g=h.map(e=>{const[t,n]=[Math.max(0,m[e][0]),Math.min(1,m[e][2])].map(e=>e*f),[r,s]=[Math.max(0,m[e][1]),Math.min(1,m[e][3])].map(e=>e*p);return new IW(u[e],new NW(r,t,s-r,n-t),{height:a.getInputHeight(0),width:a.getInputWidth(0)})});return o.dispose(),l.dispose(),g}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return function(e){const t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=function(e,t){const n=gj(e,t);function r(e,t,r){return{filters:n(`${e}/Conv2d_${t}_pointwise/weights`,4,r+"/filters"),batch_norm_offset:n(`${e}/Conv2d_${t}_pointwise/convolution_bn_offset`,1,r+"/batch_norm_offset")}}function a(e){const t="mobilenetv1/conv_"+e,a=`MobilenetV1/Conv2d_${e}_depthwise`,s=t+"/depthwise_conv",i=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,s+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,s+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,s+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,s+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,s+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,i)}}function s(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function i(e){return{box_encoding_predictor:s(`Prediction/BoxPredictor_${e}/BoxEncodingPredictor`,`prediction_layer/box_predictor_${e}/box_encoding_predictor`),class_predictor:s(`Prediction/BoxPredictor_${e}/ClassPredictor`,`prediction_layer/box_predictor_${e}/class_predictor`)}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(e,t),a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!hW(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);const s={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:a}};return hj(e,t),{params:s,paramMappings:t}}(e)}extractParams(e){return function(e){const t=[],{extractWeights:n,getRemainingWeights:r}=yj(e),{extractMobilenetV1Params:a,extractPredictionLayerParams:s}=function(e,t){function n(n,r,a,s,i){const o=Oc(e(n*r*a*a),[a,a,n,r]),l=Rc(e(r));return t.push({paramPath:s+"/filters"},{paramPath:`${s}/${i?"batch_norm_offset":"bias"}`}),{filters:o,bias:l}}function r(e,t,r,a){const{filters:s,bias:i}=n(e,t,r,a,!0);return{filters:s,batch_norm_offset:i}}function a(n,a,s){return{depthwise_conv:function(n,r){const a=Oc(e(9*n),[3,3,n,1]),s=Rc(e(n)),i=Rc(e(n)),o=Rc(e(n)),l=Rc(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:s,batch_norm_offset:i,batch_norm_mean:o,batch_norm_variance:l}}(n,s+"/depthwise_conv"),pointwise_conv:r(n,a,1,s+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(n,t),i=a(),o=s(),l={extra_dim:Vi(n(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{mobilenetv1:i,prediction_layer:o,output_layer:l},paramMappings:t}}(e)}},new class extends eH{constructor(){super({withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:tH,meanRgb:nH,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new IW(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},new class extends eH{constructor(e=!0){super({withSeparableConvs:e,iouThreshold:.4,classes:["face"],...e?{anchors:qj,meanRgb:Kj}:{anchors:Gj,withClassScores:!0}})}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new IW(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},new class extends zj{constructor(e=new Aj){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}},new class extends zj{constructor(e=new Pj){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}},new class extends sj{constructor(){super("FaceRecognitionNet")}forwardInput(e){const{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Vo(()=>{let n=Vj(EW(fi(e.toBatchTensor(150,!0),"float32"),[122.782,117.001,104.298]).div(255),t.conv32_down);n=gh(n,3,2,"valid"),n=Bj(n,t.conv32_1),n=Bj(n,t.conv32_2),n=Bj(n,t.conv32_3),n=Wj(n,t.conv64_down),n=Bj(n,t.conv64_1),n=Bj(n,t.conv64_2),n=Bj(n,t.conv64_3),n=Wj(n,t.conv128_down),n=Bj(n,t.conv128_1),n=Bj(n,t.conv128_2),n=Wj(n,t.conv256_down),n=Bj(n,t.conv256_1),n=Bj(n,t.conv256_2),n=Wj(n,t.conv256_down_out);const r=n.mean([1,2]);return Oi(r,t.fc)})}async forward(e){return this.forwardInput(await rj(e))}async computeFaceDescriptor(e){var t;if(null==(t=null==e?void 0:e.shape)?void 0:t.some(e=>e<=0))return new Float32Array(128);const n=await rj(e),r=Vo(()=>Wc(this.forwardInput(n))),a=await Promise.all(r.map(e=>e.data()));return r.forEach(e=>e.dispose()),n.isBatchInput?a:a[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return function(e){const t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=function(e,t){const n=gj(e,t);function r(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}(e,t),a=n("conv32_down"),s=r("conv32_1"),i=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),u=r("conv64_1"),h=r("conv64_2"),c=r("conv64_3"),d=r("conv128_down"),p=r("conv128_1"),f=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),y=r("conv256_2"),b=r("conv256_down_out"),{fc:x}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!uW(x))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);const v={conv32_down:a,conv32_1:s,conv32_2:i,conv32_3:o,conv64_down:l,conv64_1:u,conv64_2:h,conv64_3:c,conv128_down:d,conv128_1:p,conv128_2:f,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:x};return hj(e,t),{params:v,paramMappings:t}}(e)}extractParams(e){return function(e){const{extractWeights:t,getRemainingWeights:n}=yj(e),r=[],{extractConvLayerParams:a,extractResidualLayerParams:s}=function(e,t){function n(n,r,a,s){const i=function(t,n,r){const a=e(t),s=a.length/(n*r*r);if(dW(s))throw new Error(`depth has to be an integer: ${s}, weights.length: ${a.length}, numFilters: ${n}, filterSize: ${r}`);return Vo(()=>Pi(Oc(a,[n,s,r,r]),[2,3,1,0]))}(n,r,a),o=Rc(e(r));return t.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:i,bias:o}}function r(r,a,s,i){return{conv:n(r,a,s,i+"/conv"),scale:function(n,r){const a=Rc(e(n)),s=Rc(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:s}}(a,i+"/scale")}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,s=!1){return{conv1:r((s?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}(t,r),i=a(4704,32,7,"conv32_down"),o=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),u=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),c=s(36864,64,3,"conv64_1"),d=s(36864,64,3,"conv64_2"),p=s(36864,64,3,"conv64_3"),f=s(147456,128,3,"conv128_down",!0),m=s(147456,128,3,"conv128_1"),g=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),v=s(589824,256,3,"conv256_down_out"),A=Vo(()=>Pi(Dc(t(32768),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),0!==n().length)throw new Error("weights remaing after extract: "+n().length);return{params:{conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:u,conv64_down:h,conv64_1:c,conv64_2:d,conv64_3:p,conv128_down:f,conv128_1:m,conv128_2:g,conv256_down:y,conv256_1:b,conv256_2:x,conv256_down_out:v,fc:A},paramMappings:r}}(e)}},new class extends Sj{constructor(e=new Aj){super("FaceExpressionNet",e)}forwardInput(e){return Vo(()=>vc(this.runNet(e)))}async forward(e){return this.forwardInput(await rj(e))}async predictExpressions(e){const t=await rj(e),n=await this.forwardInput(t),r=await Promise.all(Wc(n).map(async e=>{const t=e.dataSync();return e.dispose(),t}));n.dispose();const a=r.map(e=>new _j(e));return t.isBatchInput?a:a[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}},new class extends sj{constructor(e=new Oj(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){const{params:t}=this;if(!t)throw new Error(this._name+" - load model before inference");return Vo(()=>{const n=e instanceof nj?this.faceFeatureExtractor.forwardInput(e):e,r=Nl(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1);return{age:wj(r,t.fc.age).as1D(),gender:wj(r,t.fc.gender)}})}forwardInput(e){return Vo(()=>{const{age:t,gender:n}=this.runNet(e);return{age:t,gender:vc(n)}})}async forward(e){return this.forwardInput(await rj(e))}async predictAgeAndGender(e){const t=await rj(e),n=await this.forwardInput(t),r=Wc(n.age),a=Wc(n.gender),s=r.map((e,t)=>({ageTensor:e,genderTensor:a[t]})),i=await Promise.all(s.map(async({ageTensor:e,genderTensor:t})=>{const n=e.dataSync()[0],r=t.dataSync()[0],a=r>.5,s=a?Rj.MALE:Rj.FEMALE,i=a?r:1-r;return e.dispose(),t.dispose(),{age:n,gender:s,genderProbability:i}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?i:i[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){const{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e){const t=[],{extractWeights:n,getRemainingWeights:r}=yj(e),a=dj(n,t),s=a(512,1,"fc/age"),i=a(512,2,"fc/gender");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{fc:{age:s,gender:i}}}}(e)}extractParamsFromWeightMap(e){const{featureExtractorMap:t,classifierMap:n}=kj(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){const t=[],n=gj(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}const a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return hj(e,t),{params:a,paramMappings:t}}(n)}extractParams(e){const t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}},"undefined"!=typeof navigator&&navigator},dfxl:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="dfxl"},eIep:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("lJxs"),a=n("Cfvw"),s=n("zx2A");function i(e,t){return"function"==typeof t?n=>n.pipe(i((n,s)=>Object(a.a)(e(n,s)).pipe(Object(r.a)((e,r)=>t(n,e,s,r))))):t=>t.lift(new o(e))}class o{constructor(e){this.project=e}call(e,t){return t.subscribe(new l(e,this.project))}}class l extends s.b{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new s.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(s.c)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}},eNwd:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("3N8a");class a extends r.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}var s=n("IjjT");class i extends s.a{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,a=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<a&&(e=t.shift()));if(this.active=!1,n){for(;++r<a&&(e=t.shift());)e.unsubscribe();throw n}}}const o=new i(a)},fXoL:function(e,t,n){"use strict";n.d(t,"a",function(){return rn}),n.d(t,"b",function(){return Ul}),n.d(t,"c",function(){return Vl}),n.d(t,"d",function(){return $l}),n.d(t,"e",function(){return Ll}),n.d(t,"f",function(){return Vu}),n.d(t,"g",function(){return Tu}),n.d(t,"h",function(){return zo}),n.d(t,"i",function(){return nu}),n.d(t,"j",function(){return so}),n.d(t,"k",function(){return Kl}),n.d(t,"l",function(){return uo}),n.d(t,"m",function(){return zu}),n.d(t,"n",function(){return Sr}),n.d(t,"o",function(){return bl}),n.d(t,"p",function(){return hs}),n.d(t,"q",function(){return In}),n.d(t,"r",function(){return C}),n.d(t,"s",function(){return nn}),n.d(t,"t",function(){return Is}),n.d(t,"u",function(){return Co}),n.d(t,"v",function(){return Mo}),n.d(t,"w",function(){return ql}),n.d(t,"x",function(){return Go}),n.d(t,"y",function(){return Nu}),n.d(t,"z",function(){return Uo}),n.d(t,"A",function(){return ku}),n.d(t,"B",function(){return su}),n.d(t,"C",function(){return _n}),n.d(t,"D",function(){return Hl}),n.d(t,"E",function(){return jl}),n.d(t,"F",function(){return vl}),n.d(t,"G",function(){return po}),n.d(t,"H",function(){return co}),n.d(t,"I",function(){return Tr}),n.d(t,"J",function(){return mo}),n.d(t,"K",function(){return mr}),n.d(t,"L",function(){return ye}),n.d(t,"M",function(){return En}),n.d(t,"N",function(){return Ru}),n.d(t,"O",function(){return Bo}),n.d(t,"P",function(){return du}),n.d(t,"Q",function(){return an}),n.d(t,"R",function(){return go}),n.d(t,"S",function(){return Ko}),n.d(t,"T",function(){return O}),n.d(t,"U",function(){return Su}),n.d(t,"V",function(){return Au}),n.d(t,"W",function(){return p}),n.d(t,"X",function(){return wn}),n.d(t,"Y",function(){return vu}),n.d(t,"Z",function(){return $u}),n.d(t,"ab",function(){return mu}),n.d(t,"bb",function(){return Gl}),n.d(t,"cb",function(){return ds}),n.d(t,"db",function(){return Ui}),n.d(t,"eb",function(){return g}),n.d(t,"fb",function(){return pr}),n.d(t,"gb",function(){return Zn}),n.d(t,"hb",function(){return Ln}),n.d(t,"ib",function(){return Bn}),n.d(t,"jb",function(){return Un}),n.d(t,"kb",function(){return jn}),n.d(t,"lb",function(){return Wn}),n.d(t,"mb",function(){return Hn}),n.d(t,"nb",function(){return Bi}),n.d(t,"ob",function(){return Pu}),n.d(t,"pb",function(){return Wi}),n.d(t,"qb",function(){return ji}),n.d(t,"rb",function(){return Vn}),n.d(t,"sb",function(){return V}),n.d(t,"tb",function(){return Os}),n.d(t,"ub",function(){return ti}),n.d(t,"vb",function(){return Qs}),n.d(t,"wb",function(){return ei}),n.d(t,"xb",function(){return Vi}),n.d(t,"yb",function(){return Se}),n.d(t,"zb",function(){return h}),n.d(t,"Ab",function(){return $n}),n.d(t,"Bb",function(){return Es}),n.d(t,"Cb",function(){return be}),n.d(t,"Db",function(){return no}),n.d(t,"Eb",function(){return ma}),n.d(t,"Fb",function(){return Ls}),n.d(t,"Gb",function(){return xi}),n.d(t,"Hb",function(){return Di}),n.d(t,"Ib",function(){return bi}),n.d(t,"Jb",function(){return Fl}),n.d(t,"Kb",function(){return Y}),n.d(t,"Lb",function(){return ae}),n.d(t,"Mb",function(){return v}),n.d(t,"Nb",function(){return A}),n.d(t,"Ob",function(){return te}),n.d(t,"Pb",function(){return se}),n.d(t,"Qb",function(){return js}),n.d(t,"Rb",function(){return Ks}),n.d(t,"Sb",function(){return Ys}),n.d(t,"Tb",function(){return Zs}),n.d(t,"Ub",function(){return Xs}),n.d(t,"Vb",function(){return qs}),n.d(t,"Wb",function(){return Gs}),n.d(t,"Xb",function(){return Js}),n.d(t,"Yb",function(){return Yt}),n.d(t,"Zb",function(){return Oi}),n.d(t,"ac",function(){return An}),n.d(t,"bc",function(){return Qt}),n.d(t,"cc",function(){return ni}),n.d(t,"dc",function(){return Rl}),n.d(t,"ec",function(){return si}),n.d(t,"fc",function(){return dl}),n.d(t,"gc",function(){return pl}),n.d(t,"hc",function(){return fl}),n.d(t,"ic",function(){return li}),n.d(t,"jc",function(){return oi}),n.d(t,"kc",function(){return Hs}),n.d(t,"lc",function(){return ui}),n.d(t,"mc",function(){return ul}),n.d(t,"nc",function(){return Nl}),n.d(t,"oc",function(){return Ws}),n.d(t,"pc",function(){return _r}),n.d(t,"qc",function(){return je}),n.d(t,"rc",function(){return gr}),n.d(t,"sc",function(){return yr}),n.d(t,"tc",function(){return ne}),n.d(t,"uc",function(){return yi}),n.d(t,"vc",function(){return zi}),n.d(t,"wc",function(){return Bs}),n.d(t,"xc",function(){return Pl}),n.d(t,"yc",function(){return Mi}),n.d(t,"zc",function(){return Fi}),n.d(t,"Ac",function(){return Ri}),n.d(t,"Bc",function(){return Ml});var r=n("XNiG"),a=n("quSY"),s=n("HDdC"),i=n("VRyK"),o=n("w1tV");function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function u(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function h(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(h).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function c(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=l({__forward_ref__:l});function p(e){return e.__forward_ref__=p,e.toString=function(){return h(this())},e}function f(e){return m(e)?e():e}function m(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class g extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function b(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function x(e,t){const n=t?" in "+t:"";throw new g("201",`No provider for ${b(e)} found${n}`)}function v(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function A(e){return{providers:e.providers||[],imports:e.imports||[]}}function w(e){return k(e,I)||k(e,E)}function k(e,t){return e.hasOwnProperty(t)?e[t]:null}function S(e){return e&&(e.hasOwnProperty(_)||e.hasOwnProperty(T))?e[_]:null}const I=l({"\u0275prov":l}),_=l({"\u0275inj":l}),E=l({ngInjectableDef:l}),T=l({ngInjectorDef:l});var C=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let N;function M(e){const t=N;return N=e,t}function F(e,t,n){const r=w(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&C.Optional?null:void 0!==t?t:void x(h(e),"Injector")}function R(e){return{toString:e}.toString()}var D=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),O=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const z="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,L="undefined"!=typeof global&&global,V=z||L||P||$,B={},W=[],j=l({"\u0275cmp":l}),H=l({"\u0275dir":l}),U=l({"\u0275pipe":l}),G=l({"\u0275mod":l}),q=l({"\u0275loc":l}),K=l({"\u0275fac":l}),X=l({__NG_ELEMENT_ID__:l});let Z=0;function Y(e){return R(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||W,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||O.Emulated,id:"c",styles:e.styles||W,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,a=e.features,s=e.pipes;return n.id+=Z++,n.inputs=re(e.inputs,t),n.outputs=re(e.outputs),a&&a.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Q):null,n})}function J(e){return ie(e)||function(e){return e[H]||null}(e)}function Q(e){return function(e){return e[U]||null}(e)}const ee={};function te(e){return R(()=>{const t={type:e.type,bootstrap:e.bootstrap||W,declarations:e.declarations||W,imports:e.imports||W,exports:e.exports||W,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ee[e.id]=e.type),t})}function ne(e,t){return R(()=>{const n=oe(e,!0);n.declarations=t.declarations||W,n.imports=t.imports||W,n.exports=t.exports||W})}function re(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let a=e[r],s=a;Array.isArray(a)&&(s=a[1],a=a[0]),n[a]=r,t&&(t[a]=s)}return n}const ae=Y;function se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ie(e){return e[j]||null}function oe(e,t){const n=e[G]||null;if(!n&&!0===t)throw new Error(`Type ${h(e)} does not have '\u0275mod' property.`);return n}const le=20,ue=10;function he(e){return Array.isArray(e)&&"object"==typeof e[1]}function ce(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function pe(e){return 2==(2&e.flags)}function fe(e){return 1==(1&e.flags)}function me(e){return null!==e.template}function ge(e,t){return e.hasOwnProperty(K)?e[K]:null}class ye{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function be(){return xe}function xe(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ae),ve}function ve(){const e=we(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ae(e,t,n,r){const a=we(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=a.current||(a.current={}),i=a.previous,o=this.declaredInputs[n],l=i[o];s[o]=new ye(l&&l.currentValue,t,i===B),e[r]=t}function we(e){return e.__ngSimpleChanges__||null}be.ngInherit=!0;let ke=void 0;function Se(e){ke=e}function Ie(){return void 0!==ke?ke:"undefined"!=typeof document?document:void 0}function _e(e){return!!e.listen}const Ee={createRenderer:(e,t)=>Ie()};function Te(e){for(;Array.isArray(e);)e=e[0];return e}function Ce(e,t){return Te(t[e])}function Ne(e,t){return Te(t[e.index])}function Me(e,t){return e.data[t]}function Fe(e,t){return e[t]}function Re(e,t){const n=t[e];return he(n)?n:n[0]}function De(e){return 4==(4&e[2])}function Oe(e){return 128==(128&e[2])}function ze(e,t){return null==t?null:e[t]}function Pe(e){e[18]=0}function $e(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Le={lFrame:ut(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return Le.bindingsEnabled}function Be(){return Le.lFrame.lView}function We(){return Le.lFrame.tView}function je(e){return Le.lFrame.contextLView=e,e[8]}function He(){let e=Ue();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ue(){return Le.lFrame.currentTNode}function Ge(e,t){const n=Le.lFrame;n.currentTNode=e,n.isParent=t}function qe(){return Le.lFrame.isParent}function Ke(){Le.lFrame.isParent=!1}function Xe(){return Le.isInCheckNoChangesMode}function Ze(e){Le.isInCheckNoChangesMode=e}function Ye(){const e=Le.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Je(){return Le.lFrame.bindingIndex++}function Qe(e){const t=Le.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function et(e,t){const n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=e,tt(t)}function tt(e){Le.lFrame.currentDirectiveIndex=e}function nt(e){const t=Le.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function rt(){return Le.lFrame.currentQueryIndex}function at(e){Le.lFrame.currentQueryIndex=e}function st(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function it(e,t,n){if(n&C.SkipSelf){let r=t,a=e;for(;r=r.parent,!(null!==r||n&C.Host||(r=st(a),null===r)||(a=a[15],10&r.type)););if(null===r)return!1;t=r,e=a}const r=Le.lFrame=lt();return r.currentTNode=t,r.lView=e,!0}function ot(e){const t=lt(),n=e[1];Le.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function lt(){const e=Le.lFrame,t=null===e?null:e.child;return null===t?ut(e):t}function ut(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ht(){const e=Le.lFrame;return Le.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ct=ht;function dt(){const e=ht();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pt(){return Le.lFrame.selectedIndex}function ft(e){Le.lFrame.selectedIndex=e}function mt(){const e=Le.lFrame;return Me(e.tView,e.selectedIndex)}function gt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:a,ngAfterViewInit:s,ngAfterViewChecked:i,ngOnDestroy:o}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),i&&((e.viewHooks||(e.viewHooks=[])).push(n,i),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i)),null!=o&&(e.destroyHooks||(e.destroyHooks=[])).push(n,o)}}function yt(e,t,n){vt(e,t,3,n)}function bt(e,t,n,r){(3&e[2])===n&&vt(e,t,n,r)}function xt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function vt(e,t,n,r){const a=null!=r?r:-1,s=t.length-1;let i=0;for(let o=void 0!==r?65535&e[18]:0;o<s;o++)if("number"==typeof t[o+1]){if(i=t[o],null!=r&&i>=r)break}else t[o]<0&&(e[18]+=65536),(i<a||-1==a)&&(At(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function At(e,t,n,r){const a=n[r]<0,s=n[r+1],i=e[a?-n[r]:n[r]];if(a){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(i)}finally{}}}else try{s.call(i)}finally{}}const wt=-1;class kt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function St(e,t,n){const r=_e(e);let a=0;for(;a<n.length;){const s=n[a];if("number"==typeof s){if(0!==s)break;a++;const i=n[a++],o=n[a++],l=n[a++];r?e.setAttribute(t,o,l,i):t.setAttributeNS(i,o,l)}else{const i=s,o=n[++a];_t(i)?r&&e.setProperty(t,i,o):r?e.setAttribute(t,i,o):t.setAttribute(i,o),a++}}return a}function It(e){return 3===e||4===e||6===e}function _t(e){return 64===e.charCodeAt(0)}function Et(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const a=t[r];"number"==typeof a?n=a:0===n||Tt(e,n,a,null,-1===n||2===n?t[++r]:null)}}return e}function Tt(e,t,n,r,a){let s=0,i=e.length;if(-1===t)i=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){i=-1;break}if(n>t){i=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==a&&(e[s+1]=a));if(r===e[s+1])return void(e[s+2]=a)}s++,null!==r&&s++,null!==a&&s++}-1!==i&&(e.splice(i,0,t),s=i+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==a&&e.splice(s++,0,a)}function Ct(e){return e!==wt}function Nt(e){return 32767&e}function Mt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Ft=!0;function Rt(e){const t=Ft;return Ft=e,t}let Dt=0;function Ot(e,t){const n=Pt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,zt(r.data,e),zt(t,null),zt(r.blueprint,null));const a=$t(e,t),s=e.injectorIndex;if(Ct(a)){const e=Nt(a),n=Mt(a,t),r=n[1].data;for(let a=0;a<8;a++)t[s+a]=n[e+a]|r[e+a]}return t[s+8]=a,s}function zt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Pt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function $t(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,a=t;for(;null!==a;){const e=a[1],t=e.type;if(r=2===t?e.declTNode:1===t?a[6]:null,null===r)return wt;if(n++,a=a[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return wt}function Lt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Dt++);const a=255&r;t.data[e+(a>>5)]|=1<<a}(e,t,n)}function Vt(e,t,n){if(n&C.Optional)return e;x(t,"NodeInjector")}function Bt(e,t,n,r){if(n&C.Optional&&void 0===r&&(r=null),0==(n&(C.Self|C.Host))){const a=e[9],s=M(void 0);try{return a?a.get(t,r,n&C.Optional):F(t,r,n&C.Optional)}finally{M(s)}}return Vt(r,t,n)}function Wt(e,t,n,r=C.Default,a){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(X)?e[X]:void 0;return"number"==typeof t?t>=0?255&t:Ht:t}(n);if("function"==typeof s){if(!it(t,e,r))return r&C.Host?Vt(a,n,r):Bt(t,n,r,a);try{const e=s(r);if(null!=e||r&C.Optional)return e;x(n)}finally{ct()}}else if("number"==typeof s){let a=null,i=Pt(e,t),o=wt,l=r&C.Host?t[16][6]:null;for((-1===i||r&C.SkipSelf)&&(o=-1===i?$t(e,t):t[i+8],o!==wt&&Xt(r,!1)?(a=t[1],i=Nt(o),t=Mt(o,t)):i=-1);-1!==i;){const e=t[1];if(Kt(s,i,e.data)){const e=Ut(i,t,n,a,r,l);if(e!==jt)return e}o=t[i+8],o!==wt&&Xt(r,t[1].data[i+8]===l)&&Kt(s,i,t)?(a=e,i=Nt(o),t=Mt(o,t)):i=-1}}}return Bt(t,n,r,a)}const jt={};function Ht(){return new Zt(He(),Be())}function Ut(e,t,n,r,a,s){const i=t[1],o=i.data[e+8],l=Gt(o,i,n,null==r?pe(o)&&Ft:r!=i&&0!=(3&o.type),a&C.Host&&s===o);return null!==l?qt(t,i,l,o):jt}function Gt(e,t,n,r,a){const s=e.providerIndexes,i=t.data,o=1048575&s,l=e.directiveStart,u=s>>20,h=a?o+u:e.directiveEnd;for(let c=r?o:o+u;c<h;c++){const e=i[c];if(c<l&&n===e||c>=l&&e.type===n)return c}if(a){const e=i[l];if(e&&me(e)&&e.type===n)return l}return null}function qt(e,t,n,r){let a=e[n];const s=t.data;if(a instanceof kt){const i=a;i.resolving&&function(e,t){throw new g("200","Circular dependency in DI detected for "+e)}(b(s[n]));const o=Rt(i.canSeeViewProviders);i.resolving=!0;const l=i.injectImpl?M(i.injectImpl):null;it(e,r,C.Default);try{a=e[n]=i.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:a,ngDoCheck:s}=t.type.prototype;if(r){const r=xe(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&M(l),Rt(o),i.resolving=!1,ct()}}return a}function Kt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Xt(e,t){return!(e&C.Self||e&C.Host&&t)}class Zt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Wt(this._tNode,this._lView,e,void 0,t)}}function Yt(e){return R(()=>{const t=e.prototype.constructor,n=t[K]||Jt(t),r=Object.prototype;let a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==r;){const e=a[K]||Jt(a);if(e&&e!==n)return e;a=Object.getPrototypeOf(a)}return e=>new e})}function Jt(e){return m(e)?()=>{const t=Jt(f(e));return t&&t()}:ge(e)}function Qt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const a=n[r];if(It(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(a===t)return n[r+1];r+=2}}}return null}(He(),e)}const en="__parameters__";function tn(e,t,n){return R(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function a(...e){if(this instanceof a)return r.apply(this,e),this;const t=new a(...e);return n.annotation=t,n;function n(e,n,r){const a=e.hasOwnProperty(en)?e[en]:Object.defineProperty(e,en,{value:[]})[en];for(;a.length<=r;)a.push(null);return(a[r]=a[r]||[]).push(t),e}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}class nn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=v({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const rn=new nn("AnalyzeForEntryComponents"),an=Function;function sn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),sn(r,t)):t!==e&&t.push(r)}return t}function on(e,t){e.forEach(e=>Array.isArray(e)?on(e,t):t(e))}function ln(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function un(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function hn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function cn(e,t,n){let r=pn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let a=e.length;if(a==t)e.push(n,r);else if(1===a)e.push(r,e[0]),e[0]=n;else{for(a--,e.push(e[a-1],e[a]);a>t;)e[a]=e[a-2],a--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function dn(e,t){const n=pn(e,t);if(n>=0)return e[1|n]}function pn(e,t){return function(e,t,n){let r=0,a=e.length>>1;for(;a!==r;){const n=r+(a-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?a=n:r=n+1}return~(a<<1)}(e,t)}const fn={},mn=/\n/gm,gn="__source",yn=l({provide:String,useValue:l});let bn=void 0;function xn(e){const t=bn;return bn=e,t}function vn(e,t=C.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?F(e,void 0,t):bn.get(e,t&C.Optional?null:void 0,t)}function An(e,t=C.Default){return(N||vn)(f(e),t)}const wn=An;function kn(e){const t=[];for(let n=0;n<e.length;n++){const r=f(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=C.Default;for(let t=0;t<r.length;t++){const a=r[t],s=a.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=a.token:n|=s:e=a}t.push(An(e,n))}else t.push(An(r))}return t}function Sn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const In=Sn(tn("Inject",e=>({token:e})),-1),_n=Sn(tn("Optional"),8),En=Sn(tn("SkipSelf"),4);let Tn,Cn;function Nn(e){var t;return(null===(t=function(){if(void 0===Tn&&(Tn=null,V.trustedTypes))try{Tn=V.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Tn}())||void 0===t?void 0:t.createHTML(e))||e}function Mn(e){var t;return(null===(t=function(){if(void 0===Cn&&(Cn=null,V.trustedTypes))try{Cn=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Cn}())||void 0===t?void 0:t.createHTML(e))||e}class Fn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class Rn extends Fn{getTypeName(){return"HTML"}}class Dn extends Fn{getTypeName(){return"Style"}}class On extends Fn{getTypeName(){return"Script"}}class zn extends Fn{getTypeName(){return"URL"}}class Pn extends Fn{getTypeName(){return"ResourceURL"}}function $n(e){return e instanceof Fn?e.changingThisBreaksApplicationSecurity:e}function Ln(e,t){const n=Vn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Vn(e){return e instanceof Fn&&e.getTypeName()||null}function Bn(e){return new Rn(e)}function Wn(e){return new Dn(e)}function jn(e){return new On(e)}function Hn(e){return new zn(e)}function Un(e){return new Pn(e)}class Gn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Nn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class qn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Nn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Nn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(e){return(e=String(e)).match(Kn)||e.match(Xn)?e:"unsafe:"+e}function Yn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Jn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Qn=Yn("area,br,col,hr,img,wbr"),er=Yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tr=Yn("rp,rt"),nr=Jn(tr,er),rr=Jn(Qn,Jn(er,Yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(tr,Yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nr),ar=Yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Yn("srcset"),ir=Jn(ar,sr,Yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Yn("script,style,template");class lr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!rr.hasOwnProperty(t))return this.sanitizedSomething=!0,!or.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let a=0;a<n.length;a++){const e=n.item(a),t=e.name,s=t.toLowerCase();if(!ir.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let i=e.value;ar[s]&&(i=Zn(i)),sr[s]&&(r=i,i=(r=String(r)).split(",").map(e=>Zn(e.trim())).join(", ")),this.buf.push(" ",t,'="',cr(i),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();rr.hasOwnProperty(t)&&!Qn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(cr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function cr(e){return e.replace(/&/g,"&amp;").replace(ur,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dr;function pr(e,t){let n=null;try{dr=dr||function(e){const t=new qn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Nn(""),"text/html")}catch(e){return!1}}()?new Gn(t):t}(e);let r=t?String(t):"";n=dr.getInertBodyElement(r);let a=5,s=r;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,r=s,s=n.innerHTML,n=dr.getInertBodyElement(r)}while(r!==s);return Nn((new lr).sanitizeChildren(fr(n)||n))}finally{if(n){const e=fr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function fr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var mr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function gr(e){const t=br();return t?Mn(t.sanitize(mr.HTML,e)||""):Ln(e,"HTML")?Mn($n(e)):pr(Ie(),y(e))}function yr(e){const t=br();return t?t.sanitize(mr.URL,e)||"":Ln(e,"URL")?$n(e):Zn(y(e))}function br(){const e=Be();return e&&e[12]}function xr(e,t){e.__ngContext__=t}function vr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ar(e){return e.ngDebugContext}function wr(e){return e.ngOriginalError}function kr(e,...t){e.error(...t)}class Sr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||kr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Ar(e)?Ar(e):this._findContext(wr(e)):null}_findOriginalError(e){let t=wr(e);for(;t&&wr(t);)t=wr(t);return t}}const Ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function _r(e){return e.ownerDocument.defaultView}function Er(e){return e instanceof Function?e():e}var Tr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Cr(e,t){return(void 0)(e,t)}function Nr(e){const t=e[3];return ce(t)?t[3]:t}function Mr(e){return Rr(e[13])}function Fr(e){return Rr(e[4])}function Rr(e){for(;null!==e&&!ce(e);)e=e[4];return e}function Dr(e,t,n,r,a){if(null!=r){let s,i=!1;ce(r)?s=r:he(r)&&(i=!0,r=r[0]);const o=Te(r);0===e&&null!==n?null==a?Wr(t,n,o):Br(t,n,o,a||null,!0):1===e&&null!==n?Br(t,n,o,a||null,!0):2===e?function(e,t,n){const r=Hr(e,t);r&&function(e,t,n,r){_e(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,o,i):3===e&&t.destroyNode(o),null!=s&&function(e,t,n,r,a){const s=n[7];s!==Te(n)&&Dr(t,e,r,s,a);for(let i=ue;i<n.length;i++){const a=n[i];Jr(a[1],a,e,t,r,s)}}(t,e,s,n,a)}}function Or(e,t,n){return _e(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function zr(e,t){const n=e[9],r=n.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,$e(a,-1)),n.splice(r,1)}function Pr(e,t){if(e.length<=ue)return;const n=ue+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&zr(s,r),t>0&&(e[n-1][4]=r[4]);const i=un(e,ue+t);Jr(r[1],a=r,a[11],2,null,null),a[0]=null,a[6]=null;const o=i[19];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}var a;return r}function $r(e,t){if(!(256&t[2])){const n=t[11];_e(n)&&n.destroyNode&&Jr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Lr(e[1],e);for(;t;){let n=null;if(he(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)he(t)&&Lr(t[1],t),t=t[3];null===t&&(t=e),he(t)&&Lr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Lr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof kt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],a=t[n+1];try{a.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let a=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],i="function"==typeof e?e(t):Te(t[e]),o=r[a=n[s+2]],l=n[s+3];"boolean"==typeof l?i.removeEventListener(n[s],o,l):l>=0?r[a=l]():r[a=-l].unsubscribe(),s+=2}else{const e=r[a=n[s+1]];n[s].call(e)}if(null!==r){for(let e=a+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&_e(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&ce(t[3])){n!==t[3]&&zr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Vr(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===O.None||t===O.Emulated)return null}return Ne(r,n)}(e,t.parent,n)}function Br(e,t,n,r,a){_e(e)?e.insertBefore(t,n,r,a):t.insertBefore(n,r,a)}function Wr(e,t,n){_e(e)?e.appendChild(t,n):t.appendChild(n)}function jr(e,t,n,r,a){null!==r?Br(e,t,n,r,a):Wr(e,t,n)}function Hr(e,t){return _e(e)?e.parentNode(t):t.parentNode}function Ur(e,t,n){return Gr(e,t,n)}let Gr=function(e,t,n){return 40&e.type?Ne(e,n):null};function qr(e,t,n,r){const a=Vr(e,r,t),s=t[11],i=Ur(r.parent||t[6],r,t);if(null!=a)if(Array.isArray(n))for(let o=0;o<n.length;o++)jr(s,a,n[o],i,!1);else jr(s,a,n,i,!1)}function Kr(e,t){if(null!==t){const n=t.type;if(3&n)return Ne(t,e);if(4&n)return Zr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Kr(e,n);{const n=e[t.index];return ce(n)?Zr(-1,n):Te(n)}}if(32&n)return Cr(t,e)()||Te(e[t.index]);{const n=Xr(e,t);return null!==n?Array.isArray(n)?n[0]:Kr(Nr(e[16]),n):Kr(e,t.next)}}return null}function Xr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Zr(e,t){const n=ue+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Kr(e,r)}return t[7]}function Yr(e,t,n,r,a,s,i){for(;null!=n;){const o=r[n.index],l=n.type;if(i&&0===t&&(o&&xr(Te(o),r),n.flags|=4),64!=(64&n.flags))if(8&l)Yr(e,t,n.child,r,a,s,!1),Dr(t,e,a,o,s);else if(32&l){const i=Cr(n,r);let l;for(;l=i();)Dr(t,e,a,l,s);Dr(t,e,a,o,s)}else 16&l?Qr(e,t,r,n,a,s):Dr(t,e,a,o,s);n=i?n.projectionNext:n.next}}function Jr(e,t,n,r,a,s){Yr(n,r,e.firstChild,t,a,s,!1)}function Qr(e,t,n,r,a,s){const i=n[16],o=i[6].projection[r.projection];if(Array.isArray(o))for(let l=0;l<o.length;l++)Dr(t,e,a,o[l],s);else Yr(e,t,o,i[3],a,s,!0)}function ea(e,t,n){_e(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ta(e,t,n){_e(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function na(e,t,n){let r=e.length;for(;;){const a=e.indexOf(t,n);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const n=t.length;if(a+n===r||e.charCodeAt(a+n)<=32)return a}n=a+1}}const ra="ng-template";function aa(e,t,n){let r=0;for(;r<e.length;){let a=e[r++];if(n&&"class"===a){if(a=e[r],-1!==na(a.toLowerCase(),t,0))return!0}else if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function sa(e){return 4===e.type&&e.value!==ra}function ia(e,t,n){return t===(4!==e.type||n?e.value:ra)}function oa(e,t,n){let r=4;const a=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(It(e[t]))return t;return e.length}(a);let i=!1;for(let o=0;o<t.length;o++){const l=t[o];if("number"!=typeof l){if(!i)if(4&r){if(r=2|1&r,""!==l&&!ia(e,l,n)||""===l&&1===t.length){if(la(r))return!1;i=!0}}else{const u=8&r?l:t[++o];if(8&r&&null!==e.attrs){if(!aa(e.attrs,u,n)){if(la(r))return!1;i=!0}continue}const h=ua(8&r?"class":l,a,sa(e),n);if(-1===h){if(la(r))return!1;i=!0;continue}if(""!==u){let e;e=h>s?"":a[h+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==na(t,u,0)||2&r&&u!==e){if(la(r))return!1;i=!0}}}}else{if(!i&&!la(r)&&!la(l))return!1;if(i&&la(l))continue;i=!1,r=l|1&r}}return la(r)||i}function la(e){return 0==(1&e)}function ua(e,t,n,r){if(null===t)return-1;let a=0;if(r||!n){let n=!1;for(;a<t.length;){const r=t[a];if(r===e)return a;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++a];for(;"string"==typeof e;)e=t[++a];continue}if(4===r)break;if(0===r){a+=4;continue}}a+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ha(e,t,n=!1){for(let r=0;r<t.length;r++)if(oa(e,t[r],n))return!0;return!1}function ca(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function da(e,t){return e?":not("+t.trim()+")":t}function pa(e){let t=e[0],n=1,r=2,a="",s=!1;for(;n<e.length;){let i=e[n];if("string"==typeof i)if(2&r){const t=e[++n];a+="["+i+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?a+="."+i:4&r&&(a+=" "+i);else""===a||la(i)||(t+=da(s,a),a=""),r=i,s=s||!la(r);n++}return""!==a&&(t+=da(s,a)),t}const fa={};function ma(e){ga(We(),Be(),pt()+e,Xe())}function ga(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&yt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&bt(t,r,0,n)}ft(n)}function ya(e,t){return e<<17|t<<2}function ba(e){return e>>17&32767}function xa(e){return 2|e}function va(e){return(131068&e)>>2}function Aa(e,t){return-131069&e|t<<2}function wa(e){return 1|e}function ka(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const a=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];at(a),n.contentQueries(2,t[s],s)}}}function Sa(e,t,n,r,a,s,i,o,l,u){const h=t.blueprint.slice();return h[0]=a,h[2]=140|r,Pe(h),h[3]=h[15]=e,h[8]=n,h[10]=i||e&&e[10],h[11]=o||e&&e[11],h[12]=l||e&&e[12]||null,h[9]=u||e&&e[9]||null,h[6]=s,h[16]=2==t.type?e[16]:h,h}function Ia(e,t,n,r,a){let s=e.data[t];if(null===s)s=function(e,t,n,r,a){const s=Ue(),i=qe(),o=e.data[t]=function(e,t,n,r,a,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,i?s:s&&s.parent,n,t,r,a);return null===e.firstChild&&(e.firstChild=o),null!==s&&(i?null==s.child&&null!==o.parent&&(s.child=o):null===s.next&&(s.next=o)),o}(e,t,n,r,a),Le.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=a;const e=function(){const e=Le.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ge(s,!0),s}function _a(e,t,n,r){if(0===n)return-1;const a=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return a}function Ea(e,t,n){ot(t);try{const r=e.viewQuery;null!==r&&rs(1,r,n);const a=e.template;null!==a&&Na(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ka(e,t),e.staticViewQueries&&rs(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Ja(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,dt()}}function Ta(e,t,n,r){const a=t[2];if(256==(256&a))return;ot(t);const s=Xe();try{Pe(t),Le.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Na(e,t,n,2,r);const i=3==(3&a);if(!s)if(i){const n=e.preOrderCheckHooks;null!==n&&yt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&bt(t,n,0,null),xt(t,0)}if(function(e){for(let t=Mr(e);null!==t;t=Fr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&$e(r,1),n[2]|=1024}}}(t),function(e){for(let t=Mr(e);null!==t;t=Fr(t))for(let e=ue;e<t.length;e++){const n=t[e],r=n[1];Oe(n)&&Ta(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&ka(e,t),!s)if(i){const n=e.contentCheckHooks;null!==n&&yt(t,n)}else{const n=e.contentHooks;null!==n&&bt(t,n,1),xt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)ft(~r);else{const a=r,s=n[++e],i=n[++e];et(s,a),i(2,t[a])}}}finally{ft(-1)}}(e,t);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)Za(e,t[n])}(t,o);const l=e.viewQuery;if(null!==l&&rs(2,l,r),!s)if(i){const n=e.viewCheckHooks;null!==n&&yt(t,n)}else{const n=e.viewHooks;null!==n&&bt(t,n,2),xt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,$e(t[3],-1))}finally{dt()}}function Ca(e,t,n,r){const a=t[10],s=!Xe(),i=De(t);try{s&&!i&&a.begin&&a.begin(),i&&Ea(e,t,r),Ta(e,t,n,r)}finally{s&&!i&&a.end&&a.end()}}function Na(e,t,n,r,a){const s=pt(),i=2&r;try{ft(-1),i&&t.length>le&&ga(e,t,le,Xe()),n(r,a)}finally{ft(s)}}function Ma(e,t,n){if(de(t)){const r=t.directiveEnd;for(let a=t.directiveStart;a<r;a++){const t=e.data[a];t.contentQueries&&t.contentQueries(1,n[a],a)}}}function Fa(e,t,n){Ve()&&(function(e,t,n,r){const a=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ot(n,t),xr(r,t);const i=n.initialInputs;for(let o=a;o<s;o++){const r=e.data[o],s=me(r);s&&Ga(t,n,r);const l=qt(t,e,o,n);xr(l,t),null!==i&&qa(0,o-a,l,r,0,i),s&&(Re(n.index,t)[8]=l)}}(e,t,n,Ne(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,a=n.directiveEnd,s=n.index,i=Le.lFrame.currentDirectiveIndex;try{ft(s);for(let n=r;n<a;n++){const r=e.data[n],a=t[n];tt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ba(r,a)}}finally{ft(-1),tt(i)}}(e,t,n))}function Ra(e,t,n=Ne){const r=t.localNames;if(null!==r){let a=t.index+1;for(let s=0;s<r.length;s+=2){const i=r[s+1],o=-1===i?n(t,e):e[i];e[a++]=o}}}function Da(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Oa(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Oa(e,t,n,r,a,s,i,o,l,u){const h=le+r,c=h+a,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:fa);return n}(h,c),p="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:o,declTNode:t,data:d.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:c,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof i?i():i,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function za(e,t,n,r){const a=ss(t);null===n?a.push(r):(a.push(n),e.firstCreatePass&&is(e).push(r,a.length-1))}function Pa(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const a=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,a):n[r]=[t,a]}return n}function $a(e,t,n,r,a,s,i,o){const l=Ne(t,n);let u,h=t.inputs;var c;!o&&null!=h&&(u=h[r])?(ls(e,n,u,r,a),pe(t)&&function(e,t){const n=Re(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,a=null!=i?i(a,t.value||"",r):a,_e(s)?s.setProperty(l,r,a):_t(r)||(l.setProperty?l.setProperty(r,a):l[r]=a))}function La(e,t,n,r){let a=!1;if(Ve()){const s=function(e,t,n){const r=e.directiveRegistry;let a=null;if(r)for(let s=0;s<r.length;s++){const i=r[s];ha(n,i.selectors,!1)&&(a||(a=[]),Lt(Ot(n,t),e,i.type),me(i)?(Wa(e,n),a.unshift(i)):a.push(i))}return a}(e,t,n),i=null===r?null:{"":-1};if(null!==s){a=!0,Ha(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,o=!1,l=_a(e,t,s.length,null);for(let a=0;a<s.length;a++){const u=s[a];n.mergedAttrs=Et(n.mergedAttrs,u.hostAttrs),Ua(e,n,t,l,u),ja(l,u,i),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const h=u.type.prototype;!r&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),o||!h.ngOnChanges&&!h.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),o=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,a=t.attrs,s=[];let i=null,o=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,u=null===a||sa(t)?null:Ka(n,a);s.push(u),i=Pa(n,l,i),o=Pa(e.outputs,l,o)}null!==i&&(i.hasOwnProperty("class")&&(t.flags|=16),i.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=i,t.outputs=o}(e,n)}i&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const a=n[t[e+1]];if(null==a)throw new g("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],a)}}}(n,r,i)}return n.mergedAttrs=Et(n.mergedAttrs,n.attrs),a}function Va(e,t,n,r,a,s){const i=s.hostBindings;if(i){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,a,i)}}function Ba(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Wa(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ja(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;me(t)&&(n[""]=e)}}function Ha(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ua(e,t,n,r,a){e.data[r]=a;const s=a.factory||(a.factory=ge(a.type)),i=new kt(s,me(a),null);e.blueprint[r]=i,n[r]=i,Va(e,t,0,r,_a(e,n,a.hostVars,fa),a)}function Ga(e,t,n){const r=Ne(t,e),a=Da(n),s=e[10],i=Qa(e,Sa(e,a,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=i}function qa(e,t,n,r,a,s){const i=s[t];if(null!==i){const e=r.setInput;for(let t=0;t<i.length;){const a=i[t++],s=i[t++],o=i[t++];null!==e?r.setInput(n,o,a,s):n[s]=o}}}function Ka(e,t){let n=null,r=0;for(;r<t.length;){const a=t[r];if(0!==a)if(5!==a){if("number"==typeof a)break;e.hasOwnProperty(a)&&(null===n&&(n=[]),n.push(a,e[a],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Xa(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Za(e,t){const n=Re(t,e);if(Oe(n)){const e=n[1];80&n[2]?Ta(e,n,e.template,n[8]):n[5]>0&&Ya(n)}}function Ya(e){for(let n=Mr(e);null!==n;n=Fr(n))for(let e=ue;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ta(e,t,e.template,t[8])}else t[5]>0&&Ya(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Re(t[n],e);Oe(r)&&r[5]>0&&Ya(r)}}function Ja(e,t){const n=Re(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ea(r,n,n[8])}function Qa(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function es(e){for(;e;){e[2]|=64;const t=Nr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ts(e,t,n){const r=t[10];r.begin&&r.begin();try{Ta(e,t,e.template,n)}catch(a){throw os(t,a),a}finally{r.end&&r.end()}}function ns(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=vr(n),a=r[1];Ca(a,r,a.template,n)}}(e[8])}function rs(e,t,n){at(0),t(e,n)}const as=(()=>Promise.resolve(null))();function ss(e){return e[7]||(e[7]=[])}function is(e){return e.cleanup||(e.cleanup=[])}function os(e,t){const n=e[9],r=n?n.get(Sr,null):null;r&&r.handleError(t)}function ls(e,t,n,r,a){for(let s=0;s<n.length;){const i=n[s++],o=n[s++],l=t[i],u=e.data[i];null!==u.setInput?u.setInput(l,a,r,o):l[o]=a}}function us(e,t,n){let r=n?e.styles:null,a=n?e.classes:null,s=0;if(null!==t)for(let i=0;i<t.length;i++){const e=t[i];"number"==typeof e?s=e:1==s?a=c(a,e):2==s&&(r=c(r,e+": "+t[++i]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=a:e.classesWithoutHost=a}const hs=new nn("INJECTOR",-1);class cs{get(e,t=fn){if(t===fn){const t=new Error(`NullInjectorError: No provider for ${h(e)}!`);throw t.name="NullInjectorError",t}return t}}const ds=new nn("Set Injector scope."),ps={},fs={};let ms=void 0;function gs(){return void 0===ms&&(ms=new cs),ms}function ys(e,t=null,n=null,r){return new bs(e,n,t||gs(),r)}class bs{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];t&&on(t,n=>this.processProvider(n,e,t)),on([e],e=>this.processInjectorType(e,[],a)),this.records.set(hs,As(void 0,this));const s=this.records.get(ds);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:h(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=fn,n=C.Default){this.assertNotDestroyed();const r=xn(this);try{if(!(n&C.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(a=e)||"object"==typeof a&&a instanceof nn)&&w(e);t=n&&this.injectableDefInScope(n)?As(xs(e),ps):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&C.Self?gs():this.parent).get(e,t=n&C.Optional&&t===fn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(h(e)),r)throw s;return function(e,t,n,r){const a=e.ngTempTokenPath;throw t[gn]&&a.unshift(t[gn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let a=h(t);if(Array.isArray(t))a=t.map(h).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):h(r)))}a=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${a}]: ${e.replace(mn,"\n  ")}`}("\n"+e.message,a,n,r),e.ngTokenPath=a,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{xn(r)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(h(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let r=S(e);const a=null==r&&e.ngModule||void 0,s=void 0===a?e:a,i=-1!==n.indexOf(s);if(void 0!==a&&(r=S(a)),null==r)return!1;if(null!=r.imports&&!i){let e;n.push(s);try{on(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];on(r,e=>this.processProvider(e,n,r||W))}}this.injectorDefTypes.add(s);const o=ge(s)||(()=>new s);this.records.set(s,As(o,ps));const l=r.providers;if(null!=l&&!i){const t=e;on(l,e=>this.processProvider(e,t,l))}return void 0!==a&&void 0!==e.providers}processProvider(e,t,n){let r=ks(e=f(e))?e:f(e&&e.provide);const a=function(e,t,n){return ws(e)?As(void 0,e.useValue):As(vs(e),ps)}(e);if(ks(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=As(void 0,ps,!0),t.factory=()=>kn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,a)}hydrate(e,t){var n;return t.value===ps&&(t.value=fs,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function xs(e){const t=w(e),n=null!==t?t.factory:ge(e);if(null!==n)return n;if(e instanceof nn)throw new Error(`Token ${h(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=hn(t,"?");throw new Error(`Can't resolve all parameters for ${h(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[I]||e[E]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function vs(e,t,n){let r=void 0;if(ks(e)){const t=f(e);return ge(t)||xs(t)}if(ws(e))r=()=>f(e.useValue);else if((a=e)&&a.useFactory)r=()=>e.useFactory(...kn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>An(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ge(t)||xs(t);r=()=>new t(...kn(e.deps))}var a;return r}function As(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ws(e){return null!==e&&"object"==typeof e&&yn in e}function ks(e){return"function"==typeof e}const Ss=function(e,t,n){return function(e,t=null,n=null,r){const a=ys(e,t,n,r);return a._resolveInjectorDefTypes(),a}({name:n},t,e,n)};let Is=(()=>{class e{static create(e,t){return Array.isArray(e)?Ss(e,t,""):Ss(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=fn,e.NULL=new cs,e.\u0275prov=v({token:e,providedIn:"any",factory:()=>An(hs)}),e.__NG_ELEMENT_ID__=-1,e})();function _s(e,t){gt(vr(e)[1],He())}function Es(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let a=void 0;if(me(e))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(n){r.push(a);const t=e;t.inputs=Ts(e.inputs),t.declaredInputs=Ts(e.declaredInputs),t.outputs=Ts(e.outputs);const n=a.hostBindings;n&&Ms(e,n);const s=a.viewQuery,i=a.contentQueries;if(s&&Cs(e,s),i&&Ns(e,i),u(e.inputs,a.inputs),u(e.declaredInputs,a.declaredInputs),u(e.outputs,a.outputs),me(a)&&a.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(a.data.animation)}}const t=a.features;if(t)for(let r=0;r<t.length;r++){const a=t[r];a&&a.ngInherit&&a(e),a===Es&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const a=e[r];a.hostVars=t+=a.hostVars,a.hostAttrs=Et(a.hostAttrs,n=Et(n,a.hostAttrs))}}(r)}function Ts(e){return e===B?{}:e===W?[]:e}function Cs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ns(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,a)=>{t(e,r,a),n(e,r,a)}:t}function Ms(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Fs=null;function Rs(){if(!Fs){const e=V.Symbol;if(e&&e.iterator)Fs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Fs=n)}}}return Fs}class Ds{constructor(e){this.wrapped=e}static wrap(e){return new Ds(e)}static unwrap(e){return Ds.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ds}}function Os(e){return!!zs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Rs()in e)}function zs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ps(e,t,n){return e[t]=n}function $s(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ls(e,t,n,r){const a=Be();return $s(a,Je(),t)&&(We(),function(e,t,n,r,a,s){const i=Ne(e,t);!function(e,t,n,r,a,s,i){if(null==s)_e(e)?e.removeAttribute(t,a,n):t.removeAttribute(a);else{const o=null==i?y(s):i(s,r||"",a);_e(e)?e.setAttribute(t,a,o,n):n?t.setAttributeNS(n,a,o):t.setAttribute(a,o)}}(t[11],i,s,e.value,n,r,a)}(mt(),a,e,t,n,r)),Ls}function Vs(e,t,n,r){return $s(e,Je(),n)?t+y(n)+r:fa}function Bs(e,t,n,r,a,s,i,o){const l=Be(),u=We(),h=e+le,c=u.firstCreatePass?function(e,t,n,r,a,s,i,o,l){const u=t.consts,h=Ia(t,e,4,i||null,ze(u,o));La(t,n,h,ze(u,l)),gt(t,h);const c=h.tViews=Oa(2,h,r,a,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,h),c.queries=t.queries.embeddedTView(h)),h}(h,u,l,t,n,r,a,s,i):u.data[h];Ge(c,!1);const d=l[11].createComment("");qr(u,l,d,c),xr(d,l),Qa(l,l[h]=Xa(d,l,d,c)),fe(c)&&Fa(u,l,c),null!=i&&Ra(l,c,o)}function Ws(e){return Fe(Le.lFrame.contextLView,le+e)}function js(e,t=C.Default){const n=Be();return null===n?An(e,t):Wt(He(),n,f(e),t)}function Hs(e,t,n){const r=Be();return $s(r,Je(),t)&&$a(We(),mt(),r,e,t,r[11],n,!1),Hs}function Us(e,t,n,r,a){const s=a?"class":"style";ls(e,n,t.inputs[s],s,r)}function Gs(e,t,n,r){const a=Be(),s=We(),i=le+e,o=a[11],l=a[i]=Or(o,t,Le.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,a,s,i){const o=t.consts,l=Ia(t,e,2,a,ze(o,s));return La(t,n,l,ze(o,i)),null!==l.attrs&&us(l,l.attrs,!1),null!==l.mergedAttrs&&us(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(i,s,a,0,t,n,r):s.data[i];Ge(u,!0);const h=u.mergedAttrs;null!==h&&St(o,l,h);const c=u.classes;null!==c&&ta(o,l,c);const d=u.styles;null!==d&&ea(o,l,d),64!=(64&u.flags)&&qr(s,a,l,u),0===Le.lFrame.elementDepthCount&&xr(l,a),Le.lFrame.elementDepthCount++,fe(u)&&(Fa(s,a,u),Ma(s,u,a)),null!==r&&Ra(a,u)}function qs(){let e=He();qe()?Ke():(e=e.parent,Ge(e,!1));const t=e;Le.lFrame.elementDepthCount--;const n=We();n.firstCreatePass&&(gt(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Us(n,t,Be(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Us(n,t,Be(),t.stylesWithoutHost,!1)}function Ks(e,t,n,r){Gs(e,t,n,r),qs()}function Xs(e,t,n){const r=Be(),a=We(),s=e+le,i=a.firstCreatePass?function(e,t,n,r,a){const s=t.consts,i=ze(s,r),o=Ia(t,e,8,"ng-container",i);return null!==i&&us(o,i,!0),La(t,n,o,ze(s,a)),null!==t.queries&&t.queries.elementStart(t,o),o}(s,a,r,t,n):a.data[s];Ge(i,!0);const o=r[s]=r[11].createComment("");qr(a,r,o,i),xr(o,r),fe(i)&&(Fa(a,r,i),Ma(a,i,r)),null!=n&&Ra(r,i)}function Zs(){let e=He();const t=We();qe()?Ke():(e=e.parent,Ge(e,!1)),t.firstCreatePass&&(gt(t,e),de(e)&&t.queries.elementEnd(e))}function Ys(e,t,n){Xs(e,t,n),Zs()}function Js(){return Be()}function Qs(e){return!!e&&"function"==typeof e.then}function ei(e){return!!e&&"function"==typeof e.subscribe}const ti=ei;function ni(e,t,n,r){const a=Be(),s=We(),i=He();return function(e,t,n,r,a,s,i,o){const l=fe(r),u=e.firstCreatePass&&is(e),h=ss(t);let c=!0;if(3&r.type||o){const d=Ne(r,t),p=o?o(d):d,f=h.length,m=o?e=>o(Te(e[r.index])):r.index;if(_e(n)){let i=null;if(!o&&l&&(i=function(e,t,n,r){const a=e.cleanup;if(null!=a)for(let s=0;s<a.length-1;s+=2){const e=a[s];if(e===n&&a[s+1]===r){const e=t[7],n=a[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,a,r.index)),null!==i)(i.__ngLastListenerFn__||i).__ngNextListenerFn__=s,i.__ngLastListenerFn__=s,c=!1;else{s=ai(r,t,0,s,!1);const e=n.listen(p,a,s);h.push(s,e),u&&u.push(a,m,f,f+1)}}else s=ai(r,t,0,s,!0),p.addEventListener(a,s,i),h.push(s),u&&u.push(a,m,f,i)}else s=ai(r,t,0,s,!1);const d=r.outputs;let p;if(c&&null!==d&&(p=d[a])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),i=h.length;h.push(s,e),u&&u.push(a,r.index,i,-(i+1))}}}(s,a,a[11],i,e,t,!!n,r),ni}function ri(e,t,n,r){try{return!1!==n(r)}catch(a){return os(e,a),!1}}function ai(e,t,n,r,a){return function n(s){if(s===Function)return r;const i=2&e.flags?Re(e.index,t):t;0==(32&t[2])&&es(i);let o=ri(t,0,r,s),l=n.__ngNextListenerFn__;for(;l;)o=ri(t,0,l,s)&&o,l=l.__ngNextListenerFn__;return a&&!1===o&&(s.preventDefault(),s.returnValue=!1),o}}function si(e=1){return function(e){return(Le.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Le.lFrame.contextLView))[8]}(e)}function ii(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let a=0;a<t.length;a++){const s=t[a];if("*"!==s){if(null===r?ha(e,s,!0):ca(r,s))return a}else n=a}return n}function oi(e){const t=Be()[16][6];if(!t.projection){const n=t.projection=hn(e?e.length:1,null),r=n.slice();let a=t.child;for(;null!==a;){const t=e?ii(a,e):0;null!==t&&(r[t]?r[t].projectionNext=a:n[t]=a,r[t]=a),a=a.next}}}function li(e,t=0,n){const r=Be(),a=We(),s=Ia(a,le+e,16,null,n||null);null===s.projection&&(s.projection=t),Ke(),64!=(64&s.flags)&&function(e,t,n){Qr(t[11],0,t,n,Vr(e,n,t),Ur(n.parent||t[6],n,t))}(a,r,s)}function ui(e,t,n){return hi(e,"",t,"",n),ui}function hi(e,t,n,r,a){const s=Be(),i=Vs(s,t,n,r);return i!==fa&&$a(We(),mt(),s,e,i,s[11],a,!1),hi}function ci(e,t,n,r,a){const s=e[n+1],i=null===t;let o=r?ba(s):va(s),l=!1;for(;0!==o&&(!1===l||i);){const n=e[o+1];di(e[o],t)&&(l=!0,e[o+1]=r?wa(n):xa(n)),o=r?ba(n):va(n)}l&&(e[n+1]=r?xa(s):wa(s))}function di(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&pn(e,t)>=0}const pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fi(e){return e.substring(pi.key,pi.keyEnd)}function mi(e,t){const n=pi.textEnd;return n===t?-1:(t=pi.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,pi.key=t,n),gi(e,t,n))}function gi(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function yi(e,t,n){return Ai(e,t,n,!1),yi}function bi(e,t){return Ai(e,t,null,!0),bi}function xi(e){wi(cn,vi,e,!0)}function vi(e,t){for(let n=function(e){return function(e){pi.key=0,pi.keyEnd=0,pi.value=0,pi.valueEnd=0,pi.textEnd=e.length}(e),mi(e,gi(e,0,pi.textEnd))}(t);n>=0;n=mi(t,n))cn(e,fi(t),!0)}function Ai(e,t,n,r){const a=Be(),s=We(),i=Qe(2);s.firstUpdatePass&&Si(s,e,i,r),t!==fa&&$s(a,i,t)&&Ei(s,s.data[pt()],a,a[11],e,a[i+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=h($n(e)))),e}(t,n),r,i)}function wi(e,t,n,r){const a=We(),s=Qe(2);a.firstUpdatePass&&Si(a,null,s,r);const i=Be();if(n!==fa&&$s(i,s,n)){const o=a.data[pt()];if(Ni(o,r)&&!ki(a,s)){let e=r?o.classesWithoutHost:o.stylesWithoutHost;null!==e&&(n=c(e,n||"")),Us(a,o,i,n,r)}else!function(e,t,n,r,a,s,i,o){a===fa&&(a=W);let l=0,u=0,h=0<a.length?a[0]:null,c=0<s.length?s[0]:null;for(;null!==h||null!==c;){const d=l<a.length?a[l+1]:void 0,p=u<s.length?s[u+1]:void 0;let f=null,m=void 0;h===c?(l+=2,u+=2,d!==p&&(f=c,m=p)):null===c||null!==h&&h<c?(l+=2,f=h):(u+=2,f=c,m=p),null!==f&&Ei(e,t,n,r,f,m,i,o),h=l<a.length?a[l]:null,c=u<s.length?s[u]:null}}(a,o,i,i[11],i[s+1],i[s+1]=function(e,t,n){if(null==n||""===n)return W;const r=[],a=$n(n);if(Array.isArray(a))for(let s=0;s<a.length;s++)e(r,a[s],!0);else if("object"==typeof a)for(const s in a)a.hasOwnProperty(s)&&e(r,s,a[s]);else"string"==typeof a&&t(r,a);return r}(e,t,n),r,s)}}function ki(e,t){return t>=e.expandoStartIndex}function Si(e,t,n,r){const a=e.data;if(null===a[n+1]){const s=a[pt()],i=ki(e,n);Ni(s,r)&&null===t&&!i&&(t=!1),t=function(e,t,n,r){const a=nt(e);let s=r?t.residualClasses:t.residualStyles;if(null===a)0===(r?t.classBindings:t.styleBindings)&&(n=_i(n=Ii(null,e,t,n,r),t.attrs,r),s=null);else{const i=t.directiveStylingLast;if(-1===i||e[i]!==a)if(n=Ii(a,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==va(r))return e[ba(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Ii(null,e,t,n[1],r),n=_i(n,t.attrs,r),function(e,t,n,r){e[ba(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r=void 0;const a=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<a;s++)r=_i(r,e[s].hostAttrs,n);return _i(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(a,s,t,r),function(e,t,n,r,a,s){let i=s?t.classBindings:t.styleBindings,o=ba(i),l=va(i);e[r]=n;let u,h=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||pn(e,u)>0)&&(h=!0)}else u=n;if(a)if(0!==l){const t=ba(e[o+1]);e[r+1]=ya(t,o),0!==t&&(e[t+1]=Aa(e[t+1],r)),e[o+1]=131071&e[o+1]|r<<17}else e[r+1]=ya(o,0),0!==o&&(e[o+1]=Aa(e[o+1],r)),o=r;else e[r+1]=ya(l,0),0===o?o=r:e[l+1]=Aa(e[l+1],r),l=r;h&&(e[r+1]=xa(e[r+1])),ci(e,u,r,!0),ci(e,u,r,!1),function(e,t,n,r,a){const s=a?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&pn(s,t)>=0&&(n[r+1]=wa(n[r+1]))}(t,u,e,r,s),i=ya(o,l),s?t.classBindings=i:t.styleBindings=i}(a,s,t,n,i,r)}}function Ii(e,t,n,r,a){let s=null;const i=n.directiveEnd;let o=n.directiveStylingLast;for(-1===o?o=n.directiveStart:o++;o<i&&(s=t[o],r=_i(r,s.hostAttrs,a),s!==e);)o++;return null!==e&&(n.directiveStylingLast=o),r}function _i(e,t,n){const r=n?1:2;let a=-1;if(null!==t)for(let s=0;s<t.length;s++){const i=t[s];"number"==typeof i?a=i:a===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),cn(e,i,!!n||t[++s]))}return void 0===e?null:e}function Ei(e,t,n,r,a,s,i,o){if(!(3&t.type))return;const l=e.data,u=l[o+1];Ci(1==(1&u)?Ti(l,t,n,a,va(u),i):void 0)||(Ci(s)||2==(2&u)&&(s=Ti(l,null,n,a,o,i)),function(e,t,n,r,a){const s=_e(e);if(t)a?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==a)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const i="string"==typeof a&&a.endsWith("!important");i&&(a=a.slice(0,-10),t|=Tr.Important),s?e.setStyle(n,r,a,t):n.style.setProperty(r,a,i?"important":"")}}}(r,i,Ce(pt(),n),a,s))}function Ti(e,t,n,r,a,s){const i=null===t;let o=void 0;for(;a>0;){const t=e[a],s=Array.isArray(t),l=s?t[1]:t,u=null===l;let h=n[a+1];h===fa&&(h=u?W:void 0);let c=u?dn(h,r):l===r?h:void 0;if(s&&!Ci(c)&&(c=dn(t,r)),Ci(c)&&(o=c,i))return o;const d=e[a+1];a=i?ba(d):va(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(o=dn(e,r))}return o}function Ci(e){return void 0!==e}function Ni(e,t){return 0!=(e.flags&(t?16:32))}function Mi(e,t=""){const n=Be(),r=We(),a=e+le,s=r.firstCreatePass?Ia(r,a,1,t,null):r.data[a],i=n[a]=function(e,t){return _e(e)?e.createText(t):e.createTextNode(t)}(n[11],t);qr(r,n,i,s),Ge(s,!1)}function Fi(e){return Ri("",e,""),Fi}function Ri(e,t,n){const r=Be(),a=Vs(r,e,t,n);return a!==fa&&function(e,t,n){const r=Ce(t,e);!function(e,t,n){_e(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,pt(),a),Ri}function Di(e,t,n){wi(cn,vi,Vs(Be(),e,t,n),!0)}function Oi(e,t,n){const r=Be();return $s(r,Je(),t)&&$a(We(),mt(),r,e,t,r[11],n,!0),Oi}function zi(e,t,n){const r=Be();if($s(r,Je(),t)){const a=We(),s=mt();$a(a,s,r,e,t,function(e,t,n){return(null===e||me(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}(nt(a.data),s,r),n,!0)}return zi}const Pi=void 0;var $i=["en",[["a","p"],["AM","PM"],Pi],[["AM","PM"],Pi,Pi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pi,"{1} 'at' {0}",Pi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Li={};function Vi(e,t,n){"string"!=typeof t&&(n=t,t=e[Ui.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),Li[t]=e,n&&(Li[t][Ui.ExtraData]=n)}function Bi(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Hi(t);if(n)return n;const r=t.split("-")[0];if(n=Hi(r),n)return n;if("en"===r)return $i;throw new Error(`Missing locale data for the locale "${e}".`)}function Wi(e){return Bi(e)[Ui.CurrencyCode]||null}function ji(e){return Bi(e)[Ui.PluralCase]}function Hi(e){return e in Li||(Li[e]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[e]),Li[e]}var Ui=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const Gi="en-US";let qi=Gi;function Ki(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(qi=e.toLowerCase().replace(/_/g,"-"))}function Xi(e,t,n,r,a){if(e=f(e),Array.isArray(e))for(let s=0;s<e.length;s++)Xi(e[s],t,n,r,a);else{const s=We(),i=Be();let o=ks(e)?e:f(e.provide),l=vs(e);const u=He(),h=1048575&u.providerIndexes,c=u.directiveStart,d=u.providerIndexes>>20;if(ks(e)||!e.multi){const r=new kt(l,a,js),p=Ji(o,t,a?h:h+d,c);-1===p?(Lt(Ot(u,i),s,o),Zi(s,e,t.length),t.push(o),u.directiveStart++,u.directiveEnd++,a&&(u.providerIndexes+=1048576),n.push(r),i.push(r)):(n[p]=r,i[p]=r)}else{const p=Ji(o,t,h+d,c),f=Ji(o,t,h,h+d),m=p>=0&&n[p],g=f>=0&&n[f];if(a&&!g||!a&&!m){Lt(Ot(u,i),s,o);const h=function(e,t,n,r,a){const s=new kt(e,n,js);return s.multi=[],s.index=t,s.componentProviders=0,Yi(s,a,r&&!n),s}(a?eo:Qi,n.length,a,r,l);!a&&g&&(n[f].providerFactory=h),Zi(s,e,t.length,0),t.push(o),u.directiveStart++,u.directiveEnd++,a&&(u.providerIndexes+=1048576),n.push(h),i.push(h)}else Zi(s,e,p>-1?p:f,Yi(n[a?f:p],l,!a&&r));!a&&r&&g&&n[f].componentProviders++}}}function Zi(e,t,n,r){const a=ks(t);if(a||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const i=e.destroyHooks||(e.destroyHooks=[]);if(!a&&t.multi){const e=i.indexOf(n);-1===e?i.push(n,[r,s]):i[e+1].push(r,s)}else i.push(n,s)}}}function Yi(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ji(e,t,n,r){for(let a=n;a<r;a++)if(t[a]===e)return a;return-1}function Qi(e,t,n,r){return to(this.multi,[])}function eo(e,t,n,r){const a=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=qt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),to(a,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],to(a,s);return s}function to(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function no(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=We();if(r.firstCreatePass){const a=me(e);Xi(n,r.data,r.blueprint,a,!0),Xi(t,r.data,r.blueprint,a,!1)}}(n,r?r(e):e,t)}}class ro{}class ao{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${h(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let so=(()=>{class e{}return e.NULL=new ao,e})();function io(...e){}function oo(e,t){return new uo(Ne(e,t))}const lo=function(){return oo(He(),Be())};let uo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=lo,e})();function ho(e){return e instanceof uo?e.nativeElement:e}class co{}let po=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>fo(),e})();const fo=function(){const e=Be(),t=Re(He().index,e);return function(e){return e[11]}(he(t)?t:e)};let mo=(()=>{class e{}return e.\u0275prov=v({token:e,providedIn:"root",factory:()=>null}),e})();class go{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yo=new go("12.0.5");class bo{constructor(){}supports(e){return Os(e)}create(e){return new vo(e)}}const xo=(e,t)=>t;class vo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xo}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,a=null;for(;t||n;){const s=!n||t&&t.currentIndex<So(n,r,a)?t:n,i=So(s,r,a),o=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{a||(a=[]);const e=i-r,t=o-r;if(e!=t){for(let n=0;n<e;n++){const r=n<a.length?a[n]:a[n]=0,s=r+n;t<=s&&s<e&&(a[n]=r+1)}a[s.previousIndex]=t-e}}i!==o&&e(s,i,o)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Os(e))throw new Error(`Error trying to diff '${h(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,a=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==a&&Object.is(a.trackById,r)?(s&&(a=this._verifyReinsertion(a,n,r,t)),Object.is(a.item,n)||this._addIdentityChange(a,n)):(a=this._mismatch(a,n,r,t),s=!0),a=a._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Rs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==a&&Object.is(a.trackById,r)?(s&&(a=this._verifyReinsertion(a,e,r,t)),Object.is(a.item,e)||this._addIdentityChange(a,e)):(a=this._mismatch(a,e,r,t),s=!0),a=a._next,t++}),this.length=t;return this._truncate(a),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let a;return null===e?a=this._itTail:(a=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,a,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,a,r)):e=this._addAfter(new Ao(t,n),a,r),e}_verifyReinsertion(e,t,n,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?e=this._reinsertAfter(a,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,a=e._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ko),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ko),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ao{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ko{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new wo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function So(e,t,n){const r=e.previousIndex;if(null===r)return r;let a=0;return n&&r<n.length&&(a=n[r]),r+t+a}class Io{constructor(){}supports(e){return e instanceof Map||zs(e)}create(){return new _o}}class _o{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||zs(e)))throw new Error(`Error trying to diff '${h(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,a=n._next;return r&&(r._next=a),a&&(a._prev=r),n._next=null,n._prev=null,n}const n=new Eo(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Eo{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function To(){return new Co([new bo])}let Co=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||To()),deps:[[e,new En,new _n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=v({token:e,providedIn:"root",factory:To}),e})();function No(){return new Mo([new Io])}let Mo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||No()),deps:[[e,new En,new _n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=v({token:e,providedIn:"root",factory:No}),e})();function Fo(e,t,n,r,a=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Te(s)),ce(s))for(let e=ue;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Fo(t[1],t,n,r)}const i=n.type;if(8&i)Fo(e,t,n.child,r);else if(32&i){const e=Cr(n,t);let a;for(;a=e();)r.push(a)}else if(16&i){const e=Xr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Nr(t[16]);Fo(n[1],n,e,r,!0)}}n=a?n.projectionNext:n.next}return r}class Ro{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Fo(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ce(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Pr(e,n),un(t,n))}this._attachedToViewContainer=!1}$r(this._lView[1],this._lView)}onDestroy(e){za(this._lView[1],this._lView,null,e)}markForCheck(){es(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ts(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ze(!0);try{ts(e,t,n)}finally{Ze(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Jr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Do extends Ro{constructor(e){super(e),this._view=e}detectChanges(){ns(this._view)}checkNoChanges(){!function(e){Ze(!0);try{ns(e)}finally{Ze(!1)}}(this._view)}get context(){return null}}const Oo=function(e){return function(e,t,n){if(pe(e)&&!n){const n=Re(e.index,t);return new Ro(n,n)}return 47&e.type?new Ro(t[16],t):null}(He(),Be(),16==(16&e))};let zo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Oo,e})();const Po=[new Io],$o=new Co([new bo]),Lo=new Mo(Po),Vo=function(){return Ho(He(),Be())};let Bo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Vo,e})();const Wo=Bo,jo=class extends Wo{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Sa(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ea(t,n,e),new Ro(n)}};function Ho(e,t){return 4&e.type?new jo(t,e,oo(e,t)):null}class Uo{}class Go{}const qo=function(){return Qo(He(),Be())};let Ko=(()=>{class e{}return e.__NG_ELEMENT_ID__=qo,e})();const Xo=Ko,Zo=class extends Xo{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return oo(this._hostTNode,this._hostLView)}get injector(){return new Zt(this._hostTNode,this._hostLView)}get parentInjector(){const e=$t(this._hostTNode,this._hostLView);if(Ct(e)){const t=Mt(e,this._hostLView),n=Nt(e);return new Zt(t[1].data[n+8],t)}return new Zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Yo(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ue}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,a){const s=n||this.parentInjector;if(!a&&null==e.ngModule&&s){const e=s.get(Uo,null);e&&(a=e)}const i=e.create(s,r,void 0,a);return this.insert(i.hostView,t),i}insert(e,t){const n=e._lView,r=n[1];if(ce(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Zo(t,t[6],t[3]);r.detach(r.indexOf(e))}}const a=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const a=ue+r,s=n.length;r>0&&(n[a-1][4]=t),r<s-ue?(t[4]=n[a],ln(n,ue+r,t)):(n.push(t),t[4]=null),t[3]=n;const i=t[17];null!==i&&n!==i&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(i,t);const o=t[19];null!==o&&o.insertView(e),t[2]|=128}(r,n,s,a);const i=Zr(a,s),o=n[11],l=Hr(o,s[7]);return null!==l&&function(e,t,n,r,a,s){r[0]=a,r[6]=t,Jr(e,r,n,1,a,s)}(r,s[6],o,n,l,i),e.attachToViewContainerRef(),ln(Jo(s),a,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Yo(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);n&&(un(Jo(this._lContainer),t),$r(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Pr(this._lContainer,t);return n&&null!=un(Jo(this._lContainer),t)?new Ro(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Yo(e){return e[8]}function Jo(e){return e[8]||(e[8]=[])}function Qo(e,t){let n;const r=t[e.index];if(ce(r))n=r;else{let a;if(8&e.type)a=Te(r);else{const n=t[11];a=n.createComment("");const r=Ne(e,t);Br(n,Hr(n,r),a,function(e,t){return _e(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Xa(r,t,a,e),Qa(t,n)}return new Zo(n,e,t)}const el={};class tl extends so{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ie(e);return new al(t,this.ngModule)}}function nl(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const rl=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ir});class al extends ro{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(pa).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return nl(this.componentDef.inputs)}get outputs(){return nl(this.componentDef.outputs)}create(e,t,n,r){const a=(r=r||this.ngModule)?function(e,t){return{get:(n,r,a)=>{const s=e.get(n,el,a);return s!==el||r===el?s:t.get(n,r,a)}}}(e,r.injector):e,s=a.get(co,Ee),i=a.get(mo,null),o=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(_e(e))return e.selectRootElement(t,n===O.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(o,n,this.componentDef.encapsulation):Or(s.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,c={components:[],scheduler:Ir,clean:as,playerHandler:null,flags:0},d=Oa(0,null,null,1,0,null,null,null,null,null),p=Sa(null,d,c,h,null,null,s,o,i,a);let f,m;ot(p);try{const e=function(e,t,n,r,a,s){const i=n[1];n[20]=e;const o=Ia(i,20,2,"#host",null),l=o.mergedAttrs=t.hostAttrs;null!==l&&(us(o,l,!0),null!==e&&(St(a,e,l),null!==o.classes&&ta(a,e,o.classes),null!==o.styles&&ea(a,e,o.styles)));const u=r.createRenderer(e,t),h=Sa(n,Da(t),null,t.onPush?64:16,n[20],o,r,u,null,null);return i.firstCreatePass&&(Lt(Ot(o,n),i,t.type),Wa(i,o),Ha(o,n.length,1)),Qa(n,h),n[20]=h}(u,this.componentDef,p,s,o);if(u)if(n)St(o,u,["ng-version",yo.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,a=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===a?""!==s&&t.push(s,e[++r]):8===a&&n.push(s);else{if(!la(a))break;a=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&St(o,u,e),t&&t.length>0&&ta(o,u,t.join(" "))}if(m=Me(d,le),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,a){const s=n[1],i=function(e,t,n){const r=He();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ua(e,r,t,_a(e,t,1,null),n));const a=qt(t,e,r.directiveStart,r);xr(a,t);const s=Ne(r,t);return s&&xr(s,t),a}(s,n,t);if(r.components.push(i),e[8]=i,a&&a.forEach(e=>e(i,t)),t.contentQueries){const e=He();t.contentQueries(1,i,e.directiveStart)}const o=He();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ft(o.index),Va(n[1],o,0,o.directiveStart,o.directiveEnd,t),Ba(t,i)),i}(e,this.componentDef,p,c,[_s]),Ea(d,p,null)}finally{dt()}return new sl(this.componentType,f,oo(m,p),p,m)}}class sl extends class{}{constructor(e,t,n,r,a){super(),this.location=n,this._rootLView=r,this._tNode=a,this.instance=t,this.hostView=this.changeDetectorRef=new Do(r),this.componentType=e}get injector(){return new Zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const il=new Map;class ol extends Uo{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tl(this);const n=oe(e),r=e[q]||null;r&&Ki(r),this._bootstrapComponents=Er(n.bootstrap),this._r3Injector=ys(e,t,[{provide:Uo,useValue:this},{provide:so,useValue:this.componentFactoryResolver}],h(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Is.THROW_IF_NOT_FOUND,n=C.Default){return e===Is||e===Uo||e===hs?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ll extends Go{constructor(e){super(),this.moduleType=e,null!==oe(e)&&function(e){const t=new Set;!function e(n){const r=oe(n,!0),a=r.id;null!==a&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${h(t)} vs ${h(t.name)}`)}(a,il.get(a),n),il.set(a,n));const s=Er(r.imports);for(const i of s)t.has(i)||(t.add(i),e(i))}(e)}(e)}create(e){return new ol(this.moduleType,e)}}function ul(e,t,n,r){return cl(Be(),Ye(),e,t,n,r)}function hl(e,t){const n=e[t];return n===fa?void 0:n}function cl(e,t,n,r,a,s){const i=t+n;return $s(e,i,a)?Ps(e,i+1,s?r.call(s,a):r(a)):hl(e,i+1)}function dl(e,t){const n=We();let r;const a=e+le;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new g("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[a]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(a,r.onDestroy)):r=n.data[a];const s=r.factory||(r.factory=ge(r.type)),i=M(js);try{const e=Rt(!1),t=s();return Rt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Be(),a,t),t}finally{M(i)}}function pl(e,t,n){const r=e+le,a=Be(),s=Fe(a,r);return gl(a,ml(a,r)?cl(a,Ye(),t,s.transform,n,s):s.transform(n))}function fl(e,t,n,r){const a=e+le,s=Be(),i=Fe(s,a);return gl(s,ml(s,a)?function(e,t,n,r,a,s,i){const o=t+n;return function(e,t,n,r){const a=$s(e,t,n);return $s(e,t+1,r)||a}(e,o,a,s)?Ps(e,o+2,i?r.call(i,a,s):r(a,s)):hl(e,o+2)}(s,Ye(),t,i.transform,n,r,i):i.transform(n,r))}function ml(e,t){return e[1].data[t].pure}function gl(e,t){return Ds.isWrapped(t)&&(t=Ds.unwrap(t),e[Le.lFrame.bindingIndex]=fa),t}function yl(e){return t=>{setTimeout(e,void 0,t)}}const bl=class extends r.a{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,i;let o=e,l=t||(()=>null),u=n;if(e&&"object"==typeof e){const t=e;o=null===(r=t.next)||void 0===r?void 0:r.bind(t),l=null===(s=t.error)||void 0===s?void 0:s.bind(t),u=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}this.__isAsync&&(l=yl(l),o&&(o=yl(o)),u&&(u=yl(u)));const h=super.subscribe({next:o,error:l,complete:u});return e instanceof a.a&&e.add(h),h}};function xl(){return this._results[Rs()]()}class vl{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Rs(),n=vl.prototype;n[t]||(n[t]=xl)}get changes(){return this._changes||(this._changes=new bl)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=sn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let a=e[r],s=t[r];if(n&&(a=n(a),s=n(s)),s!==a)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Al{constructor(e){this.queryList=e,this.matches=null}clone(){return new Al(this.queryList)}setDirty(){this.queryList.setDirty()}}class wl{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new wl(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==zl(e,t).matches&&this.queries[t].setDirty()}}class kl{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Sl{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,a=this.getByIndex(n).embeddedTView(e,r);a&&(a.indexInDeclarationView=n,null!==t?t.push(a):t=[a])}return null!==t?new Sl(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Il{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Il(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];this.matchTNodeWithReadOption(e,t,_l(t,a)),this.matchTNodeWithReadOption(e,t,Gt(t,e,a,!1,!1))}else n===Bo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===uo||r===Ko||r===Bo&&4&t.type)this.addMatch(t.index,-2);else{const n=Gt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function _l(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function El(e,t,n,r){return-1===n?function(e,t){return 11&e.type?oo(e,t):4&e.type?Ho(e,t):null}(t,e):-2===n?function(e,t,n){return n===uo?oo(t,e):n===Bo?Ho(t,e):n===Ko?Qo(t,e):void 0}(e,t,r):qt(e,e[1],n,t)}function Tl(e,t,n,r){const a=t[19].queries[r];if(null===a.matches){const r=e.data,s=n.matches,i=[];for(let e=0;e<s.length;e+=2){const a=s[e];i.push(a<0?null:El(t,r[a],s[e+1],n.metadata.read))}a.matches=i}return a.matches}function Cl(e,t,n,r){const a=e.queries.getByIndex(n),s=a.matches;if(null!==s){const i=Tl(e,t,a,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(i[e/2]);else{const a=s[e+1],i=t[-n];for(let e=ue;e<i.length;e++){const t=i[e];t[17]===t[3]&&Cl(t[1],t,a,r)}if(null!==i[9]){const e=i[9];for(let t=0;t<e.length;t++){const n=e[t];Cl(n[1],n,a,r)}}}}}return r}function Nl(e){const t=Be(),n=We(),r=rt();at(r+1);const a=zl(n,r);if(e.dirty&&De(t)===(2==(2&a.metadata.flags))){if(null===a.matches)e.reset([]);else{const s=a.crossesNgTemplate?Cl(n,t,r,[]):Tl(n,t,a,r);e.reset(s,ho),e.notifyOnChanges()}return!0}return!1}function Ml(e,t,n){const r=We();r.firstCreatePass&&(Ol(r,new kl(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Dl(r,Be(),t)}function Fl(e,t,n,r){const a=We();if(a.firstCreatePass){const s=He();Ol(a,new kl(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(a,e),2==(2&n)&&(a.staticContentQueries=!0)}Dl(a,Be(),n)}function Rl(){return e=Be(),t=rt(),e[19].queries[t].queryList;var e,t}function Dl(e,t,n){const r=new vl(4==(4&n));za(e,t,r,r.destroy),null===t[19]&&(t[19]=new wl),t[19].queries.push(new Al(r))}function Ol(e,t,n){null===e.queries&&(e.queries=new Sl),e.queries.track(new Il(t,n))}function zl(e,t){return e.queries.getByIndex(t)}function Pl(e,t){return Ho(e,t)}const $l=new nn("Application Initializer");let Ll=(()=>{class e{constructor(e){this.appInits=e,this.resolve=io,this.reject=io,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Qs(t))e.push(t);else if(ti(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(An($l,8))},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();const Vl=new nn("AppId"),Bl={provide:Vl,useFactory:function(){return`${Wl()}${Wl()}${Wl()}`},deps:[]};function Wl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jl=new nn("Platform Initializer"),Hl=new nn("Platform ID"),Ul=new nn("appBootstrapListener");let Gl=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();const ql=new nn("LocaleId"),Kl=new nn("DefaultCurrencyCode");class Xl{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Zl=function(e){return new ll(e)},Yl=Zl,Jl=function(e){return Promise.resolve(Zl(e))},Ql=function(e){const t=Zl(e),n=Er(oe(e).declarations).reduce((e,t)=>{const n=ie(t);return n&&e.push(new al(n)),e},[]);return new Xl(t,n)},eu=Ql,tu=function(e){return Promise.resolve(Ql(e))};let nu=(()=>{class e{constructor(){this.compileModuleSync=Yl,this.compileModuleAsync=Jl,this.compileModuleAndAllComponentsSync=eu,this.compileModuleAndAllComponentsAsync=tu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();const ru=(()=>Promise.resolve(0))();function au(e){"undefined"==typeof Zone?ru.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class su{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bl(!1),this.onMicrotaskEmpty=new bl(!1),this.onStable=new bl(!1),this.onError=new bl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=V.requestAnimationFrame,t=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(V,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,lu(e),e.isCheckStableRunning=!0,ou(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),lu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,a,s,i,o)=>{try{return uu(e),n.invokeTask(a,s,i,o)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),hu(e)}},onInvoke:(n,r,a,s,i,o,l)=>{try{return uu(e),n.invoke(a,s,i,o,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),hu(e)}},onHasTask:(t,n,r,a)=>{t.hasTask(r,a),n===r&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,lu(e),ou(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(t,n,r,a)=>(t.handleError(r,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!su.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(su.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+r,e,iu,io,io);try{return a.runTask(s,t,n)}finally{a.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const iu={};function ou(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function uu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function hu(e){e._nesting--,ou(e)}class cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bl,this.onMicrotaskEmpty=new bl,this.onStable=new bl,this.onError=new bl}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let du=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{su.assertNotInAngularZone(),au(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())au(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(An(su))},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})(),pu=(()=>{class e{constructor(){this._applications=new Map,yu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return yu.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();class fu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function mu(e){yu=e}let gu,yu=new fu,bu=!0,xu=!1;function vu(){return xu=!0,bu}function Au(){if(xu)throw new Error("Cannot enable prod mode after platform setup.");bu=!1}const wu=new nn("AllowMultipleToken");class ku{constructor(e,t){this.name=e,this.token=t}}function Su(e,t,n=[]){const r="Platform: "+t,a=new nn(r);return(t=[])=>{let s=Iu();if(!s||s.injector.get(wu,!1))if(e)e(n.concat(t).concat({provide:a,useValue:!0}));else{const e=n.concat(t).concat({provide:a,useValue:!0},{provide:ds,useValue:"platform"});!function(e){if(gu&&!gu.destroyed&&!gu.injector.get(wu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");gu=e.get(_u);const t=e.get(jl,null);t&&t.forEach(e=>e())}(Is.create({providers:e,name:r}))}return function(e){const t=Iu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function Iu(){return gu&&!gu.destroyed?gu:null}let _u=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new cu:("zone.js"===e?void 0:e)||new su({enableLongStackTrace:vu(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:su,useValue:n}];return n.run(()=>{const t=Is.create({providers:r,parent:this.injector,name:e.moduleType.name}),a=e.create(t),s=a.injector.get(Sr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});a.onDestroy(()=>{Cu(this._modules,a),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Qs(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=a.injector.get(Ll);return e.runInitializers(),e.donePromise.then(()=>(Ki(a.injector.get(ql,Gi)||Gi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,t=[]){const n=Eu({},t);return function(e,t,n){const r=new ll(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Tu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${h(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(An(Is))},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();function Eu(e,t){return Array.isArray(t)?t.reduce(Eu,e):Object.assign(Object.assign({},e),t)}let Tu=(()=>{class e{constructor(e,t,n,r,a){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.a(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new s.a(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{su.assertNotInAngularZone(),au(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{su.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(i.a)(l,u.pipe(Object(o.a)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ro?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Uo),a=n.create(Is.NULL,[],t||n.selector,r),s=a.location.nativeElement,i=a.injector.get(du,null),o=i&&a.injector.get(pu);return i&&o&&o.registerApplication(s,i),a.onDestroy(()=>{this.detachView(a.hostView),Cu(this.components,a),o&&o.unregisterApplication(s)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Cu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ul,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(An(su),An(Is),An(Sr),An(so),An(Ll))},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();function Cu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Nu{}class Mu{}const Fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ru=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Fu}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>Du(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),a="NgFactory";return void 0===r&&(r="default",a=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+a]).then(e=>Du(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(An(nu),An(Mu,8))},e.\u0275prov=v({token:e,factory:e.\u0275fac}),e})();function Du(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}class Ou extends zo{}class zu extends Ou{}const Pu=function(e){return null},$u=Su(null,"core",[{provide:Hl,useValue:"unknown"},{provide:_u,deps:[Is]},{provide:pu,deps:[]},{provide:Gl,deps:[]}]),Lu=[{provide:Tu,useClass:Tu,deps:[su,Is,Sr,so,Ll]},{provide:rl,deps:[su],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Ll,useClass:Ll,deps:[[new _n,$l]]},{provide:nu,useClass:nu,deps:[]},Bl,{provide:Co,useFactory:function(){return $o},deps:[]},{provide:Mo,useFactory:function(){return Lo},deps:[]},{provide:ql,useFactory:function(e){return Ki(e=e||"undefined"!=typeof $localize&&$localize.locale||Gi),e},deps:[[new In(ql),new _n,new En]]},{provide:Kl,useValue:"USD"}];let Vu=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(An(Tu))},e.\u0275mod=te({type:e}),e.\u0275inj=A({providers:Lu}),e})()},gRHU:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("2fFW"),a=n("NJ4a");const s={closed:!0,next(e){},error(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(a.a)(e)},complete(){}}},itXk:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("z+Ro"),a=n("DH7j"),s=n("7o/Q");class i extends s.a{notifyNext(e,t,n,r,a){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class o extends s.a{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var l=n("SeVD"),u=n("HDdC");function h(e,t,n,r,a=new o(e,n,r)){if(!a.closed)return t instanceof u.a?t.subscribe(a):Object(l.a)(t)(a)}var c=n("yCtX");const d={};function p(...e){let t=void 0,n=void 0;return Object(r.a)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(a.a)(e[0])&&(e=e[0]),Object(c.a)(e,n).lift(new f(t))}class f{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new m(e,this.resultSelector))}}class m extends i{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(d),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(h(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,a=this.toRespond?r[n]===d?--this.toRespond:this.toRespond:0;r[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},jZKg:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("HDdC"),a=n("quSY");function s(e,t){return new r.a(n=>{const r=new a.a;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jhN1:function(e,t,n){"use strict";n.d(t,"a",function(){return L}),n.d(t,"b",function(){return R}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return V}),n.d(t,"e",function(){return P}),n.d(t,"f",function(){return k});var r=n("ofXK"),a=n("fXoL");class s extends r.E{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class i extends s{static makeCurrent(){Object(r.I)(new i)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(l=l||document.querySelector("base"),l?l.getAttribute("href"):null);return null==t?null:function(e){o=o||document.createElement("a"),o.setAttribute("href",e);const t=o.pathname;return"/"===t.charAt(0)?t:"/"+t}(t)}resetBaseElement(){l=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Object(r.H)(document.cookie,e)}}let o,l=null;const u=new a.s("TRANSITION_ID"),h=[{provide:a.d,useFactory:function(e,t,n){return()=>{n.get(a.e).donePromise.then(()=>{const n=Object(r.G)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[u,r.d,a.t],multi:!0}];class c{static init(){Object(a.ab)(new c)}addToWindow(e){a.sb.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},a.sb.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.sb.getAllAngularRootElements=()=>e.getAllRootElements(),a.sb.frameworkStabilizers||(a.sb.frameworkStabilizers=[]),a.sb.frameworkStabilizers.push(e=>{const t=a.sb.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:n?Object(r.G)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();const p=new a.s("EventManagerPlugins");let f=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(a.ac(p),a.ac(a.B))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();class m{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const a=Object(r.G)().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,n)}}let g=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e extends g{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(b),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(b))}}return e.\u0275fac=function(t){return new(t||e)(a.ac(r.d))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();function b(e){Object(r.G)().remove(e)}const x={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},v=/%COMP%/g;function A(e,t,n){for(let r=0;r<t.length;r++){let a=t[r];Array.isArray(a)?A(e,a,n):(a=a.replace(v,e),n.push(a))}return n}function w(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let k=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new S(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case a.T.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new I(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case a.T.ShadowDom:return new _(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=A(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(a.ac(f),a.ac(y),a.ac(a.c))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();class S{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(x[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const a=x[r];a?e.setAttributeNS(a,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=x[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(a.I.DashCase|a.I.Important)?e.style.setProperty(t,n,r&a.I.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&a.I.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,w(n)):this.eventManager.addEventListener(e,t,w(n))}}class I extends S{constructor(e,t,n,r){super(e),this.component=n;const a=A(r+"-"+n.id,n.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(v,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(v,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class _ extends S{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=A(r.id,r.styles,[]);for(let s=0;s<a.length;s++){const e=document.createElement("style");e.textContent=a[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let E=(()=>{class e extends m{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(a.ac(r.d))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();const T=["alt","control","meta","shift"],C={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},M={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let F=(()=>{class e extends m{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,a){const s=e.parseEventName(n),i=e.eventCallback(s.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(r.G)().onAndCancel(t,s.domEventName,i))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const a=e._normalizeKey(n.pop());let s="";if(T.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=a,0!=n.length||0===a.length)return null;const i={};return i.domEventName=r,i.fullKey=s,i}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&N.hasOwnProperty(t)&&(t=N[t]))}return C[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),T.forEach(r=>{r!=n&&(0,M[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return a=>{e.getEventFullKey(a)===t&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(a.ac(r.d))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})(),R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(a.Mb)({factory:function(){return Object(a.ac)(O)},token:e,providedIn:"root"}),e})();function D(e){return new O(e.get(r.d))}let O=(()=>{class e extends R{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case a.K.NONE:return t;case a.K.HTML:return Object(a.hb)(t,"HTML")?Object(a.Ab)(t):Object(a.fb)(this._doc,String(t)).toString();case a.K.STYLE:return Object(a.hb)(t,"Style")?Object(a.Ab)(t):t;case a.K.SCRIPT:if(Object(a.hb)(t,"Script"))return Object(a.Ab)(t);throw new Error("unsafe value used in a script context");case a.K.URL:return Object(a.rb)(t),Object(a.hb)(t,"URL")?Object(a.Ab)(t):Object(a.gb)(String(t));case a.K.RESOURCE_URL:if(Object(a.hb)(t,"ResourceURL"))return Object(a.Ab)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return Object(a.ib)(e)}bypassSecurityTrustStyle(e){return Object(a.lb)(e)}bypassSecurityTrustScript(e){return Object(a.kb)(e)}bypassSecurityTrustUrl(e){return Object(a.mb)(e)}bypassSecurityTrustResourceUrl(e){return Object(a.jb)(e)}}return e.\u0275fac=function(t){return new(t||e)(a.ac(r.d))},e.\u0275prov=Object(a.Mb)({factory:function(){return D(Object(a.ac)(a.p))},token:e,providedIn:"root"}),e})();const z=[{provide:a.D,useValue:r.F},{provide:a.E,useValue:function(){i.makeCurrent(),c.init()},multi:!0},{provide:r.d,useFactory:function(){return Object(a.yb)(document),document},deps:[]}],P=Object(a.U)(a.Z,"browser",z),$=[[],{provide:a.cb,useValue:"root"},{provide:a.n,useFactory:function(){return new a.n},deps:[]},{provide:p,useClass:E,multi:!0,deps:[r.d,a.B,a.D]},{provide:p,useClass:F,multi:!0,deps:[r.d]},[],{provide:k,useClass:k,deps:[f,y,a.c]},{provide:a.H,useExisting:k},{provide:g,useExisting:y},{provide:y,useClass:y,deps:[r.d]},{provide:a.P,useClass:a.P,deps:[a.B]},{provide:f,useClass:f,deps:[p,a.B]},{provide:r.y,useClass:d,deps:[]},[]];let L=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:a.c,useValue:t.appId},{provide:u,useExisting:a.c},h]}}}return e.\u0275fac=function(t){return new(t||e)(a.ac(e,12))},e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({providers:$,imports:[r.c,a.f]}),e})();function V(e){return e}"undefined"!=typeof window&&window;let B=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static init(t){const n=new e;return n.store=t,n}get(e,t){return void 0!==this.store[e]?this.store[e]:t}set(e,t){this.store[e]=t}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}onSerialize(e,t){this.onSerializeCallbacks[e]=t}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})()},jtHE:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("XNiG"),a=n("3N8a");class s extends a.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}var i=n("IjjT");class o extends i.a{}const l=new o(s);var u=n("quSY"),h=n("pxpQ"),c=n("9ppp"),d=n("Ylt2");class p extends r.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,a=n.length;let s;if(this.closed)throw new c.a;if(this.isStopped||this.hasError?s=u.a.EMPTY:(this.observers.push(e),s=new d.a(this,e)),r&&e.add(e=new h.a(e,r)),t)for(let i=0;i<a&&!e.closed;i++)e.next(n[i]);else for(let i=0;i<a&&!e.closed;i++)e.next(n[i].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||l).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,a=r.length;let s=0;for(;s<a&&!(e-r[s].time<n);)s++;return a>t&&(s=Math.max(s,a-t)),s>0&&r.splice(0,s),r}}class f{constructor(e,t){this.time=e,this.value=t}}},kJWO:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},keYA:function(e,t,n){e.exports=n.p+"3.8c4c377ae4cb453b336c.worker.js"},lJxs:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("7o/Q");function a(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new i(e,this.project,this.thisArg))}}class i extends r.a{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},lPHp:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!=typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bmRnd,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){var t,n=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){bmRnd=e?Math.round:function(e){return e}}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,r){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,r){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t}roundValues(!1);var createElementID=(_count=0,function(){return idPrefix+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(e,t,n){var r,a,s,i,o,l,u,h;switch(l=n*(1-t),u=n*(1-(o=6*e-(i=Math.floor(6*e)))*t),h=n*(1-(1-o)*t),i%6){case 0:r=n,a=h,s=l;break;case 1:r=u,a=n,s=l;break;case 2:r=l,a=n,s=h;break;case 3:r=l,a=u,s=n;break;case 4:r=h,a=l,s=n;break;case 5:r=n,a=l,s=u}return[r,a,s]}function RGBtoHSV(e,t,n){var r,a=Math.max(e,t,n),s=Math.min(e,t,n),i=a-s,o=0===a?0:i/a,l=a/255;switch(a){case s:r=0;break;case e:r=t-n+i*(t<n?6:0),r/=6*i;break;case t:r=n-e+2*i,r/=6*i;break;case n:r=e-t+4*i,r/=6*i}return[r,o,l]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1===t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+n[e]+n[t]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e].length,r=0;r<n;r+=1)this._cbs[e][r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),(function(){this.removeEventListener(e,t)}).bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,r=this._cbs[e].length;n<r;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,r-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var createTypedArray=function(){function e(e,t){var n,r=0,a=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<t;r+=1)a.push(n);return a}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,n){return"float32"===t?new Float32Array(n):"int16"===t?new Int16Array(n):"uint8c"===t?new Uint8ClampedArray(n):e(t,n)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS(svgNS,e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),blendModeEnums,Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,r=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(n){if(0===n)return this;var r=e(n),a=t(n);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function i(n){if(0===n)return this;var r=e(n),a=t(n);return this._t(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1)}function o(n){if(0===n)return this;var r=e(n),a=t(n);return this._t(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1)}function l(n){if(0===n)return this;var r=e(n),a=t(n);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function u(e,t){return this._t(1,t,e,1,0,0)}function h(e,t){return this.shear(n(e),n(t))}function c(r,a){var s=e(a),i=t(a);return this._t(s,i,0,0,-i,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(s,-i,0,0,i,s,0,0,0,0,1,0,0,0,0,1)}function d(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function p(e,t,n,r,a,s,i,o,l,u,h,c,d,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=r,this.props[4]=a,this.props[5]=s,this.props[6]=i,this.props[7]=o,this.props[8]=l,this.props[9]=u,this.props[10]=h,this.props[11]=c,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function m(e,t,n,r,a,s,i,o,l,u,h,c,d,p,f,m){var g=this.props;if(1===e&&0===t&&0===n&&0===r&&0===a&&1===s&&0===i&&0===o&&0===l&&0===u&&1===h&&0===c)return g[12]=g[12]*e+g[15]*d,g[13]=g[13]*s+g[15]*p,g[14]=g[14]*h+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var y=g[0],b=g[1],x=g[2],v=g[3],A=g[4],w=g[5],k=g[6],S=g[7],I=g[8],_=g[9],E=g[10],T=g[11],C=g[12],N=g[13],M=g[14],F=g[15];return g[0]=y*e+b*a+x*l+v*d,g[1]=y*t+b*s+x*u+v*p,g[2]=y*n+b*i+x*h+v*f,g[3]=y*r+b*o+x*c+v*m,g[4]=A*e+w*a+k*l+S*d,g[5]=A*t+w*s+k*u+S*p,g[6]=A*n+w*i+k*h+S*f,g[7]=A*r+w*o+k*c+S*m,g[8]=I*e+_*a+E*l+T*d,g[9]=I*t+_*s+E*u+T*p,g[10]=I*n+_*i+E*h+T*f,g[11]=I*r+_*o+E*c+T*m,g[12]=C*e+N*a+M*l+F*d,g[13]=C*t+N*s+M*u+F*p,g[14]=C*n+N*i+M*h+F*f,g[15]=C*r+N*o+M*c+F*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function b(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function x(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function v(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function A(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function w(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function k(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function S(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,a=this.props[0]/e,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,i=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=n,o.props[4]=r,o.props[5]=a,o.props[12]=s,o.props[13]=i,o}function I(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function _(e){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r[t]=I(e[t]);return r}function E(e,t,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=n[0],r[5]=n[1];else{var a=this.props[0],s=this.props[1],i=this.props[4],o=this.props[5],l=this.props[12],u=this.props[13];r[0]=e[0]*a+e[1]*i+l,r[1]=e[0]*s+e[1]*o+u,r[2]=t[0]*a+t[1]*i+l,r[3]=t[0]*s+t[1]*o+u,r[4]=n[0]*a+n[1]*i+l,r[5]=n[0]*s+n[1]*o+u}return r}function T(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function C(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function N(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=r(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function M(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function F(){var e=this.props;return"matrix("+M(e[0])+","+M(e[1])+","+M(e[4])+","+M(e[5])+","+M(e[12])+","+M(e[13])+")"}return function(){this.reset=a,this.rotate=s,this.rotateX=i,this.rotateY=o,this.rotateZ=l,this.skew=h,this.skewFromAxis=c,this.shear=u,this.scale=d,this.setTransform=p,this.translate=f,this.transform=m,this.applyToPoint=v,this.applyToX=A,this.applyToY=w,this.applyToZ=k,this.applyToPointArray=T,this.applyToTriplePoints=E,this.applyToPointStringified=C,this.toCSS=N,this.to2dCSS=F,this.clone=b,this.cloneFromProps=x,this.equals=y,this.inversePoints=_,this.inversePoint=I,this.getInverseMatrix=S,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(e,t){var n=this,r=256,a=t.pow(r,6),s=t.pow(2,52),i=2*s,o=255;function l(e){var t,n=e.length,a=this,s=0,i=a.i=a.j=0,l=a.S=[];for(n||(e=[n++]);s<r;)l[s]=s++;for(s=0;s<r;s++)l[s]=l[i=o&i+e[s%n]+(t=l[s])],l[i]=t;a.g=function(e){for(var t,n=0,s=a.i,i=a.j,l=a.S;e--;)t=l[s=o&s+1],n=n*r+l[o&(l[s]=l[i=o&i+t])+(l[i]=t)];return a.i=s,a.j=i,n}}function u(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(h(e[n],t-1))}catch(s){}return r.length?r:"string"==a?e:e+"\0"}function c(e,t){for(var n,r=e+"",a=0;a<r.length;)t[o&a]=o&(n^=19*t[o&a])+r.charCodeAt(a++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}t.seedrandom=function(o,p,f){var m=[],g=c(h((p=!0===p?{entropy:!0}:p||{}).entropy?[o,d(e)]:null===o?function(){try{var t=new Uint8Array(r);return(n.crypto||n.msCrypto).getRandomValues(t),d(t)}catch(i){var a=n.navigator,s=a&&a.plugins;return[+new Date,n,s,n.screen,d(e)]}}():o,3),m),y=new l(m),b=function(){for(var e=y.g(6),t=a,n=0;e<s;)e=(e+n)*r,t*=r,n=y.g(1);for(;e>=i;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,c(d(y.S),e),(p.pass||f||function(e,n,r,a){return a&&(a.S&&u(a,y),e.state=function(){return u(y,{})}),r?(t.random=e,n):e})(b,g,"global"in p?p.global:this==t,p.state)},c(t.random(),e)}([],BMMath);var BezierFactory=function(){var e={getBezierEasing:function(e,n,r,a,s){var i=s||("bez_"+e+"_"+n+"_"+r+"_"+a).replace(/\./g,"p");if(t[i])return t[i];var o=new u([e,n,r,a]);return t[i]=o,o}},t={},n=.1,r="function"==typeof Float32Array;function a(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function i(e){return 3*e}function o(e,t,n){return((a(t,n)*e+s(t,n))*e+i(t))*e}function l(e,t,n){return 3*a(t,n)*e*e+2*s(t,n)*e+i(t)}function u(e){this._p=e,this._mSampleValues=r?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return u.prototype={get:function(e){var t=this._p[0],n=this._p[1],r=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),t===n&&r===a?e:0===e?0:1===e?1:o(this._getTForX(e),n,a)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=o(r*n,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],a=this._mSampleValues,s=0,i=1;10!==i&&a[i]<=e;++i)s+=n;var u=s+(e-a[--i])/(a[i+1]-a[i])*n,h=l(u,t,r);return h>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=l(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(e,u,t,r):0===h?u:function(e,t,n,r,a){var s,i,l=0;do{(s=o(i=t+(n-t)/2,r,a)-e)>0?n=i:t=i}while(Math.abs(s)>1e-7&&++l<10);return i}(e,s,s+n,t,r)}},e}();function extendPrototype(e,t){var n,r,a=e.length;for(n=0;n<a;n+=1)for(var s in r=e[n].prototype)Object.prototype.hasOwnProperty.call(r,s)&&(t.prototype[s]=r[s])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}function bezFunction(){var e=Math;function t(e,t,n,r,a,s){var i=e*r+t*a+n*s-a*r-s*e-n*t;return i>-.001&&i<.001}var n=function(e,t,n,r){var a,s,i,o,l,u,h=defaultCurveSegments,c=0,d=[],p=[],f=bezierLengthPool.newElement();for(i=n.length,a=0;a<h;a+=1){for(l=a/(h-1),u=0,s=0;s<i;s+=1)o=bmPow(1-l,3)*e[s]+3*bmPow(1-l,2)*l*n[s]+3*(1-l)*bmPow(l,2)*r[s]+bmPow(l,3)*t[s],d[s]=o,null!==p[s]&&(u+=bmPow(d[s]-p[s],2)),p[s]=d[s];u&&(c+=u=bmSqrt(u)),f.percents[a]=l,f.lengths[a]=c}return f.addedLength=c,f};function r(e){this.segmentLength=0,this.points=new Array(e)}function a(e,t){this.partialLength=e,this.point=t}var s,i=(s={},function(e,n,i,o){var l=(e[0]+"_"+e[1]+"_"+n[0]+"_"+n[1]+"_"+i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!s[l]){var u,h,c,d,p,f,m,g=defaultCurveSegments,y=0,b=null;2===e.length&&(e[0]!==n[0]||e[1]!==n[1])&&t(e[0],e[1],n[0],n[1],e[0]+i[0],e[1]+i[1])&&t(e[0],e[1],n[0],n[1],n[0]+o[0],n[1]+o[1])&&(g=2);var x=new r(g);for(c=i.length,u=0;u<g;u+=1){for(m=createSizedArray(c),p=u/(g-1),f=0,h=0;h<c;h+=1)d=bmPow(1-p,3)*e[h]+3*bmPow(1-p,2)*p*(e[h]+i[h])+3*(1-p)*bmPow(p,2)*(n[h]+o[h])+bmPow(p,3)*n[h],m[h]=d,null!==b&&(f+=bmPow(m[h]-b[h],2));y+=f=bmSqrt(f),x.points[u]=new a(f,m),b=m}x.segmentLength=y,s[l]=x}return s[l]});function o(e,t){var n=t.percents,r=t.lengths,a=n.length,s=bmFloor((a-1)*e),i=e*t.addedLength,o=0;if(s===a-1||0===s||i===r[s])return n[s];for(var l=r[s]>i?-1:1,u=!0;u;)if(r[s]<=i&&r[s+1]>i?(o=(i-r[s])/(r[s+1]-r[s]),u=!1):s+=l,s<0||s>=a-1){if(s===a-1)return n[s];u=!1}return n[s]+(n[s+1]-n[s])*o}var l=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,r=segmentsLengthPool.newElement(),a=e.c,s=e.v,i=e.o,o=e.i,l=e._length,u=r.lengths,h=0;for(t=0;t<l-1;t+=1)u[t]=n(s[t],s[t+1],i[t],o[t+1]),h+=u[t].addedLength;return a&&l&&(u[t]=n(s[t],s[0],i[t],o[0]),h+=u[t].addedLength),r.totalLength=h,r},getNewSegment:function(t,n,r,a,s,i,u){s<0?s=0:s>1&&(s=1);var h,c=o(s,u),d=o(i=i>1?1:i,u),p=t.length,f=1-c,m=1-d,g=f*f*f,y=c*f*f*3,b=c*c*f*3,x=c*c*c,v=f*f*m,A=c*f*m+f*c*m+f*f*d,w=c*c*m+f*c*d+c*f*d,k=c*c*d,S=f*m*m,I=c*m*m+f*d*m+f*m*d,_=c*d*m+f*d*d+c*m*d,E=c*d*d,T=m*m*m,C=d*m*m+m*d*m+m*m*d,N=d*d*m+m*d*d+d*m*d,M=d*d*d;for(h=0;h<p;h+=1)l[4*h]=e.round(1e3*(g*t[h]+y*r[h]+b*a[h]+x*n[h]))/1e3,l[4*h+1]=e.round(1e3*(v*t[h]+A*r[h]+w*a[h]+k*n[h]))/1e3,l[4*h+2]=e.round(1e3*(S*t[h]+I*r[h]+_*a[h]+E*n[h]))/1e3,l[4*h+3]=e.round(1e3*(T*t[h]+C*r[h]+N*a[h]+M*n[h]))/1e3;return l},getPointInSegment:function(t,n,r,a,s,i){var l=o(s,i),u=1-l;return[e.round(1e3*(u*u*u*t[0]+(l*u*u+u*l*u+u*u*l)*r[0]+(l*l*u+u*l*l+l*u*l)*a[0]+l*l*l*n[0]))/1e3,e.round(1e3*(u*u*u*t[1]+(l*u*u+u*l*u+u*u*l)*r[1]+(l*l*u+u*l*l+l*u*l)*a[1]+l*l*l*n[1]))/1e3]},buildBezierData:i,pointOnLine2D:t,pointOnLine3D:function(n,r,a,s,i,o,l,u,h){if(0===a&&0===o&&0===h)return t(n,r,s,i,l,u);var c,d=e.sqrt(e.pow(s-n,2)+e.pow(i-r,2)+e.pow(o-a,2)),p=e.sqrt(e.pow(l-n,2)+e.pow(u-r,2)+e.pow(h-a,2)),f=e.sqrt(e.pow(l-s,2)+e.pow(u-i,2)+e.pow(h-o,2));return(c=d>p?d>f?d-p-f:f-p-d:f>p?f-p-d:p-d-f)>-1e-4&&c<1e-4}}}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),a=setTimeout(function(){t(n+r)},r);return e=n+r,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function e(a,s,i){var o,l,u,h,c,d,p,f=a.length;for(l=0;l<f;l+=1)if("ks"in(o=a[l])&&!o.completed){if(o.completed=!0,o.tt&&(a[l-1].td=o.tt),o.hasMask){var m=o.masksProperties;for(h=m.length,u=0;u<h;u+=1)if(m[u].pt.k.i)r(m[u].pt.k);else for(d=m[u].pt.k.length,c=0;c<d;c+=1)m[u].pt.k[c].s&&r(m[u].pt.k[c].s[0]),m[u].pt.k[c].e&&r(m[u].pt.k[c].e[0])}0===o.ty?(o.layers=t(o.refId,s),e(o.layers,s,i)):4===o.ty?n(o.shapes):5===o.ty&&(0!==(p=o).t.a.length||"m"in p.t.p||(p.singleShape=!0))}}function t(e,t){for(var n=0,r=t.length;n<r;){if(t[n].id===e)return t[n].layers.__used?JSON.parse(JSON.stringify(t[n].layers)):(t[n].layers.__used=!0,t[n].layers);n+=1}return null}function n(e){var t,a,s;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(s=e[t].ks.k.length,a=0;a<s;a+=1)e[t].ks.k[a].s&&r(e[t].ks.k[a].s[0]),e[t].ks.k[a].e&&r(e[t].ks.k[a].e[0]);else"gr"===e[t].ty&&n(e[t].it)}function r(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function a(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&null))}var s,i=function(){var e=[4,4,14];function t(e){var t,n,r=e.length;for(t=0;t<r;t+=1)5===e[t].ty&&((n=e[t]).t.d={k:[{s:n.t.d,t:0}]})}return function(n){if(a(e,n.v)&&(t(n.layers),n.assets)){var r,s=n.assets.length;for(r=0;r<s;r+=1)n.assets[r].layers&&t(n.assets[r].layers)}}}(),o=(s=[4,7,99],function(e){if(e.chars&&!a(s,e.v)){var t,n,i,o,l,u=e.chars.length;for(t=0;t<u;t+=1)if(e.chars[t].data&&e.chars[t].data.shapes)for(i=(l=e.chars[t].data.shapes[0].it).length,n=0;n<i;n+=1)(o=l[n].ks.k).__converted||(r(l[n].ks.k),o.__converted=!0)}}),l=function(){var e=[4,1,9];function t(e){var n,r,a,s=e.length;for(n=0;n<s;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(a=e[n].c.k.length,r=0;r<a;r+=1)e[n].c.k[r].s&&(e[n].c.k[r].s[0]/=255,e[n].c.k[r].s[1]/=255,e[n].c.k[r].s[2]/=255,e[n].c.k[r].s[3]/=255),e[n].c.k[r].e&&(e[n].c.k[r].e[0]/=255,e[n].c.k[r].e[1]/=255,e[n].c.k[r].e[2]/=255,e[n].c.k[r].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(a(e,t.v)&&(n(t.layers),t.assets)){var r,s=t.assets.length;for(r=0;r<s;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),u=function(){var e=[4,4,18];function t(e){var n,r,a;for(n=e.length-1;n>=0;n-=1)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(a=e[n].ks.k.length,r=0;r<a;r+=1)e[n].ks.k[r].s&&(e[n].ks.k[r].s[0].c=e[n].closed),e[n].ks.k[r].e&&(e[n].ks.k[r].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}function n(e){var n,r,a,s,i,o,l=e.length;for(r=0;r<l;r+=1){if((n=e[r]).hasMask){var u=n.masksProperties;for(s=u.length,a=0;a<s;a+=1)if(u[a].pt.k.i)u[a].pt.k.c=u[a].cl;else for(o=u[a].pt.k.length,i=0;i<o;i+=1)u[a].pt.k[i].s&&(u[a].pt.k[i].s[0].c=u[a].cl),u[a].pt.k[i].e&&(u[a].pt.k[i].e[0].c=u[a].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(a(e,t.v)&&(n(t.layers),t.assets)){var r,s=t.assets.length;for(r=0;r<s;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),h={completeData:function(t,n){t.__complete||(l(t),i(t),o(t),u(t),e(t.layers,t.assets,n),t.__complete=!0)}};return h.checkColors=l,h.checkChars=o,h.checkShapes=u,h.completeLayers=e,h}var dataManager=dataFunctionManager();function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",r="normal",a=t.length,s=0;s<a;s+=1)switch(t[s].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:e.fWeight||n}}var FontManager=function(){var e={w:0,size:0,shapes:[]},t=[];function n(e,t){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=t;var r=createTag("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var a=r.offsetWidth;return r.style.fontFamily=function(e){var t,n=e.split(","),r=n.length,a=[];for(t=0;t<r;t+=1)"sans-serif"!==n[t]&&"monospace"!==n[t]&&a.push(n[t]);return a.join(",")}(e)+", "+t,{node:r,w:a,parent:n}}function r(e,t){var n=createNS("text");n.style.fontSize="100px";var r=getFontProperties(t);return n.setAttribute("font-family",t.fFamily),n.setAttribute("font-style",r.style),n.setAttribute("font-weight",r.weight),n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",t.fClass)):n.style.fontFamily=t.fFamily,e.appendChild(n),createTag("canvas").getContext("2d").font=t.fWeight+" "+t.fStyle+" 100px "+t.fFamily,n}t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return a.getCombinedCharacterCodes=function(){return t},a.prototype={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var n,r,a=e.length,s=this.chars.length;for(t=0;t<a;t+=1){for(n=0,r=!1;n<s;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(r=!0),n+=1;r||(this.chars.push(e[t]),s+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);var a,s=e.list,i=s.length,o=i;for(a=0;a<i;a+=1){var l,u,h=!0;if(s[a].loaded=!1,s[a].monoCase=n(s[a].fFamily,"monospace"),s[a].sansCase=n(s[a].fFamily,"sans-serif"),s[a].fPath){if("p"===s[a].fOrigin||3===s[a].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+s[a].fFamily+'"], style[f-origin="3"][f-family="'+s[a].fFamily+'"]')).length>0&&(h=!1),h){var c=createTag("style");c.setAttribute("f-forigin",s[a].fOrigin),c.setAttribute("f-origin",s[a].origin),c.setAttribute("f-family",s[a].fFamily),c.type="text/css",c.innerText="@font-face {font-family: "+s[a].fFamily+"; font-style: normal; src: url('"+s[a].fPath+"');}",t.appendChild(c)}}else if("g"===s[a].fOrigin||1===s[a].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),u=0;u<l.length;u+=1)-1!==l[u].href.indexOf(s[a].fPath)&&(h=!1);if(h){var d=createTag("link");d.setAttribute("f-forigin",s[a].fOrigin),d.setAttribute("f-origin",s[a].origin),d.type="text/css",d.rel="stylesheet",d.href=s[a].fPath,document.body.appendChild(d)}}else if("t"===s[a].fOrigin||2===s[a].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),u=0;u<l.length;u+=1)s[a].fPath===l[u].src&&(h=!1);if(h){var p=createTag("link");p.setAttribute("f-forigin",s[a].fOrigin),p.setAttribute("f-origin",s[a].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",s[a].fPath),t.appendChild(p)}}}else s[a].loaded=!0,o-=1;s[a].helper=r(t,s[a]),s[a].cache={},this.fonts.push(s[a])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,n,r){for(var a=0,s=this.chars.length;a<s;){if(this.chars[a].ch===t&&this.chars[a].style===n&&this.chars[a].fFamily===r)return this.chars[a];a+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,r)),e},getFontByName:function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,n){var r=this.getFontByName(t),a=e.charCodeAt(0);if(!r.cache[a+1]){var s=r.helper;if(" "===e){s.textContent="|"+e+"|";var i=s.getComputedTextLength();s.textContent="||";var o=s.getComputedTextLength();r.cache[a+1]=(i-o)/100}else s.textContent=e,r.cache[a+1]=s.getComputedTextLength()/100}return r.cache[a+1]*n},checkLoadedFonts:function(){var e,t=this.fonts.length,n=t;for(e=0;e<t;e+=1)this.fonts[e].loaded?n-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:((this.fonts[e].monoCase.node.offsetWidth!==this.fonts[e].monoCase.w||this.fonts[e].sansCase.node.offsetWidth!==this.fonts[e].sansCase.w)&&(n-=1,this.fonts[e].loaded=!0),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},a}(),PropertyFactory=function(){var e=initialDefaultFrame,t=Math.abs;function n(e,t){var n,a=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var s,i,o,l,u,h,c,d,p=t.lastIndex,f=p,m=this.keyframes.length-1,g=!0;g;){if(s=this.keyframes[f],i=this.keyframes[f+1],f===m-1&&e>=i.t-a){s.h&&(s=i),p=0;break}if(i.t-a>e){p=f;break}f<m-1?f+=1:(p=0,g=!1)}var y,b,x,v,A,w,k,S,I,_,E=i.t-a,T=s.t-a;if(s.to){s.bezierData||(s.bezierData=bez.buildBezierData(s.s,i.s||s.e,s.to,s.ti));var C=s.bezierData;if(e>=E||e<T){var N=e>=E?C.points.length-1:0;for(l=C.points[N].point.length,o=0;o<l;o+=1)n[o]=C.points[N].point[o]}else{s.__fnct?d=s.__fnct:(d=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,s.__fnct=d),u=d((e-T)/(E-T));var M,F=C.segmentLength*u,R=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastAddedLength:0;for(c=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastPoint:0,g=!0,h=C.points.length;g;){if(R+=C.points[c].partialLength,0===F||0===u||c===C.points.length-1){for(l=C.points[c].point.length,o=0;o<l;o+=1)n[o]=C.points[c].point[o];break}if(F>=R&&F<R+C.points[c+1].partialLength){for(M=(F-R)/C.points[c+1].partialLength,l=C.points[c].point.length,o=0;o<l;o+=1)n[o]=C.points[c].point[o]+(C.points[c+1].point[o]-C.points[c].point[o])*M;break}c<h-1?c+=1:g=!1}t._lastPoint=c,t._lastAddedLength=R-C.points[c].partialLength,t._lastKeyframeIndex=f}}else{var D;if(m=s.s.length,y=i.s||s.e,this.sh&&1!==s.h)e>=E?(n[0]=y[0],n[1]=y[1],n[2]=y[2]):e<=T?(n[0]=s.s[0],n[1]=s.s[1],n[2]=s.s[2]):(b=n,v=(x=function(e,t,n){var r,a,s,i,o,l=[],u=e[0],h=e[1],c=e[2],d=e[3],p=t[0],f=t[1],m=t[2],g=t[3];return(a=u*p+h*f+c*m+d*g)<0&&(a=-a,p=-p,f=-f,m=-m,g=-g),1-a>1e-6?(r=Math.acos(a),s=Math.sin(r),i=Math.sin((1-n)*r)/s,o=Math.sin(n*r)/s):(i=1-n,o=n),l[0]=i*u+o*p,l[1]=i*h+o*f,l[2]=i*c+o*m,l[3]=i*d+o*g,l}(r(s.s),r(y),(e-T)/(E-T)))[0],A=x[1],w=x[2],k=x[3],S=Math.atan2(2*A*k-2*v*w,1-2*A*A-2*w*w),I=Math.asin(2*v*A+2*w*k),_=Math.atan2(2*v*k-2*A*w,1-2*v*v-2*w*w),b[0]=S/degToRads,b[1]=I/degToRads,b[2]=_/degToRads);else for(f=0;f<m;f+=1)1!==s.h&&(e>=E?u=1:e<T?u=0:(s.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[f]?d=s.__fnct[f]:(d=BezierFactory.getBezierEasing(void 0===s.o.x[f]?s.o.x[0]:s.o.x[f],void 0===s.o.y[f]?s.o.y[0]:s.o.y[f],void 0===s.i.x[f]?s.i.x[0]:s.i.x[f],void 0===s.i.y[f]?s.i.y[0]:s.i.y[f]).get,s.__fnct[f]=d)):s.__fnct?d=s.__fnct:(d=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y).get,s.__fnct=d),u=d((e-T)/(E-T)))),y=i.s||s.e,D=1===s.h?s.s[f]:s.s[f]+(y[f]-s.s[f])*u,"multidimensional"===this.propType?n[f]=D:n=D}return t.lastIndex=p,n}function r(e){var t=e[0]*degToRads,n=e[1]*degToRads,r=e[2]*degToRads,a=Math.cos(t/2),s=Math.cos(n/2),i=Math.cos(r/2),o=Math.sin(t/2),l=Math.sin(n/2),u=Math.sin(r/2);return[o*l*i+a*s*u,o*s*i+a*l*u,a*l*i-o*s*u,a*s*i-o*l*u]}function a(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==e&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<n&&t<n))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var a=this.interpolateValue(t,this._caching);this.pv=a}return this._caching.lastFrame=t,this.pv}function s(e){var n;if("unidimensional"===this.propType)t(this.v-(n=e*this.mult))>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,a=this.v.length;r<a;)t(this.v[r]-(n=e[r]*this.mult))>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function i(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(e,t,n,r){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=i,this.setVValue=s,this.addEffect=o}function u(e,t,n,r){var a;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var l=t.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),a=0;a<l;a+=1)this.v[a]=t.k[a]*this.mult,this.pv[a]=t.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=i,this.setVValue=s,this.addEffect=o}function h(t,r,l,u){this.propType="unidimensional",this.keyframes=r.k,this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:e,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=l||1,this.elem=t,this.container=u,this.comp=t.comp,this.v=e,this.pv=e,this._isFirstFrame=!0,this.getValue=i,this.setVValue=s,this.interpolateValue=n,this.effectsSequence=[a.bind(this)],this.addEffect=o}function c(t,r,l,u){var h;this.propType="multidimensional";var c,d,p,f,m=r.k.length;for(h=0;h<m-1;h+=1)r.k[h].to&&r.k[h].s&&r.k[h+1]&&r.k[h+1].s&&(d=r.k[h+1].s,p=r.k[h].to,f=r.k[h].ti,(2===(c=r.k[h].s).length&&(c[0]!==d[0]||c[1]!==d[1])&&bez.pointOnLine2D(c[0],c[1],d[0],d[1],c[0]+p[0],c[1]+p[1])&&bez.pointOnLine2D(c[0],c[1],d[0],d[1],d[0]+f[0],d[1]+f[1])||3===c.length&&(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2])&&bez.pointOnLine3D(c[0],c[1],c[2],d[0],d[1],d[2],c[0]+p[0],c[1]+p[1],c[2]+p[2])&&bez.pointOnLine3D(c[0],c[1],c[2],d[0],d[1],d[2],d[0]+f[0],d[1]+f[1],d[2]+f[2]))&&(r.k[h].to=null,r.k[h].ti=null),c[0]===d[0]&&c[1]===d[1]&&0===p[0]&&0===p[1]&&0===f[0]&&0===f[1]&&(2===c.length||c[2]===d[2]&&0===p[2]&&0===f[2])&&(r.k[h].to=null,r.k[h].ti=null));this.effectsSequence=[a.bind(this)],this.data=r,this.keyframes=r.k,this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=l||1,this.elem=t,this.container=u,this.comp=t.comp,this.getValue=i,this.setVValue=s,this.interpolateValue=n,this.frameId=-1;var g=r.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),h=0;h<g;h+=1)this.v[h]=e,this.pv[h]=e;this._caching={lastFrame:e,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=o}return{getProp:function(e,t,n,r,a){var s;if(t.k.length)if("number"==typeof t.k[0])s=new u(e,t,r,a);else switch(n){case 0:s=new h(e,t,r,a);break;case 1:s=new c(e,t,r,a)}else s=new l(e,t,r,a);return s.effectsSequence.length&&a.addDynamicProperty(s),s}}}(),TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,a=t.or.k.length;for(r=0;r<a;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),this.o=t.o?PropertyFactory.getProp(e,t.o,0,.01,e):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?e.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,a;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),a=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),a=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,a=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],a=[];var s=this.px,i=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(r[0]=s.getValueAtTime((s.keyframes[0].t+.01)/n,0),r[1]=i.getValueAtTime((i.keyframes[0].t+.01)/n,0),a[0]=s.getValueAtTime(s.keyframes[0].t/n,0),a[1]=i.getValueAtTime(i.keyframes[0].t/n,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(r[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/n,0),r[1]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/n,0),a[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/n,0),a[1]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/n,0)):(r=[s.pv,i.pv],a[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/n,s.offsetTime),a[1]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/n,i.offsetTime))}else r=a=e;this.v.rotate(-Math.atan2(r[1]-a[1],r[0]-a[0]))}this.data.p&&this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,r,a){var s;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}(!s[r]||s[r]&&!a)&&(s[r]=pointPool.newElement()),s[r][0]=e,s[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,r,a,s,i,o){this.setXYAt(e,t,"v",i,o),this.setXYAt(n,r,"o",i,o),this.setXYAt(a,s,"i",i,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,r=this.i,a=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),a=1);var s,i=this._length-1,o=this._length;for(s=a;s<o;s+=1)e.setTripleAt(t[i][0],t[i][1],r[i][0],r[i][1],n[i][0],n[i][1],s,!1),i-=1;return e};var ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var r,a,s,i,o,l,u,h,c=n.lastIndex,d=this.keyframes;if(e<d[0].t-this.offsetTime)r=d[0].s[0],s=!0,c=0;else if(e>=d[d.length-1].t-this.offsetTime)r=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],s=!0;else{for(var p,f,m=c,g=d.length-1,y=!0;y&&(p=d[m],!((f=d[m+1]).t-this.offsetTime>e));)m<g-1?m+=1:y=!1;if(c=m,!(s=1===p.h)){if(e>=f.t-this.offsetTime)h=1;else if(e<p.t-this.offsetTime)h=0;else{var b;p.__fnct?b=p.__fnct:(b=BezierFactory.getBezierEasing(p.o.x,p.o.y,p.i.x,p.i.y).get,p.__fnct=b),h=b((e-(p.t-this.offsetTime))/(f.t-this.offsetTime-(p.t-this.offsetTime)))}a=f.s?f.s[0]:p.e[0]}r=p.s[0]}for(l=t._length,u=r.i[0].length,n.lastIndex=c,i=0;i<l;i+=1)for(o=0;o<u;o+=1)t.i[i][o]=s?r.i[i][o]:r.i[i][o]+(a.i[i][o]-r.i[i][o])*h,t.o[i][o]=s?r.o[i][o]:r.o[i][o]+(a.o[i][o]-r.o[i][o])*h,t.v[i][o]=s?r.v[i][o]:r.v[i][o]+(a.v[i][o]-r.v[i][o])*h}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,a=this._caching.lastFrame;return a!==e&&(a<n&&t<n||a>r&&t>r)||(this._caching.lastIndex=a<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function a(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,r=e._length;for(n=0;n<r;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function s(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function i(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shapePool.clone(3===n?t.pt.k:t.ks.k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,a,s){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===s?a.pt.k:a.ks.k,this.k=!0,this.kf=!0;var i=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,i),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}i.prototype.interpolateShape=t,i.prototype.getValue=s,i.prototype.setVValue=a,i.prototype.addEffect=o,l.prototype.getValue=s,l.prototype.interpolateShape=t,l.prototype.setVValue=a,l.prototype.addEffect=o;var u=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,a=this.s.v[1]/2,s=3!==this.d,i=this.v;i.v[0][0]=t,i.v[0][1]=n-a,i.v[1][0]=s?t+r:t-r,i.v[1][1]=n,i.v[2][0]=t,i.v[2][1]=n+a,i.v[3][0]=s?t-r:t+r,i.v[3][1]=n,i.i[0][0]=s?t-r*e:t+r*e,i.i[0][1]=n-a,i.i[1][0]=s?t+r:t-r,i.i[1][1]=n-a*e,i.i[2][0]=s?t+r*e:t-r*e,i.i[2][1]=n+a,i.i[3][0]=s?t-r:t+r,i.i[3][1]=n+a*e,i.o[0][0]=s?t+r*e:t-r*e,i.o[0][1]=n-a,i.o[1][0]=s?t+r:t-r,i.o[1][1]=n+a*e,i.o[2][0]=s?t-r*e:t+r*e,i.o[2][1]=n+a,i.o[3][0]=s?t-r:t+r,i.o[3][1]=n-a*e}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,r,a=2*Math.floor(this.pt.v),s=2*Math.PI/a,i=!0,o=this.or.v,l=this.ir.v,u=this.os.v,h=this.is.v,c=2*Math.PI*o/(2*a),d=2*Math.PI*l/(2*a),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<a;e+=1){n=i?u:h,r=i?c:d;var m=(t=i?o:l)*Math.cos(p),g=t*Math.sin(p),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),b=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);this.v.setTripleAt(m+=+this.p.v[0],g+=+this.p.v[1],m-y*r*n*f,g-b*r*n*f,m+y*r*n*f,g+b*r*n*f,e,!0),i=!i,p+=s*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,r=this.or.v,a=this.os.v,s=2*Math.PI*r/(4*t),i=.5*-Math.PI,o=3===this.data.d?-1:1;for(i+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=r*Math.cos(i),u=r*Math.sin(i),h=0===l&&0===u?0:u/Math.sqrt(l*l+u*u),c=0===l&&0===u?0:-l/Math.sqrt(l*l+u*u);this.v.setTripleAt(l+=+this.p.v[0],u+=+this.p.v[1],l-h*s*a*o,u-c*s*a*o,l+h*s*a*o,u+c*s*a*o,e,!0),i+=n*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),c=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,a=bmMin(n,r,this.r.v),s=a*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-r+a,e+n,t-r+a,e+n,t-r+s,0,!0),this.v.setTripleAt(e+n,t+r-a,e+n,t+r-s,e+n,t+r-a,1,!0),0!==a?(this.v.setTripleAt(e+n-a,t+r,e+n-a,t+r,e+n-s,t+r,2,!0),this.v.setTripleAt(e-n+a,t+r,e-n+s,t+r,e-n+a,t+r,3,!0),this.v.setTripleAt(e-n,t+r-a,e-n,t+r-a,e-n,t+r-s,4,!0),this.v.setTripleAt(e-n,t-r+a,e-n,t-r+s,e-n,t-r+a,5,!0),this.v.setTripleAt(e-n+a,t-r,e-n+a,t-r,e-n+s,t-r,6,!0),this.v.setTripleAt(e+n-a,t-r,e+n-s,t-r,e+n-a,t-r,7,!0)):(this.v.setTripleAt(e-n,t+r,e-n+s,t+r,e-n,t+r,2),this.v.setTripleAt(e-n,t-r,e-n,t-r+s,e-n,t-r,3))):(this.v.setTripleAt(e+n,t-r+a,e+n,t-r+s,e+n,t-r+a,0,!0),0!==a?(this.v.setTripleAt(e+n-a,t-r,e+n-a,t-r,e+n-s,t-r,1,!0),this.v.setTripleAt(e-n+a,t-r,e-n+s,t-r,e-n+a,t-r,2,!0),this.v.setTripleAt(e-n,t-r+a,e-n,t-r+a,e-n,t-r+s,3,!0),this.v.setTripleAt(e-n,t+r-a,e-n,t+r-s,e-n,t+r-a,4,!0),this.v.setTripleAt(e-n+a,t+r,e-n+a,t+r,e-n+s,t+r,5,!0),this.v.setTripleAt(e+n-a,t+r,e+n-s,t+r,e+n-a,t+r,6,!0),this.v.setTripleAt(e+n,t+r-a,e+n,t+r-a,e+n,t+r-s,7,!0)):(this.v.setTripleAt(e-n,t-r,e-n+s,t-r,e-n,t-r,1,!0),this.v.setTripleAt(e-n,t+r,e-n,t+r-s,e-n,t+r,2,!0),this.v.setTripleAt(e+n,t+r,e+n-s,t+r,e+n,t+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}();return{getShapeProp:function(e,t,n){var r;return 3===n||4===n?r=(3===n?t.pt:t.ks).k.length?new l(e,t,n):new i(e,t,n):5===n?r=new c(e,t):6===n?r=new u(e,t):7===n&&(r=new h(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return i},getKeyframedConstructorFunction:function(){return l}}}(),ShapeModifiers=(ob={},modifiers={},ob.registerModifier=function(e,t){modifiers[e]||(modifiers[e]=t)},ob.getModifier=function(e,t,n){return new modifiers[e](t,n)},ob),ob,modifiers;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(e,t,n,r){var a;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var s,i=t.length||0;for(a=0;a<i;a+=1)s=PropertyFactory.getProp(e,t[a].v,0,0,this),this.k=s.k||this.k,this.dataProps[a]={n:t[a].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,r,a){var s=[];t<=1?s.push({s:e,e:t}):e>=1?s.push({s:e-1,e:t-1}):(s.push({s:e,e:1}),s.push({s:0,e:t-1}));var i,o,l=[],u=s.length;for(i=0;i<u;i+=1)(o=s[i]).e*a<r||o.s*a>r+n||l.push([o.s*a<=r?0:(o.s*a-r)/n,o.e*a>=r+n?1:(o.e*a-r)/n]);return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,r,a;if(this._mdf||e){var s=this.o.v%360/360;if(s<0&&(s+=1),(t=this.s.v>1?1+s:this.s.v<0?0+s:this.s.v+s)>(n=this.e.v>1?1+s:this.e.v<0?0+s:this.e.v+s)){var i=t;t=n,n=i}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var o,l,u,h,c,d=this.shapes.length,p=0;if(n===t)for(a=0;a<d;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(a=0;a<d;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var f,m,g=[];for(a=0;a<d;a+=1)if((f=this.shapes[a]).shape._mdf||this._mdf||e||2===this.m){if(l=(r=f.shape.paths)._length,c=0,!f.shape._mdf&&f.pathsData.length)c=f.totalShapeLength;else{for(u=this.releasePathsData(f.pathsData),o=0;o<l;o+=1)h=bez.getSegmentsLength(r.shapes[o]),u.push(h),c+=h.totalLength;f.totalShapeLength=c,f.pathsData=u}p+=c,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var y,b=t,x=n,v=0;for(a=d-1;a>=0;a-=1)if((f=this.shapes[a]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&d>1?(y=this.calculateShapeEdges(t,n,f.totalShapeLength,v,p),v+=f.totalShapeLength):y=[[b,x]],l=y.length,o=0;o<l;o+=1){b=y[o][0],x=y[o][1],g.length=0,x<=1?g.push({s:f.totalShapeLength*b,e:f.totalShapeLength*x}):b>=1?g.push({s:f.totalShapeLength*(b-1),e:f.totalShapeLength*(x-1)}):(g.push({s:f.totalShapeLength*b,e:f.totalShapeLength}),g.push({s:0,e:f.totalShapeLength*(x-1)}));var A=this.addShapes(f,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var w=A.pop();this.addPaths(A,m),A=this.addShapes(f,g[1],w)}else this.addPaths(A,m),A=this.addShapes(f,g[1]);this.addPaths(A,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,r,a,s,i){a.setXYAt(t[0],t[1],"o",s),a.setXYAt(n[0],n[1],"i",s+1),i&&a.setXYAt(e[0],e[1],"v",s),a.setXYAt(r[0],r[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,r){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),r&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var r,a,s,i,o,l,u,h,c=e.pathsData,d=e.shape.paths.shapes,p=e.shape.paths._length,f=0,m=[],g=!0;for(n?(o=n._length,h=n._length):(n=shapePool.newElement(),o=0,h=0),m.push(n),r=0;r<p;r+=1){for(l=c[r].lengths,n.c=d[r].c,s=d[r].c?l.length:l.length+1,a=1;a<s;a+=1)if(f+(i=l[a-1]).addedLength<t.s)f+=i.addedLength,n.c=!1;else{if(f>t.e){n.c=!1;break}t.s<=f&&t.e>=f+i.addedLength?(this.addSegment(d[r].v[a-1],d[r].o[a-1],d[r].i[a],d[r].v[a],n,o,g),g=!1):(u=bez.getNewSegment(d[r].v[a-1],d[r].v[a],d[r].o[a-1],d[r].i[a],(t.s-f)/i.addedLength,(t.e-f)/i.addedLength,l[a-1]),this.addSegmentFromArray(u,n,o,g),g=!1,n.c=!1),f+=i.addedLength,o+=1}if(d[r].c&&l.length){if(i=l[a-1],f<=t.e){var y=l[a-1].addedLength;t.s<=f&&t.e>=f+y?(this.addSegment(d[r].v[a-1],d[r].o[a-1],d[r].i[0],d[r].v[0],n,o,g),g=!1):(u=bez.getNewSegment(d[r].v[a-1],d[r].v[0],d[r].o[a-1],d[r].i[0],(t.s-f)/y,(t.e-f)/y,l[a-1]),this.addSegmentFromArray(u,n,o,g),g=!1,n.c=!1)}else n.c=!1;f+=i.addedLength,o+=1}if(n._length&&(n.setXYAt(n.v[h][0],n.v[h][1],"i",h),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>t.e)break;r<p-1&&(n=shapePool.newElement(),g=!0,m.push(n),o=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n,r=shapePool.newElement();r.c=e.c;var a,s,i,o,l,u,h,c,d,p,f,m,g=e._length,y=0;for(n=0;n<g;n+=1)s=e.i[n],(a=e.v[n])[0]===(i=e.o[n])[0]&&a[1]===i[1]&&a[0]===s[0]&&a[1]===s[1]?0!==n&&n!==g-1||e.c?(o=0===n?e.v[g-1]:e.v[n-1],u=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,r.setTripleAt(h=f=a[0]+(o[0]-a[0])*u,c=m=a[1]-(a[1]-o[1])*u,h-(h-a[0])*roundCorner,c-(c-a[1])*roundCorner,f,m,y),y+=1,o=n===g-1?e.v[0]:e.v[n+1],u=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,r.setTripleAt(h=d=a[0]+(o[0]-a[0])*u,c=p=a[1]+(o[1]-a[1])*u,d,p,f=h-(h-a[0])*roundCorner,m=c-(c-a[1])*roundCorner,y),y+=1):(r.setTripleAt(a[0],a[1],i[0],i[1],s[0],s[1],y),y+=1):(r.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],y),y+=1);return r},RoundCornersModifier.prototype.processShapes=function(e){var t,n,r,a,s,i,o=this.shapes.length,l=this.rd.v;if(0!==l)for(n=0;n<o;n+=1){if(i=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(i.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,a=s.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,r=[0,0],a=e._length,s=0;for(s=0;s<a;s+=1)r[0]+=e.v[s][0],r[1]+=e.v[s][1];r[0]/=a,r[1]/=a;var i=shapePool.newElement();for(i.c=e.c,s=0;s<a;s+=1)i.setTripleAt(e.v[s][0]+(r[0]-e.v[s][0])*n,e.v[s][1]+(r[1]-e.v[s][1])*n,e.o[s][0]+(r[0]-e.o[s][0])*-n,e.o[s][1]+(r[1]-e.o[s][1])*-n,e.i[s][0]+(r[0]-e.i[s][0])*-n,e.i[s][1]+(r[1]-e.i[s][1])*-n,s);return i},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,r,a,s,i,o=this.shapes.length,l=this.amount.v;if(0!==l)for(n=0;n<o;n+=1){if(i=(s=this.shapes[n]).localShapeCollection,s.shape._mdf||this._mdf||e)for(i.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,a=s.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,r,a,s){var i=s?-1:1,o=r.s.v[0]+(1-r.s.v[0])*(1-a),l=r.s.v[1]+(1-r.s.v[1])*(1-a);e.translate(r.p.v[0]*i*a,r.p.v[1]*i*a,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*i*a),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(s?1/o:o,s?1/l:l),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,r){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)this._elements.unshift(t[n-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,r,a,s,i=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),i=!0}for(s=0,r=0;r<=this._groups.length-1;r+=1){if(this._groups[r]._render=o=s<l,this.changeGroupRender(this._groups[r].it,o),!o){var h=this.elemsData[r].it,c=h[h.length-1];0!==c.transform.op.v?(c.transform.op._mdf=!0,c.transform.op.v=0):c.transform.op._mdf=!1}s+=1}this._currentCopies=l;var d=this.o.v,p=d%1,f=d>0?Math.floor(d):Math.ceil(d),m=this.pMatrix.props,g=this.rMatrix.props,y=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var b,x,v=0;if(d>0){for(;v<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),v+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),v+=p)}else if(d<0){for(;v>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),v-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),v-=p)}for(r=1===this.data.m?0:this._currentCopies-1,a=1===this.data.m?1:-1,s=this._currentCopies;s;){if(x=(n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+r/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==v){for((0!==r&&1===a||r!==this._currentCopies-1&&-1===a)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),b=0;b<x;b+=1)n[b]=this.matrix.props[b];this.matrix.reset()}else for(this.matrix.reset(),b=0;b<x;b+=1)n[b]=this.matrix.props[b];v+=1,s-=1,r+=a}}else for(s=this._currentCopies,r=0,a=1;s;)n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,s-=1,r+=a;return i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,r,a=4*this.data.p;for(t=0;t<a;t+=1)n=t%4==0?100:255,r=Math.round(this.prop.v[t]*n),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(a=this.prop.v.length,t=4*this.data.p;t<a;t+=1)n=t%2==0?100:1,r=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(e,t,n,r){if(0===t)return"";var a,s=e.o,i=e.i,o=e.v,l=" M"+r.applyToPointStringified(o[0][0],o[0][1]);for(a=1;a<t;a+=1)l+=" C"+r.applyToPointStringified(s[a-1][0],s[a-1][1])+" "+r.applyToPointStringified(i[a][0],i[a][1])+" "+r.applyToPointStringified(o[a][0],o[a][1]);return n&&t&&(l+=" C"+r.applyToPointStringified(s[a-1][0],s[a-1][1])+" "+r.applyToPointStringified(i[0][0],i[0][1])+" "+r.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):Howl?new Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(e,t,n){var r="";if(e.e)r=e.p;else if(t){var a=e.p;-1!==a.indexOf("images/")&&(a=a.split("/")[1]),r=t+a}else r=n,r+=e.u?e.u:"",r+=e.p;return r}function a(e){var t=0,n=setInterval((function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(n)),t+=1}).bind(this),50)}function s(e){var t={assetData:e},n=r(e,this.assetsPath,this.path);return assetLoader.load(n,(function(e){t.img=e,this._footageLoaded()}).bind(this),(function(){t.img={},this._footageLoaded()}).bind(this)),t}function i(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return i.prototype={loadAssets:function(e,t){var n;this.imagesLoadedCb=t;var r=e.length;for(n=0;n<r;n+=1)e[n].layers||(e[n].t&&"seq"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var n=r(t,this.assetsPath,this.path),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",(function(){s.img=e,this._imageLoaded()}).bind(this),!1),a.src=n;var s={img:a,assetData:t};return s},createImageData:function(t){var n=r(t,this.assetsPath,this.path),a=createNS("image");isSafari?this.testImageLoaded(a):a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",(function(){s.img=e,this._imageLoaded()}).bind(this),!1),a.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(a):this._elementHelper.appendChild(a);var s={img:a,assetData:t};return s},imageLoaded:t,footageLoaded:n,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},i}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory={createFilter:function(e,t){var n=createNS("filter");return n.setAttribute("id",e),!0!==t&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}},assetLoader=function(){function e(e){return e.response&&"object"==typeof e.response?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,n,r){var a,s=new XMLHttpRequest;try{s.responseType="json"}catch(i){}s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)a=e(s),n(a);else try{a=e(s),n(a)}catch(i){r&&r(i)}},s.open("GET",t,!0),s.send()}}}();function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function TextAnimatorDataProperty(e,t,n){var r={propType:!1},a=PropertyFactory.getProp,s=t.a;this.a={r:s.r?a(e,s.r,0,degToRads,n):r,rx:s.rx?a(e,s.rx,0,degToRads,n):r,ry:s.ry?a(e,s.ry,0,degToRads,n):r,sk:s.sk?a(e,s.sk,0,degToRads,n):r,sa:s.sa?a(e,s.sa,0,degToRads,n):r,s:s.s?a(e,s.s,1,.01,n):r,a:s.a?a(e,s.a,1,0,n):r,o:s.o?a(e,s.o,0,.01,n):r,p:s.p?a(e,s.p,1,0,n):r,sw:s.sw?a(e,s.sw,0,0,n):r,sc:s.sc?a(e,s.sc,1,0,n):r,fc:s.fc?a(e,s.fc,1,0,n):r,fh:s.fh?a(e,s.fh,0,0,n):r,fs:s.fs?a(e,s.fs,0,.01,n):r,fb:s.fb?a(e,s.fb,0,.01,n):r,t:s.t?a(e,s.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function LetterProps(e,t,n,r,a,s){this.o=e,this.sw=t,this.sc=n,this.fc=r,this.m=a,this.p=s,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var e,t=this._textData.a.length,n=PropertyFactory.getProp;for(e=0;e<t;e+=1)this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,this._textData.a[e],this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,a,s,i,o,l,u,h,c,d,p,f,m,g,y,b,x,v=this._moreOptions.alignment.v,A=this._animatorsData,w=this._textData,k=this.mHelper,S=this._renderType,I=this.renderedLetters.length,_=e.l;if(this._hasMaskedPath){if(x=this._pathData.m,!this._pathData.n||this._pathData._mdf){var E,T=x.v;for(this._pathData.r&&(T=T.reverse()),i={tLength:0,segments:[]},s=T._length-1,y=0,a=0;a<s;a+=1)E=bez.buildBezierData(T.v[a],T.v[a+1],[T.o[a][0]-T.v[a][0],T.o[a][1]-T.v[a][1]],[T.i[a+1][0]-T.v[a+1][0],T.i[a+1][1]-T.v[a+1][1]]),i.tLength+=E.segmentLength,i.segments.push(E),y+=E.segmentLength;a=s,x.v.c&&(E=bez.buildBezierData(T.v[a],T.v[0],[T.o[a][0]-T.v[a][0],T.o[a][1]-T.v[a][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),i.tLength+=E.segmentLength,i.segments.push(E),y+=E.segmentLength),this._pathData.pi=i}if(d=0,c=1,u=0,h=!0,m=(i=this._pathData.pi).segments,(o=this._pathData.f.v)<0&&x.v.c)for(i.tLength<Math.abs(o)&&(o=-Math.abs(o)%i.tLength),c=(f=m[d=m.length-1].points).length-1;o<0;)o+=f[c].partialLength,(c-=1)<0&&(c=(f=m[d-=1].points).length-1);p=(f=m[d].points)[c-1],g=(l=f[c]).partialLength}s=_.length,n=0,r=0;var C,N,M,F,R,D=1.2*e.finalSize*.714,O=!0;M=A.length;var z,P,$,L,V,B,W,j,H,U,G,q,K=-1,X=o,Z=d,Y=c,J=-1,Q="",ee=this.defaultPropsArray;if(2===e.j||1===e.j){var te=0,ne=0,re=2===e.j?-.5:-1,ae=0,se=!0;for(a=0;a<s;a+=1)if(_[a].n){for(te&&(te+=ne);ae<a;)_[ae].animatorJustifyOffset=te,ae+=1;te=0,se=!0}else{for(N=0;N<M;N+=1)(C=A[N].a).t.propType&&(se&&2===e.j&&(ne+=C.t.v*re),te+=(R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars)).length?C.t.v*R[0]*re:C.t.v*R*re);se=!1}for(te&&(te+=ne);ae<a;)_[ae].animatorJustifyOffset=te,ae+=1}for(a=0;a<s;a+=1){if(k.reset(),L=1,_[a].n)n=0,r+=e.yOffset,r+=O?1:0,o=X,O=!1,this._hasMaskedPath&&(p=(f=m[d=Z].points)[(c=Y)-1],g=(l=f[c]).partialLength,u=0),Q="",G="",H="",q="",ee=this.defaultPropsArray;else{if(this._hasMaskedPath){if(J!==_[a].line){switch(e.j){case 1:o+=y-e.lineWidths[_[a].line];break;case 2:o+=(y-e.lineWidths[_[a].line])/2}J=_[a].line}K!==_[a].ind&&(_[K]&&(o+=_[K].extra),o+=_[a].an/2,K=_[a].ind),o+=v[0]*_[a].an*.005;var ie=0;for(N=0;N<M;N+=1)(C=A[N].a).p.propType&&(ie+=(R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars)).length?C.p.v[0]*R[0]:C.p.v[0]*R),C.a.propType&&(ie+=(R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars)).length?C.a.v[0]*R[0]:C.a.v[0]*R);for(h=!0;h;)u+g>=o+ie||!f?(P=p.point[0]+(l.point[0]-p.point[0])*(b=(o+ie-u)/l.partialLength),$=p.point[1]+(l.point[1]-p.point[1])*b,k.translate(-v[0]*_[a].an*.005,-v[1]*D*.01),h=!1):f&&(u+=l.partialLength,(c+=1)>=f.length&&(c=0,m[d+=1]?f=m[d].points:x.v.c?(c=0,f=m[d=0].points):(u-=l.partialLength,f=null)),f&&(p=l,g=(l=f[c]).partialLength));k.translate(-(z=_[a].an/2-_[a].add),0,0)}else k.translate(-(z=_[a].an/2-_[a].add),0,0),k.translate(-v[0]*_[a].an*.005,-v[1]*D*.01,0);for(N=0;N<M;N+=1)(C=A[N].a).t.propType&&(R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?o+=R.length?C.t.v*R[0]:C.t.v*R:n+=R.length?C.t.v*R[0]:C.t.v*R));for(e.strokeWidthAnim&&(B=e.sw||0),e.strokeColorAnim&&(V=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(W=[e.fc[0],e.fc[1],e.fc[2]]),N=0;N<M;N+=1)(C=A[N].a).a.propType&&((R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars)).length?k.translate(-C.a.v[0]*R[0],-C.a.v[1]*R[1],C.a.v[2]*R[2]):k.translate(-C.a.v[0]*R,-C.a.v[1]*R,C.a.v[2]*R));for(N=0;N<M;N+=1)(C=A[N].a).s.propType&&((R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars)).length?k.scale(1+(C.s.v[0]-1)*R[0],1+(C.s.v[1]-1)*R[1],1):k.scale(1+(C.s.v[0]-1)*R,1+(C.s.v[1]-1)*R,1));for(N=0;N<M;N+=1){if(C=A[N].a,R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars),C.sk.propType&&(R.length?k.skewFromAxis(-C.sk.v*R[0],C.sa.v*R[1]):k.skewFromAxis(-C.sk.v*R,C.sa.v*R)),C.r.propType&&k.rotateZ(R.length?-C.r.v*R[2]:-C.r.v*R),C.ry.propType&&k.rotateY(R.length?C.ry.v*R[1]:C.ry.v*R),C.rx.propType&&k.rotateX(R.length?C.rx.v*R[0]:C.rx.v*R),C.o.propType&&(L+=R.length?(C.o.v*R[0]-L)*R[0]:(C.o.v*R-L)*R),e.strokeWidthAnim&&C.sw.propType&&(B+=R.length?C.sw.v*R[0]:C.sw.v*R),e.strokeColorAnim&&C.sc.propType)for(j=0;j<3;j+=1)V[j]+=R.length?(C.sc.v[j]-V[j])*R[0]:(C.sc.v[j]-V[j])*R;if(e.fillColorAnim&&e.fc){if(C.fc.propType)for(j=0;j<3;j+=1)W[j]+=R.length?(C.fc.v[j]-W[j])*R[0]:(C.fc.v[j]-W[j])*R;C.fh.propType&&(W=addHueToRGB(W,R.length?C.fh.v*R[0]:C.fh.v*R)),C.fs.propType&&(W=addSaturationToRGB(W,R.length?C.fs.v*R[0]:C.fs.v*R)),C.fb.propType&&(W=addBrightnessToRGB(W,R.length?C.fb.v*R[0]:C.fb.v*R))}}for(N=0;N<M;N+=1)(C=A[N].a).p.propType&&(R=A[N].s.getMult(_[a].anIndexes[N],w.a[N].s.totalChars),this._hasMaskedPath?R.length?k.translate(0,C.p.v[1]*R[0],-C.p.v[2]*R[1]):k.translate(0,C.p.v[1]*R,-C.p.v[2]*R):R.length?k.translate(C.p.v[0]*R[0],C.p.v[1]*R[1],-C.p.v[2]*R[2]):k.translate(C.p.v[0]*R,C.p.v[1]*R,-C.p.v[2]*R));if(e.strokeWidthAnim&&(H=B<0?0:B),e.strokeColorAnim&&(U="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),e.fillColorAnim&&e.fc&&(G="rgb("+Math.round(255*W[0])+","+Math.round(255*W[1])+","+Math.round(255*W[2])+")"),this._hasMaskedPath){if(k.translate(0,-e.ls),k.translate(0,v[1]*D*.01+r,0),w.p.p){var oe=180*Math.atan((l.point[1]-p.point[1])/(l.point[0]-p.point[0]))/Math.PI;l.point[0]<p.point[0]&&(oe+=180),k.rotate(-oe*Math.PI/180)}k.translate(P,$,0),o-=v[0]*_[a].an*.005,_[a+1]&&K!==_[a+1].ind&&(o+=_[a].an/2,o+=.001*e.tr*e.finalSize)}else{switch(k.translate(n,r,0),e.ps&&k.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:k.translate(_[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[a].line]),0,0);break;case 2:k.translate(_[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[a].line])/2,0,0)}k.translate(0,-e.ls),k.translate(z,0,0),k.translate(v[0]*_[a].an*.005,v[1]*D*.01,0),n+=_[a].l+.001*e.tr*e.finalSize}"html"===S?Q=k.toCSS():"svg"===S?Q=k.to2dCSS():ee=[k.props[0],k.props[1],k.props[2],k.props[3],k.props[4],k.props[5],k.props[6],k.props[7],k.props[8],k.props[9],k.props[10],k.props[11],k.props[12],k.props[13],k.props[14],k.props[15]],q=L}I<=a?(F=new LetterProps(q,H,U,G,Q,ee),this.renderedLetters.push(F),I+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(F=this.renderedLetters[a]).update(q,H,U,G,Q,ee)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(e,t,n,r,a,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var i=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,i=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,i=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,i=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,i=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,i=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,i=!0),i},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var a=this.effectsSequence.length,s=e||this.data.d.k[this.keysIndex].s;for(r=0;r<a;r+=1)s=this.effectsSequence[r](n!==this.keysIndex?s:this.currentData,s.t);t!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,r=e.length;n<=r-1&&!(n===r-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n=FontManager.getCombinedCharacterCodes(),r=[],a=0,s=e.length;a<s;)t=e.charCodeAt(a),-1!==n.indexOf(t)?r[r.length-1]+=e.charAt(a):t>=55296&&t<=56319&&(t=e.charCodeAt(a+1))>=56320&&t<=57343?(r.push(e.substr(a,2)),a+=1):r.push(e.charAt(a)),a+=1;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,r,a,s,i,o,l=this.elem.globalData.fontManager,u=this.data,h=[],c=0,d=u.m.g,p=0,f=0,m=0,g=[],y=0,b=0,x=l.getFontByName(e.f),v=0,A=getFontProperties(x);e.fWeight=A.weight,e.fStyle=A.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var w,k=e.tr/1e3*e.finalSize;if(e.sz)for(var S,I,_=!0,E=e.sz[0],T=e.sz[1];_;){S=0,y=0,n=(I=this.buildFinalText(e.t)).length,k=e.tr/1e3*e.finalSize;var C=-1;for(t=0;t<n;t+=1)w=I[t].charCodeAt(0),r=!1," "===I[t]?C=t:13!==w&&3!==w||(y=0,r=!0,S+=e.finalLineHeight||1.2*e.finalSize),l.chars?(o=l.getCharData(I[t],x.fStyle,x.fFamily),v=r?0:o.w*e.finalSize/100):v=l.measureText(I[t],e.f,e.finalSize),y+v>E&&" "!==I[t]?(-1===C?n+=1:t=C,S+=e.finalLineHeight||1.2*e.finalSize,I.splice(t,C===t?1:0,"\r"),C=-1,y=0):(y+=v,y+=k);S+=x.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&T<S?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=I,n=e.finalText.length,_=!1)}y=-k,v=0;var N,M=0;for(t=0;t<n;t+=1)if(r=!1,13===(w=(N=e.finalText[t]).charCodeAt(0))||3===w?(M=0,g.push(y),b=y>b?y:b,y=-2*k,a="",r=!0,m+=1):a=N,l.chars?(o=l.getCharData(N,x.fStyle,l.getFontByName(e.f).fFamily),v=r?0:o.w*e.finalSize/100):v=l.measureText(a,e.f,e.finalSize)," "===N?M+=v+k:(y+=v+k+M,M=0),h.push({l:v,an:v,add:p,n:r,anIndexes:[],val:a,line:m,animatorJustifyOffset:0}),2==d){if(p+=v,""===a||" "===a||t===n-1){for(""!==a&&" "!==a||(p-=v);f<=t;)h[f].an=p,h[f].ind=c,h[f].extra=v,f+=1;c+=1,p=0}}else if(3==d){if(p+=v,""===a||t===n-1){for(""===a&&(p-=v);f<=t;)h[f].an=p,h[f].ind=c,h[f].extra=v,f+=1;p=0,c+=1}}else h[c].ind=c,h[c].extra=0,c+=1;if(e.l=h,b=y>b?y:b,g.push(y),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=b,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=g;var F,R,D,O,z=u.a;i=z.length;var P=[];for(s=0;s<i;s+=1){for((F=z[s]).a.sc&&(e.strokeColorAnim=!0),F.a.sw&&(e.strokeWidthAnim=!0),(F.a.fc||F.a.fh||F.a.fs||F.a.fb)&&(e.fillColorAnim=!0),O=0,D=F.s.b,t=0;t<n;t+=1)(R=h[t]).anIndexes[s]=O,(1==D&&""!==R.val||2==D&&""!==R.val&&" "!==R.val||3==D&&(R.n||" "==R.val||t==n-1)||4==D&&(R.n||t==n-1))&&(1===F.s.rn&&P.push(O),O+=1);u.a[s].s.totalChars=O;var $,L=-1;if(1===F.s.rn)for(t=0;t<n;t+=1)L!=(R=h[t]).anIndexes[s]&&(L=R.anIndexes[s],$=P.splice(Math.floor(Math.random()*P.length),1)[0]),R.anIndexes[s]=$}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=x.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){var n=this.copyData({},this.data.d.k[t=void 0===t?this.keysIndex:t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,s=0,i=1,o=1;this.ne.v>0?a=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?i=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(a,s,i,o).get,u=0,h=this.finalS,c=this.finalE,d=this.data.sh;if(2===d)u=l(u=c===h?r>=c?1:0:e(0,t(.5/(c-h)+(r-h)/(c-h),1)));else if(3===d)u=l(u=c===h?r>=c?0:1:1-e(0,t(.5/(c-h)+(r-h)/(c-h),1)));else if(4===d)c===h?u=0:(u=e(0,t(.5/(c-h)+(r-h)/(c-h),1)))<.5?u*=2:u=1-2*(u-.5),u=l(u);else if(5===d){if(c===h)u=0;else{var p=c-h,f=-p/2+(r=t(e(0,r+.5-h),c-h)),m=p/2;u=Math.sqrt(1-f*f/(m*m))}u=l(u)}else 6===d?(c===h?u=0:(r=t(e(0,r+.5-h),c-h),u=(1+Math.cos(Math.PI+2*Math.PI*r/(c-h)))/2),u=l(u)):(r>=n(h)&&(u=e(0,t(r-h<0?t(c,1)-(h-r):c-r,1))),u=l(u));return u*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,r=this.s.v/t+n,a=this.e.v/t+n;if(r>a){var s=r;r=a,a=s}this.finalS=r,this.finalE=a}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,n){return new r(e,t,n)}}}(),poolFactory=function(e,t,n){var r=0,a=e,s=createSizedArray(a);return{newElement:function(){return r?s[r-=1]:t()},release:function(e){r===a&&(s=pooling.double(s),a*=2),n&&n(e),s[r]=e,r+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},pointPool=poolFactory(8,function(){return createTypedArray("float32",2)}),shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(e){var t,n=e._length;for(t=0;t<n;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1}),factory.clone=function(e){var t,n=factory.newElement(),r=void 0===e._length?e.v.length:e._length;for(n.setLength(r),n.c=e.c,t=0;t<r;t+=1)n.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return n},factory),factory,shapeCollectionPool=function(){var e={newShapeCollection:function(){return t?r[t-=1]:new ShapeCollection},release:function(e){var a,s=e._length;for(a=0;a<s;a+=1)shapePool.release(e.shapes[a]);e._length=0,t===n&&(r=pooling.double(r),n*=2),r[t]=e,t+=1}},t=0,n=4,r=createSizedArray(n);return e}(),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0}),bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),markerParser=function(){function e(e){for(var t,n=e.split("\r\n"),r={},a=0,s=0;s<n.length;s+=1)2===(t=n[s].split(":")).length&&(r[t[0]]=t[1].trim(),a+=1);if(0===a)throw new Error;return r}return function(t){for(var n=[],r=0;r<t.length;r+=1){var a=t[r],s={time:a.tm,duration:a.dr};try{s.payload=JSON.parse(t[r].cm)}catch(i){try{s.payload=e(t[r].cm)}catch(o){s.payload={name:t[r]}}}n.push(s)}return n}}();function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var r=createNS("title"),a=createElementID();r.setAttribute("id",a),r.textContent=t.title,this.svgElement.appendChild(r),n+=a}if(t&&t.description){var s=createNS("desc"),i=createElementID();s.setAttribute("id",i),s.textContent=t.description,this.svgElement.appendChild(s),n+=" "+i}n&&this.svgElement.setAttribute("aria-labelledby",n);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,a,s=this.globalData.defs,i=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(i),this.solidPath="";var o,l,u,h,c,d,p=this.masksProperties,f=0,m=[],g=createElementID(),y="clipPath",b="clip-path";for(r=0;r<i;r+=1)if(("a"!==p[r].mode&&"n"!==p[r].mode||p[r].inv||100!==p[r].o.k||p[r].o.x)&&(y="mask",b="mask"),"s"!==p[r].mode&&"i"!==p[r].mode||0!==f?u=null:((u=createNS("rect")).setAttribute("fill","#ffffff"),u.setAttribute("width",this.element.comp.data.w||0),u.setAttribute("height",this.element.comp.data.h||0),m.push(u)),a=createNS("path"),"n"===p[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),elem:a,lastPath:""},s.appendChild(a);else{var x;if(f+=1,a.setAttribute("fill","s"===p[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==p[r].x.k?(y="mask",b="mask",d=PropertyFactory.getProp(this.element,p[r].x,0,null,this.element),x=createElementID(),(h=createNS("filter")).setAttribute("id",x),(c=createNS("feMorphology")).setAttribute("operator","erode"),c.setAttribute("in","SourceGraphic"),c.setAttribute("radius","0"),h.appendChild(c),s.appendChild(h),a.setAttribute("stroke","s"===p[r].mode?"#000000":"#ffffff")):(c=null,d=null),this.storedData[r]={elem:a,x:d,expan:c,lastPath:"",lastOperator:"",filterId:x,lastRadius:0},"i"===p[r].mode){l=m.length;var v=createNS("g");for(o=0;o<l;o+=1)v.appendChild(m[o]);var A=createNS("mask");A.setAttribute("mask-type","alpha"),A.setAttribute("id",g+"_"+f),A.appendChild(a),s.appendChild(A),v.setAttribute("mask","url("+locationHref+"#"+g+"_"+f+")"),m.length=0,m.push(v)}else m.push(a);p[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),invRect:u},this.viewData[r].prop.k||this.drawPath(p[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(y),i=m.length,r=0;r<i;r+=1)this.maskElement.appendChild(m[r]);f>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(b,"url("+locationHref+"#"+g+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(e,t){this.elem=e,this.pos=t}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var r=0,a=e.length;r<a;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(e){var t,n,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var n,r=e.length,a=this.layers.length;for(t=0;t<r;t+=1)for(n=0;n<a;){if(this.layers[n].id===e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var r=this.elements,a=this.layers,s=0,i=a.length;s<i;)a[s].ind==t&&(r[s]&&!0!==r[s]?(n.push(r[s]),r[s].setAsParent(),void 0!==a[s].parent?this.buildElementParenting(e,a[s].parent,n):e.setHierarchy(n)):(this.buildItem(s),this.addPendingElement(e))),s+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var a=createElementID();n.setAttribute("id",a),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+a+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRenderer.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);t[e]=n,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?n.setMatte(t[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var r,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement()&&(r=this.elements[a].getBaseElement()),a+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(e);var t=this.contextData.cTr.props;this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRenderer.prototype.ctxOpacity=function(e){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=e<0?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t,n=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r=this.contextData.saved[this.contextData.cArrPos];for(t=0;t<16;t+=1)r[t]=n[t];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var t,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(t=0;t<16;t+=1)r[t]=n[t];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),this.contextData.cO=n=this.contextData.savedOp[this.contextData.cArrPos],this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,n,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",(e=this.animationItem.wrapper.offsetWidth)*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var a=this.renderConfig.preserveAspectRatio.split(" "),s=a[1]||"meet",i=a[0]||"xMidYMid",o=i.substr(0,4),l=i.substr(4);(r=this.transformCanvas.w/this.transformCanvas.h)>(n=e/t)&&"meet"===s||r<n&&"slice"===s?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===o&&(r<n&&"meet"===s||r>n&&"slice"===s)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===o&&(r<n&&"meet"===s||r>n&&"slice"===s)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(r>n&&"meet"===s||r<n&&"slice"===s)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(r>n&&"meet"===s||r<n&&"slice"===s)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var n;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=0;n<r;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var a,s,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(s=this.elements[i],a=(this.layers[i].ddd?this.getThreeDContainerByPos(i):s.getBaseElement())||a),i+=1;a?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,a):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(e,t){var n,r,a=createTag("div");styleDiv(a);var s=createTag("div");if(styleDiv(s),"3d"===t){(n=a.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var i="50% 50%";n.webkitTransformOrigin=i,n.mozTransformOrigin=i,n.transformOrigin=i;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=s.style).transform=o,r.webkitTransform=o}a.appendChild(s);var l={container:s,perspectiveElem:a,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRenderer.prototype.build3dContainers=function(){var e,t,n=this.layers.length,r="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var n=0,r=this.threeDElements.length;n<r;){if(t<=this.threeDElements[n].endPos){for(var a,s=this.threeDElements[n].startPos;s<t;)this.elements[s]&&this.elements[s].getBaseElement&&(a=this.elements[s].getBaseElement()),s+=1;a?this.threeDElements[n].container.insertBefore(e,a):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,r=t.style;r.width=e.w+"px",r.height=e.h+"px",this.resizerElem=t,styleDiv(t),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),r.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var s=createNS("defs");a.appendChild(s),this.data=e,this.setupGlobalData(e,a),this.globalData.defs=s,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,n,r,a=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>a/s?(e=a/this.globalData.compSize.w,t=a/this.globalData.compSize.w,n=0,r=(s-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(e=s/this.globalData.compSize.h,t=s/this.globalData.compSize.h,n=(a-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,r=0);var i=this.resizerElem.style;i.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+r+",0,1)",i.transform=i.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1){var a=this.threeDElements[e].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",a.perspective=a.webkitPerspective}}},HybridRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length,r=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var a=this.createComp(e[t],r,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var a=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[t].filterId+")")),a.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,(e+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var r,a,s=" M"+t.v[0][0]+","+t.v[0][1];for(a=t._length,r=1;r<a;r+=1)s+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&a>1&&(s+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==s){var i="";n.elem&&(t.c&&(i=e.inv?this.solidPath+s:s),n.elem.setAttribute("d",i)),n.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(t.cloneFromProps(e=this.finalTransform.mProp.v.props),n=0;n<r;n+=1)t.transform((e=this.hierarchy[n].finalTransform.mProp.v.props)[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n,r=!0,a=this.comp;r;)a.finalTransform?(a.data.hasMask&&t.splice(0,0,a.finalTransform),a=a.comp):r=!1;var s,i=t.length;for(n=0;n<i;n+=1)s=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-s[0],e[1]-s[1],0];return e},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var a,s,i,o=[];for(i=4*t.g.p,s=0;s<i;s+=4)a=createNS("stop"),r.appendChild(a),o.push(a);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+n+")"),this.gf=r,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,a,s=createNS("mask"),i=createNS("path");s.appendChild(i);var o=createElementID(),l=createElementID();s.setAttribute("id",l);var u=createNS(1===e.t?"linearGradient":"radialGradient");u.setAttribute("id",o),u.setAttribute("spreadMethod","pad"),u.setAttribute("gradientUnits","userSpaceOnUse"),a=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var h=this.stops;for(r=4*e.g.p;r<a;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),u.appendChild(n),h.push(n);i.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+o+")"),this.of=u,this.ms=s,this.ost=h,this.maskId=l,t.msElem=i}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(n,r,a){var s,i,o,l,u,h,c,d,p,f,m,g=r.styles.length,y=r.lvl;for(h=0;h<g;h+=1){if(l=r.sh._mdf||a,r.styles[h].lvl<y){for(d=t.reset(),f=y-r.styles[h].lvl,m=r.transformers.length-1;!l&&f>0;)l=r.transformers[m].mProps._mdf||l,f-=1,m-=1;if(l)for(f=y-r.styles[h].lvl,m=r.transformers.length-1;f>0;)d.transform((p=r.transformers[m].mProps.v.props)[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),f-=1,m-=1}else d=e;if(i=(c=r.sh.paths)._length,l){for(o="",s=0;s<i;s+=1)(u=c.shapes[s])&&u._length&&(o+=buildShapeString(u,u._length,u.c,d));r.caches[h]=o}else o=r.caches[h];r.styles[h].d+=!0===n.hd?"":o,r.styles[h]._mdf=l||r.styles[h]._mdf}}function a(e,t,n){var r=t.style;(t.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function s(e,t,n){i(e,t,n),o(0,t,n)}function i(e,t,n){var r,a,s,i,o,l=t.gf,u=t.g._hasOpacity,h=t.s.v,c=t.e.v;if((t.o._mdf||n)&&t.style.pElem.setAttribute("gf"===e.ty?"fill-opacity":"stroke-opacity",t.o.v),t.s._mdf||n){var d=1===e.t?"x1":"cx",p="x1"===d?"y1":"cy";l.setAttribute(d,h[0]),l.setAttribute(p,h[1]),u&&!t.g._collapsable&&(t.of.setAttribute(d,h[0]),t.of.setAttribute(p,h[1]))}if(t.g._cmdf||n){var f=t.g.c;for(s=(r=t.cst).length,a=0;a<s;a+=1)(i=r[a]).setAttribute("offset",f[4*a]+"%"),i.setAttribute("stop-color","rgb("+f[4*a+1]+","+f[4*a+2]+","+f[4*a+3]+")")}if(u&&(t.g._omdf||n)){var m=t.g.o;for(s=(r=t.g._collapsable?t.cst:t.ost).length,a=0;a<s;a+=1)i=r[a],t.g._collapsable||i.setAttribute("offset",m[2*a]+"%"),i.setAttribute("stop-opacity",m[2*a+1])}if(1===e.t)(t.e._mdf||n)&&(l.setAttribute("x2",c[0]),l.setAttribute("y2",c[1]),u&&!t.g._collapsable&&(t.of.setAttribute("x2",c[0]),t.of.setAttribute("y2",c[1])));else if((t.s._mdf||t.e._mdf||n)&&(o=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),l.setAttribute("r",o),u&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.e._mdf||t.h._mdf||t.a._mdf||n){o||(o=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)));var g=Math.atan2(c[1]-h[1],c[0]-h[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var b=o*y,x=Math.cos(g+t.a.v)*b+h[0],v=Math.sin(g+t.a.v)*b+h[1];l.setAttribute("fx",x),l.setAttribute("fy",v),u&&!t.g._collapsable&&(t.of.setAttribute("fx",x),t.of.setAttribute("fy",v))}}function o(e,t,n){var r=t.style,a=t.d;a&&(a._mdf||n)&&a.dashStr&&(r.pElem.setAttribute("stroke-dasharray",a.dashStr),r.pElem.setAttribute("stroke-dashoffset",a.dashoffset[0])),t.c&&(t.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return a;case"gf":return i;case"gs":return s;case"st":return o;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n;default:return null}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(e,t,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a,s=4;"rc"===t.ty?s=5:"el"===t.ty?s=6:"sr"===t.ty&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,s,e);var i,o=n.length;for(a=0;a<o;a+=1)n[a].closed||(i={transforms:r.addTransformSequence(n[a].transforms),trNodes:[]},this.styledShapes.push(i),n[a].elements.push(i))}function BaseElement(){}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(e,t,n){this.initElement(e,t,n)}function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function SVGTintFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),e.appendChild(n),this.matrixFilter=n,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var r,a=createNS("feMerge");e.appendChild(a),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),a.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),a.appendChild(r)}}function SVGFillFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(n),this.matrixFilter=n}function SVGGaussianBlurEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var n=createNS("feGaussianBlur");e.appendChild(n),this.feGaussianBlur=n}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.matrixFilter=r;var a=createNS("feFuncR");a.setAttribute("type","table"),r.appendChild(a),this.feFuncR=a;var s=createNS("feFuncG");s.setAttribute("type","table"),r.appendChild(s),this.feFuncG=s;var i=createNS("feFuncB");i.setAttribute("type","table"),r.appendChild(i),this.feFuncB=i}function SVGProLevelsFilter(e,t){this.filterManager=t;var n=this.filterManager.effectElements,r=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),r=createNS("feComponentTransfer")),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(e,t){var n=t.container.globalData.renderConfig.filterSize;e.setAttribute("x",n.x),e.setAttribute("y",n.y),e.setAttribute("width",n.width),e.setAttribute("height",n.height),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("in","SourceAlpha"),r.setAttribute("result","drop_shadow_1"),r.setAttribute("stdDeviation","0"),this.feGaussianBlur=r,e.appendChild(r);var a=createNS("feOffset");a.setAttribute("dx","25"),a.setAttribute("dy","0"),a.setAttribute("in","drop_shadow_1"),a.setAttribute("result","drop_shadow_2"),this.feOffset=a,e.appendChild(a);var s=createNS("feFlood");s.setAttribute("flood-color","#00ff00"),s.setAttribute("flood-opacity","1"),s.setAttribute("result","drop_shadow_3"),this.feFlood=s,e.appendChild(s);var i=createNS("feComposite");i.setAttribute("in","drop_shadow_3"),i.setAttribute("in2","drop_shadow_2"),i.setAttribute("operator","in"),i.setAttribute("result","drop_shadow_4"),e.appendChild(i);var o,l=createNS("feMerge");e.appendChild(l),o=createNS("feMergeNode"),l.appendChild(o),(o=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=o,this.feMerge=l,this.originalNodeAdded=!1,l.appendChild(o)}ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,r="_";for(t=0;t<n;t+=1)r+=e[t].transform.key+"_";var a=this.sequences[r];return a||(a={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=a,this.sequenceList.push(a)),a},processSequence:function(e,t){for(var n,r=0,a=e.transforms.length,s=t;r<a&&!t;){if(e.transforms[r].transform.mProps._mdf){s=!0;break}r+=1}if(s)for(e.finalTransform.reset(),r=a-1;r>=0;r-=1)e.finalTransform.transform((n=e.transforms[r].transform.mProps.v.props)[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);e._mdf=s},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,n,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var a=createNS("mask");a.setAttribute("id",this.layerId),a.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),a.appendChild(this.layerElement),r=a,this.globalData.defs.appendChild(a),featureSupport.maskType||1!=this.data.td||(a.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),r=n,a.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+e+")"))}else if(2==this.data.td){var s=createNS("mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type","alpha");var i=createNS("g");s.appendChild(i),e=createElementID(),t=filtersFactory.createFilter(e);var o=createNS("feComponentTransfer");o.setAttribute("in","SourceGraphic"),t.appendChild(o);var l=createNS("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),o.appendChild(l),this.globalData.defs.appendChild(t);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),i.setAttribute("filter","url("+locationHref+"#"+e+")"),i.appendChild(u),i.appendChild(this.layerElement),r=i,featureSupport.maskType||(s.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),i.appendChild(u),n.appendChild(this.layerElement),r=n,i.appendChild(n)),this.globalData.defs.appendChild(s)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var h=createNS("clipPath"),c=createNS("path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d=createElementID();if(h.setAttribute("id",d),h.appendChild(c),this.globalData.defs.appendChild(h),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+d+")"),p.appendChild(this.layerElement),this.transformedElement=p,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+d+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,r=t.length;n<r;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===e)return void(n[r].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){var n,r,a=t.length,s="";for(n=0;n<a;n+=1)s+=buildShapeString(r=t[n].ks.k,r.i.length,!0,e);return s},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,r,a){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(r,a,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},AudioElement.prototype.prepareFrame=function(e){this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this._currentTime=this.tm._placeholder?e/this.data.sr:this.tm.v},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this.audio.volume(e)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,r=[],a="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(a),a=""):a+=e[t],t+=1;return r.push(a),r},SVGTextLottieElement.prototype.buildNewText=function(){var e,t,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),this.layerElement.setAttribute("fill",n.fc?this.buildColor(n.fc):"rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var a=n.fWeight;this.layerElement.setAttribute("font-style",n.fStyle),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",n.t);var s,i=n.l||[],o=!!this.globalData.fontManager.chars;t=i.length;var l,u=this.mHelper,h="",c=this.data.singleShape,d=0,p=0,f=!0,m=.001*n.tr*n.finalSize;if(!c||o||n.sz){var g,y,b=this.textSpans.length;for(e=0;e<t;e+=1)o&&c&&0!==e||(s=b>e?this.textSpans[e]:createNS(o?"path":"text"),b<=e&&(s.setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4"),this.textSpans[e]=s,this.layerElement.appendChild(s)),s.style.display="inherit"),u.reset(),u.scale(n.finalSize/100,n.finalSize/100),c&&(i[e].n&&(d=-m,p+=n.yOffset,p+=f?1:0,f=!1),this.applyTextPropertiesToMatrix(n,u,i[e].line,d,p),d+=i[e].l||0,d+=m),o?(l=(g=(y=this.globalData.fontManager.getCharData(n.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&y.data||{}).shapes?g.shapes[0].it:[],c?h+=this.createPathShape(u,l):s.setAttribute("d",this.createPathShape(u,l))):(c&&s.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),s.textContent=i[e].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));c&&s&&s.setAttribute("d",h)}else{var x=this.textContainer,v="start";switch(n.j){case 1:v="end";break;case 2:v="middle";break;default:v="start"}x.setAttribute("text-anchor",v),x.setAttribute("letter-spacing",m);var A=this.buildTextContents(n.finalText);for(t=A.length,p=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(s=this.textSpans[e]||createNS("tspan")).textContent=A[e],s.setAttribute("x",0),s.setAttribute("y",p),s.style.display="inherit",x.appendChild(s),this.textSpans[e]=s,p+=n.finalLineHeight;this.layerElement.appendChild(x)}for(;e<this.textSpans.length;)this.textSpans[e].style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,r,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(t=s.length,e=0;e<t;e+=1)s[e].n||(r=this.textSpans[e],(n=a[e])._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,r,a=this.shapes.length,s=this.stylesList.length,i=[],o=!1;for(n=0;n<s;n+=1){for(r=this.stylesList[n],o=!1,i.length=0,e=0;e<a;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(i.push(t),o=t._isAnimated||o);i.length>1&&o&&this.setShapesAsAnimated(i)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,r=new SVGStyleData(e,t),a=r.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?n=new SVGFillStyleData(this,e,r):"gf"!==e.ty&&"gs"!==e.ty||(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),a.setAttribute("mask","url("+locationHref+"#"+n.maskId+")"))),"st"!==e.ty&&"gs"!==e.ty||(a.setAttribute("stroke-linecap",this.lcEnum[e.lc]||"round"),a.setAttribute("stroke-linejoin",this.ljEnum[e.lj]||"round"),a.setAttribute("fill-opacity","0"),1===e.lj&&a.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&a.setAttribute("fill-rule","evenodd"),e.ln&&a.setAttribute("id",e.ln),e.cl&&a.setAttribute("class",e.cl),e.bm&&(a.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var a=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(e,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,r,a,s,i){var o,l,u,h,c,d=[].concat(s),p=e.length-1,f=[],m=[];for(o=p;o>=0;o-=1){if((c=this.searchProcessedElement(e[o]))?t[o]=n[c-1]:e[o]._render=i,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty)c?t[o].style.closed=!1:t[o]=this.createStyleElement(e[o],a),e[o]._render&&r.appendChild(t[o].style.pElem),f.push(t[o].style);else if("gr"===e[o].ty){if(c)for(u=t[o].it.length,l=0;l<u;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,a+1,d,i),e[o]._render&&r.appendChild(t[o].gr)}else"tr"===e[o].ty?(c||(t[o]=this.createTransformElement(e[o],r)),d.push(t[o].transform)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(c||(t[o]=this.createShapeElement(e[o],d,a)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty?(c?(h=t[o]).closed=!1:((h=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=h,this.shapeModifiers.push(h)),m.push(h)):"rp"===e[o].ty&&(c?(h=t[o]).closed=!0:(h=ShapeModifiers.getModifier(e[o].ty),t[o]=h,h.init(this,e,o,t),this.shapeModifiers.push(h),i=!1),m.push(h));this.addProcessedElement(e[o],o+1)}for(p=f.length,o=0;o<p;o+=1)f[o].closed=!0;for(p=m.length,o=0;o<p;o+=1)m[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v;this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+this.filterManager.effectElements[2].p.v/100+" 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v;this.feGaussianBlur.setAttribute("stdDeviation",(3==n?0:t)+" "+(2==n?0:t)),this.feGaussianBlur.setAttribute("edgeMode",1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,r,a=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<r;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),i=createElementID();s.setAttribute("id",i),s.setAttribute("mask-type","alpha"),s.appendChild(t),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+locationHref+"#"+i+")");a[0];)o.appendChild(a[0]);this.elem.layerElement.appendChild(o),this.masker=s,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var n,r,a=this.paths.length;for(t=0;t<a;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var i=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=r.getTotalLength();s="0 0 0 "+l*i+" ";var u,h=Math.floor(l*(o-i)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(u=0;u<h;u+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*l+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",s)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var c=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*c[0])+","+bmFloor(255*c[1])+","+bmFloor(255*c[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,a=r[1]+" "+n[1]+" "+t[1],s=r[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",r[0]+" "+n[0]+" "+t[0]),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",s)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,r,a){for(var s,i,o=0,l=Math.min(e,t),u=Math.max(e,t),h=Array.call(null,{length:256}),c=0,d=a-r,p=t-e;o<=256;)i=(s=o/256)<=l?p<0?a:r:s>=u?p<0?r:a:r+d*Math.pow((s-e)/p,1/n),h[c]=i,c+=1,o+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=n*Math.cos(r),s=n*Math.sin(r);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(e){var t,n,r=e.data.ef?e.data.ef.length:0,a=createElementID(),s=filtersFactory.createFilter(a,!0),i=0;for(this.filters=[],t=0;t<r;t+=1)n=null,20===e.data.ef[t].ty?(i+=1,n=new SVGTintFilter(s,e.effectsManager.effectElements[t])):21===e.data.ef[t].ty?(i+=1,n=new SVGFillFilter(s,e.effectsManager.effectElements[t])):22===e.data.ef[t].ty?n=new SVGStrokeEffect(e,e.effectsManager.effectElements[t]):23===e.data.ef[t].ty?(i+=1,n=new SVGTritoneFilter(s,e.effectsManager.effectElements[t])):24===e.data.ef[t].ty?(i+=1,n=new SVGProLevelsFilter(s,e.effectsManager.effectElements[t])):25===e.data.ef[t].ty?(i+=1,n=new SVGDropShadowEffect(s,e.effectsManager.effectElements[t])):28===e.data.ef[t].ty?n=new SVGMatte3Effect(s,e.effectsManager.effectElements[t],e):29===e.data.ef[t].ty&&(i+=1,n=new SVGGaussianBlurEffect(s,e.effectsManager.effectElements[t])),n&&this.filters.push(n);i&&(e.globalData.defs.appendChild(s),e.layerElement.setAttribute("filter","url("+locationHref+"#"+a+")")),this.filters.length&&e.addRenderableComponent(this)}function CVContextData(){var e;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(e,t){var n;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,a=!1;for(n=0;n<r;n+=1)"n"!==this.masksProperties[n].mode&&(a=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVEffects(){}function HBaseElement(){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var a,s=e.ks.or.k.length;for(a=0;a<s;a+=1)e.ks.or.k[a].to=null,e.ks.or.k[a].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var r,a=n.children,s=0,i=a.length;s<i&&a[s]!==e.layerElement;)s+=1;s<=i-2&&(r=a[s+1]);var o=createNS("use");o.setAttribute("href","#"+t),r?n.insertBefore(o,r):n.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var a=e.globalData.defs;a.appendChild(r);var s=createNS("symbol");s.setAttribute("id",n),this.replaceInParent(t,n),s.appendChild(t.layerElement),a.appendChild(s);var i=createNS("use");i.setAttribute("href","#"+n),r.appendChild(i),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,r=t.length;n<r;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);var n=0;for(n=this._length;n<e;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var e=0===this.data.ty;this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,r=e.getContext("2d"),a=this.img.width,s=this.img.height,i=a/s,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;i>o&&"xMidYMid slice"===l||i<o&&"xMidYMid slice"!==l?t=(n=s)*o:n=(t=a)/o,r.drawImage(this.img,(a-t)/2,(s-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,r,a=this.element.finalTransform.mat,s=this.element.canvasContext,i=this.masksProperties.length;for(s.beginPath(),e=0;e<i;e+=1)if("n"!==this.masksProperties[e].mode){var o;this.masksProperties[e].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),t=a.applyToPointArray((r=this.viewData[e].v).v[0][0],r.v[0][1],0),s.moveTo(t[0],t[1]);var l=r._length;for(o=1;o<l;o+=1)n=a.applyToTriplePoints(r.o[o-1],r.i[o],r.v[o]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=a.applyToTriplePoints(r.o[o-1],r.i[0],r.v[0]),s.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"===e.ty||"st"===e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(n.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(n.lc=this.lcEnum[e.lc]||"round",n.lj=this.ljEnum[e.lj]||"round",1==e.lj&&(n.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(n.wi=r.w.v),e.d){var a=new DashProperty(this,e.d,"canvas",this);r.d=a,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,r,a){var s,i,o,l,u,h,c=e.length-1,d=[],p=[],f=[].concat(a);for(s=c;s>=0;s-=1){if((l=this.searchProcessedElement(e[s]))?t[s]=n[l-1]:e[s]._shouldRender=r,"fl"===e[s].ty||"st"===e[s].ty||"gf"===e[s].ty||"gs"===e[s].ty)l?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],f),d.push(t[s].style);else if("gr"===e[s].ty){if(l)for(o=t[s].it.length,i=0;i<o;i+=1)t[s].prevViewData[i]=t[s].it[i];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,r,f)}else"tr"===e[s].ty?(l||(h=this.createTransformElement(e[s]),t[s]=h),f.push(t[s]),this.addTransformToStyleList(t[s])):"sh"===e[s].ty||"rc"===e[s].ty||"el"===e[s].ty||"sr"===e[s].ty?l||(t[s]=this.createShapeElement(e[s])):"tm"===e[s].ty||"rd"===e[s].ty||"pb"===e[s].ty?(l?(u=t[s]).closed=!1:((u=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=u,this.shapeModifiers.push(u)),p.push(u)):"rp"===e[s].ty&&(l?(u=t[s]).closed=!0:(u=ShapeModifiers.getModifier(e[s].ty),t[s]=u,u.init(this,e,s,t),this.shapeModifiers.push(u),r=!1),p.push(u));this.addProcessedElement(e[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),c=p.length,s=0;s<c;s+=1)p[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,r,a,s,i,o,l,u=this.stylesList.length,h=this.globalData.renderer,c=this.globalData.canvasContext;for(e=0;e<u;e+=1)if(("st"!==(o=(l=this.stylesList[e]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(h.save(),s=l.elements,"st"===o||"gs"===o?(c.strokeStyle="st"===o?l.co:l.grd,c.lineWidth=l.wi,c.lineCap=l.lc,c.lineJoin=l.lj,c.miterLimit=l.ml||0):c.fillStyle="fl"===o?l.co:l.grd,h.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&c.beginPath(),h.ctxTransform(l.preTransforms.finalTransform.props),n=s.length,t=0;t<n;t+=1){for("st"!==o&&"gs"!==o||(c.beginPath(),l.da&&(c.setLineDash(l.da),c.lineDashOffset=l.do)),a=(i=s[t].trNodes).length,r=0;r<a;r+=1)"m"===i[r].t?c.moveTo(i[r].p[0],i[r].p[1]):"c"===i[r].t?c.bezierCurveTo(i[r].pts[0],i[r].pts[1],i[r].pts[2],i[r].pts[3],i[r].pts[4],i[r].pts[5]):c.closePath();"st"!==o&&"gs"!==o||(c.stroke(),l.da&&c.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&c.fill(l.r),h.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,r){var a,s;for(s=e,a=t.length-1;a>=0;a-=1)"tr"===t[a].ty?this.renderShapeTransform(e,s=n[a].transform):"sh"===t[a].ty||"el"===t[a].ty||"rc"===t[a].ty||"sr"===t[a].ty?this.renderPath(t[a],n[a]):"fl"===t[a].ty?this.renderFill(t[a],n[a],s):"st"===t[a].ty?this.renderStroke(t[a],n[a],s):"gf"===t[a].ty||"gs"===t[a].ty?this.renderGradientFill(t[a],n[a],s):"gr"===t[a].ty&&this.renderShape(s,t[a].it,n[a].it);r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,r,a,s=e.trNodes,i=t.paths,o=i._length;s.length=0;var l=e.transforms.finalTransform;for(a=0;a<o;a+=1){var u=i.shapes[a];if(u&&u.v){for(r=u._length,n=1;n<r;n+=1)1===n&&s.push({t:"m",p:l.applyToPointArray(u.v[0][0],u.v[0][1],0)}),s.push({t:"c",pts:l.applyToTriplePoints(u.o[n-1],u.i[n],u.v[n])});1===r&&s.push({t:"m",p:l.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&r&&(s.push({t:"c",pts:l.applyToTriplePoints(u.o[n-1],u.i[0],u.v[0])}),s.push({t:"z"}))}}e.trNodes=s}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,r=t.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var r,a=t.style;if(!a.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var s,i=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)r=i.createLinearGradient(o[0],o[1],l[0],l[1]);else{var u=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),h=Math.atan2(l[1]-o[1],l[0]-o[0]),c=t.h.v;c>=1?c=.99:c<=-1&&(c=-.99);var d=u*c,p=Math.cos(h+t.a.v)*d+o[0],f=Math.sin(h+t.a.v)*d+o[1];r=i.createRadialGradient(p,f,0,o[0],o[1],u)}var m=e.g.p,g=t.g.c,y=1;for(s=0;s<m;s+=1)t.g._hasOpacity&&t.g._collapsable&&(y=t.g.o[2*s+1]),r.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+y+")");a.grd=r}a.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var r=t.style,a=t.d;a&&(a._mdf||this._isFirstFrame)&&(r.da=a.dashArray,r.do=a.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,a,s,i,o,l,u,h,c,d,p,f,m=this.globalData.fontManager.getFontByName(e.f),g=e.l,y=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,a=e.finalText.length;var b=this.data.singleShape,x=.001*e.tr*e.finalSize,v=0,A=0,w=!0,k=0;for(r=0;r<a;r+=1){for(i=(s=this.globalData.fontManager.getCharData(e.finalText[r],m.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&s.data||{},y.reset(),b&&g[r].n&&(v=-x,A+=e.yOffset,A+=w?1:0,w=!1),c=(u=i.shapes?i.shapes[0].it:[]).length,y.scale(e.finalSize/100,e.finalSize/100),b&&this.applyTextPropertiesToMatrix(e,y,g[r].line,v,A),p=createSizedArray(c),h=0;h<c;h+=1){for(l=u[h].ks.k.i.length,d=u[h].ks.k,f=[],o=1;o<l;o+=1)1===o&&f.push(y.applyToX(d.v[0][0],d.v[0][1],0),y.applyToY(d.v[0][0],d.v[0][1],0)),f.push(y.applyToX(d.o[o-1][0],d.o[o-1][1],0),y.applyToY(d.o[o-1][0],d.o[o-1][1],0),y.applyToX(d.i[o][0],d.i[o][1],0),y.applyToY(d.i[o][0],d.i[o][1],0),y.applyToX(d.v[o][0],d.v[o][1],0),y.applyToY(d.v[o][0],d.v[o][1],0));f.push(y.applyToX(d.o[o-1][0],d.o[o-1][1],0),y.applyToY(d.o[o-1][0],d.o[o-1][1],0),y.applyToX(d.i[0][0],d.i[0][1],0),y.applyToY(d.i[0][0],d.i[0][1],0),y.applyToX(d.v[0][0],d.v[0][1],0),y.applyToY(d.v[0][0],d.v[0][1],0)),p[h]=f}b&&(v+=g[r].l,v+=x),this.textSpans[k]?this.textSpans[k].elem=p:this.textSpans[k]={elem:p},k+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,r,a,s,i=this.canvasContext;i.font=this.values.fValue,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;t=u.length;var h,c,d=null,p=null,f=null;for(e=0;e<t;e+=1)if(!u[e].n){if((o=l[e])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(o.p),this.globalData.renderer.ctxOpacity(o.o)),this.fill){for(o&&o.fc?d!==o.fc&&(d=o.fc,i.fillStyle=o.fc):d!==this.values.fill&&(d=this.values.fill,i.fillStyle=this.values.fill),r=(h=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(s=(c=h[n]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),a=2;a<s;a+=6)this.globalData.canvasContext.bezierCurveTo(c[a],c[a+1],c[a+2],c[a+3],c[a+4],c[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(o&&o.sw?f!==o.sw&&(f=o.sw,i.lineWidth=o.sw):f!==this.values.sWidth&&(f=this.values.sWidth,i.lineWidth=this.values.sWidth),o&&o.sc?p!==o.sc&&(p=o.sc,i.strokeStyle=o.sc):p!==this.values.stroke&&(p=this.values.stroke,i.strokeStyle=this.values.stroke),r=(h=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(s=(c=h[n]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),a=2;a<s;a+=6)this.globalData.canvasContext.bezierCurveTo(c[a],c[a+1],c[a+2],c[a+3],c[a+4],c[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}o&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,r,a,s,i,o=e.sh.v,l=e.transformers,u=o._length;if(!(u<=1)){for(n=0;n<u-1;n+=1)r=this.getTransformedPoint(l,o.v[n]),a=this.getTransformedPoint(l,o.o[n]),s=this.getTransformedPoint(l,o.i[n+1]),i=this.getTransformedPoint(l,o.v[n+1]),this.checkBounds(r,a,s,i,t);o.c&&(r=this.getTransformedPoint(l,o.v[n]),a=this.getTransformedPoint(l,o.o[n]),s=this.getTransformedPoint(l,o.i[0]),i=this.getTransformedPoint(l,o.v[0]),this.checkBounds(r,a,s,i,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,r,a){this.getBoundsOfCurve(e,t,n,r);var s=this.shapeBoundingBox;a.x=bmMin(s.left,a.x),a.xMax=bmMax(s.right,a.xMax),a.y=bmMin(s.top,a.y),a.yMax=bmMax(s.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,r){for(var a,s,i,o,l,u,h,c=[[e[0],r[0]],[e[1],r[1]]],d=0;d<2;++d)s=6*e[d]-12*t[d]+6*n[d],a=-3*e[d]+9*t[d]-9*n[d]+3*r[d],i=3*t[d]-3*e[d],s|=0,i|=0,0==(a|=0)&&0===s||(0===a?(o=-i/s)>0&&o<1&&c[d].push(this.calculateF(o,e,t,n,r,d)):(l=s*s-4*i*a)>=0&&((u=(-s+bmSqrt(l))/(2*a))>0&&u<1&&c[d].push(this.calculateF(u,e,t,n,r,d)),(h=(-s-bmSqrt(l))/(2*a))>0&&h<1&&c[d].push(this.calculateF(h,e,t,n,r,d))));this.shapeBoundingBox.left=bmMin.apply(null,c[0]),this.shapeBoundingBox.top=bmMin.apply(null,c[1]),this.shapeBoundingBox.right=bmMax.apply(null,c[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,c[1])},HShapeElement.prototype.calculateF=function(e,t,n,r,a,s){return bmPow(1-e,3)*t[s]+3*bmPow(1-e,2)*e*n[s]+3*(1-e)*bmPow(e,2)*r[s]+bmPow(e,3)*a[s]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it&&this.calculateBoundingBox(e[n].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=a,r.webkitTransform=a}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,a,s=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{t.fontFamily=s.fFamily;var i=e.fWeight;t.fontStyle=e.fStyle,t.fontWeight=i}var o,l,u,h=e.l;a=h.length;var c,d=this.mHelper,p="",f=0;for(r=0;r<a;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[f]?o=this.textPaths[f]:((o=createNS("path")).setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[f]?u=(l=this.textSpans[f]).children[0]:((l=createTag("div")).style.lineHeight=0,(u=createNS("svg")).appendChild(o),styleDiv(l)))):this.isMasked?o=this.textPaths[f]?this.textPaths[f]:createNS("text"):this.textSpans[f]?(l=this.textSpans[f],o=this.textPaths[f]):(styleDiv(l=createTag("span")),styleDiv(o=createTag("span")),l.appendChild(o)),this.globalData.fontManager.chars){var m,g=this.globalData.fontManager.getCharData(e.finalText[r],s.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(m=g?g.data:null,d.reset(),m&&m.shapes&&(c=m.shapes[0].it,d.scale(e.finalSize/100,e.finalSize/100),p=this.createPathShape(d,c),o.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(o);else{if(this.innerElem.appendChild(l),m&&m.shapes){document.body.appendChild(u);var y=u.getBBox();u.setAttribute("width",y.width+2),u.setAttribute("height",y.height+2),u.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var b=u.style,x="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";b.transform=x,b.webkitTransform=x,h[r].yOffset=y.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);l.appendChild(u)}}else if(o.textContent=h[r].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(o);else{this.innerElem.appendChild(l);var v=o.style,A="translate3d(0,"+-e.finalSize/1.2+"px,0)";v.transform=A,v.webkitTransform=A}this.textSpans[f]=this.isMasked?o:l,this.textSpans[f].style.display="block",this.textPaths[f]=o,f+=1}for(;f<this.textSpans.length;)this.textSpans[f].style.display="none",f+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";(e=this.svgElement.style).transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,r,a,s,i,o=0,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;for(r=u.length,n=0;n<r;n+=1)u[n].n?o+=1:(s=this.textSpans[n],i=this.textPaths[n],a=l[o],o+=1,a._mdf.m&&(this.isMasked?s.setAttribute("transform",a.m):(s.style.webkitTransform=a.m,s.style.transform=a.m)),s.style.opacity=a.o,a.sw&&a._mdf.sw&&i.setAttribute("stroke-width",a.sw),a.sc&&a._mdf.sc&&i.setAttribute("stroke",a.sc),a.fc&&a._mdf.fc&&(i.setAttribute("fill",a.fc),i.style.color=a.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var h=this.innerElem.getBBox();if(this.currentBBox.w!==h.width&&(this.currentBBox.w=h.width,this.svgElement.setAttribute("width",h.width)),this.currentBBox.h!==h.height&&(this.currentBBox.h=h.height,this.svgElement.setAttribute("height",h.height)),this.currentBBox.w!==h.width+2||this.currentBBox.h!==h.height+2||this.currentBBox.x!==h.x-1||this.currentBBox.y!==h.y-1){this.currentBBox.w=h.width+2,this.currentBBox.h=h.height+2,this.currentBBox.x=h.x-1,this.currentBBox.y=h.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var c="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";(e=this.svgElement.style).transform=c,e.webkitTransform=c}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n,r,a=this.comp.threeDElements.length;for(e=0;e<a;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){r=t.container.style;var s=this.pe.v+"px",i="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(n=t.perspectiveElem.style).perspective=s,n.webkitPerspective=s,r.transformOrigin=i,r.mozTransformOrigin=i,r.webkitTransformOrigin=i,n.transform=o,n.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;a=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),i=[a[0]/s,a[1]/s,a[2]/s],o=Math.sqrt(i[2]*i[2]+i[0]*i[0]),l=Math.atan2(i[1],o),u=Math.atan2(i[0],-i[2]);this.mat.rotateY(u).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var h=!this._prevMat.equals(this.mat);if((h||this.pe._mdf)&&this.comp.threeDElements){var c,d,p;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(c=this.comp.threeDElements[e]).type){if(h){var f=this.mat.toCSS();(p=c.container.style).transform=f,p.webkitTransform=f}this.pe._mdf&&((d=c.perspectiveElem.style).perspective=this.pe.v+"px",d.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var e={},t=[],n=0,r=0,a=0,s=!0,i=!1;function o(e){for(var n=0,a=e.target;n<r;)t[n].animation===a&&(t.splice(n,1),n-=1,r-=1,a.isPaused||h()),n+=1}function l(e,n){if(!e)return null;for(var a=0;a<r;){if(t[a].elem===e&&null!==t[a].elem)return t[a].animation;a+=1}var s=new AnimationItem;return c(s,e),s.setData(e,n),s}function u(){a+=1,f()}function h(){a-=1}function c(e,n){e.addEventListener("destroy",o),e.addEventListener("_active",u),e.addEventListener("_idle",h),t.push({elem:n,animation:e}),r+=1}function d(e){var o,l=e-n;for(o=0;o<r;o+=1)t[o].animation.advanceTime(l);n=e,a&&!i?window.requestAnimationFrame(d):s=!0}function p(e){n=e,window.requestAnimationFrame(d)}function f(){!i&&a&&s&&(window.requestAnimationFrame(p),s=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return c(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var a;for(a=0;a<r;a+=1)t[a].animation.setSpeed(e,n)},e.setDirection=function(e,n){var a;for(a=0;a<r;a+=1)t[a].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var r,a=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=a.length;for(r=0;r<s;r+=1)n&&a[r].setAttribute("data-bm-type",n),l(a[r],e);if(t&&0===s){n||(n="svg");var i=document.getElementsByTagName("body")[0];i.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",n),i.appendChild(o),l(o,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,a){var s;for(s=0;s<r;s+=1)t[s].animation.goToAndStop(e,n,a)},e.destroy=function(e){var n;for(n=r-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){i=!0},e.unfreeze=function(){i=!1,f()},e.setVolume=function(e,n){var a;for(a=0;a<r;a+=1)t[a].animation.setVolume(e,n)},e.mute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.mute(e)},e.unmute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r.push(t[e].animation);return r},e}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[]};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";switch(e.animType?t=e.animType:e.renderer&&(t=e.renderer),t){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,this.loop=""===e.loop||null==e.loop||!0===e.loop||!1!==e.loop&&parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.configAnimation(e.animationData):e.path&&(this.path=-1!==e.path.lastIndexOf("\\")?e.path.substr(0,e.path.lastIndexOf("\\")+1):e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(e.path,this.configAnimation.bind(this),(function(){this.trigger("data_failed")}).bind(this)))},AnimationItem.prototype.setData=function(e,t){t&&"object"!=typeof t&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},r=e.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var a=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===a?n.loop=!1:"true"===a?n.loop=!0:""!==a&&(n.loop=parseInt(a,10));var s=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==s,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,r=this.animationData.layers,a=r.length,s=e.layers,i=s.length;for(n=0;n<i;n+=1)for(t=0;t<a;){if(r[t].id===s[n].id){r[t]=s[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(a=e.assets.length,t=0;t<a;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&this.goToAndStop(a.time,!0)}else this.setCurrentRawFrameValue(t?e:e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(r,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"==typeof e[0]){var n,r=e.length;for(n=0;n<r;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null;function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||"boolean"===e||"string"===e||t instanceof Number}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t||e instanceof Number)return-e;if($bm_isInstanceOfArray(e)){var n,r=e.length,a=[];for(n=0;n<r;n+=1)a[n]=-e[n];return a}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=typeof e,r=typeof t;if("string"===n||"string"===r)return e+t;if(isNumerable(n,e)&&isNumerable(r,t))return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,s=e.length,i=t.length,o=[];a<s||a<i;)o[a]=("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?e[a]+t[a]:void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}var add=sum;function sub(e,t){var n=typeof e,r=typeof t;if(isNumerable(n,e)&&isNumerable(r,t))return"string"===n&&(e=parseInt(e,10)),"string"===r&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,s=e.length,i=t.length,o=[];a<s||a<i;)o[a]=("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?e[a]-t[a]:void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}function mul(e,t){var n,r,a,s=typeof e,i=typeof t;if(isNumerable(s,e)&&isNumerable(i,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t)){for(n=createTypedArray("float32",a=e.length),r=0;r<a;r+=1)n[r]=e[r]*t;return n}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(n=createTypedArray("float32",a=t.length),r=0;r<a;r+=1)n[r]=e*t[r];return n}return 0}function div(e,t){var n,r,a,s=typeof e,i=typeof t;if(isNumerable(s,e)&&isNumerable(i,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t)){for(n=createTypedArray("float32",a=e.length),r=0;r<a;r+=1)n[r]=e[r]/t;return n}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(n=createTypedArray("float32",a=t.length),r=0;r<a;r+=1)n[r]=e/t[r];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var r=n;n=t,t=r}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return Math.abs(e-(t=t||0));var n;t||(t=helperLengthArray);var r=Math.min(e.length,t.length),a=0;for(n=0;n<r;n+=1)a+=Math.pow(t[n]-e[n],2);return Math.sqrt(a)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,r=e[0],a=e[1],s=e[2],i=Math.max(r,a,s),o=Math.min(r,a,s),l=(i+o)/2;if(i===o)t=0,n=0;else{var u=i-o;switch(n=l>.5?u/(2-i-o):u/(i+o),i){case r:t=(a-s)/u+(a<s?6:0);break;case a:t=(s-r)/u+2;break;case s:t=(r-a)/u+4}t/=6}return[t,n,l,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,r,a=e[0],s=e[1],i=e[2];if(0===s)t=i,r=i,n=i;else{var o=i<.5?i*(1+s):i+s-i*s,l=2*i-o;t=hue2rgb(l,o,a+1/3),n=hue2rgb(l,o,a),r=hue2rgb(l,o,a-1/3)}return[t,n,r,e[3]]}function linear(e,t,n,r,a){if(void 0!==r&&void 0!==a||(r=t,a=n,t=0,n=1),n<t){var s=n;n=t,t=s}if(e<=t)return r;if(e>=n)return a;var i,o=n===t?0:(e-t)/(n-t);if(!r.length)return r+(a-r)*o;var l=r.length,u=createTypedArray("float32",l);for(i=0;i<l;i+=1)u[i]=r[i]+(a[i]-r[i])*o;return u}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,r=t.length;e||(e=createTypedArray("float32",r));var a=createTypedArray("float32",r),s=BMMath.random();for(n=0;n<r;n+=1)a[n]=e[n]+s*(t[n]-e[n]);return a}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,r){var a,s=e.length,i=shapePool.newElement();i.setPathData(!!r,s);var o,l,u=[0,0];for(a=0;a<s;a+=1)i.setTripleAt(e[a][0],e[a][1],(l=n&&n[a]?n[a]:u)[0]+e[a][0],l[1]+e[a][1],(o=t&&t[a]?t[a]:u)[0]+e[a][0],o[1]+e[a][1],a,!0);return i}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(e,t){var n,r,a=this.pv.length?this.pv.length:1,s=createTypedArray("float32",a),i=Math.floor(5*time);for(n=0,r=0;n<i;){for(r=0;r<a;r+=1)s[r]+=-t+2*t*BMMath.random();n+=1}var o=5*time,l=o-Math.floor(o),u=createTypedArray("float32",a);if(a>1){for(r=0;r<a;r+=1)u[r]=this.pv[r]+s[r]+(-t+2*t*BMMath.random())*l;return u}return this.pv+s[0]+(-t+2*t*BMMath.random())*l}).bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(e,t,n,r,a){return applyEase(easeOutBez,e,t,n,r,a)}function easeIn(e,t,n,r,a){return applyEase(easeInBez,e,t,n,r,a)}function ease(e,t,n,r,a){return applyEase(easeInOutBez,e,t,n,r,a)}function applyEase(e,t,n,r,a,s){void 0===a?(a=n,s=r):t=(t-n)/(r-n),t>1?t=1:t<0&&(t=0);var i=e(t);if($bm_isInstanceOfArray(a)){var o,l=a.length,u=createTypedArray("float32",l);for(o=0;o<l;o+=1)u[o]=(s[o]-a[o])*i+a[o];return u}return(s-a)*i+a}function nearestKey(e){var t,n,r,a=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(t=0;t<a-1;t+=1){if(e===data.k[t].t){n=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,r=data.k[t+1].t):(n=t+1,r=data.k[t].t);break}}-1===n&&(n=t+1,r=data.k[t].t)}else n=0,r=0;var s={};return s.index=n,s.time=r/elem.comp.globalData.frameRate,s}function key(e){var t,n,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);t={time:data.k[e-=1].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=a.length,n=0;n<r;n+=1)t[n]=a[n],t.value[n]=a[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),r=0;if(t.length){var a;for(a=0;a<t.length;a+=1)r+=Math.pow(n[a]-t[a],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,r=-.001,a=this.getValueAtTime(e),s=this.getValueAtTime(e+r);if(a.length)for(t=createTypedArray("float32",a.length),n=0;n<a.length;n+=1)t[n]=(s[n]-a[n])/r;else t=(s-a)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,a,s,i,o,l=this.comp.renderedFrame,u=this.keyframes,h=u[u.length-1].t;if(l<=h)return this.pv;if(n?a=h-(r=t?Math.abs(h-this.elem.comp.globalData.frameRate*t):Math.max(0,h-this.elem.data.ip)):((!t||t>u.length-1)&&(t=u.length-1),r=h-(a=u[u.length-1-t].t)),"pingpong"===e){if(Math.floor((l-a)/r)%2!=0)return this.getValueAtTime((r-(l-a)%r+a)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var c=this.getValueAtTime(a/this.comp.globalData.frameRate,0),d=this.getValueAtTime(h/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0),f=Math.floor((l-a)/r);if(this.pv.length){for(i=(o=new Array(c.length)).length,s=0;s<i;s+=1)o[s]=(d[s]-c[s])*f+p[s];return o}return(d-c)*f+p}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(i=(o=new Array(m.length)).length,s=0;s<i;s+=1)o[s]=m[s]+(l-h)/this.comp.globalData.frameRate*(m[s]-g[s])/5e-4;return o}return m+(l-h)/.001*(m-g)}}return this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,a,s,i,o,l=this.comp.renderedFrame,u=this.keyframes,h=u[0].t;if(l>=h)return this.pv;if(n?a=h+(r=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-h)):((!t||t>u.length-1)&&(t=u.length-1),r=(a=u[t].t)-h),"pingpong"===e){if(Math.floor((h-l)/r)%2==0)return this.getValueAtTime(((h-l)%r+h)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var c=this.getValueAtTime(h/this.comp.globalData.frameRate,0),d=this.getValueAtTime(a/this.comp.globalData.frameRate,0),p=this.getValueAtTime((r-(h-l)%r+h)/this.comp.globalData.frameRate,0),f=Math.floor((h-l)/r)+1;if(this.pv.length){for(i=(o=new Array(c.length)).length,s=0;s<i;s+=1)o[s]=p[s]-(d[s]-c[s])*f;return o}return p-(d-c)*f}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(i=(o=new Array(m.length)).length,s=0;s<i;s+=1)o[s]=m[s]+(m[s]-g[s])*(h-l)/.001;return o}return m+(m-g)*(h-l)/.001}}return this.getValueAtTime((r-((h-l)%r+h))/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,r,a=this.comp.renderedFrame/this.comp.globalData.frameRate,s=a-e,i=t>1?(a+e-s)/(t-1):1,o=0,l=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;o<t;){if(r=this.getValueAtTime(s+o*i),this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]+=r[l];else n+=r;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]/=t;else n/=t;return n}function r(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(e);t.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(e);t.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var a=this.sk.getValueAtTime(e),s=this.sa.getValueAtTime(e);t.skewFromAxis(-a*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var i=this.r.getValueAtTime(e);t.rotate(-i*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),u=this.rx.getValueAtTime(e),h=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(u*this.rx.mult).rotateZ(-h[2]*this.or.mult).rotateY(h[1]*this.or.mult).rotateX(h[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var c=this.px.getValueAtTime(e),d=this.py.getValueAtTime(e);if(this.data.p.z){var p=this.pz.getValueAtTime(e);t.translate(c*this.px.mult,d*this.py.mult,-p*this.pz.mult)}else t.translate(c*this.px.mult,d*this.py.mult,0)}else{var f=this.p.getValueAtTime(e);t.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return t}function a(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var i=s(e,t,n);return i.getValueAtTime=i.dynamicProperties.length?r.bind(i):a.bind(i),i.setGroupProperty=expressionHelpers.setGroupProperty,i};var i=PropertyFactory.getProp;PropertyFactory.getProp=function(r,a,s,o,l){var u=i(r,a,s,o,l);u.getValueAtTime=u.kf?expressionHelpers.getValueAtTime.bind(u):expressionHelpers.getStaticValueAtTime.bind(u),u.setGroupProperty=expressionHelpers.setGroupProperty,u.loopOut=e,u.loopIn=t,u.smooth=n,u.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(u),u.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(u),u.numKeys=1===a.a?a.k.length:0,u.propertyIndex=a.ix;var h=0;return 0!==s&&(h=createTypedArray("float32",1===a.a?a.k[0].s.length:a.k.length)),u._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:h},expressionHelpers.searchExpressions(r,a,u),u.k&&l.addDynamicProperty(u),u};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function u(){}u.prototype={vertices:function(e,t){this.k&&this.getValue();var n,r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));var a=r._length,s=r[e],i=r.v,o=createSizedArray(a);for(n=0;n<a;n+=1)o[n]="i"===e||"o"===e?[s[n][0]-i[n][0],s[n][1]-i[n][1]]:[s[n][0],s[n][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,a=this._segmentsLength,s=a.lengths,i=a.totalLength*e,o=0,l=s.length,u=0;o<l;){if(u+s[o].addedLength>i){var h=n.c&&o===l-1?0:o+1;r=bez.getPointInSegment(n.v[o],n.v[h],n.o[o],n.i[h],(i-u)/s[o].addedLength,s[o]);break}u+=s[o].addedLength,o+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(e,t,n){1==e?e=this.v.c:0==e&&(e=.999);var r=this.pointOnPath(e,t),a=this.pointOnPath(e+.001,t),s=a[0]-r[0],i=a[1]-r[1],o=Math.sqrt(Math.pow(s,2)+Math.pow(i,2));return 0===o?[0,0]:"tangent"===n?[s/o,i/o]:[-i/o,s/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([u],o),extendPrototype([u],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var h=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,r,a){var s=h(e,t,n,r,a);return s.propertyIndex=t.ix,s.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,s):4===n&&expressionHelpers.searchExpressions(e,t.ks,s),s.k&&e.addDynamicProperty(s),s}}(),TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var r={};return this.copyData(r,e),r.t=n.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(e,t,n){var r=t.sh;function a(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?a.path:null}var s=propertyGroupFactory(a,n);return r.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(a,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),a},propertyGroupFactory=function(e,t){return function(n){return(n=void 0===n?1:n)<=0?e:t(n-1)}},PropertyInterface=function(e,t){var n={_name:e};return function(e){return(e=void 0===e?1:e)<=0?n:t(e-1)}},ShapeExpressionInterface=function(){function e(e,i,d){var p,f=[],m=e?e.length:0;for(p=0;p<m;p+=1)"gr"===e[p].ty?f.push(t(e[p],i[p],d)):"fl"===e[p].ty?f.push(n(e[p],i[p],d)):"st"===e[p].ty?f.push(a(e[p],i[p],d)):"tm"===e[p].ty?f.push(s(e[p],i[p],d)):"tr"===e[p].ty||f.push("el"===e[p].ty?o(e[p],i[p],d):"sr"===e[p].ty?l(e[p],i[p],d):"sh"===e[p].ty?ShapePathInterface(e[p],i[p],d):"rc"===e[p].ty?u(e[p],i[p],d):"rd"===e[p].ty?h(e[p],i[p],d):"rp"===e[p].ty?c(e[p],i[p],d):"gf"===e[p].ty?r(e[p],i[p],d):function(){return null});return f}function t(t,n,r){var a=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return a.content;default:return a.transform}};a.propertyGroup=propertyGroupFactory(a,r);var s=function(t,n,r){var a,s=function(e){for(var t=0,n=a.length;t<n;){if(a[t]._name===e||a[t].mn===e||a[t].propertyIndex===e||a[t].ix===e||a[t].ind===e)return a[t];t+=1}return"number"==typeof e?a[e-1]:null};s.propertyGroup=propertyGroupFactory(s,r),a=e(t.it,n.it,s.propertyGroup),s.numProperties=a.length;var o=i(t.it[t.it.length-1],n.it[n.it.length-1],s.propertyGroup);return s.transform=o,s.propertyIndex=t.cix,s._name=t.nm,s}(t,n,a.propertyGroup),o=i(t.it[t.it.length-1],n.it[n.it.length-1],a.propertyGroup);return a.content=s,a.transform=o,Object.defineProperty(a,"_name",{get:function(){return t.nm}}),a.numProperties=t.np,a.propertyIndex=t.ix,a.nm=t.nm,a.mn=t.mn,a}function n(e,t,n){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function r(e,t,n){function r(e){return"Start Point"===e||"start point"===e?r.startPoint:"End Point"===e||"end point"===e?r.endPoint:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",n)),t.e.setGroupProperty(PropertyInterface("End Point",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function a(e,t,n){var r,a=propertyGroupFactory(u,n),s=propertyGroupFactory(l,a);function i(n){Object.defineProperty(l,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var o=e.d?e.d.length:0,l={};for(r=0;r<o;r+=1)i(r),t.d.dataProps[r].p.setGroupProperty(s);function u(e){return"Color"===e||"color"===e?u.color:"Opacity"===e||"opacity"===e?u.opacity:"Stroke Width"===e||"stroke width"===e?u.strokeWidth:null}return Object.defineProperties(u,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",a)),t.o.setGroupProperty(PropertyInterface("Opacity",a)),t.w.setGroupProperty(PropertyInterface("Stroke Width",a)),u}function s(e,t,n){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var a=propertyGroupFactory(r,n);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",a)),t.e.setGroupProperty(PropertyInterface("End",a)),t.o.setGroupProperty(PropertyInterface("Offset",a)),r.propertyIndex=e.ix,r.propertyGroup=n,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}function i(e,t,n){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var a=propertyGroupFactory(r,n);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",a)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",a)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",a)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",a)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",a)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",a)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",a))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",a)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=n,r}function o(e,t,n){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}var a=propertyGroupFactory(r,n);r.propertyIndex=e.ix;var s="tm"===t.sh.ty?t.sh.prop:t.sh;return s.s.setGroupProperty(PropertyInterface("Size",a)),s.p.setGroupProperty(PropertyInterface("Position",a)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:e.nm}}),r.mn=e.mn,r}function l(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}var a=propertyGroupFactory(r,n),s="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",a)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",a)),s.pt.setGroupProperty(PropertyInterface("Points",a)),s.p.setGroupProperty(PropertyInterface("Position",a)),s.r.setGroupProperty(PropertyInterface("Rotation",a)),e.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",a)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",a))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:e.nm}}),r.mn=e.mn,r}function u(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}var a=propertyGroupFactory(r,n),s="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,s.p.setGroupProperty(PropertyInterface("Position",a)),s.s.setGroupProperty(PropertyInterface("Size",a)),s.r.setGroupProperty(PropertyInterface("Rotation",a)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:e.nm}}),r.mn=e.mn,r}function h(e,t,n){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}var a=propertyGroupFactory(r,n),s=t;return r.propertyIndex=e.ix,s.rd.setGroupProperty(PropertyInterface("Radius",a)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}function c(e,t,n){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}var a=propertyGroupFactory(r,n),s=t;return r.propertyIndex=e.ix,s.c.setGroupProperty(PropertyInterface("Copies",a)),s.o.setGroupProperty(PropertyInterface("Offset",a)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:e.nm}}),r.mn=e.mn,r}return function(t,n,r){var a;function s(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?r:a[e-1];for(var t=0,n=a.length;t<n;){if(a[t]._name===e)return a[t];t+=1}return null}return s.propertyGroup=propertyGroupFactory(s,function(){return r}),a=e(t,n,s.propertyGroup),s.numProperties=a.length,s._name="Contents",s}}(),TextExpressionInterface=function(e){var t,n;function r(e){switch(e){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){e.textProperty.getValue();var r=e.textProperty.currentData.t;return r!==t&&(e.textProperty.currentData.t=t,(n=new String(r)).value=r||new String(r)),n}}),r},LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,e)}function n(e,t){var n=this.getMatrix(t);return this.applyPoint(n,e)}function r(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,e)}function a(e,t){var n=this.getMatrix(t);return this.invertPoint(n,e)}function s(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function i(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(u){var h;function c(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return c.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return h;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return c.effect;case"ADBE Text Properties":return c.textInterface;default:return null}}c.getMatrix=e,c.invertPoint=i,c.applyPoint=s,c.toWorld=n,c.toWorldVec=t,c.fromWorld=a,c.fromWorldVec=r,c.toComp=n,c.fromComp=o,c.sampleImage=l,c.sourceRectAtTime=u.sourceRectAtTime.bind(u),c._elem=u;var d=getDescriptor(h=TransformExpressionInterface(u.finalTransform.mProp),"anchorPoint");return Object.defineProperties(c,{hasParent:{get:function(){return u.hierarchy.length}},parent:{get:function(){return u.hierarchy[0].layerInterface}},rotation:getDescriptor(h,"rotation"),scale:getDescriptor(h,"scale"),position:getDescriptor(h,"position"),opacity:getDescriptor(h,"opacity"),anchorPoint:d,anchor_point:d,transform:{get:function(){return h}},active:{get:function(){return u.isInRange}}}),c.startTime=u.data.st,c.index=u.data.ind,c.source=u.data.refId,c.height=0===u.data.ty?u.data.h:100,c.width=0===u.data.ty?u.data.w:100,c.inPoint=u.data.ip/u.comp.globalData.frameRate,c.outPoint=u.data.op/u.comp.globalData.frameRate,c._name=u.data.nm,c.registerMaskInterface=function(e){c.mask=new MaskManagerInterface(e,u)},c.registerEffectsInterface=function(e){c.effect=e},c}}(),FootageInterface=(dataInterfaceFactory=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",n=e.getFootageData();function r(e){if(n[e])return t=e,"object"==typeof(n=n[e])?r:n;var a=e.indexOf(t);if(-1!==a){var s=parseInt(e.substr(a+t.length),10);return"object"==typeof(n=n[s])?r:n}return""}return function(){return t="",n=e.getFootageData(),r}}(e),t},function(e){function t(e){return"Data"===e?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(e),t}),dataInterfaceFactory,CompExpressionInterface=function(e){function t(t){for(var n=0,r=e.layers.length;n<r;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t},TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,r,a,s;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?s=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(a=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?s():[n(),r(),a?a():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),EffectsExpressionInterface=function(){function e(n,r,a,s){function i(e){for(var t=n.ef,r=0,a=t.length;r<a;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?u[r]:u[r]();r+=1}throw new Error}var o,l=propertyGroupFactory(i,a),u=[],h=n.ef.length;for(o=0;o<h;o+=1)u.push(5===n.ef[o].ty?e(n.ef[o],r.effectElements[o],r.effectElements[o].propertyGroup,s):t(r.effectElements[o],n.ef[o].ty,s,l));return"ADBE Color Control"===n.mn&&Object.defineProperty(i,"color",{get:function(){return u[0]()}}),Object.defineProperties(i,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:l}}),i.active=i.enabled=0!==n.en,i}function t(e,t,n,r){var a=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===t?n.comp.compInterface(e.p.v):a()}}return{createEffectsInterface:function(t,n){if(t.effectsManager){var r,a=[],s=t.data.ef,i=t.effectsManager.effectElements.length;for(r=0;r<i;r+=1)a.push(e(s[r],t.effectsManager.effectElements[r],n,t));var o=t.data.ef||[],l=function(e){for(r=0,i=o.length;r<i;){if(e===o[r].nm||e===o[r].mn||e===o[r].ix)return a[r];r+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,r=createSizedArray(t.viewData.length),a=t.viewData.length;for(n=0;n<a;n+=1)r[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<a;){if(t.masksProperties[n].nm===e)return r[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(!e.numKeys)return 0;var a;a="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var s="unidimensional"===n?new Number(a):Object.assign({},a);return s.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,s.value="unidimensional"===n?a[0]:a,s},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(a){return a?"unidimensional"===a.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,a=t.pv*r,s=new Number(a);return s.value=a,n(s,t,"unidimensional"),function(){return t.k&&t.getValue(),s.value!==(a=t.v*r)&&((s=new Number(a)).value=a,n(s,t,"unidimensional")),s}}(a):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,a=e.data&&e.data.l||e.pv.length,s=createTypedArray("float32",a),i=createTypedArray("float32",a);return s.value=i,n(s,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<a;t+=1)i[t]=e.v[t]*r,s[t]=i[t];return s}}(a):r}}(),propertyGetTextProp;function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n,r=e.ef||[];this.effectElements=[];var a,s=r.length;for(n=0;n<s;n+=1)a=new GroupEffect(r[n],t),this.effectElements.push(a)}function GroupEffect(e,t){this.init(e,t)}propertyGetTextProp=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(e,t,n){return 1===t.t?new TextExpressionSelectorPropFactory(e,t,n):propertyGetTextProp(e,t,n)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var n;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,a=this.data.ef.length,s=this.data.ef;for(n=0;n<a;n+=1){switch(r=null,s[n].ty){case 0:r=new SliderEffect(s[n],t,this);break;case 1:r=new AngleEffect(s[n],t,this);break;case 2:r=new ColorEffect(s[n],t,this);break;case 3:r=new PointEffect(s[n],t,this);break;case 4:case 7:r=new CheckboxEffect(s[n],t,this);break;case 10:r=new LayerIndexEffect(s[n],t,this);break;case 11:r=new MaskIndexEffect(s[n],t,this);break;case 5:r=new EffectsManager(s[n],t,this);break;default:r=new NoValueEffect(s[n],t,this)}r&&this.effectElements.push(r)}};var lottie={};function setLocationHref(e){locationHref=e}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function setIDPrefix(e){idPrefix=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&e>1&&(defaultCurveSegments=e);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var r=t[n].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.7.11";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",queryString;if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return factory(root)}).call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},mrSG:function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}n.d(t,"a",function(){return r})},n6bG:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},nYR2:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("7o/Q"),a=n("quSY");function s(e){return t=>t.lift(new i(e))}class i{constructor(e){this.callback=e}call(e,t){return t.subscribe(new o(e,this.callback))}}class o extends r.a{constructor(e,t){super(e),this.add(new a.a(t))}}},nZ9l:function(e,t,n){e.exports=n.p+"1.6d77e2e826fd9fe2f631.worker.js"},ngJS:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},oB13:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("EQ5u");function a(e,t){return function(n){let a;if(a="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new s(a,t));const i=Object.create(n,r.b);return i.source=n,i.subjectFactory=a,i}}class s{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:n}=this,r=this.subjectFactory(),a=n(r).subscribe(e);return a.add(t.subscribe(r)),a}}},ofXK:function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return De}),n.d(t,"c",function(){return Pe}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return Oe}),n.d(t,"f",function(){return ze}),n.d(t,"g",function(){return T}),n.d(t,"h",function(){return N}),n.d(t,"i",function(){return w}),n.d(t,"j",function(){return c}),n.d(t,"k",function(){return k}),n.d(t,"l",function(){return b}),n.d(t,"m",function(){return ge}),n.d(t,"n",function(){return be}),n.d(t,"o",function(){return ve}),n.d(t,"p",function(){return Ee}),n.d(t,"q",function(){return Se}),n.d(t,"r",function(){return Ie}),n.d(t,"s",function(){return _e}),n.d(t,"t",function(){return Te}),n.d(t,"u",function(){return A}),n.d(t,"v",function(){return u}),n.d(t,"w",function(){return C}),n.d(t,"x",function(){return Ve}),n.d(t,"y",function(){return je}),n.d(t,"z",function(){return F}),n.d(t,"A",function(){return D}),n.d(t,"B",function(){return R}),n.d(t,"C",function(){return z}),n.d(t,"D",function(){return Le}),n.d(t,"E",function(){return o}),n.d(t,"F",function(){return $e}),n.d(t,"G",function(){return s}),n.d(t,"H",function(){return me}),n.d(t,"I",function(){return i});var r=n("fXoL");let a=null;function s(){return a}function i(e){a||(a=e)}class o{}const l=new r.s("DocumentToken");let u=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Mb)({factory:h,token:e,providedIn:"platform"}),e})();function h(){return Object(r.ac)(d)}const c=new r.s("Location Initialized");let d=(()=>{class e extends u{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){p()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){p()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.ac(l))},e.\u0275prov=Object(r.Mb)({factory:f,token:e,providedIn:"platform"}),e})();function p(){return!!window.history.pushState}function f(){return new d(Object(r.ac)(l))}function m(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function g(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function y(e){return e&&"?"!==e[0]?"?"+e:e}let b=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Mb)({factory:x,token:e,providedIn:"root"}),e})();function x(e){const t=Object(r.ac)(l).location;return new A(Object(r.ac)(u),t&&t.origin||"")}const v=new r.s("appBaseHref");let A=(()=>{class e extends b{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return m(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const a=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(e,t,a)}replaceState(e,t,n,r){const a=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(e,t,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(u),r.ac(v,8))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends b{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=m(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let a=this.prepareExternalUrl(n+y(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,t,a)}replaceState(e,t,n,r){let a=this.prepareExternalUrl(n+y(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(u),r.ac(v,8))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),k=(()=>{class e{constructor(e,t){this._subject=new r.o,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=g(I(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+y(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,I(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.ac(b),r.ac(u))},e.normalizeQueryParams=y,e.joinWithSlash=m,e.stripTrailingSlash=g,e.\u0275prov=Object(r.Mb)({factory:S,token:e,providedIn:"root"}),e})();function S(){return new k(Object(r.ac)(b),Object(r.ac)(u))}function I(e){return e.replace(/\/index.html$/,"")}var _=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),E=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),T=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),C=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),N=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),M=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function F(e,t,n){const a=Object(r.nb)(e),s=B([a[r.db.DaysFormat],a[r.db.DaysStandalone]],t);return B(s,n)}function R(e,t,n){const a=Object(r.nb)(e),s=B([a[r.db.MonthsFormat],a[r.db.MonthsStandalone]],t);return B(s,n)}function D(e){return Object(r.nb)(e)[r.db.FirstDayOfWeek]}function O(e,t){return B(Object(r.nb)(e)[r.db.DateFormat],t)}function z(e,t){return B(Object(r.nb)(e)[r.db.TimeFormat],t)}function P(e,t){return B(Object(r.nb)(e)[r.db.DateTimeFormat],t)}function $(e,t){const n=Object(r.nb)(e),a=n[r.db.NumberSymbols][t];if(void 0===a){if(t===M.CurrencyDecimal)return n[r.db.NumberSymbols][M.Decimal];if(t===M.CurrencyGroup)return n[r.db.NumberSymbols][M.Group]}return a}const L=r.qb;function V(e){if(!e[r.db.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[r.db.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function B(e,t){for(let n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function W(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const j=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,H={},U=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var G=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),q=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),K=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function X(e,t,n,r){let a=function(e){if(le(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[t,n=1,r=1]=e.split("-").map(e=>+e);return Z(t,n-1,r)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let n;if(n=e.match(j))return function(e){const t=new Date(0);let n=0,r=0;const a=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),a.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const i=Number(e[4]||0)-n,o=Number(e[5]||0)-r,l=Number(e[6]||0),u=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,i,o,l,u),t}(n)}const t=new Date(e);if(!le(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=Y(n,t)||t;let s,i=[];for(;t;){if(s=U.exec(t),!s){i.push(t);break}{i=i.concat(s.slice(1));const e=i.pop();if(!e)break;t=e}}let o=a.getTimezoneOffset();r&&(o=oe(r,o),a=function(e,t,n){const r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(oe(t,r)-r))}(a,r));let l="";return i.forEach(e=>{const t=function(e){if(ie[e])return ie[e];let t;switch(e){case"G":case"GG":case"GGG":t=te(K.Eras,C.Abbreviated);break;case"GGGG":t=te(K.Eras,C.Wide);break;case"GGGGG":t=te(K.Eras,C.Narrow);break;case"y":t=ee(q.FullYear,1,0,!1,!0);break;case"yy":t=ee(q.FullYear,2,0,!0,!0);break;case"yyy":t=ee(q.FullYear,3,0,!1,!0);break;case"yyyy":t=ee(q.FullYear,4,0,!1,!0);break;case"Y":t=se(1);break;case"YY":t=se(2,!0);break;case"YYY":t=se(3);break;case"YYYY":t=se(4);break;case"M":case"L":t=ee(q.Month,1,1);break;case"MM":case"LL":t=ee(q.Month,2,1);break;case"MMM":t=te(K.Months,C.Abbreviated);break;case"MMMM":t=te(K.Months,C.Wide);break;case"MMMMM":t=te(K.Months,C.Narrow);break;case"LLL":t=te(K.Months,C.Abbreviated,T.Standalone);break;case"LLLL":t=te(K.Months,C.Wide,T.Standalone);break;case"LLLLL":t=te(K.Months,C.Narrow,T.Standalone);break;case"w":t=ae(1);break;case"ww":t=ae(2);break;case"W":t=ae(1,!0);break;case"d":t=ee(q.Date,1);break;case"dd":t=ee(q.Date,2);break;case"c":case"cc":t=ee(q.Day,1);break;case"ccc":t=te(K.Days,C.Abbreviated,T.Standalone);break;case"cccc":t=te(K.Days,C.Wide,T.Standalone);break;case"ccccc":t=te(K.Days,C.Narrow,T.Standalone);break;case"cccccc":t=te(K.Days,C.Short,T.Standalone);break;case"E":case"EE":case"EEE":t=te(K.Days,C.Abbreviated);break;case"EEEE":t=te(K.Days,C.Wide);break;case"EEEEE":t=te(K.Days,C.Narrow);break;case"EEEEEE":t=te(K.Days,C.Short);break;case"a":case"aa":case"aaa":t=te(K.DayPeriods,C.Abbreviated);break;case"aaaa":t=te(K.DayPeriods,C.Wide);break;case"aaaaa":t=te(K.DayPeriods,C.Narrow);break;case"b":case"bb":case"bbb":t=te(K.DayPeriods,C.Abbreviated,T.Standalone,!0);break;case"bbbb":t=te(K.DayPeriods,C.Wide,T.Standalone,!0);break;case"bbbbb":t=te(K.DayPeriods,C.Narrow,T.Standalone,!0);break;case"B":case"BB":case"BBB":t=te(K.DayPeriods,C.Abbreviated,T.Format,!0);break;case"BBBB":t=te(K.DayPeriods,C.Wide,T.Format,!0);break;case"BBBBB":t=te(K.DayPeriods,C.Narrow,T.Format,!0);break;case"h":t=ee(q.Hours,1,-12);break;case"hh":t=ee(q.Hours,2,-12);break;case"H":t=ee(q.Hours,1);break;case"HH":t=ee(q.Hours,2);break;case"m":t=ee(q.Minutes,1);break;case"mm":t=ee(q.Minutes,2);break;case"s":t=ee(q.Seconds,1);break;case"ss":t=ee(q.Seconds,2);break;case"S":t=ee(q.FractionalSeconds,1);break;case"SS":t=ee(q.FractionalSeconds,2);break;case"SSS":t=ee(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=ne(G.Short);break;case"ZZZZZ":t=ne(G.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=ne(G.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=ne(G.Long);break;default:return null}return ie[e]=t,t}(e);l+=t?t(a,n,o):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Z(e,t,n){const r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Y(e,t){const n=function(e){return Object(r.nb)(e)[r.db.LocaleId]}(e);if(H[n]=H[n]||{},H[n][t])return H[n][t];let a="";switch(t){case"shortDate":a=O(e,N.Short);break;case"mediumDate":a=O(e,N.Medium);break;case"longDate":a=O(e,N.Long);break;case"fullDate":a=O(e,N.Full);break;case"shortTime":a=z(e,N.Short);break;case"mediumTime":a=z(e,N.Medium);break;case"longTime":a=z(e,N.Long);break;case"fullTime":a=z(e,N.Full);break;case"short":const t=Y(e,"shortTime"),n=Y(e,"shortDate");a=J(P(e,N.Short),[t,n]);break;case"medium":const r=Y(e,"mediumTime"),s=Y(e,"mediumDate");a=J(P(e,N.Medium),[r,s]);break;case"long":const i=Y(e,"longTime"),o=Y(e,"longDate");a=J(P(e,N.Long),[i,o]);break;case"full":const l=Y(e,"fullTime"),u=Y(e,"fullDate");a=J(P(e,N.Full),[l,u])}return a&&(H[n][t]=a),a}function J(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function Q(e,t,n="-",r,a){let s="";(e<0||a&&e<=0)&&(a?e=1-e:(e=-e,s=n));let i=String(e);for(;i.length<t;)i="0"+i;return r&&(i=i.substr(i.length-t)),s+i}function ee(e,t,n=0,r=!1,a=!1){return function(s,i){let o=function(e,t){switch(e){case q.FullYear:return t.getFullYear();case q.Month:return t.getMonth();case q.Date:return t.getDate();case q.Hours:return t.getHours();case q.Minutes:return t.getMinutes();case q.Seconds:return t.getSeconds();case q.FractionalSeconds:return t.getMilliseconds();case q.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((n>0||o>-n)&&(o+=n),e===q.Hours)0===o&&-12===n&&(o=12);else if(e===q.FractionalSeconds)return l=t,Q(o,3).substr(0,l);var l;const u=$(i,M.MinusSign);return Q(o,t,u,r,a)}}function te(e,t,n=T.Format,a=!1){return function(s,i){return function(e,t,n,a,s,i){switch(n){case K.Months:return R(t,s,a)[e.getMonth()];case K.Days:return F(t,s,a)[e.getDay()];case K.DayPeriods:const o=e.getHours(),l=e.getMinutes();if(i){const e=function(e){const t=Object(r.nb)(e);return V(t),(t[r.db.ExtraData][2]||[]).map(e=>"string"==typeof e?W(e):[W(e[0]),W(e[1])])}(t),n=function(e,t,n){const a=Object(r.nb)(e);V(a);const s=B([a[r.db.ExtraData][0],a[r.db.ExtraData][1]],t)||[];return B(s,n)||[]}(t,s,a),i=e.findIndex(e=>{if(Array.isArray(e)){const[t,n]=e,r=o>=t.hours&&l>=t.minutes,a=o<n.hours||o===n.hours&&l<n.minutes;if(t.hours<n.hours){if(r&&a)return!0}else if(r||a)return!0}else if(e.hours===o&&e.minutes===l)return!0;return!1});if(-1!==i)return n[i]}return function(e,t,n){const a=Object(r.nb)(e),s=B([a[r.db.DayPeriodsFormat],a[r.db.DayPeriodsStandalone]],t);return B(s,n)}(t,s,a)[o<12?0:1];case K.Eras:return function(e,t){return B(Object(r.nb)(e)[r.db.Eras],t)}(t,a)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(s,i,e,t,n,a)}}function ne(e){return function(t,n,r){const a=-1*r,s=$(n,M.MinusSign),i=a>0?Math.floor(a/60):Math.ceil(a/60);switch(e){case G.Short:return(a>=0?"+":"")+Q(i,2,s)+Q(Math.abs(a%60),2,s);case G.ShortGMT:return"GMT"+(a>=0?"+":"")+Q(i,1,s);case G.Long:return"GMT"+(a>=0?"+":"")+Q(i,2,s)+":"+Q(Math.abs(a%60),2,s);case G.Extended:return 0===r?"Z":(a>=0?"+":"")+Q(i,2,s)+":"+Q(Math.abs(a%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}function re(e){return Z(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ae(e,t=!1){return function(n,r){let a;if(t){const e=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,t=n.getDate();a=1+Math.floor((t+e)/7)}else{const e=re(n),t=function(e){const t=Z(e,0,1).getDay();return Z(e,0,1+(t<=4?4:11)-t)}(e.getFullYear()),r=e.getTime()-t.getTime();a=1+Math.round(r/6048e5)}return Q(a,e,$(r,M.MinusSign))}}function se(e,t=!1){return function(n,r){return Q(re(n).getFullYear(),e,$(r,M.MinusSign),t)}}const ie={};function oe(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function le(e){return e instanceof Date&&!isNaN(e.valueOf())}const ue=/^(\d+)?\.((\d+)(-(\d+))?)?$/,he=".",ce="0";function de(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class pe{}let fe=(()=>{class e extends pe{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(L(t||this.locale)(e)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.w))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();function me(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,a]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(a)}return null}let ge=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(r.tb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.zb)(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.u),r.Qb(r.v),r.Qb(r.l),r.Qb(r.G))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class ye{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let be=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ye(null,this._ngForOf,-1,-1),null===r?void 0:r),a=new xe(e,n);t.push(a)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const a=this._viewContainer.get(n);this._viewContainer.move(a,r);const s=new xe(e,a);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S),r.Qb(r.O),r.Qb(r.u))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class xe{constructor(e,t){this.record=e,this.view=t}}let ve=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new Ae,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){we("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){we("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S),r.Qb(r.O))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class Ae{constructor(){this.$implicit=null,this.ngIf=null}}function we(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Object(r.zb)(t)}'.`)}class ke{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Se=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Lb({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),Ie=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new ke(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S),r.Qb(r.O),r.Qb(Se,9))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),_e=(()=>{class e{constructor(e,t,n){n._addDefault(new ke(e,t))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S),r.Qb(r.O),r.Qb(Se,9))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngSwitchDefault",""]]}),e})(),Ee=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.l),r.Qb(r.v),r.Qb(r.G))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),Te=(()=>{class e{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.S))},e.\u0275dir=r.Lb({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.Cb]}),e})();function Ce(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${Object(r.zb)(e)}'`)}class Ne{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Me{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const Fe=new Me,Re=new Ne;let De=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Object(r.vb)(t))return Fe;if(Object(r.wb)(t))return Re;throw Ce(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.h,16))},e.\u0275pipe=r.Pb({name:"async",type:e,pure:!1}),e})(),Oe=(()=>{class e{constructor(e){this.locale=e}transform(t,n="mediumDate",r,a){if(null==t||""===t||t!=t)return null;try{return X(t,n,a||this.locale,r)}catch(s){throw Ce(e,s.message)}}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.w,16))},e.\u0275pipe=r.Pb({name:"date",type:e,pure:!0}),e})(),ze=(()=>{class e{constructor(e){this._locale=e}transform(t,n,a){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;a=a||this._locale;try{return function(e,t,n){return function(e,t,n,r,a,s,i=!1){let o="",l=!1;if(isFinite(e)){let u=function(e){let t,n,r,a,s,i=Math.abs(e)+"",o=0;for((n=i.indexOf(he))>-1&&(i=i.replace(he,"")),(r=i.search(/e/i))>0?(n<0&&(n=r),n+=+i.slice(r+1),i=i.substring(0,r)):n<0&&(n=i.length),r=0;i.charAt(r)===ce;r++);if(r===(s=i.length))t=[0],n=1;else{for(s--;i.charAt(s)===ce;)s--;for(n-=r,t=[],a=0;r<=s;r++,a++)t[a]=Number(i.charAt(r))}return n>22&&(t=t.splice(0,21),o=n-1,n=1),{digits:t,exponent:o,integerLen:n}}(e);i&&(u=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(u));let h=t.minInt,c=t.minFrac,d=t.maxFrac;if(s){const e=s.match(ue);if(null===e)throw new Error(s+" is not a valid digit info");const t=e[1],n=e[3],r=e[5];null!=t&&(h=de(t)),null!=n&&(c=de(n)),null!=r?d=de(r):null!=n&&c>d&&(d=c)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,a=r.length-e.integerLen;const s=Math.min(Math.max(t,a),n);let i=s+e.integerLen,o=r[i];if(i>0){r.splice(Math.max(e.integerLen,i));for(let e=i;e<r.length;e++)r[e]=0}else{a=Math.max(0,a),e.integerLen=1,r.length=Math.max(1,i=s+1),r[0]=0;for(let e=1;e<i;e++)r[e]=0}if(o>=5)if(i-1<0){for(let t=0;t>i;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[i-1]++;for(;a<Math.max(0,s);a++)r.push(0);let l=0!==s;const u=t+e.integerLen,h=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,l&&(0===r[n]&&n>=u?r.pop():l=!1),t>=10?1:0},0);h&&(r.unshift(h),e.integerLen++)}(u,c,d);let p=u.digits,f=u.integerLen;const m=u.exponent;let g=[];for(l=p.every(e=>!e);f<h;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?g=p.splice(f,p.length):(g=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),o=y.join($(n,r)),g.length&&(o+=$(n,a)+g.join("")),m&&(o+=$(n,M.Exponential)+"+"+m)}else o=$(n,M.Infinity);return o=e<0&&!l?t.negPre+o+t.negSuf:t.posPre+o+t.posSuf,o}(e,function(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),a=r[0],s=r[1],i=-1!==a.indexOf(he)?a.split(he):[a.substring(0,a.lastIndexOf(ce)+1),a.substring(a.lastIndexOf(ce)+1)],o=i[0],l=i[1]||"";n.posPre=o.substr(0,o.indexOf("#"));for(let h=0;h<l.length;h++){const e=l.charAt(h);e===ce?n.minFrac=n.maxFrac=h+1:"#"===e?n.maxFrac=h+1:n.posSuf+=e}const u=o.split(",");if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){const e=a.length-n.posPre.length-n.posSuf.length,t=s.indexOf("#");n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return Object(r.nb)(e)[r.db.NumberFormats][t]}(t,_.Decimal),$(t,M.MinusSign)),t,M.Group,M.Decimal,n)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(t),a,n)}catch(s){throw Ce(e,s.message)}}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.w,16))},e.\u0275pipe=r.Pb({name:"number",type:e,pure:!0}),e})(),Pe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:[{provide:pe,useClass:fe}]}),e})();const $e="browser";function Le(e){return e===$e}let Ve=(()=>{class e{}return e.\u0275prov=Object(r.Mb)({token:e,providedIn:"root",factory:()=>new Be(Object(r.ac)(l),window)}),e})();class Be{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=We(this.window.history)||We(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function We(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class je{}},pLZG:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("7o/Q");function a(e,t){return function(n){return n.lift(new s(e,t))}}class s{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new i(e,this.predicate,this.thisArg))}}class i extends r.a{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},pxpQ:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var r=n("7o/Q"),a=n("WMd4");function s(e,t=0){return function(n){return n.lift(new i(e,t))}}class i{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new o(e,this.scheduler,this.delay))}}class o extends r.a{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(o.dispatch,this.delay,new l(e,this.destination)))}_next(e){this.scheduleMessage(a.a.createNext(e))}_error(e){this.scheduleMessage(a.a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.a.createComplete()),this.unsubscribe()}}class l{constructor(e,t){this.notification=e,this.destination=t}}},quSY:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("DH7j"),a=n("XoHu"),s=n("n6bG");const i=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let o=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:o,_unsubscribe:u,_subscriptions:h}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(Object(s.a)(u)){o&&(this._unsubscribe=void 0);try{u.call(this)}catch(c){t=c instanceof i?l(c.errors):[c]}}if(Object(r.a)(h)){let e=-1,n=h.length;for(;++e<n;){const n=h[e];if(Object(a.a)(n))try{n.unsubscribe()}catch(c){t=t||[],c instanceof i?t=t.concat(l(c.errors)):t.push(c)}}}if(t)throw new i(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var t;return e.EMPTY=((t=new e).closed=!0,t),e})();function l(e){return e.reduce((e,t)=>e.concat(t instanceof i?t.errors:t),[])}},tyNb:function(e,t,n){"use strict";n.d(t,"a",function(){return tt}),n.d(t,"b",function(){return Z}),n.d(t,"c",function(){return Sn}),n.d(t,"d",function(){return In}),n.d(t,"e",function(){return Tn}),n.d(t,"f",function(){return _n}),n.d(t,"g",function(){return Ln}),n.d(t,"h",function(){return Cn});var r=n("ofXK"),a=n("fXoL"),s=n("Cfvw"),i=n("LRne"),o=n("2Vo4"),l=n("itXk"),u=n("HDdC");const h=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var c=n("GyhO"),d=n("NXyV"),p=n("EY2u"),f=n("EQ5u"),m=n("XNiG"),g=n("lJxs"),y=n("eIep"),b=n("IzEk"),x=n("JX91"),v=n("7o/Q");function A(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new w(e,t,n))}}class w{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new k(e,this.accumulator,this.seed,this.hasSeed))}}class k extends v.a{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}var S=n("pLZG"),I=n("zx2A");function _(e){return function(t){const n=new E(e),r=t.lift(n);return n.caught=r}}class E{constructor(e){this.selector=e}call(e,t){return t.subscribe(new T(e,this.selector,this.caught))}}class T extends I.b{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new I.a(this);this.add(r);const a=Object(I.c)(n,r);a!==r&&this.add(a)}}}var C=n("5+tZ");function N(e,t){return Object(C.a)(e,t,1)}var M=n("4I5i");function F(e){return function(t){return 0===e?Object(p.b)():t.lift(new R(e))}}class R{constructor(e){if(this.total=e,this.total<0)throw new M.a}call(e,t){return t.subscribe(new D(e,this.total))}}class D extends v.a{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let a=0;a<n;a++){const a=t++%n;e.next(r[a])}}e.complete()}}function O(e=$){return t=>t.lift(new z(e))}class z{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new P(e,this.errorFactory))}}class P extends v.a{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function $(){return new h}function L(e=null){return t=>t.lift(new V(e))}class V{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new B(e,this.defaultValue))}}class B extends v.a{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var W=n("SpAZ");function j(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(S.a)((t,n)=>e(t,n,r)):W.a,Object(b.a)(1),n?L(t):O(()=>new h))}var H=n("vkgz"),U=n("x+ZX"),G=n("nYR2"),q=n("bHdf");class K{constructor(e,t){this.id=e,this.url=t}}class X extends K{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Z extends K{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Y extends K{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class J extends K{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ee extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class te extends K{constructor(e,t,n,r,a){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ne extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class re extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ae{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class se{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ie{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oe{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class le{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ue{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class he{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ce="primary";class de{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pe(e){return new de(e)}function fe(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function me(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const a={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))a[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}function ge(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let a;for(let s=0;s<n.length;s++)if(a=n[s],!ye(e[a],t[a]))return!1;return!0}function ye(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function be(e){return Array.prototype.concat.apply([],e)}function xe(e){return e.length>0?e[e.length-1]:null}function ve(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Ae(e){return Object(a.ub)(e)?e:Object(a.vb)(e)?Object(s.a)(Promise.resolve(e)):Object(i.a)(e)}const we={exact:function e(t,n,r){if(!Me(t.segments,n.segments))return!1;if(!Ee(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const a in n.children){if(!t.children[a])return!1;if(!e(t.children[a],n.children[a],r))return!1}return!0},subset:Ie},ke={exact:function(e,t){return ge(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ye(e[n],t[n]))},ignored:()=>!0};function Se(e,t,n){return we[n.paths](e.root,t.root,n.matrixParams)&&ke[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Ie(e,t,n){return _e(e,t,t.segments,n)}function _e(e,t,n,r){if(e.segments.length>n.length){const a=e.segments.slice(0,n.length);return!!Me(a,n)&&!t.hasChildren()&&!!Ee(a,n,r)}if(e.segments.length===n.length){if(!Me(e.segments,n))return!1;if(!Ee(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!Ie(e.children[n],t.children[n],r))return!1}return!0}{const a=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Me(e.segments,a)&&!!Ee(e.segments,a,r)&&!!e.children.primary&&_e(e.children.primary,t,s,r)}}function Ee(e,t,n){return t.every((t,r)=>ke[n](e[r].parameters,t.parameters))}class Te{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return De.serialize(this)}}class Ce{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ve(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oe(this)}}class Ne{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pe(this.parameters)),this._parameterMap}toString(){return We(this)}}function Me(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Fe{}class Re{parse(e){const t=new qe(e);return new Te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+ze(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${$e(t)}=${$e(e)}`).join("&"):`${$e(t)}=${$e(n)}`}).filter(e=>!!e);return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const De=new Re;function Oe(e){return e.segments.map(e=>We(e)).join("/")}function ze(e,t){if(!e.hasChildren())return Oe(e);if(t){const t=e.children.primary?ze(e.children.primary,!1):"",n=[];return ve(e.children,(e,t)=>{t!==ce&&n.push(`${t}:${ze(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return ve(e.children,(e,r)=>{r===ce&&(n=n.concat(t(e,r)))}),ve(e.children,(e,r)=>{r!==ce&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===ce?[ze(e.children.primary,!1)]:[`${n}:${ze(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Oe(e)}/${t[0]}`:`${Oe(e)}/(${t.join("//")})`}}function Pe(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $e(e){return Pe(e).replace(/%3B/gi,";")}function Le(e){return Pe(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ve(e){return decodeURIComponent(e)}function Be(e){return Ve(e.replace(/\+/g,"%20"))}function We(e){return`${Le(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Le(e)}=${Le(t[e])}`).join("")}`;var t}const je=/^[^\/()?;=#]+/;function He(e){const t=e.match(je);return t?t[0]:""}const Ue=/^[^=?&#]+/,Ge=/^[^?&#]+/;class qe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ce(e,t)),n}parseSegment(){const e=He(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ne(Ve(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=He(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=He(this.remaining);e&&(n=e,this.capture(n))}e[Ve(t)]=Ve(n)}parseQueryParam(e){const t=function(e){const t=e.match(Ue);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Ge);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Be(t),a=Be(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(a)}else e[r]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=He(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a=void 0;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=ce);const s=this.parseChildren();t[a]=1===Object.keys(s).length?s.primary:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ke{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xe(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Xe(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ze(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Ze(e,this._root).map(e=>e.value)}}function Xe(e,t){if(e===t.value)return t;for(const n of t.children){const t=Xe(e,n);if(t)return t}return null}function Ze(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Ze(e,n);if(r.length)return r.unshift(t),r}return[]}class Ye{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Je(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Qe extends Ke{constructor(e,t){super(e),this.snapshot=t,st(this,e)}toString(){return this.snapshot.toString()}}function et(e,t){const n=function(e,t){const n=new rt([],{},{},"",{},ce,t,null,e.root,-1,{});return new at("",new Ye(n,[]))}(e,t),r=new o.a([new Ne("",{})]),a=new o.a({}),s=new o.a({}),i=new o.a({}),l=new o.a(""),u=new tt(r,a,i,l,s,ce,t,n.root);return u.snapshot=n.root,new Qe(new Ye(u,[]),n)}class tt{constructor(e,t,n,r,a,s,i,o){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=s,this.component=i,this._futureSnapshot=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(g.a)(e=>pe(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(g.a)(e=>pe(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nt(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class rt{constructor(e,t,n,r,a,s,i,o,l,u,h){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=s,this.component=i,this.routeConfig=o,this._urlSegment=l,this._lastPathIndex=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class at extends Ke{constructor(e,t){super(t),this.url=e,st(this,t)}toString(){return it(this._root)}}function st(e,t){t.value._routerState=e,t.children.forEach(t=>st(e,t))}function it(e){const t=e.children.length>0?` { ${e.children.map(it).join(", ")} } `:"";return`${e.value}${t}`}function ot(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ge(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ge(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ge(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ge(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function lt(e,t){var n,r;return ge(e.params,t.params)&&Me(n=e.url,r=t.url)&&n.every((e,t)=>ge(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||lt(e.parent,t.parent))}function ut(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const a=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return ut(e,t,r);return ut(e,t)})}(e,t,n);return new Ye(r,a)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return ht(t,e),e}}const n=new tt(new o.a((r=t.value).url),new o.a(r.params),new o.a(r.queryParams),new o.a(r.fragment),new o.a(r.data),r.outlet,r.component,r),a=t.children.map(t=>ut(e,t));return new Ye(n,a)}var r}function ht(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)ht(e.children[n],t.children[n])}function ct(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function dt(e){return"object"==typeof e&&null!=e&&e.outlets}function pt(e,t,n,r,a){let s={};return r&&ve(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Te(n.root===e?t:ft(n.root,e,t),s,a)}function ft(e,t,n){const r={};return ve(e.children,(e,a)=>{r[a]=e===t?n:ft(e,t,n)}),new Ce(e.segments,r)}class mt{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&ct(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(dt);if(r&&r!==xe(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gt{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function yt(e,t,n){if(e||(e=new Ce([],{})),0===e.segments.length&&e.hasChildren())return bt(e,t,n);const r=function(e,t,n){let r=0,a=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;a<e.segments.length;){if(r>=n.length)return s;const t=e.segments[a],i=n[r];if(dt(i))break;const o=""+i,l=r<n.length-1?n[r+1]:null;if(a>0&&void 0===o)break;if(o&&l&&"object"==typeof l&&void 0===l.outlets){if(!wt(o,l,t))return s;r+=2}else{if(!wt(o,{},t))return s;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(e,t,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Ce(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Ce(e.segments.slice(r.pathIndex),e.children),bt(t,0,a)}return r.match&&0===a.length?new Ce(e.segments,{}):r.match&&!e.hasChildren()?xt(e,t,n):r.match?bt(e,0,a):xt(e,t,n)}function bt(e,t,n){if(0===n.length)return new Ce(e.segments,{});{const r=function(e){return dt(e[0])?e[0].outlets:{[ce]:e}}(n),a={};return ve(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(a[r]=yt(e.children[r],t,n))}),ve(e.children,(e,t)=>{void 0===r[t]&&(a[t]=e)}),new Ce(e.segments,a)}}function xt(e,t,n){const r=e.segments.slice(0,t);let a=0;for(;a<n.length;){const s=n[a];if(dt(s)){const e=vt(s.outlets);return new Ce(r,e)}if(0===a&&ct(n[0])){r.push(new Ne(e.segments[t].path,At(n[0]))),a++;continue}const i=dt(s)?s.outlets.primary:""+s,o=a<n.length-1?n[a+1]:null;i&&o&&ct(o)?(r.push(new Ne(i,At(o))),a+=2):(r.push(new Ne(i,{})),a++)}return new Ce(r,{})}function vt(e){const t={};return ve(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=xt(new Ce([],{}),0,e))}),t}function At(e){const t={};return ve(e,(e,n)=>t[n]=""+e),t}function wt(e,t,n){return e==n.path&&ge(t,n.parameters)}class kt{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),ot(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Je(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),ve(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,a=t?t.value:null;if(r===a)if(r.component){const a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else a&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,a=Je(e);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Je(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new ue(e.value.snapshot))}),e.children.length&&this.forwardEvent(new oe(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,a=t?t.value:null;if(ot(r),r===a)if(r.component){const a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),St(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),a=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=a,t.outlet&&t.outlet.activateWith(r,a),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function St(e){ot(e.value),e.children.forEach(St)}class It{constructor(e,t){this.routes=e,this.module=t}}function _t(e){return"function"==typeof e}function Et(e){return e instanceof Te}const Tt=Symbol("INITIAL_VALUE");function Ct(){return Object(y.a)(e=>Object(l.a)(e.map(e=>e.pipe(Object(b.a)(1),Object(x.a)(Tt)))).pipe(A((e,t)=>{let n=!1;return t.reduce((e,r,a)=>{if(e!==Tt)return e;if(r===Tt&&(n=!0),!n){if(!1===r)return r;if(a===t.length-1||Et(r))return r}return e},e)},Tt),Object(S.a)(e=>e!==Tt),Object(g.a)(e=>Et(e)?e:!0===e),Object(b.a)(1)))}let Nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Kb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a.Rb(0,"router-outlet")},directives:function(){return[Cn]},encapsulation:2}),e})();function Mt(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Ft(r,Rt(t,r))}}function Ft(e,t){e.children&&Mt(e.children,t)}function Rt(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Dt(e){const t=e.children&&e.children.map(Dt),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ce&&(n.component=Nt),n}function Ot(e){return e.outlet||ce}function zt(e,t){const n=e.filter(e=>Ot(e)===t);return n.push(...e.filter(e=>Ot(e)!==t)),n}const Pt={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $t(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Pt):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(t.matcher||me)(n,e,t);if(!a)return Object.assign({},Pt);const s={};ve(a.posParams,(e,t)=>{s[t]=e.path});const i=a.consumed.length>0?Object.assign(Object.assign({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:i,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Lt(e,t,n,r,a="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>Vt(e,t,n)&&Ot(n)!==ce)}(e,n,r)){const a=new Ce(t,function(e,t,n,r){const a={};a.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Ot(s)!==ce){const n=new Ce([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,a[Ot(s)]=n}return a}(e,t,r,new Ce(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Vt(e,t,n))}(e,n,r)){const s=new Ce(e.segments,function(e,t,n,r,a,s){const i={};for(const o of r)if(Vt(e,n,o)&&!a[Ot(o)]){const n=new Ce([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,i[Ot(o)]=n}return Object.assign(Object.assign({},a),i)}(e,t,n,r,e.children,a));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Ce(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Vt(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Bt(e,t,n,r){return!!(Ot(e)===r||r!==ce&&Vt(t,n,e))&&("**"===e.path||$t(t,e,n).matched)}function Wt(e,t,n){return 0===t.length&&!e.children[n]}class jt{constructor(e){this.segmentGroup=e||null}}class Ht{constructor(e){this.urlTree=e}}function Ut(e){return new u.a(t=>t.error(new jt(e)))}function Gt(e){return new u.a(t=>t.error(new Ht(e)))}function qt(e){return new u.a(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Kt{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(a.z)}apply(){const e=Lt(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ce(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ce).pipe(Object(g.a)(e=>this.createUrlTree(Xt(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_(e=>{if(e instanceof Ht)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof jt)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ce).pipe(Object(g.a)(t=>this.createUrlTree(Xt(t),e.queryParams,e.fragment))).pipe(_(e=>{if(e instanceof jt)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Ce([],{[ce]:e}):e;return new Te(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(g.a)(e=>new Ce([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const a of Object.keys(n.children))"primary"===a?r.unshift(a):r.push(a);return Object(s.a)(r).pipe(N(r=>{const a=n.children[r],s=zt(t,r);return this.expandSegmentGroup(e,s,a,r).pipe(Object(g.a)(e=>({segment:e,outlet:r})))}),A((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(S.a)((t,n)=>e(t,n,r)):W.a,F(1),n?L(t):O(()=>new h))}())}expandSegment(e,t,n,r,a,o){return Object(s.a)(n).pipe(N(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,a,o).pipe(_(e=>{if(e instanceof jt)return Object(i.a)(null);throw e}))),j(e=>!!e),_((e,n)=>{if(e instanceof h||"EmptyError"===e.name){if(Wt(t,r,a))return Object(i.a)(new Ce([],{}));throw new jt(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,a,s,i){return Bt(r,t,a,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,a,s):i&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,a,s):Ut(t):Ut(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,a,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Gt(a):this.lineralizeSegments(n,a).pipe(Object(C.a)(n=>{const a=new Ce(n,{});return this.expandSegment(e,a,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,a,s){const{matched:i,consumedSegments:o,lastChild:l,positionalParamSegments:u}=$t(t,r,a);if(!i)return Ut(t);const h=this.applyRedirectCommands(o,r.redirectTo,u);return r.redirectTo.startsWith("/")?Gt(h):this.lineralizeSegments(r,h).pipe(Object(C.a)(r=>this.expandSegment(e,t,n,r.concat(a.slice(l)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,a){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(i.a)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe(Object(g.a)(e=>(n._loadedConfig=e,new Ce(r,{})))):Object(i.a)(new Ce(r,{}));const{matched:s,consumedSegments:o,lastChild:l}=$t(t,n,r);if(!s)return Ut(t);const u=r.slice(l);return this.getChildConfig(e,n,r).pipe(Object(C.a)(e=>{const r=e.module,s=e.routes,{segmentGroup:l,slicedSegments:h}=Lt(t,o,u,s),c=new Ce(l.segments,l.children);if(0===h.length&&c.hasChildren())return this.expandChildren(r,s,c).pipe(Object(g.a)(e=>new Ce(o,e)));if(0===s.length&&0===h.length)return Object(i.a)(new Ce(o,{}));const d=Ot(n)===a;return this.expandSegment(r,c,s,h,d?ce:a,!0).pipe(Object(g.a)(e=>new Ce(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Object(i.a)(new It(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(i.a)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(Object(C.a)(n=>n?this.configLoader.load(e.injector,t).pipe(Object(g.a)(e=>(t._loadedConfig=e,e))):function(e){return new u.a(t=>t.error(fe(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Object(i.a)(new It([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return Object(i.a)(!0);const a=r.map(r=>{const a=e.get(r);let s;if(function(e){return e&&_t(e.canLoad)}(a))s=a.canLoad(t,n);else{if(!_t(a))throw new Error("Invalid CanLoad guard");s=a(t,n)}return Ae(s)});return Object(i.a)(a).pipe(Ct(),Object(H.a)(e=>{if(!Et(e))return;const t=fe(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),Object(g.a)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(i.a)(n);if(r.numberOfChildren>1||!r.children.primary)return qt(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const a=this.createSegmentGroup(e,t.root,n,r);return new Te(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return ve(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const a=e.substring(1);n[r]=t[a]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const a=this.createSegments(e,t.segments,n,r);let s={};return ve(t.children,(t,a)=>{s[a]=this.createSegmentGroup(e,t,n,r)}),new Ce(a,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Xt(e){const t={};for(const n of Object.keys(e.children)){const r=Xt(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Ce(e.segments.concat(t.segments),t.children)}return e}(new Ce(e.segments,t))}class Zt{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Yt{constructor(e,t){this.component=e,this.route=t}}function Jt(e,t,n){const r=e._root;return en(r,t?t._root:null,n,[r.value])}function Qt(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function en(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const s=Je(t);return e.children.forEach(e=>{!function(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,i=t?t.value:null,o=n?n.getContext(e.value.outlet):null;if(i&&s.routeConfig===i.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Me(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Me(e.url,t.url)||!ge(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lt(e,t)||!ge(e.queryParams,t.queryParams);case"paramsChange":default:return!lt(e,t)}}(i,s,s.routeConfig.runGuardsAndResolvers);l?a.canActivateChecks.push(new Zt(r)):(s.data=i.data,s._resolvedData=i._resolvedData),en(e,t,s.component?o?o.children:null:n,r,a),l&&o&&o.outlet&&o.outlet.isActivated&&a.canDeactivateChecks.push(new Yt(o.outlet.component,i))}else i&&tn(t,o,a),a.canActivateChecks.push(new Zt(r)),en(e,null,s.component?o?o.children:null:n,r,a)}(e,s[e.value.outlet],n,r.concat([e.value]),a),delete s[e.value.outlet]}),ve(s,(e,t)=>tn(e,n.getContext(t),a)),a}function tn(e,t,n){const r=Je(e),a=e.value;ve(r,(e,r)=>{tn(e,a.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Yt(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class nn{}function rn(e){return new u.a(t=>t.error(e))}class an{constructor(e,t,n,r,a,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}recognize(){const e=Lt(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ce);if(null===t)return null;const n=new rt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ce,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ye(n,t),a=new at(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,n=nt(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const a of Object.keys(t.children)){const r=t.children[a],s=zt(e,a),i=this.processSegmentGroup(s,r,a);if(null===i)return null;n.push(...i)}const r=on(n);return r.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const a of e){const e=this.processSegmentAgainstRoute(a,t,n,r);if(null!==e)return e}return Wt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!Bt(e,t,n,r))return null;let a,s=[],i=[];if("**"===e.path){const r=n.length>0?xe(n).parameters:{};a=new rt(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(e),Ot(e),e.component,e,ln(t),un(t)+n.length,cn(e))}else{const r=$t(t,e,n);if(!r.matched)return null;s=r.consumedSegments,i=n.slice(r.lastChild),a=new rt(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(e),Ot(e),e.component,e,ln(t),un(t)+s.length,cn(e))}const o=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=Lt(t,s,i,o.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const e=this.processChildren(o,l);return null===e?null:[new Ye(a,e)]}if(0===o.length&&0===u.length)return[new Ye(a,[])];const h=Ot(e)===r,c=this.processSegment(o,l,u,h?ce:r);return null===c?null:[new Ye(a,c)]}}function sn(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function on(e){const t=[],n=new Set;for(const r of e){if(!sn(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=on(r.children);t.push(new Ye(r.value,e))}return t.filter(e=>!n.has(e))}function ln(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function un(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function hn(e){return e.data||{}}function cn(e){return e.resolve||{}}function dn(e){return Object(y.a)(t=>{const n=e(t);return n?Object(s.a)(n).pipe(Object(g.a)(()=>t)):Object(i.a)(t)})}class pn extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fn=new a.s("ROUTES");class mn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe(Object(g.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new It(be(r.injector.get(fn,void 0,a.r.Self|a.r.Optional)).map(Dt),r)}),_(e=>{throw t._loader$=void 0,e}));return t._loader$=new f.a(n,()=>new m.a).pipe(Object(U.a)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?Object(s.a)(this.loader.load(e)):Ae(e()).pipe(Object(C.a)(e=>e instanceof a.x?Object(i.a)(e):Object(s.a)(this.compiler.compileModuleAsync(e))))}}class gn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new yn,this.attachRef=null}}class yn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new gn,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class bn{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xn(e){throw e}function vn(e,t,n){return t.parse("/")}function An(e,t){return Object(i.a)(null)}const wn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sn=(()=>{class e{constructor(e,t,n,r,s,i,l,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new m.a,this.errorHandler=xn,this.malformedUriErrorHandler=vn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:An,afterPreactivation:An},this.urlHandlingStrategy=new bn,this.routeReuseStrategy=new pn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(a.z),this.console=s.get(a.bb);const h=s.get(a.B);this.isNgZoneEnabled=h instanceof a.B&&a.B.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Te(new Ce([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mn(i,l,e=>this.triggerEvent(new ae(e)),e=>this.triggerEvent(new se(e))),this.routerState=et(this.currentUrlTree,this.rootComponentType),this.transitions=new o.a({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Object(S.a)(e=>0!==e.id),Object(g.a)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Object(y.a)(e=>{let n=!1,r=!1;return Object(i.a)(e).pipe(Object(H.a)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(y.a)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(i.a)(e).pipe(Object(y.a)(e=>{const n=this.transitions.getValue();return t.next(new X(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?p.a:Promise.resolve(e)}),(r=this.ngModule.injector,a=this.configLoader,s=this.urlSerializer,o=this.config,Object(y.a)(e=>function(e,t,n,r,a){return new Kt(e,t,n,r,a).apply()}(r,a,s,e.extractedUrl,o).pipe(Object(g.a)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),Object(H.a)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,a){return Object(C.a)(s=>function(e,t,n,r,a="emptyOnly",s="legacy"){try{const o=new an(e,t,n,r,a,s).recognize();return null===o?rn(new nn):Object(i.a)(o)}catch(o){return rn(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,a).pipe(Object(g.a)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(H.a)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new Q(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,a,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:a,restoredState:s,extras:o}=e,l=new X(n,this.serializeUrl(r),a,s);t.next(l);const u=et(r,this.rootComponentType).snapshot;return Object(i.a)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),p.a}),dn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:a,extras:{skipLocationChange:s,replaceUrl:i}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!i})}),Object(H.a)(e=>{const t=new ee(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Object(g.a)(e=>Object.assign(Object.assign({},e),{guards:Jt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return Object(C.a)(n=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:o,canDeactivateChecks:l}}=n;return 0===l.length&&0===o.length?Object(i.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return Object(s.a)(e).pipe(Object(C.a)(e=>function(e,t,n,r,a){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(i.a)(!0);const o=s.map(s=>{const i=Qt(s,t,a);let o;if(function(e){return e&&_t(e.canDeactivate)}(i))o=Ae(i.canDeactivate(e,t,n,r));else{if(!_t(i))throw new Error("Invalid CanDeactivate guard");o=Ae(i(e,t,n,r))}return o.pipe(j())});return Object(i.a)(o).pipe(Ct())}(e.component,e.route,n,t,r)),j(e=>!0!==e,!0))}(l,r,a,e).pipe(Object(C.a)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return Object(s.a)(t).pipe(N(t=>Object(c.a)(function(e,t){return null!==e&&t&&t(new ie(e)),Object(i.a)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new le(e)),Object(i.a)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Object(d.a)(()=>{const a=t.guards.map(a=>{const s=Qt(a,t.node,n);let i;if(function(e){return e&&_t(e.canActivateChild)}(s))i=Ae(s.canActivateChild(r,e));else{if(!_t(s))throw new Error("Invalid CanActivateChild guard");i=Ae(s(r,e))}return i.pipe(j())});return Object(i.a)(a).pipe(Ct())}));return Object(i.a)(a).pipe(Ct())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Object(i.a)(!0);const a=r.map(r=>Object(d.a)(()=>{const a=Qt(r,t,n);let s;if(function(e){return e&&_t(e.canActivate)}(a))s=Ae(a.canActivate(t,e));else{if(!_t(a))throw new Error("Invalid CanActivate guard");s=Ae(a(t,e))}return s.pipe(j())}));return Object(i.a)(a).pipe(Ct())}(e,t.route,n))),j(e=>!0!==e,!0))}(r,o,e,t):Object(i.a)(n)),Object(g.a)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),Object(H.a)(e=>{if(Et(e.guardsResult)){const t=fe(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new te(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Object(S.a)(e=>!!e.guardsResult||(this.cancelNavigationTransition(e,""),!1)),dn(e=>{if(e.guards.canActivateChecks.length)return Object(i.a)(e).pipe(Object(H.a)(e=>{const t=new ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Object(y.a)(e=>{let t=!1;return Object(i.a)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,Object(C.a)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:a}}=e;if(!a.length)return Object(i.a)(e);let o=0;return Object(s.a)(a).pipe(N(e=>function(e,t,n,r){return function(e,t,n,r){const a=Object.keys(e);if(0===a.length)return Object(i.a)({});const o={};return Object(s.a)(a).pipe(Object(C.a)(a=>function(e,t,n,r){const a=Qt(e,t,r);return Ae(a.resolve?a.resolve(t,n):a(t,n))}(e[a],t,n,r).pipe(Object(H.a)(e=>{o[a]=e}))),F(1),Object(C.a)(()=>Object.keys(o).length===a.length?Object(i.a)(o):p.a))}(e._resolve,e,t,r).pipe(Object(g.a)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),nt(e,n).resolve),null)))}(e.route,t,n,r)),Object(H.a)(()=>o++),F(1),Object(C.a)(t=>o===a.length?Object(i.a)(e):p.a))})),Object(H.a)({next:()=>t=!0,complete:()=>{t||this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value.")}}));var n,r}),Object(H.a)(e=>{const t=new re(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),dn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:a,extras:{skipLocationChange:s,replaceUrl:i}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!i})}),Object(g.a)(e=>{const t=function(e,t,n){const r=ut(e,t._root,n?n._root:void 0);return new Qe(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),Object(H.a)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(a=this.rootContexts,o=this.routeReuseStrategy,l=e=>this.triggerEvent(e),Object(g.a)(e=>(new kt(o,e.targetRouterState,e.currentRouterState,l).activate(a),e))),Object(H.a)({next(){n=!0},complete(){n=!0}}),Object(G.a)(()=>{n||r||this.cancelNavigationTransition(e,`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),_(n=>{if(r=!0,(a=n)&&a.ngNavigationCancelingError){const r=Et(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const a=new Y(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(a),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new J(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var a;return p.a}));var a,o,l}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,a={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(a.state=e)}this.scheduleNavigation(r,e,n,a)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Mt(e),this.config=e.map(Dt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:a,queryParamsHandling:s,preserveFragment:i}=t,o=n||this.routerState.root,l=i?this.currentUrlTree.fragment:a;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,a){if(0===n.length)return pt(t.root,t.root,t,r,a);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new mt(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,a)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return ve(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===a?(r.split("/").forEach((r,a)=>{0==a&&"."===r||(0==a&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new mt(n,t,r)}(n);if(s.toRoot())return pt(t.root,new Ce([],{}),t,r,a);const i=function(e,t,n){if(e.isAbsolute)return new gt(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new gt(e,e===t.root,0)}const r=ct(e.commands[0])?0:1;return function(e,t,n){let r=e,a=t,s=n;for(;s>a;){if(s-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new gt(r,!1,a-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),o=i.processChildren?bt(i.segmentGroup,i.index,s.commands):yt(i.segmentGroup,i.index,s.commands);return pt(i.segmentGroup,o,t,r,a)}(o,this.currentUrlTree,e,u,null!=l?l:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Et(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let a=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||t.skipLocationChange||t.replaceUrl)&&(a=this.location.getState()),this.scheduleNavigation(r,"imperative",a,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},wn):!1===t?Object.assign({},kn):t,Et(e))return Se(this.currentUrlTree,e,n);const r=this.parseUrl(e);return Se(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Z(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,a){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),i="imperative"!==t&&"imperative"===(null==s?void 0:s.source),o=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===e.toString();if(i&&o)return Promise.resolve(!0);let l,u,h;a?(l=a.resolve,u=a.reject,h=a.promise):h=new Promise((e,t)=>{l=e,u=t});const c=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:c,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){"computed"===this.canceledNavigationResolution?"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-e.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Y(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(a.ac(a.Q),a.ac(Fe),a.ac(yn),a.ac(r.k),a.ac(a.t),a.ac(a.y),a.ac(a.i),a.ac(void 0))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})(),In=(()=>{class e{constructor(e,t,n,r,a){this.router=e,this.route=t,this.commands=[],this.onChanges=new m.a,null==n&&r.setAttribute(a.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:En(this.skipLocationChange),replaceUrl:En(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:En(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(Sn),a.Qb(tt),a.bc("tabindex"),a.Qb(a.G),a.Qb(a.l))},e.\u0275dir=a.Lb({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&a.cc("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.Cb]}),e})(),_n=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new m.a,this.subscription=e.events.subscribe(e=>{e instanceof Z&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,a){if(0!==e||t||n||r||a)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:En(this.skipLocationChange),replaceUrl:En(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:En(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(Sn),a.Qb(tt),a.Qb(r.l))},e.\u0275dir=a.Lb({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&a.cc("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(a.Zb("href",t.href,a.sc),a.Fb("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.Cb]}),e})();function En(e){return""===e||!!e}let Tn=(()=>{class e{constructor(e,t,n,r,a,s){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.link=a,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof Z&&this.update()})}ngAfterContentInit(){Object(i.a)(this.links.changes,this.linksWithHrefs.changes,Object(i.a)(null)).pipe(Object(q.a)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=Object(s.a)(t).pipe(Object(q.a)()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){const t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>e.isActive(n.urlTree,t)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(Sn),a.Qb(a.l),a.Qb(a.G),a.Qb(a.h),a.Qb(In,8),a.Qb(_n,8))},e.\u0275dir=a.Lb({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(a.Jb(n,In,5),a.Jb(n,_n,5)),2&e){let e;a.nc(e=a.dc())&&(t.links=e),a.nc(e=a.dc())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[a.Cb]}),e})(),Cn=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.o,this.deactivateEvents=new a.o,this.name=r||ce,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,a=new Nn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,a),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(yn),a.Qb(a.S),a.Qb(a.j),a.bc("name"),a.Qb(a.h))},e.\u0275dir=a.Lb({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Nn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===tt?this.route:e===yn?this.childContexts:this.parent.get(e,t)}}class Mn{}class Fn{preload(e,t){return Object(i.a)(null)}}let Rn=(()=>{class e{constructor(e,t,n,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new mn(t,n,t=>e.triggerEvent(new ae(t)),t=>e.triggerEvent(new se(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(S.a)(e=>e instanceof Z),N(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.z);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return Object(s.a)(n).pipe(Object(q.a)(),Object(g.a)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?Object(i.a)(t._loadedConfig):this.loader.load(e.injector,t)).pipe(Object(C.a)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(a.ac(Sn),a.ac(a.y),a.ac(a.i),a.ac(a.t),a.ac(Mn))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})(),Dn=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof X?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Z&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof he&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new he(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.ac(Sn),a.ac(r.x),a.ac(void 0))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();const On=new a.s("ROUTER_CONFIGURATION"),zn=new a.s("ROUTER_FORROOT_GUARD"),Pn=[r.k,{provide:Fe,useClass:Re},{provide:Sn,useFactory:function(e,t,n,r,a,s,i,o={},l,u){const h=new Sn(null,e,t,n,r,a,s,be(i));return l&&(h.urlHandlingStrategy=l),u&&(h.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(o,h),o.enableTracing&&h.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: "+e.constructor.name),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),h},deps:[Fe,yn,r.k,a.t,a.y,a.i,fn,On,[class{},new a.C],[class{},new a.C]]},yn,{provide:tt,useFactory:function(e){return e.routerState.root},deps:[Sn]},{provide:a.y,useClass:a.N},Rn,Fn,class{preload(e,t){return t().pipe(_(()=>Object(i.a)(null)))}},{provide:On,useValue:{enableTracing:!1}}];function $n(){return new a.A("Router",Sn)}let Ln=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Pn,jn(t),{provide:zn,useFactory:Wn,deps:[[Sn,new a.C,new a.M]]},{provide:On,useValue:n||{}},{provide:r.l,useFactory:Bn,deps:[r.v,[new a.q(r.a),new a.C],On]},{provide:Dn,useFactory:Vn,deps:[Sn,r.x,On]},{provide:Mn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Fn},{provide:a.A,multi:!0,useFactory:$n},[Hn,{provide:a.d,multi:!0,useFactory:Un,deps:[Hn]},{provide:qn,useFactory:Gn,deps:[Hn]},{provide:a.b,multi:!0,useExisting:qn}]]}}static forChild(t){return{ngModule:e,providers:[jn(t)]}}}return e.\u0275fac=function(t){return new(t||e)(a.ac(zn,8),a.ac(Sn,8))},e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({}),e})();function Vn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Dn(e,t,n)}function Bn(e,t,n={}){return n.useHash?new r.i(e,t):new r.u(e,t)}function Wn(e){return"guarded"}function jn(e){return[{provide:a.a,multi:!0,useValue:e},{provide:fn,multi:!0,useValue:e}]}let Hn=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new m.a}appInitializer(){return this.injector.get(r.j,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Sn),r=this.injector.get(On);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(i.a)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(On),n=this.injector.get(Rn),r=this.injector.get(Dn),s=this.injector.get(Sn),i=this.injector.get(a.g);e===i.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return e.\u0275fac=function(t){return new(t||e)(a.ac(a.t))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e})();function Un(e){return e.appInitializer.bind(e)}function Gn(e){return e.bootstrapListener.bind(e)}const qn=new a.s("Router Initializer")},uOdT:function(e,t,n){e.exports=n.p+"0.34e9d222e4aa8b765157.worker.js"},vkgz:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("7o/Q"),a=n("KqfI"),s=n("n6bG");function i(e,t,n){return function(r){return r.lift(new o(e,t,n))}}class o{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new l(e,this.nextOrObserver,this.error,this.complete))}}class l extends r.a{constructor(e,t,n,r){super(e),this._tapNext=a.a,this._tapError=a.a,this._tapComplete=a.a,this._tapError=n||a.a,this._tapComplete=r||a.a,Object(s.a)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||a.a,this._tapError=t.error||a.a,this._tapComplete=t.complete||a.a)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},w0SX:function(e,t,n){e.exports=n.p+"8.308a1ccba887cb9a5145.worker.js"},w1tV:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("oB13"),a=n("x+ZX"),s=n("XNiG");function i(){return new s.a}function o(){return e=>Object(a.a)()(Object(r.a)(i)(e))}},"x+ZX":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("7o/Q");function a(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new i(e,n),a=t.subscribe(r);return r.closed||(r.connection=n.connect()),a}}class i extends r.a{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},xgIS:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("HDdC"),a=n("DH7j"),s=n("n6bG"),i=n("lJxs");function o(e,t,n,u){return Object(s.a)(n)&&(u=n,n=void 0),u?o(e,t,n).pipe(Object(i.a)(e=>Object(a.a)(e)?u(...e):u(e))):new r.a(r=>{l(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function l(e,t,n,r,a){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,a),s=()=>r.removeEventListener(t,n,a)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,i=e.length;s<i;s++)l(e[s],t,n,r,a)}r.add(s)}},yCtX:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("HDdC"),a=n("ngJS"),s=n("jZKg");function i(e,t){return t?Object(s.a)(e,t):new r.a(Object(a.a)(e))}},"z+Ro":function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},z6cu:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("HDdC");function a(e,t){return new r.a(t?n=>t.schedule(s,0,{error:e,subscriber:n}):t=>t.error(e))}function s({error:e,subscriber:t}){t.error(e)}},zUnb:function(e,t,n){"use strict";n.r(t);var r=n("fXoL"),a=n("AytR"),s=n("jhN1"),i=n("aceb"),o=n("tyNb");let l=(()=>{class e{constructor(){this.title="face-rec-app",this.methods=["log","debug","warn","info","error","assert","dir","profile"]}disableConsole(){this.oldConsole=Object.assign({},console),this.methods.forEach(e=>console[e]=()=>{})}enableConsole(){this.methods.forEach(e=>console[e]=this.oldConsole[e])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-root"]],decls:3,vars:0,template:function(e,t){1&e&&(r.Wb(0,"nb-layout"),r.Wb(1,"nb-layout-column"),r.Rb(2,"router-outlet"),r.Vb(),r.Vb())},directives:[i.y,i.x,o.h],styles:[""]}),e})();var u=n("R0Ic");function h(){return"undefined"!=typeof window&&void 0!==window.document}function c(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function d(e){switch(e.length){case 0:return new u.d;case 1:return e[0];default:return new u.k(e)}}function p(e,t,n,r,a={},s={}){const i=[],o=[];let l=-1,h=null;if(r.forEach(e=>{const n=e.offset,r=n==l,c=r&&h||{};Object.keys(e).forEach(n=>{let r=n,o=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,i),o){case u.l:o=a[n];break;case u.a:o=s[n];break;default:o=t.normalizeStyleValue(n,r,o,i)}c[r]=o}),r||o.push(c),h=c,l=n}),i.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${i.join(e)}`)}return o}function f(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&m(n,"start",e)));break;case"done":e.onDone(()=>r(n&&m(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&m(n,"destroy",e)))}}function m(e,t,n){const r=n.totalTime,a=g(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(a._data=s),a}function g(e,t,n,r,a="",s=0,i){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:a,totalTime:s,disabled:!!i}}function y(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function b(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let x=(e,t)=>!1,v=(e,t)=>!1,A=(e,t,n)=>[];const w=c();(w||"undefined"!=typeof Element)&&(x=h()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),v=(()=>{if(w||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):v}})(),A=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let k=null,S=!1;function I(e){k||(k=("undefined"!=typeof document?document.body:null)||{},S=!!k.style&&"WebkitAppearance"in k.style);let t=!0;return k.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in k.style,!t&&S)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in k.style),t}const _=v,E=x,T=A;function C(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let N=(()=>{class e{validateStyleProperty(e){return I(e)}matchesElement(e,t){return _(e,t)}containsElement(e,t){return E(e,t)}query(e,t,n){return T(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,a,s=[],i){return new u.d(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),M=(()=>{class e{}return e.NOOP=new N,e})();const F="ng-enter",R="ng-leave",D="ng-trigger",O=".ng-trigger",z="ng-animating",P=".ng-animating";function $(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:L(parseFloat(t[1]),t[2])}function L(e,t){switch(t){case"s":return 1e3*e;default:return e}}function V(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,a=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=L(parseFloat(n[1]),n[2]);const i=n[3];null!=i&&(a=L(parseFloat(i),n[4]));const o=n[5];o&&(s=o)}else r=e;if(!n){let n=!1,s=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),a<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:a,easing:s}}(e,t,n)}function B(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function W(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else B(e,n);return n}function j(e,t,n){return n?t+":"+n+";":""}function H(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=j(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=j(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function U(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const a=Q(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[a]),e.style[a]=t[r]}),c()&&H(e))}function G(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Q(t);e.style[n]=""}),c()&&H(e))}function q(e){return Array.isArray(e)?1==e.length?e[0]:Object(u.f)(e):e}const K=new RegExp("{{\\s*(.+?)\\s*}}","g");function X(e){let t=[];if("string"==typeof e){let n;for(;n=K.exec(e);)t.push(n[1]);K.lastIndex=0}return t}function Z(e,t,n){const r=e.toString(),a=r.replace(K,(e,r)=>{let a=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),a=""),a.toString()});return a==r?e:a}function Y(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const J=/-+([a-z0-9])/g;function Q(e){return e.replace(J,(...e)=>e[1].toUpperCase())}function ee(e,t){return 0===e||0===t}function te(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],i=[];if(r.forEach(e=>{s.hasOwnProperty(e)||i.push(e),s[e]=n[e]}),i.length)for(var a=1;a<t.length;a++){let n=t[a];i.forEach(function(t){n[t]=re(e,t)})}}return t}function ne(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function re(e,t){return window.getComputedStyle(e)[t]}const ae="*";function se(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const a=r[1],s=r[2],i=r[3];t.push(le(a,i)),"<"!=s[0]||a==ae&&i==ae||t.push(le(i,a))}(e,n,t)):n.push(e),n}const ie=new Set(["true","1"]),oe=new Set(["false","0"]);function le(e,t){const n=ie.has(e)||oe.has(e),r=ie.has(t)||oe.has(t);return(a,s)=>{let i=e==ae||e==a,o=t==ae||t==s;return!i&&n&&"boolean"==typeof a&&(i=a?ie.has(e):oe.has(e)),!o&&r&&"boolean"==typeof s&&(o=s?ie.has(t):oe.has(t)),i&&o}}const ue=new RegExp("s*:selfs*,?","g");function he(e,t,n){return new ce(e).build(t,n)}class ce{constructor(e){this._driver=e}build(e,t){const n=new de(t);return this._resetContextStyleTimingState(n),ne(this,q(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const a=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,a.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const a=this.visitTransition(e,t);n+=a.queryCount,r+=a.depCount,s.push(a)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const a=new Set,s=r||{};if(n.styles.forEach(e=>{if(pe(e)){const t=e;Object.keys(t).forEach(e=>{X(t[e]).forEach(e=>{s.hasOwnProperty(e)||a.add(e)})})}}),a.size){const n=Y(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=ne(this,q(e.animation),t);return{type:1,matchers:se(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:fe(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>ne(this,e,t)),options:fe(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const a=e.steps.map(e=>{t.currentTime=n;const a=ne(this,e,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:a,options:fe(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return me(V(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=me(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||V(r,t),me(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let a=e.styles?e.styles:Object(u.h)({});if(5==a.type)r=this.visitKeyframes(a,t);else{let a=e.styles,s=!1;if(!a){s=!0;const e={};n.easing&&(e.easing=n.easing),a=Object(u.h)(e)}t.currentTime+=n.duration+n.delay;const i=this.visitStyle(a,t);i.isEmptyStep=s,r=i}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==u.a?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,a=null;return n.forEach(e=>{if(pe(e)){const t=e,n=t.easing;if(n&&(a=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],i=s[n];let o=!0;i&&(a!=r&&a>=i.startTime&&r<=i.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${i.startTime}ms" and "${i.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${r}ms"`),o=!1),a=i.startTime),o&&(s[n]={startTime:a,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},a=X(e);a.length&&a.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const a=[];let s=!1,i=!1,o=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(pe(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(pe(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),i=i||u<0||u>1,s=s||u<o,o=u,a.push(u),n});i&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const u=e.steps.length;let h=0;r>0&&r<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(u-1));const c=u-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const s=h>0?r==c?1:h*r:a[r],i=s*f;t.currentTime=d+p.delay+i,p.duration=i,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:ne(this,q(e.animation),t),options:fe(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:fe(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:fe(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[a,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(ue,"")),[e=e.replace(/@\*/g,O).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,P),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,y(t.collectedStyles,t.currentQuerySelector,{});const i=ne(this,q(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:i,originalSelector:e.selector,options:fe(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:V(e.timings,t.errors,!0);return{type:12,animation:ne(this,q(e.animation),t),timings:n,options:null}}}class de{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function pe(e){return!Array.isArray(e)&&"object"==typeof e}function fe(e){var t;return e?(e=B(e)).params&&(e.params=(t=e.params)?B(t):null):e={},e}function me(e,t,n){return{duration:e,delay:t,easing:n}}function ge(e,t,n,r,a,s,i=null,o=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:a,delay:s,totalTime:a+s,easing:i,subTimeline:o}}class ye{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const be=new RegExp(":enter","g"),xe=new RegExp(":leave","g");function ve(e,t,n,r,a,s={},i={},o,l,u=[]){return(new Ae).buildKeyframes(e,t,n,r,a,s,i,o,l,u)}class Ae{buildKeyframes(e,t,n,r,a,s,i,o,l,u=[]){l=l||new ye;const h=new ke(e,t,l,r,a,u,[]);h.options=o,h.currentTimeline.setStyles([s],null,h.errors,o),ne(this,n,h);const c=h.timelines.filter(e=>e.containsAnimation());if(c.length&&Object.keys(i).length){const e=c[c.length-1];e.allowOnlyTimelineStyles()||e.setStyles([i],null,h.errors,o)}return c.length?c.map(e=>e.buildKeyframes()):[ge(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);a!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const a=null!=n.duration?$(n.duration):null,s=null!=n.delay?$(n.delay):null;return 0!==a&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,a,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),ne(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const a=e.options;if(a&&(a.params||a.delay)&&(r=t.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=we);const e=$(a.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>ne(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?$(e.options.delay):0;e.steps.forEach(s=>{const i=t.createSubContext(e.options);a&&i.delayNextStep(a),ne(this,s,i),r=Math.max(r,i.currentTimeline.currentTime),n.push(i.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return V(t.params?Z(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const a=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,a=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*a),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+a),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?$(r.delay):0;a&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=we);let s=n;const i=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=i.length;let o=null;i.forEach((n,r)=>{t.currentQueryIndex=r;const i=t.createSubContext(e.options,n);a&&i.delayNextStep(a),n===t.element&&(o=i.currentTimeline),ne(this,e.animation,i),i.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,i.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),o&&(t.currentTimeline.mergeTimelineCollectedStyles(o),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,a=e.timings,s=Math.abs(a.duration),i=s*(t.currentQueryTotal-1);let o=s*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":o=i-o;break;case"full":o=n.currentStaggerTime}const l=t.currentTimeline;o&&l.delayNextStep(o);const u=l.currentTime;ne(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const we={};class ke{constructor(e,t,n,r,a,s,i,o){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=a,this.errors=s,this.timelines=i,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=we,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=o||new Se(this._driver,t,0),i.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=$(n.duration)),null!=n.delay&&(r.delay=$(n.delay));const a=n.params;if(a){let e=r.params;e||(e=this.options.params={}),Object.keys(a).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Z(a[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,a=new ke(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=we,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},a=new Ie(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,a,s){let i=[];if(r&&i.push(this.element),e.length>0){e=(e=e.replace(be,"."+this._enterClassName)).replace(xe,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),i.push(...t)}return a||0!=i.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),i}}class Se{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Se(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||u.a,this._currentKeyframe[e]=u.a}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const a=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=u.a})):W(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=Z(s[e],a,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:u.a),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,s)=>{const i=W(a,!0);Object.keys(i).forEach(n=>{const r=i[n];r==u.l?e.add(n):r==u.a&&t.add(n)}),n||(i.offset=s/this.duration),r.push(i)});const a=e.size?Y(e.values()):[],s=t.size?Y(t.values()):[];if(n){const e=r[0],t=B(e);e.offset=0,t.offset=1,r=[e,t]}return ge(this.element,r,a,s,this.duration,this.startTime,this.easing,!1)}}class Ie extends Se{constructor(e,t,n,r,a,s,i=!1){super(e,t,s.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=i,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],s=n+t,i=t/s,o=W(e[0],!1);o.offset=0,a.push(o);const l=W(e[0],!1);l.offset=_e(i),a.push(l);const u=e.length-1;for(let r=1;r<=u;r++){let i=W(e[r],!1);i.offset=_e((t+i.offset*n)/s),a.push(i)}n=s,t=0,r="",e=a}return ge(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function _e(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Ee{}class Te extends Ee{normalizePropertyName(e,t){return Q(e)}normalizeStyleValue(e,t,n,r){let a="";const s=n.toString().trim();if(Ce[t]&&0!==n&&"0"!==n)if("number"==typeof n)a="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+a}}const Ce=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ne(e,t,n,r,a,s,i,o,l,u,h,c,d){return{type:0,element:e,triggerName:t,isRemovalTransition:a,fromState:n,fromStyles:s,toState:r,toStyles:i,timelines:o,queriedElements:l,preStyleProps:u,postStyleProps:h,totalTime:c,errors:d}}const Me={};class Fe{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,a){return e.some(e=>e(t,n,r,a))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],a=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return a?a.buildStyles(t,n):s}build(e,t,n,r,a,s,i,o,l,u){const h=[],c=this.ast.options&&this.ast.options.params||Me,d=this.buildStyles(n,i&&i.params||Me,h),p=o&&o.params||Me,f=this.buildStyles(r,p,h),m=new Set,g=new Map,b=new Map,x="void"===r,v={params:Object.assign(Object.assign({},c),p)},A=u?[]:ve(e,t,this.ast.animation,a,s,d,f,v,l,h);let w=0;if(A.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),h.length)return Ne(t,this._triggerName,n,r,x,d,f,[],[],g,b,w,h);A.forEach(e=>{const n=e.element,r=y(g,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const a=y(b,n,{});e.postStyleProps.forEach(e=>a[e]=!0),n!==t&&m.add(n)});const k=Y(m.values());return Ne(t,this._triggerName,n,r,x,d,f,A,k,g,b,w)}}class Re{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=B(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const a=e;Object.keys(a).forEach(e=>{let s=a[e];s.length>1&&(s=Z(s,r,t)),n[e]=s})}}),n}}class De{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Re(e.style,e.options&&e.options.params||{})}),Oe(this.states,"true","1"),Oe(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Fe(e,t,this.states))}),this.fallbackTransition=new Fe(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(a=>a.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Oe(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const ze=new ye;class Pe{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=he(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,a=p(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],a=this._animations[e];let s;const i=new Map;if(a?(s=ve(this._driver,t,a,F,R,{},{},n,ze,r),s.forEach(e=>{const t=y(i,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));i.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,u.a)})});const o=d(s.map(e=>{const t=i.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=o,o.onDestroy(()=>this.destroy(e)),this.players.push(o),o}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t}listen(e,t,n,r){const a=g(t,"","","");return f(this._getPlayer(e),n,a,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const $e="ng-animate-queued",Le="ng-animate-disabled",Ve=".ng-animate-disabled",Be=[],We={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},je={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class He{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=B(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const Ue="void",Ge=new He(Ue);class qe{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,et(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(a=n)&&"done"!=a)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var a;const s=y(this._elementListeners,e,[]),i={name:t,phase:n,callback:r};s.push(i);const o=y(this._engine.statesByElement,e,{});return o.hasOwnProperty(t)||(et(e,D),et(e,"ng-trigger-"+t),o[t]=Ge),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(i);e>=0&&s.splice(e,1),this._triggers[t]||delete o[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const a=this._getTrigger(t),s=new Xe(this.id,t,e);let i=this._engine.statesByElement.get(e);i||(et(e,D),et(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,i={}));let o=i[t];const l=new He(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&o&&l.absorbOptions(o.options),i[t]=l,o||(o=Ge),l.value!==Ue&&o.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let a=0;a<n.length;a++){const r=n[a];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(o.params,l.params)){const t=[],n=a.matchStyles(o.value,o.params,t),r=a.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{G(e,n),U(e,r)})}return}const u=y(this._engine.playersByElement,e,[]);u.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let h=a.matchTransition(o.value,l.value,e,l.params),c=!1;if(!h){if(!r)return;h=a.fallbackTransition,c=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:o,toState:l,player:s,isFallbackTransition:c}),c||(et(e,$e),s.onStart(()=>{tt(e,$e)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),u.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,O,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const a=this._engine.statesByElement.get(e);if(a){const s=[];if(Object.keys(a).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,Ue,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&d(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const a=t.name;if(r.has(a))return;r.add(a);const s=this._triggers[a].fallbackTransition,i=n[a]||Ge,o=new He(Ue),l=new Xe(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:s,fromState:i,toState:o,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==We||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){et(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const a=n.element,s=this._elementListeners.get(a);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=g(a,n.triggerName,n.fromState.value,n.toState.value);r._data=e,f(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Ke{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new qe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let a=n;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const a=n[e[r]].namespaceId;if(a){const e=this._fetchNamespace(a);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(Ze(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Ze(t))return;const a=t.__ng_removed;if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),et(e,Le)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),tt(e,Le))}removeNode(e,t,n,r){if(Ze(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,a){return Ze(t)?this._fetchNamespace(e).listen(t,n,r,a):()=>{}}_buildInstruction(e,t,n,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,O,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,P,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return d(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=We,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Ve)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Ve,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)et(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?d(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))}_flushAnimations(e,t){const n=new ye,r=[],a=new Map,s=[],i=new Map,o=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(e=>{h.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)h.add(t[n])});const c=this.bodyNode,p=Array.from(this.statesByElement.keys()),f=Qe(p,this.collectedEnterElements),m=new Map;let g=0;f.forEach((e,t)=>{const n=F+g++;m.set(t,n),e.forEach(e=>et(e,n))});const b=[],x=new Set,v=new Set;for(let u=0;u<this.collectedLeaveElements.length;u++){const e=this.collectedLeaveElements[u],t=e.__ng_removed;t&&t.setForRemoval&&(b.push(e),x.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>x.add(e)):v.add(e))}const A=new Map,w=Qe(p,Array.from(x));w.forEach((e,t)=>{const n=R+g++;A.set(t,n),e.forEach(e=>et(e,n))}),e.push(()=>{f.forEach((e,t)=>{const n=m.get(t);e.forEach(e=>tt(e,n))}),w.forEach((e,t)=>{const n=A.get(t);e.forEach(e=>tt(e,n))}),b.forEach(e=>{this.processLeaveNode(e)})});const k=[],S=[];for(let u=this._namespaceList.length-1;u>=0;u--)this._namespaceList[u].drainQueuedTransitions(t).forEach(e=>{const t=e.player,a=e.element;if(k.push(t),this.collectedEnterElements.length){const e=a.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const u=!c||!this.driver.containsElement(c,a),h=A.get(a),d=m.get(a),p=this._buildInstruction(e,n,d,h,u);if(p.errors&&p.errors.length)S.push(p);else{if(u)return t.onStart(()=>G(a,p.fromStyles)),t.onDestroy(()=>U(a,p.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>G(a,p.fromStyles)),t.onDestroy(()=>U(a,p.toStyles)),void r.push(t);p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(a,p.timelines),s.push({instruction:p,player:t,element:a}),p.queriedElements.forEach(e=>y(i,e,[]).push(t)),p.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=o.get(t);e||o.set(t,e=new Set),n.forEach(t=>e.add(t))}}),p.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(S.length){const e=[];S.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),k.forEach(e=>e.destroy()),this.reportError(e)}const I=new Map,_=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(_.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,I))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{y(I,t,[]).push(e),e.destroy()})});const E=b.filter(e=>at(e,o,l)),T=new Map;Je(T,this.driver,v,l,u.a).forEach(e=>{at(e,o,l)&&E.push(e)});const C=new Map;f.forEach((e,t)=>{Je(C,this.driver,new Set(e),o,u.l)}),E.forEach(e=>{const t=T.get(e),n=C.get(e);T.set(e,Object.assign(Object.assign({},t),n))});const N=[],M=[],D={};s.forEach(e=>{const{element:t,player:s,instruction:i}=e;if(n.has(t)){if(h.has(t))return s.onDestroy(()=>U(t,i.toStyles)),s.disabled=!0,s.overrideTotalTime(i.totalTime),void r.push(s);let e=D;if(_.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=_.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>_.set(t,e))}const n=this._buildAnimation(s.namespaceId,i,I,a,C,T);if(s.setRealPlayer(n),e===D)N.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=d(t)),r.push(s)}}else G(t,i.fromStyles),s.onDestroy(()=>U(t,i.toStyles)),M.push(s),h.has(t)&&r.push(s)}),M.forEach(e=>{const t=a.get(e.element);if(t&&t.length){const n=d(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let u=0;u<b.length;u++){const e=b[u],t=e.__ng_removed;if(tt(e,R),t&&t.hasAnimation)continue;let n=[];if(i.size){let t=i.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,P,!0);for(let e=0;e<r.length;e++){let t=i.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?nt(this,e,r):this.processLeaveNode(e)}return b.length=0,N.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),N}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,a){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!a||a==Ue;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&s.push(t)})}}return(n||r)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.element,a=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const i of t.timelines){const e=i.element,o=e!==r,l=y(n,e,[]);this._getPreviousPlayers(e,o,a,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}G(r,t.fromStyles)}_buildAnimation(e,t,n,r,a,s){const i=t.triggerName,o=t.element,l=[],h=new Set,c=new Set,f=t.timelines.map(t=>{const d=t.element;h.add(d);const f=d.__ng_removed;if(f&&f.removedBeforeQueried)return new u.d(t.duration,t.delay);const m=d!==o,g=function(e){const t=[];return rt(e,t),t}((n.get(d)||Be).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===d),y=a.get(d),b=s.get(d),x=p(0,this._normalizer,0,t.keyframes,y,b),v=this._buildPlayer(t,x,g);if(t.subTimeline&&r&&c.add(d),m){const t=new Xe(e,i,d);t.setRealPlayer(v),l.push(t)}return v});l.forEach(e=>{y(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),h.forEach(e=>et(e,z));const m=d(f);return m.onDestroy(()=>{h.forEach(e=>tt(e,z)),U(o,t.toStyles)}),c.forEach(e=>{y(r,e,[]).push(m)}),m}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new u.d(e.duration,e.delay)}}class Xe{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new u.d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>f(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){y(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ze(e){return e&&1===e.nodeType}function Ye(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Je(e,t,n,r,a){const s=[];n.forEach(e=>s.push(Ye(e)));const i=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,a);n&&0!=n.length||(r.__ng_removed=je,i.push(r))}),e.set(r,s)});let o=0;return n.forEach(e=>Ye(e,s[o++])),i}function Qe(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),a=new Map;function s(e){if(!e)return 1;let t=a.get(e);if(t)return t;const i=e.parentNode;return t=n.has(i)?i:r.has(i)?1:s(i),a.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function et(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function tt(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function nt(e,t,n){d(n).onDone(()=>e.processLeaveNode(t))}function rt(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof u.k?rt(r.players,t):t.push(r)}}function at(e,t,n){const r=n.get(e);if(!r)return!1;let a=t.get(e);return a?r.forEach(e=>a.add(e)):t.set(e,r),n.delete(e),!0}class st{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Ke(e,t,n),this._timelineEngine=new Pe(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,a){const s=e+"-"+r;let i=this._triggerCache[s];if(!i){const e=[],t=he(this._driver,a,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);i=function(e,t){return new De(e,t)}(r,t),this._triggerCache[s]=i}this._transitionEngine.registerTrigger(t,r,i)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,a]=b(n);this._timelineEngine.command(e,t,a,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,a){if("@"==n.charAt(0)){const[e,r]=b(n);return this._timelineEngine.listen(e,t,r,a)}return this._transitionEngine.listen(e,t,n,r,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function it(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=lt(t[0]),t.length>1&&(r=lt(t[t.length-1]))):t&&(n=lt(t)),n||r?new ot(e,n,r):null}let ot=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let a=e.initialStylesByElement.get(t);a||e.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&U(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(U(this._element,this._initialStyles),this._endStyles&&(U(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(G(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(G(this._element,this._endStyles),this._endStyles=null),U(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function lt(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const a=n[r];ut(a)&&(t=t||{},t[a]=e[a])}return t}function ut(e){return"display"===e||"position"===e}const ht="animation",ct="animationend";class dt{constructor(e,t,n,r,a,s,i){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=a,this._fillMode=s,this._onDoneFn=i,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=bt(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),yt(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),gt(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){pt(this._element,this._name,"paused")}resume(){pt(this._element,this._name,"running")}setPosition(e){const t=ft(this._element,this._name);this._position=e*this._duration,yt(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),gt(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=bt(e,"").split(","),r=mt(n,t);r>=0&&(n.splice(r,1),yt(e,"",n.join(",")))}(this._element,this._name))}}function pt(e,t,n){yt(e,"PlayState",n,ft(e,t))}function ft(e,t){const n=bt(e,"");return n.indexOf(",")>0?mt(n.split(","),t):mt([n],t)}function mt(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function gt(e,t,n){n?e.removeEventListener(ct,t):e.addEventListener(ct,t)}function yt(e,t,n,r){const a=ht+t;if(null!=r){const t=e.style[a];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[a]=n}function bt(e,t){return e.style[ht+t]||""}class xt{constructor(e,t,n,r,a,s,i,o){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=a,this._finalStyles=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new dt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:re(this.element,n))})}this.currentSnapshot=e}}class vt extends u.d{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=C(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class At{constructor(){this._count=0}validateStyleProperty(e){return I(e)}matchesElement(e,t){return _(e,t)}containsElement(e,t){return E(e,t)}query(e,t,n){return T(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>C(e));let r=`@keyframes ${t} {\n`,a="";n.forEach(e=>{a=" ";const t=parseFloat(e.offset);r+=`${a}${100*t}% {\n`,a+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${a}animation-timing-function: ${n};\n`));default:return void(r+=`${a}${t}: ${n};\n`)}}),r+=a+"}\n"}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(e,t,n,r,a,s=[],i){const o=s.filter(e=>e instanceof xt),l={};ee(n,r)&&o.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=te(e,t,l));if(0==n)return new vt(e,u);const h="gen_css_kf_"+this._count++,c=this.buildKeyframeElement(e,h,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(c);const d=it(e,t),p=new xt(e,t,h,n,r,a,u,d);return p.onDestroy(()=>{var e;(e=c).parentNode.removeChild(e)}),p}}class wt{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:re(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class kt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(St().toString()),this._cssKeyframesDriver=new At}validateStyleProperty(e){return I(e)}matchesElement(e,t){return _(e,t)}containsElement(e,t){return E(e,t)}query(e,t,n){return T(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,a,s=[],i){if(!i&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,a,s);const o={duration:n,delay:r,fill:0==r?"both":"forwards"};a&&(o.easing=a);const l={},u=s.filter(e=>e instanceof wt);ee(n,r)&&u.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const h=it(e,t=te(e,t=t.map(e=>W(e,!1)),l));return new wt(e,t,o,h)}}function St(){return h()&&Element.prototype.animate||{}}var It=n("ofXK");let _t=(()=>{class e extends u.b{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:r.T.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?Object(u.f)(e):e;return Ct(this._renderer,null,t,"register",[n]),new Et(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.H),r.ac(It.d))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class Et extends u.c{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Tt(this._id,e,t||{},this._renderer)}}class Tt{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ct(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Ct(e,t,n,r,a){return e.setProperty(t,`@@${n}:${r}`,a)}const Nt="@",Mt="@.disabled";let Ft=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new Rt("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(r,a,e,t.name,t)};return t.data.animation.forEach(s),new Dt(this,a,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.H),r.ac(st),r.ac(r.B))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class Rt{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Nt&&t==Mt?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Dt extends Rt{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Nt?"."==t.charAt(1)&&t==Mt?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Nt){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let a=t.substr(1),s="";return a.charAt(0)!=Nt&&([a,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(a)),this.engine.listen(this.namespaceId,r,a,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let Ot=(()=>{class e extends st{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(r.ac(It.d),r.ac(M),r.ac(Ee))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();const zt=new r.s("AnimationModuleType"),Pt=[{provide:u.b,useClass:_t},{provide:Ee,useFactory:function(){return new Te}},{provide:st,useClass:Ot},{provide:r.H,useFactory:function(e,t,n){return new Ft(e,t,n)},deps:[s.f,st,r.B]}],$t=[{provide:M,useFactory:function(){return"function"==typeof St()?new kt:new At}},{provide:zt,useValue:"BrowserAnimations"},...Pt],Lt=[{provide:M,useClass:N},{provide:zt,useValue:"NoopAnimations"},...Pt];let Vt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?Lt:$t}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:$t,imports:[s.a]}),e})();var Bt=n("NXyV"),Wt=n("z6cu"),jt=n("xgIS"),Ht=n("LRne"),Ut=n("GyhO"),Gt=n("XNiG"),qt=n("HDdC"),Kt=n("KqfI");const Xt=new qt.a(Kt.a);var Zt=n("VRyK"),Yt=n("lJxs"),Jt=n("pLZG"),Qt=n("eIep"),en=n("oB13"),tn=n("IzEk"),nn=n("vkgz"),rn=n("3E0/");const an="Service workers are disabled or not supported by this browser";class sn{constructor(e){if(this.serviceWorker=e,e){const t=Object(jt.a)(e,"controllerchange").pipe(Object(Yt.a)(()=>e.controller)),n=Object(Bt.a)(()=>Object(Ht.a)(e.controller)),r=Object(Ut.a)(n,t);this.worker=r.pipe(Object(Jt.a)(e=>!!e)),this.registration=this.worker.pipe(Object(Qt.a)(()=>e.getRegistration()));const a=Object(jt.a)(e,"message").pipe(Object(Yt.a)(e=>e.data)).pipe(Object(Jt.a)(e=>e&&e.type)).pipe(Object(en.a)(new Gt.a));a.connect(),this.events=a}else this.worker=this.events=this.registration=Object(Bt.a)(()=>Object(Wt.a)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(e,t){return this.worker.pipe(Object(tn.a)(1),Object(nn.a)(n=>{n.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithStatus(e,t,n){const r=this.waitForStatus(n),a=this.postMessage(e,t);return Promise.all([r,a]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){return this.events.pipe(Object(Jt.a)(t=>t.type===e))}nextEventOfType(e){return this.eventsOfType(e).pipe(Object(tn.a)(1))}waitForStatus(e){return this.eventsOfType("STATUS").pipe(Object(Jt.a)(t=>t.nonce===e),Object(tn.a)(1),Object(Yt.a)(e=>{if(!e.status)throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let on=(()=>{class e{constructor(e){if(this.sw=e,this.subscriptionChanges=new Gt.a,!e.isEnabled)return this.messages=Xt,this.notificationClicks=Xt,void(this.subscription=Xt);this.messages=this.sw.eventsOfType("PUSH").pipe(Object(Yt.a)(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Object(Yt.a)(e=>e.data)),this.pushManager=this.sw.registration.pipe(Object(Yt.a)(e=>e.pushManager));const t=this.pushManager.pipe(Object(Qt.a)(e=>e.getSubscription()));this.subscription=Object(Zt.a)(t,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(an));const t={userVisibleOnly:!0};let n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return t.applicationServerKey=r,this.pushManager.pipe(Object(Qt.a)(e=>e.subscribe(t)),Object(tn.a)(1)).toPromise().then(e=>(this.subscriptionChanges.next(e),e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Object(tn.a)(1),Object(Qt.a)(e=>{if(null===e)throw new Error("Not subscribed to push notifications.");return e.unsubscribe().then(e=>{if(!e)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(an))}decodeBase64(e){return atob(e)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(sn))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),ln=(()=>{class e{constructor(e){if(this.sw=e,!e.isEnabled)return this.available=Xt,this.activated=Xt,void(this.unrecoverable=Xt);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(an));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(an));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(sn))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})();class un{}const hn=new r.s("NGSW_REGISTER_SCRIPT");function cn(e,t,n,a){return()=>{if(!Object(It.D)(a)||!("serviceWorker"in navigator)||!1===n.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[t,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(t){case"registerImmediately":s=Object(Ht.a)(null);break;case"registerWithDelay":s=dn(+r[0]||0);break;case"registerWhenStable":s=r[0]?Object(Zt.a)(pn(e),dn(+r[0])):pn(e);break;default:throw new Error("Unknown ServiceWorker registration strategy: "+n.registrationStrategy)}}e.get(r.B).runOutsideAngular(()=>s.pipe(Object(tn.a)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(e=>console.error("Service worker registration failed with:",e))))}}function dn(e){return Object(Ht.a)(null).pipe(Object(rn.a)(e))}function pn(e){return e.get(r.g).isStable.pipe(Object(Jt.a)(e=>e))}function fn(e,t){return new sn(Object(It.D)(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}let mn=(()=>{class e{static register(t,n={}){return{ngModule:e,providers:[{provide:hn,useValue:t},{provide:un,useValue:n},{provide:sn,useFactory:fn,deps:[un,r.D]},{provide:r.d,useFactory:cn,deps:[r.t,hn,un,r.D],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({providers:[on,ln]}),e})();var gn=n("RxGz"),yn=n("mrSG"),bn=n("51Yw");const xn=["videoElement"];function vn(e,t){1&e&&(r.Ub(0),r.yc(1," Start "),r.Rb(2,"nb-icon",18),r.Tb())}function An(e,t){1&e&&(r.Ub(0),r.yc(1," Reset "),r.Rb(2,"nb-icon",19),r.Tb())}function wn(e,t){if(1&e&&(r.Wb(0,"p",14),r.Wb(1,"span",15),r.yc(2),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.Eb(2),r.zc(null==e?null:e.gesture)}}let kn=(()=>{class e{constructor(e,t){this.bioAuthService=e,this.location=t,this.constraints={video:{facingMode:"environment",width:a.a.frameWidth,height:a.a.frameHeight,frameRate:{ideal:60}}},this.isReady=!1,this.isLoading=!1,this.isReading=!1,this.useCamera=!0}ngOnInit(){this.bioAuthService.$result.subscribe(e=>{var t;console.log(e.humanResult),e.humanResult.face[0]&&(e.humanResult.face[0].iris=e.humanResult.face[0].iris||(null===(t=this.faceData)||void 0===t?void 0:t.iris),this.faceData=Object.assign(Object.assign({},this.faceData),e.humanResult.face[0])),e.humanResult.gesture.length&&(this.gestureData=e.humanResult.gesture),console.log(e),this.authFlags=e.authFlags})}ngAfterViewInit(){return Object(yn.a)(this,void 0,void 0,function*(){this.video=this.videoElement.nativeElement;const e=yield navigator.mediaDevices.getUserMedia(this.constraints);e&&(this.video.srcObject=e,yield this.video.play(),this.isReady=!0)})}goBack(){this.location.back()}toggleReading(){this.isReading=!this.isReading,this.isReading?this.bioAuthService.authenticate(this.video):this.bioAuthService.isRunningDetection=!1}clearReadingResults(){}ngOnDestroy(){this.bioAuthService.isRunningDetection=!1,this.video.pause(),this.video.srcObject.getTracks().forEach(e=>e.stop())}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(bn.a),r.Qb(It.k))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-face-matcher"]],viewQuery:function(e,t){if(1&e&&r.Bc(xn,5),2&e){let e;r.nc(e=r.dc())&&(t.videoElement=e.first)}},decls:81,vars:16,consts:[[1,"container-fluid","h-100"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"col-12","text-center"],[1,"row"],[1,"col-md-8"],["size","giant"],["height","100%",1,"mx-auto",3,"hidden"],["videoElement",""],["size","giant","status","success"],["nbButtonToggle","",3,"click"],["icon","close-circle"],[4,"ngIf"],[1,"col-md-4"],["expanded",""],[1,""],[1,"subtitle-2","mb-3"],[1,"h2","ml-3"],["class","",4,"ngFor","ngForOf"],["icon","play-circle"],["icon","stop-circle"]],template:function(e,t){if(1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"h1"),r.yc(4," Matching Analytics "),r.Vb(),r.Vb(),r.Wb(5,"div",2),r.Wb(6,"div",3),r.Wb(7,"div",4),r.Wb(8,"nb-card",5),r.Wb(9,"nb-card-header"),r.Wb(10,"h2"),r.yc(11," Camera "),r.Vb(),r.Vb(),r.Wb(12,"nb-card-body"),r.Rb(13,"video",6,7),r.Vb(),r.Wb(15,"nb-card-footer"),r.Wb(16,"nb-button-group",8),r.Wb(17,"button",9),r.cc("click",function(){return t.goBack()}),r.Rb(18,"nb-icon",10),r.yc(19," Close "),r.Vb(),r.Wb(20,"button",9),r.cc("click",function(){return t.toggleReading()}),r.wc(21,vn,3,0,"ng-container",11),r.wc(22,An,3,0,"ng-container",11),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(23,"div",12),r.Wb(24,"h2"),r.yc(25," Results: "),r.Vb(),r.Wb(26,"nb-accordion"),r.Wb(27,"nb-accordion-item",13),r.Wb(28,"nb-accordion-item-header"),r.yc(29),r.fc(30,"number"),r.Vb(),r.Wb(31,"nb-accordion-item-body"),r.Wb(32,"p",14),r.Wb(33,"span",15),r.yc(34,"Matched: "),r.Vb(),r.Wb(35,"span",16),r.yc(36),r.Vb(),r.Vb(),r.Wb(37,"p",14),r.Wb(38,"span",15),r.yc(39,"Mismatch: "),r.Vb(),r.Wb(40,"span",16),r.yc(41),r.Vb(),r.Vb(),r.Wb(42,"p",14),r.Wb(43,"span",15),r.yc(44,"Blinked: "),r.Vb(),r.Wb(45,"span",16),r.yc(46),r.Vb(),r.Vb(),r.Wb(47,"p",14),r.Wb(48,"span",15),r.yc(49,"Phone Visible: "),r.Vb(),r.Wb(50,"span",16),r.yc(51),r.Vb(),r.Vb(),r.Wb(52,"p",14),r.Wb(53,"span",15),r.yc(54,"Wrist Visible: "),r.Vb(),r.Wb(55,"span",16),r.yc(56),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(57,"nb-accordion-item"),r.Wb(58,"nb-accordion-item-header"),r.yc(59," Face Info: "),r.Vb(),r.Wb(60,"nb-accordion-item-body"),r.Wb(61,"p",14),r.Wb(62,"span",15),r.yc(63,"Gender: "),r.Vb(),r.Wb(64,"span",16),r.yc(65),r.Vb(),r.Vb(),r.Wb(66,"p",14),r.Wb(67,"span",15),r.yc(68,"Age: "),r.Vb(),r.Wb(69,"span",16),r.yc(70),r.Vb(),r.Vb(),r.Wb(71,"p",14),r.Wb(72,"span",15),r.yc(73,"Distance from screen (Iris): "),r.Vb(),r.Wb(74,"span",16),r.yc(75),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(76,"nb-accordion-item"),r.Wb(77,"nb-accordion-item-header"),r.yc(78," Gestures "),r.Vb(),r.Wb(79,"nb-accordion-item-body"),r.wc(80,wn,3,1,"p",17),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e){let e,n,a,s,i,o;r.Eb(13),r.kc("hidden",!t.useCamera),r.Eb(8),r.kc("ngIf",!t.isReading),r.Eb(1),r.kc("ngIf",t.isReading),r.Eb(7),r.Ac(" Authentication Details (",r.hc(30,13,100*(null!==(e=null==t.authFlags?null:t.authFlags.faceMatch)&&void 0!==e?e:0)/((null!==(e=null==t.authFlags?null:t.authFlags.faceMatch)&&void 0!==e?e:0)+((null==t.authFlags?null:t.authFlags.faceMisMatch)+1)),"1.0-2"),"%) "),r.Eb(7),r.Ac("",null!==(n=null==t.authFlags?null:t.authFlags.faceMatch)&&void 0!==n?n:0," "),r.Eb(5),r.Ac("",null!==(a=null==t.authFlags?null:t.authFlags.faceMisMatch)&&void 0!==a?a:0," "),r.Eb(5),r.Ac("",null!==(s=null==t.authFlags?null:t.authFlags.eyesClosed)&&void 0!==s?s:0," "),r.Eb(5),r.Ac("",null!==(i=null==t.authFlags?null:t.authFlags.phoneVisibleCount)&&void 0!==i?i:0," "),r.Eb(5),r.Ac("",null!==(o=null==t.authFlags?null:t.authFlags.wristVisibleCount)&&void 0!==o?o:0," "),r.Eb(9),r.Ac("",null==t.faceData?null:t.faceData.gender," "),r.Eb(5),r.Ac("",null==t.faceData?null:t.faceData.age," "),r.Eb(5),r.Ac("",null==t.faceData?null:t.faceData.iris," "),r.Eb(5),r.kc("ngForOf",t.gestureData)}},directives:[i.n,i.p,i.m,i.o,i.i,i.l,i.u,It.o,i.a,i.c,i.d,i.b,It.n],pipes:[It.f],styles:["video[_ngcontent-%COMP%]{border-radius:var(--card-border-radius);transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}"]}),e})();var Sn=n("PqYM"),In=n("2Vo4"),_n=n("1G5W"),En=n("Cfvw"),Tn=n("eNwd"),Cn=n("jtHE"),Nn=n("x+ZX"),Mn=n("pxpQ");const Fn=new r.s("LottieOptions");let Rn=(()=>{class e{constructor(e,t){this.ngZone=e,this.options=t,this.player$=function(e){const t=e();return t instanceof Promise?Object(En.a)(t).pipe(Object(Yt.a)(e=>e.default||e),function(e,t,n,r){const a=new Cn.a(1,void 0,void 0);return e=>Object(en.a)(()=>a,void 0)(e)}(),Object(Nn.a)()):Object(Ht.a)(t)}(this.options.player).pipe(Object(Mn.b)(Tn.a))}loadAnimation(e){return this.player$.pipe(Object(Yt.a)(t=>this.createAnimationItem(t,e)))}resolveOptions(e,t){return Object.assign({container:t,renderer:"svg",loop:!0,autoplay:!0},e)}createAnimationItem(e,t){return this.ngZone.runOutsideAngular(()=>e.loadAnimation(t))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(r.B),r.ac(Fn))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e})(),Dn=(()=>{class e{constructor(e,t,n){this.ngZone=e,this.platformId=t,this.animationLoader=n,this.options=null,this.containerClass=null,this.styles=null,this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.destroy$=new Gt.a,this.loadAnimation$=new Gt.a,this.animationItem$=new In.a(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroy$.next(),this.destroyAnimation()}loadAnimation(e,t){this.loadAnimation$.next([e,t])}getAnimationItem(){return Object(Bt.a)(()=>this.animationItem$).pipe(Object(Jt.a)(e=>null!==e))}awaitAnimationItemAndStartListening(e){return this.getAnimationItem().pipe(Object(Qt.a)(t=>new qt.a(n=>{t.addEventListener(e,e=>{this.ngZone.runOutsideAngular(()=>{n.next(e)})})})))}setupLoadAnimationListener(){this.loadAnimation$.pipe(Object(Jt.a)(([e])=>Object(It.D)(this.platformId)&&void 0!==e.options),Object(Qt.a)(([e,t])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(e.options.currentValue,t)))),Object(_n.a)(this.destroy$)).subscribe(e=>{this.animationItem$.next(e)})}destroyAnimation(){const e=this.animationItem$.getValue();null!==e&&(e.destroy(),this.animationItem$.next(null))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.B),r.Qb(r.D),r.Qb(Rn))},e.\u0275dir=r.Lb({type:e,selectors:[["","lottie",""]],inputs:{options:"options",containerClass:"containerClass",styles:"styles"},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}}),e})();const On=["container"];let zn=(()=>{class e extends Dn{constructor(e,t,n){super(e,t,n),this.width=null,this.height=null,this.container=null}ngOnChanges(e){super.loadAnimation(e,this.container.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.B),r.Qb(r.D),r.Qb(Rn))},e.\u0275cmp=r.Kb({type:e,selectors:[["ng-lottie"]],viewQuery:function(e,t){if(1&e&&r.Bc(On,7),2&e){let e;r.nc(e=r.dc())&&(t.container=e.first)}},inputs:{width:"width",height:"height"},features:[r.Bb,r.Cb],decls:2,vars:6,consts:[[3,"ngStyle","ngClass"],["container",""]],template:function(e,t){1&e&&r.Rb(0,"div",0,1),2&e&&(r.uc("width",t.width||"100%")("height",t.height||"100%"),r.kc("ngStyle",t.styles)("ngClass",t.containerClass))},directives:[It.p,It.m],encapsulation:2,changeDetection:0}),e})(),Pn=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[Rn,{provide:Fn,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[It.c]]}),e})();function $n(e,t){1&e&&(r.Wb(0,"p",12),r.yc(1,"Any moment now... \ud83d\udc4c\ud83c\udffe"),r.Vb())}function Ln(e,t){1&e&&(r.Wb(0,"p",12),r.yc(1,"Finally... \ud83d\ude05"),r.Vb())}let Vn=(()=>{class e{constructor(e,t,n){this.router=e,this.bioAuthService=t,this.ngZone=n,this.anim={path:"./assets/animations/lf30_editor_m7p8mca7.json"},this.workers=[],this.humanConfig={modelBasePath:"./models/"},this.options={path:"./assets/animations/lf30_editor_wy5zyka8.json",loop:!1},this.progress=0,this.isLoading=!1}ngOnInit(){return Object(yn.a)(this,void 0,void 0,function*(){})}ngAfterViewInit(){return Object(yn.a)(this,void 0,void 0,function*(){this.isLoading=!0,this.updateLoadingBar(),yield this.bioAuthService.initializeWorkers(),console.log("init complete"),this.isLoading=!1,yield Object(Sn.a)(2500).toPromise(),this.router.navigateByUrl("/set-reference")})}animationCreated(e){e.setSpeed(.5);let t=1;e.addEventListener("complete",()=>{t*=-1,e.setDirection(t),e.play()})}updateLoadingBar(){return Object(yn.a)(this,void 0,void 0,function*(){this.progress=0;let e=.5;for(;this.isLoading&&this.progress<98;)yield Object(Sn.a)(50).toPromise(),this.progress+=e,e-=e/260;this.isLoading||(this.progress=100)})}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.c),r.Qb(bn.a),r.Qb(r.B))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-home"]],decls:21,vars:5,consts:[[1,"container","h-100"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"col-12"],[1,"text-center",2,"font-size","3rem"],[1,"caption"],["height","300px",3,"options","animationCreated"],[1,"col-12","col-md-8","text-center","mx-auto","mt-5"],["size","tiny",3,"status","value"],["class","xyz-in mt-5","xyz","fade in",4,"ngIf"],[1,"mt-5"],["icon","heart"],["href","https://www.linkedin.com/in/michaelmadume/","target","blank"],["xyz","fade in",1,"xyz-in","mt-5"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"h1",3),r.yc(4," Face Recognition "),r.Rb(5,"br"),r.Wb(6,"span",4),r.yc(7," 100% Offline "),r.Vb(),r.Vb(),r.Vb(),r.Wb(8,"div",2),r.Wb(9,"ng-lottie",5),r.cc("animationCreated",function(e){return t.animationCreated(e)}),r.Vb(),r.Vb(),r.Wb(10,"div",6),r.Rb(11,"nb-progress-bar",7),r.wc(12,$n,2,0,"p",8),r.wc(13,Ln,2,0,"p",8),r.Wb(14,"p",9),r.yc(15,"Made with "),r.Rb(16,"nb-icon",10),r.yc(17," - "),r.Wb(18,"a",11),r.Wb(19,"b"),r.yc(20," Michael Madume"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Eb(9),r.kc("options",t.anim),r.Eb(2),r.lc("status",100!==t.progress?"primary":"success"),r.kc("value",t.progress),r.Eb(1),r.kc("ngIf",t.progress>40&&100!==t.progress),r.Eb(1),r.kc("ngIf",100===t.progress))},directives:[zn,i.A,It.o,i.u],styles:[""]}),e})();var Bn=n("4xwX");const Wn=["image"];function jn(e,t){if(1&e&&r.Rb(0,"img",13,14),2&e){const e=r.ec();r.kc("src",e.image1,r.sc)}}const Hn=[{path:"",component:Vn},{path:"set-reference",component:(()=>{class e{constructor(e,t,n,r){this.dialogService=e,this.cd=t,this.router=n,this.auth=r,this.closeness=0}ngOnInit(){}setPhoto(){return Object(yn.a)(this,void 0,void 0,function*(){const e=yield this.dialogService.open(Bn.a).onClose.toPromise();e&&(this.image1=e,yield this.auth.setReferenceImage(this.image1),yield Object(Sn.a)(1e3).toPromise(),this.router.navigateByUrl("/face-matcher"),this.cd.detectChanges())})}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(i.t),r.Qb(r.h),r.Qb(o.c),r.Qb(bn.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-reference-photo-form"]],viewQuery:function(e,t){if(1&e&&r.Bc(Wn,5),2&e){let e;r.nc(e=r.dc())&&(t.imageElement1=e.first)}},decls:24,vars:3,consts:[[1,"container","h-100"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"col-12","text-center"],[1,"col-6","mx-auto","text-center"],["size",""],[1,"col-12","pt-3"],[2,"min-height","330px !important"],["style"," width: 90%;","alt","",3,"src",4,"ngIf"],["size","giant","nbButton","","fullWidth","","status","primary","hero","",3,"disabled","nbSpinner","click"],[1,"col-12"],[1,"mt-2","text-center"],["icon","heart"],["href","https://www.linkedin.com/in/michaelmadume/","target","blank"],["alt","",2,"width","90%",3,"src"],["image",""]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"h1"),r.yc(4," Set Reference Picture "),r.Vb(),r.Vb(),r.Wb(5,"div",3),r.Wb(6,"nb-card",4),r.Wb(7,"nb-card-header"),r.Wb(8,"div",5),r.Wb(9,"h6"),r.yc(10,"Photo I"),r.Vb(),r.Vb(),r.Vb(),r.Wb(11,"nb-card-body",6),r.wc(12,jn,2,1,"img",7),r.Vb(),r.Wb(13,"nb-card-footer"),r.Wb(14,"button",8),r.cc("click",function(){return t.setPhoto()}),r.yc(15,"Set Photo"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",9),r.Wb(17,"p",10),r.yc(18,"Made with "),r.Rb(19,"nb-icon",11),r.yc(20," - "),r.Wb(21,"a",12),r.Wb(22,"b"),r.yc(23," Michael Madume"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Eb(12),r.kc("ngIf",t.image1),r.Eb(2),r.kc("disabled",(null==t.image1?null:t.image1.length)>0)("nbSpinner",(null==t.image1?null:t.image1.length)>0))},directives:[i.n,i.p,i.m,It.o,i.o,i.h,i.C,i.u],styles:[""]}),e})()},{path:"face-matcher",component:kn},{path:"compare",component:gn.a}];let Un=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({imports:[[o.g.forRoot(Hn)],o.g]}),e})();var Gn=n("lPHp"),qn=n.n(Gn),Kn=n("ZtdT");class Xn extends i.E{constructor(e,t){super(e,""),this.name=e,this.content=t}getContent(e){return this.content.toSvg(Object.assign({width:"100%",height:"100%",fill:"currentColor"},e))}}let Zn=(()=>{class e{constructor(e){this.NAME="eva",e.registerSvgPack(this.NAME,this.createIcons()),e.setDefaultPack(this.NAME)}createIcons(){return Object.entries(Kn.icons).map(([e,t])=>[e,new Xn(e,t)]).reduce((e,[t,n])=>(e[t]=n,e),{})}}return e.\u0275fac=function(t){return new(t||e)(r.ac(i.v))},e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({}),e})(),Yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ob({type:e,bootstrap:[l]}),e.\u0275inj=r.Nb({providers:[],imports:[[s.a,Vt,mn.register("ngsw-worker.js",{enabled:a.a.production,registrationStrategy:"registerWhenStable:30000"}),i.F.forRoot({name:"dark"}),i.z,Un,i.q,Pn.forRoot({player:()=>qn.a}),i.D,i.k,i.w,Zn,i.r.forRoot(),i.g,i.B,i.j,i.e]]}),e})(),Jn={};function Qn(){Jn.clear(),Jn.log("\n                           .s$$             s$\n                          s$$$\u2019            s$$\n                        .s$$$\xb3\xb4       ,   s$$\xb3\n                       s$$$$\xb3      .s$\u2019   $$\xb3\n                  ,    $$$$$.      s$\xb3    \xb3$\n                  $   $$$$$$s     s$\xb3     \xb3,\n                 s$   \u2018\xb3$$$$$$s   $$$\n                 $$    \xb3$$$$$$s.  \xb3$$s\n                 \xb3$.    \xb3$$$$$$$s .s$$$    s\xb4\n                 $$.    \xb3$$$$$$$ $$$$   s\xb3\n                  \xb3$$s    \xb3$$$$$$s$$$\xb3  s$\u2019\n                   \xb3$$s    $$$$$s$$$$\u2019  s$$\n               s.  $$$$   s$$$$$$$$\xb3 .s$$\xb3  s\n                $$ s$$$$..s$$$$$$$$$$$$$$\xb3  s$\n                s$.s$$$$s$$$$$$$$$$$$$$$$ s$$\n               s$$$$$$$$$$$$$$$$$$$$$$$$$$$\xb3\n              s$$$ssss$$$$$$$$$$$$$ssss$$$$$\xb4\n             $$s\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7s$$$$$$s\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7s$,\n             \xb3\xa7\xa7\xa7\xa7\xa7\xa7 Michael $ Madume \xa7\xa7\xa7\xa7\xa7s\n             \xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\n             \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\n              \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n               \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n                \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n                  \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n                    \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n                      \xb3\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xa7\xb3\n                         \xb3\xa7\xa7\xa7\xa7\xa7\xb3\n                           \xb3\xa7\xb3\n\n\nLogs are Disabled\n")}Jn=Object.assign({},console),a.a.production&&(Object(r.V)(),["log","debug","warn","info","error","assert","dir","profile"].forEach(e=>console[e]=()=>{}),Qn(),setInterval(()=>{Qn()},5e3)),s.e().bootstrapModule(Yn).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zx2A:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return l});var r=n("7o/Q"),a=n("HDdC"),s=n("SeVD");class i extends r.a{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class o extends r.a{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function l(e,t){if(t.closed)return;if(e instanceof a.a)return e.subscribe(t);let n;try{n=Object(s.a)(e)(t)}catch(r){t.error(r)}return n}}},[[0,0]]]);